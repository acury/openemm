/* ==========================================================================
   Emm JS - nightly build 25-07-2022
   ========================================================================== */

/* License
   ========================================================================== */

/**
 * EMM License to be added
 *
 **/



/* Libraries
   ========================================================================== */

/**
 * jQuery JavaScript Library v1.11.1
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * (c) 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Licensed under MIT (http://jquery.org/license)
 *
 * http://jquery.com
 **/

/**
 * Lo-Dash 2.4.1 (Custom Build)
 *
 * Build: `lodash -o ./dist/lodash.compat.js`
 *
 * Based on Underscore.js 1.5.2
 * Licensed under MIT (http://underscorejs.org/LICENSE)
 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 *
 * (c) 2012-2013 The Dojo Foundation http://dojofoundation.org/
 * Licensed under MIT (http://lodash.com/license)
 *
 * https://lodash.com/
 **/

 /**
 * D3.js 3.5.5
 *
 * Licensed under MIT (https://github.com/mbostock/d3/blob/master/LICENSE)
 * (c) 2010-2015, Michael Bostock
 *
 * http://d3js.org/
 **/

  /**
 * C3.js 0.4.10
 *
 * Licensed under MIT (https://github.com/masayuki0812/c3/blob/master/LICENSE)
 * (c) 2013 Masayuki Tanaka
 *
 * http://c3js.org/
 **/

/**
 * jQuery Plugins
 *
 * jquery-i18n v1.1.1
 * Licensed under MIT
 * (c) 2010 Dave Perrett
 * https://github.com/recurser/jquery-i18n
 *
 * jquery-migrate v1.2.1
 * Licensed under MIT
 * (c) 2005, 2013 jQuery Foundation, Inc. and other contributors
 * https://github.com/jquery/jquery-migrate
 *
 * jquery-select2 v3.5.2
 * Licensed under Apache License, Version 2.0 & GNU General Public License version 2
 * (c) 2012 Igor Vaynberg
 * https://ivaynberg.github.io/select2/
 *
 * jquery-mousewheel v3.1.9
 * Licensed under MIT
 * (c) 2013 Brandon Aaron
 * http://brandon.aaron.sh
 *
 * jquery-perfect-scrollbar v0.5.7
 * Licensed under MIT
 * (c) 2012, 2014 Hyunje Alex Jun and other contributors
 * https://noraesae.github.io/perfect-scrollbar/
 *
 * jquery DoubleScroll v0.4
 * Dual licensed under the MIT and GPL licenses
 * (c) Pawel Suwala, Antoine Vianey
 * https://github.com/avianey/jqDoubleScroll
 *
 * jquery Endless Scroll
 * Dual licensed under the MIT and GPL licenses
 * (c) 2008-2012 Fred Wu
 * https://github.com/fredwu/jquery-endless-scroll
 *
 * jQuery File Upload Plugin
 * Licensed under the MIT license
 * (c) 2010, Sebastian Tschan
 * https://github.com/blueimp/jQuery-File-Upload
 **/

/**
 * Bootstrap Components v3.2.0
 *
 * dropdown.js
 * modal.js
 * popover.js
 * tooltip.js
 *
 * (c) 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 *
 * http://getbootstrap.com/
 **/

/**
 * Bootstrap Extensions
 *
 * bootstrap-slider v4.8.1
 * Licensed under MIT
 * (c) 2015 Kyle Kemp, Rohit Kalkur, and contributors
 *
 * bootstrap-colorpicker v2.2.0
 * Licensed under Apache License v2.0
 * (c) 2012 Stefan Petre
 *
 **/

/**
 * jQuery UI v1.11.1
 *
 * core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
 *
 * (c) 2014 jQuery Foundation and other contributors
 * Licensed under MIT
 *
 * http://jqueryui.com
 **/

/**
 * Pickadate v3.5.4
 *
 * date.js
 * time.js
 * legacy.js
 *
 * (c) 2014 Amsul, http://amsul.ca
 * Licensed under https://github.com/amsul/pickadate.js/blob/3.5.4/LICENSE.md
 *
 * https://amsul.github.io/pickadate.js
 **/

/**
 * Ace Editor
 *
 * Distributed under the BSD license:

 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * http://ace.c9.io/
 **/

/**
 * iFrame Resizer v2.6.3
 *
 * (c) 2014 David J. Bradshaw - dave@bradshaw.net
 * Licensed under MIT
 *
 * https://davidjbradshaw.github.io/iframe-resizer/
 **/

/**
 * Toastr (modified version)
 *
 * (c) 2012-2014 John Papa and Hans Fj√§llemark
 * Licensed under MIT
 *
 * https://github.com/CodeSeven/toastr
 **/

/**
 * EmojiOne Area v v3.4.1
 *
 * EmojiOneArea is released under the MIT license.
 *
 * Copyright (c) 2015-2017 Andrey Izman <izmanw@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

var EndlessScroll,nativeSplit=(!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:this,function(C,$){"use strict";function y(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function g(e){return null!=e&&e===e.window}var t=[],I=Object.getPrototypeOf,a=t.slice,P=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},G=t.push,B=t.indexOf,W={},H=W.toString,V=W.hasOwnProperty,j=V.toString,z=j.call(Object),m={},_=C.document,U={type:!0,src:!0,nonce:!0,noModule:!0};function Y(e,t,i){var n,o,r=(i=i||_).createElement("script");if(r.text=e,t)for(n in U)(o=t[n]||t.getAttribute&&t.getAttribute(n))&&r.setAttribute(n,o);i.head.appendChild(r).parentNode.removeChild(r)}function f(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?W[H.call(e)]||"object":typeof e}var e="3.5.1",A=function(e,t){return new A.fn.init(e,t)};function q(e){var t=!!e&&"length"in e&&e.length,i=f(e);return!y(e)&&!g(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}A.fn=A.prototype={jquery:e,constructor:A,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=A.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return A.each(this,e)},map:function(i){return this.pushStack(A.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:G,sort:t.sort,splice:t.splice},A.extend=A.fn.extend=function(){var e,t,i,n,o,r=arguments[0]||{},s=1,a=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[s]||{},s++),"object"==typeof r||y(r)||(r={}),s===a&&(r=this,s--);s<a;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&r!==i&&(l&&i&&(A.isPlainObject(i)||(n=Array.isArray(i)))?(o=r[t],o=n&&!Array.isArray(o)?[]:n||A.isPlainObject(o)?o:{},n=!1,r[t]=A.extend(l,o,i)):void 0!==i&&(r[t]=i));return r},A.extend({expando:"jQuery"+(e+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==H.call(e))&&(!(e=I(e))||"function"==typeof(e=V.call(e,"constructor")&&e.constructor)&&j.call(e)===z)},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,i){Y(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(q(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(q(Object(e))?A.merge(t,"string"==typeof e?[e]:e):G.call(t,e)),t},inArray:function(e,t,i){return null==t?-1:B.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,r=e.length,s=!i;o<r;o++)!t(e[o],o)!=s&&n.push(e[o]);return n},map:function(e,t,i){var n,o,r=0,s=[];if(q(e))for(n=e.length;r<n;r++)null!=(o=t(e[r],r,i))&&s.push(o);else for(r in e)null!=(o=t(e[r],r,i))&&s.push(o);return P(s)},guid:1,support:m}),"function"==typeof Symbol&&(A.fn[Symbol.iterator]=t[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){W["[object "+t+"]"]=t.toLowerCase()});function n(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&A(e).is(i))break;n.push(e)}return n}function K(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}var e=function($){function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function I(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function P(){_()}var e,h,w,r,G,p,B,W,C,l,c,_,A,i,E,f,n,o,g,x="sizzle"+ +new Date,u=$.document,S=0,H=0,V=O(),j=O(),z=O(),m=O(),U=function(e,t){return e===t&&(c=!0),0},Y={}.hasOwnProperty,t=[],q=t.pop,K=t.push,T=t.push,X=t.slice,y=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",s="[\\x20\\t\\r\\n\\f]",a="(?:\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Z="\\["+s+"*("+a+")(?:"+s+"*([*^$|!~]?=)"+s+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+a+"))|)"+s+"*\\]",J=":("+a+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Z+")*)|.*)\\)|)",ee=new RegExp(s+"+","g"),v=new RegExp("^"+s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+s+"+$","g"),te=new RegExp("^"+s+"*,"+s+"*"),ie=new RegExp("^"+s+"*([>+~]|"+s+")"+s+"*"),ne=new RegExp(s+"|>"),oe=new RegExp(J),re=new RegExp("^"+a+"$"),b={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a+"|[*])"),ATTR:new RegExp("^"+Z),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+s+"*(even|odd|(([+-]|)(\\d*)n|)"+s+"*(?:([+-]|)"+s+"*(\\d+)|))"+s+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+s+"*((?:-\\d)?\\d*)"+s+"*\\)|)(?=[^-]|$)","i")},se=/HTML$/i,ae=/^(?:input|select|textarea|button)$/i,le=/^h\d$/i,k=/^[^{]+\{\s*\[native \w/,ce=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ue=/[+~]/,D=new RegExp("\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\([^\\r\\n\\f])","g"),de=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,he=ye(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{T.apply(t=X.call(u.childNodes),u.childNodes),t[u.childNodes.length].nodeType}catch(e){T={apply:t.length?function(e,t){K.apply(e,X.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function R(t,e,i,n){var o,r,s,a,l,c,u=e&&e.ownerDocument,d=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return i;if(!n&&(_(e),e=e||A,E)){if(11!==d&&(a=ce.exec(t)))if(o=a[1]){if(9===d){if(!(c=e.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(u&&(c=u.getElementById(o))&&g(e,c)&&c.id===o)return i.push(c),i}else{if(a[2])return T.apply(i,e.getElementsByTagName(t)),i;if((o=a[3])&&h.getElementsByClassName&&e.getElementsByClassName)return T.apply(i,e.getElementsByClassName(o)),i}if(h.qsa&&!m[t+" "]&&(!f||!f.test(t))&&(1!==d||"object"!==e.nodeName.toLowerCase())){if(c=t,u=e,1===d&&(ne.test(t)||ie.test(t))){for((u=ue.test(t)&&me(e.parentNode)||e)===e&&h.scope||((s=e.getAttribute("id"))?s=s.replace(de,I):e.setAttribute("id",s=x)),r=(l=p(t)).length;r--;)l[r]=(s?"#"+s:":scope")+" "+N(l[r]);c=l.join(",")}try{return T.apply(i,u.querySelectorAll(c)),i}catch(e){m(t,!0)}finally{s===x&&e.removeAttribute("id")}}}return W(t.replace(v,"$1"),e,i,n)}function O(){var i=[];function n(e,t){return i.push(e+" ")>w.cacheLength&&delete n[i.shift()],n[e+" "]=t}return n}function F(e){return e[x]=!0,e}function L(e){var t=A.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function pe(e,t){for(var i=e.split("|"),n=i.length;n--;)w.attrHandle[i[n]]=t}function fe(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&he(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function M(s){return F(function(r){return r=+r,F(function(e,t){for(var i,n=s([],e.length,r),o=n.length;o--;)e[i=n[o]]&&(e[i]=!(t[i]=e[i]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=R.support={},G=R.isXML=function(e){var t=e.namespaceURI,e=(e.ownerDocument||e).documentElement;return!se.test(t||e&&e.nodeName||"HTML")},_=R.setDocument=function(e){var e=e?e.ownerDocument||e:u;return e!=A&&9===e.nodeType&&e.documentElement&&(i=(A=e).documentElement,E=!G(A),u!=A&&(e=A.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",P,!1):e.attachEvent&&e.attachEvent("onunload",P)),h.scope=L(function(e){return i.appendChild(e).appendChild(A.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),h.attributes=L(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=L(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=k.test(A.getElementsByClassName),h.getById=L(function(e){return i.appendChild(e).id=x,!A.getElementsByName||!A.getElementsByName(x).length}),h.getById?(w.filter.ID=function(e){var t=e.replace(D,d);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&E)return(t=t.getElementById(e))?[t]:[]}):(w.filter.ID=function(e){var t=e.replace(D,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&E){var i,n,o,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(o=t.getElementsByName(e),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),w.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"!==e)return r;for(;i=r[o++];)1===i.nodeType&&n.push(i);return n},w.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&E)return t.getElementsByClassName(e)},n=[],f=[],(h.qsa=k.test(A.querySelectorAll))&&(L(function(e){var t;i.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+s+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+s+"*(?:value|"+Q+")"),e.querySelectorAll("[id~="+x+"-]").length||f.push("~="),(t=A.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+s+"*name"+s+"*="+s+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),L(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+s+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),i.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(h.matchesSelector=k.test(o=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector))&&L(function(e){h.disconnectedMatch=o.call(e,"*"),o.call(e,"[s!='']:x"),n.push("!=",J)}),f=f.length&&new RegExp(f.join("|")),n=n.length&&new RegExp(n.join("|")),e=k.test(i.compareDocumentPosition),g=e||k.test(i.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(i.contains?i.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=e?function(e,t){if(e===t)return c=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===i?e==A||e.ownerDocument==u&&g(u,e)?-1:t==A||t.ownerDocument==u&&g(u,t)?1:l?y(l,e)-y(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,n=0,o=e.parentNode,r=t.parentNode,s=[e],a=[t];if(!o||!r)return e==A?-1:t==A?1:o?-1:r?1:l?y(l,e)-y(l,t):0;if(o===r)return fe(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?fe(s[n],a[n]):s[n]==u?-1:a[n]==u?1:0}),A},R.matches=function(e,t){return R(e,null,null,t)},R.matchesSelector=function(e,t){if(_(e),h.matchesSelector&&E&&!m[t+" "]&&(!n||!n.test(t))&&(!f||!f.test(t)))try{var i=o.call(e,t);if(i||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){m(t,!0)}return 0<R(t,A,null,[e]).length},R.contains=function(e,t){return(e.ownerDocument||e)!=A&&_(e),g(e,t)},R.attr=function(e,t){(e.ownerDocument||e)!=A&&_(e);var i=w.attrHandle[t.toLowerCase()],i=i&&Y.call(w.attrHandle,t.toLowerCase())?i(e,t,!E):void 0;return void 0!==i?i:h.attributes||!E?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},R.escape=function(e){return(e+"").replace(de,I)},R.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},R.uniqueSort=function(e){var t,i=[],n=0,o=0;if(c=!h.detectDuplicates,l=!h.sortStable&&e.slice(0),e.sort(U),c){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return l=null,e},r=R.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=r(t);return i},(w=R.selectors={cacheLength:50,createPseudo:F,match:b,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(D,d),e[3]=(e[3]||e[4]||e[5]||"").replace(D,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||R.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&R.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return b.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&oe.test(i)&&(t=p(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(D,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+s+")"+e+"("+s+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(e){e=R.attr(e,t);return null==e?"!="===i:!i||(e+="","="===i?e===n:"!="===i?e!==n:"^="===i?n&&0===e.indexOf(n):"*="===i?n&&-1<e.indexOf(n):"$="===i?n&&e.slice(-n.length)===n:"~="===i?-1<(" "+e.replace(ee," ")+" ").indexOf(n):"|="===i&&(e===n||e.slice(0,n.length+1)===n+"-"))}},CHILD:function(f,e,t,g,m){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),b="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,i){var n,o,r,s,a,l,c=v!=y?"nextSibling":"previousSibling",u=e.parentNode,d=b&&e.nodeName.toLowerCase(),h=!i&&!b,p=!1;if(u){if(v){for(;c;){for(s=e;s=s[c];)if(b?s.nodeName.toLowerCase()===d:1===s.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&h){for(p=(a=(n=(o=(r=(s=u)[x]||(s[x]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===S&&n[1])&&n[2],s=a&&u.childNodes[a];s=++a&&s&&s[c]||(p=a=0)||l.pop();)if(1===s.nodeType&&++p&&s===e){o[f]=[S,a,p];break}}else if(!1===(p=h?a=(n=(o=(r=(s=e)[x]||(s[x]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===S&&n[1]:p))for(;(s=++a&&s&&s[c]||(p=a=0)||l.pop())&&((b?s.nodeName.toLowerCase()!==d:1!==s.nodeType)||!++p||(h&&((o=(r=s[x]||(s[x]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]=[S,p]),s!==e)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,r){var t,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||R.error("unsupported pseudo: "+e);return s[x]?s(r):1<s.length?(t=[e,e,"",r],w.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){for(var i,n=s(e,r),o=n.length;o--;)e[i=y(e,n[o])]=!(t[i]=n[o])}):function(e){return s(e,0,t)}):s}},pseudos:{not:F(function(e){var n=[],o=[],a=B(e.replace(v,"$1"));return a[x]?F(function(e,t,i,n){for(var o,r=a(e,null,n,[]),s=e.length;s--;)(o=r[s])&&(e[s]=!(t[s]=o))}):function(e,t,i){return n[0]=e,a(n,null,i,o),n[0]=null,!o.pop()}}),has:F(function(t){return function(e){return 0<R(t,e).length}}),contains:F(function(t){return t=t.replace(D,d),function(e){return-1<(e.textContent||r(e)).indexOf(t)}}),lang:F(function(i){return re.test(i||"")||R.error("unsupported lang: "+i),i=i.replace(D,d).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=$.location&&$.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===i},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return le.test(e.nodeName)},input:function(e){return ae.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:M(function(){return[0]}),last:M(function(e,t){return[t-1]}),eq:M(function(e,t,i){return[i<0?i+t:i]}),even:M(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:M(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:M(function(e,t,i){for(var n=i<0?i+t:t<i?t:i;0<=--n;)e.push(n);return e}),gt:M(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})w.pseudos[e]=function(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}(e);function ve(){}function N(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ye(s,e,t){var a=e.dir,l=e.next,c=l||a,u=t&&"parentNode"===c,d=H++;return e.first?function(e,t,i){for(;e=e[a];)if(1===e.nodeType||u)return s(e,t,i);return!1}:function(e,t,i){var n,o,r=[S,d];if(i){for(;e=e[a];)if((1===e.nodeType||u)&&s(e,t,i))return!0}else for(;e=e[a];)if(1===e.nodeType||u)if(o=(o=e[x]||(e[x]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[a]||e;else{if((n=o[c])&&n[0]===S&&n[1]===d)return r[2]=n[2];if((o[c]=r)[2]=s(e,t,i))return!0}return!1}}function be(o){return 1<o.length?function(e,t,i){for(var n=o.length;n--;)if(!o[n](e,t,i))return!1;return!0}:o[0]}function we(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,c=null!=t;a<l;a++)!(r=e[a])||i&&!i(r,n,o)||(s.push(r),c&&t.push(a));return s}function Ce(p,f,g,m,v,e){return m&&!m[x]&&(m=Ce(m)),v&&!v[x]&&(v=Ce(v,e)),F(function(e,t,i,n){var o,r,s,a=[],l=[],c=t.length,u=e||function(e,t,i){for(var n=0,o=t.length;n<o;n++)R(e,t[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),d=!p||!e&&f?u:we(u,a,p,i,n),h=g?v||(e?p:c||m)?[]:t:d;if(g&&g(d,h,i,n),m)for(o=we(h,l),m(o,[],i,n),r=o.length;r--;)(s=o[r])&&(h[l[r]]=!(d[l[r]]=s));if(e){if(v||p){if(v){for(o=[],r=h.length;r--;)(s=h[r])&&o.push(d[r]=s);v(null,h=[],o,n)}for(r=h.length;r--;)(s=h[r])&&-1<(o=v?y(e,s):a[r])&&(e[o]=!(t[o]=s))}}else h=we(h===t?h.splice(c,h.length):h),v?v(null,t,h,n):T.apply(t,h)})}function _e(m,v){function e(e,t,i,n,o){var r,s,a,l=0,c="0",u=e&&[],d=[],h=C,p=e||b&&w.find.TAG("*",o),f=S+=null==h?1:Math.random()||.1,g=p.length;for(o&&(C=t==A||t||o);c!==g&&null!=(r=p[c]);c++){if(b&&r){for(s=0,t||r.ownerDocument==A||(_(r),i=!E);a=m[s++];)if(a(r,t||A,i)){n.push(r);break}o&&(S=f)}y&&((r=!a&&r)&&l--,e&&u.push(r))}if(l+=c,y&&c!==l){for(s=0;a=v[s++];)a(u,d,t,i);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=q.call(n));d=we(d)}T.apply(n,d),o&&!e&&0<d.length&&1<l+v.length&&R.uniqueSort(n)}return o&&(S=f,C=h),u}var y=0<v.length,b=0<m.length;return y?F(e):e}return ve.prototype=w.filters=w.pseudos,w.setFilters=new ve,p=R.tokenize=function(e,t){var i,n,o,r,s,a,l,c=j[e+" "];if(c)return t?0:c.slice(0);for(s=e,a=[],l=w.preFilter;s;){for(r in i&&!(n=te.exec(s))||(n&&(s=s.slice(n[0].length)||s),a.push(o=[])),i=!1,(n=ie.exec(s))&&(i=n.shift(),o.push({value:i,type:n[0].replace(v," ")}),s=s.slice(i.length)),w.filter)!(n=b[r].exec(s))||l[r]&&!(n=l[r](n))||(i=n.shift(),o.push({value:i,type:r,matches:n}),s=s.slice(i.length));if(!i)break}return t?s.length:s?R.error(e):j(e,a).slice(0)},B=R.compile=function(e,t){var i,n=[],o=[],r=z[e+" "];if(!r){for(i=(t=t||p(e)).length;i--;)((r=function e(t){for(var n,i,o,r=t.length,s=w.relative[t[0].type],a=s||w.relative[" "],l=s?1:0,c=ye(function(e){return e===n},a,!0),u=ye(function(e){return-1<y(n,e)},a,!0),d=[function(e,t,i){return e=!s&&(i||t!==C)||((n=t).nodeType?c:u)(e,t,i),n=null,e}];l<r;l++)if(i=w.relative[t[l].type])d=[ye(be(d),i)];else{if((i=w.filter[t[l].type].apply(null,t[l].matches))[x]){for(o=++l;o<r&&!w.relative[t[o].type];o++);return Ce(1<l&&be(d),1<l&&N(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(v,"$1"),i,l<o&&e(t.slice(l,o)),o<r&&e(t=t.slice(o)),o<r&&N(t))}d.push(i)}return be(d)}(t[i]))[x]?n:o).push(r);(r=z(e,_e(o,n))).selector=e}return r},W=R.select=function(e,t,i,n){var o,r,s,a,l,c="function"==typeof e&&e,u=!n&&p(e=c.selector||e);if(i=i||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(s=r[0]).type&&9===t.nodeType&&E&&w.relative[r[1].type]){if(!(t=(w.find.ID(s.matches[0].replace(D,d),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=b.needsContext.test(e)?0:r.length;o--&&(s=r[o],!w.relative[a=s.type]);)if((l=w.find[a])&&(n=l(s.matches[0].replace(D,d),ue.test(r[0].type)&&me(t.parentNode)||t))){if(r.splice(o,1),e=n.length&&N(r))break;return T.apply(i,n),i}}return(c||B(e,u))(n,t,!E,i,!t||ue.test(e)&&me(t.parentNode)||t),i},h.sortStable=x.split("").sort(U).join("")===x,h.detectDuplicates=!!c,_(),h.sortDetached=L(function(e){return 1&e.compareDocumentPosition(A.createElement("fieldset"))}),L(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&L(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),L(function(e){return null==e.getAttribute("disabled")})||pe(Q,function(e,t,i){if(!i)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),R}(C),X=(A.find=e,A.expr=e.selectors,A.expr[":"]=A.expr.pseudos,A.uniqueSort=A.unique=e.uniqueSort,A.text=e.getText,A.isXMLDoc=e.isXML,A.contains=e.contains,A.escapeSelector=e.escape,A.expr.match.needsContext);function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var Q=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Z(e,i,n){return y(i)?A.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?A.grep(e,function(e){return e===i!==n}):"string"!=typeof i?A.grep(e,function(e){return-1<B.call(i,e)!==n}):A.filter(i,e,n)}A.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?A.find.matchesSelector(n,e)?[n]:[]:A.find.matches(e,A.grep(t,function(e){return 1===e.nodeType}))},A.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(A(e).filter(function(){for(t=0;t<n;t++)if(A.contains(o[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)A.find(e,o[t],i);return 1<n?A.uniqueSort(i):i},filter:function(e){return this.pushStack(Z(this,e||[],!1))},not:function(e){return this.pushStack(Z(this,e||[],!0))},is:function(e){return!!Z(this,"string"==typeof e&&X.test(e)?A(e):e||[],!1).length}});var J,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((A.fn.init=function(e,t,i){if(!e)return this;if(i=i||J,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==i.ready?i.ready(e):e(A):A.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!n[1]&&t)return(!t||t.jquery?t||i:this.constructor(t)).find(e);if(n[1]){if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),Q.test(n[1])&&A.isPlainObject(t))for(var n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=_.getElementById(n[2]))&&(this[0]=i,this.length=1),this}).prototype=A.fn,J=A(_),/^(?:parents|prev(?:Until|All))/),ie={children:!0,contents:!0,next:!0,prev:!0};function ne(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}A.fn.extend({has:function(e){var t=A(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(A.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,o=this.length,r=[],s="string"!=typeof e&&A(e);if(!X.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&A.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(1<r.length?A.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?B.call(A(e),this[0]):B.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),A.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return n(e,"parentNode")},parentsUntil:function(e,t,i){return n(e,"parentNode",i)},next:function(e){return ne(e,"nextSibling")},prev:function(e){return ne(e,"previousSibling")},nextAll:function(e){return n(e,"nextSibling")},prevAll:function(e){return n(e,"previousSibling")},nextUntil:function(e,t,i){return n(e,"nextSibling",i)},prevUntil:function(e,t,i){return n(e,"previousSibling",i)},siblings:function(e){return K((e.parentNode||{}).firstChild,e)},children:function(e){return K(e.firstChild)},contents:function(e){return null!=e.contentDocument&&I(e.contentDocument)?e.contentDocument:(l(e,"template")&&(e=e.content||e),A.merge([],e.childNodes))}},function(n,o){A.fn[n]=function(e,t){var i=A.map(this,o,e);return(t="Until"!==n.slice(-5)?e:t)&&"string"==typeof t&&(i=A.filter(t,i)),1<this.length&&(ie[n]||A.uniqueSort(i),te.test(n)&&i.reverse()),this.pushStack(i)}});var E=/[^\x20\t\r\n\f]+/g;function u(e){return e}function oe(e){throw e}function re(e,t,i,n){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(i):e&&y(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}A.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},A.each(e.match(E)||[],function(e,t){i[t]=!0}),i):A.extend({},n);function o(){for(a=a||n.once,s=r=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&n.stopOnFalse&&(u=l.length,t=!1);n.memory||(t=!1),r=!1,a&&(l=t?[]:"")}var r,t,s,a,l=[],c=[],u=-1,d={add:function(){return l&&(t&&!r&&(u=l.length-1,c.push(t)),function i(e){A.each(e,function(e,t){y(t)?n.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==f(t)&&i(t)})}(arguments),t&&!r&&o()),this},remove:function(){return A.each(arguments,function(e,t){for(var i;-1<(i=A.inArray(t,l,i));)l.splice(i,1),i<=u&&u--}),this},has:function(e){return e?-1<A.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return a=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return a=c=[],t||r||(l=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),r||o()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!s}};return d},A.extend({Deferred:function(e){var r=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var o=arguments;return A.Deferred(function(n){A.each(r,function(e,t){var i=y(o[t[4]])&&o[t[4]];a[t[1]](function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),o=null}).promise()},then:function(t,i,n){var l=0;function c(o,r,s,a){return function(){function e(){var e,t;if(!(o<l)){if((e=s.apply(i,n))===r.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?a?t.call(e,c(l,r,u,a),c(l,r,oe,a)):(l++,t.call(e,c(l,r,u,a),c(l,r,oe,a),c(l,r,u,r.notifyWith))):(s!==u&&(i=void 0,n=[e]),(a||r.resolveWith)(i,n))}}var i=this,n=arguments,t=a?e:function(){try{e()}catch(e){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(e,t.stackTrace),l<=o+1&&(s!==oe&&(i=void 0,n=[e]),r.rejectWith(i,n))}};o?t():(A.Deferred.getStackHook&&(t.stackTrace=A.Deferred.getStackHook()),C.setTimeout(t))}}return A.Deferred(function(e){r[0][3].add(c(0,e,y(n)?n:u,e.notifyWith)),r[1][3].add(c(0,e,y(t)?t:u)),r[2][3].add(c(0,e,y(i)?i:oe))}).promise()},promise:function(e){return null!=e?A.extend(e,s):s}},a={};return A.each(r,function(e,t){var i=t[2],n=t[5];s[t[1]]=i.add,n&&i.add(function(){o=n},r[3-e][2].disable,r[3-e][3].disable,r[0][2].lock,r[0][3].lock),i.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=i.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){function t(t){return function(e){o[t]=this,r[t]=1<arguments.length?a.call(arguments):e,--i||s.resolveWith(o,r)}}var i=arguments.length,n=i,o=Array(n),r=a.call(arguments),s=A.Deferred();if(i<=1&&(re(e,s.done(t(n)).resolve,s.reject,!i),"pending"===s.state()||y(r[n]&&r[n].then)))return s.then();for(;n--;)re(r[n],t(n),s.reject);return s.promise()}});var se=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,ae=(A.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&se.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},A.readyException=function(e){C.setTimeout(function(){throw e})},A.Deferred());function le(){_.removeEventListener("DOMContentLoaded",le),C.removeEventListener("load",le),A.ready()}A.fn.ready=function(e){return ae.then(e).catch(function(e){A.readyException(e)}),this},A.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--A.readyWait:A.isReady)||(A.isReady=!0)!==e&&0<--A.readyWait||ae.resolveWith(_,[A])}}),A.ready.then=ae.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?C.setTimeout(A.ready):(_.addEventListener("DOMContentLoaded",le),C.addEventListener("load",le));function d(e,t,i,n,o,r,s){var a=0,l=e.length,c=null==i;if("object"===f(i))for(a in o=!0,i)d(e,t,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,y(n)||(s=!0),t=c?s?(t.call(e,n),null):(c=t,function(e,t,i){return c.call(A(e),i)}):t))for(;a<l;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return o?e:c?t.call(e):l?t(e[0],i):r}var ce=/^-ms-/,ue=/-([a-z])/g;function de(e,t){return t.toUpperCase()}function b(e){return e.replace(ce,"ms-").replace(ue,de)}function v(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function he(){this.expando=A.expando+he.uid++}he.uid=1,he.prototype={cache:function(e){var t=e[this.expando];return t||(t={},v(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[b(t)]=i;else for(n in t)o[b(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][b(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(b):(t=b(t))in n?[t]:t.match(E)||[]).length;for(;i--;)delete n[t[i]]}void 0!==t&&!A.isEmptyObject(n)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!A.isEmptyObject(e)}};var w=new he,c=new he,pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function ge(e,t,i){var n,o;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(fe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(o=i)||"false"!==o&&("null"===o?null:o===+o+""?+o:pe.test(o)?JSON.parse(o):o)}catch(e){}c.set(e,t,i)}else i=void 0;return i}A.extend({hasData:function(e){return c.hasData(e)||w.hasData(e)},data:function(e,t,i){return c.access(e,t,i)},removeData:function(e,t){c.remove(e,t)},_data:function(e,t,i){return w.access(e,t,i)},_removeData:function(e,t){w.remove(e,t)}}),A.fn.extend({data:function(i,e){var t,n,o,r=this[0],s=r&&r.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){c.set(this,i)}):d(this,function(e){var t;if(r&&void 0===e)return void 0!==(t=c.get(r,i))||void 0!==(t=ge(r,i))?t:void 0;this.each(function(){c.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(o=c.get(r),1===r.nodeType&&!w.get(r,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&0===(n=s[t].name).indexOf("data-")&&(n=b(n.slice(5)),ge(r,n,o[n]));w.set(r,"hasDataAttrs",!0)}return o},removeData:function(e){return this.each(function(){c.remove(this,e)})}}),A.extend({queue:function(e,t,i){var n;if(e)return n=w.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=w.access(e,t,A.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=A.queue(e,t),n=i.length,o=i.shift(),r=A._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,function(){A.dequeue(e,t)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return w.get(e,i)||w.access(e,i,{empty:A.Callbacks("once memory").add(function(){w.remove(e,[t+"queue",i])})})}}),A.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?A.queue(this[0],t):void 0===i?this:this.each(function(){var e=A.queue(this,t,i);A._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&A.dequeue(this,t)})},dequeue:function(e){return this.each(function(){A.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--o||r.resolveWith(s,[s])}var n,o=1,r=A.Deferred(),s=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=w.get(s[a],e+"queueHooks"))&&n.empty&&(o++,n.empty.add(i));return i(),r.promise(t)}});function me(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&S(e)&&"none"===A.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ve=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),h=["Top","Right","Bottom","Left"],x=_.documentElement,S=function(e){return A.contains(e.ownerDocument,e)},ye={composed:!0};x.getRootNode&&(S=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});function be(e,t,i,n){var o,r,s=20,a=n?function(){return n.cur()}:function(){return A.css(e,t,"")},l=a(),c=i&&i[3]||(A.cssNumber[t]?"":"px"),u=e.nodeType&&(A.cssNumber[t]||"px"!==c&&+l)&&ve.exec(A.css(e,t));if(u&&u[3]!==c){for(c=c||u[3],u=+(l/=2)||1;s--;)A.style(e,t,u+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),u/=r;A.style(e,t,(u*=2)+c),i=i||[]}return i&&(u=+u||+l||0,o=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=o)),o}var we={};function T(e,t){for(var i,n,o,r,s,a=[],l=0,c=e.length;l<c;l++)(n=e[l]).style&&(i=n.style.display,t?("none"===i&&(a[l]=w.get(n,"display")||null,a[l]||(n.style.display="")),""===n.style.display&&me(n)&&(a[l]=(s=r=void 0,r=(o=n).ownerDocument,o=o.nodeName,(s=we[o])||(r=r.body.appendChild(r.createElement(o)),s=A.css(r,"display"),r.parentNode.removeChild(r),we[o]=s="none"===s?"block":s)))):"none"!==i&&(a[l]="none",w.set(n,"display",i)));for(l=0;l<c;l++)null!=a[l]&&(e[l].style.display=a[l]);return e}A.fn.extend({show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){me(this)?A(this).show():A(this).hide()})}});var Ce=/^(?:checkbox|radio)$/i,_e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ae=/^$|^module$|\/(?:java|ecma)script/i,k=(F=_.createDocumentFragment().appendChild(_.createElement("div")),(s=_.createElement("input")).setAttribute("type","radio"),s.setAttribute("checked","checked"),s.setAttribute("name","t"),F.appendChild(s),m.checkClone=F.cloneNode(!0).cloneNode(!0).lastChild.checked,F.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!F.cloneNode(!0).lastChild.defaultValue,F.innerHTML="<option></option>",m.option=!!F.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function D(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&l(e,t)?A.merge([e],i):i}function Ee(e,t){for(var i=0,n=e.length;i<n;i++)w.set(e[i],"globalEval",!t||w.get(t[i],"globalEval"))}k.tbody=k.tfoot=k.colgroup=k.caption=k.thead,k.th=k.td,m.option||(k.optgroup=k.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function Se(e,t,i,n,o){for(var r,s,a,l,c,u=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((r=e[h])||0===r)if("object"===f(r))A.merge(d,r.nodeType?[r]:r);else if(xe.test(r)){for(s=s||u.appendChild(t.createElement("div")),a=(_e.exec(r)||["",""])[1].toLowerCase(),a=k[a]||k._default,s.innerHTML=a[1]+A.htmlPrefilter(r)+a[2],c=a[0];c--;)s=s.lastChild;A.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(t.createTextNode(r));for(u.textContent="",h=0;r=d[h++];)if(n&&-1<A.inArray(r,n))o&&o.push(r);else if(l=S(r),s=D(u.appendChild(r),"script"),l&&Ee(s),i)for(c=0;r=s[c++];)Ae.test(r.type||"")&&i.push(r);return u}var Te=/^key/,ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,De=/^([^.]*)(?:\.(.+)|)/;function i(){return!0}function p(){return!1}function Re(e,t){return e===function(){try{return _.activeElement}catch(e){}}()==("focus"===t)}function Oe(e,t,i,n,o,r){var s,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)Oe(e,a,i,n,t[a],r);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=p;else if(!o)return e;return 1===r&&(s=o,(o=function(e){return A().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=A.guid++)),e.each(function(){A.event.add(this,t,o,n,i)})}function Fe(e,o,r){r?(w.set(e,o,!1),A.event.add(e,o,{namespace:!1,handler:function(e){var t,i,n=w.get(this,o);if(1&e.isTrigger&&this[o]){if(n.length)(A.event.special[o]||{}).delegateType&&e.stopPropagation();else if(n=a.call(arguments),w.set(this,o,n),t=r(this,o),this[o](),n!==(i=w.get(this,o))||t?w.set(this,o,!1):i={},n!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else n.length&&(w.set(this,o,{value:A.event.trigger(A.extend(n[0],A.Event.prototype),n.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===w.get(e,o)&&A.event.add(e,o,i)}A.event={global:{},add:function(t,e,i,n,o){var r,s,a,l,c,u,d,h,p,f=w.get(t);if(v(t))for(i.handler&&(i=(r=i).handler,o=r.selector),o&&A.find.matchesSelector(x,o),i.guid||(i.guid=A.guid++),(a=f.events)||(a=f.events=Object.create(null)),(s=f.handle)||(s=f.handle=function(e){return void 0!==A&&A.event.triggered!==e.type?A.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(E)||[""]).length;l--;)d=p=(h=De.exec(e[l])||[])[1],h=(h[2]||"").split(".").sort(),d&&(c=A.event.special[d]||{},d=(o?c.delegateType:c.bindType)||d,c=A.event.special[d]||{},p=A.extend({type:d,origType:p,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&A.expr.match.needsContext.test(o),namespace:h.join(".")},r),(u=a[d])||((u=a[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,h,s)||t.addEventListener&&t.addEventListener(d,s)),c.add&&(c.add.call(t,p),p.handler.guid||(p.handler.guid=i.guid)),o?u.splice(u.delegateCount++,0,p):u.push(p),A.event.global[d]=!0)},remove:function(e,t,i,n,o){var r,s,a,l,c,u,d,h,p,f,g,m=w.hasData(e)&&w.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(E)||[""]).length;c--;)if(p=g=(a=De.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=A.event.special[p]||{},h=l[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)u=h[r],!o&&g!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(r,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||A.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)A.event.remove(e,p+t[c],i,n,!0);A.isEmptyObject(l)&&w.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,r,s=new Array(arguments.length),a=A.event.fix(e),e=(w.get(this,"events")||Object.create(null))[a.type]||[],l=A.event.special[a.type]||{};for(s[0]=a,t=1;t<arguments.length;t++)s[t]=arguments[t];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){for(r=A.event.handlers.call(this,a,e),t=0;(n=r[t++])&&!a.isPropagationStopped();)for(a.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(o=((A.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,s))&&!1===(a.result=o)&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(e,t){var i,n,o,r,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],s={},i=0;i<l;i++)void 0===s[o=(n=t[i]).selector+" "]&&(s[o]=n.needsContext?-1<A(o,this).index(c):A.find(o,this,null,[c]).length),s[o]&&r.push(n);r.length&&a.push({elem:c,handlers:r})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(t,e){Object.defineProperty(A.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return Ce.test(e.type)&&e.click&&l(e,"input")&&Fe(e,"click",i),!1},trigger:function(e){e=this||e;return Ce.test(e.type)&&e.click&&l(e,"input")&&Fe(e,"click"),!0},_default:function(e){e=e.target;return Ce.test(e.type)&&e.click&&l(e,"input")&&w.get(e,"click")||l(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},A.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?i:p,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=i,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=i,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=i,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ke.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},function(e,t){A.event.special[e]={setup:function(){return Fe(this,e,Re),!1},trigger:function(){return Fe(this,e),!0},delegateType:t}}),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,o){A.event.special[e]={delegateType:o,bindType:o,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||A.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=o),t}}}),A.fn.extend({on:function(e,t,i,n){return Oe(this,e,t,i,n)},one:function(e,t,i,n){return Oe(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,A(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=p),this.each(function(){A.event.remove(this,e,i,t)});for(o in e)this.off(o,t,e[o]);return this}});var Le=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function $e(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&A(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ge(e,t){var i,n,o,r;if(1===t.nodeType){if(w.hasData(e)&&(r=w.get(e).events))for(o in w.remove(t,"handle events"),r)for(i=0,n=r[o].length;i<n;i++)A.event.add(t,o,r[o][i]);c.hasData(e)&&(e=c.access(e),e=A.extend({},e),c.set(t,e))}}function R(i,n,o,r){n=P(n);var e,t,s,a,l,c,u=0,d=i.length,h=d-1,p=n[0],f=y(p);if(f||1<d&&"string"==typeof p&&!m.checkClone&&Me.test(p))return i.each(function(e){var t=i.eq(e);f&&(n[0]=p.call(this,e,t.html())),R(t,n,o,r)});if(d&&(t=(e=Se(n,i[0].ownerDocument,!1,i,r)).firstChild,1===e.childNodes.length&&(e=t),t||r)){for(a=(s=A.map(D(e,"script"),Ie)).length;u<d;u++)l=e,u!==h&&(l=A.clone(l,!0,!0),a&&A.merge(s,D(l,"script"))),o.call(i[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,A.map(s,Pe),u=0;u<a;u++)l=s[u],Ae.test(l.type||"")&&!w.access(l,"globalEval")&&A.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?A._evalUrl&&!l.noModule&&A._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):Y(l.textContent.replace(Ne,""),l,c))}return i}function Be(e,t,i){for(var n,o=t?A.filter(t,e):e,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||A.cleanData(D(n)),n.parentNode&&(i&&S(n)&&Ee(D(n,"script")),n.parentNode.removeChild(n));return e}A.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,o,r,s,a,l,c,u=e.cloneNode(!0),d=S(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||A.isXMLDoc(e)))for(s=D(u),n=0,o=(r=D(e)).length;n<o;n++)a=r[n],l=s[n],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&Ce.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(t)if(i)for(r=r||D(e),s=s||D(u),n=0,o=r.length;n<o;n++)Ge(r[n],s[n]);else Ge(e,u);return 0<(s=D(u,"script")).length&&Ee(s,!d&&D(e,"script")),u},cleanData:function(e){for(var t,i,n,o=A.event.special,r=0;void 0!==(i=e[r]);r++)if(v(i)){if(t=i[w.expando]){if(t.events)for(n in t.events)o[n]?A.event.remove(i,n):A.removeEvent(i,n,t.handle);i[w.expando]=void 0}i[c.expando]&&(i[c.expando]=void 0)}}}),A.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return d(this,function(e){return void 0===e?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return R(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||$e(this,e).appendChild(e)})},prepend:function(){return R(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=$e(this,e)).insertBefore(e,t.firstChild)})},before:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(A.cleanData(D(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return A.clone(this,e,t)})},html:function(e){return d(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!k[(_e.exec(e)||["",""])[1].toLowerCase()]){e=A.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(A.cleanData(D(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return R(this,arguments,function(e){var t=this.parentNode;A.inArray(this,i)<0&&(A.cleanData(D(this)),t&&t.replaceChild(e,this))},i)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){A.fn[e]=function(e){for(var t,i=[],n=A(e),o=n.length-1,r=0;r<=o;r++)t=r===o?this:this.clone(!0),A(n[r])[s](t),G.apply(i,t.get());return this.pushStack(i)}});function We(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:C).getComputedStyle(e)}function He(e,t,i){var n,o={};for(n in t)o[n]=e.style[n],e.style[n]=t[n];for(n in i=i.call(e),t)e.style[n]=o[n];return i}var Ve,je,ze,Ue,Ye,qe,Ke,o,Xe=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Qe=new RegExp(h.join("|"),"i");function Ze(){var e;o&&(Ke.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",o.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",x.appendChild(Ke).appendChild(o),e=C.getComputedStyle(o),Ve="1%"!==e.top,qe=12===Je(e.marginLeft),o.style.right="60%",Ue=36===Je(e.right),je=36===Je(e.width),o.style.position="absolute",ze=12===Je(o.offsetWidth/3),x.removeChild(Ke),o=null)}function Je(e){return Math.round(parseFloat(e))}function et(e,t,i){var n,o,r=e.style;return(i=i||We(e))&&(""!==(o=i.getPropertyValue(t)||i[t])||S(e)||(o=A.style(e,t)),!m.pixelBoxStyles()&&Xe.test(o)&&Qe.test(t)&&(e=r.width,t=r.minWidth,n=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=e,r.minWidth=t,r.maxWidth=n)),void 0!==o?o+"":o}function tt(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Ke=_.createElement("div"),(o=_.createElement("div")).style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===o.style.backgroundClip,A.extend(m,{boxSizingReliable:function(){return Ze(),je},pixelBoxStyles:function(){return Ze(),Ue},pixelPosition:function(){return Ze(),Ve},reliableMarginLeft:function(){return Ze(),qe},scrollboxSize:function(){return Ze(),ze},reliableTrDimensions:function(){var e,t,i;return null==Ye&&(e=_.createElement("table"),t=_.createElement("tr"),i=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",i.style.height="9px",x.appendChild(e).appendChild(t).appendChild(i),i=C.getComputedStyle(t),Ye=3<parseInt(i.height),x.removeChild(e)),Ye}}));var it=["Webkit","Moz","ms"],nt=_.createElement("div").style,ot={};function rt(e){var t=A.cssProps[e]||ot[e];return t||(e in nt?e:ot[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=it.length;i--;)if((e=it[i]+t)in nt)return e}(e)||e)}var st=/^(none|table(?!-c[ea]).+)/,at=/^--/,lt={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"};function ut(e,t,i){var n=ve.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function dt(e,t,i,n,o,r){var s="width"===t?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=A.css(e,i+h[s],!0,o)),n?("content"===i&&(l-=A.css(e,"padding"+h[s],!0,o)),"margin"!==i&&(l-=A.css(e,"border"+h[s]+"Width",!0,o))):(l+=A.css(e,"padding"+h[s],!0,o),"padding"!==i?l+=A.css(e,"border"+h[s]+"Width",!0,o):a+=A.css(e,"border"+h[s]+"Width",!0,o));return!n&&0<=r&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-a-.5))||0),l}function ht(e,t,i){var n=We(e),o=(!m.boxSizingReliable()||i)&&"border-box"===A.css(e,"boxSizing",!1,n),r=o,s=et(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Xe.test(s)){if(!i)return s;s="auto"}return(!m.boxSizingReliable()&&o||!m.reliableTrDimensions()&&l(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===A.css(e,"display",!1,n))&&e.getClientRects().length&&(o="border-box"===A.css(e,"boxSizing",!1,n),(r=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+dt(e,t,i||(o?"border":"content"),r,n,s)+"px"}function r(e,t,i,n,o){return new r.prototype.init(e,t,i,n,o)}A.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=et(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=b(t),l=at.test(t),c=e.style;if(l||(t=rt(a)),s=A.cssHooks[t]||A.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(o=s.get(e,!1,n))?o:c[t];"string"===(r=typeof i)&&(o=ve.exec(i))&&o[1]&&(i=be(e,t,o),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=o&&o[3]||(A.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var o,r=b(t);return at.test(t)||(t=rt(r)),"normal"===(o=void 0===(o=(r=A.cssHooks[t]||A.cssHooks[r])&&"get"in r?r.get(e,!0,i):o)?et(e,t,n):o)&&t in ct&&(o=ct[t]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),A.each(["height","width"],function(e,s){A.cssHooks[s]={get:function(e,t,i){if(t)return!st.test(A.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ht(e,s,i):He(e,lt,function(){return ht(e,s,i)})},set:function(e,t,i){var n=We(e),o=!m.scrollboxSize()&&"absolute"===n.position,r=(o||i)&&"border-box"===A.css(e,"boxSizing",!1,n),i=i?dt(e,s,i,r,n):0;return r&&o&&(i-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(n[s])-dt(e,s,"border",!1,n)-.5)),i&&(r=ve.exec(t))&&"px"!==(r[3]||"px")&&(e.style[s]=t,t=A.css(e,s)),ut(0,t,i)}}}),A.cssHooks.marginLeft=tt(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(et(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),A.each({margin:"",padding:"",border:"Width"},function(o,r){A.cssHooks[o+r]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[o+h[t]+r]=n[t]||n[t-2]||n[0];return i}},"margin"!==o&&(A.cssHooks[o+r].set=ut)}),A.fn.extend({css:function(e,t){return d(this,function(e,t,i){var n,o,r={},s=0;if(Array.isArray(t)){for(n=We(e),o=t.length;s<o;s++)r[t[s]]=A.css(e,t[s],!1,n);return r}return void 0!==i?A.style(e,t,i):A.css(e,t)},e,t,1<arguments.length)}}),((A.Tween=r).prototype={constructor:r,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||A.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(A.cssNumber[i]?"":"px")},cur:function(){var e=r.propHooks[this.prop];return(e&&e.get?e:r.propHooks._default).get(this)},run:function(e){var t,i=r.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:r.propHooks._default).set(this),this}}).init.prototype=r.prototype,(r.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=A.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){A.fx.step[e.prop]?A.fx.step[e.prop](e):1!==e.elem.nodeType||!A.cssHooks[e.prop]&&null==e.elem.style[rt(e.prop)]?e.elem[e.prop]=e.now:A.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=r.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},A.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},A.fx=r.prototype.init,A.fx.step={};var O,pt,s,F,ft=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;function mt(){pt&&(!1===_.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(mt):C.setTimeout(mt,A.fx.interval),A.fx.tick())}function vt(){return C.setTimeout(function(){O=void 0}),O=Date.now()}function yt(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)o["margin"+(i=h[n])]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function bt(e,t,i){for(var n,o=(L.tweeners[t]||[]).concat(L.tweeners["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,t,e))return n}function L(o,e,t){var i,r,n,s,a,l,c,u=0,d=L.prefilters.length,h=A.Deferred().always(function(){delete p.elem}),p=function(){if(r)return!1;for(var e=O||vt(),e=Math.max(0,f.startTime+f.duration-e),t=1-(e/f.duration||0),i=0,n=f.tweens.length;i<n;i++)f.tweens[i].run(t);return h.notifyWith(o,[f,t,e]),t<1&&n?e:(n||h.notifyWith(o,[f,1,0]),h.resolveWith(o,[f]),!1)},f=h.promise({elem:o,props:A.extend({},e),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},t),originalProperties:e,originalOptions:t,startTime:O||vt(),duration:t.duration,tweens:[],createTween:function(e,t){t=A.Tween(o,f.opts,e,t,f.opts.specialEasing[e]||f.opts.easing);return f.tweens.push(t),t},stop:function(e){var t=0,i=e?f.tweens.length:0;if(r)return this;for(r=!0;t<i;t++)f.tweens[t].run(1);return e?(h.notifyWith(o,[f,1,0]),h.resolveWith(o,[f,e])):h.rejectWith(o,[f,e]),this}}),g=f.props,m=g,v=f.opts.specialEasing;for(n in m)if(a=v[s=b(n)],l=m[n],Array.isArray(l)&&(a=l[1],l=m[n]=l[0]),n!==s&&(m[s]=l,delete m[n]),(c=A.cssHooks[s])&&"expand"in c)for(n in l=c.expand(l),delete m[s],l)n in m||(m[n]=l[n],v[n]=a);else v[s]=a;for(;u<d;u++)if(i=L.prefilters[u].call(f,o,g,f.opts))return y(i.stop)&&(A._queueHooks(f.elem,f.opts.queue).stop=i.stop.bind(i)),i;return A.map(g,bt,f),y(f.opts.start)&&f.opts.start.call(o,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),A.fx.timer(A.extend(p,{elem:o,anim:f,queue:f.opts.queue})),f}A.Animation=A.extend(L,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return be(i.elem,e,ve.exec(t),i),i}]},tweener:function(e,t){for(var i,n=0,o=(e=y(e)?(t=e,["*"]):e.match(E)).length;n<o;n++)i=e[n],L.tweeners[i]=L.tweeners[i]||[],L.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,o,r,s,a,l,c,u="width"in t||"height"in t,d=this,h={},p=e.style,f=e.nodeType&&me(e),g=w.get(e,"fxshow");for(n in i.queue||(null==(s=A._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,A.queue(e,"fx").length||s.empty.fire()})})),t)if(o=t[n],ft.test(o)){if(delete t[n],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;f=!0}h[n]=g&&g[n]||A.style(e,n)}if((l=!A.isEmptyObject(t))||!A.isEmptyObject(h))for(n in u&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=w.get(e,"display")),"none"===(u=A.css(e,"display"))&&(c?u=c:(T([e],!0),c=e.style.display||c,u=A.css(e,"display"),T([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===A.css(e,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,h)l||(g?"hidden"in g&&(f=g.hidden):g=w.access(e,"fxshow",{display:c}),r&&(g.hidden=!f),f&&T([e],!0),d.done(function(){for(n in f||T([e]),w.remove(e,"fxshow"),h)A.style(e,n,h[n])})),l=bt(f?g[n]:0,n,d),n in g||(g[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?L.prefilters.unshift(e):L.prefilters.push(e)}}),A.speed=function(e,t,i){var n=e&&"object"==typeof e?A.extend({},e):{complete:i||!i&&t||y(e)&&e,duration:e,easing:i&&t||t&&!y(t)&&t};return A.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in A.fx.speeds?n.duration=A.fx.speeds[n.duration]:n.duration=A.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&A.dequeue(this,n.queue)},n},A.fn.extend({fadeTo:function(e,t,i,n){return this.filter(me).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){function o(){var e=L(this,A.extend({},t),s);(r||w.get(this,"finish"))&&e.stop(!0)}var r=A.isEmptyObject(t),s=A.speed(e,i,n);return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(o,e,r){function s(e){var t=e.stop;delete e.stop,t(r)}return"string"!=typeof o&&(r=e,e=o,o=void 0),e&&this.queue(o||"fx",[]),this.each(function(){var e=!0,t=null!=o&&o+"queueHooks",i=A.timers,n=w.get(this);if(t)n[t]&&n[t].stop&&s(n[t]);else for(t in n)n[t]&&n[t].stop&&gt.test(t)&&s(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=o&&i[t].queue!==o||(i[t].anim.stop(r),e=!1,i.splice(t,1));!e&&r||A.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=w.get(this),i=t[s+"queue"],n=t[s+"queueHooks"],o=A.timers,r=i?i.length:0;for(t.finish=!0,A.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===s&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),A.each(["toggle","show","hide"],function(e,n){var o=A.fn[n];A.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(yt(n,!0),e,t,i)}}),A.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){A.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),A.timers=[],A.fx.tick=function(){var e,t=0,i=A.timers;for(O=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||A.fx.stop(),O=void 0},A.fx.timer=function(e){A.timers.push(e),A.fx.start()},A.fx.interval=13,A.fx.start=function(){pt||(pt=!0,mt())},A.fx.stop=function(){pt=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(n,e){return n=A.fx&&A.fx.speeds[n]||n,this.queue(e=e||"fx",function(e,t){var i=C.setTimeout(e,n);t.stop=function(){C.clearTimeout(i)}})},s=_.createElement("input"),F=_.createElement("select").appendChild(_.createElement("option")),s.type="checkbox",m.checkOn=""!==s.value,m.optSelected=F.selected,(s=_.createElement("input")).value="t",s.type="radio",m.radioValue="t"===s.value;var wt,Ct=A.expr.attrHandle,_t=(A.fn.extend({attr:function(e,t){return d(this,A.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){A.removeAttr(this,e)})}}),A.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?A.prop(e,t,i):(1===r&&A.isXMLDoc(e)||(o=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?wt:void 0)),void 0!==i?null===i?void A.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):!(o&&"get"in o&&null!==(n=o.get(e,t)))&&null==(n=A.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){var i;if(!m.radioValue&&"radio"===t&&l(e,"input"))return i=e.value,e.setAttribute("type",t),i&&(e.value=i),t}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(E);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),wt={set:function(e,t,i){return!1===t?A.removeAttr(e,i):e.setAttribute(i,i),i}},A.each(A.expr.match.bool.source.match(/\w+/g),function(e,t){var s=Ct[t]||A.find.attr;Ct[t]=function(e,t,i){var n,o,r=t.toLowerCase();return i||(o=Ct[r],Ct[r]=n,n=null!=s(e,t,i)?r:null,Ct[r]=o),n}}),/^(?:input|select|textarea|button)$/i),At=/^(?:a|area)$/i;function M(e){return(e.match(E)||[]).join(" ")}function N(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(E)||[]}A.fn.extend({prop:function(e,t){return d(this,A.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[A.propFix[e]||e]})}}),A.extend({prop:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&A.isXMLDoc(e)||(t=A.propFix[t]||t,o=A.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=A.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(A.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){A.propFix[this.toLowerCase()]=this}),A.fn.extend({addClass:function(t){var e,i,n,o,r,s,a=0;if(y(t))return this.each(function(e){A(this).addClass(t.call(this,e,N(this)))});if((e=Et(t)).length)for(;i=this[a++];)if(s=N(i),n=1===i.nodeType&&" "+M(s)+" "){for(r=0;o=e[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s!==(s=M(n))&&i.setAttribute("class",s)}return this},removeClass:function(t){var e,i,n,o,r,s,a=0;if(y(t))return this.each(function(e){A(this).removeClass(t.call(this,e,N(this)))});if(!arguments.length)return this.attr("class","");if((e=Et(t)).length)for(;i=this[a++];)if(s=N(i),n=1===i.nodeType&&" "+M(s)+" "){for(r=0;o=e[r++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");s!==(s=M(n))&&i.setAttribute("class",s)}return this},toggleClass:function(o,t){var r=typeof o,s="string"==r||Array.isArray(o);return"boolean"==typeof t&&s?t?this.addClass(o):this.removeClass(o):y(o)?this.each(function(e){A(this).toggleClass(o.call(this,e,N(this),t),t)}):this.each(function(){var e,t,i,n;if(s)for(t=0,i=A(this),n=Et(o);e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==o&&"boolean"!=r||((e=N(this))&&w.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==o&&w.get(this,"__className__")||""))})},hasClass:function(e){for(var t,i=0,n=" "+e+" ";t=this[i++];)if(1===t.nodeType&&-1<(" "+M(N(t))+" ").indexOf(n))return!0;return!1}});function xt(e){e.stopPropagation()}var St=/\r/g,Tt=(A.fn.extend({val:function(t){var i,e,n,o=this[0];return arguments.length?(n=y(t),this.each(function(e){1===this.nodeType&&(null==(e=n?t.call(this,e,A(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=A.map(e,function(e){return null==e?"":e+""})),(i=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):o?(i=A.valHooks[o.type]||A.valHooks[o.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(o,"value"))?e:"string"==typeof(e=o.value)?e.replace(St,""):null==e?"":e:void 0}}),A.extend({valHooks:{option:{get:function(e){var t=A.find.attr(e,"value");return null!=t?t:M(A.text(e))}},select:{get:function(e){for(var t,i=e.options,n=e.selectedIndex,o="select-one"===e.type,r=o?null:[],s=o?n+1:i.length,a=n<0?s:o?n:0;a<s;a++)if(((t=i[a]).selected||a===n)&&!t.disabled&&(!t.parentNode.disabled||!l(t.parentNode,"optgroup"))){if(t=A(t).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var i,n,o=e.options,r=A.makeArray(t),s=o.length;s--;)((n=o[s]).selected=-1<A.inArray(A.valHooks.option.get(n),r))&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<A.inArray(A(e).val(),t)}},m.checkOn||(A.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in C,/^(?:focusinfocus|focusoutblur)$/),kt=(A.extend(A.event,{trigger:function(e,t,i,n){var o,r,s,a,l,c,u,d=[i||_],h=V.call(e,"type")?e.type:e,p=V.call(e,"namespace")?e.namespace.split("."):[],f=u=r=i=i||_;if(3!==i.nodeType&&8!==i.nodeType&&!Tt.test(h+A.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,(e=e[A.expando]?e:new A.Event(h,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:A.makeArray(t,[e]),c=A.event.special[h]||{},n||!c.trigger||!1!==c.trigger.apply(i,t))){if(!n&&!c.noBubble&&!g(i)){for(s=c.delegateType||h,Tt.test(s+h)||(f=f.parentNode);f;f=f.parentNode)d.push(f),r=f;r===(i.ownerDocument||_)&&d.push(r.defaultView||r.parentWindow||C)}for(o=0;(f=d[o++])&&!e.isPropagationStopped();)u=f,e.type=1<o?s:c.bindType||h,(l=(w.get(f,"events")||Object.create(null))[e.type]&&w.get(f,"handle"))&&l.apply(f,t),(l=a&&f[a])&&l.apply&&v(f)&&(e.result=l.apply(f,t),!1===e.result&&e.preventDefault());return e.type=h,n||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!v(i)||a&&y(i[h])&&!g(i)&&((r=i[a])&&(i[a]=null),A.event.triggered=h,e.isPropagationStopped()&&u.addEventListener(h,xt),i[h](),e.isPropagationStopped()&&u.removeEventListener(h,xt),A.event.triggered=void 0,r&&(i[a]=r)),e.result}},simulate:function(e,t,i){i=A.extend(new A.Event,i,{type:e,isSimulated:!0});A.event.trigger(i,null,t)}}),A.fn.extend({trigger:function(e,t){return this.each(function(){A.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return A.event.trigger(e,t,i,!0)}}),m.focusin||A.each({focus:"focusin",blur:"focusout"},function(i,n){function o(e){A.event.simulate(n,e.target,A.event.fix(e))}A.event.special[n]={setup:function(){var e=this.ownerDocument||this.document||this,t=w.access(e,n);t||e.addEventListener(i,o,!0),w.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=w.access(e,n)-1;t?w.access(e,n,t):(e.removeEventListener(i,o,!0),w.remove(e,n))}}}),C.location),Dt={guid:Date.now()},Rt=/\?/,Ot=(A.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||A.error("Invalid XML: "+e),t},/\[\]$/),Ft=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;A.param=function(e,t){function i(e,t){t=y(t)?t():t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var n,o=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,function(){i(this.name,this.value)});else for(n in e)!function i(n,e,o,r){if(Array.isArray(e))A.each(e,function(e,t){o||Ot.test(n)?r(n,t):i(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,o,r)});else if(o||"object"!==f(e))r(n,e);else for(var t in e)i(n+"["+t+"]",e[t],o,r)}(n,e[n],t,i);return o.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=A.prop(this,"elements");return e?A.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!A(this).is(":disabled")&&Mt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!Ce.test(e))}).map(function(e,t){var i=A(this).val();return null==i?null:Array.isArray(i)?A.map(i,function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}}):{name:t.name,value:i.replace(Ft,"\r\n")}}).get()}});var Nt=/%20/g,$t=/#.*$/,It=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gt=/^(?:GET|HEAD)$/,Bt=/^\/\//,Wt={},Ht={},Vt="*/".concat("*"),jt=_.createElement("a");function zt(r){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,o=e.toLowerCase().match(E)||[];if(y(t))for(;i=o[n++];)"+"===i[0]?(i=i.slice(1)||"*",(r[i]=r[i]||[]).unshift(t)):(r[i]=r[i]||[]).push(t)}}function Ut(t,n,o,r){var s={},a=t===Ht;function l(e){var i;return s[e]=!0,A.each(t[e]||[],function(e,t){t=t(n,o,r);return"string"!=typeof t||a||s[t]?a?!(i=t):void 0:(n.dataTypes.unshift(t),l(t),!1)}),i}return l(n.dataTypes[0])||!s["*"]&&l("*")}function Yt(e,t){var i,n,o=A.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n=n||{})[i]=t[i]);return n&&A.extend(!0,e,n),e}jt.href=kt.href,A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,A.ajaxSettings),t):Yt(A.ajaxSettings,e)},ajaxPrefilter:zt(Wt),ajaxTransport:zt(Ht),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,u,i,d,h,p,n,f=A.ajaxSetup({},t=t||{}),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?A(g):A.event,v=A.Deferred(),y=A.Callbacks("once memory"),b=f.statusCode||{},o={},r={},s="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(h){if(!i)for(i={};t=Pt.exec(u);)i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?u:null},setRequestHeader:function(e,t){return null==h&&(e=r[e.toLowerCase()]=r[e.toLowerCase()]||e,o[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){if(e)if(h)w.always(e[w.status]);else for(var t in e)b[t]=[b[t],e[t]];return this},abort:function(e){e=e||s;return l&&l.abort(e),a(0,e),this}};if(v.promise(w),f.url=((e||f.url||kt.href)+"").replace(Bt,kt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(E)||[""],null==f.crossDomain){e=_.createElement("a");try{e.href=f.url,e.href=e.href,f.crossDomain=jt.protocol+"//"+jt.host!=e.protocol+"//"+e.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=A.param(f.data,f.traditional)),Ut(Wt,f,t,w),h)return w;for(n in(p=A.event&&f.global)&&0==A.active++&&A.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Gt.test(f.type),c=f.url.replace($t,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Nt,"+")):(e=f.url.slice(c.length),f.data&&(f.processData||"string"==typeof f.data)&&(c+=(Rt.test(c)?"&":"?")+f.data,delete f.data),!1===f.cache&&(c=c.replace(It,"$1"),e=(Rt.test(c)?"&":"?")+"_="+Dt.guid+++e),f.url=c+e),f.ifModified&&(A.lastModified[c]&&w.setRequestHeader("If-Modified-Since",A.lastModified[c]),A.etag[c]&&w.setRequestHeader("If-None-Match",A.etag[c])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Vt+"; q=0.01":""):f.accepts["*"]),f.headers)w.setRequestHeader(n,f.headers[n]);if(f.beforeSend&&(!1===f.beforeSend.call(g,w,f)||h))return w.abort();if(s="abort",y.add(f.complete),w.done(f.success),w.fail(f.error),l=Ut(Ht,f,t,w)){if(w.readyState=1,p&&m.trigger("ajaxSend",[w,f]),h)return w;f.async&&0<f.timeout&&(d=C.setTimeout(function(){w.abort("timeout")},f.timeout));try{h=!1,l.send(o,a)}catch(e){if(h)throw e;a(-1,e)}}else a(-1,"No Transport");function a(e,t,i,n){var o,r,s,a=t;h||(h=!0,d&&C.clearTimeout(d),l=void 0,u=n||"",w.readyState=0<e?4:0,n=200<=e&&e<300||304===e,i&&(s=function(e,t,i){for(var n,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}s=s||o}r=r||s}if(r)return r!==l[0]&&l.unshift(r),i[r]}(f,w,i)),!n&&-1<A.inArray("script",f.dataTypes)&&(f.converters["text script"]=function(){}),s=function(e,t,i,n){var o,r,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(f,s,w,n),n?(f.ifModified&&((i=w.getResponseHeader("Last-Modified"))&&(A.lastModified[c]=i),(i=w.getResponseHeader("etag"))&&(A.etag[c]=i)),204===e||"HEAD"===f.type?a="nocontent":304===e?a="notmodified":(a=s.state,o=s.data,n=!(r=s.error))):(r=a,!e&&a||(a="error",e<0&&(e=0))),w.status=e,w.statusText=(t||a)+"",n?v.resolveWith(g,[o,a,w]):v.rejectWith(g,[w,a,r]),w.statusCode(b),b=void 0,p&&m.trigger(n?"ajaxSuccess":"ajaxError",[w,f,n?o:r]),y.fireWith(g,[w,a]),p&&(m.trigger("ajaxComplete",[w,f]),--A.active||A.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,i){return A.get(e,t,i,"json")},getScript:function(e,t){return A.get(e,void 0,t,"script")}}),A.each(["get","post"],function(e,o){A[o]=function(e,t,i,n){return y(t)&&(n=n||i,i=t,t=void 0),A.ajax(A.extend({url:e,type:o,dataType:n,data:t,success:i},A.isPlainObject(e)&&e))}}),A.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),A._evalUrl=function(e,t,i){return A.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){A.globalEval(e,t,i)}})},A.fn.extend({wrapAll:function(e){return this[0]&&(y(e)&&(e=e.call(this[0])),e=A(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return y(i)?this.each(function(e){A(this).wrapInner(i.call(this,e))}):this.each(function(){var e=A(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=y(t);return this.each(function(e){A(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}}),A.expr.pseudos.hidden=function(e){return!A.expr.pseudos.visible(e)},A.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Kt=A.ajaxSettings.xhr(),Xt=(m.cors=!!Kt&&"withCredentials"in Kt,m.ajax=Kt=!!Kt,A.ajaxTransport(function(o){var r,s;if(m.cors||Kt&&!o.crossDomain)return{send:function(e,t){var i,n=o.xhr();if(n.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(i in o.xhrFields)n[i]=o.xhrFields[i];for(i in o.mimeType&&n.overrideMimeType&&n.overrideMimeType(o.mimeType),o.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);r=function(e){return function(){r&&(r=s=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(qt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=r(),s=n.onerror=n.ontimeout=r("error"),void 0!==n.onabort?n.onabort=s:n.onreadystatechange=function(){4===n.readyState&&C.setTimeout(function(){r&&s()})},r=r("abort");try{n.send(o.hasContent&&o.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}}),A.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return A.globalEval(e),e}}}),A.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),A.ajaxTransport("script",function(i){var n,o;if(i.crossDomain||i.scriptAttrs)return{send:function(e,t){n=A("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",o=function(e){n.remove(),o=null,e&&t("error"===e.type?404:200,e.type)}),_.head.appendChild(n[0])},abort:function(){o&&o()}}}),[]),Qt=/(=)\?(?=&|$)|\?\?/,Zt=(A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||A.expando+"_"+Dt.guid++;return this[e]=!0,e}}),A.ajaxPrefilter("json jsonp",function(e,t,i){var n,o,r,s=!1!==e.jsonp&&(Qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Qt,"$1"+n):!1!==e.jsonp&&(e.url+=(Rt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return r||A.error(n+" was not called"),r[0]},e.dataTypes[0]="json",o=C[n],C[n]=function(){r=arguments},i.always(function(){void 0===o?A(C).removeProp(n):C[n]=o,e[n]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(n)),r&&y(o)&&o(r[0]),r=o=void 0}),"script"}),m.createHTMLDocument=((e=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),A.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(m.createHTMLDocument?((n=(t=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,t.head.appendChild(n)):t=_),n=!i&&[],(i=Q.exec(e))?[t.createElement(i[1])]:(i=Se([e],t,n),n&&n.length&&A(n).remove(),A.merge([],i.childNodes)));var n},A.fn.load=function(e,t,i){var n,o,r,s=this,a=e.indexOf(" ");return-1<a&&(n=M(e.slice(a)),e=e.slice(0,a)),y(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),0<s.length&&A.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,s.html(n?A("<div>").append(A.parseHTML(e)).find(n):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},A.expr.pseudos.animated=function(t){return A.grep(A.timers,function(e){return t===e.elem}).length},A.offset={setOffset:function(e,t,i){var n,o,r,s,a=A.css(e,"position"),l=A(e),c={};"static"===a&&(e.style.position="relative"),r=l.offset(),n=A.css(e,"top"),s=A.css(e,"left"),a=("absolute"===a||"fixed"===a)&&-1<(n+s).indexOf("auto")?(o=(a=l.position()).top,a.left):(o=parseFloat(n)||0,parseFloat(s)||0),null!=(t=y(t)?t.call(e,i,A.extend({},r)):t).top&&(c.top=t.top-r.top+o),null!=t.left&&(c.left=t.left-r.left+a),"using"in t?t.using.call(e,c):("number"==typeof c.top&&(c.top+="px"),"number"==typeof c.left&&(c.left+="px"),l.css(c))}},A.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){A.offset.setOffset(this,t,e)});var e,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],o={top:0,left:0};if("fixed"===A.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===A.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((o=A(e).offset()).top+=A.css(e,"borderTopWidth",!0),o.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-A.css(n,"marginTop",!0),left:t.left-o.left-A.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===A.css(e,"position");)e=e.offsetParent;return e||x})}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,o){var r="pageYOffset"===o;A.fn[t]=function(e){return d(this,function(e,t,i){var n;if(g(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===i)return n?n[o]:e[t];n?n.scrollTo(r?n.pageXOffset:i,r?i:n.pageYOffset):e[t]=i},t,e,arguments.length)}}),A.each(["top","left"],function(e,i){A.cssHooks[i]=tt(m.pixelPosition,function(e,t){if(t)return t=et(e,i),Xe.test(t)?A(e).position()[i]+"px":t})}),A.each({Height:"height",Width:"width"},function(s,a){A.each({padding:"inner"+s,content:a,"":"outer"+s},function(n,r){A.fn[r]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),o=n||(!0===e||!0===t?"margin":"border");return d(this,function(e,t,i){var n;return g(e)?0===r.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+s],n["scroll"+s],e.body["offset"+s],n["offset"+s],n["client"+s])):void 0===i?A.css(e,t,o):A.style(e,t,i,o)},a,i?e:void 0,i)}})}),A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){A.fn[t]=function(e){return this.on(t,e)}}),A.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){A.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),Jt=(A.proxy=function(e,t){var i,n;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=a.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(a.call(arguments)))}).guid=e.guid=e.guid||A.guid++,n},A.holdReady=function(e){e?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=l,A.isFunction=y,A.isWindow=g,A.camelCase=b,A.type=f,A.now=Date.now,A.isNumeric=function(e){var t=A.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},A.trim=function(e){return null==e?"":(e+"").replace(Zt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return A}),C.jQuery),ei=C.$;return A.noConflict=function(e){return C.$===A&&(C.$=ei),e&&C.jQuery===A&&(C.jQuery=Jt),A},void 0===$&&(C.jQuery=C.$=A),A}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(_){_.ui=_.ui||{};_.ui.version="1.12.1";var o,n,A,E,r,s,a,l,c,i,$=0,u=Array.prototype.slice;_.cleanData=(o=_.cleanData,function(e){for(var t,i,n=0;null!=(i=e[n]);n++)try{(t=_._data(i,"events"))&&t.remove&&_(i).triggerHandler("remove")}catch(e){}o(e)}),_.widget=function(e,i,t){var n,o,r,s={},a=e.split(".")[0],l=a+"-"+(e=e.split(".")[1]);return t||(t=i,i=_.Widget),_.isArray(t)&&(t=_.extend.apply(null,[{}].concat(t))),_.expr[":"][l.toLowerCase()]=function(e){return!!_.data(e,l)},_[a]=_[a]||{},n=_[a][e],o=_[a][e]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},_.extend(o,n,{version:t.version,_proto:_.extend({},t),_childConstructors:[]}),(r=new i).options=_.widget.extend({},r.options),_.each(t,function(t,n){function o(){return i.prototype[t].apply(this,arguments)}function r(e){return i.prototype[t].apply(this,e)}_.isFunction(n)?s[t]=function(){var e,t=this._super,i=this._superApply;return this._super=o,this._superApply=r,e=n.apply(this,arguments),this._super=t,this._superApply=i,e}:s[t]=n}),o.prototype=_.widget.extend(r,{widgetEventPrefix:n&&r.widgetEventPrefix||e},s,{constructor:o,namespace:a,widgetName:e,widgetFullName:l}),n?(_.each(n._childConstructors,function(e,t){var i=t.prototype;_.widget(i.namespace+"."+i.widgetName,o,t._proto)}),delete n._childConstructors):i._childConstructors.push(o),_.widget.bridge(e,o),o},_.widget.extend=function(e){for(var t,i,n=u.call(arguments,1),o=0,r=n.length;o<r;o++)for(t in n[o])i=n[o][t],n[o].hasOwnProperty(t)&&void 0!==i&&(_.isPlainObject(i)?e[t]=_.isPlainObject(e[t])?_.widget.extend({},e[t],i):_.widget.extend({},i):e[t]=i);return e},_.widget.bridge=function(r,t){var s=t.prototype.widgetFullName||r;_.fn[r]=function(i){var e="string"==typeof i,n=u.call(arguments,1),o=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=_.data(this,s);return"instance"===i?(o=t,!1):t?_.isFunction(t[i])&&"_"!==i.charAt(0)?(e=t[i].apply(t,n))!==t&&void 0!==e?(o=e&&e.jquery?o.pushStack(e.get()):e,!1):void 0:_.error("no such method '"+i+"' for "+r+" widget instance"):_.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+i+"'")}):o=void 0:(n.length&&(i=_.widget.extend.apply(null,[i].concat(n))),this.each(function(){var e=_.data(this,s);e?(e.option(i||{}),e._init&&e._init()):_.data(this,s,new t(i,this))})),o}},_.Widget=function(){},_.Widget._childConstructors=[],_.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=_(t||this.defaultElement||this)[0],this.element=_(t),this.uuid=$++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=_(),this.hoverable=_(),this.focusable=_(),this.classesElementLookup={},t!==this&&(_.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=_(t.style?t.ownerDocument:t.document||t),this.window=_(this.document[0].defaultView||this.document[0].parentWindow)),this.options=_.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:_.noop,_create:_.noop,_init:_.noop,destroy:function(){var i=this;this._destroy(),_.each(this.classesElementLookup,function(e,t){i._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:_.noop,widget:function(){return this.element},option:function(e,t){var i,n,o,r=e;if(0===arguments.length)return _.widget.extend({},this.options);if("string"==typeof e)if(r={},e=(i=e.split(".")).shift(),i.length){for(n=r[e]=_.widget.extend({},this.options[e]),o=0;o<i.length-1;o++)n[i[o]]=n[i[o]]||{},n=n[i[o]];if(e=i.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=t}return this._setOptions(r),this},_setOptions:function(e){for(var t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,i,n;for(t in e)n=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&n&&n.length&&(i=_(n.get()),this._removeClass(n,t),i.addClass(this._classes({element:i,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){var r=[],s=this;function e(e,t){for(var i,n=0;n<e.length;n++)i=s.classesElementLookup[e[n]]||_(),i=o.add?_(_.unique(i.get().concat(o.element.get()))):_(i.not(o.element).get()),s.classesElementLookup[e[n]]=i,r.push(e[n]),t&&o.classes[e[n]]&&r.push(o.classes[e[n]])}return o=_.extend({element:this.element,classes:this.options.classes||{}},o),this._on(o.element,{remove:"_untrackClassesElement"}),o.keys&&e(o.keys.match(/\S+/g)||[],!0),o.extra&&e(o.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(i){var n=this;_.each(n.classesElementLookup,function(e,t){-1!==_.inArray(i.target,t)&&(n.classesElementLookup[e]=_(t.not(i.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){var o="string"==typeof e||null===e,t={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n="boolean"==typeof n?n:i};return t.element.toggleClass(this._classes(t),n),this},_on:function(o,r,e){var s,a=this;"boolean"!=typeof o&&(e=r,r=o,o=!1),e?(r=s=_(r),this.bindings=this.bindings.add(r)):(e=r,r=this.element,s=this.widget()),_.each(e,function(e,t){function i(){if(o||!0!==a.options.disabled&&!_(this).hasClass("ui-state-disabled"))return("string"==typeof t?a[t]:t).apply(a,arguments)}"string"!=typeof t&&(i.guid=t.guid=t.guid||i.guid||_.guid++);var e=e.match(/^([\w:-]*)\s*(.*)$/),n=e[1]+a.eventNamespace,e=e[2];e?s.on(n,e,i):r.on(n,i)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t).off(t),this.bindings=_(this.bindings.not(e).get()),this.focusable=_(this.focusable.not(e).get()),this.hoverable=_(this.hoverable.not(e).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(_(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(_(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(_(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(_(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,i){var n,o,r=this.options[e];if(i=i||{},(t=_.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],o=t.originalEvent)for(n in o)n in t||(t[n]=o[n]);return this.element.trigger(t,i),!(_.isFunction(r)&&!1===r.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}},_.each({show:"fadeIn",hide:"fadeOut"},function(r,s){_.Widget.prototype["_"+r]=function(t,e,i){var n=(e="string"==typeof e?{effect:e}:e)?!0!==e&&"number"!=typeof e&&e.effect||s:r,o=!_.isEmptyObject(e="number"==typeof(e=e||{})?{duration:e}:e);e.complete=i,e.delay&&t.delay(e.delay),o&&_.effects&&_.effects.effect[n]?t[r](e):n!==r&&t[n]?t[n](e.duration,e.easing,i):t.queue(function(e){_(this)[r](),i&&i.call(t[0]),e()})}}),_.widget;function I(e,t,i){return[parseFloat(e[0])*(c.test(e[0])?t/100:1),parseFloat(e[1])*(c.test(e[1])?i/100:1)]}function x(e,t){return parseInt(_.css(e,t),10)||0}A=Math.max,E=Math.abs,r=/left|center|right/,s=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,c=/%$/,i=_.fn.position,_.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,t=_("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=t.children()[0];return _("body").append(t),e=i.offsetWidth,t.css("overflow","scroll"),e===(i=i.offsetWidth)&&(i=t[0].clientWidth),t.remove(),n=e-i},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),t="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?_.position.scrollbarWidth():0,height:t?_.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=_(e||window),i=_.isWindow(t[0]),n=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:i,isDocument:n,offset:!i&&!n?_(e).offset():{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}},_.fn.position=function(d){if(!d||!d.of)return i.apply(this,arguments);d=_.extend({},d);var h,p,f,g,m,e,v=_(d.of),y=_.position.getWithinInfo(d.within),b=_.position.getScrollInfo(y),w=(d.collision||"flip").split(" "),C={},t=9===(t=(e=v)[0]).nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:_.isWindow(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()};return v[0].preventDefault&&(d.at="left top"),p=t.width,f=t.height,m=_.extend({},g=t.offset),_.each(["my","at"],function(){var e,t,i=(d[this]||"").split(" ");(i=1===i.length?r.test(i[0])?i.concat(["center"]):s.test(i[0])?["center"].concat(i):["center","center"]:i)[0]=r.test(i[0])?i[0]:"center",i[1]=s.test(i[1])?i[1]:"center",e=a.exec(i[0]),t=a.exec(i[1]),C[this]=[e?e[0]:0,t?t[0]:0],d[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===d.at[0]?m.left+=p:"center"===d.at[0]&&(m.left+=p/2),"bottom"===d.at[1]?m.top+=f:"center"===d.at[1]&&(m.top+=f/2),h=I(C.at,p,f),m.left+=h[0],m.top+=h[1],this.each(function(){var i,e,s=_(this),a=s.outerWidth(),l=s.outerHeight(),t=x(this,"marginLeft"),n=x(this,"marginTop"),o=a+t+x(this,"marginRight")+b.width,r=l+n+x(this,"marginBottom")+b.height,c=_.extend({},m),u=I(C.my,s.outerWidth(),s.outerHeight());"right"===d.my[0]?c.left-=a:"center"===d.my[0]&&(c.left-=a/2),"bottom"===d.my[1]?c.top-=l:"center"===d.my[1]&&(c.top-=l/2),c.left+=u[0],c.top+=u[1],i={marginLeft:t,marginTop:n},_.each(["left","top"],function(e,t){_.ui.position[w[e]]&&_.ui.position[w[e]][t](c,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:l,collisionPosition:i,collisionWidth:o,collisionHeight:r,offset:[h[0]+u[0],h[1]+u[1]],my:d.my,at:d.at,within:y,elem:s})}),d.using&&(e=function(e){var t=g.left-c.left,i=t+p-a,n=g.top-c.top,o=n+f-l,r={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:s,left:c.left,top:c.top,width:a,height:l},horizontal:i<0?"left":0<t?"right":"center",vertical:o<0?"top":0<n?"bottom":"middle"};p<a&&E(t+i)<p&&(r.horizontal="center"),f<l&&E(n+o)<f&&(r.vertical="middle"),A(E(t),E(i))>A(E(n),E(o))?r.important="horizontal":r.important="vertical",d.using.call(this,e,r)}),s.offset(_.extend(c,{using:e}))})},_.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,n=n.width,r=e.left-t.collisionPosition.marginLeft,s=o-r,a=r+t.collisionWidth-n-o;t.collisionWidth>n?0<s&&a<=0?(i=e.left+s+t.collisionWidth-n-o,e.left+=s-i):e.left=!(0<a&&s<=0)&&a<s?o+n-t.collisionWidth:o:0<s?e.left+=s:0<a?e.left-=a:e.left=A(e.left-r,e.left)},top:function(e,t){var i,n=t.within,n=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,r=e.top-t.collisionPosition.marginTop,s=n-r,a=r+t.collisionHeight-o-n;t.collisionHeight>o?0<s&&a<=0?(i=e.top+s+t.collisionHeight-o-n,e.top+=s-i):e.top=!(0<a&&s<=0)&&a<s?n+o-t.collisionHeight:n:0<s?e.top+=s:0<a?e.top-=a:e.top=A(e.top-r,e.top)}},flip:{left:function(e,t){var i=t.within,n=i.offset.left+i.scrollLeft,o=i.width,i=i.isWindow?i.scrollLeft:i.offset.left,r=e.left-t.collisionPosition.marginLeft,s=r-i,r=r+t.collisionWidth-o-i,a="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,l="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,c=-2*t.offset[0];s<0?((o=e.left+a+l+c+t.collisionWidth-o-n)<0||o<E(s))&&(e.left+=a+l+c):0<r&&(0<(n=e.left-t.collisionPosition.marginLeft+a+l+c-i)||E(n)<r)&&(e.left+=a+l+c)},top:function(e,t){var i=t.within,n=i.offset.top+i.scrollTop,o=i.height,i=i.isWindow?i.scrollTop:i.offset.top,r=e.top-t.collisionPosition.marginTop,s=r-i,r=r+t.collisionHeight-o-i,a="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,l="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,c=-2*t.offset[1];s<0?((o=e.top+a+l+c+t.collisionHeight-o-n)<0||o<E(s))&&(e.top+=a+l+c):0<r&&(0<(n=e.top-t.collisionPosition.marginTop+a+l+c-i)||E(n)<r)&&(e.top+=a+l+c)}},flipfit:{left:function(){_.ui.position.flip.left.apply(this,arguments),_.ui.position.fit.left.apply(this,arguments)},top:function(){_.ui.position.flip.top.apply(this,arguments),_.ui.position.fit.top.apply(this,arguments)}}};_.ui.position,_.extend(_.expr[":"],{data:_.expr.createPseudo?_.expr.createPseudo(function(t){return function(e){return!!_.data(e,t)}}):function(e,t,i){return!!_.data(e,i[3])}}),_.fn.extend({disableSelection:(P="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(P+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var P,d,h,p,G,B,f,g,m,v,y,W,H,V,j,z,U,Y,q,K,b,w="ui-effects-",t="ui-effects-style",C="ui-effects-animated",X=_;function S(e,t,i){var n=m[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:e<0?0:n.max<e?n.max:e)}function Q(n){var o=f(),r=o._rgba=[];return n=n.toLowerCase(),y(B,function(e,t){var i=t.re.exec(n),i=i&&t.parse(i),t=t.space||"rgba";if(i)return i=o[t](i),o[g[t].cache]=i[g[t].cache],r=o._rgba=i._rgba,!1}),r.length?("0,0,0,0"===r.join()&&d.extend(r,p.transparent),o):p[n]}function T(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function Z(e){var t,i,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)"string"==typeof n[t=n[i]]&&(o[_.camelCase(t)]=n[t]);else for(t in n)"string"==typeof n[t]&&(o[t]=n[t]);return o}function k(e,t,i,n){return e={effect:e=_.isPlainObject(e)?(t=e).effect:e},_.isFunction(t=null==t?{}:t)&&(n=t,i=null,t={}),"number"!=typeof t&&!_.fx.speeds[t]||(n=i,i=t,t={}),_.isFunction(i)&&(n=i,i=null),t&&_.extend(e,t),i=i||t.duration,e.duration=_.fx.off?0:"number"==typeof i?i:i in _.fx.speeds?_.fx.speeds[i]:_.fx.speeds._default,e.complete=n||t.complete,e}function D(e){return!e||"number"==typeof e||_.fx.speeds[e]||("string"==typeof e&&!_.effects.effect[e]||(_.isFunction(e)||"object"==typeof e&&!e.effect))}function J(e,t){var i=t.outerWidth(),t=t.outerHeight(),e=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,i,t,0];return{top:parseFloat(e[1])||0,right:"auto"===e[2]?i:parseFloat(e[2]),bottom:"auto"===e[3]?t:parseFloat(e[3]),left:parseFloat(e[4])||0}}_.effects={effect:{}},G=/^([\-+])=\s*(\d+\.?\d*)/,B=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],f=(d=X).Color=function(e,t,i,n){return new d.Color.fn.parse(e,t,i,n)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},m={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},v=f.support={},e=d("<p>")[0],y=d.each,e.style.cssText="background-color:rgba(1,1,1,.5)",v.rgba=-1<e.style.backgroundColor.indexOf("rgba"),y(g,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),(f.fn=d.extend(f.prototype,{parse:function(o,e,t,i){if(o===h)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=d(o).css(e),e=h);var r=this,n=d.type(o),s=this._rgba=[];return e!==h&&(o=[o,e,t,i],n="array"),"string"===n?this.parse(Q(o)||p._default):"array"===n?(y(g.rgba.props,function(e,t){s[t.idx]=S(o[t.idx],t)}),this):"object"===n?(y(g,o instanceof f?function(e,t){o[t.cache]&&(r[t.cache]=o[t.cache].slice())}:function(e,i){var n=i.cache;y(i.props,function(e,t){if(!r[n]&&i.to){if("alpha"===e||null==o[e])return;r[n]=i.to(r._rgba)}r[n][t.idx]=S(o[e],t,!0)}),r[n]&&d.inArray(null,r[n].slice(0,3))<0&&(r[n][3]=1,i.from&&(r._rgba=i.from(r[n])))}),this):void 0},is:function(e){var o=f(e),r=!0,s=this;return y(g,function(e,t){var i,n=o[t.cache];return n&&(i=s[t.cache]||t.to&&t.to(s._rgba)||[],y(t.props,function(e,t){if(null!=n[t.idx])return r=n[t.idx]===i[t.idx]})),r}),r},_space:function(){var i=[],n=this;return y(g,function(e,t){n[t.cache]&&i.push(e)}),i.pop()},transition:function(e,s){var e=(c=f(e))._space(),t=g[e],i=0===this.alpha()?f("transparent"):this,a=i[t.cache]||t.to(i._rgba),l=a.slice(),c=c[t.cache];return y(t.props,function(e,t){var i=t.idx,n=a[i],o=c[i],r=m[t.type]||{};null!==o&&(null===n?l[i]=o:(r.mod&&(o-n>r.mod/2?n+=r.mod:n-o>r.mod/2&&(n-=r.mod)),l[i]=S((o-n)*s+n,t)))}),this[e](l)},blend:function(e){if(1===this._rgba[3])return this;var t=this._rgba.slice(),i=t.pop(),n=f(e)._rgba;return f(d.map(t,function(e,t){return(1-i)*n[t]+i*e}))},toRgbaString:function(){var e="rgba(",t=d.map(this._rgba,function(e,t){return null==e?2<t?1:0:e});return 1===t[3]&&(t.pop(),e="rgb("),e+t.join()+")"},toHslaString:function(){var e="hsla(",t=d.map(this.hsla(),function(e,t){return null==e&&(e=2<t?1:0),e=t&&t<3?Math.round(100*e)+"%":e});return 1===t[3]&&(t.pop(),e="hsl("),e+t.join()+")"},toHexString:function(e){var t=this._rgba.slice(),i=t.pop();return e&&t.push(~~(255*i)),"#"+d.map(t,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}})).parse.prototype=f.fn,g.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/255,i=e[1]/255,n=e[2]/255,e=e[3],o=Math.max(t,i,n),r=Math.min(t,i,n),s=o-r,a=o+r,l=.5*a,r=r===o?0:t===o?60*(i-n)/s+360:i===o?60*(n-t)/s+120:60*(t-i)/s+240,o=0==s?0:l<=.5?s/a:s/(2-a);return[Math.round(r)%360,o,l,null==e?1:e]},g.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],e=e[3],i=n<=.5?n*(1+i):n+i-n*i,n=2*n-i;return[Math.round(255*T(n,i,t+1/3)),Math.round(255*T(n,i,t)),Math.round(255*T(n,i,t-1/3)),e]},y(g,function(a,e){var r=e.props,s=e.cache,l=e.to,c=e.from;f.fn[a]=function(e){if(l&&!this[s]&&(this[s]=l(this._rgba)),e===h)return this[s].slice();var t,i=d.type(e),n="array"===i||"object"===i?e:arguments,o=this[s].slice();return y(r,function(e,t){e=n["object"===i?e:t.idx];null==e&&(e=o[t.idx]),o[t.idx]=S(e,t)}),c?((t=f(c(o)))[s]=o,t):f(o)},y(r,function(r,s){f.fn[r]||(f.fn[r]=function(e){var t=d.type(e),i="alpha"===r?this._hsla?"hsla":"rgba":a,n=this[i](),o=n[s.idx];return"undefined"===t?o:("function"===t&&(e=e.call(this,o),t=d.type(e)),null==e&&s.empty?this:("string"===t&&(t=G.exec(e))&&(e=o+parseFloat(t[2])*("+"===t[1]?1:-1)),n[s.idx]=e,this[i](n)))})})}),(f.hook=function(e){e=e.split(" ");y(e,function(e,r){d.cssHooks[r]={set:function(e,t){var i,n,o="";if("transparent"!==t&&("string"!==d.type(t)||(i=Q(t)))){if(t=f(i||t),!v.rgba&&1!==t._rgba[3]){for(n="backgroundColor"===r?e.parentNode:e;(""===o||"transparent"===o)&&n&&n.style;)try{o=d.css(n,"backgroundColor"),n=n.parentNode}catch(e){}t=t.blend(o&&"transparent"!==o?o:"_default")}t=t.toRgbaString()}try{e.style[r]=t}catch(e){}}},d.fx.step[r]=function(e){e.colorInit||(e.start=f(e.elem,r),e.end=f(e.end),e.colorInit=!0),d.cssHooks[r].set(e.elem,e.start.transition(e.end,e.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),d.cssHooks.borderColor={expand:function(i){var n={};return y(["Top","Right","Bottom","Left"],function(e,t){n["border"+t+"Color"]=i}),n}},p=d.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},j=["add","remove","toggle"],z={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},_.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,t){_.fx.step[t]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(X.style(e.elem,t,e.end),e.setAttr=!0)}}),_.fn.addBack||(_.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),_.effects.animateClass=function(o,e,t,i){var r=_.speed(e,t,i);return this.queue(function(){var i=_(this),e=i.attr("class")||"",t=(t=r.children?i.find("*").addBack():i).map(function(){return{el:_(this),start:Z(this)}}),n=function(){_.each(j,function(e,t){o[t]&&i[t+"Class"](o[t])})};n(),t=t.map(function(){return this.end=Z(this.el[0]),this.diff=function(e,t){var i,n,o={};for(i in t)n=t[i],e[i]===n||z[i]||!_.fx.step[i]&&isNaN(parseFloat(n))||(o[i]=n);return o}(this.start,this.end),this}),i.attr("class",e),t=t.map(function(){var e=this,t=_.Deferred(),i=_.extend({},r,{queue:!1,complete:function(){t.resolve(e)}});return this.el.animate(this.diff,i),t.promise()}),_.when.apply(_,t.get()).done(function(){n(),_.each(arguments,function(){var t=this.el;_.each(this.diff,function(e){t.css(e,"")})}),r.complete.call(i[0])})})},_.fn.extend({addClass:(V=_.fn.addClass,function(e,t,i,n){return t?_.effects.animateClass.call(this,{add:e},t,i,n):V.apply(this,arguments)}),removeClass:(H=_.fn.removeClass,function(e,t,i,n){return 1<arguments.length?_.effects.animateClass.call(this,{remove:e},t,i,n):H.apply(this,arguments)}),toggleClass:(W=_.fn.toggleClass,function(e,t,i,n,o){return"boolean"==typeof t||void 0===t?i?_.effects.animateClass.call(this,t?{add:e}:{remove:e},i,n,o):W.apply(this,arguments):_.effects.animateClass.call(this,{toggle:e},t,i,n)}),switchClass:function(e,t,i,n,o){return _.effects.animateClass.call(this,{add:t,remove:e},i,n,o)}}),_.expr&&_.expr.filters&&_.expr.filters.animated&&(_.expr.filters.animated=(U=_.expr.filters.animated,function(e){return!!_(e).data(C)||U(e)})),!1!==_.uiBackCompat&&_.extend(_.effects,{save:function(e,t){for(var i=0,n=t.length;i<n;i++)null!==t[i]&&e.data(w+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i,n=0,o=t.length;n<o;n++)null!==t[n]&&(i=e.data(w+t[n]),e.css(t[n],i))},setMode:function(e,t){return t="toggle"===t?e.is(":hidden")?"show":"hide":t},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var n={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},e=_("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),t={width:i.width(),height:i.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}return i.wrap(e),i[0]!==o&&!_.contains(i[0],o)||_(o).trigger("focus"),e=i.parent(),"static"===i.css("position")?(e.css({position:"relative"}),i.css({position:"relative"})):(_.extend(n,{position:i.css("position"),zIndex:i.css("z-index")}),_.each(["top","left","bottom","right"],function(e,t){n[t]=i.css(t),isNaN(parseInt(n[t],10))&&(n[t]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(t),e.css(n).show()},removeWrapper:function(e){var t=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),e[0]!==t&&!_.contains(e[0],t)||_(t).trigger("focus")),e}}),_.extend(_.effects,{version:"1.12.1",define:function(e,t,i){return i||(i=t,t="effect"),_.effects.effect[e]=i,_.effects.effect[e].mode=t,i},scaledDimensions:function(e,t,i){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(t||100)/100:1,i="vertical"!==i?(t||100)/100:1;return{height:e.height()*i,width:e.width()*n,outerHeight:e.outerHeight()*i,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var n=e.queue();1<t&&n.splice.apply(n,[1,0].concat(n.splice(t,i))),e.dequeue()},saveStyle:function(e){e.data(t,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(t)||"",e.removeData(t)},mode:function(e,t){e=e.is(":hidden");return"toggle"===t&&(t=e?"show":"hide"),t=(e?"hide"===t:"show"===t)?"none":t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createPlaceholder:function(e){var t,i=e.css("position"),n=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",t=_("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(w+"placeholder",t)),e.css({position:i,left:n.left,top:n.top}),t},removePlaceholder:function(e){var t=w+"placeholder",i=e.data(t);i&&(i.remove(),e.removeData(t))},cleanUp:function(e){_.effects.restoreStyle(e),_.effects.removePlaceholder(e)},setTransition:function(n,e,o,r){return r=r||{},_.each(e,function(e,t){var i=n.cssUnit(t);0<i[0]&&(r[t]=i[0]*o+i[1])}),r}}),_.fn.extend({effect:function(){function e(e){var t=_(this),i=_.effects.mode(t,a)||r;t.data(C,!0),l.push(i),r&&("show"===i||i===r&&"hide"===i)&&t.show(),r&&"none"===i||_.effects.saveStyle(t),_.isFunction(e)&&e()}var n=k.apply(this,arguments),o=_.effects.effect[n.effect],r=o.mode,t=n.queue,i=t||"fx",s=n.complete,a=n.mode,l=[];return _.fx.off||!o?a?this[a](n.duration,s):this.each(function(){s&&s.call(this)}):!1===t?this.each(e).each(c):this.queue(i,e).queue(i,c);function c(e){var t=_(this);function i(){_.isFunction(s)&&s.call(t[0]),_.isFunction(e)&&e()}n.mode=l.shift(),!1===_.uiBackCompat||r?"none"===n.mode?(t[a](),i()):o.call(t[0],n,function(){t.removeData(C),_.effects.cleanUp(t),"hide"===n.mode&&t.hide(),i()}):(t.is(":hidden")?"hide"===a:"show"===a)?(t[a](),i()):o.call(t[0],n,i)}},show:(K=_.fn.show,function(e){var t;return D(e)?K.apply(this,arguments):((t=k.apply(this,arguments)).mode="show",this.effect.call(this,t))}),hide:(q=_.fn.hide,function(e){var t;return D(e)?q.apply(this,arguments):((t=k.apply(this,arguments)).mode="hide",this.effect.call(this,t))}),toggle:(Y=_.fn.toggle,function(e){var t;return D(e)||"boolean"==typeof e?Y.apply(this,arguments):((t=k.apply(this,arguments)).mode="toggle",this.effect.call(this,t))}),cssUnit:function(e){var i=this.css(e),n=[];return _.each(["em","px","%","pt"],function(e,t){0<i.indexOf(t)&&(n=[parseFloat(i),t])}),n},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):J(this.css("clip"),this)},transfer:function(e,t){var i=_(this),n=_(e.to),o="fixed"===n.css("position"),r=_("body"),s=o?r.scrollTop():0,r=o?r.scrollLeft():0,a=n.offset(),a={top:a.top-s,left:a.left-r,height:n.innerHeight(),width:n.innerWidth()},n=i.offset(),l=_("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:n.top-s,left:n.left-r,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(a,e.duration,e.easing,function(){l.remove(),_.isFunction(t)&&t()})}}),_.fx.step.clip=function(e){e.clipInit||(e.start=_(e.elem).cssClip(),"string"==typeof e.end&&(e.end=J(e.end,e.elem)),e.clipInit=!0),_(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})},b={},_.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,e){b[e]=function(e){return Math.pow(e,t+2)}}),_.extend(b,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),_.each(b,function(e,t){_.easing["easeIn"+e]=t,_.easing["easeOut"+e]=function(e){return 1-t(1-e)},_.easing["easeInOut"+e]=function(e){return e<.5?t(2*e)/2:1-t(-2*e+2)/2}});var e=_.effects;_.effects.define("blind","hide",function(e,t){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},n=_(this),o=e.direction||"up",r=n.cssClip(),s={clip:_.extend({},r)},a=_.effects.createPlaceholder(n);s.clip[i[o][0]]=s.clip[i[o][1]],"show"===e.mode&&(n.cssClip(s.clip),a&&a.css(_.effects.clipToBox(s)),s.clip=r),a&&a.animate(_.effects.clipToBox(s),e.duration,e.easing),n.animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),_.effects.define("bounce",function(e,t){var i,n,o=_(this),r=e.mode,s="hide"===r,r="show"===r,a=e.direction||"up",l=e.distance,c=e.times||5,u=2*c+(r||s?1:0),d=e.duration/u,h=e.easing,p="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,g=0,e=o.queue().length;for(_.effects.createPlaceholder(o),a=o.css(p),l=l||o["top"==p?"outerHeight":"outerWidth"]()/3,r&&((n={opacity:1})[p]=a,o.css("opacity",0).css(p,f?2*-l:2*l).animate(n,d,h)),s&&(l/=Math.pow(2,c-1)),(n={})[p]=a;g<c;g++)(i={})[p]=(f?"-=":"+=")+l,o.animate(i,d,h).animate(n,d,h),l=s?2*l:l/2;s&&((i={opacity:0})[p]=(f?"-=":"+=")+l,o.animate(i,d,h)),o.queue(t),_.effects.unshift(o,e,1+u)}),_.effects.define("clip","hide",function(e,t){var i={},n=_(this),o=e.direction||"vertical",r="both"===o,s=r||"horizontal"===o,r=r||"vertical"===o,o=n.cssClip();i.clip={top:r?(o.bottom-o.top)/2:o.top,right:s?(o.right-o.left)/2:o.right,bottom:r?(o.bottom-o.top)/2:o.bottom,left:s?(o.right-o.left)/2:o.left},_.effects.createPlaceholder(n),"show"===e.mode&&(n.cssClip(i.clip),i.clip=o),n.animate(i,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),_.effects.define("drop","hide",function(e,t){var i,n=_(this),o="show"===e.mode,r=e.direction||"left",s="up"===r||"down"===r?"top":"left",r="up"===r||"left"===r?"-=":"+=",a="+="==r?"-=":"+=",l={opacity:0};_.effects.createPlaceholder(n),i=e.distance||n["top"==s?"outerHeight":"outerWidth"](!0)/2,l[s]=r+i,o&&(n.css(l),l[s]=a+i,l.opacity=1),n.animate(l,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),_.effects.define("explode","hide",function(e,t){var i,n,o,r,s,a,l=e.pieces?Math.round(Math.sqrt(e.pieces)):3,c=l,u=_(this),d="show"===e.mode,h=u.show().css("visibility","hidden").offset(),p=Math.ceil(u.outerWidth()/c),f=Math.ceil(u.outerHeight()/l),g=[];function m(){g.push(this),g.length===l*c&&(u.css({visibility:"visible"}),_(g).remove(),t())}for(i=0;i<l;i++)for(r=h.top+i*f,a=i-(l-1)/2,n=0;n<c;n++)o=h.left+n*p,s=n-(c-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-n*p,top:-i*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:f,left:o+(d?s*p:0),top:r+(d?a*f:0),opacity:d?0:1}).animate({left:o+(d?0:s*p),top:r+(d?0:a*f),opacity:d?1:0},e.duration||500,e.easing,m)}),_.effects.define("fade","toggle",function(e,t){var i="show"===e.mode;_(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),_.effects.define("fold","hide",function(t,e){var i=_(this),n=t.mode,o="show"===n,n="hide"===n,r=t.size||15,s=/([0-9]+)%/.exec(r),a=!!t.horizFirst?["right","bottom"]:["bottom","right"],l=t.duration/2,c=_.effects.createPlaceholder(i),u=i.cssClip(),d={clip:_.extend({},u)},h={clip:_.extend({},u)},p=[u[a[0]],u[a[1]]],f=i.queue().length;s&&(r=parseInt(s[1],10)/100*p[n?0:1]),d.clip[a[0]]=r,h.clip[a[0]]=r,h.clip[a[1]]=0,o&&(i.cssClip(h.clip),c&&c.css(_.effects.clipToBox(h)),h.clip=u),i.queue(function(e){c&&c.animate(_.effects.clipToBox(d),l,t.easing).animate(_.effects.clipToBox(h),l,t.easing),e()}).animate(d,l,t.easing).animate(h,l,t.easing).queue(e),_.effects.unshift(i,f,4)}),_.effects.define("highlight","show",function(e,t){var i=_(this),n={backgroundColor:i.css("backgroundColor")};"hide"===e.mode&&(n.opacity=0),_.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),_.effects.define("size",function(n,t){var o,i=_(this),e=["fontSize"],r=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],s=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],a=n.mode,l="effect"!==a,c=n.scale||"both",u=n.origin||["middle","center"],d=i.css("position"),h=i.position(),p=_.effects.scaledDimensions(i),f=n.from||p,g=n.to||_.effects.scaledDimensions(i,0);_.effects.createPlaceholder(i),"show"===a&&(a=f,f=g,g=a),o={from:{y:f.height/p.height,x:f.width/p.width},to:{y:g.height/p.height,x:g.width/p.width}},"box"!==c&&"both"!==c||(o.from.y!==o.to.y&&(f=_.effects.setTransition(i,r,o.from.y,f),g=_.effects.setTransition(i,r,o.to.y,g)),o.from.x!==o.to.x&&(f=_.effects.setTransition(i,s,o.from.x,f),g=_.effects.setTransition(i,s,o.to.x,g))),"content"!==c&&"both"!==c||o.from.y!==o.to.y&&(f=_.effects.setTransition(i,e,o.from.y,f),g=_.effects.setTransition(i,e,o.to.y,g)),u&&(a=_.effects.getBaseline(u,p),f.top=(p.outerHeight-f.outerHeight)*a.y+h.top,f.left=(p.outerWidth-f.outerWidth)*a.x+h.left,g.top=(p.outerHeight-g.outerHeight)*a.y+h.top,g.left=(p.outerWidth-g.outerWidth)*a.x+h.left),i.css(f),"content"!==c&&"both"!==c||(r=r.concat(["marginTop","marginBottom"]).concat(e),s=s.concat(["marginLeft","marginRight"]),i.find("*[width]").each(function(){var e=_(this),t=_.effects.scaledDimensions(e),i={height:t.height*o.from.y,width:t.width*o.from.x,outerHeight:t.outerHeight*o.from.y,outerWidth:t.outerWidth*o.from.x},t={height:t.height*o.to.y,width:t.width*o.to.x,outerHeight:t.height*o.to.y,outerWidth:t.width*o.to.x};o.from.y!==o.to.y&&(i=_.effects.setTransition(e,r,o.from.y,i),t=_.effects.setTransition(e,r,o.to.y,t)),o.from.x!==o.to.x&&(i=_.effects.setTransition(e,s,o.from.x,i),t=_.effects.setTransition(e,s,o.to.x,t)),l&&_.effects.saveStyle(e),e.css(i),e.animate(t,n.duration,n.easing,function(){l&&_.effects.restoreStyle(e)})})),i.animate(g,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){var e=i.offset();0===g.opacity&&i.css("opacity",f.opacity),l||(i.css("position","static"===d?"relative":d).offset(e),_.effects.saveStyle(i)),t()}})}),_.effects.define("scale",function(e,t){var i=_(this),n=e.mode,n=parseInt(e.percent,10)||(0===parseInt(e.percent,10)||"effect"!==n?0:100),i=_.extend(!0,{from:_.effects.scaledDimensions(i),to:_.effects.scaledDimensions(i,n,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(i.from.opacity=1,i.to.opacity=0),_.effects.effect.size.call(this,i,t)}),_.effects.define("puff","hide",function(e,t){e=_.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});_.effects.effect.scale.call(this,e,t)}),_.effects.define("pulsate","show",function(e,t){var i=_(this),n=e.mode,o="show"===n,r=2*(e.times||5)+(o||"hide"===n?1:0),s=e.duration/r,a=0,l=1,n=i.queue().length;for(!o&&i.is(":visible")||(i.css("opacity",0).show(),a=1);l<r;l++)i.animate({opacity:a},s,e.easing),a=1-a;i.animate({opacity:a},s,e.easing),i.queue(t),_.effects.unshift(i,n,1+r)}),_.effects.define("shake",function(e,t){var i=1,n=_(this),o=e.direction||"left",r=e.distance||20,s=e.times||3,a=2*s+1,l=Math.round(e.duration/a),c="up"===o||"down"===o?"top":"left",o="up"===o||"left"===o,u={},d={},h={},p=n.queue().length;for(_.effects.createPlaceholder(n),u[c]=(o?"-=":"+=")+r,d[c]=(o?"+=":"-=")+2*r,h[c]=(o?"-=":"+=")+2*r,n.animate(u,l,e.easing);i<s;i++)n.animate(d,l,e.easing).animate(h,l,e.easing);n.animate(d,l,e.easing).animate(u,l/2,e.easing).queue(t),_.effects.unshift(n,p,1+a)}),_.effects.define("slide","show",function(e,t){var i,n,o=_(this),r={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=e.mode,a=e.direction||"left",l="up"===a||"down"===a?"top":"left",c="up"===a||"left"===a,u=e.distance||o["top"==l?"outerHeight":"outerWidth"](!0),d={};_.effects.createPlaceholder(o),i=o.cssClip(),n=o.position()[l],d[l]=(c?-1:1)*u+n,d.clip=o.cssClip(),d.clip[r[a][1]]=d.clip[r[a][0]],"show"===s&&(o.cssClip(d.clip),o.css(l,d[l]),d.clip=i,d[l]=n),o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:t})}),e=!1!==_.uiBackCompat?_.effects.define("transfer",function(e,t){_(this).transfer(e,t)}):e;_.ui.focusable=function(e,t){var i,n,o,r=e.nodeName.toLowerCase();return"area"===r?(o=(i=e.parentNode).name,!(!e.href||!o||"map"!==i.nodeName.toLowerCase())&&(0<(i=_("img[usemap='#"+o+"']")).length&&i.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(r)?(n=!e.disabled)&&(o=_(e).closest("fieldset")[0])&&(n=!o.disabled):n="a"===r&&e.href||t,n&&_(e).is(":visible")&&function(e){var t=e.css("visibility");for(;"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}(_(e)))},_.extend(_.expr[":"],{focusable:function(e){return _.ui.focusable(e,null!=_.attr(e,"tabindex"))}});_.ui.focusable,_.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):_(this[0].form)},_.ui.formResetMixin={_formResetHandler:function(){var t=_(this);setTimeout(function(){var e=t.data("ui-form-reset-instances");_.each(e,function(){this.refresh()})})},_bindFormResetHandler:function(){var e;this.form=this.element.form(),this.form.length&&((e=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e))},_unbindFormResetHandler:function(){var e;this.form.length&&((e=this.form.data("ui-form-reset-instances")).splice(_.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},"1.7"===_.fn.jquery.substring(0,3)&&(_.each(["Width","Height"],function(e,i){var o="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),r={innerWidth:_.fn.innerWidth,innerHeight:_.fn.innerHeight,outerWidth:_.fn.outerWidth,outerHeight:_.fn.outerHeight};function s(e,t,i,n){return _.each(o,function(){t-=parseFloat(_.css(e,"padding"+this))||0,i&&(t-=parseFloat(_.css(e,"border"+this+"Width"))||0),n&&(t-=parseFloat(_.css(e,"margin"+this))||0)}),t}_.fn["inner"+i]=function(e){return void 0===e?r["inner"+i].call(this):this.each(function(){_(this).css(n,s(this,e)+"px")})},_.fn["outer"+i]=function(e,t){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){_(this).css(n,s(this,e,!0,t)+"px")})}}),_.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),_.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},_.ui.escapeSelector=(ee=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(ee,"\\$1")}),_.fn.labels=function(){var e,t,i;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(t=this.eq(0).parents("label"),(e=this.attr("id"))&&(i=(i=this.eq(0).parents().last()).add((i.length?i:this).siblings()),e="label[for='"+_.ui.escapeSelector(e)+"']",t=t.add(i.find(e).addBack(e))),this.pushStack(t))},_.fn.scrollParent=function(e){var t=this.css("position"),i="absolute"===t,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,e=this.parents().filter(function(){var e=_(this);return(!i||"static"!==e.css("position"))&&n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&e.length?e:_(this[0].ownerDocument||document)},_.extend(_.expr[":"],{tabbable:function(e){var t=_.attr(e,"tabindex"),i=null!=t;return(!i||0<=t)&&_.ui.focusable(e,i)}}),_.fn.extend({uniqueId:(te=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++te)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&_(this).removeAttr("id")})}}),_.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=_(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():_()}},_createIcons:function(){var e,t=this.options.icons;t&&(e=_("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+t.header),e.prependTo(this.headers),e=this.active.children(".ui-accordion-header-icon"),this._removeClass(e,t.header)._addClass(e,null,t.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"===e?this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()))},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var t=_.ui.keyCode,i=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case t.RIGHT:case t.DOWN:o=this.headers[(n+1)%i];break;case t.LEFT:case t.UP:o=this.headers[(n-1+i)%i];break;case t.SPACE:case t.ENTER:this._eventHandler(e);break;case t.HOME:o=this.headers[0];break;case t.END:o=this.headers[i-1]}o&&(_(e.target).attr("tabIndex",-1),_(o).attr("tabIndex",0),_(o).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===_.ui.keyCode.UP&&e.ctrlKey&&_(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=_()):!1===e.active?this._activate(0):this.active.length&&!_.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=_()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var i,e=this.options,t=e.heightStyle,n=this.element.parent();this.active=this._findActive(e.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=_(this),t=e.uniqueId().attr("id"),i=e.next(),n=i.uniqueId().attr("id");e.attr("aria-controls",n),i.attr("aria-labelledby",t)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(e.event),"fill"===t?(i=n.height(),this.element.siblings(":visible").each(function(){var e=_(this),t=e.css("position");"absolute"!==t&&"fixed"!==t&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=_(this).outerHeight(!0)}),this.headers.next().each(function(){_(this).height(Math.max(0,i-_(this).innerHeight()+_(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.headers.next().each(function(){var e=_(this).is(":visible");e||_(this).show(),i=Math.max(i,_(this).css("height","").height()),e||_(this).hide()}).height(i))},_activate:function(e){e=this._findActive(e)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:_.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):_()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&_.each(e.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var t=this.options,i=this.active,n=_(e.currentTarget),o=n[0]===i[0],r=o&&t.collapsible,s=r?_():n.next(),a=i.next(),a={oldHeader:i,oldPanel:a,newHeader:r?_():n,newPanel:s};e.preventDefault(),o&&!t.collapsible||!1===this._trigger("beforeActivate",e,a)||(t.active=!r&&this.headers.index(n),this.active=o?_():n,this._toggle(a),this._removeClass(i,"ui-accordion-header-active","ui-state-active"),t.icons&&(s=i.children(".ui-accordion-header-icon"),this._removeClass(s,null,t.icons.activeHeader)._addClass(s,null,t.icons.header)),o||(this._removeClass(n,"ui-accordion-header-collapsed")._addClass(n,"ui-accordion-header-active","ui-state-active"),t.icons&&(e=n.children(".ui-accordion-header-icon"),this._removeClass(e,null,t.icons.header)._addClass(e,null,t.icons.activeHeader)),this._addClass(n.next(),"ui-accordion-content-active")))},_toggle:function(e){var t=e.newPanel,i=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=t,this.prevHide=i,this.options.animate?this._animate(t,i,e):(i.hide(),t.show(),this._toggleComplete(e)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),t.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):t.length&&this.headers.filter(function(){return 0===parseInt(_(this).attr("tabIndex"),10)}).attr("tabIndex",-1),t.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,i,t){function n(){r._toggleComplete(t)}var o,r=this,s=0,a=e.css("box-sizing"),l=e.length&&(!i.length||e.index()<i.index()),c=this.options.animate||{},l=l&&c.down||c,u=(u="string"==typeof l?l:u)||l.easing||c.easing,d=(d="number"==typeof l?l:d)||l.duration||c.duration;return i.length?e.length?(o=e.show().outerHeight(),i.animate(this.hideProps,{duration:d,easing:u,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:d,easing:u,complete:n,step:function(e,t){t.now=Math.round(e),"height"!==t.prop?"content-box"===a&&(s+=t.now):"content"!==r.options.heightStyle&&(t.now=Math.round(o-i.outerHeight()-s),s=0)}})):i.animate(this.hideProps,d,u,n):e.animate(this.showProps,d,u,n)},_toggleComplete:function(e){var t=e.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),_.ui.safeActiveElement=function(t){var i;try{i=t.activeElement}catch(e){i=t.body}return i=(i=i||t.body).nodeName?i:t.body},_.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(e){var t=_(e.target),i=_(_.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&t.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),t.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var t,i;this.previousFilter||(t=_(e.target).closest(".ui-menu-item"),i=_(e.currentTarget),t[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,i)))},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(e){this._delay(function(){_.contains(this.element[0],_.ui.safeActiveElement(this.document[0]))||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each(function(){var e=_(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var t,i,n,o=!0;switch(e.keyCode){case _.ui.keyCode.PAGE_UP:this.previousPage(e);break;case _.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case _.ui.keyCode.HOME:this._move("first","first",e);break;case _.ui.keyCode.END:this._move("last","last",e);break;case _.ui.keyCode.UP:this.previous(e);break;case _.ui.keyCode.DOWN:this.next(e);break;case _.ui.keyCode.LEFT:this.collapse(e);break;case _.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case _.ui.keyCode.ENTER:case _.ui.keyCode.SPACE:this._activate(e);break;case _.ui.keyCode.ESCAPE:this.collapse(e);break;default:t=this.previousFilter||"",n=o=!1,i=96<=e.keyCode&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),i===t?n=!0:i=t+i,t=this._filterMenuItems(i),(t=n&&-1!==t.index(this.active.next())?this.active.nextAll(".ui-menu-item"):t).length||(i=String.fromCharCode(e.keyCode),t=this._filterMenuItems(i)),t.length?(this.focus(e,t),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&e.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var e,t,n=this,o=this.options.icons.submenu,i=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),e=i.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=_(this),t=e.prev(),i=_("<span>").data("ui-menu-submenu-caret",!0);n._addClass(i,"ui-menu-icon","ui-icon "+o),t.attr("aria-haspopup","true").prepend(i),e.attr("aria-labelledby",t.attr("id"))}),this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front"),(e=i.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var e=_(this);n._isDivider(e)&&n._addClass(e,"ui-menu-divider","ui-widget-content")}),t=(i=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(t,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!_.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){var i;"icons"===e&&(i=this.element.find(".ui-menu-icon"),this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(e){var t,i,n;this._hasScroll()&&(t=parseFloat(_.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(_.css(this.activeMenu[0],"paddingTop"))||0,t=e.offset().top-this.activeMenu.offset().top-t-i,i=this.activeMenu.scrollTop(),n=this.activeMenu.height(),e=e.outerHeight(),t<0?this.activeMenu.scrollTop(i+t):n<t+e&&this.activeMenu.scrollTop(i+t-n+e))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(e){var t=_.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var e=i?this.element:_(t&&t.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element),this._close(e),this.blur(t),this._removeClass(e.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=e},this.delay)},_close:function(e){(e=e||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!_(e.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;(n=this.active?"first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0):n)&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[t]()),this.focus(i,n)},nextPage:function(e){var t,i,n;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(t=_(this)).offset().top-i-n<0}),this.focus(e,t)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var t,i,n;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(t=_(this)).offset().top-i+n}),this.focus(e,t)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||_(e.target).closest(".ui-menu-item");var t={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,t)},_filterMenuItems:function(e){var e=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),t=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return t.test(_.trim(_(this).children(".ui-menu-item-wrapper").text()))})}}),_.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,n,o,e=this.element[0].nodeName.toLowerCase(),t="textarea"===e,e="input"===e;this.isMultiLine=t||!e&&this._isContentEditable(this.element),this.valueMethod=this.element[t||e?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))n=o=i=!0;else{n=o=i=!1;var t=_.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:i=!0,this._move("previousPage",e);break;case t.PAGE_DOWN:i=!0,this._move("nextPage",e);break;case t.UP:i=!0,this._keyEvent("previous",e);break;case t.DOWN:i=!0,this._keyEvent("next",e);break;case t.ENTER:this.menu.active&&(i=!0,e.preventDefault(),this.menu.select(e));break;case t.TAB:this.menu.active&&this.menu.select(e);break;case t.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:n=!0,this._searchTimeout(e)}}},keypress:function(e){if(i)return i=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||e.preventDefault());if(!n){var t=_.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:this._move("previousPage",e);break;case t.PAGE_DOWN:this._move("nextPage",e);break;case t.UP:this._keyEvent("previous",e);break;case t.DOWN:this._keyEvent("next",e)}}},input:function(e){if(o)return o=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=_("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==_.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,t){var i;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){_(e.target).trigger(e.originalEvent)});i=t.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:i})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(i.value),(t=t.item.attr("aria-label")||i.value)&&_.trim(t).length&&(this.liveRegion.children().hide(),_("<div>").text(t).appendTo(this.liveRegion))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==_.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=_("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var t=this.menu.element[0];return e.target===this.element[0]||e.target===t||_.contains(t,e.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e=(e=(e=e&&(e.jquery||e.nodeType?_(e):this.document.find(e).eq(0)))&&e[0]?e:this.element.closest(".ui-front, dialog")).length?e:this.document[0].body},_initSource:function(){var i,n,o=this;_.isArray(this.options.source)?(i=this.options.source,this.source=function(e,t){t(_.ui.autocomplete.filter(i,e.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,t){o.xhr&&o.xhr.abort(),o.xhr=_.ajax({url:n,data:e,dataType:"json",success:function(e){t(e)},error:function(){t([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),t=this.menu.element.is(":visible"),i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;e&&(t||i)||(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return _.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(e){e=e&&this._normalize(e),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:_.map(e,function(e){return"string"==typeof e?{label:e,value:e}:_.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),t.show(),this._resizeMenu(),t.position(_.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,e){var n=this;_.each(e,function(e,t){n._renderItemData(i,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){return _("<li>").append(_("<div>").text(t.label)).appendTo(e)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),_.extend(_.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var i=new RegExp(_.ui.autocomplete.escapeRegex(t),"i");return _.grep(e,function(e){return i.test(e.label||e.value||e)})}}),_.widget("ui.autocomplete",_.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),_("<div>").text(t).appendTo(this.liveRegion))}}),_.ui.autocomplete;var ee,te,ie,R,ne=/ui-corner-([a-z]){2,6}/g;_.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var r=this,s=[];_.each(this.options.items,function(n,e){var t,o={};if(e)return"controlgroupLabel"===n?((t=r.element.find(e)).each(function(){var e=_(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),r._addClass(t,null,"ui-widget ui-widget-content ui-state-default"),void(s=s.concat(t.get()))):void(_.fn[n]&&(o=r["_"+n+"Options"]?r["_"+n+"Options"]("middle"):{classes:{}},r.element.find(e).each(function(){var e=_(this),t=e[n]("instance"),i=_.widget.extend({},o);"button"===n&&e.parent(".ui-spinner").length||((t=t||e[n]()[n]("instance"))&&(i.classes=r._resolveClassesValues(i.classes,t)),e[n](i),i=e[n]("widget"),_.data(i[0],"ui-controlgroup-data",t||e[n]("instance")),s.push(i[0]))})))}),this.childWidgets=_(_.unique(s)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var e=_(this).data("ui-controlgroup-data");e&&e[t]&&e[t]()})},_updateCornerClass:function(e,t){t=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,t)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],n},_spinnerOptions:function(e){e=this._buildSimpleOptions(e,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(i,n){var o={};return _.each(i,function(e){var t=n.options.classes[e]||"",t=_.trim(t.replace(ne,""));o[e]=(t+" "+i[e]).replace(/\s+/g," ")}),o},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"===e?this._callChildMethod(t?"disable":"enable"):this.refresh()},refresh:function(){var o,r=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,(o=this.options.onlyVisible?o.filter(":visible"):o).length&&(_.each(["first","last"],function(e,t){var i,n=o[t]().data("ui-controlgroup-data");n&&r["_"+n.widgetName+"Options"]?((i=r["_"+n.widgetName+"Options"](1===o.length?"only":t)).classes=r._resolveClassesValues(i.classes,n),n.element[n.widgetName](i)):r._updateCornerClass(o[t](),t)}),this._callChildMethod("refresh"))}}),_.widget("ui.checkboxradio",[_.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,t=this,i=this._super()||{};return this._readType(),e=this.element.labels(),this.label=_(e[e.length-1]),this.label.length||_.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){t.originalLabel+=3===this.nodeType?_(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(i.disabled=e),i},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||_.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,t="input[name='"+_.ui.escapeSelector(e)+"']";return e?(this.form.length?_(this.form[0].elements).filter(t):_(t).filter(function(){return 0===_(this).form().length})).not(this.element):_([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=_(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(e){var t="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=_("<span>"),this.iconSpace=_("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(t+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):t+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",t),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),(e=this.iconSpace?e.not(this.iconSpace[0]):e).remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),_.ui.checkboxradio,_.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===_.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,t){var e="iconPosition"!==e,i=e?this.options.iconPosition:t,n="top"===i||"bottom"===i;this.icon?e&&this._removeClass(this.icon,null,this.options.icon):(this.icon=_("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),e&&this._addClass(this.icon,null,t),this._attachIcon(i),n?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=_("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=(void 0===e.showLabel?this.options:e).showLabel,i=(void 0===e.icon?this.options:e).icon;t||i||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),(this.element[0].disabled=t)&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==_.uiBackCompat&&(_.widget("ui.button",_.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"===e?this._super("showLabel",t):("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments))}}),_.fn.button=(ie=_.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?ie.apply(this,arguments):(_.ui.checkboxradio||_.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),_.fn.buttonset=function(){return _.ui.controlgroup||_.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),_.ui.button;function oe(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},_.extend(this._defaults,this.regional[""]),this.regional.en=_.extend(!0,{},this.regional[""]),this.regional["en-US"]=_.extend(!0,{},this.regional.en),this.dpDiv=re(_("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function re(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){_(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&_(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&_(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",t,se)}function se(){_.datepicker._isDisabledDatepicker((R.inline?R.dpDiv.parent():R.input)[0])||(_(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),_(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&_(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&_(this).addClass("ui-datepicker-next-hover"))}function O(e,t){for(var i in _.extend(e,t),t)null==t[i]&&(e[i]=t[i])}_.extend(_.ui,{datepicker:{version:"1.12.1"}}),_.extend(oe.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return O(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var i,n=e.nodeName.toLowerCase(),o="div"===n||"span"===n;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(i=this._newInst(_(e),o)).settings=_.extend({},t||{}),"input"===n?this._connectDatepicker(e,i):o&&this._inlineDatepicker(e,i)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?re(_("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var i=_(e);t.append=_([]),t.trigger=_([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(t),_.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i,n=this._get(t,"appendText"),o=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=_("<span class='"+this._appendClass+"'>"+n+"</span>"),e[o?"before":"after"](t.append)),e.off("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(n=this._get(t,"showOn"))&&"both"!==n||e.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(n=this._get(t,"buttonText"),i=this._get(t,"buttonImage"),t.trigger=_(this._get(t,"buttonImageOnly")?_("<img/>").addClass(this._triggerClass).attr({src:i,alt:n,title:n}):_("<button type='button'></button>").addClass(this._triggerClass).html(i?_("<img/>").attr({src:i,alt:n,title:n}):n)),e[o?"before":"after"](t.trigger),t.trigger.on("click",function(){return _.datepicker._datepickerShowing&&_.datepicker._lastInput===e[0]?_.datepicker._hideDatepicker():(_.datepicker._datepickerShowing&&_.datepicker._lastInput!==e[0]&&_.datepicker._hideDatepicker(),_.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){var t,i,n,o,r,s;this._get(e,"autoSize")&&!e.inline&&(r=new Date(2009,11,20),(s=this._get(e,"dateFormat")).match(/[DM]/)&&(r.setMonth((t=function(e){for(o=n=i=0;o<e.length;o++)e[o].length>i&&(i=e[o].length,n=o);return n})(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length))},_inlineDatepicker:function(e,t){var i=_(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv),_.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,o){var r,s=this._dialogInst;return s||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=_("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),_("body").append(this._dialogInput),(s=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},_.data(this._dialogInput[0],"datepicker",s)),O(s.settings,n||{}),t=t&&t.constructor===Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(r=document.documentElement.clientWidth,n=document.documentElement.clientHeight,t=document.documentElement.scrollLeft||document.body.scrollLeft,o=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[r/2-100+t,n/2-150+o]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),_.blockUI&&_.blockUI(this.dpDiv),_.data(this._dialogInput[0],"datepicker",s),this},_destroyDatepicker:function(e){var t,i=_(e),n=_.data(e,"datepicker");i.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),_.removeData(e,"datepicker"),"input"===t?(n.append.remove(),n.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||i.removeClass(this.markerClassName).empty(),R===n&&(R=null))},_enableDatepicker:function(t){var e,i=_(t),n=_.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=_.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,i=_(t),n=_.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=_.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return _.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n,o,r,s,a=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?_.extend({},_.datepicker._defaults):a?"all"===t?_.extend({},a.settings):this._get(a,t):null;n=t||{},"string"==typeof t&&((n={})[t]=i),a&&(this._curInst===a&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(a,"min"),s=this._getMinMaxDate(a,"max"),O(a.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(a.settings.minDate=this._formatDate(a,r)),null!==s&&void 0!==n.dateFormat&&void 0===n.maxDate&&(a.settings.maxDate=this._formatDate(a,s)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(_(e),a),this._autoSize(a),this._setDate(a,o),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){e=this._getInst(e);e&&this._updateDatepicker(e)},_setDateDatepicker:function(e,t){e=this._getInst(e);e&&(this._setDate(e,t),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(e,t){e=this._getInst(e);return e&&!e.inline&&this._setDateFromField(e,t),e?this._getDate(e):null},_doKeyDown:function(e){var t,i,n=_.datepicker._getInst(e.target),o=!0,r=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,_.datepicker._datepickerShowing)switch(e.keyCode){case 9:_.datepicker._hideDatepicker(),o=!1;break;case 13:return(i=_("td."+_.datepicker._dayOverClass+":not(."+_.datepicker._currentClass+")",n.dpDiv))[0]&&_.datepicker._selectDay(e.target,n.selectedMonth,n.selectedYear,i[0]),(i=_.datepicker._get(n,"onSelect"))?(t=_.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[t,n])):_.datepicker._hideDatepicker(),!1;case 27:_.datepicker._hideDatepicker();break;case 33:_.datepicker._adjustDate(e.target,e.ctrlKey?-_.datepicker._get(n,"stepBigMonths"):-_.datepicker._get(n,"stepMonths"),"M");break;case 34:_.datepicker._adjustDate(e.target,e.ctrlKey?+_.datepicker._get(n,"stepBigMonths"):+_.datepicker._get(n,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&_.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&_.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&_.datepicker._adjustDate(e.target,r?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&_.datepicker._adjustDate(e.target,e.ctrlKey?-_.datepicker._get(n,"stepBigMonths"):-_.datepicker._get(n,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&_.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&_.datepicker._adjustDate(e.target,r?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&_.datepicker._adjustDate(e.target,e.ctrlKey?+_.datepicker._get(n,"stepBigMonths"):+_.datepicker._get(n,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&_.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?_.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,i=_.datepicker._getInst(e.target);if(_.datepicker._get(i,"constrainInput"))return i=_.datepicker._possibleChars(_.datepicker._get(i,"dateFormat")),t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||t<" "||!i||-1<i.indexOf(t)},_doKeyUp:function(e){e=_.datepicker._getInst(e.target);if(e.input.val()!==e.lastVal)try{_.datepicker.parseDate(_.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,_.datepicker._getFormatConfig(e))&&(_.datepicker._setDateFromField(e),_.datepicker._updateAlternate(e),_.datepicker._updateDatepicker(e))}catch(e){}return!0},_showDatepicker:function(e){var t,i,n,o;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=_("input",e.parentNode)[0]),_.datepicker._isDisabledDatepicker(e)||_.datepicker._lastInput===e||(o=_.datepicker._getInst(e),_.datepicker._curInst&&_.datepicker._curInst!==o&&(_.datepicker._curInst.dpDiv.stop(!0,!0),o&&_.datepicker._datepickerShowing&&_.datepicker._hideDatepicker(_.datepicker._curInst.input[0])),!1!==(i=(i=_.datepicker._get(o,"beforeShow"))?i.apply(e,[e,o]):{})&&(O(o.settings,i),o.lastVal=null,_.datepicker._lastInput=e,_.datepicker._setDateFromField(o),_.datepicker._inDialog&&(e.value=""),_.datepicker._pos||(_.datepicker._pos=_.datepicker._findPos(e),_.datepicker._pos[1]+=e.offsetHeight),t=!1,_(e).parents().each(function(){return!(t|="fixed"===_(this).css("position"))}),i={left:_.datepicker._pos[0],top:_.datepicker._pos[1]},_.datepicker._pos=null,o.dpDiv.empty(),o.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),_.datepicker._updateDatepicker(o),i=_.datepicker._checkOffset(o,i,t),o.dpDiv.css({position:_.datepicker._inDialog&&_.blockUI?"static":t?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),o.inline||(i=_.datepicker._get(o,"showAnim"),n=_.datepicker._get(o,"duration"),o.dpDiv.css("z-index",function(e){for(var t;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(t=parseInt(e.css("zIndex"),10),!isNaN(t)&&0!==t))return t;e=e.parent()}return 0}(_(e))+1),_.datepicker._datepickerShowing=!0,_.effects&&_.effects.effect[i]?o.dpDiv.show(i,_.datepicker._get(o,"showOptions"),n):o.dpDiv[i||"show"](i?n:null),_.datepicker._shouldFocusInput(o)&&o.input.trigger("focus"),_.datepicker._curInst=o)))},_updateDatepicker:function(e){this.maxRows=4,(R=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,i=this._getNumberOfMonths(e),n=i[1],o=e.dpDiv.find("."+this._dayOverClass+" a");0<o.length&&se.apply(o.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<n&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===_.datepicker._curInst&&_.datepicker._datepickerShowing&&_.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:_(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:_(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-r:0,t.left-=i&&t.left===e.input.offset().left?_(document).scrollLeft():0,t.top-=i&&t.top===e.input.offset().top+s?_(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>a&&n<a?Math.abs(t.left+n-a):0),t.top-=Math.min(t.top,t.top+o>l&&o<l?Math.abs(o+s):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||_.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];return[(t=_(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,i,n=this._curInst;!n||e&&n!==_.data(e,"datepicker")||this._datepickerShowing&&(e=this._get(n,"showAnim"),i=this._get(n,"duration"),t=function(){_.datepicker._tidyDialog(n)},_.effects&&(_.effects.effect[e]||_.effects[e])?n.dpDiv.hide(e,_.datepicker._get(n,"showOptions"),i,t):n.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?i:null,t),e||t(),this._datepickerShowing=!1,(i=this._get(n,"onClose"))&&i.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),_.blockUI&&(_.unblockUI(),_("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){var t;_.datepicker._curInst&&(e=_(e.target),t=_.datepicker._getInst(e[0]),(!(e[0].id===_.datepicker._mainDivId||0!==e.parents("#"+_.datepicker._mainDivId).length||e.hasClass(_.datepicker.markerClassName)||e.closest("."+_.datepicker._triggerClass).length||!_.datepicker._datepickerShowing||_.datepicker._inDialog&&_.blockUI)||e.hasClass(_.datepicker.markerClassName)&&_.datepicker._curInst!==t)&&_.datepicker._hideDatepicker())},_adjustDate:function(e,t,i){var e=_(e),n=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(n,t+("M"===i?this._get(n,"showCurrentAtPos"):0),i),this._updateDatepicker(n))},_gotoToday:function(e){var t,e=_(e),i=this._getInst(e[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(t=new Date,i.selectedDay=t.getDate(),i.drawMonth=i.selectedMonth=t.getMonth(),i.drawYear=i.selectedYear=t.getFullYear()),this._notifyChange(i),this._adjustDate(e)},_selectMonthYear:function(e,t,i){var e=_(e),n=this._getInst(e[0]);n["selected"+("M"===i?"Month":"Year")]=n["draw"+("M"===i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(e)},_selectDay:function(e,t,i,n){var o=_(e);_(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((o=this._getInst(o[0])).selectedDay=o.currentDay=_("a",n).html(),o.selectedMonth=o.currentMonth=t,o.selectedYear=o.currentYear=i,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){e=_(e);this._selectDate(e,"")},_selectDate:function(e,t){var i,e=_(e),e=this._getInst(e[0]);t=null!=t?t:this._formatDate(e),e.input&&e.input.val(t),this._updateAlternate(e),(i=this._get(e,"onSelect"))?i.apply(e.input?e.input[0]:null,[t,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var t,i,n=this._get(e,"altField");n&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),t=this._getDate(e),i=this.formatDate(i,t,this._getFormatConfig(e)),_(n).val(i))},noWeekends:function(e){e=e.getDay();return[0<e&&e<6,""]},iso8601Week:function(e){var t,e=new Date(e.getTime());return e.setDate(e.getDate()+4-(e.getDay()||7)),t=e.getTime(),e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(t,o,e){if(null==t||null==o)throw"Invalid arguments";if(""===(o="object"==typeof o?o.toString():o+""))return null;function i(e){var t=b(e),t="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,e=new RegExp("^\\d{"+("y"===e?t:1)+","+t+"}");if(t=o.substring(l).match(e))return l+=t[0].length,parseInt(t[0],10);throw"Missing number at position "+l}function n(e,t,i){var n=-1,e=_.map(b(e)?i:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(_.each(e,function(e,t){var i=t[1];if(o.substr(l,i.length).toLowerCase()===i.toLowerCase())return n=t[0],l+=i.length,!1}),-1!==n)return n+1;throw"Unknown name at position "+l}function r(){if(o.charAt(l)!==t.charAt(w))throw"Unexpected literal at position "+l;l++}for(var s,a,l=0,c=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,d=(e?e.dayNames:null)||this._defaults.dayNames,h=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,m=-1,v=-1,y=!1,b=function(e){e=w+1<t.length&&t.charAt(w+1)===e;return e&&w++,e},w=0;w<t.length;w++)if(y)"'"!==t.charAt(w)||b("'")?r():y=!1;else switch(t.charAt(w)){case"d":m=i("d");break;case"D":n("D",u,d);break;case"o":v=i("o");break;case"m":g=i("m");break;case"M":g=n("M",h,p);break;case"y":f=i("y");break;case"@":f=(a=new Date(i("@"))).getFullYear(),g=a.getMonth()+1,m=a.getDate();break;case"!":f=(a=new Date((i("!")-this._ticksTo1970)/1e4)).getFullYear(),g=a.getMonth()+1,m=a.getDate();break;case"'":b("'")?r():y=!0;break;default:r()}if(l<o.length&&(e=o.substr(l),!/^\s+/.test(e)))throw"Extra/unparsed characters found in date: "+e;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=c?0:-100)),-1<v)for(g=1,m=v;;){if(m<=(s=this._getDaysInMonth(f,g-1)))break;g++,m-=s}if((a=this._daylightSavingAdjust(new Date(f,g-1,m))).getFullYear()!==f||a.getMonth()+1!==g||a.getDate()!==m)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";function n(e,t,i){var n=""+t;if(u(e))for(;n.length<i;)n="0"+n;return n}function o(e,t,i,n){return(u(e)?n:i)[t]}var r,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,c=(i?i.monthNames:null)||this._defaults.monthNames,u=function(e){e=r+1<t.length&&t.charAt(r+1)===e;return e&&r++,e},d="",h=!1;if(e)for(r=0;r<t.length;r++)if(h)"'"!==t.charAt(r)||u("'")?d+=t.charAt(r):h=!1;else switch(t.charAt(r)){case"d":d+=n("d",e.getDate(),2);break;case"D":d+=o("D",e.getDay(),s,a);break;case"o":d+=n("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=n("m",e.getMonth()+1,2);break;case"M":d+=o("M",e.getMonth(),l,c);break;case"y":d+=u("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":u("'")?d+="'":h=!0;break;default:d+=t.charAt(r)}return d},_possibleChars:function(t){function e(e){return(e=o+1<t.length&&t.charAt(o+1)===e)&&o++,e}for(var i="",n=!1,o=0;o<t.length;o++)if(n)"'"!==t.charAt(o)||e("'")?i+=t.charAt(o):n=!1;else switch(t.charAt(o)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":e("'")?i+="'":n=!0;break;default:i+=t.charAt(o)}return i},_get:function(e,t){return(void 0!==e.settings[t]?e.settings:this._defaults)[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),r=o,s=this._getFormatConfig(e);try{r=this.parseDate(i,n,s)||o}catch(e){n=t?"":n}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=n?r.getDate():0,e.currentMonth=n?r.getMonth():0,e.currentYear=n?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(a,e,t){var i,n=null==e||""===e?t:"string"==typeof e?function(e){try{return _.datepicker.parseDate(_.datepicker._get(a,"dateFormat"),e,_.datepicker._getFormatConfig(a))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?_.datepicker._getDate(a):null)||new Date,i=t.getFullYear(),n=t.getMonth(),o=t.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=r.exec(e);s;){switch(s[2]||"d"){case"d":case"D":o+=parseInt(s[1],10);break;case"w":case"W":o+=7*parseInt(s[1],10);break;case"m":case"M":n+=parseInt(s[1],10),o=Math.min(o,_.datepicker._getDaysInMonth(i,n));break;case"y":case"Y":i+=parseInt(s[1],10),o=Math.min(o,_.datepicker._getDaysInMonth(i,n))}s=r.exec(e)}return new Date(i,n,o)}(e):"number"==typeof e?isNaN(e)?t:(n=e,(i=new Date).setDate(i.getDate()+n),i):new Date(e.getTime());return(n=n&&"Invalid Date"===n.toString()?t:n)&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,r=e.selectedYear,t=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),o===e.selectedMonth&&r===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){_.datepicker._adjustDate(i,-t,"M")},next:function(){_.datepicker._adjustDate(i,+t,"M")},hide:function(){_.datepicker._hideDatepicker()},today:function(){_.datepicker._gotoToday(i)},selectDay:function(){return _.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return _.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return _.datepicker._selectMonthYear(i,this,"Y"),!1}};_(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,o,r,$,I,P,G,s,a,B,l,c,u,d,h,p,f,g,m,v,W,y,b,w,C,H,V,_,A,E,x=new Date,j=this._daylightSavingAdjust(new Date(x.getFullYear(),x.getMonth(),x.getDate())),S=this._get(e,"isRTL"),x=this._get(e,"showButtonPanel"),T=this._get(e,"hideIfNoPrevNext"),k=this._get(e,"navigationAsDateFormat"),D=this._getNumberOfMonths(e),R=this._get(e,"showCurrentAtPos"),O=this._get(e,"stepMonths"),z=1!==D[0]||1!==D[1],U=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),F=this._getMinMaxDate(e,"min"),L=this._getMinMaxDate(e,"max"),M=e.drawMonth-R,N=e.drawYear;if(M<0&&(M+=12,N--),L)for(t=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth()-D[0]*D[1]+1,L.getDate())),t=F&&t<F?F:t;this._daylightSavingAdjust(new Date(N,M,1))>t;)--M<0&&(M=11,N--);for(e.drawMonth=M,e.drawYear=N,R=this._get(e,"prevText"),R=k?this.formatDate(R,this._daylightSavingAdjust(new Date(N,M-O,1)),this._getFormatConfig(e)):R,i=this._canAdjustMonth(e,-1,N,M)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+R+"'><span class='ui-icon ui-icon-circle-triangle-"+(S?"e":"w")+"'>"+R+"</span></a>":T?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+R+"'><span class='ui-icon ui-icon-circle-triangle-"+(S?"e":"w")+"'>"+R+"</span></a>",R=this._get(e,"nextText"),R=k?this.formatDate(R,this._daylightSavingAdjust(new Date(N,M+O,1)),this._getFormatConfig(e)):R,n=this._canAdjustMonth(e,1,N,M)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+R+"'><span class='ui-icon ui-icon-circle-triangle-"+(S?"w":"e")+"'>"+R+"</span></a>":T?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+R+"'><span class='ui-icon ui-icon-circle-triangle-"+(S?"w":"e")+"'>"+R+"</span></a>",O=this._get(e,"currentText"),T=this._get(e,"gotoCurrent")&&e.currentDay?U:j,O=k?this.formatDate(O,T,this._getFormatConfig(e)):O,R=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",k=x?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(S?R:"")+(this._isInRange(e,T)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+O+"</button>":"")+(S?"":R)+"</div>":"",o=parseInt(this._get(e,"firstDay"),10),o=isNaN(o)?0:o,r=this._get(e,"showWeek"),$=this._get(e,"dayNames"),I=this._get(e,"dayNamesMin"),P=this._get(e,"monthNames"),G=this._get(e,"monthNamesShort"),s=this._get(e,"beforeShowDay"),a=this._get(e,"showOtherMonths"),B=this._get(e,"selectOtherMonths"),l=this._getDefaultDate(e),c="",d=0;d<D[0];d++){for(h="",this.maxRows=4,p=0;p<D[1];p++){if(f=this._daylightSavingAdjust(new Date(N,M,e.selectedDay)),g=" ui-corner-all",m="",z){if(m+="<div class='ui-datepicker-group",1<D[1])switch(p){case 0:m+=" ui-datepicker-group-first",g=" ui-corner-"+(S?"right":"left");break;case D[1]-1:m+=" ui-datepicker-group-last",g=" ui-corner-"+(S?"left":"right");break;default:m+=" ui-datepicker-group-middle",g=""}m+="'>"}for(m+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+g+"'>"+(/all|left/.test(g)&&0===d?S?n:i:"")+(/all|right/.test(g)&&0===d?S?i:n:"")+this._generateMonthYearHeader(e,M,N,F,L,0<d||0<p,P,G)+"</div><table class='ui-datepicker-calendar'><thead><tr>",v=r?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",u=0;u<7;u++)v+="<th scope='col'"+(5<=(u+o+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+$[W=(u+o)%7]+"'>"+I[W]+"</span></th>";for(m+=v+"</tr></thead><tbody>",b=this._getDaysInMonth(N,M),N===e.selectedYear&&M===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,b)),y=(this._getFirstDayOfMonth(N,M)-o+7)%7,b=Math.ceil((y+b)/7),w=z&&this.maxRows>b?this.maxRows:b,this.maxRows=w,C=this._daylightSavingAdjust(new Date(N,M,1-y)),H=0;H<w;H++){for(m+="<tr>",V=r?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(C)+"</td>":"",u=0;u<7;u++)_=s?s.apply(e.input?e.input[0]:null,[C]):[!0,""],E=(A=C.getMonth()!==M)&&!B||!_[0]||F&&C<F||L&&L<C,V+="<td class='"+(5<=(u+o+6)%7?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(C.getTime()===f.getTime()&&M===e.selectedMonth&&e._keyEvent||l.getTime()===C.getTime()&&l.getTime()===f.getTime()?" "+this._dayOverClass:"")+(E?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!a?"":" "+_[1]+(C.getTime()===U.getTime()?" "+this._currentClass:"")+(C.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(A&&!a||!_[2]?"":" title='"+_[2].replace(/'/g,"&#39;")+"'")+(E?"":" data-handler='selectDay' data-event='click' data-month='"+C.getMonth()+"' data-year='"+C.getFullYear()+"'")+">"+(A&&!a?"&#xa0;":E?"<span class='ui-state-default'>"+C.getDate()+"</span>":"<a class='ui-state-default"+(C.getTime()===j.getTime()?" ui-state-highlight":"")+(C.getTime()===U.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+"' href='#'>"+C.getDate()+"</a>")+"</td>",C.setDate(C.getDate()+1),C=this._daylightSavingAdjust(C);m+=V+"</tr>"}11<++M&&(M=0,N++),h+=m+="</tbody></table>"+(z?"</div>"+(0<D[0]&&p===D[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}c+=h}return c+=k,e._keyEvent=!1,c},_generateMonthYearHeader:function(e,t,i,n,o,r,s,a){var l,c,u,d,h,p,f,g=this._get(e,"changeMonth"),m=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(r||!g)b+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=n.getMonth())&&(!c||u<=o.getMonth())&&(b+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+a[u]+"</option>");b+="</select>"}if(v||(y+=b+(!r&&g&&m?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!m)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(s=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),p=(h=function(e){e=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);return isNaN(e)?d:e})(s[0]),f=Math.max(p,h(s[1]||"")),p=n?Math.max(p,n.getFullYear()):p,f=o?Math.min(f,o.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=f;p++)e.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),v&&(y+=(!r&&g&&m?"":"&#xa0;")+b),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.selectedYear+("Y"===i?t:0),o=e.selectedMonth+("M"===i?t:0),t=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"===i?t:0),n=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,t)));e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),e=this._getMinMaxDate(e,"max"),i=i&&t<i?i:t;return e&&e<i?e:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){e=this._get(e,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),i=this._daylightSavingAdjust(new Date(i,n+(t<0?t:o[0]*o[1]),1));return t<0&&i.setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())),this._isInRange(e,i)},_isInRange:function(e,t){var i,n=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),r=null,s=null,e=this._get(e,"yearRange");return e&&(e=e.split(":"),i=(new Date).getFullYear(),r=parseInt(e[0],10),s=parseInt(e[1],10),e[0].match(/[+\-].*/)&&(r+=i),e[1].match(/[+\-].*/)&&(s+=i)),(!n||t.getTime()>=n.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),_.fn.datepicker=function(e){if(!this.length)return this;_.datepicker.initialized||(_(document).on("mousedown",_.datepicker._checkExternalClick),_.datepicker.initialized=!0),0===_("#"+_.datepicker._mainDivId).length&&_("body").append(_.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?_.datepicker["_"+e+"Datepicker"].apply(_.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?_.datepicker["_"+e+"Datepicker"].apply(_.datepicker,[this].concat(t)):_.datepicker._attachDatepicker(this,e)})},_.datepicker=new oe,_.datepicker.initialized=!1,_.datepicker.uuid=(new Date).getTime(),_.datepicker.version="1.12.1";_.datepicker,_.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var F=!1,L=(_(document).on("mouseup",function(){F=!1}),_.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){if(!0===_.data(e.target,t.widgetName+".preventClickEvent"))return _.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){var t,i,n;if(!F)return this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e,t=this,i=1===e.which,n=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&_(e.target).closest(this.options.cancel).length,!(i&&!n&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===_.data(e.target,this.widgetName+".preventClickEvent")&&_.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),F=!0))},_mouseMove:function(e){if(this._mouseMoved){if(_.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&_.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,F=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),_.ui.plugin={add:function(e,t,i){var n,o=_.ui[e].prototype;for(n in i)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([t,i[n]])},call:function(e,t,i,n){var o,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,i)}},_.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&_(e).trigger("blur")},_.widget("ui.draggable",_.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return!(this.helper||t.disabled||0<_(e.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=_(this);return _("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=_.ui.safeActiveElement(this.document[0]);_(e.target).closest(t).length||_.ui.safeBlur(t)},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),_.ui.ddmanager&&(_.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===_(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),_.ui.ddmanager&&!t.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),_.ui.ddmanager&&_.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){t=this._uiHash();if(!1===this._trigger("drag",e,t))return this._mouseUp(new _.Event("mouseup",e)),!1;this.position=t.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",_.ui.ddmanager&&_.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,i=!1;return _.ui.ddmanager&&!this.options.dropBehaviour&&(i=_.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||_.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?_(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),_.ui.ddmanager&&_.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),_.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new _.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!_(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var t=this.options,i=_.isFunction(t.helper),e=i?_(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),i&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof(e="function"==typeof e?e.call(this):e)&&(e=e.split(" ")),"left"in(e=_.isArray(e)?{left:+e[0],top:+e[1]||0}:e)&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&_.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),{top:(e=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:e).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t=this.options,i=this.document[0];this.relativeContainer=null,t.containment?"window"===t.containment?this.containment=[_(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,_(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,_(window).scrollLeft()+_(window).width()-this.helperProportions.width-this.margins.left,_(window).scrollTop()+(_(window).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:"document"===t.containment?this.containment=[0,0,_(i).width()-this.helperProportions.width-this.margins.left,(_(i).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:t.containment.constructor===Array?this.containment=t.containment:("parent"===t.containment&&(t.containment=this.helper[0].parentNode),(t=(i=_(t.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=null},_convertPositionTo:function(e,t){t=t||this.position;var e="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*e,left:t.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*e}},_generatePosition:function(e,t){var i,n=this.options,o=this._isRootNode(this.scrollParent[0]),r=e.pageX,s=e.pageY;return o&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(i=this.relativeContainer?(t=this.relativeContainer.offset(),[this.containment[0]+t.left,this.containment[1]+t.top,this.containment[2]+t.left,this.containment[3]+t.top]):this.containment,e.pageX-this.offset.click.left<i[0]&&(r=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(s=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(r=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(s=i[3]+this.offset.click.top)),n.grid&&(t=n.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY,s=!i||t-this.offset.click.top>=i[1]||t-this.offset.click.top>i[3]?t:t-this.offset.click.top>=i[1]?t-n.grid[1]:t+n.grid[1],e=n.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX,r=!i||e-this.offset.click.left>=i[0]||e-this.offset.click.left>i[2]?e:e-this.offset.click.left>=i[0]?e-n.grid[0]:e+n.grid[0]),"y"===n.axis&&(r=this.originalPageX),"x"===n.axis&&(s=this.originalPageY)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,t,i){return i=i||this._uiHash(),_.ui.plugin.call(this,e,[t,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),_.Widget.prototype._trigger.call(this,e,t,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),_.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,i){var n=_.extend({},e,{item:i.element});i.sortables=[],_(i.options.connectToSortable).each(function(){var e=_(this).sortable("instance");e&&!e.options.disabled&&(i.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,n))})},stop:function(t,e,i){var n=_.extend({},e,{item:i.element});i.cancelHelperRemoval=!1,_.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(i,n,o){_.each(o.sortables,function(){var e=!1,t=this;t.positionAbs=o.positionAbs,t.helperProportions=o.helperProportions,t.offset.click=o.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,_.each(o.sortables,function(){return this.positionAbs=o.positionAbs,this.helperProportions=o.helperProportions,this.offset.click=o.offset.click,e=this!==t&&this._intersectsWith(this.containerCache)&&_.contains(t.element[0],this.element[0])?!1:e})),e?(t.isOver||(t.isOver=1,o._parent=n.helper.parent(),t.currentItem=n.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return n.helper[0]},i.target=t.currentItem[0],t._mouseCapture(i,!0),t._mouseStart(i,!0,!0),t.offset.click.top=o.offset.click.top,t.offset.click.left=o.offset.click.left,t.offset.parent.left-=o.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=o.offset.parent.top-t.offset.parent.top,o._trigger("toSortable",i),o.dropped=t.element,_.each(o.sortables,function(){this.refreshPositions()}),o.currentItem=o.element,t.fromOutside=o),t.currentItem&&(t._mouseDrag(i),n.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",i,t._uiHash(t)),t._mouseStop(i,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),n.helper.appendTo(o._parent),o._refreshOffsets(i),n.position=o._generatePosition(i,!0),o._trigger("fromSortable",i),o.dropped=!1,_.each(o.sortables,function(){this.refreshPositions()}))})}}),_.ui.plugin.add("draggable","cursor",{start:function(e,t,i){var n=_("body"),i=i.options;n.css("cursor")&&(i._cursor=n.css("cursor")),n.css("cursor",i.cursor)},stop:function(e,t,i){i=i.options;i._cursor&&_("body").css("cursor",i._cursor)}}),_.ui.plugin.add("draggable","opacity",{start:function(e,t,i){t=_(t.helper),i=i.options;t.css("opacity")&&(i._opacity=t.css("opacity")),t.css("opacity",i.opacity)},stop:function(e,t,i){i=i.options;i._opacity&&_(t.helper).css("opacity",i._opacity)}}),_.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,t,i){var n=i.options,o=!1,r=i.scrollParentNotHidden[0],s=i.document[0];r!==s&&"HTML"!==r.tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+r.offsetHeight-e.pageY<n.scrollSensitivity?r.scrollTop=o=r.scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+r.offsetWidth-e.pageX<n.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-_(s).scrollTop()<n.scrollSensitivity?o=_(s).scrollTop(_(s).scrollTop()-n.scrollSpeed):_(window).height()-(e.pageY-_(s).scrollTop())<n.scrollSensitivity&&(o=_(s).scrollTop(_(s).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-_(s).scrollLeft()<n.scrollSensitivity?o=_(s).scrollLeft(_(s).scrollLeft()-n.scrollSpeed):_(window).width()-(e.pageX-_(s).scrollLeft())<n.scrollSensitivity&&(o=_(s).scrollLeft(_(s).scrollLeft()+n.scrollSpeed)))),!1!==o&&_.ui.ddmanager&&!n.dropBehaviour&&_.ui.ddmanager.prepareOffsets(i,e)}}),_.ui.plugin.add("draggable","snap",{start:function(e,t,i){var n=i.options;i.snapElements=[],_(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=_(this),t=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,i){for(var n,o,r,s,a,l,c,u,d,h=i.options,p=h.snapTolerance,f=t.offset.left,g=f+i.helperProportions.width,m=t.offset.top,v=m+i.helperProportions.height,y=i.snapElements.length-1;0<=y;y--)l=(a=i.snapElements[y].left-i.margins.left)+i.snapElements[y].width,u=(c=i.snapElements[y].top-i.margins.top)+i.snapElements[y].height,g<a-p||l+p<f||v<c-p||u+p<m||!_.contains(i.snapElements[y].item.ownerDocument,i.snapElements[y].item)?(i.snapElements[y].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,_.extend(i._uiHash(),{snapItem:i.snapElements[y].item})),i.snapElements[y].snapping=!1):("inner"!==h.snapMode&&(n=Math.abs(c-v)<=p,o=Math.abs(u-m)<=p,r=Math.abs(a-g)<=p,s=Math.abs(l-f)<=p,n&&(t.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(t.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(t.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),s&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),d=n||o||r||s,"outer"!==h.snapMode&&(n=Math.abs(c-m)<=p,o=Math.abs(u-v)<=p,r=Math.abs(a-f)<=p,s=Math.abs(l-g)<=p,n&&(t.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(t.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(t.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),s&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[y].snapping&&(n||o||r||s||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,_.extend(i._uiHash(),{snapItem:i.snapElements[y].item})),i.snapElements[y].snapping=n||o||r||s||d)}}),_.ui.plugin.add("draggable","stack",{start:function(e,t,i){var n,i=i.options,i=_.makeArray(_(i.stack)).sort(function(e,t){return(parseInt(_(e).css("zIndex"),10)||0)-(parseInt(_(t).css("zIndex"),10)||0)});i.length&&(n=parseInt(_(i[0]).css("zIndex"),10)||0,_(i).each(function(e){_(this).css("zIndex",n+e)}),this.css("zIndex",n+i.length))}}),_.ui.plugin.add("draggable","zIndex",{start:function(e,t,i){t=_(t.helper),i=i.options;t.css("zIndex")&&(i._zIndex=t.css("zIndex")),t.css("zIndex",i.zIndex)},stop:function(e,t,i){i=i.options;i._zIndex&&_(t.helper).css("zIndex",i._zIndex)}}),_.ui.draggable,_.widget("ui.resizable",_.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(e,t){if("hidden"===_(e).css("overflow"))return!1;var i,t=t&&"left"===t?"scrollLeft":"scrollTop";return 0<e[t]||(e[t]=1,i=0<e[t],e[t]=0,i)},_create:function(){var e,t=this.options,i=this;this._addClass("ui-resizable"),_.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(_("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),t.autoHide&&_(this.element).on("mouseenter",function(){t.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){t.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();function e(e){_(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()}var t;return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(e,t){this._super(e,t),"handles"===e&&(this._removeHandles(),this._setupHandles())},_setupHandles:function(){var e,t,i,n,o,r=this.options,s=this;if(this.handles=r.handles||(_(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=_(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},t=0;t<i.length;t++)n="ui-resizable-"+(e=_.trim(i[t])),o=_("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:r.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var t,i,n;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String?this.handles[t]=this.element.children(this.handles[t]).first().show():(this.handles[t].jquery||this.handles[t].nodeType)&&(this.handles[t]=_(this.handles[t]),this._on(this.handles[t],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=_(this.handles[t],this.element),n=/sw|ne|nw|se|n|s/.test(t)?n.outerHeight():n.outerWidth(),i=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(i,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[t])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var t,i,n=!1;for(t in this.handles)(i=_(this.handles[t])[0])!==e.target&&!_.contains(i,e.target)||(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var t,i,n=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),t=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),n.containment&&(t+=_(n.containment).scrollLeft()||0,i+=_(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:t,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=_(".ui-resizable-"+this.axis).css("cursor"),_("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t=this.originalMousePosition,i=this.axis,n=e.pageX-t.left||0,t=e.pageY-t.top||0,i=this._change[i];return this._updatePrevProperties(),i&&(i=i.apply(this,[e,n,t]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),_.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var t,i,n,o=this.options,r=this;return this._helper&&(i=(t=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:r.sizeDiff.height,t=t?0:r.sizeDiff.width,t={width:r.helper.width()-t,height:r.helper.height()-i},i=parseFloat(r.element.css("left"))+(r.position.left-r.originalPosition.left)||null,n=parseFloat(r.element.css("top"))+(r.position.top-r.originalPosition.top)||null,o.animate||this.element.css(_.extend(t,{top:n,left:i})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!o.animate&&this._proportionallyResize()),_("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,o=this.options,o={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0};(this._aspectRatio||e)&&(e=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,t=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),i>o.minHeight&&(o.minHeight=i),t<o.maxWidth&&(o.maxWidth=t),n<o.maxHeight&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),i=/nw|ne|n/.test(i);return r&&(e.width=t.minWidth),s&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=a-t.minWidth),n&&c&&(e.left=a-t.maxWidth),s&&i&&(e.top=l-t.minHeight),o&&i&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(o[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||_("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return _.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return _.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return _.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return _.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){_.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),_.ui.plugin.add("resizable","animate",{stop:function(t){var i=_(this).resizable("instance"),e=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),r=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,o=o?0:i.sizeDiff.width,o={width:i.size.width-o,height:i.size.height-r},r=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,s=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(_.extend(o,s&&r?{top:s,left:r}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&_(n[0]).css({width:e.width,height:e.height}),i._updateCache(e),i._propagate("resize",t)}})}}),_.ui.plugin.add("resizable","containment",{start:function(){var i,n,e,t,o=_(this).resizable("instance"),r=o.options,s=o.element,r=r.containment,s=r instanceof _?r.get(0):/parent/.test(r)?s.parent().get(0):r;s&&(o.containerElement=_(s),/document/.test(r)||r===document?(o.containerOffset={left:0,top:0},o.containerPosition={left:0,top:0},o.parentData={element:_(document),left:0,top:0,width:_(document).width(),height:_(document).height()||document.body.parentNode.scrollHeight}):(i=_(s),n=[],_(["Top","Right","Left","Bottom"]).each(function(e,t){n[e]=o._num(i.css("padding"+t))}),o.containerOffset=i.offset(),o.containerPosition=i.position(),o.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},r=o.containerOffset,t=o.containerSize.height,e=o.containerSize.width,e=o._hasScroll(s,"left")?s.scrollWidth:e,t=o._hasScroll(s)?s.scrollHeight:t,o.parentData={element:s,left:r.left,top:r.top,width:e,height:t}))},resize:function(e){var t=_(this).resizable("instance"),i=t.options,n=t.containerOffset,o=t.position,e=t._aspectRatio||e.shiftKey,r={top:0,left:0},s=t.containerElement,a=!0;s[0]!==document&&/static/.test(s.css("position"))&&(r=n),o.left<(t._helper?n.left:0)&&(t.size.width=t.size.width+(t._helper?t.position.left-n.left:t.position.left-r.left),e&&(t.size.height=t.size.width/t.aspectRatio,a=!1),t.position.left=i.helper?n.left:0),o.top<(t._helper?n.top:0)&&(t.size.height=t.size.height+(t._helper?t.position.top-n.top:t.position.top),e&&(t.size.width=t.size.height*t.aspectRatio,a=!1),t.position.top=t._helper?n.top:0),s=t.containerElement.get(0)===t.element.parent().get(0),i=/relative|absolute/.test(t.containerElement.css("position")),s&&i?(t.offset.left=t.parentData.left+t.position.left,t.offset.top=t.parentData.top+t.position.top):(t.offset.left=t.element.offset().left,t.offset.top=t.element.offset().top),o=Math.abs(t.sizeDiff.width+(t._helper?t.offset.left-r.left:t.offset.left-n.left)),s=Math.abs(t.sizeDiff.height+(t._helper?t.offset.top-r.top:t.offset.top-n.top)),o+t.size.width>=t.parentData.width&&(t.size.width=t.parentData.width-o,e&&(t.size.height=t.size.width/t.aspectRatio,a=!1)),s+t.size.height>=t.parentData.height&&(t.size.height=t.parentData.height-s,e&&(t.size.width=t.size.height*t.aspectRatio,a=!1)),a||(t.position.left=t.prevPosition.left,t.position.top=t.prevPosition.top,t.size.width=t.prevSize.width,t.size.height=t.prevSize.height)},stop:function(){var e=_(this).resizable("instance"),t=e.options,i=e.containerOffset,n=e.containerPosition,o=e.containerElement,r=_(e.helper),s=r.offset(),a=r.outerWidth()-e.sizeDiff.width,r=r.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(o.css("position"))&&_(this).css({left:s.left-n.left-i.left,width:a,height:r}),e._helper&&!t.animate&&/static/.test(o.css("position"))&&_(this).css({left:s.left-n.left-i.left,width:a,height:r})}}),_.ui.plugin.add("resizable","alsoResize",{start:function(){var e=_(this).resizable("instance").options;_(e.alsoResize).each(function(){var e=_(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var t=_(this).resizable("instance"),n=t.options,o=t.originalSize,r=t.originalPosition,s={height:t.size.height-o.height||0,width:t.size.width-o.width||0,top:t.position.top-r.top||0,left:t.position.left-r.left||0};_(n.alsoResize).each(function(){var e=_(this),n=_(this).data("ui-resizable-alsoresize"),o={},t=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];_.each(t,function(e,t){var i=(n[t]||0)+(s[t]||0);i&&0<=i&&(o[t]=i||null)}),e.css(o)})},stop:function(){_(this).removeData("ui-resizable-alsoresize")}}),_.ui.plugin.add("resizable","ghost",{start:function(){var e=_(this).resizable("instance"),t=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:t.height,width:t.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==_.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=_(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=_(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),_.ui.plugin.add("resizable","grid",{resize:function(){var e,t=_(this).resizable("instance"),i=t.options,n=t.size,o=t.originalSize,r=t.originalPosition,s=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-o.width)/l)*l,n=Math.round((n.height-o.height)/c)*c,d=o.width+u,h=o.height+n,p=i.maxWidth&&i.maxWidth<d,f=i.maxHeight&&i.maxHeight<h,g=i.minWidth&&i.minWidth>d,m=i.minHeight&&i.minHeight>h;i.grid=a,g&&(d+=l),m&&(h+=c),p&&(d-=l),f&&(h-=c),/^(se|s|e)$/.test(s)?(t.size.width=d,t.size.height=h):/^(ne)$/.test(s)?(t.size.width=d,t.size.height=h,t.position.top=r.top-n):/^(sw)$/.test(s)?(t.size.width=d,t.size.height=h,t.position.left=r.left-u):((h-c<=0||d-l<=0)&&(e=t._getPaddingPlusBorderDimensions(this)),0<h-c?(t.size.height=h,t.position.top=r.top-n):(h=c-e.height,t.size.height=h,t.position.top=r.top+o.height-h),0<d-l?(t.size.width=d,t.position.left=r.left-u):(d=l-e.width,t.size.width=d,t.position.left=r.left+o.width-d))}}),_.ui.resizable,_.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=_(this).css(e).offset().top;t<0&&_(this).css("top",e.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&_.fn.draggable&&this._makeDraggable(),this.options.resizable&&_.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?_(e):this.document.find(e||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:_.noop,enable:_.noop,close:function(e){var t=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||_.ui.safeBlur(_.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){t._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+_(this).css("z-index")}).get(),n=Math.max.apply(null,n);return n>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",n+1),i=!0),i&&!t&&this._trigger("focus",e),i},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=_(_.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;(e=(e=(e=(e=(e=e||this.element.find("[autofocus]")).length?e:this.element.find(":tabbable")).length?e:this.uiDialogButtonPane.find(":tabbable")).length?e:this.uiDialogTitlebarClose.filter(":tabbable")).length?e:this.uiDialog).eq(0).trigger("focus")},_keepFocus:function(e){function t(){var e=_.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||_.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),t.call(this),this._delay(t)},_createWrapper:function(){this.uiDialog=_("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===_.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);var t,i,n;e.keyCode!==_.ui.keyCode.TAB||e.isDefaultPrevented()||(t=this.uiDialog.find(":tabbable"),i=t.filter(":first"),n=t.filter(":last"),e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){n.trigger("focus")}),e.preventDefault()):(this._delay(function(){i.trigger("focus")}),e.preventDefault()))},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=_("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){_(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=_("<button type='button'></button>").button({label:_("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),e=_("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=_("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=_("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var n=this,e=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),_.isEmptyObject(e)||_.isArray(e)&&!e.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(_.each(e,function(e,t){var i;t=_.isFunction(t)?{click:t,text:e}:t,t=_.extend({type:"button"},t),i=t.click,e={icon:t.icon,iconPosition:t.iconPosition,showLabel:t.showLabel,icons:t.icons,text:t.text},delete t.click,delete t.icon,delete t.iconPosition,delete t.showLabel,delete t.icons,"boolean"==typeof t.text&&delete t.text,_("<button></button>",t).button(e).appendTo(n.uiButtonSet).on("click",function(){i.apply(n.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var o=this,r=this.options;function s(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){o._addClass(_(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",e,s(t))},drag:function(e,t){o._trigger("drag",e,s(t))},stop:function(e,t){var i=t.offset.left-o.document.scrollLeft(),n=t.offset.top-o.document.scrollTop();r.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=n?"+":"")+n,of:o.window},o._removeClass(_(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",e,s(t))}})},_makeResizable:function(){var o=this,r=this.options,e=r.resizable,t=this.uiDialog.css("position"),e="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:e,start:function(e,t){o._addClass(_(this),"ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",e,s(t))},resize:function(e,t){o._trigger("resize",e,s(t))},stop:function(e,t){var i=o.uiDialog.offset(),n=i.left-o.document.scrollLeft(),i=i.top-o.document.scrollTop();r.height=o.uiDialog.height(),r.width=o.uiDialog.width(),r.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=i?"+":"")+i,of:o.window},o._removeClass(_(this),"ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",e,s(t))}}).css("position",t)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=_(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),t=_.inArray(this,e);-1!==t&&e.splice(t,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||this.document.data("ui-dialog-instances",e=[]),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,o={};_.each(e,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(n=!0),e in i.resizableRelatedOptions&&(o[e]=t)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,n=this.uiDialog;"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:_("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((i=n.is(":data(ui-draggable)"))&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((i=n.is(":data(ui-resizable)"))&&!t&&n.resizable("destroy"),i&&"string"==typeof t&&n.resizable("option","handles",t),i||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=_(this);return _("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!_(e.target).closest(".ui-dialog").length||!!_(e.target).closest(".ui-datepicker").length},_createOverlay:function(){var t;this.options.modal&&(t=!0,this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=_("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var e;this.options.modal&&this.overlay&&((e=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),!1!==_.uiBackCompat&&_.widget("ui.dialog",_.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),_.ui.dialog,_.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=_.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){if(!arguments.length)return e=e||{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};e=arguments[0]},this._addToManager(t.scope),t.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){_.ui.ddmanager.droppables[e]=_.ui.ddmanager.droppables[e]||[],_.ui.ddmanager.droppables[e].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var e=_.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,t){var i;"accept"===e?this.accept=_.isFunction(t)?t:function(e){return e.is(t)}:"scope"===e&&(i=_.ui.ddmanager.droppables[this.options.scope],this._splice(i),this._addToManager(t)),this._super(e,t)},_activate:function(e){var t=_.ui.ddmanager.current;this._addActiveClass(),t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=_.ui.ddmanager.current;this._removeActiveClass(),t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=_.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(t)))},_out:function(e){var t=_.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(t)))},_drop:function(t,e){var i=e||_.ui.ddmanager.current,n=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=_(this).droppable("instance");if(e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&L(i,_.extend(e,{offset:e.element.offset()}),e.options.tolerance,t))return!(n=!0)}),!n&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(i)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),_.ui.intersect=function(e,t,i,n){if(!t.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,r=(e.positionAbs||e.position.absolute).top+e.margins.top,s=o+e.helperProportions.width,a=r+e.helperProportions.height,l=t.offset.left,c=t.offset.top,u=l+t.proportions().width,d=c+t.proportions().height;switch(i){case"fit":return l<=o&&s<=u&&c<=r&&a<=d;case"intersect":return l<o+e.helperProportions.width/2&&s-e.helperProportions.width/2<u&&c<r+e.helperProportions.height/2&&a-e.helperProportions.height/2<d;case"pointer":return ae(n.pageY,c,t.proportions().height)&&ae(n.pageX,l,t.proportions().width);case"touch":return(c<=r&&r<=d||c<=a&&a<=d||r<c&&d<a)&&(l<=o&&o<=u||l<=s&&s<=u||o<l&&u<s);default:return!1}});function ae(e,t,i){return t<=e&&e<t+i}!(_.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var i,n,o=_.ui.ddmanager.droppables[e.options.scope]||[],r=t?t.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<o.length;i++)if(!(o[i].options.disabled||e&&!o[i].accept.call(o[i].element[0],e.currentItem||e.element))){for(n=0;n<s.length;n++)if(s[n]===o[i].element[0]){o[i].proportions().height=0;continue e}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===r&&o[i]._activate.call(o[i],t),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(e,t){var i=!1;return _.each((_.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&L(e,this,this.options.tolerance,t)&&(i=this._drop.call(this,t)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t)))}),i},dragStart:function(e,t){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||_.ui.ddmanager.prepareOffsets(e,t)})},drag:function(o,r){o.options.refreshPositions&&_.ui.ddmanager.prepareOffsets(o,r),_.each(_.ui.ddmanager.droppables[o.options.scope]||[],function(){var e,t,i,n;this.options.disabled||this.greedyChild||!this.visible||(n=!(n=L(o,this,this.options.tolerance,r))&&this.isover?"isout":n&&!this.isover?"isover":null)&&(this.options.greedy&&(t=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter(function(){return _(this).droppable("instance").options.scope===t})).length&&((e=_(i[0]).droppable("instance")).greedyChild="isover"===n)),e&&"isover"===n&&(e.isover=!1,e.isout=!0,e._out.call(e,r)),this[n]=!0,this["isout"===n?"isover":"isout"]=!1,this["isover"===n?"_over":"_out"].call(this,r),e&&"isout"===n&&(e.isout=!1,e.isover=!0,e._over.call(e,r)))})},dragStop:function(e,t){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||_.ui.ddmanager.prepareOffsets(e,t)}})!==_.uiBackCompat&&_.widget("ui.droppable",_.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});_.ui.droppable,_.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=_("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,t=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(t.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=_("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),_.widget("ui.selectable",_.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var n=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){n.elementPos=_(n.element[0]).offset(),n.selectees=_(n.options.filter,n.element[0]),n._addClass(n.selectees,"ui-selectee"),n.selectees.each(function(){var e=_(this),t=e.offset(),i=this.getBoundingClientRect(),t={left:t.left-n.elementPos.left,top:t.top-n.elementPos.top};_.data(this,"selectable-item",{element:this,$element:e,left:t.left,top:t.top,right:t.left+i.width,bottom:t.top+i.height,startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=_("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(i){var n=this,e=this.options;this.opos=[i.pageX,i.pageY],this.elementPos=_(this.element[0]).offset(),this.options.disabled||(this.selectees=_(e.filter,this.element[0]),this._trigger("start",i),_(e.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=_.data(this,"selectable-item");e.startselected=!0,i.metaKey||i.ctrlKey||(n._removeClass(e.$element,"ui-selected"),e.selected=!1,n._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,n._trigger("unselecting",i,{unselecting:e.element}))}),_(i.target).parents().addBack().each(function(){var e,t=_.data(this,"selectable-item");if(t)return e=!i.metaKey&&!i.ctrlKey||!t.$element.hasClass("ui-selected"),n._removeClass(t.$element,e?"ui-unselecting":"ui-selected")._addClass(t.$element,e?"ui-selecting":"ui-unselecting"),t.unselecting=!e,t.selecting=e,(t.selected=e)?n._trigger("selecting",i,{selecting:t.element}):n._trigger("unselecting",i,{unselecting:t.element}),!1}))},_mouseDrag:function(n){var e,o,r,s,a,l,c;if(this.dragged=!0,!this.options.disabled)return o=this,r=this.options,s=this.opos[0],a=this.opos[1],l=n.pageX,c=n.pageY,l<s&&(e=l,l=s,s=e),c<a&&(e=c,c=a,a=e),this.helper.css({left:s,top:a,width:l-s,height:c-a}),this.selectees.each(function(){var e=_.data(this,"selectable-item"),t=!1,i={};e&&e.element!==o.element[0]&&(i.left=e.left+o.elementPos.left,i.right=e.right+o.elementPos.left,i.top=e.top+o.elementPos.top,i.bottom=e.bottom+o.elementPos.top,"touch"===r.tolerance?t=!(i.left>l||i.right<s||i.top>c||i.bottom<a):"fit"===r.tolerance&&(t=i.left>s&&i.right<l&&i.top>a&&i.bottom<c),t?(e.selected&&(o._removeClass(e.$element,"ui-selected"),e.selected=!1),e.unselecting&&(o._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1),e.selecting||(o._addClass(e.$element,"ui-selecting"),e.selecting=!0,o._trigger("selecting",n,{selecting:e.element}))):(e.selecting&&((n.metaKey||n.ctrlKey)&&e.startselected?(o._removeClass(e.$element,"ui-selecting"),e.selecting=!1,o._addClass(e.$element,"ui-selected"),e.selected=!0):(o._removeClass(e.$element,"ui-selecting"),e.selecting=!1,e.startselected&&(o._addClass(e.$element,"ui-unselecting"),e.unselecting=!0),o._trigger("unselecting",n,{unselecting:e.element}))),!e.selected||n.metaKey||n.ctrlKey||e.startselected||(o._removeClass(e.$element,"ui-selected"),e.selected=!1,o._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,o._trigger("unselecting",n,{unselecting:e.element}))))}),!1},_mouseStop:function(t){var i=this;return this.dragged=!1,_(".ui-unselecting",this.element[0]).each(function(){var e=_.data(this,"selectable-item");i._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1,e.startselected=!1,i._trigger("unselected",t,{unselected:e.element})}),_(".ui-selecting",this.element[0]).each(function(){var e=_.data(this,"selectable-item");i._removeClass(e.$element,"ui-selecting")._addClass(e.$element,"ui-selected"),e.selecting=!1,e.selected=!0,e.startselected=!0,i._trigger("selected",t,{selected:e.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),_.widget("ui.selectmenu",[_.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=_()},_drawButton:function(){var e,t=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=_("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=_("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t._rendered||t._refreshMenu()})},_drawMenu:function(){var i=this;this.menu=_("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=_("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,t){e.preventDefault(),i._setSelection(),i._select(t.item.data("ui-selectmenu-item"),e)},focus:function(e,t){t=t.item.data("ui-selectmenu-item");null!=i.focusIndex&&t.index!==i.focusIndex&&(i._trigger("focus",e,{item:t}),i.isOpen||i._select(t,e)),i.focusIndex=t.index,i.button.attr("aria-activedescendant",i.menuItems.eq(t.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(_.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var t=_("<span>");return this._setText(t,e.label),this._addClass(t,"ui-selectmenu-text"),t},_renderMenu:function(n,e){var o=this,r="";_.each(e,function(e,t){var i;t.optgroup!==r&&(i=_("<li>",{text:t.optgroup}),o._addClass(i,"ui-selectmenu-optgroup","ui-menu-divider"+(t.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),i.appendTo(n),r=t.optgroup),o._renderItemData(n,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(e,t){var i=_("<li>"),n=_("<div>",{title:t.element.attr("title")});return t.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(n,t.label),i.append(n).appendTo(e)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),n+=":not(.ui-state-disabled)"),(i="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0)).length&&this.menuInstance.focus(t,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){!this.isOpen||_(e.target).closest(".ui-selectmenu-menu, #"+_.ui.escapeSelector(this.ids.button)).length||this.close(e)}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(e){var t=!0;switch(e.keyCode){case _.ui.keyCode.TAB:case _.ui.keyCode.ESCAPE:this.close(e),t=!1;break;case _.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case _.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case _.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case _.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case _.ui.keyCode.LEFT:this._move("prev",e);break;case _.ui.keyCode.RIGHT:this._move("next",e);break;case _.ui.keyCode.HOME:case _.ui.keyCode.PAGE_UP:this._move("first",e);break;case _.ui.keyCode.END:case _.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),t=!1}t&&e.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){e=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(e,t){var i;"icons"===e&&(i=this.button.find("span.ui-icon"),this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e=(e=(e=e&&(e.jquery||e.nodeType?_(e):this.document.find(e).eq(0)))&&e[0]?e:this.element.closest(".ui-front, dialog")).length?e:this.document[0].body},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;!1===e?this.button.css("width",""):(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(e){var i=this,n=[];e.each(function(e,t){n.push(i._parseOption(_(t),e))}),this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),_.widget("ui.slider",_.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,t=this.options,i=this.element.find(".ui-slider-handle"),n=[],o=t.values&&t.values.length||1;for(i.length>o&&(i.slice(o).remove(),i=i.slice(0,o)),e=i.length;e<o;e++)n.push("<span tabindex='0'></span>");this.handles=i.add(_(n.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){_(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:_.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=_("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,o,r,t,s,a=this,l=this.options;return!l.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var t=Math.abs(i-a.values(e));(t<n||n===t&&(e===a._lastChangedValue||a.values(e)===l.min))&&(n=t,o=_(this),r=e)}),!1!==this._start(e,r)&&(this._mouseSliding=!0,this._handleIndex=r,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),t=o.offset(),s=!_(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=s?{left:0,top:0}:{left:e.pageX-t.left-o.width()/2,top:e.pageY-t.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},t=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,t),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,e="horizontal"===this.orientation?(t=this.elementSize.width,e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),e=e/t;return(e=1<e?1:e)<0&&(e=0),"vertical"===this.orientation&&(e=1-e),t=this._valueMax()-this._valueMin(),e=this._valueMin()+e*t,this._trimAlignValue(e)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==t?t:this.values(e),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,o=this.value(),r=this.values();this._hasMultipleValues()&&(n=this.values(t?0:1),o=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(n,i):Math.max(n,i)),r[t]=i),i!==o&&!1!==this._trigger("slide",e,this._uiHash(t,i,r))&&(this._hasMultipleValues()?this.values(t,i):this.value(i))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var i,n,o;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!_.isArray(e))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,n=e,o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,t){var i,n=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),_.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=n-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=0<this.options.step?this.options.step:1,i=(e-this._valueMin())%t,e=e-i;return 2*Math.abs(i)>=t&&(e+=0<i?t:-t),parseFloat(e.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;(e=Math.round((e-t)/i)*i+t)>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return e=null!==this.options.min?Math.max(e,this._precisionOf(this.options.min)):e},_precisionOf:function(e){var e=e.toString(),t=e.indexOf(".");return-1===t?0:e.length-t-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,e,n,o,r=this.options.range,s=this.options,a=this,l=!this._animateOff&&s.animate,c={};this._hasMultipleValues()?this.handles.each(function(e){i=(a.values(e)-a._valueMin())/(a._valueMax()-a._valueMin())*100,c["horizontal"===a.orientation?"left":"bottom"]=i+"%",_(this).stop(1,1)[l?"animate":"css"](c,s.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===e&&a.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},s.animate),1===e&&a.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:s.animate})):(0===e&&a.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},s.animate),1===e&&a.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:s.animate}))),t=i}):(e=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?(e-n)/(o-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,s.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},s.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},s.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},s.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},s.animate))},_handleEvents:{keydown:function(e){var t,i,n,o=_(e.target).data("ui-slider-handle-index");switch(e.keyCode){case _.ui.keyCode.HOME:case _.ui.keyCode.END:case _.ui.keyCode.PAGE_UP:case _.ui.keyCode.PAGE_DOWN:case _.ui.keyCode.UP:case _.ui.keyCode.RIGHT:case _.ui.keyCode.DOWN:case _.ui.keyCode.LEFT:if(e.preventDefault(),this._keySliding||(this._keySliding=!0,this._addClass(_(e.target),null,"ui-state-active"),!1!==this._start(e,o)))break;return}switch(n=this.options.step,t=i=this._hasMultipleValues()?this.values(o):this.value(),e.keyCode){case _.ui.keyCode.HOME:i=this._valueMin();break;case _.ui.keyCode.END:i=this._valueMax();break;case _.ui.keyCode.PAGE_UP:i=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this.numPages);break;case _.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this.numPages);break;case _.ui.keyCode.UP:case _.ui.keyCode.RIGHT:if(t===this._valueMax())return;i=this._trimAlignValue(t+n);break;case _.ui.keyCode.DOWN:case _.ui.keyCode.LEFT:if(t===this._valueMin())return;i=this._trimAlignValue(t-n)}this._slide(e,o,i)},keyup:function(e){var t=_(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,t),this._change(e,t),this._removeClass(_(e.target),null,"ui-state-active"))}}}),_.widget("ui.sortable",_.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return t<=e&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),_.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var i=null,n=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),_(e.target).parents().each(function(){if(_.data(this,o.widgetName+"-item")===o)return i=_(this),!1}),!!(i=_.data(e.target,o.widgetName+"-item")===o?_(e.target):i)&&(!(this.options.handle&&!t&&(_(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(n=!0)}),!n))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,t,i){var n,o,r=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},_.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=_("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;0<=n;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return _.ui.ddmanager&&(_.ui.ddmanager.current=this),_.ui.ddmanager&&!r.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var t,i,n,o,r=this.options,s=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(e.pageY-this.document.scrollTop()<r.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<r.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),e.pageX-this.document.scrollLeft()<r.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==s&&_.ui.ddmanager&&!r.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t=this.items.length-1;0<=t;t--)if(n=(i=this.items[t]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(n===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===n||_.contains(this.placeholder[0],n)||"semi-dynamic"===this.options.type&&_.contains(this.element[0],n))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),_.ui.ddmanager&&_.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){var i,n,o,r;if(e)return _.ui.ddmanager&&!this.options.dropBehaviour&&_.ui.ddmanager.drop(this,e),this.options.revert?(n=(i=this).placeholder.offset(),r={},(o=this.options.axis)&&"x"!==o||(r.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,_(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(e)})):this._clear(e,t),!1},cancel:function(){if(this.dragging){this._mouseUp(new _.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),_.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?_(this.domPosition.prev).after(this.currentItem):_(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},_(e).each(function(){var e=(_(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t.each(function(){i.push(_(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,c="x"===this.options.axis||a<n+c&&n+c<l,u="y"===this.options.axis||r<t+u&&t+u<s;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c&&u:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),e="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!t||!e)&&(t=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection(),this.floating?"right"===e||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),e=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&e||"left"===n&&!e:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){var t,i,n,o,r=[],s=[],a=this._connectWith();if(a&&e)for(t=a.length-1;0<=t;t--)for(i=(n=_(a[t],this.document[0])).length-1;0<=i;i--)(o=_.data(n[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([_.isFunction(o.options.items)?o.options.items.call(o.element):_(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function l(){r.push(this)}for(s.push([_.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):_(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),t=s.length-1;0<=t;t--)s[t][0].each(l);return _(r)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=_.grep(this.items,function(e){for(var t=0;t<i.length;t++)if(i[t]===e.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,i,n,o,r,s,a,l,c=this.items,u=[[_.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):_(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(t=d.length-1;0<=t;t--)for(i=(n=_(d[t],this.document[0])).length-1;0<=i;i--)(o=_.data(n[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(u.push([_.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):_(o.options.items,o.element),o]),this.containers.push(o));for(t=u.length-1;0<=t;t--)for(r=u[t][1],l=(s=u[t][i=0]).length;i<l;i++)(a=_(s[i])).data(this.widgetName+"-item",r),c.push({item:a,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var t,i,n,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),t=this.items.length-1;0<=t;t--)(i=this.items[t]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?_(this.options.toleranceElement,i.item):i.item,e||(i.width=n.outerWidth(),i.height=n.outerHeight()),o=n.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--)o=this.containers[t].element.offset(),this.containers[t].containerCache.left=o.left,this.containers[t].containerCache.top=o.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(i){var n,o=(i=i||this).options;o.placeholder&&o.placeholder.constructor!==String||(n=o.placeholder,o.placeholder={element:function(){var e=i.currentItem[0].nodeName.toLowerCase(),t=_("<"+e+">",i.document[0]);return i._addClass(t,"ui-sortable-placeholder",n||i.currentItem[0].className)._removeClass(t,"ui-sortable-helper"),"tbody"===e?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),_("<tr>",i.document[0]).appendTo(t)):"tr"===e?i._createTrPlaceholder(i.currentItem,t):"img"===e&&t.attr("src",i.currentItem.attr("src")),n||t.css("visibility","hidden"),t},update:function(e,t){n&&!o.forcePlaceholderSize||(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=_(o.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),o.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(e,t){var i=this;e.children().each(function(){_("<td>&#160;</td>",i.document[0]).attr("colspan",_(this).attr("colspan")||1).appendTo(t)})},_contactContainers:function(e){for(var t,i,n,o,r,s,a,l,c,u=null,d=null,h=this.containers.length-1;0<=h;h--)_.contains(this.currentItem[0],this.containers[h].element[0])||(this._intersectsWith(this.containers[h].containerCache)?u&&_.contains(this.containers[h].element[0],u.element[0])||(u=this.containers[h],d=h):this.containers[h].containerCache.over&&(this.containers[h]._trigger("out",e,this._uiHash(this)),this.containers[h].containerCache.over=0));if(u)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(i=1e4,n=null,o=(l=u.floating||this._isFloating(this.currentItem))?"left":"top",r=l?"width":"height",c=l?"pageX":"pageY",t=this.items.length-1;0<=t;t--)_.contains(this.containers[d].element[0],this.items[t].item[0])&&this.items[t].item[0]!==this.currentItem[0]&&(s=this.items[t].item.offset()[o],a=!1,e[c]-s>this.items[t][r]/2&&(a=!0),Math.abs(e[c]-s)<i&&(i=Math.abs(e[c]-s),n=this.items[t],this.direction=a?"up":"down"));(n||this.options.dropOnEmpty)&&(this.currentContainer===this.containers[d]?this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1):(n?this._rearrange(e,n,null,!0):this._rearrange(e,null,this.containers[d].element,!0),this._trigger("change",e,this._uiHash()),this.containers[d]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1))}},_createHelper:function(e){var t=this.options,e=_.isFunction(t.helper)?_(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"===t.helper?this.currentItem.clone():this.currentItem;return e.parents("body").length||_("parent"!==t.appendTo?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(e[0]),e[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),e[0].style.width&&!t.forceHelperSize||e.width(this.currentItem.width()),e[0].style.height&&!t.forceHelperSize||e.height(this.currentItem.height()),e},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),"left"in(e=_.isArray(e)?{left:+e[0],top:+e[1]||0}:e)&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&_.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),{top:(e=this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&_.ui.ie?{top:0,left:0}:e).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var e;return"relative"===this.cssPosition?{top:(e=this.currentItem.position()).top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}:{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(e=_(i.containment)[0],i=_(i.containment).offset(),t="hidden"!==_(e).css("overflow"),this.containment=[i.left+(parseInt(_(e).css("borderLeftWidth"),10)||0)+(parseInt(_(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(_(e).css("borderTopWidth"),10)||0)+(parseInt(_(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(t?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(_(e).css("borderLeftWidth"),10)||0)-(parseInt(_(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(t?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(_(e).css("borderTopWidth"),10)||0)-(parseInt(_(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t=t||this.position;var e="absolute"===e?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&_.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName);return{top:t.top+this.offset.relative.top*e+this.offset.parent.top*e-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop())*e,left:t.left+this.offset.relative.left*e+this.offset.parent.left*e-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())*e}},_generatePosition:function(e){var t=this.options,i=e.pageX,n=e.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&_.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),t.grid&&(e=this.originalPageY+Math.round((n-this.originalPageY)/t.grid[1])*t.grid[1],n=!this.containment||e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-t.grid[1]:e+t.grid[1],e=this.originalPageX+Math.round((i-this.originalPageX)/t.grid[0])*t.grid[0],i=!this.containment||e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-t.grid[0]:e+t.grid[0])),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function o(t,i,n){return function(e){n._trigger(t,e,i._uiHash(i))}}for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this===this.currentContainer||t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))),i=this.containers.length-1;0<=i;i--)t||n.push(o("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(o("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===_.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||_([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}});function M(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}_.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var n=this._super(),o=this.element;return _.each(["min","max","step"],function(e,t){var i=o.attr(t);null!=i&&i.length&&(n[t]=i)}),n},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((0<t?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(e){var t;function i(){this.element[0]!==_.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=t,this._delay(function(){this.previous=t}))}t=this.element[0]===_.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(e)&&this._repeat(null,_(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(_(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,_(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var t=this.options,i=_.ui.keyCode;switch(e.keyCode){case i.UP:return this._repeat(null,1,e),!0;case i.DOWN:return this._repeat(null,-1,e),!0;case i.PAGE_UP:return this._repeat(null,t.page,e),!0;case i.PAGE_DOWN:return this._repeat(null,-t.page,e),!0}return!1},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(e){var t=this.options.incremental;return t?_.isFunction(t)?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return e=null!==this.options.min?Math.max(e,this._precisionOf(this.options.min)):e},_precisionOf:function(e){var e=e.toString(),t=e.indexOf(".");return-1===t?0:e.length-t-1},_adjustValue:function(e){var t=this.options,i=null!==t.min?t.min:0,n=e-i;return e=i+Math.round(n/t.step)*t.step,e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&e<t.min?t.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var i;if("culture"===e||"numberFormat"===e)return i=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(i));"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,t.up),i=this.buttons.last().find(".ui-icon"),this._removeClass(i,null,this.options.icons.down),this._addClass(i,null,t.down)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:M(function(e){this._super(e)}),_parse:function(e){return""===(e="string"==typeof e&&""!==e?window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e:e)||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:M(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:M(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:M(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:M(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());M(this._value).call(this,e)},widget:function(){return this.uiSpinner}}),!1!==_.uiBackCompat&&_.widget("ui.spinner",_.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var N;_.ui.spinner,_.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(N=/#.*$/,function(e){var t=e.href.replace(N,""),i=location.href.replace(N,"");try{t=decodeURIComponent(t)}catch(e){}try{i=decodeURIComponent(i)}catch(e){}return 1<e.hash.length&&t===i}),_create:function(){var t=this,e=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,e.collapsible),this._processTabs(),e.active=this._initialActive(),_.isArray(e.disabled)&&(e.disabled=_.unique(e.disabled.concat(_.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(e.active):this.active=_(),this._refresh(),this.active.length&&this.load(e.active)},_initialActive:function(){var i=this.options.active,e=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(e,t){if(_(t).attr("aria-controls")===n)return i=e,!1}),null!==(i=null===i?this.tabs.index(this.tabs.filter(".ui-tabs-active")):i)&&-1!==i||(i=!!this.tabs.length&&0)),!1!==i&&-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!e&&0),i=!e&&!1===i&&this.anchors.length?0:i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):_()}},_tabKeydown:function(e){var t=_(_.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(t),n=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case _.ui.keyCode.RIGHT:case _.ui.keyCode.DOWN:i++;break;case _.ui.keyCode.UP:case _.ui.keyCode.LEFT:n=!1,i--;break;case _.ui.keyCode.END:i=this.anchors.length-1;break;case _.ui.keyCode.HOME:i=0;break;case _.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i);case _.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}e.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,n),e.ctrlKey||e.metaKey||(t.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===_.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===_.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===_.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,t){var i=this.tabs.length-1;for(;-1!==_.inArray(e=(e=i<e?0:e)<0?i:e,this.options.disabled);)e=t?e+1:e-1;return e},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"===e?this._activate(t):(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,t=this.tablist.children(":has(a[href])");e.disabled=_.map(t.filter(".ui-state-disabled"),function(e){return t.index(e)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!_.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=_()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=_()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,e=this.tabs,t=this.anchors,i=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){_(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){_(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return _("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=_(),this.anchors.each(function(e,t){var i,n,o,r=_(t).uniqueId().attr("id"),s=_(t).closest("li"),a=s.attr("aria-controls");l._isLocal(t)?(o=(i=t.hash).substring(1),n=l.element.find(l._sanitizeSelector(i))):(o=s.attr("aria-controls")||_({}).uniqueId()[0].id,(n=l.element.find(i="#"+o)).length||(n=l._createPanel(o)).insertAfter(l.panels[e-1]||l.tablist),n.attr("aria-live","polite")),n.length&&(l.panels=l.panels.add(n)),a&&s.data("ui-tabs-aria-controls",a),s.attr({"aria-controls":o,"aria-labelledby":r}),n.attr("aria-labelledby",r)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),e&&(this._off(e.not(this.tabs)),this._off(t.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return _("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var t,i;for(_.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),i=0;t=this.tabs[i];i++)t=_(t),!0===e||-1!==_.inArray(i,e)?(t.attr("aria-disabled","true"),this._addClass(t,null,"ui-state-disabled")):(t.removeAttr("aria-disabled"),this._removeClass(t,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var i={};e&&_.each(e.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,t=this.element.parent();"fill"===e?(i=t.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=_(this),t=e.css("position");"absolute"!==t&&"fixed"!==t&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=_(this).outerHeight(!0)}),this.panels.each(function(){_(this).height(Math.max(0,i-_(this).innerHeight()+_(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,_(this).height("").height())}).height(i))},_eventHandler:function(e){var t=this.options,i=this.active,n=_(e.currentTarget).closest("li"),o=n[0]===i[0],r=o&&t.collapsible,s=r?_():this._getPanelForTab(n),a=i.length?this._getPanelForTab(i):_(),i={oldTab:i,oldPanel:a,newTab:r?_():n,newPanel:s};e.preventDefault(),n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||o&&!t.collapsible||!1===this._trigger("beforeActivate",e,i)||(t.active=!r&&this.tabs.index(n),this.active=o?_():n,this.xhr&&this.xhr.abort(),a.length||s.length||_.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(n),e),this._toggle(e,i))},_toggle:function(e,t){var i=this,n=t.newPanel,o=t.oldPanel;function r(){i.running=!1,i._trigger("activate",e,t)}function s(){i._addClass(t.newTab.closest("li"),"ui-tabs-active","ui-state-active"),n.length&&i.options.show?i._show(n,i.options.show,r):(n.show(),r())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){i._removeClass(t.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s()}):(this._removeClass(t.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o.hide(),s()),o.attr("aria-hidden","true"),t.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&o.length?t.oldTab.attr("tabIndex",-1):n.length&&this.tabs.filter(function(){return 0===_(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr("aria-hidden","false"),t.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var e=this._findActive(e);e[0]!==this.active[0]&&(e=(e=e.length?e:this.active).find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:_.noop}))},_findActive:function(e){return!1===e?_():this.tabs.eq(e)},_getIndex:function(e){return e="string"==typeof e?this.anchors.index(this.anchors.filter("[href$='"+_.ui.escapeSelector(e)+"']")):e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){_.data(this,"ui-tabs-destroy")?_(this).remove():_(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=_(this),t=e.data("ui-tabs-aria-controls");t?e.attr("aria-controls",t).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var e=this.options.disabled;!1!==e&&(e=void 0!==i&&(i=this._getIndex(i),_.isArray(e)?_.map(e,function(e){return e!==i?e:null}):_.map(this.tabs,function(e,t){return t!==i?t:null})),this._setOptionDisabled(e))},disable:function(e){var t=this.options.disabled;if(!0!==t){if(void 0===e)t=!0;else{if(e=this._getIndex(e),-1!==_.inArray(e,t))return;t=_.isArray(t)?_.merge([e],t).sort():[e]}this._setOptionDisabled(t)}},load:function(e,n){e=this._getIndex(e);function o(e,t){"abort"===t&&r.panels.stop(!1,!0),r._removeClass(i,"ui-tabs-loading"),s.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr}var r=this,i=this.tabs.eq(e),e=i.find(".ui-tabs-anchor"),s=this._getPanelForTab(i),a={tab:i,panel:s};this._isLocal(e[0])||(this.xhr=_.ajax(this._ajaxSettings(e,n,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(i,"ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(e,t,i){setTimeout(function(){s.html(e),r._trigger("load",n,a),o(i,t)},1)}).fail(function(e,t){setTimeout(function(){o(e,t)},1)})))},_ajaxSettings:function(e,i,n){var o=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,t){return o._trigger("beforeLoad",i,_.extend({jqXHR:e,ajaxSettings:t},n))}}},_getPanelForTab:function(e){e=_(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}}),!1!==_.uiBackCompat&&_.widget("ui.tabs",_.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),_.ui.tabs,_.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=_(this).attr("title")||"";return _("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,t){var i=(e.attr("aria-describedby")||"").split(/\s+/);i.push(t),e.data("ui-tooltip-id",t).attr("aria-describedby",_.trim(i.join(" ")))},_removeDescribedBy:function(e){var t=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),t=_.inArray(t,i);-1!==t&&i.splice(t,1),e.removeData("ui-tooltip-id"),(i=_.trim(i.join(" ")))?e.attr("aria-describedby",i):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=_("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=_([])},_setOption:function(e,t){var i=this;this._super(e,t),"content"===e&&_.each(this.tooltips,function(e,t){i._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var n=this;_.each(this.tooltips,function(e,t){var i=_.Event("blur");i.target=i.currentTarget=t.element[0],n.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=_(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var e=_(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=_([])},open:function(e){var i=this,t=_(e?e.target:this.element).closest(this.options.items);t.length&&!t.data("ui-tooltip-id")&&(t.attr("title")&&t.data("ui-tooltip-title",t.attr("title")),t.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&t.parents().each(function(){var e,t=_(this);t.data("ui-tooltip-open")&&((e=_.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),t.attr("title")&&(t.uniqueId(),i.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._registerCloseHandlers(e,t),this._updateContent(t,e))},_updateContent:function(t,i){var e=this.options.content,n=this,o=i?i.type:null;if("string"==typeof e||e.nodeType||e.jquery)return this._open(i,t,e);(e=e.call(t[0],function(e){n._delay(function(){t.data("ui-tooltip-open")&&(i&&(i.type=o),this._open(i,t,e))})}))&&this._open(i,t,e)},_open:function(e,t,i){var n,o,r,s=_.extend({},this.options.position);function a(e){s.of=e,n.is(":hidden")||n.position(s)}i&&((r=this._find(t))?r.tooltip.find(".ui-tooltip-content").html(i):(t.is("[title]")&&(e&&"mouseover"===e.type?t.attr("title",""):t.removeAttr("title")),r=this._tooltip(t),n=r.tooltip,this._addDescribedBy(t,n.attr("id")),n.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),(r=_("<div>").html(n.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),r.removeAttr("id").find("[id]").removeAttr("id"),r.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:a}),a(e)):n.position(_.extend({of:t},this.options.position)),n.hide(),this._show(n,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){n.is(":visible")&&(a(s.of),clearInterval(o))},_.fx.interval)),this._trigger("open",e,{tooltip:n})))},_registerCloseHandlers:function(e,t){var i={keyup:function(e){e.keyCode===_.ui.keyCode.ESCAPE&&((e=_.Event(e)).currentTarget=t[0],this.close(e,!0))}};t[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(t).tooltip)}),e&&"mouseover"!==e.type||(i.mouseleave="close"),e&&"focusin"!==e.type||(i.focusout="close"),this._on(!0,t,i)},close:function(e){var t,i=this,n=_(e?e.currentTarget:this.element),o=this._find(n);o?(t=o.tooltip,o.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),o.hiding=!0,t.stop(!0),this._hide(t,this.options.hide,function(){i._removeTooltip(_(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&_.each(this.parents,function(e,t){_(t.element).attr("title",t.title),delete i.parents[e]}),o.closing=!0,this._trigger("close",e,{tooltip:t}),o.hiding||(o.closing=!1))):n.removeData("ui-tooltip-open")},_tooltip:function(e){var t=_("<div>").attr("role","tooltip"),i=_("<div>").appendTo(t),n=t.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(t,"ui-tooltip","ui-widget ui-widget-content"),t.appendTo(this._appendTo(e)),this.tooltips[n]={element:e,tooltip:t}},_find:function(e){e=e.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){e=e.closest(".ui-front, dialog");return e=e.length?e:this.document[0].body},_destroy:function(){var n=this;_.each(this.tooltips,function(e,t){var i=_.Event("blur"),t=t.element;i.target=i.currentTarget=t[0],n.close(i,!0),_("#"+e).remove(),t.data("ui-tooltip-title")&&(t.attr("title")||t.attr("title",t.data("ui-tooltip-title")),t.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==_.uiBackCompat&&_.widget("ui.tooltip",_.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),_.ui.tooltip}),!function(){var Wr,Hr="Expected a function",ys="__lodash_hash_undefined__",bs="__lodash_placeholder__",Vr=9007199254740991,ws=NaN,jr=4294967295,Cs=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],zr="[object Arguments]",_s="[object Array]",Ur="[object Boolean]",Yr="[object Date]",As="[object Error]",Es="[object Function]",xs="[object GeneratorFunction]",qr="[object Map]",Kr="[object Number]",Xr="[object Object]",Ss="[object Promise]",Qr="[object RegExp]",Zr="[object Set]",Jr="[object String]",Ts="[object Symbol]",es="[object WeakMap]",ts="[object ArrayBuffer]",is="[object DataView]",ks="[object Float32Array]",Ds="[object Float64Array]",Rs="[object Int8Array]",Os="[object Int16Array]",Fs="[object Int32Array]",Ls="[object Uint8Array]",Ms="[object Uint8ClampedArray]",Ns="[object Uint16Array]",$s="[object Uint32Array]",Is=/\b__p \+= '';/g,Ps=/\b(__p \+=) '' \+/g,Gs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bs=/&(?:amp|lt|gt|quot|#39);/g,Ws=/[&<>"']/g,Hs=RegExp(Bs.source),Vs=RegExp(Ws.source),js=/<%-([\s\S]+?)%>/g,zs=/<%([\s\S]+?)%>/g,Us=/<%=([\s\S]+?)%>/g,Ys=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qs=/^\w*$/,Ks=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xs=/[\\^$.*+?()[\]{}|]/g,Qs=RegExp(Xs.source),Zs=/^\s+|\s+$/g,Js=/^\s+/,ea=/\s+$/,ta=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ia=/\{\n\/\* \[wrapped with (.+)\] \*/,na=/,? & /,oa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ra=/\\(\\)?/g,sa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,aa=/\w*$/,la=/^[-+]0x[0-9a-f]+$/i,ca=/^0b[01]+$/i,ua=/^\[object .+?Constructor\]$/,da=/^0o[0-7]+$/i,ha=/^(?:0|[1-9]\d*)$/,pa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fa=/($^)/,ga=/['\n\r\u2028\u2029\\]/g,r="\\ud800-\\udfff",s="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",a="\\u2700-\\u27bf",e="a-z\\xdf-\\xf6\\xf8-\\xff",t="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\ufe0e\\ufe0f",c="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+r+"]",u="["+c+"]",d="["+s+"]",h="["+a+"]",p="["+e+"]",c="[^"+r+c+"\\d+"+a+e+t+"]",a="\\ud83c[\\udffb-\\udfff]",e="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",n="[\\ud800-\\udbff][\\udc00-\\udfff]",t="["+t+"]",g="(?:"+p+"|"+c+")",c="(?:"+t+"|"+c+")",m="(?:['‚Äô](?:d|ll|m|re|s|t|ve))?",v="(?:['‚Äô](?:D|LL|M|RE|S|T|VE))?",y="(?:"+d+"|"+a+")"+"?",b="["+l+"]?",b=b+y+("(?:\\u200d(?:"+[e,f,n].join("|")+")"+b+y+")*"),y="(?:"+[h,f,n].join("|")+")"+b,h="(?:"+[e+d+"?",d,f,n,i].join("|")+")",ma=RegExp("['‚Äô]","g"),va=RegExp(d,"g"),w=RegExp(a+"(?="+a+")|"+h+b,"g"),ya=RegExp([t+"?"+p+"+"+m+"(?="+[u,t,"$"].join("|")+")",c+"+"+v+"(?="+[u,t+g,"$"].join("|")+")",t+"?"+g+"+"+m,t+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",y].join("|"),"g"),C=RegExp("[\\u200d"+r+s+l+"]"),ba=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ca=-1,ns={},os=(ns[ks]=ns[Ds]=ns[Rs]=ns[Os]=ns[Fs]=ns[Ls]=ns[Ms]=ns[Ns]=ns[$s]=!0,ns[zr]=ns[_s]=ns[ts]=ns[Ur]=ns[is]=ns[Yr]=ns[As]=ns[Es]=ns[qr]=ns[Kr]=ns[Xr]=ns[Qr]=ns[Zr]=ns[Jr]=ns[es]=!1,{}),_=(os[zr]=os[_s]=os[ts]=os[is]=os[Ur]=os[Yr]=os[ks]=os[Ds]=os[Rs]=os[Os]=os[Fs]=os[qr]=os[Kr]=os[Xr]=os[Qr]=os[Zr]=os[Jr]=os[Ts]=os[Ls]=os[Ms]=os[Ns]=os[$s]=!0,os[As]=os[Es]=os[es]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),_a=parseFloat,Aa=parseInt,e="object"==typeof global&&global&&global.Object===Object&&global,f="object"==typeof self&&self&&self.Object===Object&&self,rs=e||f||Function("return this")(),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=n&&"object"==typeof module&&module&&!module.nodeType&&module,Ea=o&&o.exports===n,A=Ea&&e.process,i=function(){try{var e=o&&o.require&&o.require("util").types;return e?e:A&&A.binding&&A.binding("util")}catch(e){}}(),xa=i&&i.isArrayBuffer,Sa=i&&i.isDate,Ta=i&&i.isMap,ka=i&&i.isRegExp,Da=i&&i.isSet,Ra=i&&i.isTypedArray;function ss(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function Oa(e,t,i,n){for(var o=-1,r=null==e?0:e.length;++o<r;){var s=e[o];t(n,s,i(s),e)}return n}function as(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function Fa(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function La(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function ls(e,t){for(var i=-1,n=null==e?0:e.length,o=0,r=[];++i<n;){var s=e[i];t(s,i,e)&&(r[o++]=s)}return r}function Ma(e,t){return!!(null==e?0:e.length)&&-1<ds(e,t,0)}function Na(e,t,i){for(var n=-1,o=null==e?0:e.length;++n<o;)if(i(t,e[n]))return!0;return!1}function cs(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}function us(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}function $a(e,t,i,n){var o=-1,r=null==e?0:e.length;for(n&&r&&(i=e[++o]);++o<r;)i=t(i,e[o],o,e);return i}function Ia(e,t,i,n){var o=null==e?0:e.length;for(n&&o&&(i=e[--o]);o--;)i=t(i,e[o],o,e);return i}function Pa(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var E=ja("length");function Ga(e,n,t){var o;return t(e,function(e,t,i){if(n(e,t,i))return o=t,!1}),o}function Ba(e,t,i,n){for(var o=e.length,r=i+(n?1:-1);n?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function ds(e,t,i){if(t!=t)return Ba(e,Ha,i);for(var n=e,o=t,r=i-1,s=n.length;++r<s;)if(n[r]===o)return r;return-1}function Wa(e,t,i,n){for(var o=i-1,r=e.length;++o<r;)if(n(e[o],t))return o;return-1}function Ha(e){return e!=e}function Va(e,t){var i=null==e?0:e.length;return i?Ua(e,t)/i:ws}function ja(t){return function(e){return null==e?Wr:e[t]}}function x(t){return function(e){return null==t?Wr:t[e]}}function za(e,n,o,r,t){return t(e,function(e,t,i){o=r?(r=!1,e):n(o,e,t,i)}),o}function Ua(e,t){for(var i,n=-1,o=e.length;++n<o;){var r=t(e[n]);r!==Wr&&(i=i===Wr?r:i+r)}return i}function Ya(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function hs(t){return function(e){return t(e)}}function qa(t,e){return cs(e,function(e){return t[e]})}function Ka(e,t){return e.has(t)}function Xa(e,t){for(var i=-1,n=e.length;++i<n&&-1<ds(t,e[i],0););return i}function Qa(e,t){for(var i=e.length;i--&&-1<ds(t,e[i],0););return i}var Za=x({"√Ä":"A","√Å":"A","√Ç":"A","√É":"A","√Ñ":"A","√Ö":"A","√†":"a","√°":"a","√¢":"a","√£":"a","√§":"a","√•":"a","√á":"C","√ß":"c","√ê":"D","√∞":"d","√à":"E","√â":"E","√ä":"E","√ã":"E","√®":"e","√©":"e","√™":"e","√´":"e","√å":"I","√ç":"I","√é":"I","√è":"I","√¨":"i","√≠":"i","√Æ":"i","√Ø":"i","√ë":"N","√±":"n","√í":"O","√ì":"O","√î":"O","√ï":"O","√ñ":"O","√ò":"O","√≤":"o","√≥":"o","√¥":"o","√µ":"o","√∂":"o","√∏":"o","√ô":"U","√ö":"U","√õ":"U","√ú":"U","√π":"u","√∫":"u","√ª":"u","√º":"u","√ù":"Y","√Ω":"y","√ø":"y","√Ü":"Ae","√¶":"ae","√û":"Th","√æ":"th","√ü":"ss","ƒÄ":"A","ƒÇ":"A","ƒÑ":"A","ƒÅ":"a","ƒÉ":"a","ƒÖ":"a","ƒÜ":"C","ƒà":"C","ƒä":"C","ƒå":"C","ƒá":"c","ƒâ":"c","ƒã":"c","ƒç":"c","ƒé":"D","ƒê":"D","ƒè":"d","ƒë":"d","ƒí":"E","ƒî":"E","ƒñ":"E","ƒò":"E","ƒö":"E","ƒì":"e","ƒï":"e","ƒó":"e","ƒô":"e","ƒõ":"e","ƒú":"G","ƒû":"G","ƒ†":"G","ƒ¢":"G","ƒù":"g","ƒü":"g","ƒ°":"g","ƒ£":"g","ƒ§":"H","ƒ¶":"H","ƒ•":"h","ƒß":"h","ƒ®":"I","ƒ™":"I","ƒ¨":"I","ƒÆ":"I","ƒ∞":"I","ƒ©":"i","ƒ´":"i","ƒ≠":"i","ƒØ":"i","ƒ±":"i","ƒ¥":"J","ƒµ":"j","ƒ∂":"K","ƒ∑":"k","ƒ∏":"k","ƒπ":"L","ƒª":"L","ƒΩ":"L","ƒø":"L","≈Å":"L","ƒ∫":"l","ƒº":"l","ƒæ":"l","≈Ä":"l","≈Ç":"l","≈É":"N","≈Ö":"N","≈á":"N","≈ä":"N","≈Ñ":"n","≈Ü":"n","≈à":"n","≈ã":"n","≈å":"O","≈é":"O","≈ê":"O","≈ç":"o","≈è":"o","≈ë":"o","≈î":"R","≈ñ":"R","≈ò":"R","≈ï":"r","≈ó":"r","≈ô":"r","≈ö":"S","≈ú":"S","≈û":"S","≈†":"S","≈õ":"s","≈ù":"s","≈ü":"s","≈°":"s","≈¢":"T","≈§":"T","≈¶":"T","≈£":"t","≈•":"t","≈ß":"t","≈®":"U","≈™":"U","≈¨":"U","≈Æ":"U","≈∞":"U","≈≤":"U","≈©":"u","≈´":"u","≈≠":"u","≈Ø":"u","≈±":"u","≈≥":"u","≈¥":"W","≈µ":"w","≈∂":"Y","≈∑":"y","≈∏":"Y","≈π":"Z","≈ª":"Z","≈Ω":"Z","≈∫":"z","≈º":"z","≈æ":"z","ƒ≤":"IJ","ƒ≥":"ij","≈í":"Oe","≈ì":"oe","≈â":"'n","≈ø":"s"}),Ja=x({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function el(e){return"\\"+_[e]}function ps(e){return C.test(e)}function tl(e){var i=-1,n=Array(e.size);return e.forEach(function(e,t){n[++i]=[t,e]}),n}function il(t,i){return function(e){return t(i(e))}}function fs(e,t){for(var i=-1,n=e.length,o=0,r=[];++i<n;){var s=e[i];s!==t&&s!==bs||(e[i]=bs,r[o++]=i)}return r}function nl(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function gs(e){return(ps(e)?function(e){var t=w.lastIndex=0;for(;w.test(e);)++t;return t}:E)(e)}function ms(e){return ps(e)?e.match(w)||[]:e.split("")}var ol=x({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vs=function o(e){var _=(e=null==e?rs:vs.defaults(rs.Object(),e,vs.pick(rs,wa))).Array,r=e.Date,F=e.Error,L=e.Function,M=e.Math,g=e.Object,N=e.RegExp,H=e.String,y=e.TypeError,V=_.prototype,j=L.prototype,z=g.prototype,U=e["__core-js_shared__"],Y=j.toString,$=z.hasOwnProperty,q=0,K=(j=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",X=z.toString,Q=Y.call(g),Z=rs._,J=N("^"+Y.call($).replace(Xs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=Ea?e.Buffer:Wr,t=e.Symbol,ee=e.Uint8Array,te=j?j.allocUnsafe:Wr,ie=il(g.getPrototypeOf,g),ne=g.create,oe=z.propertyIsEnumerable,re=V.splice,se=t?t.isConcatSpreadable:Wr,ae=t?t.iterator:Wr,le=t?t.toStringTag:Wr,ce=function(){try{var e=Qi(g,"defineProperty");return e({},"",{}),e}catch(e){}}(),ue=e.clearTimeout!==rs.clearTimeout&&e.clearTimeout,de=r&&r.now!==rs.Date.now&&r.now,he=e.setTimeout!==rs.setTimeout&&e.setTimeout,pe=M.ceil,fe=M.floor,ge=g.getOwnPropertySymbols,j=j?j.isBuffer:Wr,me=e.isFinite,ve=V.join,ye=il(g.keys,g),b=M.max,A=M.min,be=r.now,we=e.parseInt,Ce=M.random,_e=V.reverse,r=Qi(e,"DataView"),Ae=Qi(e,"Map"),Ee=Qi(e,"Promise"),xe=Qi(e,"Set"),e=Qi(e,"WeakMap"),Se=Qi(g,"create"),Te=e&&new e,ke={},De=An(r),Re=An(Ae),Oe=An(Ee),Fe=An(xe),Le=An(e),t=t?t.prototype:Wr,Me=t?t.valueOf:Wr,Ne=t?t.toString:Wr;function f(e){if(W(e)&&!B(e)&&!(e instanceof v)){if(e instanceof m)return e;if($.call(e,"__wrapped__"))return En(e)}return new m(e)}var $e=function(e){if(!x(e))return{};if(ne)return ne(e);Ie.prototype=e;e=new Ie;return Ie.prototype=Wr,e};function Ie(){}function Pe(){}function m(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=Wr}function v(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jr,this.__views__=[]}function Ge(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Be(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function We(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function He(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new We;++t<i;)this.add(e[t])}function I(e){e=this.__data__=new Be(e);this.size=e.size}function Ve(e,t){var i,n=B(e),o=!n&&yo(e),r=!n&&!o&&wo(e),s=!n&&!o&&!r&&Oo(e),a=n||o||r||s,l=a?Ya(e.length,H):[],c=l.length;for(i in e)!t&&!$.call(e,i)||a&&("length"==i||r&&("offset"==i||"parent"==i)||s&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||on(i,c))||l.push(i);return l}function je(e){var t=e.length;return t?e[Pt(0,t-1)]:Wr}function ze(e,t){return bn(E(e),et(t,0,e.length))}function Ue(e){return bn(E(e))}function Ye(e,t,i){(i===Wr||G(e[t],i))&&(i!==Wr||t in e)||Ze(e,t,i)}function qe(e,t,i){var n=e[t];$.call(e,t)&&G(n,i)&&(i!==Wr||t in e)||Ze(e,t,i)}function Ke(e,t){for(var i=e.length;i--;)if(G(e[i][0],t))return i;return-1}function Xe(e,n,o,r){return ot(e,function(e,t,i){n(r,e,o(e),i)}),r}function Qe(e,t){return e&&gi(t,D(t),e)}function Ze(e,t,i){"__proto__"==t&&ce?ce(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Je(e,t){for(var i=-1,n=t.length,o=_(n),r=null==e;++i<n;)o[i]=r?Wr:zo(e,t[i]);return o}function et(e,t,i){return e==e&&(i!==Wr&&(e=e<=i?e:i),t!==Wr&&(e=t<=e?e:t)),e}function w(i,n,o,e,t,r){var s,a=1&n,l=2&n,c=4&n;if((s=o?t?o(i,e,t,r):o(i):s)!==Wr)return s;if(!x(i))return i;var u,e=B(i);if(e){if(s=function(e){var t=e.length,i=new e.constructor(t);t&&"string"==typeof e[0]&&$.call(e,"index")&&(i.index=e.index,i.input=e.input);return i}(i),!a)return E(i,s)}else{var d=P(i),h=d==Es||d==xs;if(wo(i))return ci(i,a);if(d==Xr||d==zr||h&&!t){if(s=l||h?{}:tn(i),!a)return l?(p=h=i,p=(u=s)&&gi(p,R(p),u),gi(h,Ji(h),p)):(h=Qe(s,u=i),gi(u,Zi(u),h))}else{if(!os[d])return t?i:{};s=function(e,t,i){var n=e.constructor;switch(t){case ts:return ui(e);case Ur:case Yr:return new n(+e);case is:return function(e,t){t=t?ui(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,i);case ks:case Ds:case Rs:case Os:case Fs:case Ls:case Ms:case Ns:case $s:return di(e,i);case qr:return new n;case Kr:case Jr:return new n(e);case Qr:return function(e){var t=new e.constructor(e.source,aa.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Zr:return new n;case Ts:return function(e){return Me?g(Me.call(e)):{}}(e)}}(i,d,a)}}var p=(r=r||new I).get(i);if(p)return p;r.set(i,s),Do(i)?i.forEach(function(e){s.add(w(e,n,o,e,i,r))}):xo(i)&&i.forEach(function(e,t){s.set(t,w(e,n,o,t,i,r))});var f=e?Wr:(c?l?zi:ji:l?R:D)(i);return as(f||i,function(e,t){f&&(e=i[t=e]),qe(s,t,w(e,n,o,t,i,r))}),s}function tt(e,t,i){var n=i.length;if(null==e)return!n;for(e=g(e);n--;){var o=i[n],r=t[o],s=e[o];if(s===Wr&&!(o in e)||!r(s))return!1}return!0}function it(e,t,i){if("function"!=typeof e)throw new y(Hr);return gn(function(){e.apply(Wr,i)},t)}function nt(e,t,i,n){var o=-1,r=Ma,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;i&&(t=cs(t,hs(i))),n?(r=Na,s=!1):200<=t.length&&(r=Ka,s=!1,t=new He(t));e:for(;++o<a;){var u=e[o],d=null==i?u:i(u),u=n||0!==u?u:0;if(s&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else r(t,d,n)||l.push(u)}return l}f.templateSettings={escape:js,evaluate:zs,interpolate:Us,variable:"",imports:{_:f}},(f.prototype=Pe.prototype).constructor=f,(m.prototype=$e(Pe.prototype)).constructor=m,(v.prototype=$e(Pe.prototype)).constructor=v,Ge.prototype.clear=function(){this.__data__=Se?Se(null):{},this.size=0},Ge.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Ge.prototype.get=function(e){var t,i=this.__data__;return Se?(t=i[e])===ys?Wr:t:$.call(i,e)?i[e]:Wr},Ge.prototype.has=function(e){var t=this.__data__;return Se?t[e]!==Wr:$.call(t,e)},Ge.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Se&&t===Wr?ys:t,this},Be.prototype.clear=function(){this.__data__=[],this.size=0},Be.prototype.delete=function(e){var t=this.__data__;return!((e=Ke(t,e))<0)&&(e==t.length-1?t.pop():re.call(t,e,1),--this.size,!0)},Be.prototype.get=function(e){var t=this.__data__;return(e=Ke(t,e))<0?Wr:t[e][1]},Be.prototype.has=function(e){return-1<Ke(this.__data__,e)},Be.prototype.set=function(e,t){var i=this.__data__,n=Ke(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},We.prototype.clear=function(){this.size=0,this.__data__={hash:new Ge,map:new(Ae||Be),string:new Ge}},We.prototype.delete=function(e){return e=Ki(this,e).delete(e),this.size-=e?1:0,e},We.prototype.get=function(e){return Ki(this,e).get(e)},We.prototype.has=function(e){return Ki(this,e).has(e)},We.prototype.set=function(e,t){var i=Ki(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},He.prototype.add=He.prototype.push=function(e){return this.__data__.set(e,ys),this},He.prototype.has=function(e){return this.__data__.has(e)},I.prototype.clear=function(){this.__data__=new Be,this.size=0},I.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},I.prototype.get=function(e){return this.__data__.get(e)},I.prototype.has=function(e){return this.__data__.has(e)},I.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Be){var n=i.__data__;if(!Ae||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new We(n)}return i.set(e,t),this.size=i.size,this};var ot=yi(dt),rt=yi(ht,!0);function st(e,n){var o=!0;return ot(e,function(e,t,i){return o=!!n(e,t,i)}),o}function at(e,t,i){for(var n=-1,o=e.length;++n<o;){var r,s,a=e[n],l=t(a);null!=l&&(r===Wr?l==l&&!S(l):i(l,r))&&(r=l,s=a)}return s}function lt(e,n){var o=[];return ot(e,function(e,t,i){n(e,t,i)&&o.push(e)}),o}function l(e,t,i,n,o){var r=-1,s=e.length;for(i=i||nn,o=o||[];++r<s;){var a=e[r];0<t&&i(a)?1<t?l(a,t-1,i,n,o):us(o,a):n||(o[o.length]=a)}return o}var ct=bi(),ut=bi(!0);function dt(e,t){return e&&ct(e,t,D)}function ht(e,t){return e&&ut(e,t,D)}function pt(t,e){return ls(e,function(e){return _o(t[e])})}function ft(e,t){for(var i=0,n=(t=ri(t,e)).length;null!=e&&i<n;)e=e[_n(t[i++])];return i&&i==n?e:Wr}function gt(e,t,i){t=t(e);return B(e)?t:us(t,i(e))}function i(e){{if(null==e)return e===Wr?"[object Undefined]":"[object Null]";if(le&&le in g(e)){var t=e,i=$.call(t,le),n=t[le];try{t[le]=Wr;var o=!0}catch(e){}var r=X.call(t);return o&&(i?t[le]=n:delete t[le]),r}return X.call(e)}}function mt(e,t){return t<e}function vt(e,t){return null!=e&&$.call(e,t)}function yt(e,t){return null!=e&&t in g(e)}function bt(e,t,i){for(var n=i?Na:Ma,o=e[0].length,r=e.length,s=r,a=_(r),l=1/0,c=[];s--;){var u=e[s];s&&t&&(u=cs(u,hs(t))),l=A(u.length,l),a[s]=!i&&(t||120<=o&&120<=u.length)?new He(s&&u):Wr}var u=e[0],d=-1,h=a[0];e:for(;++d<o&&c.length<l;){var p=u[d],f=t?t(p):p,p=i||0!==p?p:0;if(!(h?Ka(h,f):n(c,f,i))){for(s=r;--s;){var g=a[s];if(!(g?Ka(g,f):n(e[s],f,i)))continue e}h&&h.push(f),c.push(p)}}return c}function wt(e,t,i){t=null==(e=hn(e,t=ri(t,e)))?e:e[_n(n(t))];return null==t?Wr:ss(t,e,i)}function Ct(e){return W(e)&&i(e)==zr}function _t(e,t,i,n,o){{if(e===t)return!0;if(null==e||null==t||!W(e)&&!W(t))return e!=e&&t!=t;var r=_t,s=B(e),a=B(t),l=s?_s:P(e),a=a?_s:P(t),c=(l=l==zr?Xr:l)==Xr,u=(a=a==zr?Xr:a)==Xr,a;if((a=l==a)&&wo(e)){if(!wo(t))return!1;c=!(s=!0)}if(a&&!c){o=o||new I;if(s||Oo(e))return Hi(e,t,i,n,r,o);else{var d=e;var h=t;var p=l;var f=i;var g=n;var m=r;var v=o;switch(p){case is:if(d.byteLength!=h.byteLength||d.byteOffset!=h.byteOffset)return!1;d=d.buffer,h=h.buffer;case ts:return d.byteLength==h.byteLength&&m(new ee(d),new ee(h))?!0:!1;case Ur:case Yr:case Kr:return G(+d,+h);case As:return d.name==h.name&&d.message==h.message;case Qr:case Jr:return d==h+"";case qr:var y=tl;case Zr:var b=1&f;if(y=y||nl,d.size!=h.size&&!b)return!1;b=v.get(d);if(b)return b==h;f|=2,v.set(d,h);b=Hi(y(d),y(h),f,g,m,v);return v.delete(d),b;case Ts:if(Me)return Me.call(d)==Me.call(h)}return!1;return}}if(!(1&i)){s=c&&$.call(e,"__wrapped__"),l=u&&$.call(t,"__wrapped__");if(s||l)return c=s?e.value():e,u=l?t.value():t,o=o||new I,r(c,u,i,n,o)}if(a){o=o||new I;var w=e,C=t,_=i,A=n,E=r,x=o,S=1&_,T=ji(w),k=T.length,s=ji(C).length;if(k!=s&&!S)return!1;for(var D=k;D--;){var R=T[D];if(!(S?R in C:$.call(C,R)))return!1}s=x.get(w),l=x.get(C);if(s&&l)return s==C&&l==w;for(var O=!0,F=(x.set(w,C),x.set(C,w),S);++D<k;){R=T[D];var L,M=w[R],N=C[R];if(!((L=A?S?A(N,M,R,C,w,x):A(M,N,R,w,C,x):L)===Wr?M===N||E(M,N,_,A,x):L)){O=!1;break}F=F||"constructor"==R}return O&&!F&&(s=w.constructor,l=C.constructor,s!=l&&"constructor"in w&&"constructor"in C&&!("function"==typeof s&&s instanceof s&&"function"==typeof l&&l instanceof l)&&(O=!1)),x.delete(w),x.delete(C),O}return!1}}function At(e,t,i,n){var o=i.length,r=o,s=!n;if(null==e)return!r;for(e=g(e);o--;){var a=i[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<r;){var l=(a=i[o])[0],c=e[l],u=a[1];if(s&&a[2]){if(c===Wr&&!(l in e))return!1}else{var d,h=new I;if(!((d=n?n(c,u,l,e,t,h):d)===Wr?_t(u,c,3,n,h):d))return!1}}return!0}function Et(e){return!(!x(e)||(t=e,K&&K in t))&&(_o(e)?J:ua).test(An(e));var t}function xt(e){return"function"==typeof e?e:null==e?O:"object"==typeof e?B(e)?Ot(e[0],e[1]):Rt(e):kr(e)}function St(e){if(!ln(e))return ye(e);var t,i=[];for(t in g(e))$.call(e,t)&&"constructor"!=t&&i.push(t);return i}function Tt(e){if(!x(e)){var t=e,i=[];if(null!=t)for(var n in g(t))i.push(n);return i}var o,r=ln(e),s=[];for(o in e)("constructor"!=o||!r&&$.call(e,o))&&s.push(o);return s}function kt(e,t){return e<t}function Dt(e,n){var o=-1,r=u(e)?_(e.length):[];return ot(e,function(e,t,i){r[++o]=n(e,t,i)}),r}function Rt(t){var i=Xi(t);return 1==i.length&&i[0][2]?un(i[0][0],i[0][1]):function(e){return e===t||At(e,t,i)}}function Ot(i,n){return rn(i)&&cn(n)?un(_n(i),n):function(e){var t=zo(e,i);return t===Wr&&t===n?Uo(e,i):_t(n,t,3)}}function Ft(g,m,v,y,b){g!==m&&ct(m,function(e,t){var i,n,o,r,s,a,l,c,u,d,h,p,f;b=b||new I,x(e)?(n=m,r=v,s=Ft,a=y,l=b,h=pn(i=g,o=t),p=pn(n,o),(f=l.get(p))?Ye(i,o,f):(f=a?a(h,p,o+"",i,n,l):Wr,(n=f===Wr)&&(c=B(p),u=!c&&wo(p),d=!c&&!u&&Oo(p),f=p,c||u||d?f=B(h)?h:C(h)?E(h):u?ci(p,!(n=!1)):d?di(p,!(n=!1)):[]:To(p)||yo(p)?yo(f=h)?f=Io(h):x(h)&&!_o(h)||(f=tn(p)):n=!1),n&&(l.set(p,f),s(f,p,r,a,l),l.delete(p)),Ye(i,o,f))):(c=y?y(pn(g,t),e,t+"",g,m,b):Wr,Ye(g,t,c=c===Wr?e:c))},R)}function Lt(e,t){var i=e.length;if(i)return on(t+=t<0?i:0,i)?e[t]:Wr}function Mt(e,n,u){n=n.length?cs(n,function(t){return B(t)?function(e){return ft(e,1===t.length?t[0]:t)}:t}):[O];var o=-1;n=cs(n,hs(d()));var t=Dt(e,function(t,e,i){return{criteria:cs(n,function(e){return e(t)}),index:++o,value:t}}),e=function(e,t){for(var i=u,n=-1,o=e.criteria,r=t.criteria,s=o.length,a=i.length;++n<s;){var l=hi(o[n],r[n]);if(l){if(a<=n)return l;var c=i[n];return l*("desc"==c?-1:1)}}return e.index-t.index},i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function Nt(e,t,i){for(var n=-1,o=t.length,r={};++n<o;){var s=t[n],a=ft(e,s);i(a,s)&&Ht(r,ri(s,e),a)}return r}function $t(e,t,i,n){var o=n?Wa:ds,r=-1,s=t.length,a=e;for(e===t&&(t=E(t)),i&&(a=cs(e,hs(i)));++r<s;)for(var l=0,c=t[r],u=i?i(c):c;-1<(l=o(a,u,l,n));)a!==e&&re.call(a,l,1),re.call(e,l,1);return e}function It(e,t){for(var i=e?t.length:0,n=i-1;i--;){var o,r=t[i];i!=n&&r===o||(on(o=r)?re.call(e,r,1):Qt(e,r))}}function Pt(e,t){return e+fe(Ce()*(t-e+1))}function Gt(e,t){var i="";if(!e||t<1||Vr<t)return i;for(;t%2&&(i+=e),(t=fe(t/2))&&(e+=e),t;);return i}function s(e,t){return mn(dn(e,t,O),e+"")}function Bt(e){return je(nr(e))}function Wt(e,t){e=nr(e);return bn(e,et(t,0,e.length))}function Ht(e,t,i,n){if(!x(e))return e;for(var o=-1,r=(t=ri(t,e)).length,s=r-1,a=e;null!=a&&++o<r;){var l,c=_n(t[o]),u=i;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;o!=s&&(l=a[c],(u=n?n(l,c,a):Wr)===Wr&&(u=x(l)?l:on(t[o+1])?[]:{})),qe(a,c,u),a=a[c]}return e}var Vt=Te?function(e,t){return Te.set(e,t),e}:O,t=ce?function(e,t){return ce(e,"toString",{configurable:!0,enumerable:!1,value:vr(t),writable:!0})}:O;function jt(e){return bn(nr(e))}function a(e,t,i){for(var n=-1,o=e.length,r=((i=o<i?o:i)<0&&(i+=o),o=i<(t=t<0?o<-t?0:o+t:t)?0:i-t>>>0,t>>>=0,_(o));++n<o;)r[n]=e[n+t];return r}function zt(e,n){var o;return ot(e,function(e,t,i){return!(o=n(e,t,i))}),!!o}function Ut(e,t,i){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;n<o;){var r=n+o>>>1,s=e[r];null!==s&&!S(s)&&(i?s<=t:s<t)?n=1+r:o=r}return o}return Yt(e,t,O,i)}function Yt(e,t,i,n){var o=0,r=null==e?0:e.length;if(0===r)return 0;for(var s=(t=i(t))!=t,a=null===t,l=S(t),c=t===Wr;o<r;){var u=fe((o+r)/2),d=i(e[u]),h=d!==Wr,p=null===d,f=d==d,g=S(d),f=s?n||f:c?f&&(n||h):a?f&&h&&(n||!p):l?f&&h&&!p&&(n||!g):!p&&!g&&(n?d<=t:d<t);f?o=u+1:r=u}return A(r,4294967294)}function qt(e,t){for(var i=-1,n=e.length,o=0,r=[];++i<n;){var s,a=e[i],l=t?t(a):a;i&&G(l,s)||(s=l,r[o++]=0===a?0:a)}return r}function Kt(e){return"number"==typeof e?e:S(e)?ws:+e}function c(e){if("string"==typeof e)return e;if(B(e))return cs(e,c)+"";if(S(e))return Ne?Ne.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xt(e,t,i){var n=-1,o=Ma,r=e.length,s=!0,a=[],l=a;if(i)s=!1,o=Na;else if(200<=r){var c=t?null:$i(e);if(c)return nl(c);s=!1,o=Ka,l=new He}else l=t?[]:a;e:for(;++n<r;){var u=e[n],d=t?t(u):u,u=i||0!==u?u:0;if(s&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),a.push(u)}else o(l,d,i)||(l!==a&&l.push(d),a.push(u))}return a}function Qt(e,t){return null==(e=hn(e,t=ri(t,e)))||delete e[_n(n(t))]}function Zt(e,t,i,n){return Ht(e,t,i(ft(e,t)),n)}function Jt(e,t,i,n){for(var o=e.length,r=n?o:-1;(n?r--:++r<o)&&t(e[r],r,e););return i?a(e,n?0:r,n?r+1:o):a(e,n?r+1:0,n?o:r)}function ei(e,t){var i=e;return $a(t,function(e,t){return t.func.apply(t.thisArg,us([e],t.args))},i=e instanceof v?e.value():i)}function ti(e,t,i){var n=e.length;if(n<2)return n?Xt(e[0]):[];for(var o=-1,r=_(n);++o<n;)for(var s=e[o],a=-1;++a<n;)a!=o&&(r[o]=nt(r[o]||s,e[a],t,i));return Xt(l(r,1),t,i)}function ii(e,t,i){for(var n=-1,o=e.length,r=t.length,s={};++n<o;){var a=n<r?t[n]:Wr;i(s,e[n],a)}return s}function ni(e){return C(e)?e:[]}function oi(e){return"function"==typeof e?e:O}function ri(e,t){return B(e)?e:rn(e,t)?[e]:Cn(p(e))}var si=s;function ai(e,t,i){var n=e.length;return i=i===Wr?n:i,!t&&n<=i?e:a(e,t,i)}var li=ue||function(e){return rs.clearTimeout(e)};function ci(e,t){if(t)return e.slice();t=e.length,t=te?te(t):new e.constructor(t);return e.copy(t),t}function ui(e){var t=new e.constructor(e.byteLength);return new ee(t).set(new ee(e)),t}function di(e,t){t=t?ui(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function hi(e,t){if(e!==t){var i=e!==Wr,n=null===e,o=e==e,r=S(e),s=t!==Wr,a=null===t,l=t==t,c=S(t);if(!a&&!c&&!r&&t<e||r&&s&&l&&!a&&!c||n&&s&&l||!i&&l||!o)return 1;if(!n&&!r&&!c&&e<t||c&&i&&o&&!n&&!r||a&&i&&o||!s&&o||!l)return-1}return 0}function pi(e,t,i,n){for(var o=-1,r=e.length,s=i.length,a=-1,l=t.length,c=b(r-s,0),u=_(l+c),d=!n;++a<l;)u[a]=t[a];for(;++o<s;)(d||o<r)&&(u[i[o]]=e[o]);for(;c--;)u[a++]=e[o++];return u}function fi(e,t,i,n){for(var o=-1,r=e.length,s=-1,a=i.length,l=-1,c=t.length,u=b(r-a,0),d=_(u+c),h=!n;++o<u;)d[o]=e[o];for(var p=o;++l<c;)d[p+l]=t[l];for(;++s<a;)(h||o<r)&&(d[p+i[s]]=e[o++]);return d}function E(e,t){var i=-1,n=e.length;for(t=t||_(n);++i<n;)t[i]=e[i];return t}function gi(e,t,i,n){for(var o=!i,r=(i=i||{},-1),s=t.length;++r<s;){var a=t[r],l=n?n(i[a],e[a],a,i,e):Wr;(o?Ze:qe)(i,a,l=l===Wr?e[a]:l)}return i}function mi(o,r){return function(e,t){var i=B(e)?Oa:Xe,n=r?r():{};return i(e,o,d(t,2),n)}}function vi(a){return s(function(e,t){var i=-1,n=t.length,o=1<n?t[n-1]:Wr,r=2<n?t[2]:Wr,o=3<a.length&&"function"==typeof o?(n--,o):Wr;for(r&&h(t[0],t[1],r)&&(o=n<3?Wr:o,n=1),e=g(e);++i<n;){var s=t[i];s&&a(e,s,i,o)}return e})}function yi(r,s){return function(e,t){if(null==e)return e;if(!u(e))return r(e,t);for(var i=e.length,n=s?i:-1,o=g(e);(s?n--:++n<i)&&!1!==t(o[n],n,o););return e}}function bi(l){return function(e,t,i){for(var n=-1,o=g(e),r=i(e),s=r.length;s--;){var a=r[l?s:++n];if(!1===t(o[a],a,o))break}return e}}function wi(n){return function(e){var t=ps(e=p(e))?ms(e):Wr,i=t?t[0]:e.charAt(0),t=t?ai(t,1).join(""):e.slice(1);return i[n]()+t}}function Ci(t){return function(e){return $a(fr(sr(e).replace(ma,"")),t,"")}}function _i(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=$e(n.prototype),i=n.apply(t,e);return x(i)?i:t}}function Ai(r,s,a){var l=_i(r);return function e(){for(var t=arguments.length,i=_(t),n=t,o=qi(e);n--;)i[n]=arguments[n];o=t<3&&i[0]!==o&&i[t-1]!==o?[]:fs(i,o);return(t-=o.length)<a?Mi(r,s,Si,e.placeholder,Wr,i,o,Wr,Wr,a-t):ss(this&&this!==rs&&this instanceof e?l:r,this,i)}}function Ei(r){return function(e,t,i){var n,o=g(e),t=(u(e)||(n=d(t,3),e=D(e),t=function(e){return n(o[e],e,o)}),r(e,t,i));return-1<t?o[n?e[t]:t]:Wr}}function xi(l){return Vi(function(o){var r=o.length,e=r,t=m.prototype.thru;for(l&&o.reverse();e--;){var i=o[e];if("function"!=typeof i)throw new y(Hr);t&&!a&&"wrapper"==Yi(i)&&(a=new m([],!0))}for(e=a?e:r;++e<r;)var n=Yi(i=o[e]),s="wrapper"==n?Ui(i):Wr,a=s&&sn(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[Yi(s[0])].apply(a,s[3]):1==i.length&&sn(i)?a[n]():a.thru(i);return function(){var e=arguments,t=e[0];if(a&&1==e.length&&B(t))return a.plant(t).value();for(var i=0,n=r?o[i].apply(this,e):t;++i<r;)n=o[i].call(this,n);return n}})}function Si(s,a,l,c,u,d,h,p,f,g){var m=128&a,v=1&a,y=2&a,b=24&a,w=512&a,C=y?Wr:_i(s);return function e(){for(var t=_(r=arguments.length),i=r;i--;)t[i]=arguments[i];if(b&&(o=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(t,n=qi(e))),c&&(t=pi(t,c,u,b)),d&&(t=fi(t,d,h,b)),r-=o,b&&r<g)return o=fs(t,n),Mi(s,a,Si,e.placeholder,l,t,o,p,f,g-r);var n=v?l:this,o=y?n[s]:s,r=t.length;return p?t=function(e,t){for(var i=e.length,n=A(t.length,i),o=E(e);n--;){var r=t[n];e[n]=on(r,i)?o[r]:Wr}return e}(t,p):w&&1<r&&t.reverse(),m&&f<r&&(t.length=f),(o=this&&this!==rs&&this instanceof e?C||_i(o):o).apply(n,t)}}function Ti(i,s){return function(e,t){return e=e,n=i,o=s(t),r={},dt(e,function(e,t,i){n(r,o(e),t,i)}),r;var n,o,r}}function ki(n,o){return function(e,t){var i;if(e===Wr&&t===Wr)return o;if(e!==Wr&&(i=e),t!==Wr){if(i===Wr)return t;t="string"==typeof e||"string"==typeof t?(e=c(e),c(t)):(e=Kt(e),Kt(t)),i=n(e,t)}return i}}function Di(n){return Vi(function(e){return e=cs(e,hs(d())),s(function(t){var i=this;return n(e,function(e){return ss(e,i,t)})})})}function Ri(e,t){var i=(t=t===Wr?" ":c(t)).length;if(i<2)return i?Gt(t,e):t;i=Gt(t,pe(e/gs(t)));return ps(t)?ai(ms(i),0,e).join(""):i.slice(0,e)}function Oi(a,e,l,c){var u=1&e,d=_i(a);return function e(){for(var t=-1,i=arguments.length,n=-1,o=c.length,r=_(o+i),s=this&&this!==rs&&this instanceof e?d:a;++n<o;)r[n]=c[n];for(;i--;)r[n++]=arguments[++t];return ss(s,u?l:this,r)}}function Fi(c){return function(e,t,i){i&&"number"!=typeof i&&h(e,t,i)&&(t=i=Wr),e=No(e),t===Wr?(t=e,e=0):t=No(t),i=i===Wr?e<t?1:-1:No(i);for(var n=e,o=i,r=c,s=-1,a=b(pe((t-n)/(o||1)),0),l=_(a);a--;)l[r?a:++s]=n,n+=o;return l}}function Li(i){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=k(e),t=k(t)),i(e,t)}}function Mi(e,t,i,n,o,r,s,a,l,c){var u=8&t,o=(4&(t=(t|(u?32:64))&~(u?64:32))||(t&=-4),[e,t,o,u?r:Wr,u?s:Wr,u?Wr:r,u?Wr:s,a,l,c]),r=i.apply(Wr,o);return sn(e)&&fn(r,o),r.placeholder=n,vn(r,e,t)}function Ni(e){var n=M[e];return function(e,t){var i;return e=k(e),(t=null==t?0:A(T(t),292))&&me(e)?(i=(p(e)+"e").split("e"),+((i=(p(n(i[0]+"e"+(+i[1]+t)))+"e").split("e"))[0]+"e"+(+i[1]-t))):n(e)}}var $i=xe&&1/nl(new xe([,-0]))[1]==1/0?function(e){return new xe(e)}:Er;function Ii(r){return function(e){var t,i,n,o=P(e);return o==qr?tl(e):o==Zr?(o=e,t=-1,i=Array(o.size),o.forEach(function(e){i[++t]=[e,e]}),i):cs(r(n=e),function(e){return[e,n[e]]})}}function Pi(e,t,i,n,o,r,s,a){var l=2&t;if(!l&&"function"!=typeof e)throw new y(Hr);var c,u,d,h,p,f=n?n.length:0,g=(f||(t&=-97,n=o=Wr),s=s===Wr?s:b(T(s),0),a=a===Wr?a:T(a),f-=o?o.length:0,64&t&&(m=n,c=o,n=o=Wr),l?Wr:Ui(e)),m=[e,t,i,n,o,m,c,r,s,a];return g&&function(e,t){var i=e[1],n=t[1],o=i|n,r=o<131,s=128==n&&8==i||128==n&&256==i&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!r&&!s)return;1&n&&(e[2]=t[2],o|=1&i?0:4);r=t[3];{var a;r&&(a=e[3],e[3]=a?pi(a,r,t[4]):r,e[4]=a?fs(e[3],bs):t[4])}(r=t[5])&&(a=e[5],e[5]=a?fi(a,r,t[6]):r,e[6]=a?fs(e[5],bs):t[6]);(r=t[7])&&(e[7]=r);128&n&&(e[8]=null==e[8]?t[8]:A(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(m,g),e=m[0],t=m[1],i=m[2],n=m[3],o=m[4],!(a=m[9]=m[9]===Wr?l?0:e.length:b(m[9]-f,0))&&24&t&&(t&=-25),c=t&&1!=t?8==t||16==t?Ai(e,t,a):32!=t&&33!=t||o.length?Si.apply(Wr,m):Oi(e,t,i,n):(d=i,h=1&t,p=_i(u=e),function e(){return(this&&this!==rs&&this instanceof e?p:u).apply(h?d:this,arguments)}),vn((g?Vt:fn)(c,m),e,t)}function Gi(e,t,i,n){return e===Wr||G(e,z[i])&&!$.call(n,i)?t:e}function Bi(e,t,i,n,o,r){return x(e)&&x(t)&&(r.set(t,e),Ft(e,t,Wr,Bi,r),r.delete(t)),e}function Wi(e){return To(e)?Wr:e}function Hi(e,t,i,n,o,r){var s=1&i,a=e.length,l=t.length;if(a!=l&&!(s&&a<l))return!1;var l=r.get(e),c=r.get(t);if(l&&c)return l==t&&c==e;var u=-1,d=!0,h=2&i?new He:Wr;for(r.set(e,t),r.set(t,e);++u<a;){var p,f=e[u],g=t[u];if((p=n?s?n(g,f,u,t,e,r):n(f,g,u,e,t,r):p)!==Wr){if(p)continue;d=!1;break}if(h){if(!Pa(t,function(e,t){return!Ka(h,t)&&(f===e||o(f,e,i,n,r))&&h.push(t)})){d=!1;break}}else if(f!==g&&!o(f,g,i,n,r)){d=!1;break}}return r.delete(e),r.delete(t),d}function Vi(e){return mn(dn(e,Wr,Tn),e+"")}function ji(e){return gt(e,D,Zi)}function zi(e){return gt(e,R,Ji)}var Ui=Te?function(e){return Te.get(e)}:Er;function Yi(e){for(var t=e.name+"",i=ke[t],n=$.call(ke,t)?i.length:0;n--;){var o=i[n],r=o.func;if(null==r||r==e)return o.name}return t}function qi(e){return($.call(f,"placeholder")?f:e).placeholder}function d(){var e=(e=f.iteratee||wr)===wr?xt:e;return arguments.length?e(arguments[0],arguments[1]):e}function Ki(e,t){var i,n,e=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?e["string"==typeof t?"string":"hash"]:e.map}function Xi(e){for(var t=D(e),i=t.length;i--;){var n=t[i],o=e[n];t[i]=[n,o,cn(o)]}return t}function Qi(e,t){t=t;e=null==(e=e)?Wr:e[t];return Et(e)?e:Wr}var Zi=ge?function(t){return null==t?[]:(t=g(t),ls(ge(t),function(e){return oe.call(t,e)}))}:Or,Ji=ge?function(e){for(var t=[];e;)us(t,Zi(e)),e=ie(e);return t}:Or,P=i;function en(e,t,i){for(var n=-1,o=(t=ri(t,e)).length,r=!1;++n<o;){var s=_n(t[n]);if(!(r=null!=e&&i(e,s)))break;e=e[s]}return r||++n!=o?r:!!(o=null==e?0:e.length)&&Eo(o)&&on(s,o)&&(B(e)||yo(e))}function tn(e){return"function"!=typeof e.constructor||ln(e)?{}:$e(ie(e))}function nn(e){return B(e)||yo(e)||!!(se&&e&&e[se])}function on(e,t){var i=typeof e;return!!(t=null==t?Vr:t)&&("number"==i||"symbol"!=i&&ha.test(e))&&-1<e&&e%1==0&&e<t}function h(e,t,i){var n;if(x(i))return n=typeof t,("number"==n?u(i)&&on(t,i.length):"string"==n&&t in i)&&G(i[t],e)}function rn(e,t){var i;if(!B(e))return i=typeof e,"number"==i||"symbol"==i||"boolean"==i||null==e||S(e)||(qs.test(e)||!Ys.test(e)||null!=t&&e in g(t))}function sn(e){var t=Yi(e),i=f[t];if("function"==typeof i&&t in v.prototype){if(e===i)return 1;t=Ui(i);return t&&e===t[0]}}(r&&P(new r(new ArrayBuffer(1)))!=is||Ae&&P(new Ae)!=qr||Ee&&P(Ee.resolve())!=Ss||xe&&P(new xe)!=Zr||e&&P(new e)!=es)&&(P=function(e){var t=i(e),e=t==Xr?e.constructor:Wr,e=e?An(e):"";if(e)switch(e){case De:return is;case Re:return qr;case Oe:return Ss;case Fe:return Zr;case Le:return es}return t});var an=U?_o:Fr;function ln(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||z)}function cn(e){return e==e&&!x(e)}function un(t,i){return function(e){return null!=e&&(e[t]===i&&(i!==Wr||t in g(e)))}}function dn(r,s,a){return s=b(s===Wr?r.length-1:s,0),function(){for(var e=arguments,t=-1,i=b(e.length-s,0),n=_(i);++t<i;)n[t]=e[s+t];for(var t=-1,o=_(s+1);++t<s;)o[t]=e[t];return o[s]=a(n),ss(r,this,o)}}function hn(e,t){return t.length<2?e:ft(e,a(t,0,-1))}function pn(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var fn=yn(Vt),gn=he||function(e,t){return rs.setTimeout(e,t)},mn=yn(t);function vn(e,t,i){var n,o,t=t+"";return mn(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(1<i?"& ":"")+t[n],t=t.join(2<i?", ":" "),e.replace(ta,"{\n/* [wrapped with "+t+"] */\n")}(t,(n=(e=(e=t).match(ia))?e[1].split(na):[],o=i,as(Cs,function(e){var t="_."+e[0];o&e[1]&&!Ma(n,t)&&n.push(t)}),n.sort())))}function yn(i){var n=0,o=0;return function(){var e=be(),t=16-(e-o);if(o=e,0<t){if(800<=++n)return arguments[0]}else n=0;return i.apply(Wr,arguments)}}function bn(e,t){var i=-1,n=e.length,o=n-1;for(t=t===Wr?n:t;++i<t;){var r=Pt(i,o),s=e[r];e[r]=e[i],e[i]=s}return e.length=t,e}wn=(ue=uo(ue=function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(Ks,function(e,t,i,n){o.push(i?n.replace(ra,"$1"):t||e)}),o},function(e){return 500===wn.size&&wn.clear(),e})).cache;var wn,Cn=ue;function _n(e){if("string"==typeof e||S(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function An(e){if(null!=e){try{return Y.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function En(e){if(e instanceof v)return e.clone();var t=new m(e.__wrapped__,e.__chain__);return t.__actions__=E(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}r=s(function(e,t){return C(e)?nt(e,l(t,1,C,!0)):[]}),Ee=s(function(e,t){var i=n(t);return C(i)&&(i=Wr),C(e)?nt(e,l(t,1,C,!0),d(i,2)):[]}),e=s(function(e,t){var i=n(t);return C(i)&&(i=Wr),C(e)?nt(e,l(t,1,C,!0),Wr,i):[]});function xn(e,t,i){var n=null==e?0:e.length;if(!n)return-1;i=null==i?0:T(i);return i<0&&(i=b(n+i,0)),Ba(e,d(t,3),i)}function Sn(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return i!==Wr&&(o=T(i),o=i<0?b(n+o,0):A(o,n-1)),Ba(e,d(t,3),o,!0)}function Tn(e){return(null==e?0:e.length)?l(e,1):[]}function kn(e){return e&&e.length?e[0]:Wr}U=s(function(e){var t=cs(e,ni);return t.length&&t[0]===e[0]?bt(t):[]}),he=s(function(e){var t=n(e),i=cs(e,ni);return t===n(i)?t=Wr:i.pop(),i.length&&i[0]===e[0]?bt(i,d(t,2)):[]}),t=s(function(e){var t=n(e),i=cs(e,ni);return(t="function"==typeof t?t:Wr)&&i.pop(),i.length&&i[0]===e[0]?bt(i,Wr,t):[]});function n(e){var t=null==e?0:e.length;return t?e[t-1]:Wr}ue=s(Dn);function Dn(e,t){return e&&e.length&&t&&t.length?$t(e,t):e}var Rn=Vi(function(e,t){var i=null==e?0:e.length,n=Je(e,t);return It(e,cs(t,function(e){return on(e,i)?+e:e}).sort(hi)),n});function On(e){return null==e?e:_e.call(e)}var Fn=s(function(e){return Xt(l(e,1,C,!0))}),Ln=s(function(e){var t=n(e);return C(t)&&(t=Wr),Xt(l(e,1,C,!0),d(t,2))}),Mn=s(function(e){var t="function"==typeof(t=n(e))?t:Wr;return Xt(l(e,1,C,!0),Wr,t)});function Nn(t){if(!t||!t.length)return[];var i=0;return t=ls(t,function(e){return C(e)&&(i=b(e.length,i),1)}),Ya(i,function(e){return cs(t,ja(e))})}function $n(e,t){if(!e||!e.length)return[];e=Nn(e);return null==t?e:cs(e,function(e){return ss(t,Wr,e)})}var In=s(function(e,t){return C(e)?nt(e,t):[]}),Pn=s(function(e){return ti(ls(e,C))}),Gn=s(function(e){var t=n(e);return C(t)&&(t=Wr),ti(ls(e,C),d(t,2))}),Bn=s(function(e){var t="function"==typeof(t=n(e))?t:Wr;return ti(ls(e,C),Wr,t)}),Wn=s(Nn);var Hn=s(function(e){var t=e.length,t="function"==typeof(t=1<t?e[t-1]:Wr)?(e.pop(),t):Wr;return $n(e,t)});function Vn(e){e=f(e);return e.__chain__=!0,e}function jn(e,t){return t(e)}var zn=Vi(function(t){function e(e){return Je(e,t)}var i=t.length,n=i?t[0]:0,o=this.__wrapped__;return!(1<i||this.__actions__.length)&&o instanceof v&&on(n)?((o=o.slice(n,+n+(i?1:0))).__actions__.push({func:jn,args:[e],thisArg:Wr}),new m(o,this.__chain__).thru(function(e){return i&&!e.length&&e.push(Wr),e})):this.thru(e)});var Un=mi(function(e,t,i){$.call(e,i)?++e[i]:Ze(e,i,1)});var Yn=Ei(xn),qn=Ei(Sn);function Kn(e,t){return(B(e)?as:ot)(e,d(t,3))}function Xn(e,t){return(B(e)?Fa:rt)(e,d(t,3))}var Qn=mi(function(e,t,i){$.call(e,i)?e[i].push(t):Ze(e,i,[t])});var Zn=s(function(e,t,i){var n=-1,o="function"==typeof t,r=u(e)?_(e.length):[];return ot(e,function(e){r[++n]=o?ss(t,e,i):wt(e,t,i)}),r}),Jn=mi(function(e,t,i){Ze(e,i,t)});function eo(e,t){return(B(e)?cs:Dt)(e,d(t,3))}var to=mi(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});var io=s(function(e,t){if(null==e)return[];var i=t.length;return 1<i&&h(e,t[0],t[1])?t=[]:2<i&&h(t[0],t[1],t[2])&&(t=[t[0]]),Mt(e,l(t,1),[])}),no=de||function(){return rs.Date.now()};function oo(e,t,i){return t=i?Wr:t,t=e&&null==t?e.length:t,Pi(e,128,Wr,Wr,Wr,Wr,t)}function ro(e,t){var i;if("function"!=typeof t)throw new y(Hr);return e=T(e),function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=Wr),i}}var so=s(function(e,t,i){var n,o=1;return i.length&&(n=fs(i,qi(so)),o|=32),Pi(e,o,t,i,n)}),ao=s(function(e,t,i){var n,o=3;return i.length&&(n=fs(i,qi(ao)),o|=32),Pi(t,o,e,i,n)});function lo(n,i,e){var o,r,s,a,l,c,u=0,d=!1,h=!1,t=!0;if("function"!=typeof n)throw new y(Hr);function p(e){var t=o,i=r;return o=r=Wr,u=e,a=n.apply(i,t)}function f(e){var t=e-c;return c===Wr||i<=t||t<0||h&&s<=e-u}function g(){var e,t=no();if(f(t))return m(t);l=gn(g,(e=i-((t=t)-c),h?A(e,s-(t-u)):e))}function m(e){return l=Wr,t&&o?p(e):(o=r=Wr,a)}function v(){var e=no(),t=f(e);if(o=arguments,r=this,c=e,t){if(l===Wr)return u=e=c,l=gn(g,i),d?p(e):a;if(h)return li(l),l=gn(g,i),p(c)}return l===Wr&&(l=gn(g,i)),a}return i=k(i)||0,x(e)&&(d=!!e.leading,h="maxWait"in e,s=h?b(k(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),v.cancel=function(){l!==Wr&&li(l),u=0,o=c=r=l=Wr},v.flush=function(){return l===Wr?a:m(no())},v}var de=s(function(e,t){return it(e,1,t)}),co=s(function(e,t,i){return it(e,k(t)||0,i)});function uo(n,o){if("function"!=typeof n||null!=o&&"function"!=typeof o)throw new y(Hr);function r(){var e=arguments,t=o?o.apply(this,e):e[0],i=r.cache;return i.has(t)?i.get(t):(e=n.apply(this,e),r.cache=i.set(t,e)||i,e)}return r.cache=new(uo.Cache||We),r}function ho(t){if("function"!=typeof t)throw new y(Hr);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}uo.Cache=We;var si=si(function(n,o){var r=(o=1==o.length&&B(o[0])?cs(o[0],hs(d())):cs(l(o,1),hs(d()))).length;return s(function(e){for(var t=-1,i=A(e.length,r);++t<i;)e[t]=o[t].call(this,e[t]);return ss(n,this,e)})}),po=s(function(e,t){var i=fs(t,qi(po));return Pi(e,32,Wr,t,i)}),fo=s(function(e,t){var i=fs(t,qi(fo));return Pi(e,64,Wr,t,i)}),go=Vi(function(e,t){return Pi(e,256,Wr,Wr,Wr,t)});function G(e,t){return e===t||e!=e&&t!=t}var mo=Li(mt),vo=Li(function(e,t){return t<=e}),yo=Ct(function(){return arguments}())?Ct:function(e){return W(e)&&$.call(e,"callee")&&!oe.call(e,"callee")},B=_.isArray,bo=xa?hs(xa):function(e){return W(e)&&i(e)==ts};function u(e){return null!=e&&Eo(e.length)&&!_o(e)}function C(e){return W(e)&&u(e)}var wo=j||Fr,j=Sa?hs(Sa):function(e){return W(e)&&i(e)==Yr};function Co(e){if(!W(e))return!1;var t=i(e);return t==As||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!To(e)}function _o(e){if(!x(e))return!1;e=i(e);return e==Es||e==xs||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ao(e){return"number"==typeof e&&e==T(e)}function Eo(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=Vr}function x(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function W(e){return null!=e&&"object"==typeof e}var xo=Ta?hs(Ta):function(e){return W(e)&&P(e)==qr};function So(e){return"number"==typeof e||W(e)&&i(e)==Kr}function To(e){if(!W(e)||i(e)!=Xr)return!1;e=ie(e);if(null===e)return!0;e=$.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&Y.call(e)==Q}var ko=ka?hs(ka):function(e){return W(e)&&i(e)==Qr};var Do=Da?hs(Da):function(e){return W(e)&&P(e)==Zr};function Ro(e){return"string"==typeof e||!B(e)&&W(e)&&i(e)==Jr}function S(e){return"symbol"==typeof e||W(e)&&i(e)==Ts}var Oo=Ra?hs(Ra):function(e){return W(e)&&Eo(e.length)&&!!ns[i(e)]};var Fo=Li(kt),Lo=Li(function(e,t){return e<=t});function Mo(e){if(!e)return[];if(u(e))return(Ro(e)?ms:E)(e);if(ae&&e[ae]){for(var t,i=e[ae](),n=[];!(t=i.next()).done;)n.push(t.value);return n}var o=P(e);return(o==qr?tl:o==Zr?nl:nr)(e)}function No(e){return e?(e=k(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function T(e){var e=No(e),t=e%1;return e==e?t?e-t:e:0}function $o(e){return e?et(T(e),0,jr):0}function k(e){if("number"==typeof e)return e;if(S(e))return ws;if("string"!=typeof(e=x(e)?x(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(Zs,"");var t=ca.test(e);return t||da.test(e)?Aa(e.slice(2),t?2:8):la.test(e)?ws:+e}function Io(e){return gi(e,R(e))}function p(e){return null==e?"":c(e)}var Po=vi(function(e,t){if(ln(t)||u(t))gi(t,D(t),e);else for(var i in t)$.call(t,i)&&qe(e,i,t[i])}),Go=vi(function(e,t){gi(t,R(t),e)}),Bo=vi(function(e,t,i,n){gi(t,R(t),e,n)}),Wo=vi(function(e,t,i,n){gi(t,D(t),e,n)}),Ho=Vi(Je);var Vo=s(function(e,t){e=g(e);var i=-1,n=t.length,o=2<n?t[2]:Wr;for(o&&h(t[0],t[1],o)&&(n=1);++i<n;)for(var r=t[i],s=R(r),a=-1,l=s.length;++a<l;){var c=s[a],u=e[c];(u===Wr||G(u,z[c])&&!$.call(e,c))&&(e[c]=r[c])}return e}),jo=s(function(e){return e.push(Wr,Bi),ss(Qo,Wr,e)});function zo(e,t,i){e=null==e?Wr:ft(e,t);return e===Wr?i:e}function Uo(e,t){return null!=e&&en(e,t,yt)}var Yo=Ti(function(e,t,i){e[t=null!=t&&"function"!=typeof t.toString?X.call(t):t]=i},vr(O)),qo=Ti(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=X.call(t)),$.call(e,t)?e[t].push(i):e[t]=[i]},d),Ko=s(wt);function D(e){return(u(e)?Ve:St)(e)}function R(e){return u(e)?Ve(e,!0):Tt(e)}var Xo=vi(function(e,t,i){Ft(e,t,i)}),Qo=vi(function(e,t,i,n){Ft(e,t,i,n)}),Zo=Vi(function(t,e){var i={};if(null==t)return i;for(var n=!1,o=(e=cs(e,function(e){return e=ri(e,t),n=n||1<e.length,e}),gi(t,zi(t),i),n&&(i=w(i,7,Wi)),e.length);o--;)Qt(i,e[o]);return i});var Jo=Vi(function(e,t){return null==e?{}:Nt(i=e,t,function(e,t){return Uo(i,t)});var i});function er(e,i){if(null==e)return{};var t=cs(zi(e),function(e){return[e]});return i=d(i),Nt(e,t,function(e,t){return i(e,t[0])})}var tr=Ii(D),ir=Ii(R);function nr(e){return null==e?[]:qa(e,D(e))}var or=Ci(function(e,t,i){return t=t.toLowerCase(),e+(i?rr(t):t)});function rr(e){return pr(p(e).toLowerCase())}function sr(e){return(e=p(e))&&e.replace(pa,Za).replace(va,"")}var ar=Ci(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),lr=Ci(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),cr=wi("toLowerCase");var ur=Ci(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});var dr=Ci(function(e,t,i){return e+(i?" ":"")+pr(t)});var hr=Ci(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),pr=wi("toUpperCase");function fr(e,t,i){return e=p(e),(t=i?Wr:t)===Wr?(i=e,ba.test(i)?e.match(ya)||[]:e.match(oa)||[]):e.match(t)||[]}var gr=s(function(e,t){try{return ss(e,Wr,t)}catch(e){return Co(e)?e:new F(e)}}),mr=Vi(function(t,e){return as(e,function(e){e=_n(e),Ze(t,e,so(t[e],t))}),t});function vr(e){return function(){return e}}var yr=xi(),br=xi(!0);function O(e){return e}function wr(e){return xt("function"==typeof e?e:w(e,1))}var Cr=s(function(t,i){return function(e){return wt(e,t,i)}}),_r=s(function(t,i){return function(e){return wt(t,e,i)}});function Ar(n,t,e){var i=D(t),o=pt(t,i),r=(null!=e||x(t)&&(o.length||!i.length)||(e=t,t=n,n=this,o=pt(t,D(t))),!(x(e)&&"chain"in e&&!e.chain)),s=_o(n);return as(o,function(e){var i=t[e];n[e]=i,s&&(n.prototype[e]=function(){var e,t=this.__chain__;return r||t?(((e=n(this.__wrapped__)).__actions__=E(this.__actions__)).push({func:i,args:arguments,thisArg:n}),e.__chain__=t,e):i.apply(n,us([this.value()],arguments))})}),n}function Er(){}var xr=Di(cs),Sr=Di(La),Tr=Di(Pa);function kr(e){return rn(e)?ja(_n(e)):(t=e,function(e){return ft(e,t)});var t}var Dr=Fi(),Rr=Fi(!0);function Or(){return[]}function Fr(){return!1}var Lr=ki(function(e,t){return e+t},0),Mr=Ni("ceil"),Nr=ki(function(e,t){return e/t},1),$r=Ni("floor");var Ir,Pr=ki(function(e,t){return e*t},1),Gr=Ni("round"),Br=ki(function(e,t){return e-t},0);return f.after=function(e,t){if("function"!=typeof t)throw new y(Hr);return e=T(e),function(){if(--e<1)return t.apply(this,arguments)}},f.ary=oo,f.assign=Po,f.assignIn=Go,f.assignInWith=Bo,f.assignWith=Wo,f.at=Ho,f.before=ro,f.bind=so,f.bindAll=mr,f.bindKey=ao,f.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return B(e)?e:[e]},f.chain=Vn,f.chunk=function(e,t,i){t=(i?h(e,t,i):t===Wr)?1:b(T(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,r=0,s=_(pe(n/t));o<n;)s[r++]=a(e,o,o+=t);return s},f.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,o=[];++t<i;){var r=e[t];r&&(o[n++]=r)}return o},f.concat=function(){var e=arguments.length;if(!e)return[];for(var t=_(e-1),i=arguments[0],n=e;n--;)t[n-1]=arguments[n];return us(B(i)?E(i):[i],l(t,1))},f.cond=function(n){var o=null==n?0:n.length,t=d();return n=o?cs(n,function(e){if("function"!=typeof e[1])throw new y(Hr);return[t(e[0]),e[1]]}):[],s(function(e){for(var t=-1;++t<o;){var i=n[t];if(ss(i[0],this,e))return ss(i[1],this,e)}})},f.conforms=function(e){return t=w(e,1),i=D(t),function(e){return tt(e,t,i)};var t,i},f.constant=vr,f.countBy=Un,f.create=function(e,t){return e=$e(e),null==t?e:Qe(e,t)},f.curry=function e(t,i,n){t=Pi(t,8,Wr,Wr,Wr,Wr,Wr,i=n?Wr:i);return t.placeholder=e.placeholder,t},f.curryRight=function e(t,i,n){t=Pi(t,16,Wr,Wr,Wr,Wr,Wr,i=n?Wr:i);return t.placeholder=e.placeholder,t},f.debounce=lo,f.defaults=Vo,f.defaultsDeep=jo,f.defer=de,f.delay=co,f.difference=r,f.differenceBy=Ee,f.differenceWith=e,f.drop=function(e,t,i){var n=null==e?0:e.length;return n?a(e,(t=i||t===Wr?1:T(t))<0?0:t,n):[]},f.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?a(e,0,(t=n-(t=i||t===Wr?1:T(t)))<0?0:t):[]},f.dropRightWhile=function(e,t){return e&&e.length?Jt(e,d(t,3),!0,!0):[]},f.dropWhile=function(e,t){return e&&e.length?Jt(e,d(t,3),!0):[]},f.fill=function(e,t,i,n){if(!(l=null==e?0:e.length))return[];i&&"number"!=typeof i&&h(e,t,i)&&(i=0,n=l);var o=e,r=t,s=i,a=n,l=o.length;for((s=T(s))<0&&(s=l<-s?0:l+s),(a=a===Wr||l<a?l:T(a))<0&&(a+=l),a=a<s?0:$o(a);s<a;)o[s++]=r;return o},f.filter=function(e,t){return(B(e)?ls:lt)(e,d(t,3))},f.flatMap=function(e,t){return l(eo(e,t),1)},f.flatMapDeep=function(e,t){return l(eo(e,t),1/0)},f.flatMapDepth=function(e,t,i){return i=i===Wr?1:T(i),l(eo(e,t),i)},f.flatten=Tn,f.flattenDeep=function(e){return(null==e?0:e.length)?l(e,1/0):[]},f.flattenDepth=function(e,t){return(null==e?0:e.length)?l(e,t=t===Wr?1:T(t)):[]},f.flip=function(e){return Pi(e,512)},f.flow=yr,f.flowRight=br,f.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var o=e[t];n[o[0]]=o[1]}return n},f.functions=function(e){return null==e?[]:pt(e,D(e))},f.functionsIn=function(e){return null==e?[]:pt(e,R(e))},f.groupBy=Qn,f.initial=function(e){return(null==e?0:e.length)?a(e,0,-1):[]},f.intersection=U,f.intersectionBy=he,f.intersectionWith=t,f.invert=Yo,f.invertBy=qo,f.invokeMap=Zn,f.iteratee=wr,f.keyBy=Jn,f.keys=D,f.keysIn=R,f.map=eo,f.mapKeys=function(e,n){var o={};return n=d(n,3),dt(e,function(e,t,i){Ze(o,n(e,t,i),e)}),o},f.mapValues=function(e,n){var o={};return n=d(n,3),dt(e,function(e,t,i){Ze(o,t,n(e,t,i))}),o},f.matches=function(e){return Rt(w(e,1))},f.matchesProperty=function(e,t){return Ot(e,w(t,1))},f.memoize=uo,f.merge=Xo,f.mergeWith=Qo,f.method=Cr,f.methodOf=_r,f.mixin=Ar,f.negate=ho,f.nthArg=function(t){return t=T(t),s(function(e){return Lt(e,t)})},f.omit=Zo,f.omitBy=function(e,t){return er(e,ho(d(t)))},f.once=function(e){return ro(2,e)},f.orderBy=function(e,t,i,n){return null==e?[]:Mt(e,t=B(t)?t:null==t?[]:[t],i=B(i=n?Wr:i)?i:null==i?[]:[i])},f.over=xr,f.overArgs=si,f.overEvery=Sr,f.overSome=Tr,f.partial=po,f.partialRight=fo,f.partition=to,f.pick=Jo,f.pickBy=er,f.property=kr,f.propertyOf=function(t){return function(e){return null==t?Wr:ft(t,e)}},f.pull=ue,f.pullAll=Dn,f.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?$t(e,t,d(i,2)):e},f.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?$t(e,t,Wr,i):e},f.pullAt=Rn,f.range=Dr,f.rangeRight=Rr,f.rearg=go,f.reject=function(e,t){return(B(e)?ls:lt)(e,ho(d(t,3)))},f.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,o=[],r=e.length;for(t=d(t,3);++n<r;){var s=e[n];t(s,n,e)&&(i.push(s),o.push(n))}return It(e,o),i},f.rest=function(e,t){if("function"!=typeof e)throw new y(Hr);return s(e,t=t===Wr?t:T(t))},f.reverse=On,f.sampleSize=function(e,t,i){return t=(i?h(e,t,i):t===Wr)?1:T(t),(B(e)?ze:Wt)(e,t)},f.set=function(e,t,i){return null==e?e:Ht(e,t,i)},f.setWith=function(e,t,i,n){return n="function"==typeof n?n:Wr,null==e?e:Ht(e,t,i,n)},f.shuffle=function(e){return(B(e)?Ue:jt)(e)},f.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i=i&&"number"!=typeof i&&h(e,t,i)?(t=0,n):(t=null==t?0:T(t),i===Wr?n:T(i)),a(e,t,i)):[]},f.sortBy=io,f.sortedUniq=function(e){return e&&e.length?qt(e):[]},f.sortedUniqBy=function(e,t){return e&&e.length?qt(e,d(t,2)):[]},f.split=function(e,t,i){return i&&"number"!=typeof i&&h(e,t,i)&&(t=i=Wr),(i=i===Wr?jr:i>>>0)?(e=p(e))&&("string"==typeof t||null!=t&&!ko(t))&&!(t=c(t))&&ps(e)?ai(ms(e),0,i):e.split(t,i):[]},f.spread=function(i,n){if("function"!=typeof i)throw new y(Hr);return n=null==n?0:b(T(n),0),s(function(e){var t=e[n],e=ai(e,0,n);return t&&us(e,t),ss(i,this,e)})},f.tail=function(e){var t=null==e?0:e.length;return t?a(e,1,t):[]},f.take=function(e,t,i){return e&&e.length?a(e,0,(t=i||t===Wr?1:T(t))<0?0:t):[]},f.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?a(e,(t=n-(t=i||t===Wr?1:T(t)))<0?0:t,n):[]},f.takeRightWhile=function(e,t){return e&&e.length?Jt(e,d(t,3),!1,!0):[]},f.takeWhile=function(e,t){return e&&e.length?Jt(e,d(t,3)):[]},f.tap=function(e,t){return t(e),e},f.throttle=function(e,t,i){var n=!0,o=!0;if("function"!=typeof e)throw new y(Hr);return x(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),lo(e,t,{leading:n,maxWait:t,trailing:o})},f.thru=jn,f.toArray=Mo,f.toPairs=tr,f.toPairsIn=ir,f.toPath=function(e){return B(e)?cs(e,_n):S(e)?[e]:E(Cn(p(e)))},f.toPlainObject=Io,f.transform=function(e,n,o){var t,i=B(e),r=i||wo(e)||Oo(e);return n=d(n,4),null==o&&(t=e&&e.constructor,o=r?i?new t:[]:x(e)&&_o(t)?$e(ie(e)):{}),(r?as:dt)(e,function(e,t,i){return n(o,e,t,i)}),o},f.unary=function(e){return oo(e,1)},f.union=Fn,f.unionBy=Ln,f.unionWith=Mn,f.uniq=function(e){return e&&e.length?Xt(e):[]},f.uniqBy=function(e,t){return e&&e.length?Xt(e,d(t,2)):[]},f.uniqWith=function(e,t){return t="function"==typeof t?t:Wr,e&&e.length?Xt(e,Wr,t):[]},f.unset=function(e,t){return null==e||Qt(e,t)},f.unzip=Nn,f.unzipWith=$n,f.update=function(e,t,i){return null==e?e:Zt(e,t,oi(i))},f.updateWith=function(e,t,i,n){return n="function"==typeof n?n:Wr,null==e?e:Zt(e,t,oi(i),n)},f.values=nr,f.valuesIn=function(e){return null==e?[]:qa(e,R(e))},f.without=In,f.words=fr,f.wrap=function(e,t){return po(oi(t),e)},f.xor=Pn,f.xorBy=Gn,f.xorWith=Bn,f.zip=Wn,f.zipObject=function(e,t){return ii(e||[],t||[],qe)},f.zipObjectDeep=function(e,t){return ii(e||[],t||[],Ht)},f.zipWith=Hn,f.entries=tr,f.entriesIn=ir,f.extend=Go,f.extendWith=Bo,Ar(f,f),f.add=Lr,f.attempt=gr,f.camelCase=or,f.capitalize=rr,f.ceil=Mr,f.clamp=function(e,t,i){return i===Wr&&(i=t,t=Wr),i!==Wr&&(i=(i=k(i))==i?i:0),t!==Wr&&(t=(t=k(t))==t?t:0),et(k(e),t,i)},f.clone=function(e){return w(e,4)},f.cloneDeep=function(e){return w(e,5)},f.cloneDeepWith=function(e,t){return w(e,5,t="function"==typeof t?t:Wr)},f.cloneWith=function(e,t){return w(e,4,t="function"==typeof t?t:Wr)},f.conformsTo=function(e,t){return null==t||tt(e,t,D(t))},f.deburr=sr,f.defaultTo=function(e,t){return null==e||e!=e?t:e},f.divide=Nr,f.endsWith=function(e,t,i){e=p(e),t=c(t);var n=e.length,n=i=i===Wr?n:et(T(i),0,n);return 0<=(i-=t.length)&&e.slice(i,n)==t},f.eq=G,f.escape=function(e){return(e=p(e))&&Vs.test(e)?e.replace(Ws,Ja):e},f.escapeRegExp=function(e){return(e=p(e))&&Qs.test(e)?e.replace(Xs,"\\$&"):e},f.every=function(e,t,i){return(B(e)?La:st)(e,d(t=i&&h(e,t,i)?Wr:t,3))},f.find=Yn,f.findIndex=xn,f.findKey=function(e,t){return Ga(e,d(t,3),dt)},f.findLast=qn,f.findLastIndex=Sn,f.findLastKey=function(e,t){return Ga(e,d(t,3),ht)},f.floor=$r,f.forEach=Kn,f.forEachRight=Xn,f.forIn=function(e,t){return null==e?e:ct(e,d(t,3),R)},f.forInRight=function(e,t){return null==e?e:ut(e,d(t,3),R)},f.forOwn=function(e,t){return e&&dt(e,d(t,3))},f.forOwnRight=function(e,t){return e&&ht(e,d(t,3))},f.get=zo,f.gt=mo,f.gte=vo,f.has=function(e,t){return null!=e&&en(e,t,vt)},f.hasIn=Uo,f.head=kn,f.identity=O,f.includes=function(e,t,i,n){return e=u(e)?e:nr(e),i=i&&!n?T(i):0,n=e.length,i<0&&(i=b(n+i,0)),Ro(e)?i<=n&&-1<e.indexOf(t,i):!!n&&-1<ds(e,t,i)},f.indexOf=function(e,t,i){var n=null==e?0:e.length;return n?(i=null==i?0:T(i),ds(e,t,i=i<0?b(n+i,0):i)):-1},f.inRange=function(e,t,i){return t=No(t),i===Wr?(i=t,t=0):i=No(i),(e=e=k(e))>=A(t=t,i=i)&&e<b(t,i)},f.invoke=Ko,f.isArguments=yo,f.isArray=B,f.isArrayBuffer=bo,f.isArrayLike=u,f.isArrayLikeObject=C,f.isBoolean=function(e){return!0===e||!1===e||W(e)&&i(e)==Ur},f.isBuffer=wo,f.isDate=j,f.isElement=function(e){return W(e)&&1===e.nodeType&&!To(e)},f.isEmpty=function(e){if(null==e)return!0;if(u(e)&&(B(e)||"string"==typeof e||"function"==typeof e.splice||wo(e)||Oo(e)||yo(e)))return!e.length;var t,i=P(e);if(i==qr||i==Zr)return!e.size;if(ln(e))return!St(e).length;for(t in e)if($.call(e,t))return!1;return!0},f.isEqual=function(e,t){return _t(e,t)},f.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:Wr)?i(e,t):Wr;return n===Wr?_t(e,t,Wr,i):!!n},f.isError=Co,f.isFinite=function(e){return"number"==typeof e&&me(e)},f.isFunction=_o,f.isInteger=Ao,f.isLength=Eo,f.isMap=xo,f.isMatch=function(e,t){return e===t||At(e,t,Xi(t))},f.isMatchWith=function(e,t,i){return i="function"==typeof i?i:Wr,At(e,t,Xi(t),i)},f.isNaN=function(e){return So(e)&&e!=+e},f.isNative=function(e){if(an(e))throw new F("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Et(e)},f.isNil=function(e){return null==e},f.isNull=function(e){return null===e},f.isNumber=So,f.isObject=x,f.isObjectLike=W,f.isPlainObject=To,f.isRegExp=ko,f.isSafeInteger=function(e){return Ao(e)&&-Vr<=e&&e<=Vr},f.isSet=Do,f.isString=Ro,f.isSymbol=S,f.isTypedArray=Oo,f.isUndefined=function(e){return e===Wr},f.isWeakMap=function(e){return W(e)&&P(e)==es},f.isWeakSet=function(e){return W(e)&&"[object WeakSet]"==i(e)},f.join=function(e,t){return null==e?"":ve.call(e,t)},f.kebabCase=ar,f.last=n,f.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=n;if(i!==Wr&&(o=(o=T(i))<0?b(n+o,0):A(o,n-1)),t!=t)return Ba(e,Ha,o,!0);for(var r=e,s=t,a=o+1;a--;)if(r[a]===s)return a;return a},f.lowerCase=lr,f.lowerFirst=cr,f.lt=Fo,f.lte=Lo,f.max=function(e){return e&&e.length?at(e,O,mt):Wr},f.maxBy=function(e,t){return e&&e.length?at(e,d(t,2),mt):Wr},f.mean=function(e){return Va(e,O)},f.meanBy=function(e,t){return Va(e,d(t,2))},f.min=function(e){return e&&e.length?at(e,O,kt):Wr},f.minBy=function(e,t){return e&&e.length?at(e,d(t,2),kt):Wr},f.stubArray=Or,f.stubFalse=Fr,f.stubObject=function(){return{}},f.stubString=function(){return""},f.stubTrue=function(){return!0},f.multiply=Pr,f.nth=function(e,t){return e&&e.length?Lt(e,T(t)):Wr},f.noConflict=function(){return rs._===this&&(rs._=Z),this},f.noop=Er,f.now=no,f.pad=function(e,t,i){e=p(e);var n=(t=T(t))?gs(e):0;return!t||t<=n?e:Ri(fe(t=(t-n)/2),i)+e+Ri(pe(t),i)},f.padEnd=function(e,t,i){e=p(e);var n=(t=T(t))?gs(e):0;return t&&n<t?e+Ri(t-n,i):e},f.padStart=function(e,t,i){e=p(e);var n=(t=T(t))?gs(e):0;return t&&n<t?Ri(t-n,i)+e:e},f.parseInt=function(e,t,i){return t=i||null==t?0:t&&+t,we(p(e).replace(Js,""),t||0)},f.random=function(e,t,i){var n;return i&&"boolean"!=typeof i&&h(e,t,i)&&(t=i=Wr),i===Wr&&("boolean"==typeof t?(i=t,t=Wr):"boolean"==typeof e&&(i=e,e=Wr)),e===Wr&&t===Wr?(e=0,t=1):(e=No(e),t===Wr?(t=e,e=0):t=No(t)),t<e&&(n=e,e=t,t=n),i||e%1||t%1?(n=Ce(),A(e+n*(t-e+_a("1e-"+((n+"").length-1))),t)):Pt(e,t)},f.reduce=function(e,t,i){var n=B(e)?$a:za,o=arguments.length<3;return n(e,d(t,4),i,o,ot)},f.reduceRight=function(e,t,i){var n=B(e)?Ia:za,o=arguments.length<3;return n(e,d(t,4),i,o,rt)},f.repeat=function(e,t,i){return t=(i?h(e,t,i):t===Wr)?1:T(t),Gt(p(e),t)},f.replace=function(){var e=arguments,t=p(e[0]);return e.length<3?t:t.replace(e[1],e[2])},f.result=function(e,t,i){var n=-1,o=(t=ri(t,e)).length;for(o||(o=1,e=Wr);++n<o;){var r=null==e?Wr:e[_n(t[n])];r===Wr&&(n=o,r=i),e=_o(r)?r.call(e):r}return e},f.round=Gr,f.runInContext=o,f.sample=function(e){return(B(e)?je:Bt)(e)},f.size=function(e){if(null==e)return 0;if(u(e))return Ro(e)?gs(e):e.length;var t=P(e);return t==qr||t==Zr?e.size:St(e).length},f.snakeCase=ur,f.some=function(e,t,i){return(B(e)?Pa:zt)(e,d(t=i&&h(e,t,i)?Wr:t,3))},f.sortedIndex=function(e,t){return Ut(e,t)},f.sortedIndexBy=function(e,t,i){return Yt(e,t,d(i,2))},f.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=Ut(e,t);if(n<i&&G(e[n],t))return n}return-1},f.sortedLastIndex=function(e,t){return Ut(e,t,!0)},f.sortedLastIndexBy=function(e,t,i){return Yt(e,t,d(i,2),!0)},f.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var i=Ut(e,t,!0)-1;if(G(e[i],t))return i}return-1},f.startCase=dr,f.startsWith=function(e,t,i){return e=p(e),i=null==i?0:et(T(i),0,e.length),t=c(t),e.slice(i,i+t.length)==t},f.subtract=Br,f.sum=function(e){return e&&e.length?Ua(e,O):0},f.sumBy=function(e,t){return e&&e.length?Ua(e,d(t,2)):0},f.template=function(s,e,t){var a,l,i=f.templateSettings;t&&h(s,e,t)&&(e=Wr),s=p(s),e=Bo({},e,i,Gi);var n=D(t=Bo({},e.imports,i.imports,Gi)),o=qa(t,n),c=0,i=e.interpolate||fa,u="__p += '",t=N((e.escape||fa).source+"|"+i.source+"|"+(i===Us?sa:fa).source+"|"+(e.evaluate||fa).source+"|$","g"),r="//# sourceURL="+($.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ca+"]")+"\n";if(s.replace(t,function(e,t,i,n,o,r){return i=i||n,u+=s.slice(c,r).replace(ga,el),t&&(a=!0,u+="' +\n__e("+t+") +\n'"),o&&(l=!0,u+="';\n"+o+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=r+e.length,e}),u+="';\n",(i=$.call(e,"variable")&&e.variable)||(u="with (obj) {\n"+u+"\n}\n"),u=(l?u.replace(Is,""):u).replace(Ps,"$1").replace(Gs,"$1;"),u="function("+(i||"obj")+") {\n"+(i?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}",(t=gr(function(){return L(n,r+"return "+u).apply(Wr,o)})).source=u,Co(t))throw t;return t},f.times=function(e,t){if((e=T(e))<1||Vr<e)return[];for(var i=jr,n=A(e,jr),n=(t=d(t),e-=jr,Ya(n,t));++i<e;)t(i);return n},f.toFinite=No,f.toInteger=T,f.toLength=$o,f.toLower=function(e){return p(e).toLowerCase()},f.toNumber=k,f.toSafeInteger=function(e){return e?et(T(e),-Vr,Vr):0===e?e:0},f.toString=p,f.toUpper=function(e){return p(e).toUpperCase()},f.trim=function(e,t,i){return(e=p(e))&&(i||t===Wr)?e.replace(Zs,""):e&&(t=c(t))?(i=ms(e),e=ms(t),ai(i,Xa(i,e),Qa(i,e)+1).join("")):e},f.trimEnd=function(e,t,i){return(e=p(e))&&(i||t===Wr)?e.replace(ea,""):e&&(t=c(t))?ai(i=ms(e),0,Qa(i,ms(t))+1).join(""):e},f.trimStart=function(e,t,i){return(e=p(e))&&(i||t===Wr)?e.replace(Js,""):e&&(t=c(t))?ai(i=ms(e),Xa(i,ms(t))).join(""):e},f.truncate=function(e,t){var i,n=30,o="...",t=(x(t)&&(i="separator"in t?t.separator:i,n="length"in t?T(t.length):n,o="omission"in t?c(t.omission):o),(e=p(e)).length);if((t=ps(e)?(r=ms(e)).length:t)<=n)return e;if((t=n-gs(o))<1)return o;var r,n=r?ai(r,0,t).join(""):e.slice(0,t);if(i===Wr)return n+o;if(r&&(t+=n.length-t),ko(i)){if(e.slice(t).search(i)){var s,a=n;for((i=i.global?i:N(i.source,p(aa.exec(i))+"g")).lastIndex=0;s=i.exec(a);)var l=s.index;n=n.slice(0,l===Wr?t:l)}}else e.indexOf(c(i),t)==t||-1<(r=n.lastIndexOf(i))&&(n=n.slice(0,r));return n+o},f.unescape=function(e){return(e=p(e))&&Hs.test(e)?e.replace(Bs,ol):e},f.uniqueId=function(e){var t=++q;return p(e)+t},f.upperCase=hr,f.upperFirst=pr,f.each=Kn,f.eachRight=Xn,f.first=kn,Ar(f,(Ir={},dt(f,function(e,t){$.call(f.prototype,t)||(Ir[t]=e)}),Ir),{chain:!1}),f.VERSION="4.17.20",as(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){f[e].placeholder=f}),as(["drop","take"],function(i,n){v.prototype[i]=function(e){e=e===Wr?1:b(T(e),0);var t=this.__filtered__&&!n?new v(this):this.clone();return t.__filtered__?t.__takeCount__=A(e,t.__takeCount__):t.__views__.push({size:A(e,jr),type:i+(t.__dir__<0?"Right":"")}),t},v.prototype[i+"Right"]=function(e){return this.reverse()[i](e).reverse()}}),as(["filter","map","takeWhile"],function(e,t){var i=t+1,n=1==i||3==i;v.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:d(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}}),as(["head","last"],function(e,t){var i="take"+(t?"Right":"");v.prototype[e]=function(){return this[i](1).value()[0]}}),as(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");v.prototype[e]=function(){return this.__filtered__?new v(this):this[i](1)}}),v.prototype.compact=function(){return this.filter(O)},v.prototype.find=function(e){return this.filter(e).head()},v.prototype.findLast=function(e){return this.reverse().find(e)},v.prototype.invokeMap=s(function(t,i){return"function"==typeof t?new v(this):this.map(function(e){return wt(e,t,i)})}),v.prototype.reject=function(e){return this.filter(ho(d(e)))},v.prototype.slice=function(e,t){e=T(e);var i=this;return i.__filtered__&&(0<e||t<0)?new v(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==Wr?(t=T(t))<0?i.dropRight(-t):i.take(t-e):i)},v.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},v.prototype.toArray=function(){return this.take(jr)},dt(v.prototype,function(c,e){var u=/^(?:filter|find|map|reject)|While$/.test(e),d=/^(?:head|last)$/.test(e),h=f[d?"take"+("last"==e?"Right":""):e],p=d||/^find/.test(e);h&&(f.prototype[e]=function(){function e(e){return e=h.apply(f,us([e],n)),d&&a?e[0]:e}var t,i=this.__wrapped__,n=d?[1]:arguments,o=i instanceof v,r=n[0],s=o||B(i),a=(s&&u&&"function"==typeof r&&1!=r.length&&(o=s=!1),this.__chain__),r=!!this.__actions__.length,l=p&&!a,o=o&&!r;return!p&&s?(i=o?i:new v(this),(t=c.apply(i,n)).__actions__.push({func:jn,args:[e],thisArg:Wr}),new m(t,a)):l&&o?c.apply(this,n):(t=this.thru(e),l?d?t.value()[0]:t.value():t)})}),as(["pop","push","shift","sort","splice","unshift"],function(e){var i=V[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);f.prototype[e]=function(){var e,t=arguments;return o&&!this.__chain__?(e=this.value(),i.apply(B(e)?e:[],t)):this[n](function(e){return i.apply(B(e)?e:[],t)})}}),dt(v.prototype,function(e,t){var i,n=f[t];n&&(i=n.name+"",$.call(ke,i)||(ke[i]=[]),ke[i].push({name:t,func:n}))}),ke[Si(Wr,2).name]=[{name:"wrapper",func:Wr}],v.prototype.clone=function(){var e=new v(this.__wrapped__);return e.__actions__=E(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=E(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=E(this.__views__),e},v.prototype.reverse=function(){var e;return this.__filtered__?((e=new v(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},v.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=B(e),n=t<0,o=i?e.length:0,r=function(e,t,i){var n=-1,o=i.length;for(;++n<o;){var r=i[n],s=r.size;switch(r.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=A(t,e+s);break;case"takeRight":e=b(e,t-s)}}return{start:e,end:t}}(0,o,this.__views__),s=r.start,a=(r=r.end)-s,l=n?r:s-1,c=this.__iteratees__,u=c.length,d=0,h=A(a,this.__takeCount__);if(!i||!n&&o==a&&h==a)return ei(e,this.__actions__);var p=[];e:for(;a--&&d<h;){for(var f=-1,g=e[l+=t];++f<u;){var m=c[f],v=m.iteratee,m=m.type,v=v(g);if(2==m)g=v;else if(!v){if(1==m)continue e;break e}}p[d++]=g}return p},f.prototype.at=zn,f.prototype.chain=function(){return Vn(this)},f.prototype.commit=function(){return new m(this.value(),this.__chain__)},f.prototype.next=function(){this.__values__===Wr&&(this.__values__=Mo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?Wr:this.__values__[this.__index__++]}},f.prototype.plant=function(e){for(var t,i=this;i instanceof Pe;)var n=En(i),o=(n.__index__=0,n.__values__=Wr,t?o.__wrapped__=n:t=n,n),i=i.__wrapped__;return o.__wrapped__=e,t},f.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof v?(e=e,(e=(e=this.__actions__.length?new v(this):e).reverse()).__actions__.push({func:jn,args:[On],thisArg:Wr}),new m(e,this.__chain__)):this.thru(On)},f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=function(){return ei(this.__wrapped__,this.__actions__)},f.prototype.first=f.prototype.head,ae&&(f.prototype[ae]=function(){return this}),f}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(rs._=vs,define(function(){return vs})):o?((o.exports=vs)._=vs,n._=vs):rs._=vs}.call(this),!function(i){var t=Array.prototype.slice,n={dict:null,load:function(e){null!==this.dict?i.extend(this.dict,e):this.dict=e},_:function(e){return(dict=this.dict)&&dict.hasOwnProperty(e)&&(e=dict[e]),(args=t.call(arguments))[0]=e,this.printf.apply(this,args)},printf:function(e,n){return arguments.length<2?e:(n=i.isArray(n)?n:t.call(arguments,1),e.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(e,t,i){return i?t+n[parseInt(i)-1]:t+n.shift()}).replace(/%%s/g,"%s"))}};i.fn._t=function(e,t){return i(this).html(n._.apply(n,arguments))},i.i18n=n}(jQuery),!function(o){void 0===o.fn.each2&&o.extend(o.fn,{each2:function(e){for(var t=o([0]),i=-1,n=this.length;++i<n&&(t.context=t[0]=this[i])&&!1!==e.call(t[0],i,t););return this}})}(jQuery),!function(v,y){"use strict";var e,t,i,b,o,a,m,c,n,r,s;function l(e){var t=v(document.createTextNode(""));e.before(t),t.before(e),t.remove()}function u(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return n[e]||e})}function d(e,t){for(var i=0,n=t.length;i<n;i+=1)if(h(e,t[i]))return i;return-1}function h(e,t){return e===t||e!==y&&t!==y&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}function p(e,t,i){var n,o,r;if(null===e||e.length<1)return[];for(o=0,r=(n=e.split(t)).length;o<r;o+=1)n[o]=i(n[o]);return n}function f(e){return e.outerWidth(!1)-e.width()}function g(t){var i="keyup-change-value";t.on("keydown",function(){v.data(t,i)===y&&v.data(t,i,t.val())}),t.on("keyup",function(){var e=v.data(t,i);e!==y&&t.val()!==e&&(v.removeData(t,i),t.trigger("keyup-change"))})}function w(t,i,n){var o;return n=n||y,function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(n,e)},t)}}function C(e){e.preventDefault(),e.stopPropagation()}function _(e,t,i){var n,o=[],r=v.trim(e.attr("class"));r&&v((r=""+r).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)}),(r=v.trim(t.attr("class")))&&v((r=""+r).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(n=i(this))&&o.push(n)}),e.attr("class",o.join(" "))}function A(e,t,i,n){var o=u(e.toUpperCase()).indexOf(u(t.toUpperCase())),t=t.length;o<0?i.push(n(e)):(i.push(n(e.substring(0,o))),i.push("<span class='select2-match'>"),i.push(n(e.substring(o,o+t))),i.push("</span>"),i.push(n(e.substring(o+t,e.length))))}function E(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function x(r){var e,s=null,t=r.quietMillis||100,a=r.url,l=this;return function(o){window.clearTimeout(e),e=window.setTimeout(function(){var e=r.data,t=a,i=r.transport||v.fn.select2.ajaxDefaults.transport,n={type:r.type||"GET",cache:r.cache||!1,jsonpCallback:r.jsonpCallback||y,dataType:r.dataType||"json"},n=v.extend({},v.fn.select2.ajaxDefaults.params,n),e=e?e.call(l,o.term,o.page,o.context):null,t="function"==typeof t?t.call(l,o.term,o.page,o.context):t;s&&"function"==typeof s.abort&&s.abort(),r.params&&(v.isFunction(r.params)?v.extend(n,r.params.call(l)):v.extend(n,r.params)),v.extend(n,{url:t,dataType:r.dataType,data:e,success:function(e){e=r.results(e,o.page,o);o.callback(e)},error:function(e,t,i){o.callback({hasError:!0,jqXHR:e,textStatus:t,errorThrown:i})}}),s=i.call(l,n)},t)}}function S(e){var t,i,n=e,a=function(e){return""+e.text},e=(v.isArray(n)&&(n={results:i=n}),!1===v.isFunction(n)&&(i=n,n=function(){return i}),n());return e.text&&(a=e.text,v.isFunction(a)||(t=e.text,a=function(e){return e[t]})),function(o){var r,s=o.term,i={results:[]};""===s?o.callback(n()):(r=function(e,t){var i,n;if((e=e[0]).children){for(n in i={},e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.children=[],v(e.children).each2(function(e,t){r(t,i.children)}),(i.children.length||o.matcher(s,a(i),e))&&t.push(i)}else o.matcher(s,a(e),e)&&t.push(e)},v(n().results).each2(function(e,t){r(t,i.results)}),o.callback(i))}}function T(t){var r=v.isFunction(t);return function(i){var n=i.term,o={results:[]},e=r?t(i):t;v.isArray(e)&&(v(e).each(function(){var e=this.text!==y,t=e?this.text:this;""!==n&&!i.matcher(n,t)||o.results.push(e?this:{id:this,text:this})}),i.callback(o))}}function k(e,t){if(v.isFunction(e))return 1;if(e){if("string"==typeof e)return 1;throw new Error(t+" must be a string, function, or falsy value")}}function D(e,t){var i;return v.isFunction(e)?(i=Array.prototype.slice.call(arguments,2),e.apply(t,i)):e}function R(){var i=this;v.each(arguments,function(e,t){i[t].remove(),i[t]=null})}function O(e,t){function i(){}return((i.prototype=new e).constructor=i).prototype.parent=e.prototype,i.prototype=v.extend(i.prototype,t),i}window.Select2===y&&(a={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which||e){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return 112<=(e=e.which||e)&&e<=123}},n={"‚í∂":"A","Ôº°":"A","√Ä":"A","√Å":"A","√Ç":"A","·∫¶":"A","·∫§":"A","·∫™":"A","·∫®":"A","√É":"A","ƒÄ":"A","ƒÇ":"A","·∫∞":"A","·∫Æ":"A","·∫¥":"A","·∫≤":"A","»¶":"A","«†":"A","√Ñ":"A","«û":"A","·∫¢":"A","√Ö":"A","«∫":"A","«ç":"A","»Ä":"A","»Ç":"A","·∫†":"A","·∫¨":"A","·∫∂":"A","·∏Ä":"A","ƒÑ":"A","»∫":"A","‚±Ø":"A","Íú≤":"AA","√Ü":"AE","«º":"AE","«¢":"AE","Íú¥":"AO","Íú∂":"AU","Íú∏":"AV","Íú∫":"AV","Íúº":"AY","‚í∑":"B","Ôº¢":"B","·∏Ç":"B","·∏Ñ":"B","·∏Ü":"B","…É":"B","∆Ç":"B","∆Å":"B","‚í∏":"C","Ôº£":"C","ƒÜ":"C","ƒà":"C","ƒä":"C","ƒå":"C","√á":"C","·∏à":"C","∆á":"C","»ª":"C","Íúæ":"C","‚íπ":"D","Ôº§":"D","·∏ä":"D","ƒé":"D","·∏å":"D","·∏ê":"D","·∏í":"D","·∏é":"D","ƒê":"D","∆ã":"D","∆ä":"D","∆â":"D","Íùπ":"D","«±":"DZ","«Ñ":"DZ","«≤":"Dz","«Ö":"Dz","‚í∫":"E","Ôº•":"E","√à":"E","√â":"E","√ä":"E","·ªÄ":"E","·∫æ":"E","·ªÑ":"E","·ªÇ":"E","·∫º":"E","ƒí":"E","·∏î":"E","·∏ñ":"E","ƒî":"E","ƒñ":"E","√ã":"E","·∫∫":"E","ƒö":"E","»Ñ":"E","»Ü":"E","·∫∏":"E","·ªÜ":"E","»®":"E","·∏ú":"E","ƒò":"E","·∏ò":"E","·∏ö":"E","∆ê":"E","∆é":"E","‚íª":"F","Ôº¶":"F","·∏û":"F","∆ë":"F","Íùª":"F","‚íº":"G","Ôºß":"G","«¥":"G","ƒú":"G","·∏†":"G","ƒû":"G","ƒ†":"G","«¶":"G","ƒ¢":"G","«§":"G","∆ì":"G","Íû†":"G","ÍùΩ":"G","Íùæ":"G","‚íΩ":"H","Ôº®":"H","ƒ§":"H","·∏¢":"H","·∏¶":"H","»û":"H","·∏§":"H","·∏®":"H","·∏™":"H","ƒ¶":"H","‚±ß":"H","‚±µ":"H","Íûç":"H","‚íæ":"I","Ôº©":"I","√å":"I","√ç":"I","√é":"I","ƒ®":"I","ƒ™":"I","ƒ¨":"I","ƒ∞":"I","√è":"I","·∏Æ":"I","·ªà":"I","«è":"I","»à":"I","»ä":"I","·ªä":"I","ƒÆ":"I","·∏¨":"I","∆ó":"I","‚íø":"J","Ôº™":"J","ƒ¥":"J","…à":"J","‚ìÄ":"K","Ôº´":"K","·∏∞":"K","«®":"K","·∏≤":"K","ƒ∂":"K","·∏¥":"K","∆ò":"K","‚±©":"K","ÍùÄ":"K","ÍùÇ":"K","ÍùÑ":"K","Íû¢":"K","‚ìÅ":"L","Ôº¨":"L","ƒø":"L","ƒπ":"L","ƒΩ":"L","·∏∂":"L","·∏∏":"L","ƒª":"L","·∏º":"L","·∏∫":"L","≈Å":"L","»Ω":"L","‚±¢":"L","‚±†":"L","Íùà":"L","ÍùÜ":"L","ÍûÄ":"L","«á":"LJ","«à":"Lj","‚ìÇ":"M","Ôº≠":"M","·∏æ":"M","·πÄ":"M","·πÇ":"M","‚±Æ":"M","∆ú":"M","‚ìÉ":"N","ÔºÆ":"N","«∏":"N","≈É":"N","√ë":"N","·πÑ":"N","≈á":"N","·πÜ":"N","≈Ö":"N","·πä":"N","·πà":"N","»†":"N","∆ù":"N","Íûê":"N","Íû§":"N","«ä":"NJ","«ã":"Nj","‚ìÑ":"O","ÔºØ":"O","√í":"O","√ì":"O","√î":"O","·ªí":"O","·ªê":"O","·ªñ":"O","·ªî":"O","√ï":"O","·πå":"O","»¨":"O","·πé":"O","≈å":"O","·πê":"O","·πí":"O","≈é":"O","»Æ":"O","»∞":"O","√ñ":"O","»™":"O","·ªé":"O","≈ê":"O","«ë":"O","»å":"O","»é":"O","∆†":"O","·ªú":"O","·ªö":"O","·ª†":"O","·ªû":"O","·ª¢":"O","·ªå":"O","·ªò":"O","«™":"O","«¨":"O","√ò":"O","«æ":"O","∆Ü":"O","∆ü":"O","Íùä":"O","Íùå":"O","∆¢":"OI","Íùé":"OO","»¢":"OU","‚ìÖ":"P","Ôº∞":"P","·πî":"P","·πñ":"P","∆§":"P","‚±£":"P","Íùê":"P","Íùí":"P","Íùî":"P","‚ìÜ":"Q","Ôº±":"Q","Íùñ":"Q","Íùò":"Q","…ä":"Q","‚ìá":"R","Ôº≤":"R","≈î":"R","·πò":"R","≈ò":"R","»ê":"R","»í":"R","·πö":"R","·πú":"R","≈ñ":"R","·πû":"R","…å":"R","‚±§":"R","Íùö":"R","Íû¶":"R","ÍûÇ":"R","‚ìà":"S","Ôº≥":"S","·∫û":"S","≈ö":"S","·π§":"S","≈ú":"S","·π†":"S","≈†":"S","·π¶":"S","·π¢":"S","·π®":"S","»ò":"S","≈û":"S","‚±æ":"S","Íû®":"S","ÍûÑ":"S","‚ìâ":"T","Ôº¥":"T","·π™":"T","≈§":"T","·π¨":"T","»ö":"T","≈¢":"T","·π∞":"T","·πÆ":"T","≈¶":"T","∆¨":"T","∆Æ":"T","»æ":"T","ÍûÜ":"T","Íú®":"TZ","‚ìä":"U","Ôºµ":"U","√ô":"U","√ö":"U","√õ":"U","≈®":"U","·π∏":"U","≈™":"U","·π∫":"U","≈¨":"U","√ú":"U","«õ":"U","«ó":"U","«ï":"U","«ô":"U","·ª¶":"U","≈Æ":"U","≈∞":"U","«ì":"U","»î":"U","»ñ":"U","∆Ø":"U","·ª™":"U","·ª®":"U","·ªÆ":"U","·ª¨":"U","·ª∞":"U","·ª§":"U","·π≤":"U","≈≤":"U","·π∂":"U","·π¥":"U","…Ñ":"U","‚ìã":"V","Ôº∂":"V","·πº":"V","·πæ":"V","∆≤":"V","Íùû":"V","…Ö":"V","Íù†":"VY","‚ìå":"W","Ôº∑":"W","·∫Ä":"W","·∫Ç":"W","≈¥":"W","·∫Ü":"W","·∫Ñ":"W","·∫à":"W","‚±≤":"W","‚ìç":"X","Ôº∏":"X","·∫ä":"X","·∫å":"X","‚ìé":"Y","Ôºπ":"Y","·ª≤":"Y","√ù":"Y","≈∂":"Y","·ª∏":"Y","»≤":"Y","·∫é":"Y","≈∏":"Y","·ª∂":"Y","·ª¥":"Y","∆≥":"Y","…é":"Y","·ªæ":"Y","‚ìè":"Z","Ôº∫":"Z","≈π":"Z","·∫ê":"Z","≈ª":"Z","≈Ω":"Z","·∫í":"Z","·∫î":"Z","∆µ":"Z","»§":"Z","‚±ø":"Z","‚±´":"Z","Íù¢":"Z","‚ìê":"a","ÔΩÅ":"a","·∫ö":"a","√†":"a","√°":"a","√¢":"a","·∫ß":"a","·∫•":"a","·∫´":"a","·∫©":"a","√£":"a","ƒÅ":"a","ƒÉ":"a","·∫±":"a","·∫Ø":"a","·∫µ":"a","·∫≥":"a","»ß":"a","«°":"a","√§":"a","«ü":"a","·∫£":"a","√•":"a","«ª":"a","«é":"a","»Å":"a","»É":"a","·∫°":"a","·∫≠":"a","·∫∑":"a","·∏Å":"a","ƒÖ":"a","‚±•":"a","…ê":"a","Íú≥":"aa","√¶":"ae","«Ω":"ae","«£":"ae","Íúµ":"ao","Íú∑":"au","Íúπ":"av","Íúª":"av","ÍúΩ":"ay","‚ìë":"b","ÔΩÇ":"b","·∏É":"b","·∏Ö":"b","·∏á":"b","∆Ä":"b","∆É":"b","…ì":"b","‚ìí":"c","ÔΩÉ":"c","ƒá":"c","ƒâ":"c","ƒã":"c","ƒç":"c","√ß":"c","·∏â":"c","∆à":"c","»º":"c","Íúø":"c","‚ÜÑ":"c","‚ìì":"d","ÔΩÑ":"d","·∏ã":"d","ƒè":"d","·∏ç":"d","·∏ë":"d","·∏ì":"d","·∏è":"d","ƒë":"d","∆å":"d","…ñ":"d","…ó":"d","Íù∫":"d","«≥":"dz","«Ü":"dz","‚ìî":"e","ÔΩÖ":"e","√®":"e","√©":"e","√™":"e","·ªÅ":"e","·∫ø":"e","·ªÖ":"e","·ªÉ":"e","·∫Ω":"e","ƒì":"e","·∏ï":"e","·∏ó":"e","ƒï":"e","ƒó":"e","√´":"e","·∫ª":"e","ƒõ":"e","»Ö":"e","»á":"e","·∫π":"e","·ªá":"e","»©":"e","·∏ù":"e","ƒô":"e","·∏ô":"e","·∏õ":"e","…á":"e","…õ":"e","«ù":"e","‚ìï":"f","ÔΩÜ":"f","·∏ü":"f","∆í":"f","Íùº":"f","‚ìñ":"g","ÔΩá":"g","«µ":"g","ƒù":"g","·∏°":"g","ƒü":"g","ƒ°":"g","«ß":"g","ƒ£":"g","«•":"g","…†":"g","Íû°":"g","·µπ":"g","Íùø":"g","‚ìó":"h","ÔΩà":"h","ƒ•":"h","·∏£":"h","·∏ß":"h","»ü":"h","·∏•":"h","·∏©":"h","·∏´":"h","·∫ñ":"h","ƒß":"h","‚±®":"h","‚±∂":"h","…•":"h","∆ï":"hv","‚ìò":"i","ÔΩâ":"i","√¨":"i","√≠":"i","√Æ":"i","ƒ©":"i","ƒ´":"i","ƒ≠":"i","√Ø":"i","·∏Ø":"i","·ªâ":"i","«ê":"i","»â":"i","»ã":"i","·ªã":"i","ƒØ":"i","·∏≠":"i","…®":"i","ƒ±":"i","‚ìô":"j","ÔΩä":"j","ƒµ":"j","«∞":"j","…â":"j","‚ìö":"k","ÔΩã":"k","·∏±":"k","«©":"k","·∏≥":"k","ƒ∑":"k","·∏µ":"k","∆ô":"k","‚±™":"k","ÍùÅ":"k","ÍùÉ":"k","ÍùÖ":"k","Íû£":"k","‚ìõ":"l","ÔΩå":"l","≈Ä":"l","ƒ∫":"l","ƒæ":"l","·∏∑":"l","·∏π":"l","ƒº":"l","·∏Ω":"l","·∏ª":"l","≈ø":"l","≈Ç":"l","∆ö":"l","…´":"l","‚±°":"l","Íùâ":"l","ÍûÅ":"l","Íùá":"l","«â":"lj","‚ìú":"m","ÔΩç":"m","·∏ø":"m","·πÅ":"m","·πÉ":"m","…±":"m","…Ø":"m","‚ìù":"n","ÔΩé":"n","«π":"n","≈Ñ":"n","√±":"n","·πÖ":"n","≈à":"n","·πá":"n","≈Ü":"n","·πã":"n","·πâ":"n","∆û":"n","…≤":"n","≈â":"n","Íûë":"n","Íû•":"n","«å":"nj","‚ìû":"o","ÔΩè":"o","√≤":"o","√≥":"o","√¥":"o","·ªì":"o","·ªë":"o","·ªó":"o","·ªï":"o","√µ":"o","·πç":"o","»≠":"o","·πè":"o","≈ç":"o","·πë":"o","·πì":"o","≈è":"o","»Ø":"o","»±":"o","√∂":"o","»´":"o","·ªè":"o","≈ë":"o","«í":"o","»ç":"o","»è":"o","∆°":"o","·ªù":"o","·ªõ":"o","·ª°":"o","·ªü":"o","·ª£":"o","·ªç":"o","·ªô":"o","«´":"o","«≠":"o","√∏":"o","«ø":"o","…î":"o","Íùã":"o","Íùç":"o","…µ":"o","∆£":"oi","»£":"ou","Íùè":"oo","‚ìü":"p","ÔΩê":"p","·πï":"p","·πó":"p","∆•":"p","·µΩ":"p","Íùë":"p","Íùì":"p","Íùï":"p","‚ì†":"q","ÔΩë":"q","…ã":"q","Íùó":"q","Íùô":"q","‚ì°":"r","ÔΩí":"r","≈ï":"r","·πô":"r","≈ô":"r","»ë":"r","»ì":"r","·πõ":"r","·πù":"r","≈ó":"r","·πü":"r","…ç":"r","…Ω":"r","Íùõ":"r","Íûß":"r","ÍûÉ":"r","‚ì¢":"s","ÔΩì":"s","√ü":"s","≈õ":"s","·π•":"s","≈ù":"s","·π°":"s","≈°":"s","·πß":"s","·π£":"s","·π©":"s","»ô":"s","≈ü":"s","»ø":"s","Íû©":"s","ÍûÖ":"s","·∫õ":"s","‚ì£":"t","ÔΩî":"t","·π´":"t","·∫ó":"t","≈•":"t","·π≠":"t","»õ":"t","≈£":"t","·π±":"t","·πØ":"t","≈ß":"t","∆≠":"t"," à":"t","‚±¶":"t","Íûá":"t","Íú©":"tz","‚ì§":"u","ÔΩï":"u","√π":"u","√∫":"u","√ª":"u","≈©":"u","·ππ":"u","≈´":"u","·πª":"u","≈≠":"u","√º":"u","«ú":"u","«ò":"u","«ñ":"u","«ö":"u","·ªß":"u","≈Ø":"u","≈±":"u","«î":"u","»ï":"u","»ó":"u","∆∞":"u","·ª´":"u","·ª©":"u","·ªØ":"u","·ª≠":"u","·ª±":"u","·ª•":"u","·π≥":"u","≈≥":"u","·π∑":"u","·πµ":"u"," â":"u","‚ì•":"v","ÔΩñ":"v","·πΩ":"v","·πø":"v"," ã":"v","Íùü":"v"," å":"v","Íù°":"vy","‚ì¶":"w","ÔΩó":"w","·∫Å":"w","·∫É":"w","≈µ":"w","·∫á":"w","·∫Ö":"w","·∫ò":"w","·∫â":"w","‚±≥":"w","‚ìß":"x","ÔΩò":"x","·∫ã":"x","·∫ç":"x","‚ì®":"y","ÔΩô":"y","·ª≥":"y","√Ω":"y","≈∑":"y","·ªπ":"y","»≥":"y","·∫è":"y","√ø":"y","·ª∑":"y","·∫ô":"y","·ªµ":"y","∆¥":"y","…è":"y","·ªø":"y","‚ì©":"z","ÔΩö":"z","≈∫":"z","·∫ë":"z","≈º":"z","≈æ":"z","·∫ì":"z","·∫ï":"z","∆∂":"z","»•":"z","…Ä":"z","‚±¨":"z","Íù£":"z","ŒÜ":"Œë","Œà":"Œï","Œâ":"Œó","Œä":"Œô","Œ™":"Œô","Œå":"Œü","Œé":"Œ•","Œ´":"Œ•","Œè":"Œ©","Œ¨":"Œ±","Œ≠":"Œµ","ŒÆ":"Œ∑","ŒØ":"Œπ","œä":"Œπ","Œê":"Œπ","œå":"Œø","œç":"œÖ","œã":"œÖ","Œ∞":"œÖ","œâ":"œâ","œÇ":"œÉ"},s=v(document),r=1,b=function(){return r++},e=O(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){var r,t,i,n,o=".select2-results",s=(this.opts=e=this.prepareOpts(e),this.id=e.id,e.element.data("select2")!==y&&null!==e.element.data("select2")&&e.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=v(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=v("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(v(document.body))),this.containerId="s2id_"+(e.element.attr("id")||"autogen"+b()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",e.element.attr("title")),this.body=v(document.body),_(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",e.element.attr("style")),this.container.css(D(e.containerCss,this.opts.element)),this.container.addClass(D(e.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",C),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),_(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(e.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",C),this.results=r=this.container.find(o),this.search=t=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",function(e){if(!e.target||!v(e.target).is(".select2-search-choice *"))return C(e)}),this.results.on("mousemove",function(e){var t=a;t!==y&&t.x===e.pageX&&t.y===e.pageY||v(e.target).trigger("mousemove-filtered",e)}),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),s=80,i=this.results,n=w(s,function(e){i.trigger("scroll-debounced",e)}),i.on("scroll",function(e){0<=d(e.target,i.get())&&n(e)}),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),v(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),v(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),v.fn.mousewheel&&r.mousewheel(function(e,t,i,n){var o=r.scrollTop();0<n&&o-n<=0?(r.scrollTop(0),C(e)):n<0&&r.get(0).scrollHeight-r.scrollTop()+n<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),C(e))}),g(t),t.on("keyup-change input paste",this.bind(this.updateResults)),t.on("focus",function(){t.addClass("select2-focused")}),t.on("blur",function(){t.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(e){0<v(e.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){var t=v.Event(e.type+".sortable");e.stopPropagation(),v(e.target).trigger(t)}),this.nextSearchTerm=y,v.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==e.maximumInputLength&&this.search.attr("maxlength",e.maximumInputLength),e.element.prop("disabled")),o=(this.enable(!(s=s===y?!1:s)),e.element.prop("readonly"));this.readonly(o=o===y?!1:o),m=m||((s=v("<div class='select2-measure-scrollbar'></div>")).appendTo(v(document.body)),o={width:s.width()-s[0].clientWidth,height:s.height()-s[0].clientHeight},s.remove(),o),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",e.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&i._sync&&e.each(function(){i._sync&&this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,t!==y&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),R.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:h(e.attr("locked"),"locked")||h(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(g){var t,e,a,m=this,l=g.element;if("select"===l.get(0).tagName.toLowerCase()&&(this.select=e=g.element),e&&v.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in g)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(g=v.extend({},{populateResults:function(e,t,d){var h=this.opts.id,p=this.liveRegion,f=function(e,t,i){for(var n,o,r,s,a,l=[],c=0,u=(e=g.sortResults(e,t,d)).length;c<u;c+=1)s=!(a=!0===(n=e[c]).disabled)&&h(n)!==y,o=n.children&&0<n.children.length,(r=v("<li></li>")).addClass("select2-results-dept-"+i),r.addClass("select2-result"),r.addClass(s?"select2-result-selectable":"select2-result-unselectable"),a&&r.addClass("select2-disabled"),o&&r.addClass("select2-result-with-children"),r.addClass(m.opts.formatResultCssClass(n)),r.attr("role","presentation"),(s=v(document.createElement("div"))).addClass("select2-result-label"),s.attr("id","select2-result-label-"+b()),s.attr("role","option"),(a=g.formatResult(n,s,d,m.opts.escapeMarkup))!==y&&(s.html(a),r.append(s)),o&&((a=v("<ul></ul>")).addClass("select2-result-sub"),f(n.children,a,i+1),r.append(a)),r.data("select2-data",n),l.push(r[0]);t.append(l),p.text(g.formatMatches(e.length))};f(t,e,0)}},v.fn.select2.defaults,g)).id&&(t=g.id,g.id=function(e){return e[t]}),v.isArray(g.element.data("select2Tags"))){if("tags"in g)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+g.element.attr("id");g.tags=g.element.data("select2Tags")}if(e?(a=e.hasClass("js-tree-select"),g.query=this.bind(function(n){var e,r,o,i={results:[],more:!1},s=n.term,t=l.children();this.getPlaceholder()!==y&&0<t.length&&(e=this.getPlaceholderOption())&&(t=t.not(e)),a?(o=function(e,i){e.forEach(function(e){var t;e.element.is("option")?(o(e.children,t=[]),n.matcher(s,e.element.text(),e.element)?i.push(v.extend(m.optionToData(e.element),{children:t})):0<t.length&&i.push(v.extend(m.optionToData(e.element),{disabled:!0,children:t}))):e.element.is("optgroup")&&(t=m.optionToData(e.element),o(e.children,t.children),0<t.children.length&&i.push(t))})})((r=function(e){var n=[],o=null;return e.each2(function(e,t){var i={element:v(t[0]),id:parseInt(t.data("id")),children:[]};t.is("option")?o&&o.id==parseInt(t.data("parent-id"))?o.children.push(i):(o=i,n.push(i)):t.is("optgroup")&&(i.children=r(t.children()),n.push(i),o=null)}),n})(t),i.results):(o=function(e,t){var i;e.is("option")?n.matcher(s,e.text(),e)&&t.push(m.optionToData(e)):e.is("optgroup")&&(i=m.optionToData(e),e.children().each2(function(e,t){o(t,i.children)}),0<i.children.length&&t.push(i))},t.each2(function(e,t){o(t,i.results)})),n.callback(i)}),g.id=function(e){return e.id}):"query"in g||("ajax"in g?((e=g.element.data("ajax-url"))&&0<e.length&&(g.ajax.url=e),g.query=x.call(g.element,g.ajax)):"data"in g?g.query=S(g.data):"tags"in g&&(g.query=T(g.tags),g.createSearchChoice===y&&(g.createSearchChoice=function(e){return{id:v.trim(e),text:v.trim(e)}}),g.initSelection===y&&(g.initSelection=function(e,t){var i=[];v(p(e.val(),g.separator,g.transformVal)).each(function(){var e={id:this,text:this},t=g.tags;v.isFunction(t)&&(t=t()),v(t).each(function(){if(h(this.id,e.id))return e=this,!1}),i.push(e)}),t(i)}))),"function"!=typeof g.query)throw"query function not defined for Select2 "+g.element.attr("id");if("top"===g.createSearchChoicePosition)g.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===g.createSearchChoicePosition)g.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof g.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return g},monitorSource:function(){var e,t=this.opts.element,i=this;t.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=t.prop("disabled"),e=(this.enable(!(e=e===y?!1:e)),t.prop("readonly"));this.readonly(e=e===y?!1:e),this.container&&(_(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(D(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(_(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(D(this.opts.dropdownCssClass,this.opts.element)))}),t.length&&t[0].attachEvent&&t.each(function(){this.attachEvent("onpropertychange",i._sync)}),(e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==y&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new e(function(e){v.each(e,i._sync)}),this.propertyObserver.observe(t.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){e=v.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(e),!e.isDefaultPrevented()},triggerChange:function(e){e=v.extend({},e=e||{},{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",!e),this.close(),this.enabledInterface=e,!0)},enable:function(e){this._enabled!==(e=e===y||e)&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){this._readonly!==(e=e!==y&&e)&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,t,i=this.dropdown,n=this.container,o=n.offset(),r=n.outerHeight(!1),s=n.outerWidth(!1),a=i.outerHeight(!1),l=v(window),c=l.width(),u=l.height(),d=l.scrollLeft()+c,u=l.scrollTop()+u,h=o.top+r,p=o.left,u=h+a<=u,f=o.top-a>=l.scrollTop(),g=i.outerWidth(!1);i.hasClass("select2-drop-above")?(e=!0,!f&&u&&(e=!(t=!0))):(e=!1,!u&&f&&(e=t=!0)),t&&(i.hide(),o=this.container.offset(),r=this.container.outerHeight(!1),s=this.container.outerWidth(!1),a=i.outerHeight(!1),d=l.scrollLeft()+c,l.scrollTop(),h=o.top+r,p=o.left,g=i.outerWidth(!1),i.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(u=v(".select2-results",i)[0],i.addClass("select2-drop-auto-width"),i.css("width",""),s<(g=i.outerWidth(!1)+(u.scrollHeight===u.clientHeight?0:m.width))?s=g:g=s,a=i.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(h-=(f=this.body.offset()).top,p-=f.left),t={left:p=!(p+g<=d)&&o.left+d+n.outerWidth(!1)>g?o.left+this.container.outerWidth(!1)-g:p,width:s},e?(t.top=o.top-a,t.bottom="auto",this.container.addClass("select2-drop-above"),i.addClass("select2-drop-above")):(t.top=h,t.bottom="auto",this.container.removeClass("select2-drop-above"),i.removeClass("select2-drop-above")),t=v.extend(t,D(this.opts.dropdownCss,this.opts.element)),i.css(t)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=v.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),s.on("mousemove.select2Event",function(e){a.x=e.pageX,a.y=e.pageY}),!0)},opening:function(){var i,e=this.containerEventName,t="scroll."+e,n="resize."+e,o="orientationchange."+e,r=(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(i=v("#select2-drop-mask")).length&&((i=v(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body),i.on("mousedown touchstart click",function(e){l(i);var t=v("#select2-drop");0<t.length&&((t=t.data("select2")).opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),v("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this);this.container.parents().add(window).each(function(){v(this).on(n+" "+t+" "+o,function(e){r.opened()&&r.positionDropdown()})})},close:function(){var e,t,i,n;this.opened()&&(e=this.containerEventName,t="scroll."+e,i="resize."+e,n="orientationchange."+e,this.container.parents().add(window).each(function(){v(this).off(t).off(i).off(n)}),this.clearDropdownAlignmentPreference(),v("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),s.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(v.Event("select2-close")))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return D(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,t,i,n,o=this.results,r=this.highlight();r<0||(0==r?o.scrollTop(0):(i=this.findHighlightableChoices().find(".select2-result-label"),t=(n=((e=v(i[r])).offset()||{}).top||0)+e.outerHeight(!0),r===i.length-1&&0<(r=o.find("li.select2-more-results")).length&&(t=r.offset().top+r.outerHeight(!0)),(i=o.offset().top+o.outerHeight(!1))<t&&o.scrollTop(o.scrollTop()+(t-i)),(r=n-o.offset().top)<0&&"none"!=e.css("display")&&o.scrollTop(o.scrollTop()+r)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var t=this.findHighlightableChoices(),i=this.highlight();-1<i&&i<t.length;){var n=v(t[i+=e]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var t=this.findHighlightableChoices();if(0===arguments.length)return d(t.filter(".select2-highlighted")[0],t.get());(e=e>=t.length?t.length-1:e)<0&&(e=0),this.removeHighlight(),(t=v(t[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",t.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(t.text()),(e=t.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var t,e=v(e.target).closest(".select2-result-selectable");0<e.length&&!e.is(".select2-highlighted")?(t=this.findHighlightableChoices(),this.highlight(t.index(e))):0==e.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,o=this,r=this.search.val(),s=this.context;0!==i.length&&i.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:n,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){o.opened()&&(o.opts.populateResults.call(this,t,e.results,{term:r,page:n,context:s}),o.postprocessResults(e,!1,!1),!0===e.more?(i.detach().appendTo(t).html(o.opts.escapeMarkup(D(o.opts.formatLoadMore,o.opts.element,n+1))),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):i.remove(),o.positionDropdown(),o.resultsPage=n,o.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})}))},tokenize:function(){},updateResults:function(i){var n=this.search,o=this.results,r=this.opts,s=this,e=n.val(),t=v.data(this.container,"select2-last-term");if((!0===i||!t||!h(e,t))&&(v.data(this.container,"select2-last-term",e),!0===i||!1!==this.showSearchInput&&this.opened())){var a=++this.queryCount,t=this.getMaximumSelectionSize();if(!(1<=t&&(e=this.data(),v.isArray(e)&&e.length>=t&&k(r.formatSelectionTooBig,"formatSelectionTooBig"))))return n.val().length<r.minimumInputLength?(k(r.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+D(r.formatInputTooShort,r.element,n.val(),r.minimumInputLength)+"</li>"):c(""),void(i&&this.showSearch&&this.showSearch(!0))):void(r.maximumInputLength&&n.val().length>r.maximumInputLength?k(r.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+D(r.formatInputTooLong,r.element,n.val(),r.maximumInputLength)+"</li>"):c(""):(r.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+D(r.formatSearching,r.element)+"</li>"),n.addClass("select2-active"),this.removeHighlight(),(e=this.tokenize())!=y&&null!=e&&n.val(e),this.resultsPage=1,r.query({element:r.element,term:n.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(e){var t;a==this.queryCount&&(this.opened()?e.hasError!==y&&k(r.formatAjaxError,"formatAjaxError")?c("<li class='select2-ajax-error'>"+D(r.formatAjaxError,r.element,e.jqXHR,e.textStatus,e.errorThrown)+"</li>"):(this.context=e.context===y?null:e.context,this.opts.createSearchChoice&&""!==n.val()&&(t=this.opts.createSearchChoice.call(s,n.val(),e.results))!==y&&null!==t&&s.id(t)!==y&&null!==s.id(t)&&0===v(e.results).filter(function(){return h(s.id(this),s.id(t))}).length&&this.opts.createSearchChoicePosition(e.results,t),0===e.results.length&&k(r.formatNoMatches,"formatNoMatches")?c("<li class='select2-no-results'>"+D(r.formatNoMatches,r.element,n.val())+"</li>"):(o.empty(),s.opts.populateResults.call(this,o,e.results,{term:n.val(),page:this.resultsPage,context:null}),!0===e.more&&k(r.formatLoadMore,"formatLoadMore")&&(o.append("<li class='select2-more-results'>"+r.escapeMarkup(D(r.formatLoadMore,r.element,this.resultsPage))+"</li>"),window.setTimeout(function(){s.loadMoreIfNeeded()},10)),this.postprocessResults(e,i),l(),this.opts.element.trigger({type:"select2-loaded",items:e}))):this.search.removeClass("select2-active"))})})));c("<li class='select2-selection-limit'>"+D(r.formatSelectionTooBig,r.element,t)+"</li>")}function l(){n.removeClass("select2-active"),s.positionDropdown(),o.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?s.liveRegion.text(o.text()):s.liveRegion.text(s.opts.formatMatches(o.find('.select2-result-selectable:not(".select2-selected")').length))}function c(e){o.html(e),l()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var i;(i=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var e=i[0],t=i.val().length;i.focus(),(0<e.offsetWidth||0<e.offsetHeight)&&e===document.activeElement&&(e.setSelectionRange?e.setSelectionRange(t,t):e.createTextRange&&((t=e.createTextRange()).collapse(!1),t.select()))},0)},selectHighlighted:function(e){var t,i;this._touchMoved?this.clearTouchMoved():(t=this.highlight(),(i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data"))?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close())},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==y?e.text():y)},getPlaceholderOption:function(){var e;if(this.select)return e=this.select.children("option").first(),this.opts.placeholderOption!==y?"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select):""===v.trim(e.text())&&""===e.val()?e:void 0},initContainerWidth:function(){var e=function(){var e,t,i,n,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return v.isFunction(this.opts.width)?this.opts.width():this.opts.width;if((e=this.opts.element.attr("style"))!==y)for(n=0,o=(t=e.split(";")).length;n<o;n+=1)if(null!==(i=t[n].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=i.length)return i[1];return"resolve"===this.opts.width?0<(e=this.opts.element.css("width")).indexOf("%")?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==e&&this.container.css("width",e)}}),t=O(e,{createContainer:function(){return v(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,t;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((t=e.createTextRange()).collapse(!1),t.select()):e.setSelectionRange&&(t=this.search.val().length,e.setSelectionRange(t,t))),""===this.search.val()&&this.nextSearchTerm!=y&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(v.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){v("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),R.call(this,"selection","focusser")},initContainer:function(){var t,e=this.container,i=this.dropdown,n=b(),n=(this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+n),this.focusser.attr("aria-labelledby","select2-chosen-"+n),this.results.attr("id","select2-results-"+n),this.search.attr("aria-owns","select2-results-"+n),this.focusser.attr("id","s2id_autogen"+n),e=v("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(e.text()).attr("for",this.focusser.attr("id")),this.opts.element.attr("title"));this.opts.element.attr("title",n||e.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(v("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which===c.PAGE_UP||e.which===c.PAGE_DOWN)C(e);else switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void C(e);case c.ENTER:return this.selectHighlighted(),void C(e);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(e),void C(e)}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.ESC){if(!1!==this.opts.openOnEnter||e.which!==c.ENTER)return e.which==c.DOWN||e.which==c.UP||e.which==c.ENTER&&this.opts.openOnEnter?e.altKey||e.ctrlKey||e.shiftKey||e.metaKey?void 0:(this.open(),void C(e)):void(e.which!=c.DELETE&&e.which!=c.BACKSPACE||(this.opts.allowClear&&this.clear(),C(e)));C(e)}})),g(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){0<=this.opts.minimumResultsForSearch&&(e.stopPropagation(),this.opened()||this.open())})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),(e=e).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(e){l(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),C(e)})),i.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){C(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(v.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var t,i=this.selection.data("select2-data");i&&(t=v.Event("select2-clearing"),this.opts.element.trigger(t),t.isDefaultPrevented()||(t=this.getPlaceholderOption(),this.opts.element.val(t?t.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))))},initSelection:function(){var t;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==y&&null!==e&&(t.updateSelection(e),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(e,t.search.val()))})},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==y&&((e=this.getPlaceholderOption())!==y&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===y||null===this.opts.element.val())},prepareOpts:function(){var s=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===s.element.get(0).tagName.toLowerCase()?s.initSelection=function(e,t){e=e.find("option").filter(function(){return this.selected&&!this.disabled});t(i.optionToData(e))}:"data"in s&&(s.initSelection=s.initSelection||function(e,t){var o=e.val(),r=null;s.query({matcher:function(e,t,i){var n=h(o,s.id(i));return n&&(r=i),n},callback:v.isFunction(t)?function(){t(r)}:v.noop})}),s},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===y?y:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();!this.isPlaceholderOptionSelected()||e===y||this.select&&this.getPlaceholderOption()===y||(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(e,t,i){var n=0,o=this;this.findHighlightableChoices().each2(function(e,t){if(h(o.id(t.data("select2-data")),o.opts.element.val()))return n=e,!1}),!1!==i&&(!0===t&&0<=n?this.highlight(n):this.highlight(0)),!0===t&&0<=(i=this.opts.minimumResultsForSearch)&&this.showSearch(function i(e){var n=0;return v.each(e,function(e,t){v(t.element).is("optgroup")?n+=i(t.children):(t.children&&t.children.length&&(n+=i(t.children)),n++)}),n}(e.results)>=i)},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),v(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(e,t){var i,n;this.triggerSelect(e)&&(i=this.opts.element.val(),n=this.data(),this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),h(i,this.id(e))||this.triggerChange({added:e,removed:n}))},updateSelection:function(e){var t,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),null!==e&&(t=this.opts.formatSelection(e,i,this.opts.escapeMarkup),i.prop("title",v(e.element).prop("title")||e.text)),t!==y&&i.append(t),(t=this.opts.formatSelectionCssClass(e,i))!==y&&i.addClass(t),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==y&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,i=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],1<arguments.length&&(t=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=n.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),t&&this.triggerChange({added:i,removed:o});else if(e||0===e){if(this.opts.initSelection===y)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),t&&n.triggerChange({added:e,removed:o})})}else this.clear(t)},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,i=!1;if(0===arguments.length)return t=(t=this.selection.data("select2-data"))==y?null:t;1<arguments.length&&(i=arguments[1]),e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:t})):this.clear(i)}}),i=O(e,{createContainer:function(){return v(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var l=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===l.element.get(0).tagName.toLowerCase()?l.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in l&&(l.initSelection=l.initSelection||function(e,r){var s=p(e.val(),l.separator,l.transformVal),a=[];l.query({matcher:function(e,t,i){var n=v.grep(s,function(e){return h(e,l.id(i))}).length;return n&&a.push(i),n},callback:v.isFunction(r)?function(){for(var e=[],t=0;t<s.length;t++)for(var i=s[t],n=0;n<a.length;n++){var o=a[n];if(h(i,l.id(o))){e.push(o),a.splice(n,1);break}}r(e)}:v.noop})}),l},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){v("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),R.call(this,"searchContainer","selection")},initContainer:function(){var l,e=".select2-choices",t=(this.searchContainer=this.container.find(".select2-search-field"),this.selection=l=this.container.find(e),this);this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){t.search[0].focus(),t.selectChoice(v(this))}),this.search.attr("id","s2id_autogen"+b()),this.search.prev().text(v("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||!this.isInterfaceEnabled()||this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t,i,n,o=l.find(".select2-search-choice-focus"),r=o.prev(".select2-search-choice:not(.select2-locked)"),s=o.next(".select2-search-choice:not(.select2-locked)"),a=(a=this.search,i=t=0,"selectionStart"in(a=v(a)[0])?(t=a.selectionStart,i=a.selectionEnd-t):"selection"in document&&(a.focus(),n=document.selection.createRange(),i=document.selection.createRange().text.length,n.moveStart("character",-a.value.length),t=n.text.length-i),{offset:t,length:i});if(o.length&&(e.which==c.LEFT||e.which==c.RIGHT||e.which==c.BACKSPACE||e.which==c.DELETE||e.which==c.ENTER))return n=o,e.which==c.LEFT&&r.length?n=r:e.which==c.RIGHT?n=s.length?s:null:e.which===c.BACKSPACE?this.unselect(o.first())&&(this.search.width(10),n=r.length?r:s):e.which==c.DELETE?this.unselect(o.first())&&(this.search.width(10),n=s.length?s:null):e.which==c.ENTER&&(n=null),this.selectChoice(n),C(e),void(n&&n.length||this.open());if((e.which===c.BACKSPACE&&1==this.keydowns||e.which==c.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(l.find(".select2-search-choice:not(.select2-locked)").last()),void C(e);if(this.selectChoice(null),this.opened())switch(e.which){case c.UP:case c.DOWN:return this.moveHighlight(e.which===c.UP?-1:1),void C(e);case c.ENTER:return this.selectHighlighted(),void C(e);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(e),void C(e)}if(e.which!==c.TAB&&!c.isControl(e)&&!c.isFunctionKey(e)&&e.which!==c.BACKSPACE&&e.which!==c.ESC){if(e.which===c.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==c.PAGE_UP&&e.which!==c.PAGE_DOWN||C(e),e.which===c.ENTER&&C(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(v.Event("select2-blur"))})),this.container.on("click",e,this.bind(function(e){!this.isInterfaceEnabled()||0<v(e.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault())})),this.container.on("focus",e,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(v.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var t;""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),!this.select&&""===this.opts.element.val()||(t=this).opts.initSelection.call(null,this.opts.element,function(e){e!==y&&null!==e&&(t.updateSelection(e),t.close(),t.clearSearch())})},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==y&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(0<t?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=y&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(v.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var t=[],i=[],n=this;v(e).each(function(){d(n.id(this),t)<0&&(t.push(n.id(this)),i.push(this))}),e=i,this.selection.find(".select2-search-choice").remove(),v(e).each(function(){n.addSelectedChoice(this)}),n.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=y&&(this.search.val(e),0<e.length&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),!this.opts.closeOnSelect&&0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=y&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var t=!e.locked,i=v("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),n=v("<li class='select2-search-choice select2-locked'><div></div></li>"),i=t?i:n,n=this.id(e),o=this.getVal(),r=this.opts.formatSelection(e,i.find("div"),this.opts.escapeMarkup);r!=y&&i.find("div").replaceWith(v("<div></div>").html(r)),(r=this.opts.formatSelectionCssClass(e,i.find("div")))!=y&&i.addClass(r),t&&i.find(".select2-search-choice-close").on("mousedown",C).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(v(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),C(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",e),i.insertBefore(this.searchContainer),o.push(n),this.setVal(o)},unselect:function(e){var t,i,n=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(t=e.data("select2-data")){var o=v.Event("select2-removing");if(o.val=this.id(t),o.choice=t,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;0<=(i=d(this.id(t),n));)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,t,i){var n=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),s=this;o.each2(function(e,t){0<=d(s.id(t.data("select2-data")),n)&&(t.is("optgroup")?(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected")):0<t.find(".select2-result-selectable").length?t.addClass("select2-disabled"):t.addClass("select2-selected"))}),r.each2(function(e,t){0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.is(".select2-result-selectable")&&!t.is(".select2-disabled")||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==i&&!0===this.opts.closeOnSelect&&s.highlight(0),!this.opts.createSearchChoice&&0<!o.filter(".select2-result:not(.select2-selected)").length&&(e&&(e.more||0!==this.results.find(".select2-no-results").length)||k(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+D(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>"))},getMaxSearchWidth:function(){return this.selection.width()-f(this.search)},resizeSearch:function(){var e,t,i,n=f(this.search);t=this.search,o||(i=t[0].currentStyle||window.getComputedStyle(t[0],null),(o=v(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),v(document.body).append(o)),o.text(t.val()),i=o.width()+10,t=this.search.offset().left,(t=(t=(t=(e=this.selection.width())-(t-this.selection.offset().left)-n)<i?e-n:t)<40?e-n:t)<=0&&(t=i),this.search.width(Math.floor(t))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:p(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(e){var t;this.select?this.select.val(e):(t=[],v(e).each(function(){d(this,t)<0&&t.push(this)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)h(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),0<i&&i--,e.splice(n,1),n--);return{added:t,removed:e}},val:function(e,i){var n,o=this;if(0===arguments.length)return this.getVal();if((n=this.data()).length||(n=[]),!e&&0!==e)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(e),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===y)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var t=v.map(e,o.id);o.setVal(t),o.updateSelection(e),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(n,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(t.opts.id(v(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,t){var i,n,o=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return v(this).data("select2-data")}).get();n=this.data(),i=v.map(e=e||[],function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),t&&this.triggerChange(this.buildChangeDetails(n,this.data()))}}),v.fn.select2=function(){var e,t,i,n,o=Array.prototype.slice.call(arguments,0),r=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],s=["opened","isFocused","container","dropdown"],a=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===o.length||"object"==typeof o[0])(t=0===o.length?{}:v.extend({},o[0])).element=v(this),"select"===t.element.get(0).tagName.toLowerCase()?n=t.element.prop("multiple"):(n=t.multiple||!1,"tags"in t&&(t.multiple=n=!0)),(e=new(n?window.Select2.class.multi:window.Select2.class.single)).init(t);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(d(o[0],r)<0)throw"Unknown method: "+o[0];if(i=y,(e=v(this).data("select2"))!==y)return t=o[0],i="container"===t?e.container:"dropdown"===t?e.dropdown:e[t=l[t]?l[t]:t].apply(e,o.slice(1)),!(0<=d(o[0],s)||0<=d(o[0],a)&&1==o.length)&&void 0}}),i===y?this:i},v.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var o=[];return A(this.text(e),i.term,o,n),o.join("")},transformVal:function(e){return v.trim(e)},formatSelection:function(e,t,i){return e?i(this.text(e)):y},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,t){return y},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==y?null:e.id},text:function(e){return e&&this.data&&this.data.text?v.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(e,t){return 0<=u(""+t).toUpperCase().indexOf(u(""+e).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(e,t,i,n){var o,r,s,a,l,c=e,u=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return y;for(;;){for(r=-1,s=0,a=n.tokenSeparators.length;s<a&&(l=n.tokenSeparators[s],!(0<=(r=e.indexOf(l))));s++);if(r<0)break;if(o=e.substring(0,r),e=e.substring(r+l.length),0<o.length&&(o=n.createSearchChoice.call(this,o,t))!==y&&null!==o&&n.id(o)!==y&&null!==n.id(o)){for(u=!1,s=0,a=t.length;s<a;s++)if(h(n.id(o),n.id(t[s]))){u=!0;break}u||i(o)}}return c!==e?e:void 0},escapeMarkup:E,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){return y},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(e.opts.minimumResultsForSearch<0)}},v.fn.select2.locales=[],v.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,i){return"Loading failed"},formatInputTooShort:function(e,t){t-=e.length;return"Please enter "+t+" or more character"+(1==t?"":"s")},formatInputTooLong:function(e,t){e=e.length-t;return"Please delete "+e+" character"+(1==e?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results‚Ä¶"},formatSearching:function(){return"Searching‚Ä¶"}},v.extend(v.fn.select2.defaults,v.fn.select2.locales.en),v.fn.select2.ajaxDefaults={transport:v.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:x,local:S,tags:T},util:{debounce:w,markMatch:A,escapeMarkup:E,stripDiacritics:u},class:{abstract:e,single:t,multi:i}})}(jQuery),EndlessScroll=function(){var n;function e(e,t){var i=this;this.options=$.extend({},n,t),this.firing=!0,this.fired=!1,this.fireSequence=0,this.didScroll=!1,this.isScrollable=!0,this.target=e,this.targetId="",this.content="",this.innerWrap=$(".endless_scroll_inner_wrap",this.target),this.options.data&&(this.options.content=this.options.data),$(e).scroll(function(){return i.didScroll=!0,i.target=e,i.targetId=$(i.target).attr("id")})}return e.name="EndlessScroll",n={bottomPixels:50,fireOnce:!0,fireDelay:150,loader:"Loading...",content:"",insertAfter:"div:last",intervalFrequency:250,resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1}},e.prototype.run=function(){var e=this;return setInterval(function(){if(e.shouldTryFiring()&&(e.didScroll=!1,!e.ceaseFireWhenNecessary()))return e.shouldBeFiring()?(e.resetFireSequenceWhenNecessary(),e.acknowledgeFiring(),e.insertLoader(),e.hasContent()&&(e.showContent(),e.fireCallback(),e.delayFireingWhenNecessary()),e.removeLoader()):void 0},this.options.intervalFrequency)},e.prototype.shouldTryFiring=function(){return this.didScroll&&!0===this.firing},e.prototype.ceaseFireWhenNecessary=function(){return!!this.options.ceaseFire.apply(this.target,[this.fireSequence])&&!(this.firing=!1)},e.prototype.wrapContainer=function(){if(0===this.innerWrap.length)return this.innerWrap=$(this.target).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")},e.prototype.isScrollableOrNot=function(){return this.target===document||this.target===window?this.isScrollable=$(document).height()-$(window).height()<=$(window).scrollTop()+this.options.bottomPixels:(this.wrapContainer(),this.isScrollable=0<this.innerWrap.length&&this.innerWrap.height()-$(this.target).height()<=$(this.target).scrollTop()+this.options.bottomPixels)},e.prototype.shouldBeFiring=function(){return this.isScrollableOrNot(),this.isScrollable&&(!1===this.options.fireOnce||!0===this.options.fireOnce&&!0!==this.fired)},e.prototype.resetFireSequenceWhenNecessary=function(){if(!0===this.options.resetCounter.apply(this.target))return this.fireSequence=0},e.prototype.acknowledgeFiring=function(){return this.fired=!0,this.fireSequence++},e.prototype.insertLoader=function(){return $(this.options.insertAfter).after('<div class="endless_scroll_loader_'+this.targetId+' endless_scroll_loader">'+this.options.loader+"</div>")},e.prototype.removeLoader=function(){return $(".endless_scroll_loader_"+this.targetId).fadeOut(function(){return $(this).remove()})},e.prototype.hasContent=function(){return"function"==typeof this.options.content?this.content=this.options.content.apply(this.target,[this.fireSequence]):this.content=this.options.content,!1!==this.content},e.prototype.showContent=function(){return $(this.options.insertAfter).after('<div id="endless_scroll_content">'+this.content+"</div>"),$("#endless_scroll_content").hide().fadeIn(250,function(){return $(this).removeAttr("id")})},e.prototype.fireCallback=function(){return this.options.callback.apply(this.target,[this.fireSequence])},e.prototype.delayFireingWhenNecessary=function(){var e=this;return 0<this.options.fireDelay?($("body").after('<div id="endless_scroll_marker"></div>'),$("#endless_scroll_marker").fadeTo(this.options.fireDelay,1,function(){return $("#endless_scroll_marker").remove(),e.fired=!1})):this.fired=!1},e}(),jQuery.fn.endlessScroll=function(e){return new EndlessScroll(this,e).run()},!function(s){function t(t){var i;return o.forEach(function(e){e.id===t&&(i=e)}),i}function i(t){t.form.find("input, select, textarea").on("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty",function(e){t.checkValues(e)}),t.form.on("dirty",function(){t.options.onDirty()}),t.form.on("clean",function(){t.options.onClean()})}function n(e,t){this.form=e,this.isDirty=!1,this.options=t,this.history=[r,r],this.id=s(e).attr("id"),o.push(this)}var o=[],r="clean",a="dirtyInitialValue",l="isDirty";n.prototype={init:function(){this.saveInitialValues(),this.setEvents()},statuses:{dirty:"dirty",clean:r,dataInitialValue:a,dataIsDirty:l},isRadioOrCheckbox:function(e){return s(e).is(":radio, :checkbox")},isFileInput:function(e){return s(e).is(":file")},saveInitialValues:function(){var o=this;this.form.find("input, select, textarea").each(function(e,t){var i=o.isRadioOrCheckbox(t),n=o.isFileInput(t);i?(i=s(t).is(":checked")?"checked":"unchecked",s(t).data(a,i)):n?s(t).data(a,JSON.stringify(t.files)):s(t).data(a,s(t).val()||"")})},refreshEvents:function(){var e;(e=this).form.find("input, select, textarea").off("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty"),e.form.off("dirty"),e.form.off("clean"),i(this)},showDirtyFields:function(){return this.form.find("input, select, textarea").filter(function(e,t){return s(t).data(l)})},setEvents:function(){var t;(t=this).form.on("submit",function(){t.submitting=!0}),t.options.preventLeaving&&s(window).on("beforeunload",function(e){if(t.isDirty&&!t.submitting)return e.preventDefault(),t.options.leavingMessage}),i(this)},isFieldDirty:function(e){var t=e.data(a),e=(null==t&&(t=""),e.val()),i=(null==e&&(e=""),/^(true|false)$/i);return i.test(t)&&i.test(e)?!new RegExp("^"+t+"$","i").test(e):e!==t},isFileInputDirty:function(e){var t=e.data(a),e=e[0];return JSON.stringify(e.files)!==t},isCheckboxDirty:function(e){return e.data(a)!==(e.is(":checked")?"checked":"unchecked")},checkValues:function(e){var o=this,r=!1;this.form.find("input, select, textarea").each(function(e,t){var i=o.isRadioOrCheckbox(t),n=o.isFileInput(t),t=s(t),i=i?o.isCheckboxDirty(t):n?o.isFileInputDirty(t):o.isFieldDirty(t);t.data(l,i),r|=i}),r?o.setDirty():o.setClean()},setDirty:function(){this.isDirty=!0,this.history[0]=this.history[1],this.history[1]="dirty",(this.options.fireEventsOnEachChange||this.wasJustClean())&&this.form.trigger("dirty")},setClean:function(){this.isDirty=!1,this.history[0]=this.history[1],this.history[1]=r,(this.options.fireEventsOnEachChange||this.wasJustDirty())&&this.form.trigger("clean")},wasJustDirty:function(){return"dirty"===this.history[0]},wasJustClean:function(){return this.history[0]===r},setAsClean:function(){this.saveInitialValues(),this.setClean()},setAsDirty:function(){this.saveInitialValues(),this.setDirty()},resetForm:function(){var r=this;this.form.find("input, select, textarea").each(function(e,t){var i=s(t),n=r.isRadioOrCheckbox(t),o=r.isFileInput(t);n&&(n=i.data(a),i.prop("checked","checked"===n)),o?(t.value="",s(t).data(a,JSON.stringify(t.files))):(n=i.data(a),i.val(n))}),this.checkValues()}},s.fn.dirty=function(i){if("string"!=typeof i)return this.each(function(e,t){i=s.extend({},s.fn.dirty.defaults,i),new n(s(t),i).init()});var e=t(s(this).attr("id"));if(!e)return null;if(!/^(isDirty|isClean|refreshEvents|resetForm|setAsClean|setAsDirty|showDirtyFields)$/i.test(i))return e[i].apply(e,Array.prototype.slice.call(arguments,1));switch(i.toLowerCase()){case"isclean":return!e.isDirty;case"isdirty":return e.isDirty;case"refreshevents":return e.refreshEvents();case"resetform":return e.resetForm();case"setasclean":return e.setAsClean();case"setasdirty":return e.setAsDirty();case"showdirtyfields":return e.showDirtyFields()}},s.fn.dirty.singleton=t,s.fn.dirty.defaults={preventLeaving:!1,leavingMessage:"There are unsaved changes on this page which will be discarded if you continue.",onDirty:s.noop,onClean:s.noop,fireEventsOnEachChange:!1},s.fn.dirty.extend=function(e){s.extend(n.prototype,e)},s.fn.dirty.constructor=n,s.fn.dirty.prototype=n.prototype}(jQuery),!function(o){"use strict";function n(e){o(e).on("click.bs.dropdown",this.toggle)}var r='[data-toggle="dropdown"]';function s(e){var t=e.attr("data-target"),t="#"!==(t=t||(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""))?o(document).find(t):null;return t&&t.length?t:e.parent()}function a(n){n&&3===n.which||n.preventDropdownClose||(o(".dropdown-backdrop").remove(),o(r).each(function(){var e=o(this),t=s(e),i={relatedTarget:this};!t.hasClass("open")||n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&o.contains(t[0],n.target)||(t.trigger(n=o.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),t.removeClass("open").trigger(o.Event("hidden.bs.dropdown",i))))}))}n.VERSION="3.4.1",n.prototype.toggle=function(e){var t=o(this);if(!t.is(".disabled, :disabled")){var i=s(t),n=i.hasClass("open");if(a(e),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&o(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(o(this)).on("click",a);n={relatedTarget:this};if(i.trigger(e=o.Event("show.bs.dropdown",n)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(o.Event("shown.bs.dropdown",n))}return!1}},n.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=o(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var i=s(t),n=i.hasClass("open");if(!n&&27!=e.which||n&&27==e.which)return 27==e.which&&i.find(r).trigger("focus"),t.trigger("click");n=i.find(".dropdown-menu li:not(.disabled):visible a");n.length&&(t=n.index(e.target),38==e.which&&0<t&&t--,40==e.which&&t<n.length-1&&t++,n.eq(t=~t?t:0).trigger("focus"))}}};var e=o.fn.dropdown;o.fn.dropdown=function(i){return this.each(function(){var e=o(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new n(this)),"string"==typeof i&&t[i].call(e)})},o.fn.dropdown.Constructor=n,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=e,this},o(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,n.prototype.toggle).on("keydown.bs.dropdown.data-api",r,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),!function(r){"use strict";function s(e,t){this.options=t,this.$body=r(document.body),this.$element=r(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,r.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}function a(n,o){return this.each(function(){var e=r(this),t=e.data("bs.modal"),i=r.extend({},s.DEFAULTS,e.data(),"object"==typeof n&&n);t||e.data("bs.modal",t=new s(this,i)),"string"==typeof n?t[n](o):i.show&&t.show(o)})}s.VERSION="3.4.1",s.TRANSITION_DURATION=300,s.BACKDROP_TRANSITION_DURATION=150,s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},s.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},s.prototype.show=function(i){var n=this,e=r.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',r.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){r(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=r.support.transition&&n.$element.hasClass("fade"),t=(n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),e&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus(),r.Event("shown.bs.modal",{relatedTarget:i}));e?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(s.TRANSITION_DURATION):n.$element.trigger("focus").trigger(t)}))},s.prototype.hide=function(e){e&&e.preventDefault(),e=r.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),r(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),r.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",r.proxy(this.hideModal,this)).emulateTransitionEnd(s.TRANSITION_DURATION):this.hideModal())},s.prototype.enforceFocus=function(){r(document).off("focusin.bs.modal").on("focusin.bs.modal",r.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},s.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",r.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},s.prototype.resize=function(){this.isShown?r(window).on("resize.bs.modal",r.proxy(this.handleUpdate,this)):r(window).off("resize.bs.modal")},s.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},s.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},s.prototype.backdrop=function(e){var t,i=this,n=this.$element.hasClass("fade")?"fade":"";this.isShown&&this.options.backdrop?(t=r.support.transition&&n,this.$backdrop=r(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",r.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),this.$backdrop.on("click.dismiss.bs.modal",r.proxy(function(e){this.hide.call(this)},this)),t&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e&&(t?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):e())):!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),n=function(){i.removeBackdrop(),e&&e()},r.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):n()):e&&e()},s.prototype.handleUpdate=function(){this.adjustDialog()},s.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},s.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},s.prototype.checkScrollbar=function(){var e,t=window.innerWidth;t||(t=(e=document.documentElement.getBoundingClientRect()).right-Math.abs(e.left)),this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},s.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10),o=(this.originalBodyPad=document.body.style.paddingRight||"",this.scrollbarWidth);this.bodyIsOverflowing&&(this.$body.css("padding-right",e+o),r(this.fixedContent).each(function(e,t){var i=t.style.paddingRight,n=r(t).css("padding-right");r(t).data("padding-right",i).css("padding-right",parseFloat(n)+o+"px")}))},s.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),r(this.fixedContent).each(function(e,t){var i=r(t).data("padding-right");r(t).removeData("padding-right"),t.style.paddingRight=i||""})},s.prototype.measureScrollbar=function(){var e=document.createElement("div"),t=(e.className="modal-scrollbar-measure",this.$body.append(e),e.offsetWidth-e.clientWidth);return this.$body[0].removeChild(e),t};var e=r.fn.modal;r.fn.modal=a,r.fn.modal.Constructor=s,r.fn.modal.noConflict=function(){return r.fn.modal=e,this},r(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=r(this),i=t.attr("href"),n=t.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""),o=r(document).find(n),n=o.data("bs.modal")?"toggle":r.extend({remote:!/#/.test(i)&&i},o.data(),t.data());t.is("a")&&e.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),a.call(o,n,this)})}(jQuery),!function(p){"use strict";var n=["sanitize","whiteList","sanitizeFn"],f=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],e={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},g=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,m=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function o(e,t,i){if(0===e.length)return e;if(i&&"function"==typeof i)return i(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;for(var i=document.implementation.createHTMLDocument("sanitization"),n=(i.body.innerHTML=e,p.map(t,function(e,t){return t})),o=p(i.body).find("*"),r=0,s=o.length;r<s;r++){var a=o[r],l=a.nodeName.toLowerCase();if(-1===p.inArray(l,n))a.parentNode.removeChild(a);else for(var c=p.map(a.attributes,function(e){return e}),u=[].concat(t["*"]||[],t[l]||[]),d=0,h=c.length;d<h;d++)!function(e,t){var i=e.nodeName.toLowerCase();if(-1!==p.inArray(i,t))return-1===p.inArray(i,f)||Boolean(e.nodeValue.match(g)||e.nodeValue.match(m));for(var n=p(t).filter(function(e,t){return t instanceof RegExp}),o=0,r=n.length;o<r;o++)if(i.match(n[o]))return 1}(c[d],u)&&a.removeAttribute(c[d].nodeName)}return i.body.innerHTML}function l(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)}l.VERSION="3.4.1",l.TRANSITION_DURATION=150,l.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:e},l.prototype.init=function(e,t,i){if(this.enabled=!0,this.type=e,this.$element=p(t),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&p(document).find(p.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),o=n.length;o--;){var r,s=n[o];"click"==s?this.$element.on("click."+this.type,this.options.selector,p.proxy(this.toggle,this)):"manual"!=s&&(r="hover"==s?"mouseleave":"focusout",this.$element.on(("hover"==s?"mouseenter":"focusin")+"."+this.type,this.options.selector,p.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,p.proxy(this.leave,this)))}this.options.selector?this._options=p.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},l.prototype.getDefaults=function(){return l.DEFAULTS},l.prototype.getOptions=function(e){var t,i=this.$element.data();for(t in i)i.hasOwnProperty(t)&&-1!==p.inArray(t,n)&&delete i[t];return(e=p.extend({},this.getDefaults(),i,e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e.sanitize&&(e.template=o(e.template,e.whiteList,e.sanitizeFn)),e},l.prototype.getDelegateOptions=function(){var i={},n=this.getDefaults();return this._options&&p.each(this._options,function(e,t){n[e]!=t&&(i[e]=t)}),i},l.prototype.enter=function(e){var t=e instanceof this.constructor?e:p(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),p(e.currentTarget).data("bs."+this.type,t)),e instanceof p.Event&&(t.inState["focusin"==e.type?"focus":"hover"]=!0),t.tip().hasClass("in")||"in"==t.hoverState)t.hoverState="in";else{if(clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)}},l.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},l.prototype.leave=function(e){var t=e instanceof this.constructor?e:p(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),p(e.currentTarget).data("bs."+this.type,t)),e instanceof p.Event&&(t.inState["focusout"==e.type?"focus":"hover"]=!1),!t.isInStateTrue()){if(clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)}},l.prototype.show=function(){var t,e,i,n,o,r,s,a=p.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(a),o=p.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),!a.isDefaultPrevented()&&o&&(a=(t=this).tip(),o=this.getUID(this.type),this.setContent(),a.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&a.addClass("fade"),a.detach().css({top:0,left:0,display:"block"}).data("bs."+this.type,this),this.options.container?a.appendTo(p(document).find(this.options.container)):a.insertAfter(this.$element),o="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,(s=(e=/\s?auto?\s?/i).test(o))&&(o=o.replace(e,"")||"top"),a.addClass(o),this.$element.trigger("inserted.bs."+this.type),e=this.getPosition(),i=a[0].offsetWidth,n=a[0].offsetHeight,s&&(s=o,r=this.getPosition(this.$viewport),o="bottom"==o&&e.bottom+n>r.bottom?"top":"top"==o&&e.top-n<r.top?"bottom":"right"==o&&e.right+i>r.width?"left":"left"==o&&e.left-i<r.left?"right":o,a.removeClass(s).addClass(o)),r=this.getCalculatedOffset(o,e,i,n),this.applyPlacement(r,o),s=function(){var e=t.hoverState;t.$element.trigger("shown.bs."+t.type),t.hoverState=null,"out"==e&&t.leave(t)},p.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",s).emulateTransitionEnd(l.TRANSITION_DURATION):s()))},l.prototype.applyPlacement=function(e,t){var i=this.tip(),n=i[0].offsetWidth,o=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10),r=(isNaN(r)&&(r=0),isNaN(s)&&(s=0),e.top+=r,e.left+=s,p.offset.setOffset(i[0],p.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),i.addClass("in"),i[0].offsetWidth),s=i[0].offsetHeight,a=("top"==t&&s!=o&&(e.top=e.top+o-s),this.getViewportAdjustedDelta(t,e,r,s)),t=(a.left?e.left+=a.left:e.top+=a.top,/top|bottom/.test(t)),n=t?2*a.left-n+r:2*a.top-o+s,r=t?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(n,i[0][r],t)},l.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},l.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();this.options.html?(this.options.sanitize&&(t=o(t,this.options.whiteList,this.options.sanitizeFn)),e.find(".tooltip-inner").html(t)):e.find(".tooltip-inner").text(t),e.removeClass("fade in top bottom left right")},l.prototype.hide=function(e){var t=this,i=p(this.$tip),n=p.Event("hide.bs."+this.type);function o(){"in"!=t.hoverState&&i.detach(),t.$element&&t.$element.removeAttr("aria-describedby").trigger("hidden.bs."+t.type),e&&e()}if(this.$element.trigger(n),!n.isDefaultPrevented())return i.removeClass("in"),p.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(l.TRANSITION_DURATION):o(),this.hoverState=null,this},l.prototype.fixTitle=function(){var e=this.$element;!e.attr("title")&&"string"==typeof e.attr("data-original-title")||e.attr("data-original-title",e.attr("title")||"").attr("title","")},l.prototype.hasContent=function(){return this.getTitle()},l.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],i="BODY"==t.tagName,n=t.getBoundingClientRect(),t=(null==n.width&&(n=p.extend({},n,{width:n.right-n.left,height:n.bottom-n.top})),window.SVGElement&&t instanceof window.SVGElement),t=i?{top:0,left:0}:t?null:e.offset(),e={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},i=i?{width:p(window).width(),height:p(window).height()}:null;return p.extend({},n,e,i,t)},l.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},l.prototype.getViewportAdjustedDelta=function(e,t,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);return/right|left/.test(e)?(e=t.top-r-s.scroll,n=t.top+r-s.scroll+n,e<s.top?o.top=s.top-e:n>s.top+s.height&&(o.top=s.top+s.height-n)):(e=t.left-r,n=t.left+r+i,e<s.left?o.left=s.left-e:n>s.right&&(o.left=s.left+s.width-n)),o},l.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},l.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},l.prototype.tip=function(){if(this.$tip||(this.$tip=p(this.options.template),1==this.$tip.length))return this.$tip;throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")},l.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},l.prototype.enable=function(){this.enabled=!0},l.prototype.disable=function(){this.enabled=!1},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled},l.prototype.toggle=function(e){var t=this;e&&!(t=p(e.currentTarget).data("bs."+this.type))&&(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),p(e.currentTarget).data("bs."+this.type,t)),e?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(t):t.leave(t)):t.tip().hasClass("in")?t.leave(t):t.enter(t)},l.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})},l.prototype.sanitizeHtml=function(e){return o(e,this.options.whiteList,this.options.sanitizeFn)};var t=p.fn.bsTooltip;p.fn.bsTooltip=function(n){return this.each(function(){var e=p(this),t=e.data("bs.tooltip"),i="object"==typeof n&&n;!t&&/destroy|hide/.test(n)||(t||e.data("bs.tooltip",t=new l(this,i)),"string"==typeof n&&t[n]())})},p.fn.bsTooltip.Constructor=l,p.fn.bsTooltip.noConflict=function(){return p.fn.bsTooltip=t,this}}(jQuery),!function(o){"use strict";function r(e,t){this.init("popover",e,t)}if(!o.fn.bsTooltip)throw new Error("Popover requires bootstrap-tooltip.js");r.VERSION="3.4.1",r.DEFAULTS=o.extend({},o.fn.bsTooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((r.prototype=o.extend({},o.fn.bsTooltip.Constructor.prototype)).constructor=r).prototype.getDefaults=function(){return r.DEFAULTS},r.prototype.setContent=function(){var e,t=this.tip(),i=this.getTitle(),n=this.getContent();this.options.html?(e=typeof n,this.options.sanitize&&(i=this.sanitizeHtml(i),"string"==e&&(n=this.sanitizeHtml(n))),t.find(".popover-title").html(i),t.find(".popover-content").children().detach().end()["string"==e?"html":"append"](n)):(t.find(".popover-title").text(i),t.find(".popover-content").children().detach().end().text(n)),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},r.prototype.hasContent=function(){return this.getTitle()||this.getContent()},r.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},r.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var e=o.fn.popover;o.fn.popover=function(n){return this.each(function(){var e=o(this),t=e.data("bs.popover"),i="object"==typeof n&&n;!t&&/destroy|hide/.test(n)||(t||e.data("bs.popover",t=new r(this,i)),"string"==typeof n&&t[n]())})},o.fn.popover.Constructor=r,o.fn.popover.noConflict=function(){return o.fn.popover=e,this}}(jQuery),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):jQuery&&!jQuery.fn.colorpicker&&e(jQuery)}(function(c){"use strict";function r(e,t,i,n,o){this.fallbackValue=i?"string"==typeof i?this.parse(i):i:null,this.fallbackFormat=n||"rgba",this.hexNumberSignPrefix=!0===o,this.value=this.fallbackValue,this.origFormat=null,this.predefinedColors=t||{},this.colors=c.extend({},r.webColors,this.predefinedColors),e&&(void 0!==e.h?this.value=e:this.setColor(String(e))),this.value||(this.value={h:0,s:0,b:0,a:1})}function s(e,t){this.element=c(e).addClass("colorpicker-element"),this.options=c.extend(!0,{},o,this.element.data(),t),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&c(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=this.createColor(!1!==this.options.color?this.options.color:this.getValue()),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,!1!==this.options.color&&(this.updateInput(this.color),this.updateData(this.color)),this.disabled=!1;var i,n,e=this.picker=c(this.options.template);this.options.customClass&&e.addClass(this.options.customClass),this.options.inline?e.addClass("colorpicker-inline colorpicker-visible"):e.addClass("colorpicker-hidden"),this.options.horizontal&&e.addClass("colorpicker-horizontal"),-1===["rgba","hsla","alias"].indexOf(this.format)&&!1!==this.options.format&&"transparent"!==this.getValue()||e.addClass("colorpicker-with-alpha"),"right"===this.options.align&&e.addClass("colorpicker-right"),!0===this.options.inline&&e.addClass("colorpicker-no-arrow"),this.options.colorSelectors&&0<(n=(i=this).picker.find(".colorpicker-selectors")).length&&(c.each(this.options.colorSelectors,function(e,t){t=c("<i />").addClass("colorpicker-selectors-color").css("background-color",t).data("class",e).data("alias",e);t.on("mousedown.colorpicker touchstart.colorpicker",function(e){e.preventDefault(),i.setValue("alias"===i.format?c(this).data("alias"):c(this).css("background-color"))}),n.append(t)}),n.show().addClass("colorpicker-visible")),e.on("mousedown.colorpicker touchstart.colorpicker",c.proxy(function(e){e.target===e.currentTarget&&e.preventDefault()},this)),e.find(".colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha").on("mousedown.colorpicker touchstart.colorpicker",c.proxy(this.mousedown,this)),e.appendTo(this.container||c("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":c.proxy(this.keyup,this)}),this.input.on({"input.colorpicker":c.proxy(this.change,this)}),!1===this.component&&this.element.on({"focus.colorpicker":c.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":c.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":c.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":c.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":c.proxy(this.show,this),"focus.colorpicker":c.proxy(this.show,this)}),this.update(),c(c.proxy(function(){this.element.trigger("create")},this))}r.webColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"transparent"};var o={horizontal:!(r.prototype={constructor:r,colors:{},predefinedColors:{},getValue:function(){return this.value},setValue:function(e){this.value=e},_sanitizeNumber:function(e){return"number"==typeof e?e:isNaN(e)||null===e||""===e||void 0===e?1:""===e?0:void 0!==e.toLowerCase?(e.match(/^\./)&&(e="0"+e),Math.ceil(100*parseFloat(e))/100):1},isTransparent:function(e){return!(!e||!("string"==typeof e||e instanceof String))&&("transparent"===(e=e.toLowerCase().trim())||e.match(/#?00000000/)||e.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(e){return 0===e.r&&0===e.g&&0===e.b&&0===e.a},setColor:function(e){if(e=e.toLowerCase().trim()){if(this.isTransparent(e))return this.value={h:0,s:0,b:0,a:0},!0;e=this.parse(e);e?(this.value=this.value={h:e.h,s:e.s,b:e.b,a:e.a},this.origFormat||(this.origFormat=e.format)):this.fallbackValue&&(this.value=this.fallbackValue)}return!1},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=Math.round(parseInt(100*(1-e),10)/100*100)/100},toRGB:function(e,t,i,n){var o,r,s;return 0===arguments.length&&(e=this.value.h,t=this.value.s,i=this.value.b,n=this.value.a),e=(e*=360)%360/60,o=r=t=i-(i=i*t),o+=[i,s=i*(1-Math.abs(e%2-1)),0,0,s,i][e=~~e],r+=[s,i,i,s,0,0][e],t+=[0,0,s,i,i,s][e],{r:Math.round(255*o),g:Math.round(255*r),b:Math.round(255*t),a:n}},toHex:function(e,t,i,n,o){arguments.length<=1&&(t=this.value.h,i=this.value.s,n=this.value.b,o=this.value.a);var r="#",t=this.toRGB(t,i,n,o);return this.rgbaIsTransparent(t)?"transparent":(r=e?r:this.hexNumberSignPrefix?"#":"")+((1<<24)+(parseInt(t.r)<<16)+(parseInt(t.g)<<8)+parseInt(t.b)).toString(16).slice(1)},toHSL:function(e,t,i,n){0===arguments.length&&(e=this.value.h,t=this.value.s,i=this.value.b,n=this.value.a);var o=(2-t)*i,t=t*i;return t/=0<o&&o<=1?o:2-o,o/=2,1<t&&(t=1),{h:isNaN(e)?0:e,s:isNaN(t)?0:t,l:isNaN(o)?0:o,a:isNaN(n)?0:n}},toAlias:function(e,t,i,n){var o,r,s=0===arguments.length?this.toHex(!0):this.toHex(!0,e,t,i,n),a="alias"===this.origFormat?s:this.toString(!1,this.origFormat);for(r in this.colors)if((o=this.colors[r].toLowerCase().trim())===s||o===a)return r;return!1},RGBtoHSB:function(e,t,i,n){var o,r,s;return e/=255,t/=255,i/=255,o=0==(s=(r=Math.max(e,t,i))-Math.min(e,t,i))?0:s/r,{h:this._sanitizeNumber(((0==s?null:r===e?(t-i)/s:r===t?(i-e)/s+2:(e-t)/s+4)+360)%6*60/360),s:o,b:r,a:this._sanitizeNumber(n)}},HueToRGB:function(e,t,i){return i<0?i+=1:1<i&&--i,6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e},HSLtoRGB:function(e,t,i,n){t<0&&(t=0);var t=2*i-(i=i<=.5?i*(1+t):i+t-i*t),o=e,r=e-1/3;return[Math.round(255*this.HueToRGB(t,i,e+1/3)),Math.round(255*this.HueToRGB(t,i,o)),Math.round(255*this.HueToRGB(t,i,r)),this._sanitizeNumber(n)]},parse:function(n){if("string"!=typeof n)return this.fallbackValue;if(0===arguments.length)return!1;var o,r,s=this,a=!1,l=void 0!==this.colors[n];return l&&(n=this.colors[n].toLowerCase().trim()),c.each(this.stringParsers,function(e,t){var i=t.re.exec(n);return!(o=i&&t.parse.apply(s,[i]))||(a={},r=l?"alias":t.format||s.getValidFallbackFormat(),(a=r.match(/hsla?/)?s.RGBtoHSB.apply(s,s.HSLtoRGB.apply(s,o)):s.RGBtoHSB.apply(s,o))instanceof Object&&(a.format=r),!1)}),a},getValidFallbackFormat:function(){var e=["rgba","rgb","hex","hsla","hsl"];return this.origFormat&&-1!==e.indexOf(this.origFormat)?this.origFormat:this.fallbackFormat&&-1!==e.indexOf(this.fallbackFormat)?this.fallbackFormat:"rgba"},toString:function(e,t,i){i=i||!1;var n=!1;switch(t=t||this.origFormat||this.fallbackFormat){case"rgb":return n=this.toRGB(),this.rgbaIsTransparent(n)?"transparent":"rgb("+n.r+","+n.g+","+n.b+")";case"rgba":return"rgba("+(n=this.toRGB()).r+","+n.g+","+n.b+","+n.a+")";case"hsl":return n=this.toHSL(),"hsl("+Math.round(360*n.h)+","+Math.round(100*n.s)+"%,"+Math.round(100*n.l)+"%)";case"hsla":return n=this.toHSL(),"hsla("+Math.round(360*n.h)+","+Math.round(100*n.s)+"%,"+Math.round(100*n.l)+"%,"+n.a+")";case"hex":return this.toHex(e);case"alias":return!1===(n=this.toAlias())?this.toString(e,this.getValidFallbackFormat()):i&&!(n in r.webColors)&&n in this.predefinedColors?this.predefinedColors[n]:n;default:return n}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}],colorNameToHex:function(e){return void 0!==this.colors[e.toLowerCase()]&&this.colors[e.toLowerCase()]}}),inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",fallbackColor:!1,fallbackFormat:"hex",hexNumberSignPrefix:!0,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null};s.Color=r,s.prototype={constructor:s,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker","color").off(".colorpicker"),!1!==this.input&&this.input.off(".colorpicker"),!1!==this.component&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(!1!==this.options.inline||this.options.container)return!1;var e=this.container&&this.container[0]!==window.document.body?"position":"offset",t=this.component||this.element,e=t[e]();"right"===this.options.align&&(e.left-=this.picker.outerWidth()-t.outerWidth()),this.picker.css({top:e.top+t.outerHeight(),left:e.left})},show:function(e){this.isDisabled()||(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),c(window).on("resize.colorpicker",c.proxy(this.reposition,this)),!e||this.hasInput()&&"color"!==this.input.attr("type")||e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!this.component&&this.input||!1!==this.options.inline||c(window.document).on({"mousedown.colorpicker":c.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color}))},hide:function(e){if(void 0!==e&&e.target&&(0<c(e.currentTarget).parents(".colorpicker").length||0<c(e.target).parents(".colorpicker").length))return!1;this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),c(window).off("resize.colorpicker",this.reposition),c(window.document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){return e=e||this.color.toString(!1,this.format),this.element.data("color",e),e},updateInput:function(e){return e=e||this.color.toString(!1,this.format),!1!==this.input&&(this.input.prop("value",e),this.input.trigger("change")),e},updatePicker:function(e){void 0!==e&&(this.color=this.createColor(e));var t=!1===this.options.horizontal?this.options.sliders:this.options.slidersHorz,i=this.picker.find("i");if(0!==i.length)return!1===this.options.horizontal?(t=this.options.sliders,i.eq(1).css("top",t.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",t.alpha.maxTop*(1-this.color.value.a))):(t=this.options.slidersHorz,i.eq(1).css("left",t.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",t.alpha.maxLeft*(1-this.color.value.a))),i.eq(0).css({top:t.saturation.maxTop-this.color.value.b*t.saturation.maxTop,left:this.color.value.s*t.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(!0,this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex(!0)),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(!0,this.format)),e},updateComponent:function(e){var t,e=void 0!==e?this.createColor(e):this.color;return!1!==this.component&&(0<(t=this.component.find("i").eq(0)).length?t:this.component).css({backgroundColor:e.toString(!0,this.format)}),e.toString(!1,this.format)},update:function(e){var t;return!1===this.getValue(!1)&&!0!==e||(t=this.updateComponent(),this.updateInput(t),this.updateData(t),this.updatePicker()),t},setValue:function(e){this.color=this.createColor(e),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:e})},createColor:function(e){return new r(e||null,this.options.colorSelectors,this.options.fallbackColor||this.color,this.options.fallbackFormat,this.options.hexNumberSignPrefix)},getValue:function(e){var t;return e=void 0===e?this.options.fallbackColor:e,t=void 0!==(t=this.hasInput()?this.input.val():this.element.data("color"))&&""!==t&&null!==t?t:e},hasInput:function(){return!1!==this.input},isDisabled:function(){return this.disabled},disable:function(){return this.hasInput()&&this.input.prop("disabled",!0),this.disabled=!0,this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0},enable:function(){return this.hasInput()&&this.input.prop("disabled",!1),this.disabled=!1,this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(e){!e.pageX&&!e.pageY&&e.originalEvent&&e.originalEvent.touches&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var t=c(e.target).closest("div"),i=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!t.is(".colorpicker")){if(t.is(".colorpicker-saturation"))this.currentSlider=c.extend({},i.saturation);else if(t.is(".colorpicker-hue"))this.currentSlider=c.extend({},i.hue);else{if(!t.is(".colorpicker-alpha"))return!1;this.currentSlider=c.extend({},i.alpha)}i=t.offset();this.currentSlider.guide=t.find("i")[0].style,this.currentSlider.left=e.pageX-i.left,this.currentSlider.top=e.pageY-i.top,this.mousePointer={left:e.pageX,top:e.pageY},c(window.document).on({"mousemove.colorpicker":c.proxy(this.mousemove,this),"touchmove.colorpicker":c.proxy(this.mousemove,this),"mouseup.colorpicker":c.proxy(this.mouseup,this),"touchend.colorpicker":c.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){!e.pageX&&!e.pageY&&e.originalEvent&&e.originalEvent.touches&&(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left))),e=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=e+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,e/this.currentSlider.maxTop),!1!==this.options.format||"setAlpha"!==this.currentSlider.callTop&&"setAlpha"!==this.currentSlider.callLeft||(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),c(window.document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(e){this.color=this.createColor(this.input.val()),this.color.origFormat&&!1===this.options.format&&(this.format=this.color.origFormat),!1!==this.getValue(!1)&&(this.updateData(),this.updateComponent(),this.updatePicker()),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})},keyup:function(e){38===e.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===e.keyCode&&(0<this.color.value.a&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},c.colorpicker=s,c.fn.colorpicker=function(i){var n=Array.prototype.slice.call(arguments,1),e=1===this.length,o=null,t=this.each(function(){var e=c(this),t=e.data("colorpicker");t||(t=new s(this,"object"==typeof i?i:{}),e.data("colorpicker",t)),o="string"==typeof i?c.isFunction(t[i])?t[i].apply(t,n):(n.length&&(t[i]=n[0]),t[i]):e});return e?o:t},c.fn.colorpicker.constructor=s}),!function(){var L={version:"3.5.5"},I=[].slice,P=function(e){return I.call(e)},M=this.document;function G(e){return e&&(e.ownerDocument||e.document||e).documentElement}function B(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(M)try{P(M.documentElement.childNodes)[0].nodeType}catch(e){P=function(e){for(var t=e.length,i=new Array(t);t--;)i[t]=e[t];return i}}if(Date.now||(Date.now=function(){return+new Date}),M)try{M.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,W=t.setAttribute,H=t.setAttributeNS,i=this.CSSStyleDeclaration.prototype,V=i.setProperty;t.setAttribute=function(e,t){W.call(this,e,t+"")},t.setAttributeNS=function(e,t,i){H.call(this,e,t,i+"")},i.setProperty=function(e,t,i){V.call(this,e,t+"",i)}}function j(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function z(e){return null===e?NaN:+e}function U(e){return!isNaN(e)}function e(r){return{left:function(e,t,i,n){for(arguments.length<3&&(i=0),arguments.length<4&&(n=e.length);i<n;){var o=i+n>>>1;r(e[o],t)<0?i=1+o:n=o}return i},right:function(e,t,i,n){for(arguments.length<3&&(i=0),arguments.length<4&&(n=e.length);i<n;){var o=i+n>>>1;0<r(e[o],t)?n=o:i=1+o}return i}}}L.ascending=j,L.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},L.min=function(e,t){var i,n,o=-1,r=e.length;if(1===arguments.length){for(;++o<r;)if(null!=(n=e[o])&&n<=n){i=n;break}for(;++o<r;)null!=(n=e[o])&&n<i&&(i=n)}else{for(;++o<r;)if(null!=(n=t.call(e,e[o],o))&&n<=n){i=n;break}for(;++o<r;)null!=(n=t.call(e,e[o],o))&&n<i&&(i=n)}return i},L.max=function(e,t){var i,n,o=-1,r=e.length;if(1===arguments.length){for(;++o<r;)if(null!=(n=e[o])&&n<=n){i=n;break}for(;++o<r;)null!=(n=e[o])&&i<n&&(i=n)}else{for(;++o<r;)if(null!=(n=t.call(e,e[o],o))&&n<=n){i=n;break}for(;++o<r;)null!=(n=t.call(e,e[o],o))&&i<n&&(i=n)}return i},L.extent=function(e,t){var i,n,o,r=-1,s=e.length;if(1===arguments.length){for(;++r<s;)if(null!=(n=e[r])&&n<=n){i=o=n;break}for(;++r<s;)null!=(n=e[r])&&(n<i&&(i=n),o<n&&(o=n))}else{for(;++r<s;)if(null!=(n=t.call(e,e[r],r))&&n<=n){i=o=n;break}for(;++r<s;)null!=(n=t.call(e,e[r],r))&&(n<i&&(i=n),o<n&&(o=n))}return[i,o]},L.sum=function(e,t){var i,n=0,o=e.length,r=-1;if(1===arguments.length)for(;++r<o;)U(i=+e[r])&&(n+=i);else for(;++r<o;)U(i=+t.call(e,e[r],r))&&(n+=i);return n},L.mean=function(e,t){var i,n=0,o=e.length,r=-1,s=o;if(1===arguments.length)for(;++r<o;)U(i=z(e[r]))?n+=i:--s;else for(;++r<o;)U(i=z(t.call(e,e[r],r)))?n+=i:--s;if(s)return n/s},L.quantile=function(e,t){var t=(e.length-1)*t+1,i=Math.floor(t),n=+e[i-1],t=t-i;return t?n+t*(e[i]-n):n},L.median=function(e,t){var i,n=[],o=e.length,r=-1;if(1===arguments.length)for(;++r<o;)U(i=z(e[r]))&&n.push(i);else for(;++r<o;)U(i=z(t.call(e,e[r],r)))&&n.push(i);if(n.length)return L.quantile(n.sort(j),.5)},L.variance=function(e,t){var i,n,o=e.length,r=0,s=0,a=-1,l=0;if(1===arguments.length)for(;++a<o;)U(i=z(e[a]))&&(s+=(n=i-r)*(i-(r+=n/++l)));else for(;++a<o;)U(i=z(t.call(e,e[a],a)))&&(s+=(n=i-r)*(i-(r+=n/++l)));if(1<l)return s/(l-1)},L.deviation=function(){var e=L.variance.apply(this,arguments);return e&&Math.sqrt(e)};t=e(j);function Y(e){return e.length}L.bisectLeft=t.left,L.bisect=L.bisectRight=t.right,L.bisector=function(i){return e(1===i.length?function(e,t){return j(i(e),t)}:i)},L.shuffle=function(e,t,i){(r=arguments.length)<3&&(i=e.length,r<2&&(t=0));for(var n,o,r=i-t;r;)o=Math.random()*r--|0,n=e[r+t],e[r+t]=e[o+t],e[o+t]=n;return e},L.permute=function(e,t){for(var i=t.length,n=new Array(i);i--;)n[i]=e[t[i]];return n},L.pairs=function(e){for(var t=0,i=e.length-1,n=e[0],o=new Array(i<0?0:i);t<i;)o[t]=[n,n=e[++t]];return o},L.zip=function(){if(!(n=arguments.length))return[];for(var e=-1,t=L.min(arguments,Y),i=new Array(t);++e<t;)for(var n,o=-1,r=i[e]=new Array(n);++o<n;)r[o]=arguments[o][e];return i},L.transpose=function(e){return L.zip.apply(L,e)},L.keys=function(e){var t,i=[];for(t in e)i.push(t);return i},L.values=function(e){var t,i=[];for(t in e)i.push(e[t]);return i},L.entries=function(e){var t,i=[];for(t in e)i.push({key:t,value:e[t]});return i},L.merge=function(e){for(var t,i,n,o=e.length,r=-1,s=0;++r<o;)s+=e[r].length;for(i=new Array(s);0<=--o;)for(t=(n=e[o]).length;0<=--t;)i[--s]=n[t];return i};var O=Math.abs;function q(e,t){for(var i in t)Object.defineProperty(e.prototype,i,{value:t[i],enumerable:!1})}function K(){this._=Object.create(null)}L.range=function(e,t,i){if(arguments.length<3&&(i=1,arguments.length<2&&(t=e,e=0)),(t-e)/i==1/0)throw new Error("infinite range");var n,o=[],r=function(e){var t=1;for(;e*t%1;)t*=10;return t}(O(i)),s=-1;if(e*=r,t*=r,(i*=r)<0)for(;(n=e+i*++s)>t;)o.push(n/r);else for(;(n=e+i*++s)<t;)o.push(n/r);return o},L.map=function(e,t){var i=new K;if(e instanceof K)e.forEach(function(e,t){i.set(e,t)});else if(Array.isArray(e)){var n,o=-1,r=e.length;if(1===arguments.length)for(;++o<r;)i.set(o,e[o]);else for(;++o<r;)i.set(t.call(e,n=e[o],o),n)}else for(var s in e)i.set(s,e[s]);return i};var X="__proto__",Q="\0";function Z(e){return(e+="")===X||e[0]===Q?Q+e:e}function J(e){return(e+="")[0]===Q?e.slice(1):e}function ee(e){return Z(e)in this._}function te(e){return(e=Z(e))in this._&&delete this._[e]}function ie(){var e,t=[];for(e in this._)t.push(J(e));return t}function ne(){var e,t=0;for(e in this._)++t;return t}function oe(){for(var e in this._)return!1;return!0}function re(){this._=Object.create(null)}function R(e){return e}function se(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var i=0,n=ae.length;i<n;++i){var o=ae[i]+t;if(o in e)return o}}q(K,{has:ee,get:function(e){return this._[Z(e)]},set:function(e,t){return this._[Z(e)]=t},remove:te,keys:ie,values:function(){var e,t=[];for(e in this._)t.push(this._[e]);return t},entries:function(){var e,t=[];for(e in this._)t.push({key:J(e),value:this._[e]});return t},size:ne,empty:oe,forEach:function(e){for(var t in this._)e.call(this,J(t),this._[t])}}),L.nest=function(){var d,h,p={},f=[],t=[];function g(i,e,n){if(n>=f.length)return h?h.call(p,e):d?e.sort(d):e;for(var t,o,r,s,a=-1,l=e.length,c=f[n++],u=new K;++a<l;)(s=u.get(t=c(o=e[a])))?s.push(o):u.set(t,[o]);return r=i?(o=i(),function(e,t){o.set(e,g(i,t,n))}):(o={},function(e,t){o[e]=g(i,t,n)}),u.forEach(r),o}return p.map=function(e,t){return g(t,e,0)},p.entries=function(e){return function i(e,n){if(n>=f.length)return e;var o=[],r=t[n++];return e.forEach(function(e,t){o.push({key:e,values:i(t,n)})}),r?o.sort(function(e,t){return r(e.key,t.key)}):o}(g(L.map,e,0),0)},p.key=function(e){return f.push(e),p},p.sortKeys=function(e){return t[f.length-1]=e,p},p.sortValues=function(e){return d=e,p},p.rollup=function(e){return h=e,p},p},L.set=function(e){var t=new re;if(e)for(var i=0,n=e.length;i<n;++i)t.add(e[i]);return t},q(re,{has:ee,add:function(e){return this._[Z(e+="")]=!0,e},remove:te,values:ie,size:ne,empty:oe,forEach:function(e){for(var t in this._)e.call(this,J(t))}}),L.behavior={},L.rebind=function(e,t){for(var i,n=1,o=arguments.length;++n<o;)e[i=arguments[n]]=function(t,i,n){return function(){var e=n.apply(i,arguments);return e===i?t:e}}(e,t,t[i]);return e};var ae=["webkit","ms","moz","Moz","o","O"];function l(){}function le(){}function ce(o){var r=[],n=new K;function e(){for(var e,t=r,i=-1,n=t.length;++i<n;)(e=t[i].on)&&e.apply(this,arguments);return o}return e.on=function(e,t){var i=n.get(e);return arguments.length<2?i&&i.on:(i&&(i.on=null,r=r.slice(0,i=r.indexOf(i)).concat(r.slice(i+1)),n.remove(e)),t&&r.push(n.set(e,{on:t})),o)},e}function ue(){L.event.preventDefault()}function de(){for(var e,t=L.event;e=t.sourceEvent;)t=e;return t}function he(o){for(var r=new le,e=0,t=arguments.length;++e<t;)r[arguments[e]]=ce(r);return r.of=function(i,n){return function(e){try{var t=e.sourceEvent=L.event;e.target=o,L.event=e,r[e.type].apply(i,n)}finally{L.event=t}}},r}L.dispatch=function(){for(var e=new le,t=-1,i=arguments.length;++t<i;)e[arguments[t]]=ce(e);return e},le.prototype.on=function(e,t){var i=e.indexOf("."),n="";if(0<=i&&(n=e.slice(i+1),e=e.slice(0,i)),e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(n,null);return this}},L.event=null,L.requote=function(e){return e.replace(pe,"\\$&")};var pe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fe={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)e[i]=t[i]};function ge(e){return fe(e,n),e}var me=function(e,t){return t.querySelector(e)},ve=function(e,t){return t.querySelectorAll(e)},ye=function(e,t){var i=e.matches||e[se(e,"matchesSelector")];return(ye=function(e,t){return i.call(e,t)})(e,t)},n=("function"==typeof Sizzle&&(me=function(e,t){return Sizzle(e,t)[0]||null},ye=(ve=Sizzle).matchesSelector),L.selection=function(){return L.select(M.documentElement)},L.selection.prototype=[]);function be(e){return"function"==typeof e?e:function(){return me(e,this)}}function we(e){return"function"==typeof e?e:function(){return ve(e,this)}}n.select=function(e){var t,i,n,o,r=[];e=be(e);for(var s=-1,a=this.length;++s<a;){r.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var l=-1,c=n.length;++l<c;)(o=n[l])?(t.push(i=e.call(o,o.__data__,l,s)),i&&"__data__"in o&&(i.__data__=o.__data__)):t.push(null)}return ge(r)},n.selectAll=function(e){var t,i,n=[];e=we(e);for(var o=-1,r=this.length;++o<r;)for(var s=this[o],a=-1,l=s.length;++a<l;)(i=s[a])&&(n.push(t=P(e.call(i,i.__data__,a,o))),t.parentNode=i);return ge(n)};var Ce={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _e(t,i){return t=L.ns.qualify(t),null==i?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof i?t.local?function(){var e=i.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=i.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,i)}:function(){this.setAttribute(t,i)}}function Ae(e){return e.trim().replace(/\s+/g," ")}function Ee(e){return new RegExp("(?:^|\\s+)"+L.requote(e)+"(?:\\s+|$)","g")}function xe(e){return(e+"").trim().split(/^|\s+/)}function Se(i,n){var o=(i=xe(i).map(Te)).length;return"function"==typeof n?function(){for(var e=-1,t=n.apply(this,arguments);++e<o;)i[e](this,t)}:function(){for(var e=-1;++e<o;)i[e](this,n)}}function Te(n){var o=Ee(n);return function(e,t){if(i=e.classList)return t?i.add(n):i.remove(n);var i=e.getAttribute("class")||"";t?(o.lastIndex=0,o.test(i)||e.setAttribute("class",Ae(i+" "+n))):e.setAttribute("class",Ae(i.replace(o," ")))}}function ke(t,i,n){return null==i?function(){this.style.removeProperty(t)}:"function"==typeof i?function(){var e=i.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,n)}:function(){this.style.setProperty(t,i,n)}}function De(t,i){return null==i?function(){delete this[t]}:"function"==typeof i?function(){var e=i.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=i}}function Re(i){return"function"==typeof i?i:(i=L.ns.qualify(i)).local?function(){return this.ownerDocument.createElementNS(i.space,i.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t?e.createElementNS(t,i):e.createElement(i)}}function Oe(){var e=this.parentNode;e&&e.removeChild(this)}function Fe(e){return{__data__:e}}function Le(e){return function(){return ye(this,e)}}function Me(e,t){for(var i=0,n=e.length;i<n;i++)for(var o,r=e[i],s=0,a=r.length;s<a;s++)(o=r[s])&&t(o,s,i);return e}function Ne(e){return fe(e,$e),e}L.ns={prefix:Ce,qualify:function(e){var t=e.indexOf(":"),i=e;return 0<=t&&(i=e.slice(0,t),e=e.slice(t+1)),Ce.hasOwnProperty(i)?{space:Ce[i],local:e}:e}},n.attr=function(e,t){if(arguments.length<2){var i;if("string"==typeof e)return i=this.node(),(e=L.ns.qualify(e)).local?i.getAttributeNS(e.space,e.local):i.getAttribute(e);for(t in e)this.each(_e(t,e[t]));return this}return this.each(_e(e,t))},n.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var i=this.node(),n=(e=xe(e)).length,o=-1;if(t=i.classList){for(;++o<n;)if(!t.contains(e[o]))return!1}else for(t=i.getAttribute("class");++o<n;)if(!Ee(e[o]).test(t))return!1;return!0}for(t in e)this.each(Se(t,e[t]));return this}return this.each(Se(e,t))},n.style=function(e,t,i){var n=arguments.length;if(n<3){if("string"!=typeof e){for(i in n<2&&(t=""),e)this.each(ke(i,e[i],t));return this}if(n<2)return B(n=this.node()).getComputedStyle(n,null).getPropertyValue(e);i=""}return this.each(ke(e,t,i))},n.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(De(t,e[t]));return this}return this.each(De(e,t))},n.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},n.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},n.append=function(e){return e=Re(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},n.insert=function(e,t){return e=Re(e),t=be(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},n.remove=function(){return this.each(Oe)},n.data=function(e,f){var t,i,n=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(t=this[0]).length);++n<o;)(i=t[n])&&(e[n]=i.__data__);return e}function r(e,t){var i,n,o=e.length,r=t.length,s=Math.min(o,r),a=new Array(r),l=new Array(r),c=new Array(o);if(f){for(var u,d=new K,h=new Array(o),p=-1;++p<o;)d.has(u=f.call(i=e[p],i.__data__,p))?c[p]=i:d.set(u,i),h[p]=u;for(p=-1;++p<r;)(i=d.get(u=f.call(t,n=t[p],p)))?!0!==i&&((a[p]=i).__data__=n):l[p]=Fe(n),d.set(u,!0);for(p=-1;++p<o;)!0!==d.get(h[p])&&(c[p]=e[p])}else{for(p=-1;++p<s;)i=e[p],n=t[p],i?(i.__data__=n,a[p]=i):l[p]=Fe(n);for(;p<r;++p)l[p]=Fe(t[p]);for(;p<o;++p)c[p]=e[p]}l.update=a,l.parentNode=a.parentNode=c.parentNode=e.parentNode,g.push(l),m.push(a),v.push(c)}var g=Ne([]),m=ge([]),v=ge([]);if("function"==typeof e)for(;++n<o;)r(t=this[n],e.call(t,t.parentNode.__data__,n));else for(;++n<o;)r(t=this[n],e);return m.enter=function(){return g},m.exit=function(){return v},m},n.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},n.filter=function(e){var t,i,n,o=[];"function"!=typeof e&&(e=Le(e));for(var r=0,s=this.length;r<s;r++){o.push(t=[]),t.parentNode=(i=this[r]).parentNode;for(var a=0,l=i.length;a<l;a++)(n=i[a])&&e.call(n,n.__data__,a,r)&&t.push(n)}return ge(o)},n.order=function(){for(var e=-1,t=this.length;++e<t;)for(var i,n=this[e],o=n.length-1,r=n[o];0<=--o;)(i=n[o])&&(r&&r!==i.nextSibling&&r.parentNode.insertBefore(i,r),r=i);return this},n.sort=function(e){e=function(i){arguments.length||(i=j);return function(e,t){return e&&t?i(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,i=this.length;++t<i;)this[t].sort(e);return this.order()},n.each=function(n){return Me(this,function(e,t,i){n.call(e,e.__data__,t,i)})},n.call=function(e){var t=P(arguments);return e.apply(t[0]=this,t),this},n.empty=function(){return!this.node()},n.node=function(){for(var e=0,t=this.length;e<t;e++)for(var i=this[e],n=0,o=i.length;n<o;n++){var r=i[n];if(r)return r}return null},n.size=function(){var e=0;return Me(this,function(){++e}),e};var $e=[];function Ie(o,t,i){var n="__on"+o,e=o.indexOf("."),r=Ge,s=(0<e&&(o=o.slice(0,e)),Pe.get(o));function a(){var e=this[n];e&&(this.removeEventListener(o,e,e.$),delete this[n])}return s&&(o=s,r=Be),e?t?function(){var e=r(t,P(arguments));a.call(this),this.addEventListener(o,this[n]=e,e.$=i),e._=t}:a:t?l:function(){var e,t,i,n=new RegExp("^__on([^.]+)"+L.requote(o)+"$");for(t in this)(e=t.match(n))&&(i=this[t],this.removeEventListener(e[1],i,i.$),delete this[t])}}L.selection.enter=Ne,(L.selection.enter.prototype=$e).append=n.append,$e.empty=n.empty,$e.node=n.node,$e.call=n.call,$e.size=n.size,$e.select=function(e){for(var t,i,n,o,r,s=[],a=-1,l=this.length;++a<l;){n=(o=this[a]).update,s.push(t=[]),t.parentNode=o.parentNode;for(var c=-1,u=o.length;++c<u;)(r=o[c])?(t.push(n[c]=i=e.call(o.parentNode,r.__data__,c,a)),i.__data__=r.__data__):t.push(null)}return ge(s)},$e.insert=function(e,t){var s,a,l;return arguments.length<2&&(s=this,t=function(e,t,i){var n,o=s[i].update,r=o.length;for(i!=l&&(l=i,a=0),a<=t&&(a=t+1);!(n=o[a])&&++a<r;);return n}),n.insert.call(this,e,t)},L.select=function(e){var t;return"string"==typeof e?(t=[me(e,M)]).parentNode=M.documentElement:(t=[e]).parentNode=G(e),ge([t])},L.selectAll=function(e){var t;return"string"==typeof e?(t=P(ve(e,M))).parentNode=M.documentElement:(t=e).parentNode=null,ge([t])},n.on=function(e,t,i){var n=arguments.length;if(n<3){if("string"!=typeof e){for(i in n<2&&(t=!1),e)this.each(Ie(i,e[i],t));return this}if(n<2)return(n=this.node()["__on"+e])&&n._;i=!1}return this.each(Ie(e,t,i))};var Pe=L.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ge(i,n){return function(e){var t=L.event;L.event=e,n[0]=this.__data__;try{i.apply(this,n)}finally{L.event=t}}}function Be(e,t){var i=Ge(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||i.call(this,e)}}M&&Pe.forEach(function(e){"on"+e in M&&Pe.remove(e)});var We,He=0;function Ve(e){var i,n,o=".dragsuppress-"+ ++He,r="click"+o,s=L.select(B(e)).on("touchmove"+o,ue).on("dragstart"+o,ue).on("selectstart"+o,ue);return(We=null==We?!("onselectstart"in e)&&se(e.style,"userSelect"):We)&&(i=G(e).style,n=i[We],i[We]="none"),function(e){var t;s.on(o,null),We&&(i[We]=n),e&&(t=function(){s.on(r,null)},s.on(r,function(){ue(),t()},!0),setTimeout(t,0))}}L.mouse=function(e){return ze(e,de())};var je=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ze(e,t){t.changedTouches&&(t=t.changedTouches[0]);var i,n=e.ownerSVGElement||e;if(n.createSVGPoint)return i=n.createSVGPoint(),je<0&&(((o=B(e)).scrollX||o.scrollY)&&(o=(n=L.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),je=!(o.f||o.e),n.remove())),je?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y];var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}function Ue(){return L.event.changedTouches[0].identifier}L.touch=function(e,t,i){if(arguments.length<3&&(i=t,t=de().changedTouches),t)for(var n,o=0,r=t.length;o<r;++o)if((n=t[o]).identifier===i)return ze(e,n)},L.behavior.drag=function(){var g=he(i,"drag","dragstart","dragend"),m=null,e=n(l,L.mouse,B,"mousemove","mouseup"),t=n(Ue,L.touch,R,"touchmove","touchend");function i(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function n(u,d,h,p,f){return function(){var n,e=L.event.target,o=this.parentNode,r=g.of(this,arguments),s=0,a=u(),t=".drag"+(null==a?"":"-"+a),i=L.select(h(e)).on(p+t,function(){var e,t,i=d(o,a);i&&(e=i[0]-c[0],t=i[1]-c[1],s|=e|t,r({type:"drag",x:(c=i)[0]+n[0],y:i[1]+n[1],dx:e,dy:t}))}).on(f+t,function(){d(o,a)&&(i.on(p+t,null).on(f+t,null),l(s&&L.event.target===e),r({type:"dragend"}))}),l=Ve(e),c=d(o,a);n=m?[(n=m.apply(this,arguments)).x-c[0],n.y-c[1]]:[0,0],r({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(m=e,i):m},L.rebind(i,g,"on")},L.touches=function(i,e){return(e=arguments.length<2?de().touches:e)?P(e).map(function(e){var t=ze(i,e);return t.identifier=e.identifier,t}):[]};var F=1e-6,Ye=F*F,D=Math.PI,x=2*D,qe=x-F,N=D/2,E=D/180,S=180/D;function Ke(e){return 0<e?1:e<0?-1:0}function Xe(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(t[1]-e[1])*(i[0]-e[0])}function Qe(e){return 1<e?0:e<-1?D:Math.acos(e)}function Ze(e){return 1<e?N:e<-1?-N:Math.asin(e)}function Je(e){return((e=Math.exp(e))+1/e)/2}function et(e){return(e=Math.sin(e/2))*e}var tt,it,nt=Math.SQRT2,ot=(L.interpolateZoom=function(e,t){var o=e[0],r=e[1],s=e[2],e=t[0],i=t[1],t=t[2],a=e-o,l=i-r,e=a*a+l*l,c=Math.sqrt(e),i=(t*t-s*s+4*e)/(2*s*2*c),e=(t*t-s*s-4*e)/(2*t*2*c),u=Math.log(Math.sqrt(i*i+1)-i),d=Math.log(Math.sqrt(e*e+1)-e)-u,h=(d||Math.log(t/s))/nt;function n(e){var t,i,n=e*h;return d?(t=Je(u),i=s/(2*c)*(t*(i=nt*n+u,((i=Math.exp(2*i))-1)/(i+1))-(i=u,((i=Math.exp(u))-1/i)/2)),[o+i*a,r+i*l,s*t/Je(nt*n+u)]):[o+e*a,r+e*l,s*Math.exp(nt*n)]}return n.duration=1e3*h,n},L.behavior.zoom=function(){var t,a,i,n,y,o,r,s,l,b={x:0,y:0,k:1},c=[960,500],u=ot,d=250,h=0,w="mousedown.zoom",p="mousemove.zoom",f="mouseup.zoom",C="touchstart.zoom",_=he(g,"zoomstart","zoom","zoomend");function g(e){e.on(w,R).on(it+".zoom",v).on("dblclick.zoom",F).on(C,O)}function A(e){return[(e[0]-b.x)/b.k,(e[1]-b.y)/b.k]}function E(e){b.k=Math.max(u[0],Math.min(u[1],e))}function x(e,t){var i;t=[(i=t)[0]*b.k+b.x,i[1]*b.k+b.y],b.x+=e[0]-t[0],b.y+=e[1]-t[1]}function S(e,t,i,n){e.__chart__={x:b.x,y:b.y,k:b.k},E(Math.pow(2,n)),x(a=t,i),e=L.select(e),(e=0<d?e.transition().duration(d):e).call(g.event)}function m(){r&&r.domain(o.range().map(function(e){return(e-b.x)/b.k}).map(o.invert)),l&&l.domain(s.range().map(function(e){return(e-b.y)/b.k}).map(s.invert))}function T(e){h++||e({type:"zoomstart"})}function k(e){m(),e({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function D(e){--h||e({type:"zoomend"}),a=null}function R(){var e=this,t=L.event.target,i=_.of(e,arguments),n=0,o=L.select(B(e)).on(p,function(){n=1,x(L.mouse(e),r),k(i)}).on(f,function(){o.on(p,null).on(f,null),s(n&&L.event.target===t),D(i)}),r=A(L.mouse(e)),s=Ve(e);Ca.call(e),T(i)}function O(){var l,c=this,u=_.of(c,arguments),d={},h=0,o=".zoom-"+L.event.changedTouches[0].identifier,s="touchmove"+o,a="touchend"+o,p=[],r=L.select(c),f=Ve(c);function g(){var e=L.touches(c);return l=b.k,e.forEach(function(e){e.identifier in d&&(d[e.identifier]=A(e))}),e}function e(){for(var e=L.event.target,t=(L.select(e).on(s,m).on(a,v),p.push(e),L.event.changedTouches),i=0,n=t.length;i<n;++i)d[t[i].identifier]=null;var o,e=g(),r=Date.now();1===e.length?(r-y<500&&(o=e[0],S(c,o,d[o.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1),ue()),y=r):1<e.length&&(o=e[0],r=e[1],e=o[0]-r[0],o=o[1]-r[1],h=e*e+o*o)}function m(){var e,t,i=L.touches(c);Ca.call(c);for(var n,o,r,s=0,a=i.length;s<a;++s,t=null)if(e=i[s],t=d[e.identifier]){if(r)break;o=e,r=t}t&&(n=(n=e[0]-o[0])*n+(n=e[1]-o[1])*n,n=h&&Math.sqrt(n/h),o=[(o[0]+e[0])/2,(o[1]+e[1])/2],r=[(r[0]+t[0])/2,(r[1]+t[1])/2],E(n*l)),y=null,x(o,r),k(u)}function v(){if(L.event.touches.length){for(var e,t=L.event.changedTouches,i=0,n=t.length;i<n;++i)delete d[t[i].identifier];for(e in d)return void g()}L.selectAll(p).on(o,null),r.on(w,R).on(C,O),f(),D(u)}e(),T(u),r.on(w,null).on(C,e)}function v(){var e=_.of(this,arguments);n?clearTimeout(n):(t=A(a=i||L.mouse(this)),Ca.call(this),T(e)),n=setTimeout(function(){n=null,D(e)},50),ue(),E(Math.pow(2,.002*tt())*b.k),x(a,t),k(e)}function F(){var e=L.mouse(this),t=Math.log(b.k)/Math.LN2;S(this,e,A(e),L.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return it=it||("onwheel"in M?(tt=function(){return-L.event.deltaY*(L.event.deltaMode?120:1)},"wheel"):"onmousewheel"in M?(tt=function(){return L.event.wheelDelta},"mousewheel"):(tt=function(){return-L.event.detail},"MozMousePixelScroll")),g.event=function(e){e.each(function(){var s=_.of(this,arguments),t=b;Ea?L.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1},T(s)}).tween("zoom:zoom",function(){var i=c[0],e=c[1],n=a?a[0]:i/2,o=a?a[1]:e/2,r=L.interpolateZoom([(n-b.x)/b.k,(o-b.y)/b.k,i/b.k],[(n-t.x)/t.k,(o-t.y)/t.k,i/t.k]);return function(e){var e=r(e),t=i/e[2];this.__chart__=b={x:n-e[0]*t,y:o-e[1]*t,k:t},k(s)}}).each("interrupt.zoom",function(){D(s)}).each("end.zoom",function(){D(s)}):(this.__chart__=b,T(s),k(s),D(s))})},g.translate=function(e){return arguments.length?(b={x:+e[0],y:+e[1],k:b.k},m(),g):[b.x,b.y]},g.scale=function(e){return arguments.length?(b={x:b.x,y:b.y,k:+e},m(),g):b.k},g.scaleExtent=function(e){return arguments.length?(u=null==e?ot:[+e[0],+e[1]],g):u},g.center=function(e){return arguments.length?(i=e&&[+e[0],+e[1]],g):i},g.size=function(e){return arguments.length?(c=e&&[+e[0],+e[1]],g):c},g.duration=function(e){return arguments.length?(d=+e,g):d},g.x=function(e){return arguments.length?(o=(r=e).copy(),b={x:0,y:0,k:1},g):r},g.y=function(e){return arguments.length?(s=(l=e).copy(),b={x:0,y:0,k:1},g):l},L.rebind(g,_,"on")},[0,1/0]);function rt(){}function st(e,t,i){return this instanceof st?(this.h=+e,this.s=+t,void(this.l=+i)):arguments.length<2?e instanceof st?new st(e.h,e.s,e.l):Ct(""+e,_t,st):new st(e,t,i)}(L.color=rt).prototype.toString=function(){return this.rgb()+""};i=(L.hsl=st).prototype=new rt;function at(e,t,i){var n,o;function r(e){return Math.round(255*(360<(e=e)?e-=360:e<0&&(e+=360),e<60?n+(o-n)*e/60:e<180?o:e<240?n+(o-n)*(240-e)/60:n))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:1<t?1:t,n=2*(i=i<0?0:1<i?1:i)-(o=i<=.5?i*(1+t):i+t-i*t),new s(r(e+120),r(e),r(e-120))}function o(e,t,i){return this instanceof o?(this.h=+e,this.c=+t,void(this.l=+i)):arguments.length<2?e instanceof o?new o(e.h,e.c,e.l):ft((e instanceof r?e:e=At((e=L.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new o(e,t,i)}i.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new st(this.h,this.s,this.l/e)},i.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new st(this.h,this.s,e*this.l)},i.rgb=function(){return at(this.h,this.s,this.l)};t=(L.hcl=o).prototype=new rt;function lt(e,t,i){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new r(i,Math.cos(e*=E)*t,Math.sin(e)*t)}function r(e,t,i){return this instanceof r?(this.l=+e,this.a=+t,void(this.b=+i)):arguments.length<2?e instanceof r?new r(e.l,e.a,e.b):e instanceof o?lt(e.h,e.c,e.l):At((e=s(e)).r,e.g,e.b):new r(e,t,i)}t.brighter=function(e){return new o(this.h,this.c,Math.min(100,this.l+ct*(arguments.length?e:1)))},t.darker=function(e){return new o(this.h,this.c,Math.max(0,this.l-ct*(arguments.length?e:1)))},t.rgb=function(){return lt(this.h,this.c,this.l).rgb()},L.lab=r;var ct=18,ut=.95047,dt=1,ht=1.08883,i=r.prototype=new rt;function pt(e,t,i){e=(e+16)/116,i=e-i/200;return new s(vt(3.2404542*(t=gt(e+t/500)*ut)-1.5371385*(e=gt(e)*dt)-.4985314*(i=gt(i)*ht)),vt(-.969266*t+1.8760108*e+.041556*i),vt(.0556434*t-.2040259*e+1.0572252*i))}function ft(e,t,i){return 0<e?new o(Math.atan2(i,t)*S,Math.sqrt(t*t+i*i),e):new o(NaN,NaN,e)}function gt(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function mt(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function vt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function s(e,t,i){return this instanceof s?(this.r=~~e,this.g=~~t,void(this.b=~~i)):arguments.length<2?e instanceof s?new s(e.r,e.g,e.b):Ct(""+e,s,at):new s(e,t,i)}function yt(e){return new s(e>>16,e>>8&255,255&e)}function bt(e){return yt(e)+""}i.brighter=function(e){return new r(Math.min(100,this.l+ct*(arguments.length?e:1)),this.a,this.b)},i.darker=function(e){return new r(Math.max(0,this.l-ct*(arguments.length?e:1)),this.a,this.b)},i.rgb=function(){return pt(this.l,this.a,this.b)};t=(L.rgb=s).prototype=new rt;function wt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Ct(e,t,i){var n,o=0,r=0,s=0,a=/([a-z]+)\((.*)\)/i.exec(e);if(a)switch(n=a[2].split(","),a[1]){case"hsl":return i(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100);case"rgb":return t(xt(n[0]),xt(n[1]),xt(n[2]))}return(a=St.get(e.toLowerCase()))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,r=240&a,r|=r>>4,s=15&a,s|=s<<4):7===e.length&&(o=(16711680&a)>>16,r=(65280&a)>>8,s=255&a)),t(o,r,s))}function _t(e,t,i){var n,o,r=Math.min(e/=255,t/=255,i/=255),s=Math.max(e,t,i),a=s-r,l=(s+r)/2;return a?(o=l<.5?a/(s+r):a/(2-s-r),n=e==s?(t-i)/a+(t<i?6:0):t==s?(i-e)/a+2:(e-t)/a+4,n*=60):(n=NaN,o=0<l&&l<1?0:n),new st(n,o,l)}function At(e,t,i){var n=mt((.4124564*(e=Et(e))+.3575761*(t=Et(t))+.1804375*(i=Et(i)))/ut),o=mt((.2126729*e+.7151522*t+.072175*i)/dt);return r(116*o-16,500*(n-o),200*(o-mt((.0193339*e+.119192*t+.9503041*i)/ht)))}function Et(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}t.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,i=this.g,n=this.b;return t||i||n?(t&&t<30&&(t=30),i&&i<30&&(i=30),n&&n<30&&(n=30),new s(Math.min(255,t/e),Math.min(255,i/e),Math.min(255,n/e))):new s(30,30,30)},t.darker=function(e){return new s((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},t.hsl=function(){return _t(this.r,this.g,this.b)},t.toString=function(){return"#"+wt(this.r)+wt(this.g)+wt(this.b)};var St=L.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function $(e){return"function"==typeof e?e:function(){return e}}function Tt(n){return function(e,t,i){return 2===arguments.length&&"function"==typeof t&&(i=t,t=null),kt(e,t,n,i)}}function kt(o,r,s,e){var i,a={},l=L.dispatch("beforesend","progress","load","error"),c={},u=new XMLHttpRequest,d=null;function t(){var e,t,i,n=u.status;if(!n&&((i=(t=u).responseType)&&"text"!==i?t.response:t.responseText)||200<=n&&n<300||304===n){try{e=s.call(a,u)}catch(e){return void l.error.call(a,e)}l.load.call(a,e)}else l.error.call(a,u)}return"onload"in(u=!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(o)?u:new XDomainRequest)?u.onload=u.onerror=t:u.onreadystatechange=function(){3<u.readyState&&t()},u.onprogress=function(e){var t=L.event;L.event=e;try{l.progress.call(a,u)}finally{L.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c[e]:(null==t?delete c[e]:c[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(r=null==e?null:e+"",a):r},a.responseType=function(e){return arguments.length?(d=e,a):d},a.response=function(e){return s=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(P(arguments)))}}),a.send=function(e,t,i){if(2===arguments.length&&"function"==typeof t&&(i=t,t=null),u.open(e,o,!0),null==r||"accept"in c||(c.accept=r+",*/*"),u.setRequestHeader)for(var n in c)u.setRequestHeader(n,c[n]);return null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=d&&(u.responseType=d),null!=i&&a.on("error",i).on("load",function(e){i(null,e)}),l.beforesend.call(a,u),u.send(null==t?null:t),a},a.abort=function(){return u.abort(),a},L.rebind(a,l,"on"),null==e?a:a.get(1===(i=e).length?function(e,t){i(null==e?t:null)}:i)}St.forEach(function(e,t){St.set(e,yt(t))}),L.functor=$,L.xhr=Tt(R),L.dsv=function(o,r){var t=new RegExp('["'+o+"\n]"),h=o.charCodeAt(0);function s(e,t,i){arguments.length<3&&(i=t,t=null);var n=kt(e,r,null==t?a:l(t),i);return n.row=function(e){return arguments.length?n.response(null==(t=e)?a:l(e)):t},n}function a(e){return s.parse(e.responseText)}function l(t){return function(e){return s.parse(e.responseText,t)}}function i(e){return e.map(c).join(o)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return s.parse=function(e,n){var o;return s.parseRows(e,function(e,t){if(o)return o(e,t-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");o=n?function(e,t){return n(i(e),t)}:i})},s.parseRows=function(o,e){var t,r,s={},a={},i=[],l=o.length,c=0,n=0;function u(){if(l<=c)return a;if(r)return r=!1,s;var e=c;if(34===o.charCodeAt(e)){for(var t=e;t++<l;)if(34===o.charCodeAt(t)){if(34!==o.charCodeAt(t+1))break;++t}return c=t+2,13===(i=o.charCodeAt(t+1))?(r=!0,10===o.charCodeAt(t+2)&&++c):10===i&&(r=!0),o.slice(e+1,t).replace(/""/g,'"')}for(;c<l;){var i,n=1;if(10===(i=o.charCodeAt(c++)))r=!0;else if(13===i)r=!0,10===o.charCodeAt(c)&&(++c,++n);else if(i!==h)continue;return o.slice(e,c-n)}return o.slice(e)}for(;(t=u())!==a;){for(var d=[];t!==s&&t!==a;)d.push(t),t=u();e&&null==(d=e(d,n++))||i.push(d)}return i},s.format=function(e){if(Array.isArray(e[0]))return s.formatRows(e);var i=new re,n=[];return e.forEach(function(e){for(var t in e)i.has(t)||n.push(i.add(t))}),[n.map(c).join(o)].concat(e.map(function(t){return n.map(function(e){return c(t[e])}).join(o)})).join("\n")},s.formatRows=function(e){return e.map(i).join("\n")},s},L.csv=L.dsv(",","text/csv"),L.tsv=L.dsv(" ","text/tab-separated-values");var Dt,Rt,Ot,Ft,Lt,Mt=this[se(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Nt(){var e=$t(),e=It()-e;24<e?(isFinite(e)&&(clearTimeout(Ft),Ft=setTimeout(Nt,e)),Ot=0):(Ot=1,Mt(Nt))}function $t(){var e=Date.now();for(Lt=Dt;Lt;)e>=Lt.t&&(Lt.f=Lt.c(e-Lt.t)),Lt=Lt.n;return e}function It(){for(var e,t=Dt,i=1/0;t;)t=t.f?e?e.n=t.n:Dt=t.n:(t.t<i&&(i=t.t),(e=t).n);return Rt=e,i}function Pt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}L.timer=function(e,t,i){var n=arguments.length;n<2&&(t=0);n={c:e,t:(i=n<3?Date.now():i)+t,f:!1,n:null};Rt?Rt.n=n:Dt=n,Rt=n,Ot||(Ft=clearTimeout(Ft),Ot=1,Mt(Nt))},L.timer.flush=function(){$t(),It()},L.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Gt=["y","z","a","f","p","n","¬µ","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var i=Math.pow(10,3*O(8-t));return{scale:8<t?function(e){return e/i}:function(e){return e*i},symbol:e}});L.formatPrefix=function(e,t){var i=0;return e&&(e<0&&(e*=-1),t&&(e=L.round(e,Pt(e,t))),i=1+Math.floor(1e-12+Math.log(e)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i-1)/3)))),Gt[8+i/3]};var Bt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Wt=L.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=L.round(e,Pt(e,t))).toFixed(Math.max(0,Math.min(20,Pt(e*(1+1e-15),t))))}});function Ht(e){return e+""}var _=L.time={},A=Date;function Vt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Vt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){jt.setUTCDate.apply(this._,arguments)},setDay:function(){jt.setUTCDay.apply(this._,arguments)},setFullYear:function(){jt.setUTCFullYear.apply(this._,arguments)},setHours:function(){jt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){jt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){jt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){jt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){jt.setUTCSeconds.apply(this._,arguments)},setTime:function(){jt.setTime.apply(this._,arguments)}};var jt=Date.prototype;function zt(n,r,s){function e(e){var t=n(e),i=o(t,1);return e-t<i-e?t:i}function a(e){return r(e=n(new A(e-1)),1),e}function o(e,t){return r(e=new A(+e),t),e}function l(e,t,i){var n=a(e),o=[];if(1<i)for(;n<t;)s(n)%i||o.push(new Date(+n)),r(n,1);else for(;n<t;)o.push(new Date(+n)),r(n,1);return o}(n.floor=n).round=e,n.ceil=a,n.offset=o,n.range=l;var t=n.utc=Ut(n);return(t.floor=t).round=Ut(e),t.ceil=Ut(a),t.offset=Ut(o),t.range=function(e,t,i){try{var n=new(A=Vt);return n._=e,l(n,t,i)}finally{A=Date}},n}function Ut(n){return function(e,t){try{var i=new(A=Vt);return i._=e,n(i,t)._}finally{A=Date}}}function Yt(e){var t=e.dateTime,i=e.date,n=e.time,o=e.periods,r=e.days,s=e.shortDays,a=e.months,l=e.shortMonths;function c(a){var l=a.length;function e(e){for(var t,i,n,o=[],r=-1,s=0;++r<l;)37===a.charCodeAt(r)&&(o.push(a.slice(s,r)),null!=(i=qt[t=a.charAt(++r)])&&(t=a.charAt(++r)),(n=w[t])&&(t=n(e,null==i?"e"===t?" ":"0":i)),o.push(t),s=r+1);return o.push(a.slice(s,r)),o.join("")}return e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(t,a,e,0)!=e.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);var e=null!=t.Z&&A!==Vt,i=new(e?Vt:A);return"j"in t?i.setFullYear(t.y,0,t.j):"w"in t&&("W"in t||"U"in t)?(i.setFullYear(t.y,0,1),i.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(i.getDay()+5)%7:t.w+7*t.U-(i.getDay()+6)%7)):i.setFullYear(t.y,t.m,t.d),i.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L),e?i._:i},e.toString=function(){return a},e}function u(e,t,i,n){for(var o,r,s=0,a=t.length,l=i.length;s<a;){if(l<=n)return-1;if(37===(o=t.charCodeAt(s++))){if(r=t.charAt(s++),!(r=C[r in qt?t.charAt(s++):r])||(n=r(e,i,n))<0)return-1}else if(o!=i.charCodeAt(n++))return-1}return n}c.multi=(c.utc=function(e){var i=c(e);function t(e){try{var t=new(A=Vt);return t._=e,i(t)}finally{A=Date}}return t.parse=function(e){try{A=Vt;var t=i.parse(e);return t&&t._}finally{A=Date}},t.toString=i.toString,t}).multi=pi;var d=L.map(),h=Xt(r),p=Qt(r),f=Xt(s),g=Qt(s),m=Xt(a),v=Qt(a),y=Xt(l),b=Qt(l),w=(o.forEach(function(e,t){d.set(e.toLowerCase(),t)}),{a:function(e){return s[e.getDay()]},A:function(e){return r[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:c(t),d:function(e,t){return T(e.getDate(),t,2)},e:function(e,t){return T(e.getDate(),t,2)},H:function(e,t){return T(e.getHours(),t,2)},I:function(e,t){return T(e.getHours()%12||12,t,2)},j:function(e,t){return T(1+_.dayOfYear(e),t,3)},L:function(e,t){return T(e.getMilliseconds(),t,3)},m:function(e,t){return T(e.getMonth()+1,t,2)},M:function(e,t){return T(e.getMinutes(),t,2)},p:function(e){return o[+(12<=e.getHours())]},S:function(e,t){return T(e.getSeconds(),t,2)},U:function(e,t){return T(_.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return T(_.mondayOfYear(e),t,2)},x:c(i),X:c(n),y:function(e,t){return T(e.getFullYear()%100,t,2)},Y:function(e,t){return T(e.getFullYear()%1e4,t,4)},Z:di,"%":function(){return"%"}}),C={a:function(e,t,i){f.lastIndex=0;t=f.exec(t.slice(i));return t?(e.w=g.get(t[0].toLowerCase()),i+t[0].length):-1},A:function(e,t,i){h.lastIndex=0;t=h.exec(t.slice(i));return t?(e.w=p.get(t[0].toLowerCase()),i+t[0].length):-1},b:function(e,t,i){y.lastIndex=0;t=y.exec(t.slice(i));return t?(e.m=b.get(t[0].toLowerCase()),i+t[0].length):-1},B:function(e,t,i){m.lastIndex=0;t=m.exec(t.slice(i));return t?(e.m=v.get(t[0].toLowerCase()),i+t[0].length):-1},c:function(e,t,i){return u(e,w.c.toString(),t,i)},d:ri,e:ri,H:ai,I:ai,j:si,L:ui,m:oi,M:li,p:function(e,t,i){t=d.get(t.slice(i,i+=2).toLowerCase());return null==t?-1:(e.p=t,i)},S:ci,U:Jt,w:Zt,W:ei,x:function(e,t,i){return u(e,w.x.toString(),t,i)},X:function(e,t,i){return u(e,w.X.toString(),t,i)},y:ii,Y:ti,Z:ni,"%":hi};return c}_.year=zt(function(e){return(e=_.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),_.years=_.year.range,_.years.utc=_.year.utc.range,_.day=zt(function(e){var t=new A(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),_.days=_.day.range,_.days.utc=_.day.utc.range,_.dayOfYear=function(e){var t=_.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,i){i=7-i;var t=_[e]=zt(function(e){return(e=_.day(e)).setDate(e.getDate()-(e.getDay()+i)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var t=_.year(e).getDay();return Math.floor((_.dayOfYear(e)+(t+i)%7)/7)-(t!==i)});_[e+"s"]=t.range,_[e+"s"].utc=t.utc.range,_[e+"OfYear"]=function(e){var t=_.year(e).getDay();return Math.floor((_.dayOfYear(e)+(t+i)%7)/7)}}),_.week=_.sunday,_.weeks=_.sunday.range,_.weeks.utc=_.sunday.utc.range,_.weekOfYear=_.sundayOfYear;var qt={"-":"",_:" ",0:"0"},a=/^\s*\d+/,Kt=/^%/;function T(e,t,i){var n=e<0?"-":"",e=(n?-e:e)+"",o=e.length;return n+(o<i?new Array(i-o+1).join(t)+e:e)}function Xt(e){return new RegExp("^(?:"+e.map(L.requote).join("|")+")","i")}function Qt(e){for(var t=new K,i=-1,n=e.length;++i<n;)t.set(e[i].toLowerCase(),i);return t}function Zt(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+1));return t?(e.w=+t[0],i+t[0].length):-1}function Jt(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i));return t?(e.U=+t[0],i+t[0].length):-1}function ei(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i));return t?(e.W=+t[0],i+t[0].length):-1}function ti(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+4));return t?(e.y=+t[0],i+t[0].length):-1}function ii(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+2));return t?(e.y=(e=+t[0])+(68<e?1900:2e3),i+t[0].length):-1}function ni(e,t,i){return/^[+-]\d{4}$/.test(t=t.slice(i,i+5))?(e.Z=-t,i+5):-1}function oi(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+2));return t?(e.m=t[0]-1,i+t[0].length):-1}function ri(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+2));return t?(e.d=+t[0],i+t[0].length):-1}function si(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+3));return t?(e.j=+t[0],i+t[0].length):-1}function ai(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+2));return t?(e.H=+t[0],i+t[0].length):-1}function li(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+2));return t?(e.M=+t[0],i+t[0].length):-1}function ci(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+2));return t?(e.S=+t[0],i+t[0].length):-1}function ui(e,t,i){a.lastIndex=0;t=a.exec(t.slice(i,i+3));return t?(e.L=+t[0],i+t[0].length):-1}function di(e){var e=e.getTimezoneOffset(),t=0<e?"-":"+",i=O(e)/60|0,e=O(e)%60;return t+T(i,"0",2)+T(e,"0",2)}function hi(e,t,i){Kt.lastIndex=0;t=Kt.exec(t.slice(i,i+1));return t?i+t[0].length:-1}function pi(n){for(var e=n.length,t=-1;++t<e;)n[t][0]=this(n[t][0]);return function(e){for(var t=0,i=n[t];!i[1](e);)i=n[++t];return i[0](e)}}L.locale=function(e){return{numberFormat:(C=e.decimal,a=e.thousands,l=e.grouping,i=e.currency,_=l&&a?function(e,t){for(var i=e.length,n=[],o=0,r=l[0],s=0;0<i&&0<r&&(t<s+r+1&&(r=Math.max(1,t-s)),n.push(e.substring(i-=r,i+r)),!((s+=r+1)>t));)r=l[o=(o+1)%l.length];return n.reverse().join(a)}:R,function(e){var e=Bt.exec(e),a=e[1]||" ",l=e[2]||">",c=e[3]||"-",t=e[4]||"",u=e[5],d=+e[6],h=e[7],p=e[8],f=e[9],g=1,m="",v="",y=!1,b=!0,p=p&&+p.substring(1);switch((u||"0"===a&&"="===l)&&(u=a="0",l="="),f){case"n":h=!0,f="g";break;case"%":g=100,v="%",f="f";break;case"p":g=100,v="%",f="r";break;case"b":case"o":case"x":case"X":"#"===t&&(m="0"+f.toLowerCase());case"c":b=!1;case"d":y=!0,p=0;break;case"s":g=-1,f="r"}"$"===t&&(m=i[0],v=i[1]),"r"!=f||p||(f="g"),null!=p&&("g"==f?p=Math.max(1,Math.min(21,p)):"e"!=f&&"f"!=f||(p=Math.max(0,Math.min(20,p))));var f=Wt.get(f)||Ht,w=u&&h;return function(e){var t=v;if(y&&e%1)return"";var i,n,o=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===c?"":c,r=(g<0?(e=(r=L.formatPrefix(e,p)).scale(e),t=r.symbol+v):e*=g,(e=f(e,p)).lastIndexOf(".")),r=(n=r<0?(n=b?e.lastIndexOf("e"):-1)<0?(i=e,""):(i=e.substring(0,n),e.substring(n)):(i=e.substring(0,r),C+e.substring(r+1)),!u&&h&&(i=_(i,1/0)),m.length+i.length+n.length+(w?0:o.length)),s=r<d?new Array(r=d-r+1).join(a):"";return w&&(i=_(s+i,s.length?d-n.length:1/0)),o+=m,e=i+n,("<"===l?o+e+s:">"===l?s+o+e:"^"===l?s.substring(0,r>>=1)+o+e+s.substring(r):o+(w?e:s+e))+t}}),timeFormat:Yt(e)};var C,a,l,i,_};i=L.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fi(){}L.format=i.numberFormat,L.geo={},fi.prototype={s:0,t:0,add:function(e){mi(e,this.t,gi),mi(gi.s,this.s,this),this.s?this.t+=gi.t:this.s=gi.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gi=new fi;function mi(e,t,i){var n=i.s=e+t,o=n-e;i.t=e-(n-o)+(t-o)}function vi(e,t){e&&bi.hasOwnProperty(e.type)&&bi[e.type](e,t)}L.geo.stream=function(e,t){e&&yi.hasOwnProperty(e.type)?yi[e.type](e,t):vi(e,t)};var yi={Feature:function(e,t){vi(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,n=-1,o=i.length;++n<o;)vi(i[n].geometry,t)}},bi={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)e=i[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){wi(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)wi(i[n],t,0)},Polygon:function(e,t){Ci(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)Ci(i[n],t)},GeometryCollection:function(e,t){for(var i=e.geometries,n=-1,o=i.length;++n<o;)vi(i[n],t)}};function wi(e,t,i){var n,o=-1,r=e.length-i;for(t.lineStart();++o<r;)n=e[o],t.point(n[0],n[1],n[2]);t.lineEnd()}function Ci(e,t){var i=-1,n=e.length;for(t.polygonStart();++i<n;)wi(e[i],t,1);t.polygonEnd()}L.geo.area=function(e){return _i=0,L.geo.stream(e,g),_i};var _i,c,u,d,h,Ai,Ei,xi,Si,Ti,ki,Di,p,Ri,Oi,Fi,Li,Mi,Ni,$i,f,Ii,Pi,Gi,Bi=new fi,g={sphere:function(){_i+=4*D},point:l,lineStart:l,lineEnd:l,polygonStart:function(){Bi.reset(),g.lineStart=Wi},polygonEnd:function(){var e=2*Bi;_i+=e<0?4*D+e:e,g.lineStart=g.lineEnd=g.point=l}};function Wi(){var i,n,a,l,c;function o(e,t){t=t*E/2+D/4;var i=(e*=E)-a,n=0<=i?1:-1,i=n*i,o=Math.cos(t),t=Math.sin(t),r=c*t,s=l*o+r*Math.cos(i),r=r*n*Math.sin(i);Bi.add(Math.atan2(r,s)),a=e,l=o,c=t}g.point=function(e,t){g.point=o,a=(i=e)*E,l=Math.cos(t=(n=t)*E/2+D/4),c=Math.sin(t)},g.lineEnd=function(){o(i,n)}}function Hi(e){var t=e[0],e=e[1],i=Math.cos(e);return[i*Math.cos(t),i*Math.sin(t),Math.sin(e)]}function Vi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ji(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zi(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ui(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Yi(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function qi(e){return[Math.atan2(e[1],e[0]),Ze(e[2])]}function Ki(e,t){return O(e[0]-t[0])<F&&O(e[1]-t[1])<F}function Xi(e,t){ki.push(Di=[c=e,d=e]),t<u&&(u=t),h<t&&(h=t)}function Qi(e,t){var i,n,o,r,s,a=Hi([e*E,t*E]);Si?(i=ji(Si,a),Yi(i=ji([i[1],-i[0],0],i)),i=qi(i),r=e-Ai,o=i[0]*S*(n=0<r?1:-1),(r=180<O(r))^(n*Ai<o&&o<n*e)?(s=i[1]*S,h<s&&(h=s)):r^(n*Ai<(o=(o+360)%360-180)&&o<n*e)?(s=-i[1]*S)<u&&(u=s):(t<u&&(u=t),h<t&&(h=t)),r?e<Ai?m(c,e)>m(c,d)&&(d=e):m(e,d)>m(c,d)&&(c=e):c<=d?(e<c&&(c=e),d<e&&(d=e)):Ai<e?m(c,e)>m(c,d)&&(d=e):m(e,d)>m(c,d)&&(c=e)):Xi(e,t),Si=a,Ai=e}function Zi(){p.point=Qi}function Ji(){Di[0]=c,Di[1]=d,p.point=Xi,Si=null}function en(e,t){var i;Si?Ti+=180<O(i=e-Ai)?i+(0<i?360:-360):i:(Ei=e,xi=t),g.point(e,t),Qi(e,t)}function tn(){g.lineStart()}function nn(){en(Ei,xi),g.lineEnd(),O(Ti)>F&&(c=-(d=180)),Di[0]=c,Di[1]=d,Si=null}function m(e,t){return(t-=e)<0?t+360:t}function on(e,t){return e[0]-t[0]}function rn(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}L.geo.bounds=(p={point:Xi,lineStart:Zi,lineEnd:Ji,polygonStart:function(){p.point=en,p.lineStart=tn,p.lineEnd=nn,Ti=0,g.polygonStart()},polygonEnd:function(){g.polygonEnd(),p.point=Xi,p.lineStart=Zi,p.lineEnd=Ji,Bi<0?(c=-(d=180),u=-(h=90)):F<Ti?h=90:Ti<-F&&(u=-90),Di[0]=c,Di[1]=d}},function(e){if(h=d=-(c=u=1/0),ki=[],L.geo.stream(e,p),o=ki.length){ki.sort(on);for(var t=1,i=[a=ki[0]];t<o;++t)rn((r=ki[t])[0],a)||rn(r[1],a)?(m(a[0],r[1])>m(a[0],a[1])&&(a[1]=r[1]),m(r[0],a[1])>m(a[0],a[1])&&(a[0]=r[0])):i.push(a=r);for(var n,o,r,s=-1/0,t=0,a=i[o=i.length-1];t<=o;a=r,++t)r=i[t],(n=m(a[1],r[0]))>s&&(s=n,c=r[0],d=a[1])}return ki=Di=null,c===1/0||u===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,u],[d,h]]}),L.geo.centroid=function(e){Ri=Oi=Fi=Li=Mi=Ni=$i=f=Ii=Pi=Gi=0,L.geo.stream(e,v);var e=Ii,t=Pi,i=Gi,n=e*e+t*t+i*i;return n<Ye&&(e=Ni,t=$i,i=f,Oi<F&&(e=Fi,t=Li,i=Mi),(n=e*e+t*t+i*i)<Ye)?[NaN,NaN]:[Math.atan2(t,e)*S,Ze(i/Math.sqrt(n))*S]};var v={sphere:l,point:sn,lineStart:ln,lineEnd:cn,polygonStart:function(){v.lineStart=un},polygonEnd:function(){v.lineStart=ln}};function sn(e,t){e*=E;var i=Math.cos(t*=E);an(i*Math.cos(e),i*Math.sin(e),Math.sin(t))}function an(e,t,i){Fi+=(e-Fi)/++Ri,Li+=(t-Li)/Ri,Mi+=(i-Mi)/Ri}function ln(){var o,r,s;function n(e,t){e*=E;var i=Math.cos(t*=E),n=i*Math.cos(e),i=i*Math.sin(e),e=Math.sin(t),t=Math.atan2(Math.sqrt((t=r*e-s*i)*t+(t=s*n-o*e)*t+(t=o*i-r*n)*t),o*n+r*i+s*e);Oi+=t,Ni+=t*(o+(o=n)),$i+=t*(r+(r=i)),f+=t*(s+(s=e)),an(o,r,s)}v.point=function(e,t){e*=E;var i=Math.cos(t*=E);o=i*Math.cos(e),r=i*Math.sin(e),s=Math.sin(t),v.point=n,an(o,r,s)}}function cn(){v.point=sn}function un(){var n,o,c,u,d;function r(e,t){e*=E;var i=Math.cos(t*=E),n=i*Math.cos(e),i=i*Math.sin(e),e=Math.sin(t),t=u*e-d*i,o=d*n-c*e,r=c*i-u*n,s=Math.sqrt(t*t+o*o+r*r),a=c*n+u*i+d*e,l=s&&-Qe(a)/s,s=Math.atan2(s,a);Ii+=l*t,Pi+=l*o,Gi+=l*r,Oi+=s,Ni+=s*(c+(c=n)),$i+=s*(u+(u=i)),f+=s*(d+(d=e)),an(c,u,d)}v.point=function(e,t){n=e,o=t,v.point=r,e*=E;var i=Math.cos(t*=E);c=i*Math.cos(e),u=i*Math.sin(e),d=Math.sin(t),an(c,u,d)},v.lineEnd=function(){r(n,o),v.lineEnd=cn,v.point=sn}}function dn(i,n){function e(e,t){return e=i(e,t),n(e[0],e[1])}return i.invert&&n.invert&&(e.invert=function(e,t){return(e=n.invert(e,t))&&i.invert(e[0],e[1])}),e}function hn(){return!0}function pn(e,t,i,n,a){var l=[],c=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,i=e[0],n=e[t];if(Ki(i,n)){a.lineStart();for(var o=0;o<t;++o)a.point((i=e[o])[0],i[1]);a.lineEnd()}else{var r=new gn(i,e,null,!0),s=new gn(i,null,r,!1);r.o=s,l.push(r),c.push(s),r=new gn(n,e,null,!1),s=new gn(n,null,r,!0),r.o=s,l.push(r),c.push(s)}}}),c.sort(t),fn(l),fn(c),l.length){for(var o=0,r=i,s=c.length;o<s;++o)c[o].e=r=!r;for(var u,d=l[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;f=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,s=f.length;o<s;++o)a.point((u=f[o])[0],u[1]);else n(h.x,h.n.x,1,a);h=h.n}else{if(p)for(var f,o=(f=h.p.z).length-1;0<=o;--o)a.point((u=f[o])[0],u[1]);else n(h.x,h.p.x,-1,a);h=h.p}}while(f=(h=h.o).z,p=!p,!h.v);a.lineEnd()}}}function fn(e){if(t=e.length){for(var t,i,n=0,o=e[0];++n<t;)o.n=i=e[n],i.p=o,o=i;o.n=i=e[0],i.p=o}}function gn(e,t,i,n){this.x=e,this.z=t,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function mn(y,b,w,C){return function(n,s){var a,i=b(s),t=n.invert(C[0],C[1]),o={point:r,lineStart:l,lineEnd:c,polygonStart:function(){o.point=g,o.lineStart=m,o.lineEnd=v,a=[],u=[]},polygonEnd:function(){o.point=r,o.lineStart=l,o.lineEnd=c,a=L.merge(a);var e=function(e,t){var i=e[0],n=e[1],o=[Math.sin(i),-Math.cos(i),0],r=0,s=0;Bi.reset();for(var a=0,l=t.length;a<l;++a){var c=t[a],u=c.length;if(u)for(var d=c[0],h=d[0],p=d[1]/2+D/4,f=Math.sin(p),g=Math.cos(p),m=1;;){var v=(e=c[m=m===u?0:m])[0],y=e[1]/2+D/4,b=Math.sin(y),y=Math.cos(y),w=v-h,C=0<=w?1:-1,_=C*w,A=D<_,E=f*b;if(Bi.add(Math.atan2(E*C*Math.sin(_),g*y+E*Math.cos(_))),r+=A?w+C*x:w,A^i<=h^i<=v&&(Yi(E=ji(Hi(d),Hi(e))),Yi(_=ji(o,E)),((C=(A^0<=w?-1:1)*Ze(_[2]))<n||n===C&&(E[0]||E[1]))&&(s+=A^0<=w?1:-1)),!m++)break;h=v,f=b,g=y,d=e}}return(r<-F||r<F&&Bi<0)^1&s}(t,u);a.length?(f||(s.polygonStart(),f=!0),pn(a,bn,e,w,s)):e&&(f||(s.polygonStart(),f=!0),s.lineStart(),w(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),a=u=null},sphere:function(){s.polygonStart(),s.lineStart(),w(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function r(e,t){var i=n(e,t);y(e=i[0],t=i[1])&&s.point(e,t)}function e(e,t){e=n(e,t);i.point(e[0],e[1])}function l(){o.point=e,i.lineStart()}function c(){o.point=r,i.lineEnd()}var u,d,h=yn(),p=b(h),f=!1;function g(e,t){d.push([e,t]);e=n(e,t);p.point(e[0],e[1])}function m(){p.lineStart(),d=[]}function v(){g(d[0][0],d[0][1]),p.lineEnd();var e=p.clean(),t=h.buffer(),i=t.length;if(d.pop(),u.push(d),d=null,i)if(1&e){var n,o,r=-1;if(0<(i=(n=t[0]).length-1)){for(f||(s.polygonStart(),f=!0),s.lineStart();++r<i;)s.point((o=n[r])[0],o[1]);s.lineEnd()}}else 1<i&&2&e&&t.push(t.pop().concat(t.shift())),a.push(t.filter(vn))}return o}}function vn(e){return 1<e.length}function yn(){var i,t=[];return{lineStart:function(){t.push(i=[])},point:function(e,t){i.push([e,t])},lineEnd:l,buffer:function(){var e=t;return t=[],i=null,e},rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))}}}function bn(e,t){return((e=e.x)[0]<0?e[1]-N-F:N-e[1])-((t=t.x)[0]<0?t[1]-N-F:N-t[1])}var wn=mn(hn,function(c){var u,d=NaN,h=NaN,p=NaN;return{lineStart:function(){c.lineStart(),u=1},point:function(e,t){var i,n,o,r,s,a=0<e?D:-D,l=O(e-d);O(l-D)<F?(c.point(d,h=0<(h+t)/2?N:-N),c.point(p,h),c.lineEnd(),c.lineStart(),c.point(a,h),c.point(e,h),u=0):p!==a&&D<=l&&(O(d-p)<F&&(d-=p*F),O(e-a)<F&&(e-=a*F),l=d,i=h,n=e,o=t,s=Math.sin(l-n),h=O(s)>F?Math.atan((Math.sin(i)*(r=Math.cos(o))*Math.sin(n)-Math.sin(o)*(n=Math.cos(i))*Math.sin(l))/(n*r*s)):(i+o)/2,c.point(p,h),c.lineEnd(),c.lineStart(),c.point(a,h),u=0),c.point(d=e,h=t),p=a},lineEnd:function(){c.lineEnd(),d=h=NaN},clean:function(){return 2-u}}},function(e,t,i,n){var o;null==e?(o=i*N,n.point(-D,o),n.point(0,o),n.point(D,o),n.point(D,0),n.point(D,-o),n.point(0,-o),n.point(-D,-o),n.point(-D,0),n.point(-D,o)):O(e[0]-t[0])>F?(e=e[0]<t[0]?D:-D,o=i*e/2,n.point(-e,o),n.point(0,o),n.point(e,o)):n.point(t[0],t[1])},[-D,-D/2]);function Cn(o){var p=Math.cos(o),d=0<p,h=O(p)>F;return mn(f,function(r){var s,a,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(e,t){var i,n=[e,t],o=f(e,t),e=d?o?0:m(e,t):o?m(e+(e<0?D:-D),t):0;!s&&(c=l=o)&&r.lineStart(),o!==l&&(i=g(s,n),(Ki(s,i)||Ki(n,i))&&(n[0]+=F,n[1]+=F,o=f(n[0],n[1]))),o!==l?(u=0,o?(r.lineStart(),i=g(n,s),r.point(i[0],i[1])):(i=g(s,n),r.point(i[0],i[1]),r.lineEnd()),s=i):h&&s&&d^o&&(e&a||!(t=g(n,s,!0))||(u=0,d?(r.lineStart(),r.point(t[0][0],t[0][1]),r.point(t[1][0],t[1][1]),r.lineEnd()):(r.point(t[1][0],t[1][1]),r.lineEnd(),r.lineStart(),r.point(t[0][0],t[0][1])))),!o||s&&Ki(s,n)||r.point(n[0],n[1]),s=n,l=o,a=e},lineEnd:function(){l&&r.lineEnd(),s=null},clean:function(){return u|(c&&l)<<1}}},io(o,6*E),d?[0,-o]:[-D,o-D]);function f(e,t){return Math.cos(e)*Math.cos(t)>p}function g(e,t,i){var n=[1,0,0],o=ji(Hi(e),Hi(t)),r=Vi(o,o),s=o[0],a=r-s*s;if(!a)return!i&&e;var l=ji(n,o),n=Ui(n,p*r/a),r=(zi(n,Ui(o,-p*s/a)),l),o=Vi(n,r),s=Vi(r,r),a=o*o-s*(Vi(n,n)-1);if(!(a<0)){l=Math.sqrt(a),a=Ui(r,(-o-l)/s);if(zi(a,n),a=qi(a),!i)return a;var c,i=e[0],u=t[0],e=e[1],t=t[1],d=(u<i&&(c=i,i=u,u=c),u-i),h=O(d-D)<F;return!h&&t<e&&(c=e,e=t,t=c),(h||d<F?h?0<e+t^a[1]<(O(a[0]-i)<F?e:t):e<=a[1]&&a[1]<=t:D<d^(i<=a[0]&&a[0]<=u))?(zi(c=Ui(r,(-o+l)/s),n),[a,qi(c)]):void 0}}function m(e,t){var i=d?o:D-o,n=0;return e<-i?n|=1:i<e&&(n|=2),t<-i?n|=4:i<t&&(n|=8),n}}function _n(l,c,u,d){return function(e){var t=e.a,i=e.b,n=t.x,t=t.y,o=0,r=1,s=i.x-n,i=i.y-t,a=l-n;if(s||!(0<a)){if(a/=s,s<0){if(a<o)return;a<r&&(r=a)}else if(0<s){if(r<a)return;o<a&&(o=a)}if(a=u-n,s||!(a<0)){if(a/=s,s<0){if(r<a)return;o<a&&(o=a)}else if(0<s){if(a<o)return;a<r&&(r=a)}if(a=c-t,i||!(0<a)){if(a/=i,i<0){if(a<o)return;a<r&&(r=a)}else if(0<i){if(r<a)return;o<a&&(o=a)}if(a=d-t,i||!(a<0)){if(a/=i,i<0){if(r<a)return;o<a&&(o=a)}else if(0<i){if(a<o)return;a<r&&(r=a)}return 0<o&&(e.a={x:n+o*s,y:t+o*i}),r<1&&(e.b={x:n+r*s,y:t+r*i}),e}}}}}}var An=1e9;function En(w,C,_,A){return function(o){var n,u,r,s,a,l,c,d,h,p,f,g=o,e=yn(),m=_n(w,C,_,A),t={point:i,lineStart:function(){t.point=b,u&&u.push(r=[]);p=!0,h=!1,c=d=NaN},lineEnd:function(){n&&(b(s,a),l&&h&&e.rejoin(),n.push(e.buffer()));t.point=i,h&&o.lineEnd()},polygonStart:function(){o=e,n=[],u=[],f=!0},polygonEnd:function(){o=g,n=L.merge(n);var e=function(e){for(var t=0,i=u.length,n=e[1],o=0;o<i;++o)for(var r,s=1,a=u[o],l=a.length,c=a[0];s<l;++s)r=a[s],c[1]<=n?r[1]>n&&0<Xe(c,r,e)&&++t:r[1]<=n&&Xe(c,r,e)<0&&--t,c=r;return 0!==t}([w,A]),t=f&&e,i=n.length;(t||i)&&(o.polygonStart(),t&&(o.lineStart(),v(null,null,1,o),o.lineEnd()),i&&pn(n,x,e,v,o),o.polygonEnd()),n=u=r=null}};function v(e,t,i,n){var o=0,r=0;if(null==e||(o=E(e,i))!==(r=E(t,i))||S(e,t)<0^0<i)for(;n.point(0===o||3===o?w:_,1<o?A:C),(o=(o+i+4)%4)!==r;);else n.point(t[0],t[1])}function y(e,t){return w<=e&&e<=_&&C<=t&&t<=A}function i(e,t){y(e,t)&&o.point(e,t)}function b(e,t){var i,n=y(e=Math.max(-An,Math.min(An,e)),t=Math.max(-An,Math.min(An,t)));u&&r.push([e,t]),p?(s=e,a=t,p=!1,(l=n)&&(o.lineStart(),o.point(e,t))):n&&h?o.point(e,t):m(i={a:{x:c,y:d},b:{x:e,y:t}})?(h||(o.lineStart(),o.point(i.a.x,i.a.y)),o.point(i.b.x,i.b.y),n||o.lineEnd(),f=!1):n&&(o.lineStart(),o.point(e,t),f=!1),c=e,d=t,h=n}return t};function E(e,t){return O(e[0]-w)<F?0<t?0:3:O(e[0]-_)<F?0<t?2:1:O(e[1]-C)<F?0<t?1:0:0<t?3:2}function x(e,t){return S(e.x,t.x)}function S(e,t){var i=E(e,1),n=E(t,1);return i!==n?i-n:0===i?t[1]-e[1]:1===i?e[0]-t[0]:2===i?e[1]-t[1]:t[0]-e[0]}}function xn(e){var t=0,i=D/3,n=qn(e),e=n(t,i);return e.parallels=function(e){return arguments.length?n(t=e[0]*D/180,i=e[1]*D/180):[t/D*180,i/D*180]},e}function Sn(e,t){var e=Math.sin(e),i=(e+Math.sin(t))/2,n=1+e*(2*i-e),o=Math.sqrt(n)/i;function r(e,t){t=Math.sqrt(n-2*i*Math.sin(t))/i;return[t*Math.sin(e*=i),o-t*Math.cos(e)]}return r.invert=function(e,t){t=o-t;return[Math.atan2(e,t)/i,Ze((n-(e*e+t*t)*i*i)/(2*i))]},r}L.geo.clipExtent=function(){var t,i,n,o,r,s,a={stream:function(e){return r&&(r.valid=!1),(r=s(e)).valid=!0,r},extent:function(e){return arguments.length?(s=En(t=+e[0][0],i=+e[0][1],n=+e[1][0],o=+e[1][1]),r&&(r.valid=!1,r=null),a):[[t,i],[n,o]]}};return a.extent([[0,0],[960,500]])},(L.geo.conicEqualArea=function(){return xn(Sn)}).raw=Sn,L.geo.albers=function(){return L.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},L.geo.albersUsa=function(){var i,o,r,s,a=L.geo.albers(),l=L.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=L.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){i=[e,t]}};function d(e){var t=e[0],e=e[1];return i=null,o(t,e),i||(r(t,e),i)||s(t,e),i}return d.invert=function(e){var t=a.scale(),i=a.translate(),n=(e[0]-i[0])/t,i=(e[1]-i[1])/t;return(.12<=i&&i<.234&&-.425<=n&&n<-.214?l:.166<=i&&i<.234&&-.214<=n&&n<-.115?c:a).invert(e)},d.stream=function(e){var i=a.stream(e),n=l.stream(e),o=c.stream(e);return{point:function(e,t){i.point(e,t),n.point(e,t),o.point(e,t)},sphere:function(){i.sphere(),n.sphere(),o.sphere()},lineStart:function(){i.lineStart(),n.lineStart(),o.lineStart()},lineEnd:function(){i.lineEnd(),n.lineEnd(),o.lineEnd()},polygonStart:function(){i.polygonStart(),n.polygonStart(),o.polygonStart()},polygonEnd:function(){i.polygonEnd(),n.polygonEnd(),o.polygonEnd()}}},d.precision=function(e){return arguments.length?(a.precision(e),l.precision(e),c.precision(e),d):a.precision()},d.scale=function(e){return arguments.length?(a.scale(e),l.scale(.35*e),c.scale(e),d.translate(a.translate())):a.scale()},d.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),i=+e[0],n=+e[1];return o=a.translate(e).clipExtent([[i-.455*t,n-.238*t],[i+.455*t,n+.238*t]]).stream(u).point,r=l.translate([i-.307*t,n+.201*t]).clipExtent([[i-.425*t+F,n+.12*t+F],[i-.214*t-F,n+.234*t-F]]).stream(u).point,s=c.translate([i-.205*t,n+.212*t]).clipExtent([[i-.214*t+F,n+.166*t+F],[i-.115*t-F,n+.234*t-F]]).stream(u).point,d},d.scale(1070)};var Tn,kn,Dn,Rn,On,Fn,Ln={point:l,lineStart:l,lineEnd:l,polygonStart:function(){kn=0,Ln.lineStart=Mn},polygonEnd:function(){Ln.lineStart=Ln.lineEnd=Ln.point=l,Tn+=O(kn/2)}};function Mn(){var i,n,o,r;function s(e,t){kn+=r*e-o*t,o=e,r=t}Ln.point=function(e,t){Ln.point=s,i=o=e,n=r=t},Ln.lineEnd=function(){s(i,n)}}var Nn={point:function(e,t){e<Dn&&(Dn=e);On<e&&(On=e);t<Rn&&(Rn=t);Fn<t&&(Fn=t)},lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l};function $n(){var i=In(4.5),n=[],o={point:e,lineStart:function(){o.point=t},lineEnd:s,polygonStart:function(){o.lineEnd=a},polygonEnd:function(){o.lineEnd=s,o.point=e},pointRadius:function(e){return i=In(e),o},result:function(){var e;if(n.length)return e=n.join(""),n=[],e}};function e(e,t){n.push("M",e,",",t,i)}function t(e,t){n.push("M",e,",",t),o.point=r}function r(e,t){n.push("L",e,",",t)}function s(){o.point=e}function a(){n.push("Z")}return o}function In(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Pn,y={point:Gn,lineStart:Bn,lineEnd:Wn,polygonStart:function(){y.lineStart=Hn},polygonEnd:function(){y.point=Gn,y.lineStart=Bn,y.lineEnd=Wn}};function Gn(e,t){Fi+=e,Li+=t,++Mi}function Bn(){var o,r;function i(e,t){var i=e-o,n=t-r,i=Math.sqrt(i*i+n*n);Ni+=i*(o+e)/2,$i+=i*(r+t)/2,f+=i,Gn(o=e,r=t)}y.point=function(e,t){y.point=i,Gn(o=e,r=t)}}function Wn(){y.point=Gn}function Hn(){var i,n,o,r;function s(e,t){var i=e-o,n=t-r,i=Math.sqrt(i*i+n*n);Ni+=i*(o+e)/2,$i+=i*(r+t)/2,f+=i,Ii+=(i=r*e-o*t)*(o+e),Pi+=i*(r+t),Gi+=3*i,Gn(o=e,r=t)}y.point=function(e,t){y.point=s,Gn(i=o=e,n=r=t)},y.lineEnd=function(){s(i,n)}}function Vn(i){var n=4.5,o={point:e,lineStart:function(){o.point=t},lineEnd:s,polygonStart:function(){o.lineEnd=a},polygonEnd:function(){o.lineEnd=s,o.point=e},pointRadius:function(e){return n=e,o},result:l};function e(e,t){i.moveTo(e+n,t),i.arc(e,t,n,0,x)}function t(e,t){i.moveTo(e,t),o.point=r}function r(e,t){i.lineTo(e,t)}function s(){o.point=e}function a(){i.closePath()}return o}function jn(T){var k=.5,D=Math.cos(30*E),C=16;function t(e){return(C?n:i)(e)}function i(i){return Un(i,function(e,t){e=T(e,t),i.point(e[0],e[1])})}function n(n){var i,o,r,s,a,l,c,u,d,h,p,f,g={point:e,lineStart:t,lineEnd:v,polygonStart:function(){n.polygonStart(),g.lineStart=y},polygonEnd:function(){n.polygonEnd(),g.lineStart=t}};function e(e,t){e=T(e,t),n.point(e[0],e[1])}function t(){u=NaN,g.point=m,n.lineStart()}function m(e,t){var i=Hi([e,t]),t=T(e,t);R(u,d,c,h,p,f,u=t[0],d=t[1],c=e,h=i[0],p=i[1],f=i[2],C,n),n.point(u,d)}function v(){g.point=e,n.lineEnd()}function y(){t(),g.point=b,g.lineEnd=w}function b(e,t){m(i=e,t),o=u,r=d,s=h,a=p,l=f,g.point=m}function w(){R(u,d,c,h,p,f,o,r,i,s,a,l,C,n),g.lineEnd=v,v()}return g}function R(e,t,i,n,o,r,s,a,l,c,u,d,h,p){var f,g,m,v,y,b,w,C,_,A,E=s-e,x=a-t,S=E*E+x*x;4*k<S&&h--&&(f=n+c,g=o+u,m=r+d,v=Math.sqrt(f*f+g*g+m*m),w=Math.asin(m/=v),y=O(O(m)-1)<F||O(i-l)<F?(i+l)/2:Math.atan2(g,f),b=(w=T(y,w))[0],w=w[1],(k<(A=x*(C=b-e)-E*(_=w-t))*A/S||.3<O((E*C+x*_)/S-.5)||n*c+o*u+r*d<D)&&(R(e,t,i,n,o,r,b,w,y,f/=v,g/=v,m,h,p),p.point(b,w),R(b,w,y,f,g,m,s,a,l,c,u,d,h,p)))}return t.precision=function(e){return arguments.length?(C=0<(k=e*e)&&16,t):Math.sqrt(k)},t}function zn(e){this.stream=e}function Un(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Yn(e){return qn(function(){return e})()}function qn(e){var i,t,n,o,r,s,a=jn(function(e,t){return[(e=i(e,t))[0]*l+o,r-e[1]*l]}),l=150,c=480,u=250,d=0,h=0,p=0,f=0,g=0,m=wn,v=R,y=null,b=null;function w(e){return[(e=n(e[0]*E,e[1]*E))[0]*l+o,r-e[1]*l]}function C(e){return(e=n.invert((e[0]-o)/l,(r-e[1])/l))&&[e[0]*S,e[1]*S]}function _(){n=dn(t=Zn(p,f,g),i);var e=i(d,h);return o=c-e[0]*l,r=u+e[1]*l,A()}function A(){return s&&(s.valid=!1,s=null),w}return w.stream=function(e){return s&&(s.valid=!1),(s=Kn(m(t,a(v(e))))).valid=!0,s},w.clipAngle=function(e){return arguments.length?(m=null==e?(y=e,wn):Cn((y=+e)*E),A()):y},w.clipExtent=function(e){return arguments.length?(v=(b=e)?En(e[0][0],e[0][1],e[1][0],e[1][1]):R,A()):b},w.scale=function(e){return arguments.length?(l=+e,_()):l},w.translate=function(e){return arguments.length?(c=+e[0],u=+e[1],_()):[c,u]},w.center=function(e){return arguments.length?(d=e[0]%360*E,h=e[1]%360*E,_()):[d*S,h*S]},w.rotate=function(e){return arguments.length?(p=e[0]%360*E,f=e[1]%360*E,g=2<e.length?e[2]%360*E:0,_()):[p*S,f*S,g*S]},L.rebind(w,a,"precision"),function(){return i=e.apply(this,arguments),w.invert=i.invert&&C,_()}}function Kn(i){return Un(i,function(e,t){i.point(e*E,t*E)})}function Xn(e,t){return[e,t]}function Qn(e,t){return[D<e?e-x:e<-D?e+x:e,t]}function Zn(e,t,i){return e?t||i?dn(eo(e),to(t,i)):eo(e):t||i?to(t,i):Qn}function Jn(i){return function(e,t){return[D<(e+=i)?e-x:e<-D?e+x:e,t]}}function eo(e){var t=Jn(e);return t.invert=Jn(-e),t}function to(e,t){var o=Math.cos(e),r=Math.sin(e),s=Math.cos(t),a=Math.sin(t);function i(e,t){var i=Math.cos(t),n=Math.cos(e)*i,e=Math.sin(e)*i,i=Math.sin(t),t=i*o+n*r;return[Math.atan2(e*s-t*a,n*o-i*r),Ze(t*s+e*a)]}return i.invert=function(e,t){var i=Math.cos(t),n=Math.cos(e)*i,e=Math.sin(e)*i,i=Math.sin(t),t=i*s-e*a;return[Math.atan2(e*s+i*a,n*o+t*r),Ze(t*o-n*r)]},i}function io(a,l){var c=Math.cos(a),u=Math.sin(a);return function(e,t,i,n){var o=i*l;null!=e?(e=no(c,e),t=no(c,t),(0<i?e<t:t<e)&&(e+=i*x)):(e=a+i*x,t=a-.5*o);for(var r,s=e;0<i?t<s:s<t;s-=o)n.point((r=qi([c,-u*Math.cos(s),-u*Math.sin(s)]))[0],r[1])}}function no(e,t){t=Hi(t),t[0]-=e,Yi(t),e=Qe(-t[1]);return((-t[2]<0?-e:e)+2*Math.PI-F)%(2*Math.PI)}function oo(e,t,i){var n=L.range(e,t-F,i).concat(t);return function(t){return n.map(function(e){return[t,e]})}}function ro(e,t,i){var n=L.range(e,t-F,i).concat(t);return function(t){return n.map(function(e){return[e,t]})}}function so(e){return e.source}function ao(e){return e.target}L.geo.path=function(){var n,t,o,i,r,s=4.5;function a(e){return e&&("function"==typeof s&&i.pointRadius(+s.apply(this,arguments)),r&&r.valid||(r=o(i)),L.geo.stream(e,r)),i.result()}function l(){return r=null,a}return a.area=function(e){return Tn=0,L.geo.stream(e,o(Ln)),Tn},a.centroid=function(e){return Fi=Li=Mi=Ni=$i=f=Ii=Pi=Gi=0,L.geo.stream(e,o(y)),Gi?[Ii/Gi,Pi/Gi]:f?[Ni/f,$i/f]:Mi?[Fi/Mi,Li/Mi]:[NaN,NaN]},a.bounds=function(e){return On=Fn=-(Dn=Rn=1/0),L.geo.stream(e,o(Nn)),[[Dn,Rn],[On,Fn]]},a.projection=function(e){return arguments.length?(o=(n=e)?e.stream||(i=e,t=jn(function(e,t){return i([e*S,t*S])}),function(e){return Kn(t(e))}):R,l()):n;var i,t},a.context=function(e){return arguments.length?(i=null==(t=e)?new $n:new Vn(e),"function"!=typeof s&&i.pointRadius(s),l()):t},a.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(i.pointRadius(+e),+e),a):s},a.projection(L.geo.albersUsa()).context(null)},L.geo.transform=function(n){return{stream:function(e){var t,i=new zn(e);for(t in n)i[t]=n[t];return i}}},zn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},L.geo.projection=Yn,L.geo.projectionMutator=qn,(L.geo.equirectangular=function(){return Yn(Xn)}).raw=Xn.invert=Xn,L.geo.rotation=function(t){function e(e){return(e=t(e[0]*E,e[1]*E))[0]*=S,e[1]*=S,e}return t=Zn(t[0]%360*E,t[1]*E,2<t.length?t[2]*E:0),e.invert=function(e){return(e=t.invert(e[0]*E,e[1]*E))[0]*=S,e[1]*=S,e},e},Qn.invert=Xn,L.geo.circle=function(){var t,o,r=[0,0],i=6;function n(){var e="function"==typeof r?r.apply(this,arguments):r,i=Zn(-e[0]*E,-e[1]*E,0).invert,n=[];return o(null,null,1,{point:function(e,t){n.push(e=i(e,t)),e[0]*=S,e[1]*=S}}),{type:"Polygon",coordinates:[n]}}return n.origin=function(e){return arguments.length?(r=e,n):r},n.angle=function(e){return arguments.length?(o=io((t=+e)*E,i*E),n):t},n.precision=function(e){return arguments.length?(o=io(t*E,(i=+e)*E),n):i},n.angle(90)},L.geo.distance=function(e,t){var i=(t[0]-e[0])*E,e=e[1]*E,t=t[1]*E,n=Math.sin(i),i=Math.cos(i),o=Math.sin(e),e=Math.cos(e),r=Math.sin(t),t=Math.cos(t);return Math.atan2(Math.sqrt((n=t*n)*n+(n=e*r-o*t*i)*n),o*r+e*t*i)},L.geo.graticule=function(){var t,i,n,o,r,s,a,l,c,u,d,h,p=10,f=p,g=90,m=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return L.range(Math.ceil(o/g)*g,n,g).map(d).concat(L.range(Math.ceil(l/m)*m,a,m).map(h)).concat(L.range(Math.ceil(i/p)*p,t,p).filter(function(e){return O(e%g)>F}).map(c)).concat(L.range(Math.ceil(s/f)*f,r,f).filter(function(e){return O(e%m)>F}).map(u))}return y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(h(a).slice(1),d(n).reverse().slice(1),h(l).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(o=+e[0][0],n=+e[1][0],l=+e[0][1],a=+e[1][1],n<o&&(e=o,o=n,n=e),a<l&&(e=l,l=a,a=e),y.precision(v)):[[o,l],[n,a]]},y.minorExtent=function(e){return arguments.length?(i=+e[0][0],t=+e[1][0],s=+e[0][1],r=+e[1][1],t<i&&(e=i,i=t,t=e),r<s&&(e=s,s=r,r=e),y.precision(v)):[[i,s],[t,r]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(g=+e[0],m=+e[1],y):[g,m]},y.minorStep=function(e){return arguments.length?(p=+e[0],f=+e[1],y):[p,f]},y.precision=function(e){return arguments.length?(v=+e,c=oo(s,r,90),u=ro(i,t,v),d=oo(l,a,90),h=ro(o,n,v),y):v},y.majorExtent([[-180,-90+F],[180,90-F]]).minorExtent([[-180,-80-F],[180,80+F]])},L.geo.greatArc=function(){var t,i,n=so,o=ao;function r(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),i||o.apply(this,arguments)]}}return r.distance=function(){return L.geo.distance(t||n.apply(this,arguments),i||o.apply(this,arguments))},r.source=function(e){return arguments.length?(t="function"==typeof(n=e)?null:e,r):n},r.target=function(e){return arguments.length?(i="function"==typeof(o=e)?null:e,r):o},r.precision=function(){return arguments.length?r:0},r},L.geo.interpolate=function(e,t){return i=e[0]*E,n=e[1]*E,e=t[0]*E,t=t[1]*E,o=Math.cos(n),r=Math.sin(n),s=Math.cos(t),a=Math.sin(t),l=o*Math.cos(i),c=o*Math.sin(i),u=s*Math.cos(e),d=s*Math.sin(e),h=2*Math.asin(Math.sqrt(et(t-n)+o*s*et(e-i))),p=1/Math.sin(h),(t=h?function(e){var t=Math.sin(e*=h)*p,e=Math.sin(h-e)*p,i=e*l+t*u,n=e*c+t*d,e=e*r+t*a;return[Math.atan2(n,i)*S,Math.atan2(e,Math.sqrt(i*i+n*n))*S]}:function(){return[i*S,n*S]}).distance=h,t;var i,n,o,r,s,a,l,c,u,d,h,p},L.geo.length=function(e){return Pn=0,L.geo.stream(e,lo),Pn};var lo={sphere:l,point:l,lineStart:function(){var r,s,a;function i(e,t){var i=Math.sin(t*=E),t=Math.cos(t),n=O((e*=E)-r),o=Math.cos(n);Pn+=Math.atan2(Math.sqrt((n=t*Math.sin(n))*n+(n=a*i-s*t*o)*n),s*i+a*t*o),r=e,s=i,a=t}lo.point=function(e,t){r=e*E,s=Math.sin(t*=E),a=Math.cos(t),lo.point=i},lo.lineEnd=function(){lo.point=lo.lineEnd=l}},lineEnd:l,polygonStart:l,polygonEnd:l};function co(o,r){function e(e,t){var i=Math.cos(e),n=Math.cos(t),i=o(i*n);return[i*n*Math.sin(e),i*Math.sin(t)]}return e.invert=function(e,t){var i=Math.sqrt(e*e+t*t),n=r(i),o=Math.sin(n),n=Math.cos(n);return[Math.atan2(e*o,i*n),Math.asin(i&&t*o/i)]},e}var uo=co(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)}),ho=((L.geo.azimuthalEqualArea=function(){return Yn(uo)}).raw=uo,co(function(e){e=Math.acos(e);return e&&e/Math.sin(e)},R));function po(e,t){function i(e){return Math.tan(D/4+e/2)}var n=Math.cos(e),o=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(i(t)/i(e)),r=n*Math.pow(i(e),o)/o;return o?(s.invert=function(e,t){var t=r-t,i=Ke(o)*Math.sqrt(e*e+t*t);return[Math.atan2(e,t)/o,2*Math.atan(Math.pow(r/i,1/o))-N]},s):mo;function s(e,t){0<r?t<-N+F&&(t=-N+F):N-F<t&&(t=N-F);t=r/Math.pow(i(t),o);return[t*Math.sin(o*e),r-t*Math.cos(o*e)]}}function fo(e,t){var i=Math.cos(e),n=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),o=i/n+e;return O(n)<F?Xn:(r.invert=function(e,t){t=o-t;return[Math.atan2(e,t)/n,o-Ke(n)*Math.sqrt(e*e+t*t)]},r);function r(e,t){t=o-t;return[t*Math.sin(n*e),o-t*Math.cos(n*e)]}}(L.geo.azimuthalEquidistant=function(){return Yn(ho)}).raw=ho,(L.geo.conicConformal=function(){return xn(po)}).raw=po,(L.geo.conicEquidistant=function(){return xn(fo)}).raw=fo;var go=co(function(e){return 1/e},Math.atan);function mo(e,t){return[e,Math.log(Math.tan(D/4+t/2))]}function vo(e){var o,r=Yn(e),s=r.scale,a=r.translate,l=r.clipExtent;return r.scale=function(){var e=s.apply(r,arguments);return e===r?o?r.clipExtent(null):r:e},r.translate=function(){var e=a.apply(r,arguments);return e===r?o?r.clipExtent(null):r:e},r.clipExtent=function(e){var t,i,n=l.apply(r,arguments);return n===r?(o=null==e)&&(t=D*s(),i=a(),l([[i[0]-t,i[1]-t],[i[0]+t,i[1]+t]])):o&&(n=null),n},r.clipExtent(null)}(L.geo.gnomonic=function(){return Yn(go)}).raw=go,mo.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-N]},(L.geo.mercator=function(){return vo(mo)}).raw=mo;var yo=co(function(){return 1},Math.asin),bo=((L.geo.orthographic=function(){return Yn(yo)}).raw=yo,co(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)}));function wo(e,t){return[Math.log(Math.tan(D/4+t/2)),-e]}function Co(e){return e[0]}function _o(e){return e[1]}function Ao(e){for(var t=e.length,i=[0,1],n=2,o=2;o<t;o++){for(;1<n&&Xe(e[i[n-2]],e[i[n-1]],e[o])<=0;)--n;i[n++]=o}return i.slice(0,n)}function Eo(e,t){return e[0]-t[0]||e[1]-t[1]}(L.geo.stereographic=function(){return Yn(bo)}).raw=bo,wo.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-N]},(L.geo.transverseMercator=function(){var e=vo(wo),t=e.center,i=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?i([e[0],e[1],2<e.length?e[2]+90:90]):[(e=i())[0],e[1],e[2]-90]},i([0,0,90])}).raw=wo,L.geom={},L.geom.hull=function(e){var h=Co,p=_o;return arguments.length?t(e):(t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(p=e,t):p},t);function t(e){if(e.length<3)return[];for(var t=$(h),i=$(p),n=e.length,o=[],r=[],s=0;s<n;s++)o.push([+t.call(this,e[s],s),+i.call(this,e[s],s),s]);for(o.sort(Eo),s=0;s<n;s++)r.push([o[s][0],-o[s][1]]);var a=Ao(o),l=Ao(r),c=l[0]===a[0],u=l[l.length-1]===a[a.length-1],d=[];for(s=a.length-1;0<=s;--s)d.push(e[o[a[s]][2]]);for(s=+c;s<l.length-u;++s)d.push(e[o[l[s]][2]]);return d}},L.geom.polygon=function(e){return fe(e,xo),e};var xo=L.geom.polygon.prototype=[];function So(e,t,i){return(i[0]-t[0])*(e[1]-t[1])<(i[1]-t[1])*(e[0]-t[0])}function To(e,t,i,n){var o=e[0],r=i[0],s=t[0]-o,a=n[0]-r,e=e[1],i=i[1],t=t[1]-e,n=n[1]-i,i=(a*(e-i)-n*(o-r))/(n*s-a*t);return[o+i*s,e+i*t]}function ko(e){var t=e[0],e=e[e.length-1];return!(t[0]-e[0]||t[1]-e[1])}xo.area=function(){for(var e,t=-1,i=this.length,n=this[i-1],o=0;++t<i;)e=n,n=this[t],o+=e[1]*n[0]-e[0]*n[1];return.5*o},xo.centroid=function(e){var t,i,n=-1,o=this.length,r=0,s=0,a=this[o-1];for(arguments.length||(e=-1/(6*this.area()));++n<o;)t=a,a=this[n],i=t[0]*a[1]-a[0]*t[1],r+=(t[0]+a[0])*i,s+=(t[1]+a[1])*i;return[r*e,s*e]},xo.clip=function(e){for(var t,i,n,o,r,s,a=ko(e),l=-1,c=this.length-ko(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,o=this[l],r=t[(n=t.length-a)-1],i=-1;++i<n;)So(s=t[i],u,o)?(So(r,u,o)||e.push(To(r,s,u,o)),e.push(s)):So(r,u,o)&&e.push(To(r,s,u,o)),r=s;a&&e.push(e[0]),u=o}return e};var Do,Ro,Oo,Fo,Lo,Mo=[],No=[];function $o(){Jo(this),this.edge=this.site=this.circle=null}function Io(e){var t=Mo.pop()||new $o;return t.site=e,t}function Po(e){Uo(e),Oo.remove(e),Mo.push(e),Jo(e)}function Go(e){for(var t,i,n,o,r=e.x,s=e.y,a=Oo._;a;)if(n=Bo(a,s)-r,F<n)a=a.L;else{if(o=r-function(e,t){var i=e.N;if(i)return Bo(i,t);i=e.site;return i.y===t?i.x:1/0}(a,s),!(F<o)){-F<n?(t=a.P,i=a):-F<o?i=(t=a).N:t=i=a;break}if(!a.R){t=a;break}a=a.R}var l,c,u,d,h,p,f,g,m,v,y=Io(e);if(Oo.insert(t,y),t||i){if(t===i)return Uo(t),i=Io(t.site),Oo.insert(y,i),y.edge=i.edge=Ko(t.site,y.site),zo(t),void zo(i);i?(Uo(t),Uo(i),c=(l=t.site).x,u=l.y,d=e.x-c,v=e.y-u,p=(h=i.site).x-c,f=h.y-u,Xo(i.edge,l,h,v={x:(f*(g=d*d+v*v)-v*(m=p*p+f*f))/(f=2*(d*f-v*p))+c,y:(d*m-p*g)/f+u}),y.edge=Ko(l,e,null,v),i.edge=Ko(e,h,null,v),zo(t),zo(i)):y.edge=Ko(t.site,y.site)}}function Bo(e,t){var i=e.site,n=i.x,o=i.y,r=o-t;if(!r)return n;e=e.P;if(!e)return-1/0;e=(i=e.site).x,i=i.y,t=i-t;if(!t)return e;var s=e-n,a=1/r-1/t,l=s/t;return a?(-l+Math.sqrt(l*l-2*a*(s*s/(-2*t)-i+t/2+o-r/2)))/a+n:(n+e)/2}function Wo(e){this.site=e,this.edges=[]}function Ho(e){for(var t,i,n,o,r,s,a,l,c,u=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],f=Ro,g=f.length;g--;)if((o=f[g])&&o.prepare())for(a=(s=o.edges).length,r=0;r<a;)i=(c=s[r].end()).x,n=c.y,t=(l=s[++r%a].start()).x,l=l.y,(O(i-t)>F||O(n-l)>F)&&(s.splice(r,0,new Qo(function(e,t,i){e=new qo(e,null);return e.a=t,e.b=i,Do.push(e),e}(o.site,c,O(i-u)<F&&F<p-n?{x:u,y:O(t-u)<F?l:p}:O(n-p)<F&&F<d-i?{x:O(l-p)<F?t:d,y:p}:O(i-d)<F&&F<n-h?{x:d,y:O(t-d)<F?l:h}:O(n-h)<F&&F<i-u?{x:O(l-h)<F?t:u,y:h}:null),o.site,null)),++a)}function Vo(e,t){return t.angle-e.angle}function jo(){Jo(this),this.x=this.y=this.arc=this.site=this.cy=null}function zo(e){var t=e.P,i=e.N;if(t&&i){var t=t.site,n=e.site,i=i.site;if(t!==i){var o=n.x,r=n.y,s=t.x-o,t=t.y-r,a=i.x-o,l=2*(s*(i=i.y-r)-t*a);if(!(-Ye<=l)){for(var c=s*s+t*t,u=a*a+i*i,t=(i*c-t*u)/l,s=(s*u-a*c)/l,i=s+r,d=No.pop()||new jo,h=(d.arc=e,d.site=n,d.x=t+o,d.y=i+Math.sqrt(t*t+s*s),d.cy=i,e.circle=d,null),p=Lo._;p;)if(d.y<p.y||d.y===p.y&&d.x<=p.x){if(!p.L){h=p.P;break}p=p.L}else{if(!p.R){h=p;break}p=p.R}Lo.insert(h,d),h||(Fo=d)}}}}function Uo(e){var t=e.circle;t&&(t.P||(Fo=t.N),Lo.remove(t),No.push(t),Jo(t),e.circle=null)}function Yo(e){for(var t,i=Do,n=_n(e[0][0],e[0][1],e[1][0],e[1][1]),o=i.length;o--;)(!function(e,t){var i=e.b;if(i)return 1;var n=e.a,o=t[0][0],r=t[1][0],s=t[0][1],t=t[1][1],a=e.l,l=e.r,c=a.x,a=a.y,u=l.x,l=l.y,d=(c+u)/2,h=(a+l)/2;if(l===a){if(d<o||r<=d)return;if(u<c){if(n){if(n.y>=t)return}else n={x:d,y:s};i={x:d,y:t}}else{if(n){if(n.y<s)return}else n={x:d,y:t};i={x:d,y:s}}}else if(d=h-(h=(c-u)/(l-a))*d,h<-1||1<h)if(u<c){if(n){if(n.y>=t)return}else n={x:(s-d)/h,y:s};i={x:(t-d)/h,y:t}}else{if(n){if(n.y<s)return}else n={x:(t-d)/h,y:t};i={x:(s-d)/h,y:s}}else if(a<l){if(n){if(n.x>=r)return}else n={x:o,y:h*o+d};i={x:r,y:h*r+d}}else{if(n){if(n.x<o)return}else n={x:r,y:h*r+d};i={x:o,y:h*o+d}}return e.a=n,e.b=i,1}(t=i[o],e)||!n(t)||O(t.a.x-t.b.x)<F&&O(t.a.y-t.b.y)<F)&&(t.a=t.b=null,i.splice(o,1))}function qo(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ko(e,t,i,n){var o=new qo(e,t);return Do.push(o),i&&Xo(o,e,t,i),n&&Xo(o,t,e,n),Ro[e.i].edges.push(new Qo(o,e,t)),Ro[t.i].edges.push(new Qo(o,t,e)),o}function Xo(e,t,i,n){e.a||e.b?e.l===i?e.b=n:e.a=n:(e.a=n,e.l=t,e.r=i)}function Qo(e,t,i){var n=e.a,o=e.b;this.edge=e,this.site=t,this.angle=i?Math.atan2(i.y-t.y,i.x-t.x):e.l===t?Math.atan2(o.x-n.x,n.y-o.y):Math.atan2(n.x-o.x,o.y-n.y)}function Zo(){this._=null}function Jo(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function er(e,t){var i=t,t=t.R,n=i.U;n?n.L===i?n.L=t:n.R=t:e._=t,t.U=n,i.U=t,i.R=t.L,i.R&&(i.R.U=i),t.L=i}function tr(e,t){var i=t,t=t.L,n=i.U;n?n.L===i?n.L=t:n.R=t:e._=t,t.U=n,i.U=t,i.L=t.R,i.L&&(i.L.U=i),t.R=i}function ir(e){for(;e.L;)e=e.L;return e}function nr(e,t){var i,n,o,r=e.sort(or).pop();for(Do=[],Ro=new Array(e.length),Oo=new Zo,Lo=new Zo;;)if(o=Fo,r&&(!o||r.y<o.y||r.y===o.y&&r.x<o.x))r.x===i&&r.y===n||(Ro[r.i]=new Wo(r),Go(r),i=r.x,n=r.y),r=e.pop();else{if(!o)break;v=m=g=f=p=h=d=u=c=l=a=s=void 0;for(var s=o.arc,a=s.circle,l=a.x,c=a.cy,u={x:l,y:c},d=s.P,h=s.N,p=[s],f=(Po(s),d);f.circle&&O(l-f.circle.x)<F&&O(c-f.circle.cy)<F;)d=f.P,p.unshift(f),Po(f),f=d;p.unshift(f),Uo(f);for(var g=h;g.circle&&O(l-g.circle.x)<F&&O(c-g.circle.cy)<F;)h=g.N,p.push(g),Po(g),g=h;p.push(g),Uo(g);for(var m=p.length,v=1;v<m;++v)g=p[v],f=p[v-1],Xo(g.edge,f.site,g.site,u);f=p[0],(g=p[m-1]).edge=Ko(f.site,g.site,null,u),zo(f),zo(g)}t&&(Yo(t),Ho(t));t={cells:Ro,edges:Do};return Oo=Lo=Do=Ro=null,t}function or(e,t){return t.y-e.y||t.x-e.x}Wo.prototype.prepare=function(){for(var e,t=this.edges,i=t.length;i--;)(e=t[i].edge).b&&e.a||t.splice(i,1);return t.sort(Vo),t.length},Qo.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Zo.prototype={insert:function(e,t){var i,n,o;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;i=e}else i=this._?(e=ir(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=i,t.C=!0,e=t;i&&i.C;)i===(n=i.U).L?(o=n.R)&&o.C?(i.C=o.C=!1,n.C=!0,e=n):(e===i.R&&(er(this,i),i=(e=i).U),i.C=!1,n.C=!0,tr(this,n)):(o=n.L)&&o.C?(i.C=o.C=!1,n.C=!0,e=n):(e===i.L&&(tr(this,i),i=(e=i).U),i.C=!1,n.C=!0,er(this,n)),i=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,i,n=e.U,o=e.L,r=e.R,s=o?r?ir(r):o:r;if(n?n.L===e?n.L=s:n.R=s:this._=s,o&&r?(i=s.C,s.C=e.C,((s.L=o).U=s)!==r?(n=s.U,s.U=e.U,e=s.R,n.L=e,(s.R=r).U=s):(s.U=n,e=(n=s).R)):(i=e.C,e=s),e&&(e.U=n),!i)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===n.L){if((t=n.R).C&&(t.C=!1,n.C=!0,er(this,n),t=n.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,tr(this,t),t=n.R),t.C=n.C,n.C=t.R.C=!1,er(this,n),e=this._;break}}else if((t=n.L).C&&(t.C=!1,n.C=!0,tr(this,n),t=n.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,er(this,t),t=n.L),t.C=n.C,n.C=t.L.C=!1,tr(this,n),e=this._;break}}while(t.C=!0,n=(e=n).U,!e.C);e&&(e.C=!1)}}},L.geom.voronoi=function(e){var t=Co,i=_o,n=t,o=i,c=rr;return e?r(e):(r.links=function(t){return nr(h(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},r.triangles=function(u){var d=[];return nr(h(u)).cells.forEach(function(e,t){for(var i,n,o=e.site,r=e.edges.sort(Vo),s=-1,a=r.length,l=r[a-1].edge,c=l.l===o?l.r:l.l;++s<a;)i=c,c=(l=r[s].edge).l===o?l.r:l.l,t<i.i&&t<c.i&&(n=c,(o.x-n.x)*(i.y-o.y)-(o.x-i.x)*(n.y-o.y)<0)&&d.push([u[t],u[i.i],u[c.i]])}),d},r.x=function(e){return arguments.length?(n=$(t=e),r):t},r.y=function(e){return arguments.length?(o=$(i=e),r):i},r.clipExtent=function(e){return arguments.length?(c=null==e?rr:e,r):c===rr?null:c},r.size=function(e){return arguments.length?r.clipExtent(e&&[[0,0],e]):c===rr?null:c&&c[1]},r);function r(n){var o=new Array(n.length),r=c[0][0],s=c[0][1],a=c[1][0],l=c[1][1];return nr(h(n),c).cells.forEach(function(e,t){var i=e.edges,e=e.site;(o[t]=i.length?i.map(function(e){e=e.start();return[e.x,e.y]}):e.x>=r&&e.x<=a&&e.y>=s&&e.y<=l?[[r,l],[a,l],[a,s],[r,s]]:[]).point=n[t]}),o}function h(e){return e.map(function(e,t){return{x:Math.round(n(e,t)/F)*F,y:Math.round(o(e,t)/F)*F,i:t}})}};var rr=[[-1e6,-1e6],[1e6,1e6]];function sr(e){return e.x}function ar(e){return e.y}function lr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function cr(e,t){e=L.rgb(e),t=L.rgb(t);var i=e.r,n=e.g,o=e.b,r=t.r-i,s=t.g-n,a=t.b-o;return function(e){return"#"+wt(Math.round(i+r*e))+wt(Math.round(n+s*e))+wt(Math.round(o+a*e))}}function ur(e,t){var i,n={},o={};for(i in e)i in t?n[i]=gr(e[i],t[i]):o[i]=e[i];for(i in t)i in e||(o[i]=t[i]);return function(e){for(i in n)o[i]=n[i](e);return o}}function dr(t,i){return t=+t,i=+i,function(e){return t*(1-e)+i*e}}function hr(e,n){var t,i,o,r=pr.lastIndex=fr.lastIndex=0,s=-1,a=[],l=[];for(e+="",n+="";(t=pr.exec(e))&&(i=fr.exec(n));)(o=i.index)>r&&(o=n.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(t=t[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:dr(t,i)})),r=fr.lastIndex;return r<n.length&&(o=n.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?(n=l[0].x,function(e){return n(e)+""}):function(){return n}:(n=l.length,function(e){for(var t,i=0;i<n;++i)a[(t=l[i]).i]=t.x(e);return a.join("")})}L.geom.delaunay=function(e){return L.geom.voronoi().triangles(e)},L.geom.quadtree=function(e,y,b,w,_){var A,E=Co,x=_o;return(A=arguments.length)?(E=sr,x=ar,3===A&&(_=b,w=y,b=y=0),t(e)):(t.x=function(e){return arguments.length?(E=e,t):E},t.y=function(e){return arguments.length?(x=e,t):x},t.extent=function(e){return arguments.length?(null==e?y=b=w=_=null:(y=+e[0][0],b=+e[0][1],w=+e[1][0],_=+e[1][1]),t):null==y?null:[[y,b],[w,_]]},t.size=function(e){return arguments.length?(null==e?y=b=w=_=null:(y=b=0,w=+e[0],_=+e[1]),t):null==y?null:[w-y,_-b]},t);function t(e){var t,i,n,o,r,s,a,l,c,u=$(E),d=$(x);if(null!=y)s=y,a=b,l=w,c=_;else if(l=c=-(s=a=1/0),i=[],n=[],r=e.length,A)for(o=0;o<r;++o)(t=e[o]).x<s&&(s=t.x),t.y<a&&(a=t.y),t.x>l&&(l=t.x),t.y>c&&(c=t.y),i.push(t.x),n.push(t.y);else for(o=0;o<r;++o){var h=+u(t=e[o],o),p=+d(t,o);h<s&&(s=h),p<a&&(a=p),l<h&&(l=h),c<p&&(c=p),i.push(h),n.push(p)}var f=l-s,g=c-a;function m(e,t,i,n,o,r,s,a){var l,c,u;isNaN(i)||isNaN(n)||(e.leaf?(l=e.x,c=e.y,null!=l?(O(l-i)+O(c-n)<.01||(u=e.point,e.x=e.y=e.point=null,v(e,u,l,c,o,r,s,a)),v(e,t,i,n,o,r,s,a)):(e.x=i,e.y=n,e.point=t)):v(e,t,i,n,o,r,s,a))}function v(e,t,i,n,o,r,s,a){var l=.5*(o+s),c=.5*(r+a),u=l<=i,d=c<=n,h=d<<1|u;e.leaf=!1,u?o=l:s=l,d?r=c:a=c,m(e=e.nodes[h]||(e.nodes[h]=lr()),t,i,n,o,r,s,a)}g<f?c=a+f:l=s+g;var C=lr();if(C.add=function(e){m(C,e,+u(e,++o),+d(e,o),s,a,l,c)},C.visit=function(e){!function e(t,i,n,o,r,s){{var a,l;t(i,n,o,r,s)||(a=.5*(n+r),l=.5*(o+s),(i=i.nodes)[0]&&e(t,i[0],n,o,a,l),i[1]&&e(t,i[1],a,o,r,l),i[2]&&e(t,i[2],n,l,a,s),i[3]&&e(t,i[3],a,l,r,s))}}(e,C,s,a,l,c)},C.find=function(e){return p=e[0],f=e[1],w=1/0,function e(t,i,n,o,r){if(!(v<i||y<n||o<g||r<m)){(s=t.point)&&(a=(a=p-t.x)*a+(a=f-t.y)*a)<w&&(a=Math.sqrt(w=a),g=p-a,m=f-a,v=p+a,y=f+a,b=s);for(var s,a,l=t.nodes,c=.5*(i+o),u=.5*(n+r),d=(u<=f)<<1|c<=p,h=d+4;d<h;++d)if(t=l[3&d])switch(3&d){case 0:e(t,i,n,c,u);break;case 1:e(t,c,n,o,u);break;case 2:e(t,i,u,c,r);break;case 3:e(t,c,u,o,r)}}}(C,g=s,m=a,v=l,y=c),b;var p,f,g,m,v,y,b,w},o=-1,null==y){for(;++o<r;)m(C,e[o],i[o],n[o],s,a,l,c);--o}else e.forEach(C.add);return i=n=e=t=null,C}},L.interpolateRgb=cr,L.interpolateObject=ur,L.interpolateNumber=dr,L.interpolateString=hr;var pr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fr=new RegExp(pr.source,"g");function gr(e,t){for(var i,n=L.interpolators.length;0<=--n&&!(i=L.interpolators[n](e,t)););return i}function mr(e,t){for(var i=[],n=[],o=e.length,r=t.length,s=Math.min(e.length,t.length),a=0;a<s;++a)i.push(gr(e[a],t[a]));for(;a<o;++a)n[a]=e[a];for(;a<r;++a)n[a]=t[a];return function(e){for(a=0;a<s;++a)n[a]=i[a](e);return n}}L.interpolate=gr,L.interpolators=[function(e,t){var i=typeof t;return("string"==i?St.has(t)||/^(#|rgb\(|hsl\()/.test(t)?cr:hr:t instanceof rt?cr:Array.isArray(t)?mr:"object"==i&&isNaN(t)?ur:dr)(e,t)}],L.interpolateArray=mr;function vr(){return R}var yr=L.map({linear:vr,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return _r},cubic:function(){return Ar},sin:function(){return xr},exp:function(){return Sr},circle:function(){return Tr},elastic:function(t,i){var n;arguments.length<2&&(i=.45);n=arguments.length?i/x*Math.asin(1/t):(t=1,i/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-n)*x/i)}},back:function(t){t=t||1.70158;return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return kr}}),br=L.map({in:R,out:wr,"in-out":Cr,"out-in":function(e){return Cr(wr(e))}});function wr(t){return function(e){return 1-t(1-e)}}function Cr(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function _r(e){return e*e}function Ar(e){return e*e*e}function Er(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}function xr(e){return 1-Math.cos(e*N)}function Sr(e){return Math.pow(2,10*(e-1))}function Tr(e){return 1-Math.sqrt(1-e*e)}function kr(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Dr(t,i){return i-=t,function(e){return Math.round(t+i*e)}}function Rr(e){var t,i,n=[e.a,e.b],o=[e.c,e.d],r=Fr(n),s=Or(n,o),a=Fr(((t=o)[0]+=(a=-s)*(i=n)[0],t[1]+=a*i[1],t))||0;n[0]*o[1]<o[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,s*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-o[0],o[1]))*S,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?Math.atan2(s,a)*S:0}function Or(e,t){return e[0]*t[0]+e[1]*t[1]}function Fr(e){var t=Math.sqrt(Or(e,e));return t&&(e[0]/=t,e[1]/=t),t}L.ease=function(e){var t,i=e.indexOf("-"),n=0<=i?e.slice(0,i):e,i=0<=i?e.slice(i+1):"in",n=yr.get(n)||vr,i=br.get(i)||R;return t=i(n.apply(null,I.call(arguments,1))),function(e){return e<=0?0:1<=e?1:t(e)}},L.interpolateHcl=function(e,t){e=L.hcl(e),t=L.hcl(t);var i=e.h,n=e.c,o=e.l,r=t.h-i,s=t.c-n,a=t.l-o;isNaN(s)&&(s=0,n=isNaN(n)?t.c:n);isNaN(r)?(r=0,i=isNaN(i)?t.h:i):180<r?r-=360:r<-180&&(r+=360);return function(e){return lt(i+r*e,n+s*e,o+a*e)+""}},L.interpolateHsl=function(e,t){e=L.hsl(e),t=L.hsl(t);var i=e.h,n=e.s,o=e.l,r=t.h-i,s=t.s-n,a=t.l-o;isNaN(s)&&(s=0,n=isNaN(n)?t.s:n);isNaN(r)?(r=0,i=isNaN(i)?t.h:i):180<r?r-=360:r<-180&&(r+=360);return function(e){return at(i+r*e,n+s*e,o+a*e)+""}},L.interpolateLab=function(e,t){e=L.lab(e),t=L.lab(t);var i=e.l,n=e.a,o=e.b,r=t.l-i,s=t.a-n,a=t.b-o;return function(e){return pt(i+r*e,n+s*e,o+a*e)+""}},L.interpolateRound=Dr,L.transform=function(e){var i=M.createElementNS(L.ns.prefix.svg,"g");return(L.transform=function(e){var t;return null!=e&&(i.setAttribute("transform",e),t=i.transform.baseVal.consolidate()),new Rr(t?t.matrix:Lr)})(e)},Rr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Lr={a:1,b:0,c:0,d:1,e:0,f:0};function Mr(e,t){var n,o=[],r=[],e=L.transform(e),t=L.transform(t),i=e.translate,s=t.translate,a=e.rotate,l=t.rotate,c=e.skew,u=t.skew,e=e.scale,t=t.scale;return i[0]!=s[0]||i[1]!=s[1]?(o.push("translate(",null,",",null,")"),r.push({i:1,x:dr(i[0],s[0])},{i:3,x:dr(i[1],s[1])})):s[0]||s[1]?o.push("translate("+s+")"):o.push(""),a!=l?(180<a-l?l+=360:180<l-a&&(a+=360),r.push({i:o.push(o.pop()+"rotate(",null,")")-2,x:dr(a,l)})):l&&o.push(o.pop()+"rotate("+l+")"),c!=u?r.push({i:o.push(o.pop()+"skewX(",null,")")-2,x:dr(c,u)}):u&&o.push(o.pop()+"skewX("+u+")"),e[0]!=t[0]||e[1]!=t[1]?(n=o.push(o.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:dr(e[0],t[0])},{i:n-2,x:dr(e[1],t[1])})):1==t[0]&&1==t[1]||o.push(o.pop()+"scale("+t+")"),n=r.length,function(e){for(var t,i=-1;++i<n;)o[(t=r[i]).i]=t.x(e);return o.join("")}}function Nr(t,i){return i=(i-=t=+t)||1/i,function(e){return(e-t)/i}}function $r(t,i){return i=(i-=t=+t)||1/i,function(e){return Math.max(0,Math.min(1,(e-t)/i))}}function Ir(e){for(var t=[],i=e.parent;null!=i;)t.push(e),i=(e=i).parent;return t.push(e),t}function Pr(e){e.fixed|=2}function Gr(e){e.fixed&=-7}function Br(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Wr(e){e.fixed&=-5}L.interpolateTransform=Mr,L.layout={},L.layout.bundle=function(){return function(e){for(var t=[],i=-1,n=e.length;++i<n;)t.push(function(e){var t=e.source,i=e.target,n=function(e,t){if(e===t)return e;var i=Ir(e),n=Ir(t),o=i.pop(),r=n.pop(),s=null;for(;o===r;)s=o,o=i.pop(),r=n.pop();return s}(t,i),o=[t];for(;t!==n;)t=t.parent,o.push(t);var r=o.length;for(;i!==n;)o.splice(r,0,i),i=i.parent;return o}(e[i]));return t}},L.layout.chord=function(){var m,v,y,b,w,C,_,t={},A=0;function e(){var e,t,i,n,o,r={},s=[],a=L.range(b),l=[];for(m=[],v=[],e=0,n=-1;++n<b;){for(t=0,o=-1;++o<b;)t+=y[n][o];s.push(t),l.push(L.range(b)),e+=t}for(w&&a.sort(function(e,t){return w(s[e],s[t])}),C&&l.forEach(function(e,i){e.sort(function(e,t){return C(y[i][e],y[i][t])})}),e=(x-A*b)/e,t=0,n=-1;++n<b;){for(i=t,o=-1;++o<b;){var c=a[n],u=l[c][o],d=y[c][u],h=t,p=t+=d*e;r[c+"-"+u]={index:c,subindex:u,startAngle:h,endAngle:p,value:d}}v[c]={index:c,startAngle:i,endAngle:t,value:(t-i)/e},t+=A}for(n=-1;++n<b;)for(o=n-1;++o<b;){var f=r[n+"-"+o],g=r[o+"-"+n];(f.value||g.value)&&m.push(f.value<g.value?{source:g,target:f}:{source:f,target:g})}_&&E()}function E(){m.sort(function(e,t){return _((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(b=(y=e)&&y.length,m=v=null,t):y},t.padding=function(e){return arguments.length?(A=e,m=v=null,t):A},t.sortGroups=function(e){return arguments.length?(w=e,m=v=null,t):w},t.sortSubgroups=function(e){return arguments.length?(C=e,m=null,t):C},t.sortChords=function(e){return arguments.length?(_=e,m&&E(),t):_},t.chords=function(){return m||e(),m},t.groups=function(){return v||e(),v},t},L.layout.force=function(){var e,d,h,p,f,o={},g=L.dispatch("start","tick","end"),m=[1,1],v=.9,r=Hr,s=Vr,y=-30,b=jr,w=.1,C=.64,_=[],A=[];function t(e){e.px=L.event.x,e.py=L.event.y,o.resume()}return o.tick=function(){if((d*=.99)<.005)return g.end({type:"end",alpha:d=0}),!0;for(var e,t,i,n,o,r,s,a,l=_.length,c=A.length,u=0;u<c;++u)i=(t=A[u]).source,(o=(s=(n=t.target).x-i.x)*s+(a=n.y-i.y)*a)&&(s*=o=d*p[u]*((o=Math.sqrt(o))-h[u])/o,a*=o,n.x-=s*(r=i.weight/(n.weight+i.weight)),n.y-=a*r,i.x+=s*(r=1-r),i.y+=a*r);if((r=d*w)&&(s=m[0]/2,a=m[1]/2,u=-1,r))for(;++u<l;)(t=_[u]).x+=(s-t.x)*r,t.y+=(a-t.y)*r;if(y)for(!function e(t,i,n){var o=0,r=0;t.charge=0;if(!t.leaf)for(var s,a=t.nodes,l=a.length,c=-1;++c<l;)null!=(s=a[c])&&(e(s,i,n),t.charge+=s.charge,o+=s.charge*s.cx,r+=s.charge*s.cy);{var u;t.point&&(t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5),u=i*n[t.point.index],t.charge+=t.pointCharge=u,o+=u*t.point.x,r+=u*t.point.y)}t.cx=o/t.charge;t.cy=r/t.charge}(e=L.geom.quadtree(_),d,f),u=-1;++u<l;)(t=_[u]).fixed||e.visit(function(a){return function(e,t,i,n){if(e.point!==a){var o,r=e.cx-a.x,s=e.cy-a.y,n=n-t,t=r*r+s*s;if(n*n/C<t)return t<b&&(o=e.charge/t,a.px-=r*o,a.py-=s*o),!0;e.point&&t&&t<b&&(o=e.pointCharge/t,a.px-=r*o,a.py-=s*o)}return!e.charge}}(t));for(u=-1;++u<l;)(t=_[u]).fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*v,t.y-=(t.py-(t.py=t.y))*v);g.tick({type:"tick",alpha:d})},o.nodes=function(e){return arguments.length?(_=e,o):_},o.links=function(e){return arguments.length?(A=e,o):A},o.size=function(e){return arguments.length?(m=e,o):m},o.linkDistance=function(e){return arguments.length?(r="function"==typeof e?e:+e,o):r},o.distance=o.linkDistance,o.linkStrength=function(e){return arguments.length?(s="function"==typeof e?e:+e,o):s},o.friction=function(e){return arguments.length?(v=+e,o):v},o.charge=function(e){return arguments.length?(y="function"==typeof e?e:+e,o):y},o.chargeDistance=function(e){return arguments.length?(b=e*e,o):Math.sqrt(b)},o.gravity=function(e){return arguments.length?(w=+e,o):w},o.theta=function(e){return arguments.length?(C=e*e,o):Math.sqrt(C)},o.alpha=function(e){return arguments.length?(e=+e,d?d=0<e?e:0:0<e&&(g.start({type:"start",alpha:d=e}),L.timer(o.tick)),o):d},o.start=function(){for(var a,e,l=_.length,c=A.length,t=m[0],i=m[1],u=0;u<l;++u)(e=_[u]).index=u,e.weight=0;for(u=0;u<c;++u)"number"==typeof(e=A[u]).source&&(e.source=_[e.source]),"number"==typeof e.target&&(e.target=_[e.target]),++e.source.weight,++e.target.weight;for(u=0;u<l;++u)e=_[u],isNaN(e.x)&&(e.x=n("x",t)),isNaN(e.y)&&(e.y=n("y",i)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(h=[],"function"==typeof r)for(u=0;u<c;++u)h[u]=+r.call(this,A[u],u);else for(u=0;u<c;++u)h[u]=r;if(p=[],"function"==typeof s)for(u=0;u<c;++u)p[u]=+s.call(this,A[u],u);else for(u=0;u<c;++u)p[u]=s;if(f=[],"function"==typeof y)for(u=0;u<l;++u)f[u]=+y.call(this,_[u],u);else for(u=0;u<l;++u)f[u]=y;function n(e,t){if(!a){for(a=new Array(l),r=0;r<l;++r)a[r]=[];for(r=0;r<c;++r){var i=A[r];a[i.source.index].push(i.target),a[i.target.index].push(i.source)}}for(var n,o=a[u],r=-1,s=o.length;++r<s;)if(!isNaN(n=o[r][e]))return n;return Math.random()*t}return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){if(e=e||L.behavior.drag().origin(R).on("dragstart.force",Pr).on("drag.force",t).on("dragend.force",Gr),!arguments.length)return e;this.on("mouseover.force",Br).on("mouseout.force",Wr).call(e)},L.rebind(o,g,"on")};var Hr=20,Vr=1,jr=1/0;function zr(e,t){return L.rebind(e,t,"sort","children","value"),(e.nodes=e).links=Xr,e}function Ur(e,t){for(var i,n,o=[e];null!=(e=o.pop());)if(t(e),(n=e.children)&&(i=n.length))for(;0<=--i;)o.push(n[i])}function b(e,t){for(var i=[e],n=[];null!=(e=i.pop());)if(n.push(e),(r=e.children)&&(o=r.length))for(var o,r,s=-1;++s<o;)i.push(r[s]);for(;null!=(e=n.pop());)t(e)}function Yr(e){return e.children}function qr(e){return e.value}function Kr(e,t){return t.value-e.value}function Xr(e){return L.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}L.layout.hierarchy=function(){var a=Kr,l=Yr,c=qr;function u(e){var t,i,n,o,r=[e],s=[];for(e.depth=0;null!=(t=r.pop());)if(s.push(t),(n=l.call(u,t,t.depth))&&(i=n.length)){for(;0<=--i;)r.push(o=n[i]),o.parent=t,o.depth=t.depth+1;c&&(t.value=0),t.children=n}else c&&(t.value=+c.call(u,t,t.depth)||0),delete t.children;return b(e,function(e){var t;a&&(t=e.children)&&t.sort(a),c&&(t=e.parent)&&(t.value+=e.value)}),s}return u.sort=function(e){return arguments.length?(a=e,u):a},u.children=function(e){return arguments.length?(l=e,u):l},u.value=function(e){return arguments.length?(c=e,u):c},u.revalue=function(e){return c&&(Ur(e,function(e){e.children&&(e.value=0)}),b(e,function(e){var t;e.children||(e.value=+c.call(u,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},u},L.layout.partition=function(){var i=L.layout.hierarchy(),n=[1,1];function t(e,t){e=i.call(this,e,t);return function e(t,i,n,o){var r=t.children;if(t.x=i,t.y=t.depth*o,t.dx=n,t.dy=o,r&&(s=r.length)){var s,a,l=-1;for(n=t.value?n/t.value:0;++l<s;)e(a=r[l],i,a=a.value*n,o),i+=a}}(e[0],0,n[0],n[1]/function e(t){var i=t.children,n=0;if(i&&(o=i.length))for(var o,r=-1;++r<o;)n=Math.max(n,e(i[r]));return 1+n}(e[0])),e}return t.size=function(e){return arguments.length?(n=e,t):n},zr(t,i)},L.layout.pie=function(){var u=Number,d=Qr,h=0,p=x,f=0;function g(i){var t,e=i.length,n=i.map(function(e,t){return+u.call(g,e,t)}),o=+("function"==typeof h?h.apply(this,arguments):h),r=("function"==typeof p?p.apply(this,arguments):p)-o,s=Math.min(Math.abs(r)/e,+("function"==typeof f?f.apply(this,arguments):f)),a=s*(r<0?-1:1),l=(r-e*a)/L.sum(n),r=L.range(e),c=[];return null!=d&&r.sort(d===Qr?function(e,t){return n[t]-n[e]}:function(e,t){return d(i[e],i[t])}),r.forEach(function(e){c[e]={data:i[e],value:t=n[e],startAngle:o,endAngle:o+=t*l+a,padAngle:s}}),c}return g.value=function(e){return arguments.length?(u=e,g):u},g.sort=function(e){return arguments.length?(d=e,g):d},g.startAngle=function(e){return arguments.length?(h=e,g):h},g.endAngle=function(e){return arguments.length?(p=e,g):p},g.padAngle=function(e){return arguments.length?(f=e,g):f},g};var Qr={};function Zr(e){return e.x}function Jr(e){return e.y}function es(e,t,i){e.y0=t,e.y=i}L.layout.stack=function(){var d=R,h=ns,p=os,f=es,g=Zr,m=Jr;function v(e,t){if(!(i=e.length))return e;for(var i,n,o,r=(a=e.map(function(e,t){return d.call(v,e,t)})).map(function(e){return e.map(function(e,t){return[g.call(v,e,t),m.call(v,e,t)]})}),s=h.call(v,r,t),a=L.permute(a,s),r=L.permute(r,s),l=p.call(v,r,t),c=a[0].length,u=0;u<c;++u)for(f.call(v,a[0][u],o=l[u],r[0][u][1]),n=1;n<i;++n)f.call(v,a[n][u],o+=r[n-1][u][1],r[n][u][1]);return e}return v.values=function(e){return arguments.length?(d=e,v):d},v.order=function(e){return arguments.length?(h="function"==typeof e?e:ts.get(e)||ns,v):h},v.offset=function(e){return arguments.length?(p="function"==typeof e?e:is.get(e)||os,v):p},v.x=function(e){return arguments.length?(g=e,v):g},v.y=function(e){return arguments.length?(m=e,v):m},v.out=function(e){return arguments.length?(f=e,v):f},v};var ts=L.map({"inside-out":function(e){for(var t,i=e.length,n=e.map(rs),o=e.map(ss),r=L.range(i).sort(function(e,t){return n[e]-n[t]}),s=0,a=0,l=[],c=[],u=0;u<i;++u)t=r[u],s<a?(s+=o[t],l.push(t)):(a+=o[t],c.push(t));return c.reverse().concat(l)},reverse:function(e){return L.range(e.length).reverse()},default:ns}),is=L.map({silhouette:function(e){for(var t,i,n=e.length,o=e[0].length,r=[],s=0,a=[],l=0;l<o;++l){for(i=t=0;t<n;t++)i+=e[t][l][1];s<i&&(s=i),r.push(i)}for(l=0;l<o;++l)a[l]=(s-r[l])/2;return a},wiggle:function(e){var t,i,n,o,r,s,a,l,c,u=e.length,d=e[0],h=d.length,p=[];for(p[0]=l=c=0,i=1;i<h;++i){for(o=t=0;t<u;++t)o+=e[t][i][1];for(a=d[i][r=t=0]-d[i-1][0];t<u;++t){for(n=0,s=(e[t][i][1]-e[t][i-1][1])/(2*a);n<t;++n)s+=(e[n][i][1]-e[n][i-1][1])/a;r+=s*e[t][i][1]}p[i]=l-=o?r/o*a:0,l<c&&(c=l)}for(i=0;i<h;++i)p[i]-=c;return p},expand:function(e){for(var t,i,n=e.length,o=e[0].length,r=1/n,s=[],a=0;a<o;++a){for(i=t=0;t<n;t++)i+=e[t][a][1];if(i)for(t=0;t<n;t++)e[t][a][1]/=i;else for(t=0;t<n;t++)e[t][a][1]=r}for(a=0;a<o;++a)s[a]=0;return s},zero:os});function ns(e){return L.range(e.length)}function os(e){for(var t=-1,i=e[0].length,n=[];++t<i;)n[t]=0;return n}function rs(e){for(var t,i=1,n=0,o=e[0][1],r=e.length;i<r;++i)(t=e[i][1])>o&&(n=i,o=t);return n}function ss(e){return e.reduce(as,0)}function as(e,t){return e+t[1]}function ls(e,t){return cs(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function cs(e,t){for(var i=-1,n=+e[0],o=(e[1]-n)/t,r=[];++i<=t;)r[i]=o*i+n;return r}function us(e){return[L.min(e),L.max(e)]}function ds(e,t){return e.value-t.value}function hs(e,t){var i=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=i)._pack_prev=t}function ps(e,t){(e._pack_next=t)._pack_prev=e}function fs(e,t){var i=t.x-e.x,n=t.y-e.y,e=e.r+t.r;return i*i+n*n<.999*e*e}function gs(e){if((t=e.children)&&(s=t.length)){var t,i,n,o,r,s,a=1/0,l=-1/0,c=1/0,u=-1/0;if(t.forEach(ms),(i=t[0]).x=-i.r,i.y=0,b(i),1<s&&((n=t[1]).x=n.r,n.y=0,b(n),2<s))for(ys(i,n,o=t[2]),b(o),hs(i,o),hs(i._pack_prev=o,n),n=i._pack_next,y=3;y<s;y++){ys(i,n,o=t[y]);for(var d=0,h=1,p=1,f=n._pack_next;f!==n;f=f._pack_next,h++)if(fs(f,o)){d=1;break}if(1==d)for(r=i._pack_prev;r!==f._pack_prev&&!fs(r,o);r=r._pack_prev,p++);d?(h<p||h==p&&n.r<i.r?ps(i,n=f):ps(i=r,n),y--):(hs(i,o),b(n=o))}for(var g=(a+l)/2,m=(c+u)/2,v=0,y=0;y<s;y++)(o=t[y]).x-=g,o.y-=m,v=Math.max(v,o.r+Math.sqrt(o.x*o.x+o.y*o.y));e.r=v,t.forEach(vs)}function b(e){a=Math.min(e.x-e.r,a),l=Math.max(e.x+e.r,l),c=Math.min(e.y-e.r,c),u=Math.max(e.y+e.r,u)}}function ms(e){e._pack_next=e._pack_prev=e}function vs(e){delete e._pack_next,delete e._pack_prev}function ys(e,t,i){var n,o,r=e.r+i.r,s=t.x-e.x,a=t.y-e.y;r&&(s||a)?(t=t.r+i.r,o=.5+((r*=r)-(t*=t))/(2*(n=s*s+a*a)),t=Math.sqrt(Math.max(0,2*t*(r+n)-(r-=n)*r-t*t))/(2*n),i.x=e.x+o*s+t*a,i.y=e.y+o*a-t*s):(i.x=e.x+r,i.y=e.y)}function bs(e,t){return e.parent==t.parent?1:2}function ws(e){var t=e.children;return t.length?t[0]:e.t}function Cs(e){var t,i=e.children;return(t=i.length)?i[t-1]:e.t}function _s(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function As(e,t){var i=e.x+t[3],n=e.y+t[0],o=e.dx-t[1]-t[3],e=e.dy-t[0]-t[2];return o<0&&(i+=o/2,o=0),e<0&&(n+=e/2,e=0),{x:i,y:n,dx:o,dy:e}}function Es(e){var t=e[0],e=e[e.length-1];return t<e?[t,e]:[e,t]}function xs(e){return e.rangeExtent?e.rangeExtent():Es(e.range())}function Ss(e,t,i,n){var o=i(e[0],e[1]),r=n(t[0],t[1]);return function(e){return r(o(e))}}function Ts(e,t){var i,n=0,o=e.length-1,r=e[n],s=e[o];return s<r&&(i=n,n=o,o=i,i=r,r=s,s=i),e[n]=t.floor(r),e[o]=t.ceil(s),e}L.layout.histogram=function(){var d=!0,h=Number,p=us,f=ls;function i(e,t){for(var i,n,o=[],r=e.map(h,this),s=p.call(this,r,t),a=f.call(this,s,r,t),t=-1,l=r.length,c=a.length-1,u=d?1:1/l;++t<c;)(i=o[t]=[]).dx=a[t+1]-(i.x=a[t]),i.y=0;if(0<c)for(t=-1;++t<l;)(n=r[t])>=s[0]&&n<=s[1]&&((i=o[L.bisect(a,n,1,c)-1]).y+=u,i.push(e[t]));return o}return i.value=function(e){return arguments.length?(h=e,i):h},i.range=function(e){return arguments.length?(p=$(e),i):p},i.bins=function(t){return arguments.length?(f="number"==typeof t?function(e){return cs(e,t)}:$(t),i):f},i.frequency=function(e){return arguments.length?(d=!!e,i):d},i},L.layout.pack=function(){var s,a=L.layout.hierarchy().sort(ds),l=0,c=[1,1];function t(e,t){var i,e=a.call(this,e,t),t=e[0],n=c[0],o=c[1],r=null==s?Math.sqrt:"function"==typeof s?s:function(){return s};return t.x=t.y=0,b(t,function(e){e.r=+r(e.value)}),b(t,gs),l&&(i=l*(s?1:Math.max(2*t.r/n,2*t.r/o))/2,b(t,function(e){e.r+=i}),b(t,gs),b(t,function(e){e.r-=i})),function e(t,i,n,o){var r=t.children;t.x=i+=o*t.x;t.y=n+=o*t.y;t.r*=o;if(r)for(var s=-1,a=r.length;++s<a;)e(r[s],i,n,o)}(t,n/2,o/2,s?1:1/Math.max(2*t.r/n,2*t.r/o)),e}return t.size=function(e){return arguments.length?(c=e,t):c},t.radius=function(e){return arguments.length?(s=null==e||"function"==typeof e?e:+e,t):s},t.padding=function(e){return arguments.length?(l=+e,t):l},zr(t,a)},L.layout.tree=function(){var c=L.layout.hierarchy().sort(null).value(null),h=bs,u=[1,1],d=null;function t(e,t){var i,n,o,r,s,a,e=c.call(this,e,t),t=e[0],l=function(e){var t,e={A:null,children:[e]},i=[e];for(;null!=(t=i.pop());)for(var n,o=t.children,r=0,s=o.length;r<s;++r)i.push((o[r]=n={_:o[r],parent:t,children:(n=o[r].children)&&n.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:r}).a=n);return e.children[0]}(t);return b(l,p),l.parent.m=-l.z,Ur(l,f),d?Ur(t,g):(Ur(o=n=i=t,function(e){e.x<i.x&&(i=e),e.x>n.x&&(n=e),e.depth>o.depth&&(o=e)}),r=h(i,n)/2-i.x,s=u[0]/(n.x+h(n,i)/2+r),a=u[1]/(o.depth||1),Ur(t,function(e){e.x=(e.x+r)*s,e.y=e.depth*a})),e}function p(e){var t=e.children,i=e.parent.children,n=e.i?i[e.i-1]:null;if(t.length){for(var o,r=0,s=0,a=e.children,l=a.length;0<=--l;)(o=a[l]).z+=r,o.m+=r,r+=o.s+(s+=o.c);t=(t[0].z+t[t.length-1].z)/2;n?(e.z=n.z+h(e._,n._),e.m=e.z-t):e.z=t}else n&&(e.z=n.z+h(e._,n._));e.parent.A=function(e,t,i){if(t){for(var n,o=e,r=e,s=t,a=o.parent.children[0],l=o.m,c=r.m,u=s.m,d=a.m;s=Cs(s),o=ws(o),s&&o;)a=ws(a),(r=Cs(r)).a=e,0<(n=s.z+u-o.z-l+h(s._,o._))&&(function(e,t,i){var n=i/(t.i-e.i);t.c-=n,t.s+=i,e.c+=n,t.z+=i,t.m+=i}(function(e,t,i){return e.a.parent===t.parent?e.a:i}(s,e,i),e,n),l+=n,c+=n),u+=s.m,l+=o.m,d+=a.m,c+=r.m;s&&!Cs(r)&&(r.t=s,r.m+=u-c),o&&!ws(a)&&(a.t=o,a.m+=l-d,i=e)}return i}(e,n,e.parent.A||i[0])}function f(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function g(e){e.x*=u[0],e.y=e.depth*u[1]}return t.separation=function(e){return arguments.length?(h=e,t):h},t.size=function(e){return arguments.length?(d=null==(u=e)?g:null,t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null==(u=e)?null:g,t):d?u:null},zr(t,c)},L.layout.cluster=function(){var l=L.layout.hierarchy().sort(null).value(null),c=bs,u=[1,1],d=!1;function t(e,t){var n,e=l.call(this,e,t),i=e[0],o=0,t=(b(i,function(e){var t,i=e.children;i&&i.length?(e.x=(t=i).reduce(function(e,t){return e+t.x},0)/t.length,e.y=1+L.max(i,function(e){return e.y})):(e.x=n?o+=c(e,n):0,e.y=0,n=e)}),function e(t){var i=t.children;return i&&i.length?e(i[0]):t}(i)),r=function e(t){var i,n=t.children;return n&&(i=n.length)?e(n[i-1]):t}(i),s=t.x-c(t,r)/2,a=r.x+c(r,t)/2;return b(i,d?function(e){e.x=(e.x-i.x)*u[0],e.y=(i.y-e.y)*u[1]}:function(e){e.x=(e.x-s)/(a-s)*u[0],e.y=(1-(i.y?e.y/i.y:1))*u[1]}),e}return t.separation=function(e){return arguments.length?(c=e,t):c},t.size=function(e){return arguments.length?(d=null==(u=e),t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null!=(u=e),t):d?u:null},zr(t,l)},L.layout.treemap=function(){var i,n=L.layout.hierarchy(),u=Math.round,o=[1,1],r=null,c=_s,s=!1,d="squarify",h=.5*(1+Math.sqrt(5));function p(e,t){for(var i,n,o=-1,r=e.length;++o<r;)n=(i=e[o]).value*(t<0?0:t),i.area=isNaN(n)||n<=0?0:n}function f(e){var t=e.children;if(t&&t.length){var i,n,o=c(e),r=[],s=t.slice(),a=1/0,l="slice"===d?o.dx:"dice"===d?o.dy:"slice-dice"===d?1&e.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(p(s,o.dx*o.dy/e.value),r.area=0;0<(n=s.length);)r.push(n=s[n-1]),r.area+=n.area,a="squarify"!==d||(i=function(e,t){var i,n=e.area,o=0,r=1/0,s=-1,a=e.length;for(;++s<a;)(i=e[s].area)&&(i<r&&(r=i),o<i&&(o=i));return t*=t,(n*=n)?Math.max(t*o*h/n,n/(t*r*h)):1/0}(r,l))<=a?(s.pop(),i):(r.area-=r.pop().area,g(r,l,o,!1),l=Math.min(o.dx,o.dy),1/(r.length=r.area=0));r.length&&(g(r,l,o,!0),r.length=r.area=0),t.forEach(f)}}function a(e){var t=e.children;if(t&&t.length){var i,n=c(e),o=t.slice(),r=[];for(p(o,n.dx*n.dy/e.value),r.area=0;i=o.pop();)r.push(i),r.area+=i.area,null!=i.z&&(g(r,i.z?n.dx:n.dy,n,!o.length),r.length=r.area=0);t.forEach(a)}}function g(e,t,i,n){var o,r=-1,s=e.length,a=i.x,l=i.y,c=t?u(e.area/t):0;if(t==i.dx){for((n||c>i.dy)&&(c=i.dy);++r<s;)(o=e[r]).x=a,o.y=l,o.dy=c,a+=o.dx=Math.min(i.x+i.dx-a,c?u(o.area/c):0);o.z=!0,o.dx+=i.x+i.dx-a,i.y+=c,i.dy-=c}else{for((n||c>i.dx)&&(c=i.dx);++r<s;)(o=e[r]).x=a,o.y=l,o.dx=c,l+=o.dy=Math.min(i.y+i.dy-l,c?u(o.area/c):0);o.z=!1,o.dy+=i.y+i.dy-l,i.x+=c,i.dx-=c}}function l(e){var e=i||n(e),t=e[0];return t.x=0,t.y=0,t.dx=o[0],t.dy=o[1],i&&n.revalue(t),p([t],t.dx*t.dy/t.value),(i?a:f)(t),s&&(i=e),e}return l.size=function(e){return arguments.length?(o=e,l):o},l.padding=function(i){return arguments.length?(c=null==(r=i)?_s:"function"==(t=typeof i)?function(e){var t=i.call(l,e,e.depth);return null==t?_s(e):As(e,"number"==typeof t?[t,t,t,t]:t)}:("number"==t&&(i=[i,i,i,i]),e),l):r;function e(e){return As(e,i)}var t},l.round=function(e){return arguments.length?(u=e?Math.round:Number,l):u!=Number},l.sticky=function(e){return arguments.length?(s=e,i=null,l):s},l.ratio=function(e){return arguments.length?(h=e,l):h},l.mode=function(e){return arguments.length?(d=e+"",l):d},zr(l,n)},L.random={normal:function(n,o){var e=arguments.length;return e<2&&(o=1),e<1&&(n=0),function(){for(var e,t,i;!(i=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<i;);return n+o*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=L.random.normal.apply(L,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=L.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(i){return function(){for(var e=0,t=0;t<i;t++)e+=Math.random();return e}}},L.scale={};var ks={floor:R,ceil:R};function Ds(i,e,t,n){var o=[],r=[],s=0,a=Math.min(i.length,e.length)-1;for(i[a]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++s<=a;)o.push(t(i[s-1],i[s])),r.push(n(e[s-1],e[s]));return function(e){var t=L.bisect(i,e,1,a)-1;return r[t](o[t](e))}}function Rs(e,t){return L.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Os(e,t){return Ts(e,(i=Fs(e,t)[2])?{floor:function(e){return Math.floor(e/i)*i},ceil:function(e){return Math.ceil(e/i)*i}}:ks);var i}function Fs(e,t){null==t&&(t=10);var e=Es(e),i=e[1]-e[0],n=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),t=t/i*n;return t<=.15?n*=10:t<=.35?n*=5:t<=.75&&(n*=2),e[0]=Math.ceil(e[0]/n)*n,e[1]=Math.floor(e[1]/n)*n+.5*n,e[2]=n,e}function Ls(e,t){return L.range.apply(L,Fs(e,t))}function Ms(e,t,i){var n,o,r,e=Fs(e,t);if(i){var s,t=Bt.exec(i);if(t.shift(),"s"===t[8])return s=L.formatPrefix(Math.max(O(e[0]),O(e[1]))),t[7]||(t[7]="."+$s(s.scale(e[2]))),t[8]="f",i=L.format(t.join("")),function(e){return i(s.scale(e))+s.symbol};t[7]||(t[7]="."+(n=t[8],r=$s((o=e)[2]),n in Ns?Math.abs(r-$s(Math.max(O(o[0]),O(o[1]))))+ +("e"!==n):r-2*("%"===n))),i=t.join("")}else i=",."+$s(e[2])+"f";return L.format(i)}L.scale.linear=function(){return function e(i,n,o,r){var s,a;function t(){var e=2<Math.min(i.length,n.length)?Ds:Ss,t=r?$r:Nr;return s=e(i,n,t,o),a=e(n,i,t,gr),l}function l(e){return s(e)}l.invert=function(e){return a(e)};l.domain=function(e){return arguments.length?(i=e.map(Number),t()):i};l.range=function(e){return arguments.length?(n=e,t()):n};l.rangeRound=function(e){return l.range(e).interpolate(Dr)};l.clamp=function(e){return arguments.length?(r=e,t()):r};l.interpolate=function(e){return arguments.length?(o=e,t()):o};l.ticks=function(e){return Ls(i,e)};l.tickFormat=function(e,t){return Ms(i,e,t)};l.nice=function(e){return Os(i,e),t()};l.copy=function(){return e(i,n,o,r)};return t()}([0,1],[0,1],gr,!1)};var Ns={s:1,g:1,p:1,r:1,e:1};function $s(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}L.scale.log=function(){return function e(t,l,c,u){function d(e){return(c?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function h(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function r(e){return t(d(e))}r.invert=function(e){return h(t.invert(e))};r.domain=function(e){return arguments.length?(c=0<=e[0],t.domain((u=e.map(Number)).map(d)),r):u};r.base=function(e){return arguments.length?(l=+e,t.domain(u.map(d)),r):l};r.nice=function(){var e=Ts(u.map(d),c?Math:Ps);return t.domain(e),u=e.map(h),r};r.ticks=function(){var e=Es(u),t=[],i=e[0],n=e[1],o=Math.floor(d(i)),r=Math.ceil(d(n)),s=l%1?2:l;if(isFinite(r-o)){if(c){for(;o<r;o++)for(var a=1;a<s;a++)t.push(h(o)*a);t.push(h(o))}else for(t.push(h(o));o++<r;)for(a=s-1;0<a;a--)t.push(h(o)*a);for(o=0;t[o]<i;o++);for(r=t.length;t[r-1]>n;r--);t=t.slice(o,r)}return t};r.tickFormat=function(e,t){if(!arguments.length)return Is;arguments.length<2?t=Is:"function"!=typeof t&&(t=L.format(t));var i,n=Math.max(.1,e/r.ticks().length),o=c?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(e){return e/h(o(d(e)+i))<=n?t(e):""}};r.copy=function(){return e(t.copy(),l,c,u)};return Rs(r,t)}(L.scale.linear().domain([0,1]),10,!0,[1,10])};var Is=L.format(".0e"),Ps={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Gs(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}L.scale.pow=function(){return function e(t,i,n){var o=Gs(i),r=Gs(1/i);function s(e){return t(o(e))}s.invert=function(e){return r(t.invert(e))};s.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(o)),s):n};s.ticks=function(e){return Ls(n,e)};s.tickFormat=function(e,t){return Ms(n,e,t)};s.nice=function(e){return s.domain(Os(n,e))};s.exponent=function(e){return arguments.length?(o=Gs(i=e),r=Gs(1/i),t.domain(n.map(o)),s):i};s.copy=function(){return e(t.copy(),i,n)};return Rs(s,t)}(L.scale.linear(),1,[0,1])},L.scale.sqrt=function(){return L.scale.pow().exponent(.5)},L.scale.ordinal=function(){return function e(a,l){var o,c,u;function d(e){return c[((o.get(e)||("range"===l.t?o.set(e,a.push(e)):NaN))-1)%c.length]}function h(t,i){return L.range(a.length).map(function(e){return t+i*e})}d.domain=function(e){if(!arguments.length)return a;a=[],o=new K;for(var t,i=-1,n=e.length;++i<n;)o.has(t=e[i])||o.set(t,a.push(t));return d[l.t].apply(d,l.a)};d.range=function(e){return arguments.length?(c=e,u=0,l={t:"range",a:arguments},d):c};d.rangePoints=function(e,t){arguments.length<2&&(t=0);var i=e[0],n=e[1],n=a.length<2?(i=(i+n)/2,0):(n-i)/(a.length-1+t);return c=h(i+n*t/2,n),u=0,l={t:"rangePoints",a:arguments},d};d.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var i=e[0],n=e[1],o=a.length<2?(i=n=Math.round((i+n)/2),0):(n-i)/(a.length-1+t)|0;return c=h(i+Math.round(o*t/2+(n-i-(a.length-1+t)*o)/2),o),u=0,l={t:"rangeRoundPoints",a:arguments},d};d.rangeBands=function(e,t,i){arguments.length<2&&(t=0),arguments.length<3&&(i=t);var n=e[1]<e[0],o=e[+n],r=e[1-n],r=(r-o)/(a.length-t+2*i);return c=h(o+r*i,r),n&&c.reverse(),u=r*(1-t),l={t:"rangeBands",a:arguments},d};d.rangeRoundBands=function(e,t,i){arguments.length<2&&(t=0),arguments.length<3&&(i=t);var n=e[1]<e[0],o=e[+n],r=e[1-n],s=Math.floor((r-o)/(a.length-t+2*i));return c=h(o+Math.round((r-o-(a.length-t)*s)/2),s),n&&c.reverse(),u=Math.round(s*(1-t)),l={t:"rangeRoundBands",a:arguments},d};d.rangeBand=function(){return u};d.rangeExtent=function(){return Es(l.a[0])};d.copy=function(){return e(a,l)};return d.domain(a)}([],{t:"range",a:[[]]})},L.scale.category10=function(){return L.scale.ordinal().range(Bs)},L.scale.category20=function(){return L.scale.ordinal().range(Ws)},L.scale.category20b=function(){return L.scale.ordinal().range(Hs)},L.scale.category20c=function(){return L.scale.ordinal().range(Vs)};var Bs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(bt),Ws=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(bt),Hs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(bt),Vs=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(bt);function js(){return 0}L.scale.quantile=function(){return function e(i,n){var o;function t(){var e=0,t=n.length;for(o=[];++e<t;)o[e-1]=L.quantile(i,e/t);return r}function r(e){if(!isNaN(e=+e))return n[L.bisect(o,e)]}r.domain=function(e){return arguments.length?(i=e.map(z).filter(U).sort(j),t()):i};r.range=function(e){return arguments.length?(n=e,t()):n};r.quantiles=function(){return o};r.invertExtent=function(e){return(e=n.indexOf(e))<0?[NaN,NaN]:[0<e?o[e-1]:i[0],e<o.length?o[e]:i[i.length-1]]};r.copy=function(){return e(i,n)};return t()}([],[])},L.scale.quantize=function(){return function e(t,i,n){var o,r;function s(e){return n[Math.max(0,Math.min(r,Math.floor(o*(e-t))))]}function a(){return o=n.length/(i-t),r=n.length-1,s}s.domain=function(e){return arguments.length?(t=+e[0],i=+e[e.length-1],a()):[t,i]};s.range=function(e){return arguments.length?(n=e,a()):n};s.invertExtent=function(e){return[e=(e=n.indexOf(e))<0?NaN:e/o+t,e+1/o]};s.copy=function(){return e(t,i,n)};return a()}(0,1,[0,1])},L.scale.threshold=function(){return function e(t,i){function n(e){if(e<=e)return i[L.bisect(t,e)]}n.domain=function(e){return arguments.length?(t=e,n):t};n.range=function(e){return arguments.length?(i=e,n):i};n.invertExtent=function(e){return e=i.indexOf(e),[t[e-1],t[e]]};n.copy=function(){return e(t,i)};return n}([.5],[0,1])},L.scale.identity=function(){return function e(i){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(i=e.map(t),t):i};t.ticks=function(e){return Ls(i,e)};t.tickFormat=function(e,t){return Ms(i,e,t)};t.copy=function(){return e(i)};return t}([0,1])},L.svg={},L.svg.arc=function(){var C=Us,_=Ys,A=js,E=zs,x=qs,S=Ks,T=Xs;function t(){var e=Math.max(0,+C.apply(this,arguments)),t=Math.max(0,+_.apply(this,arguments)),i=x.apply(this,arguments)-N,n=S.apply(this,arguments)-N,o=Math.abs(n-i),r=n<i?0:1;if(t<e&&(s=t,t=e,e=s),qe<=o)return k(t,r)+(e?k(e,1-r):"")+"Z";var s,a,l,c,u,d,h,p,f,g,m,v,y,o=0,b=0,w=[];return(v=(+T.apply(this,arguments)||0)/2)&&(y=E===zs?Math.sqrt(e*e+t*t):+E.apply(this,arguments),r||(b*=-1),t&&(b=Ze(y/t*Math.sin(v))),e&&(o=Ze(y/e*Math.sin(v)))),t?(c=t*Math.cos(i+b),u=t*Math.sin(i+b),d=t*Math.cos(n-b),a=t*Math.sin(n-b),l=Math.abs(n-i-2*b)<=D?0:1,b&&Qs(c,u,d,a)===r^l&&(y=(i+n)/2,c=t*Math.cos(y),u=t*Math.sin(y),d=a=null)):c=u=0,e?(f=e*Math.cos(n-o),g=e*Math.sin(n-o),m=e*Math.cos(i+o),h=e*Math.sin(i+o),p=Math.abs(i-n+2*o)<=D?0:1,o&&Qs(f,g,m,h)===1-r^p&&(v=(i+n)/2,f=e*Math.cos(v),g=e*Math.sin(v),m=h=null)):f=g=0,.001<(s=Math.min(Math.abs(t-e)/2,+A.apply(this,arguments)))?(b=e<t^r?0:1,o=c-(y=null==m?[f,g]:null==d?[c,u]:To([c,u],[m,h],[d,a],[f,g]))[0],i=u-y[1],n=d-y[0],v=a-y[1],o=1/Math.sin(Math.acos((o*n+i*v)/(Math.sqrt(o*o+i*i)*Math.sqrt(n*n+v*v)))/2),i=Math.sqrt(y[0]*y[0]+y[1]*y[1]),null!=d?(v=Zs(null==m?[f,g]:[m,h],[c,u],t,n=Math.min(s,(t-i)/(1+o)),r),y=Zs([d,a],[f,g],t,n,r),s===n?w.push("M",v[0],"A",n,",",n," 0 0,",b," ",v[1],"A",t,",",t," 0 ",1-r^Qs(v[1][0],v[1][1],y[1][0],y[1][1]),",",r," ",y[1],"A",n,",",n," 0 0,",b," ",y[0]):w.push("M",v[0],"A",n,",",n," 0 1,",b," ",y[0])):w.push("M",c,",",u),null!=m?(n=Zs([c,u],[m,h],e,-(v=Math.min(s,(e-i)/(o-1))),r),y=Zs([f,g],null==d?[c,u]:[d,a],e,-v,r),s===v?w.push("L",y[0],"A",v,",",v," 0 0,",b," ",y[1],"A",e,",",e," 0 ",r^Qs(y[1][0],y[1][1],n[1][0],n[1][1]),",",1-r," ",n[1],"A",v,",",v," 0 0,",b," ",n[0]):w.push("L",y[0],"A",v,",",v," 0 0,",b," ",n[0])):w.push("L",f,",",g)):(w.push("M",c,",",u),null!=d&&w.push("A",t,",",t," 0 ",l,",",r," ",d,",",a),w.push("L",f,",",g),null!=m&&w.push("A",e,",",e," 0 ",p,",",1-r," ",m,",",h)),w.push("Z"),w.join("")}function k(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(C=$(e),t):C},t.outerRadius=function(e){return arguments.length?(_=$(e),t):_},t.cornerRadius=function(e){return arguments.length?(A=$(e),t):A},t.padRadius=function(e){return arguments.length?(E=e==zs?zs:$(e),t):E},t.startAngle=function(e){return arguments.length?(x=$(e),t):x},t.endAngle=function(e){return arguments.length?(S=$(e),t):S},t.padAngle=function(e){return arguments.length?(T=$(e),t):T},t.centroid=function(){var e=(+C.apply(this,arguments)+ +_.apply(this,arguments))/2,t=(+x.apply(this,arguments)+ +S.apply(this,arguments))/2-N;return[Math.cos(t)*e,Math.sin(t)*e]},t};var zs="auto";function Us(e){return e.innerRadius}function Ys(e){return e.outerRadius}function qs(e){return e.startAngle}function Ks(e){return e.endAngle}function Xs(e){return e&&e.padAngle}function Qs(e,t,i,n){return 0<(e-i)*t-(t-n)*e?0:1}function Zs(e,t,i,n,o){var r=e[0]-t[0],s=e[1]-t[1],o=(o?n:-n)/Math.sqrt(r*r+s*s),s=o*s,o=-o*r,r=e[0]+s,e=e[1]+o,a=t[0]+s,t=t[1]+o,l=(r+a)/2,c=(e+t)/2,u=a-r,d=t-e,h=u*u+d*d,n=i-n,r=r*t-a*e,t=(d<0?-1:1)*Math.sqrt(n*n*h-r*r),a=(r*d-u*t)/h,e=(-r*u-d*t)/h,p=(r*d+u*t)/h,r=(-r*u+d*t)/h,u=a-l,d=e-c,t=p-l,h=r-c;return t*t+h*h<u*u+d*d&&(a=p,e=r),[[a-s,e-o],[a*i/n,e*i/n]]}function Js(c){var u=Co,d=_o,h=hn,p=k,t=p.key,f=.7;function i(e){var t,i=[],n=[],o=-1,r=e.length,s=$(u),a=$(d);function l(){i.push("M",p(c(n),f))}for(;++o<r;)h.call(this,t=e[o],o)?n.push([+s.call(this,t,o),+a.call(this,t,o)]):n.length&&(l(),n=[]);return n.length&&l(),i.length?i.join(""):null}return i.x=function(e){return arguments.length?(u=e,i):u},i.y=function(e){return arguments.length?(d=e,i):d},i.defined=function(e){return arguments.length?(h=e,i):h},i.interpolate=function(e){return arguments.length?(t="function"==typeof e?p=e:(p=ea.get(e)||k).key,i):t},i.tension=function(e){return arguments.length?(f=e,i):f},i}L.svg.line=function(){return Js(R)};var ea=L.map({linear:k,"linear-closed":function(e){return k(e)+"Z"},step:function(e){var t=0,i=e.length,n=e[0],o=[n[0],",",n[1]];for(;++t<i;)o.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);1<i&&o.push("H",n[0]);return o.join("")},"step-before":ta,"step-after":ia,basis:ra,"basis-open":function(e){if(e.length<4)return k(e);var t,i=[],n=-1,o=e.length,r=[0],s=[0];for(;++n<3;)t=e[n],r.push(t[0]),s.push(t[1]);i.push(w(la,r)+","+w(la,s)),--n;for(;++n<o;)t=e[n],r.shift(),r.push(t[0]),s.shift(),s.push(t[1]),ca(i,r,s);return i.join("")},"basis-closed":function(e){var t,i,n=-1,o=e.length,r=o+4,s=[],a=[];for(;++n<4;)i=e[n%o],s.push(i[0]),a.push(i[1]);t=[w(la,s),",",w(la,a)],--n;for(;++n<r;)i=e[n%o],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),ca(t,s,a);return t.join("")},bundle:function(e,t){var i=e.length-1;if(i)for(var n,o,r=e[0][0],s=e[0][1],a=e[i][0]-r,l=e[i][1]-s,c=-1;++c<=i;)n=e[c],o=c/i,n[0]=t*n[0]+(1-t)*(r+o*a),n[1]=t*n[1]+(1-t)*(s+o*l);return ra(e)},cardinal:function(e,t){return e.length<3?k(e):e[0]+na(e,oa(e,t))},"cardinal-open":function(e,t){return e.length<4?k(e):e[1]+na(e.slice(1,-1),oa(e,t))},"cardinal-closed":function(e,t){return e.length<3?k(e):e[0]+na((e.push(e[0]),e),oa([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?k(e):e[0]+na(e,function(e){var t,i,n,o,r=[],s=function(e){var t=0,i=e.length-1,n=[],o=e[0],r=e[1],s=n[0]=ua(o,r);for(;++t<i;)n[t]=(s+(s=ua(o=r,r=e[t+1])))/2;return n[t]=s,n}(e),a=-1,l=e.length-1;for(;++a<l;)t=ua(e[a],e[a+1]),O(t)<F?s[a]=s[a+1]=0:(i=s[a]/t,n=s[a+1]/t,9<(o=i*i+n*n)&&(o=3*t/Math.sqrt(o),s[a]=o*i,s[a+1]=o*n));a=-1;for(;++a<=l;)o=(e[Math.min(l,a+1)][0]-e[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),r.push([o||0,s[a]*o||0]);return r}(e))}});function k(e){return e.join("L")}function ta(e){for(var t=0,i=e.length,n=e[0],o=[n[0],",",n[1]];++t<i;)o.push("V",(n=e[t])[1],"H",n[0]);return o.join("")}function ia(e){for(var t=0,i=e.length,n=e[0],o=[n[0],",",n[1]];++t<i;)o.push("H",(n=e[t])[0],"V",n[1]);return o.join("")}function na(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return k(e);var i=e.length!=t.length,n="",o=e[0],r=e[1],s=t[0],a=s,l=1;if(i&&(n+="Q"+(r[0]-2*s[0]/3)+","+(r[1]-2*s[1]/3)+","+r[0]+","+r[1],o=e[1],l=2),1<t.length){a=t[1],r=e[l],l++,n+="C"+(o[0]+s[0])+","+(o[1]+s[1])+","+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1];for(var c=2;c<t.length;c++,l++)r=e[l],a=t[c],n+="S"+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1]}return i&&(o=e[l],n+="Q"+(r[0]+2*a[0]/3)+","+(r[1]+2*a[1]/3)+","+o[0]+","+o[1]),n}function oa(e,t){for(var i,n=[],o=(1-t)/2,r=e[0],s=e[1],a=1,l=e.length;++a<l;)i=r,r=s,s=e[a],n.push([o*(s[0]-i[0]),o*(s[1]-i[1])]);return n}function ra(e){if(e.length<3)return k(e);var t=1,i=e.length,n=e[0],o=n[0],r=n[1],s=[o,o,o,(n=e[1])[0]],a=[r,r,r,n[1]],l=[o,",",r,"L",w(la,s),",",w(la,a)];for(e.push(e[i-1]);++t<=i;)n=e[t],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),ca(l,s,a);return e.pop(),l.push("L",n),l.join("")}function w(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}ea.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var sa=[0,2/3,1/3,0],aa=[0,1/3,2/3,0],la=[0,1/6,2/3,1/6];function ca(e,t,i){e.push("C",w(sa,t),",",w(sa,i),",",w(aa,t),",",w(aa,i),",",w(la,t),",",w(la,i))}function ua(e,t){return(t[1]-e[1])/(t[0]-e[0])}function da(e){for(var t,i,n,o=-1,r=e.length;++o<r;)i=(t=e[o])[0],n=t[1]-N,t[0]=i*Math.cos(n),t[1]=i*Math.sin(n);return e}function ha(f){var g=Co,m=Co,v=0,y=_o,b=hn,w=k,t=w.key,C=w,_="L",A=.7;function i(e){var t,i,n,o=[],r=[],s=[],a=-1,l=e.length,c=$(g),u=$(v),d=g===m?function(){return i}:$(m),h=v===y?function(){return n}:$(y);function p(){o.push("M",w(f(s),A),_,C(f(r.reverse()),A),"Z")}for(;++a<l;)b.call(this,t=e[a],a)?(r.push([i=+c.call(this,t,a),n=+u.call(this,t,a)]),s.push([+d.call(this,t,a),+h.call(this,t,a)])):r.length&&(p(),r=[],s=[]);return r.length&&p(),o.length?o.join(""):null}return i.x=function(e){return arguments.length?(g=m=e,i):m},i.x0=function(e){return arguments.length?(g=e,i):g},i.x1=function(e){return arguments.length?(m=e,i):m},i.y=function(e){return arguments.length?(v=y=e,i):y},i.y0=function(e){return arguments.length?(v=e,i):v},i.y1=function(e){return arguments.length?(y=e,i):y},i.defined=function(e){return arguments.length?(b=e,i):b},i.interpolate=function(e){return arguments.length?(t="function"==typeof e?w=e:(w=ea.get(e)||k).key,C=w.reverse||w,_=w.closed?"M":"L",i):t},i.tension=function(e){return arguments.length?(A=e,i):A},i}function pa(e){return e.radius}function fa(e){return[e.x,e.y]}function ga(){return 64}function ma(){return"circle"}function va(e){e=Math.sqrt(e/D);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}L.svg.line.radial=function(){var e=Js(da);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(ta.reverse=ia).reverse=ta,L.svg.area=function(){return ha(R)},L.svg.area.radial=function(){var e=ha(da);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},L.svg.chord=function(){var o=so,r=ao,s=pa,a=qs,l=Ks;function t(e,t){var i,n=c(this,o,e,t),e=c(this,r,e,t);return"M"+n.p0+u(n.r,n.p1,n.a1-n.a0)+(t=e,(i=n).a0==t.a0&&i.a1==t.a1?d(n.r,n.p1,n.r,n.p0):d(n.r,n.p1,e.r,e.p0)+u(e.r,e.p1,e.a1-e.a0)+d(e.r,e.p1,n.r,n.p0))+"Z"}function c(e,t,i,n){var t=t.call(e,i,n),i=s.call(e,t,n),o=a.call(e,t,n)-N,e=l.call(e,t,n)-N;return{r:i,a0:o,a1:e,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(e),i*Math.sin(e)]}}function u(e,t,i){return"A"+e+","+e+" 0 "+ +(D<i)+",1 "+t}function d(e,t,i,n){return"Q 0,0 "+n}return t.radius=function(e){return arguments.length?(s=$(e),t):s},t.source=function(e){return arguments.length?(o=$(e),t):o},t.target=function(e){return arguments.length?(r=$(e),t):r},t.startAngle=function(e){return arguments.length?(a=$(e),t):a},t.endAngle=function(e){return arguments.length?(l=$(e),t):l},t},L.svg.diagonal=function(){var n=so,o=ao,r=fa;function t(e,t){var i=n.call(this,e,t),e=o.call(this,e,t),t=(i.y+e.y)/2,i=[i,{x:i.x,y:t},{x:e.x,y:t},e];return"M"+(i=i.map(r))[0]+"C"+i[1]+" "+i[2]+" "+i[3]}return t.source=function(e){return arguments.length?(n=$(e),t):n},t.target=function(e){return arguments.length?(o=$(e),t):o},t.projection=function(e){return arguments.length?(r=e,t):r},t},L.svg.diagonal.radial=function(){var e=L.svg.diagonal(),t=fa,n=e.projection;return e.projection=function(e){return arguments.length?n((i=t=e,function(){var e=i.apply(this,arguments),t=e[0],e=e[1]-N;return[t*Math.cos(e),t*Math.sin(e)]})):t;var i},e},L.svg.symbol=function(){var i=ma,n=ga;function t(e,t){return(ya.get(i.call(this,e,t))||va)(n.call(this,e,t))}return t.type=function(e){return arguments.length?(i=$(e),t):i},t.size=function(e){return arguments.length?(n=$(e),t):n},t};var ya=L.map({circle:va,cross:function(e){e=Math.sqrt(e/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(e){var e=Math.sqrt(e/(2*wa)),t=e*wa;return"M0,"+-e+"L"+t+",0 0,"+e+" "+-t+",0Z"},square:function(e){e=Math.sqrt(e)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(e){var e=Math.sqrt(e/ba),t=e*ba/2;return"M0,"+t+"L"+e+","+-t+" "+-e+","+-t+"Z"},"triangle-up":function(e){var e=Math.sqrt(e/ba),t=e*ba/2;return"M0,"+-t+"L"+e+","+t+" "+-e+","+t+"Z"}}),ba=(L.svg.symbolTypes=ya.keys(),Math.sqrt(3)),wa=Math.tan(30*E),Ca=(n.transition=function(e){for(var t,i,n=Ea||++Sa,o=Da(e),r=[],s=xa||{time:Date.now(),ease:Er,delay:0,duration:250},a=-1,l=this.length;++a<l;){r.push(t=[]);for(var c=this[a],u=-1,d=c.length;++u<d;)(i=c[u])&&Ra(i,u,o,n,s),t.push(i)}return Aa(r,o,n)},n.interrupt=function(e){return this.each(null==e?Ca:_a(Da(e)))},_a(Da()));function _a(i){return function(){var e,t;(e=this[i])&&(t=e[e.active])&&(--e.count?delete e[e.active]:delete this[i],e.active+=.5,t.event&&t.event.interrupt.call(this,this.__data__,t.index))}}function Aa(e,t,i){return fe(e,C),e.namespace=t,e.id=i,e}var Ea,xa,C=[],Sa=0;function Ta(e,n,o,r){var s=e.id,a=e.namespace;return Me(e,"function"==typeof o?function(e,t,i){e[a][s].tween.set(n,r(o.call(e,e.__data__,t,i)))}:(o=r(o),function(e){e[a][s].tween.set(n,o)}))}function ka(e){return null==e&&(e=""),function(){this.textContent=e}}function Da(e){return null==e?"__transition__":"__transition_"+e+"__"}function Ra(c,u,d,h,e){var p,f=c[d]||(c[d]={active:0,count:0}),g=f[h];g||(p=e.time,g=f[h]={tween:new K,time:p,delay:e.delay,duration:e.duration,ease:e.ease,index:u},e=null,++f.count,L.timer(function(e){var n,o,t=g.delay,i=Lt,r=[];if(i.t=t+p,t<=e)return s(e-t);function s(e){if(f.active>h)return l();var t=f[f.active];t&&(--f.count,delete f[f.active],t.event&&t.event.interrupt.call(c,c.__data__,t.index)),f.active=h,g.event&&g.event.start.call(c,c.__data__,u),g.tween.forEach(function(e,t){(t=t.call(c,c.__data__,u))&&r.push(t)}),o=g.ease,n=g.duration,L.timer(function(){return i.c=a(e||1)?hn:a,1},0,p)}function a(e){if(f.active!==h)return 1;for(var e=e/n,t=o(e),i=r.length;0<i;)r[--i].call(c,t);return 1<=e?(g.event&&g.event.end.call(c,c.__data__,u),l()):void 0}function l(){return--f.count?delete f[h]:delete c[d],1}i.c=s},0,p))}C.call=n.call,C.empty=n.empty,C.node=n.node,C.size=n.size,L.transition=function(e,t){return e&&e.transition?Ea?e.transition(t):e:L.selection().transition(e)},(L.transition.prototype=C).select=function(e){var t,i,n,o=this.id,r=this.namespace,s=[];e=be(e);for(var a=-1,l=this.length;++a<l;){s.push(t=[]);for(var c=this[a],u=-1,d=c.length;++u<d;)(n=c[u])&&(i=e.call(n,n.__data__,u,a))?("__data__"in n&&(i.__data__=n.__data__),Ra(i,u,r,o,n[r][o]),t.push(i)):t.push(null)}return Aa(s,r,o)},C.selectAll=function(e){var t,i,n,o,r,s=this.id,a=this.namespace,l=[];e=we(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,p=d.length;++h<p;)if(n=d[h]){r=n[a][s],i=e.call(n,n.__data__,h,c),l.push(t=[]);for(var f=-1,g=i.length;++f<g;)(o=i[f])&&Ra(o,f,a,s,r),t.push(o)}return Aa(l,a,s)},C.filter=function(e){var t,i,n=[];"function"!=typeof e&&(e=Le(e));for(var o=0,r=this.length;o<r;o++){n.push(t=[]);for(var s,a=0,l=(s=this[o]).length;a<l;a++)(i=s[a])&&e.call(i,i.__data__,a,o)&&t.push(i)}return Aa(n,this.namespace,this.id)},C.tween=function(t,i){var n=this.id,o=this.namespace;return arguments.length<2?this.node()[o][n].tween.get(t):Me(this,null==i?function(e){e[o][n].tween.remove(t)}:function(e){e[o][n].tween.set(t,i)})},C.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?Mr:gr,o=L.ns.qualify(e);function r(){this.removeAttribute(o)}function s(){this.removeAttributeNS(o.space,o.local)}return Ta(this,"attr."+e,t,o.local?function(i){return null==i?s:(i+="",function(){var t,e=this.getAttributeNS(o.space,o.local);return e!==i&&(t=n(e,i),function(e){this.setAttributeNS(o.space,o.local,t(e))})})}:function(i){return null==i?r:(i+="",function(){var t,e=this.getAttribute(o);return e!==i&&(t=n(e,i),function(e){this.setAttribute(o,t(e))})})})},C.attrTween=function(e,n){var o=L.ns.qualify(e);return this.tween("attr."+e,o.local?function(e,t){var i=n.call(this,e,t,this.getAttributeNS(o.space,o.local));return i&&function(e){this.setAttributeNS(o.space,o.local,i(e))}}:function(e,t){var i=n.call(this,e,t,this.getAttribute(o));return i&&function(e){this.setAttribute(o,i(e))}})},C.style=function(n,e,o){var t=arguments.length;if(t<3){if("string"!=typeof n){for(o in t<2&&(e=""),n)this.style(o,n[o],e);return this}o=""}function r(){this.style.removeProperty(n)}return Ta(this,"style."+n,e,function(i){return null==i?r:(i+="",function(){var t,e=B(this).getComputedStyle(this,null).getPropertyValue(n);return e!==i&&(t=gr(e,i),function(e){this.style.setProperty(n,t(e),o)})})})},C.styleTween=function(n,o,r){return arguments.length<3&&(r=""),this.tween("style."+n,function(e,t){var i=o.call(this,e,t,B(this).getComputedStyle(this,null).getPropertyValue(n));return i&&function(e){this.style.setProperty(n,i(e),r)}})},C.text=function(e){return Ta(this,"text",e,ka)},C.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},C.ease=function(t){var i=this.id,n=this.namespace;return arguments.length<1?this.node()[n][i].ease:("function"!=typeof t&&(t=L.ease.apply(L,arguments)),Me(this,function(e){e[n][i].ease=t}))},C.delay=function(n){var o=this.id,r=this.namespace;return arguments.length<1?this.node()[r][o].delay:Me(this,"function"==typeof n?function(e,t,i){e[r][o].delay=+n.call(e,e.__data__,t,i)}:(n=+n,function(e){e[r][o].delay=n}))},C.duration=function(n){var o=this.id,r=this.namespace;return arguments.length<1?this.node()[r][o].duration:Me(this,"function"==typeof n?function(e,t,i){e[r][o].duration=Math.max(1,n.call(e,e.__data__,t,i))}:(n=Math.max(1,n),function(e){e[r][o].duration=n}))},C.each=function(n,t){var o=this.id,r=this.namespace;if(arguments.length<2){var e=xa,i=Ea;try{Ea=o,Me(this,function(e,t,i){xa=e[r][o],n.call(e,e.__data__,t,i)})}finally{xa=e,Ea=i}}else Me(this,function(e){e=e[r][o];(e.event||(e.event=L.dispatch("start","end","interrupt"))).on(n,t)});return this},C.transition=function(){for(var e,t,i,n=this.id,o=++Sa,r=this.namespace,s=[],a=0,l=this.length;a<l;a++){s.push(e=[]);for(var c,u=0,d=(c=this[a]).length;u<d;u++)(t=c[u])&&Ra(t,u,r,o,{time:(i=t[r][n]).time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration}),e.push(t)}return Aa(s,r,o)},L.svg.axis=function(){var C,_=L.scale.linear(),A=Oa,E=6,x=6,S=3,T=[10],k=null;function i(e){e.each(function(){var e,t,i,n,o,r,s,a=L.select(this),l=this.__chart__||_,c=this.__chart__=_.copy(),u=null==k?c.ticks?c.ticks.apply(c,T):c.domain():k,d=null==C?c.tickFormat?c.tickFormat.apply(c,T):R:C,u=a.selectAll(".tick").data(u,c),h=u.enter().insert("g",".domain").attr("class","tick").style("opacity",F),p=L.transition(u.exit()).style("opacity",F).remove(),f=L.transition(u.order()).style("opacity",1),g=Math.max(E,0)+S,m=xs(c),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),L.transition(a)),v=(h.append("line"),h.append("text"),h.select("line")),y=f.select("line"),u=u.select("text").text(d),d=h.select("text"),b=f.select("text"),w="top"===A||"left"===A?-1:1;"bottom"===A||"top"===A?(e=La,t="x",n="y",i="x2",o="y2",u.attr("dy",w<0?"0em":".71em").style("text-anchor","middle"),a.attr("d","M"+m[0]+","+w*x+"V0H"+m[1]+"V"+w*x)):(e=Ma,t="y",n="x",i="y2",o="x2",u.attr("dy",".32em").style("text-anchor",w<0?"end":"start"),a.attr("d","M"+w*x+","+m[0]+"H0V"+m[1]+"H"+w*x)),v.attr(o,w*E),d.attr(n,w*g),y.attr(i,0).attr(o,w*E),b.attr(t,0).attr(n,w*g),c.rangeBand?(s=(r=c).rangeBand()/2,l=c=function(e){return r(e)+s}):l.rangeBand?l=c:p.call(e,c,l),h.call(e,l,c),f.call(e,c,c)})}return i.scale=function(e){return arguments.length?(_=e,i):_},i.orient=function(e){return arguments.length?(A=e in Fa?e+"":Oa,i):A},i.ticks=function(){return arguments.length?(T=arguments,i):T},i.tickValues=function(e){return arguments.length?(k=e,i):k},i.tickFormat=function(e){return arguments.length?(C=e,i):C},i.tickSize=function(e){var t=arguments.length;return t?(E=+e,x=+arguments[t-1],i):E},i.innerTickSize=function(e){return arguments.length?(E=+e,i):E},i.outerTickSize=function(e){return arguments.length?(x=+e,i):x},i.tickPadding=function(e){return arguments.length?(S=+e,i):S},i.tickSubdivide=function(){return arguments.length&&i},i};var Oa="bottom",Fa={top:1,right:1,bottom:1,left:1};function La(e,i,n){e.attr("transform",function(e){var t=i(e);return"translate("+(isFinite(t)?t:n(e))+",0)"})}function Ma(e,i,n){e.attr("transform",function(e){var t=i(e);return"translate(0,"+(isFinite(t)?t:n(e))+")"})}L.svg.brush=function(){var v,y,b=he(S,"brushstart","brush","brushend"),w=null,C=null,_=[0,0],A=[0,0],E=!0,x=!0,o=$a[0];function S(e){e.each(function(){var e,t=L.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),i=t.selectAll(".background").data([0]),n=(i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move"),t.selectAll(".resize").data(o,R)),n=(n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Na[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",S.empty()?"none":null),L.transition(t)),t=L.transition(i);w&&(e=xs(w),t.attr("x",e[0]).attr("width",e[1]-e[0]),k(n)),C&&(e=xs(C),t.attr("y",e[0]).attr("height",e[1]-e[0]),D(n)),T(n)})}function T(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+_[+/e$/.test(e)]+","+A[+/^s/.test(e)]+")"})}function k(e){e.select(".extent").attr("x",_[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",_[1]-_[0])}function D(e){e.select(".extent").attr("y",A[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",A[1]-A[0])}function r(){var l,e,i,n=this,t=L.select(L.event.target),o=b.of(n,arguments),r=L.select(n),s=t.datum(),a=!/^(n|s)$/.test(s)&&w,c=!/^(e|w)$/.test(s)&&C,u=t.classed("extent"),d=Ve(n),h=L.mouse(n),p=L.select(B(n)).on("keydown.brush",function(){32==L.event.keyCode&&(u||(l=null,h[0]-=_[1],h[1]-=A[1],u=2),ue())}).on("keyup.brush",function(){32==L.event.keyCode&&2==u&&(h[0]+=_[1],h[1]+=A[1],u=0,ue())});function f(){var e=L.mouse(n),t=!1;i&&(e[0]+=i[0],e[1]+=i[1]),u||(L.event.altKey?(l=l||[(_[0]+_[1])/2,(A[0]+A[1])/2],h[0]=_[+(e[0]<l[0])],h[1]=A[+(e[1]<l[1])]):l=null),a&&g(e,w,0)&&(k(r),t=!0),c&&g(e,C,1)&&(D(r),t=!0),t&&(T(r),o({type:"brush",mode:u?"move":"resize"}))}function g(e,t,i){var n,t=xs(t),o=t[0],t=t[1],r=h[i],s=i?A:_,a=s[1]-s[0];return u&&(o-=r,t-=a+r),e=(i?x:E)?Math.max(o,Math.min(t,e[i])):e[i],u?n=(e+=r)+a:(r=l?Math.max(o,Math.min(t,2*l[i]-e)):r)<e?(n=e,e=r):n=r,(s[0]!=e||s[1]!=n)&&(i?y=null:v=null,s[0]=e,s[1]=n,1)}function m(){f(),r.style("pointer-events","all").selectAll(".resize").style("display",S.empty()?"none":null),L.select("body").style("cursor",null),p.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),d(),o({type:"brushend"})}L.event.changedTouches?p.on("touchmove.brush",f).on("touchend.brush",m):p.on("mousemove.brush",f).on("mouseup.brush",m),r.interrupt().selectAll("*").interrupt(),u?(h[0]=_[0]-h[0],h[1]=A[0]-h[1]):s?(e=+/w$/.test(s),s=+/^n/.test(s),i=[_[1-e]-h[0],A[1-s]-h[1]],h[0]=_[e],h[1]=A[s]):L.event.altKey&&(l=h.slice()),r.style("pointer-events","none").selectAll(".resize").style("display",null),L.select("body").style("cursor",t.style("cursor")),o({type:"brushstart"}),f()}return S.event=function(e){e.each(function(){var n=b.of(this,arguments),o={x:_,y:A,i:v,j:y},e=this.__chart__||o;this.__chart__=o,Ea?L.select(this).transition().each("start.brush",function(){v=e.i,y=e.j,_=e.x,A=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var t=mr(_,o.x),i=mr(A,o.y);return v=y=null,function(e){_=o.x=t(e),A=o.y=i(e),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){v=o.i,y=o.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},S.x=function(e){return arguments.length?(o=$a[!(w=e)<<1|!C],S):w},S.y=function(e){return arguments.length?(o=$a[!w<<1|!(C=e)],S):C},S.clamp=function(e){return arguments.length?(w&&C?(E=!!e[0],x=!!e[1]):w?E=!!e:C&&(x=!!e),S):w&&C?[E,x]:w?E:C?x:null},S.extent=function(e){var t,i,n,o,r;return arguments.length?(w&&(t=e[0],i=e[1],C&&(t=t[0],i=i[0]),v=[t,i],w.invert&&(t=w(t),i=w(i)),i<t&&(r=t,t=i,i=r),t==_[0]&&i==_[1]||(_=[t,i])),C&&(n=e[0],o=e[1],w&&(n=n[1],o=o[1]),y=[n,o],C.invert&&(n=C(n),o=C(o)),o<n&&(r=n,n=o,o=r),n==A[0]&&o==A[1]||(A=[n,o])),S):(w&&(v?(t=v[0],i=v[1]):(t=_[0],i=_[1],w.invert&&(t=w.invert(t),i=w.invert(i)),i<t&&(r=t,t=i,i=r))),C&&(y?(n=y[0],o=y[1]):(n=A[0],o=A[1],C.invert&&(n=C.invert(n),o=C.invert(o)),o<n&&(r=n,n=o,o=r))),w&&C?[[t,n],[i,o]]:w?[t,i]:C&&[n,o])},S.clear=function(){return S.empty()||(_=[0,0],A=[0,0],v=y=null),S},S.empty=function(){return!!w&&_[0]==_[1]||!!C&&A[0]==A[1]},L.rebind(S,b,"on")};var Na={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$a=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],t=_.format=i.timeFormat,i=t.utc,Ia=i("%Y-%m-%dT%H:%M:%S.%LZ");function Pa(e){return e.toISOString()}function Ga(t,o,e){function r(e){return t(e)}function s(e,t){var i=(e[1]-e[0])/t,n=L.bisect(Wa,i);return n==Wa.length?[o.year,Fs(e.map(function(e){return e/31536e6}),t)[2]]:n?o[i/Wa[n-1]<Wa[n]/i?n-1:n]:[ja,Fs(e,t)[2]]}return r.invert=function(e){return Ba(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Ba)},r.nice=function(t,i){var e=r.domain(),n=Es(e),n=null==t?s(n,10):"number"==typeof t&&s(n,t);function o(e){return!isNaN(e)&&!t.range(e,Ba(+e+1),i).length}return n&&(t=n[0],i=n[1]),r.domain(Ts(e,1<i?{floor:function(e){for(;o(e=t.floor(e));)e=Ba(e-1);return e},ceil:function(e){for(;o(e=t.ceil(e));)e=Ba(+e+1);return e}}:t))},r.ticks=function(e,t){var i=Es(r.domain()),n=null==e?s(i,10):"number"==typeof e?s(i,e):!e.range&&[{range:e},t];return n&&(e=n[0],t=n[1]),e.range(i[0],Ba(+i[1]+1),t<1?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Ga(t.copy(),o,e)},Rs(r,t)}function Ba(e){return new Date(e)}t.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Pa:Ia,Pa.parse=function(e){e=new Date(e);return isNaN(e)?null:e},Pa.toString=Ia.toString,_.second=zt(function(e){return new A(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),_.seconds=_.second.range,_.seconds.utc=_.second.utc.range,_.minute=zt(function(e){return new A(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),_.minutes=_.minute.range,_.minutes.utc=_.minute.utc.range,_.hour=zt(function(e){var t=e.getTimezoneOffset()/60;return new A(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),_.hours=_.hour.range,_.hours.utc=_.hour.utc.range,_.month=zt(function(e){return(e=_.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),_.months=_.month.range,_.months.utc=_.month.utc.range;var Wa=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ha=[[_.second,1],[_.second,5],[_.second,15],[_.second,30],[_.minute,1],[_.minute,5],[_.minute,15],[_.minute,30],[_.hour,1],[_.hour,3],[_.hour,6],[_.hour,12],[_.day,1],[_.day,2],[_.week,1],[_.month,1],[_.month,3],[_.year,1]],Va=t.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",hn]]),ja={range:function(e,t,i){return L.range(Math.ceil(e/i)*i,+t,i).map(Ba)},floor:R,ceil:R},za=(Ha.year=_.year,_.scale=function(){return Ga(L.scale.linear(),Ha,Va)},Ha.map(function(e){return[e[0].utc,e[1]]})),Ua=i.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",hn]]);function Ya(e){return JSON.parse(e.responseText)}function qa(e){var t=M.createRange();return t.selectNode(M.body),t.createContextualFragment(e.responseText)}za.year=_.year.utc,_.scale.utc=function(){return Ga(L.scale.linear(),za,Ua)},L.text=Tt(function(e){return e.responseText}),L.json=function(e,t){return kt(e,"application/json",Ya,t)},L.html=function(e,t){return kt(e,"text/html",qa,t)},L.xml=Tt(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define(L):"object"==typeof module&&module.exports&&(module.exports=L),this.d3=L}(),!function(r){"use strict";var i,a,e,t,n,o={version:"0.4.10"};function s(e){this.owner=e}function l(e){var t=this.internal=new c(this);t.loadConfig(e),t.init(),function t(i,n,o){Object.keys(i).forEach(function(e){n[e]=i[e].bind(o),0<Object.keys(i[e]).length&&t(i[e],n[e],o)})}(i,this,this)}function c(e){this.d3=r.d3||("undefined"!=typeof require?require("d3"):void 0),this.api=e,this.config=this.getDefaultConfig(),this.data={},this.cache={},this.axes={}}function u(e){s.call(this,e)}o.generate=function(e){return new l(e)},o.chart={fn:l.prototype,internal:{fn:c.prototype,axis:{fn:u.prototype}}},i=o.chart.fn,a=o.chart.internal.fn,o.chart.internal.axis.fn,a.init=function(){var e=this,t=e.config;if(e.initParams(),t.data_url)e.convertUrlToData(t.data_url,t.data_mimeType,t.data_keys,e.initWithData);else if(t.data_json)e.initWithData(e.convertJsonToData(t.data_json,t.data_keys));else if(t.data_rows)e.initWithData(e.convertRowsToData(t.data_rows));else{if(!t.data_columns)throw Error("url or json or rows or columns is required.");e.initWithData(e.convertColumnsToData(t.data_columns))}},a.initParams=function(){var e=this,t=e.d3,i=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=i.data_xLocaltime?t.time.format:t.time.format.utc,e.axisTimeFormat=i.axis_x_localtime?t.time.format:t.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%-m/%-d",function(e){return e.getDay()&&1!==e.getDate()}],["%-m/%-d",function(e){return 1!==e.getDate()}],["%-m/%-d",function(e){return e.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=i.axis_rotated?"left":"bottom",e.yOrient=i.axis_rotated?i.axis_y_inner?"top":"bottom":i.axis_y_inner?"right":"left",e.y2Orient=i.axis_rotated?i.axis_y2_inner?"bottom":"top":i.axis_y2_inner?"left":"right",e.subXOrient=i.axis_rotated?"left":"bottom",e.isLegendRight="right"===i.legend_position,e.isLegendInset="inset"===i.legend_position,e.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,e.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=i.axis_rotated&&!i.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=t.selectAll([])},a.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},a.initWithData=function(e){var t=this,i=t.d3,n=t.config,o=!0;t.axis=new u(t),t.initPie&&t.initPie(),t.initBrush&&t.initBrush(),t.initZoom&&t.initZoom(),n.bindto?"function"==typeof n.bindto.node?t.selectChart=n.bindto:t.selectChart=i.select(n.bindto):t.selectChart=i.selectAll([]),t.selectChart.empty()&&(t.selectChart=i.select(document.createElement("div")).style("opacity",0),t.observeInserted(t.selectChart),o=!1),t.selectChart.html("").classed("c3",!0),t.data.xs={},t.data.targets=t.convertDataToTargets(e),n.data_filter&&(t.data.targets=t.data.targets.filter(n.data_filter)),n.data_hide&&t.addHiddenTargetIds(!0===n.data_hide?t.mapToIds(t.data.targets):n.data_hide),n.legend_hide&&t.addHiddenLegendIds(!0===n.legend_hide?t.mapToIds(t.data.targets):n.legend_hide),t.hasType("gauge")&&(n.legend_show=!1),t.updateSizes(),t.updateScales(),t.x.domain(i.extent(t.getXDomain(t.data.targets))),t.y.domain(t.getYDomain(t.data.targets,"y")),t.y2.domain(t.getYDomain(t.data.targets,"y2")),t.subX.domain(t.x.domain()),t.subY.domain(t.y.domain()),t.subY2.domain(t.y2.domain()),t.orgXDomain=t.x.domain(),t.brush&&t.brush.scale(t.subX),n.zoom_enabled&&t.zoom.scale(t.x),t.svg=t.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return n.onmouseover.call(t)}).on("mouseleave",function(){return n.onmouseout.call(t)}),e=t.svg.append("defs"),t.clipChart=t.appendClip(e,t.clipId),t.clipXAxis=t.appendClip(e,t.clipIdForXAxis),t.clipYAxis=t.appendClip(e,t.clipIdForYAxis),t.clipGrid=t.appendClip(e,t.clipIdForGrid),t.clipSubchart=t.appendClip(e,t.clipIdForSubchart),t.updateSvgSize(),i=t.main=t.svg.append("g").attr("transform",t.getTranslate("main")),t.initSubchart&&t.initSubchart(),t.initTooltip&&t.initTooltip(),t.initLegend&&t.initLegend(),i.append("text").attr("class",I.text+" "+I.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),t.initRegion(),t.initGrid(),i.append("g").attr("clip-path",t.clipPath).attr("class",I.chart),n.grid_lines_front&&t.initGridLines(),t.initEventRect(),t.initChartElements(),i.insert("rect",n.zoom_privileged?null:"g."+I.regions).attr("class",I.zoomRect).attr("width",t.width).attr("height",t.height).style("opacity",0).on("dblclick.zoom",null),n.axis_x_extent&&t.brush.extent(t.getDefaultExtent()),t.axis.init(),t.updateTargets(t.data.targets),o&&(t.updateDimension(),t.config.oninit.call(t),t.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),null==r.onresize&&(r.onresize=t.generateResize()),r.onresize.add&&(r.onresize.add(function(){n.onresize.call(t)}),r.onresize.add(function(){t.api.flush()}),r.onresize.add(function(){n.onresized.call(t)})),t.api.element=t.selectChart.node()},a.smoothLines=function(e,t){var r=this;"grid"===t&&e.each(function(){var e=r.d3.select(this),t=e.attr("x1"),i=e.attr("x2"),n=e.attr("y1"),o=e.attr("y2");e.attr({x1:Math.ceil(t),x2:Math.ceil(i),y1:Math.ceil(n),y2:Math.ceil(o)})})},a.updateSizes=function(){var e=this,t=e.config,i=e.legend?e.getLegendHeight():0,n=e.legend?e.getLegendWidth():0,o=e.isLegendRight||e.isLegendInset?0:i,r=e.hasArcType(),s=t.axis_rotated||r?0:e.getHorizontalAxisHeight("x"),a=t.subchart_show&&!r?t.subchart_size_height+s:0;e.currentWidth=e.getCurrentWidth(),e.currentHeight=e.getCurrentHeight(),e.margin=t.axis_rotated?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:r?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+o+e.getCurrentPaddingBottom(),left:a+(r?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:r?0:e.getCurrentPaddingRight(),bottom:s+a+o+e.getCurrentPaddingBottom(),left:r?0:e.getCurrentPaddingLeft()},e.margin2=t.axis_rotated?{top:e.margin.top,right:NaN,bottom:20+o,left:e.rotated_padding_left}:{top:e.currentHeight-a-o,right:NaN,bottom:s+o,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(i,n),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=t.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=t.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?n+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&r&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)},a.updateTargets=function(e){this.updateTargetsForText(e),this.updateTargetsForBar(e),this.updateTargetsForLine(e),this.hasArcType()&&this.updateTargetsForArc&&this.updateTargetsForArc(e),this.updateTargetsForSubchart&&this.updateTargetsForSubchart(e),this.showTargets()},a.showTargets=function(){var t=this;t.svg.selectAll("."+I.target).filter(function(e){return t.isTargetToShow(e.id)}).transition().duration(t.config.transition_duration).style("opacity",1)},a.redraw=function(e,t){var i,n,o,r,s,a,l,c,u,d,h,p=this,f=p.main,g=p.d3,m=p.config,v=p.getShapeIndices(p.isAreaType),y=p.getShapeIndices(p.isBarType),b=p.getShapeIndices(p.isLineType),w=p.hasArcType(),C=p.filterTargetsToShow(p.data.targets),_=p.xv.bind(p),A=P(e=e||{},"withY",!0),E=P(e,"withSubchart",!0),x=P(e,"withTransition",!0),S=P(e,"withTransform",!1),T=P(e,"withUpdateXDomain",!1),k=P(e,"withUpdateOrgXDomain",!1),D=P(e,"withTrimXDomain",!0),R=P(e,"withUpdateXAxis",T),O=P(e,"withLegend",!1),F=P(e,"withEventRect",!0),L=P(e,"withDimension",!0),M=P(e,"withTransitionForExit",x),$=P(e,"withTransitionForAxis",x),N=x?m.transition_duration:0,M=M?N:0;t=t||p.axis.generateTransitions($?N:0),O&&m.legend_show?p.updateLegend(p.mapToIds(p.data.targets),e,t):L&&p.updateDimension(!0),p.isCategorized()&&0===C.length&&p.x.domain([0,p.axes.x.selectAll(".tick").size()]),C.length?(p.updateXDomain(C,T,k,D),m.axis_x_tick_values||(c=p.axis.updateXAxisTickValues(C))):(p.xAxis.tickValues([]),p.subXAxis.tickValues([])),m.zoom_rescale&&!e.flow&&(u=p.x.orgDomain()),p.y.domain(p.getYDomain(C,"y",u)),p.y2.domain(p.getYDomain(C,"y2",u)),!m.axis_y_tick_values&&m.axis_y_tick_count&&p.yAxis.tickValues(p.axis.generateTickValues(p.y.domain(),m.axis_y_tick_count)),!m.axis_y2_tick_values&&m.axis_y2_tick_count&&p.y2Axis.tickValues(p.axis.generateTickValues(p.y2.domain(),m.axis_y2_tick_count)),p.axis.redraw(t,w),p.axis.updateLabels(x),(T||R)&&C.length&&(m.axis_x_tick_culling&&c?p.svg.selectAll("."+I.axisX).each(function(){var e=g.select(this),n=e.select("path.domain").node().getTotalLength()-(m.axis_x_tick_outer?12:0),t=[];if(e.selectAll(".tick text").each(function(e){e=c.indexOf(e);0<=e&&t.push({e:this,index:e})}),t.sort(function(e,t){return e.index-t.index}),m.axis_x_tick_rotate||t.forEach(function(e){var t=e.e.getBoundingClientRect().width/2,i=g.transform(g.select(e.e.parentNode).attr("transform"));g.select(e.e).style("text-anchor",function(){return i.translate[0]<t?"start":i.translate[0]+t>n?"end":"middle"})}),t.length>m.axis_x_tick_culling_max)if(1<m.axis_x_tick_culling_max){for(var i=m.axis_x_tick_culling_max,o=Math.floor(t.length/i);t.length/o>=i+1;)i--,o=Math.floor(t.length/i);var r=Math.floor((t.length-o*(i-1)-1)/2);t.forEach(function(e,t){g.select(e.e).style("display",(t+o-r)%o?"none":"block")})}else{var s=Math.round(t.length/2);t.forEach(function(e,t){g.select(e.e).style("display",t==s?"block":"none")})}else t.forEach(function(e){g.select(e.e).style("display","block")})}):p.svg.selectAll("."+I.axisX+" .tick text").style("display","block")),i=p.generateDrawArea?p.generateDrawArea(v,!1):void 0,n=p.generateDrawBar?p.generateDrawBar(y):void 0,o=p.generateDrawLine?p.generateDrawLine(b,!1):void 0,r=p.generateXYForText(v,y,b,!0),s=p.generateXYForText(v,y,b,!1),A&&(p.subY.domain(p.getYDomain(C,"y")),p.subY2.domain(p.getYDomain(C,"y2"))),p.tooltip.style("display","none"),p.updateXgridFocus(),f.select("text."+I.text+"."+I.empty).attr("x",p.width/2).attr("y",p.height/2).text(m.data_empty_label_text).transition().style("opacity",C.length?0:1),p.updateGrid(N),p.updateRegion(N),p.updateBar(M),p.updateLine(M),p.updateArea(M),p.updateCircle(),p.hasDataLabel()&&p.updateText(M),p.redrawArc&&p.redrawArc(N,M,S),p.redrawSubchart&&p.redrawSubchart(E,t,N,M,v,y,b),f.selectAll("."+I.selectedCircles).filter(p.isBarType.bind(p)).selectAll("circle").remove(),m.interaction_enabled&&!e.flow&&F&&(p.redrawEventRect(),p.updateZoom&&p.updateZoom()),p.updateCircleY(),d=(p.config.axis_rotated?p.circleY:p.circleX).bind(p),h=(p.config.axis_rotated?p.circleX:p.circleY).bind(p),e.flow&&(l=p.generateFlow({targets:C,flow:e.flow,duration:e.flow.duration,drawBar:n,drawLine:o,drawArea:i,cx:d,cy:h,xv:_,xForText:r,yForText:s})),(N||l)&&p.isTabVisible()?g.transition().duration(N).each(function(){var t=[];[p.redrawBar(n,!0),p.redrawLine(o,!0),p.redrawArea(i,!0),p.redrawCircle(d,h,!0),p.redrawText(r,s,e.flow,!0),p.redrawRegion(!0),p.redrawGrid(!0)].forEach(function(e){e.forEach(function(e){t.push(e)})}),a=p.generateWait(),t.forEach(function(e){a.add(e)})}).call(a,function(){l&&l(),m.onrendered&&m.onrendered.call(p)}):(p.redrawBar(n),p.redrawLine(o),p.redrawArea(i),p.redrawCircle(d,h),p.redrawText(r,s,e.flow),p.redrawRegion(),p.redrawGrid(),m.onrendered&&m.onrendered.call(p)),p.mapToIds(p.data.targets).forEach(function(e){p.withoutFadeIn[e]=!0})},a.updateAndRedraw=function(e){var t,i=this.config;(e=e||{}).withTransition=P(e,"withTransition",!0),e.withTransform=P(e,"withTransform",!1),e.withLegend=P(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=P(e,"withTransitionForTransform",e.withTransition),this.updateSizes(),e.withLegend&&i.legend_show||(t=this.axis.generateTransitions(e.withTransitionForAxis?i.transition_duration:0),this.updateScales(),this.updateSvgSize(),this.transformAll(e.withTransitionForTransform,t)),this.redraw(e,t)},a.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},a.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},a.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},a.isCustomX=function(){var e=this.config;return!this.isTimeSeries()&&(e.data_x||y(e.data_xs))},a.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},a.getTranslate=function(e){var t,i,n=this,o=n.config;return"main"===e?(t=f(n.margin.left),i=f(n.margin.top)):"context"===e?(t=f(n.margin2.left),i=f(n.margin2.top)):"legend"===e?(t=n.margin3.left,i=n.margin3.top):"x"===e?(t=0,i=o.axis_rotated?0:n.height):"y"===e?(t=0,i=o.axis_rotated?n.height:0):"y2"===e?(t=o.axis_rotated?0:n.width,i=o.axis_rotated?1:0):"subx"===e?(t=0,i=o.axis_rotated?0:n.height2):"arc"===e&&(t=n.arcWidth/2,i=n.arcHeight/2),"translate("+t+","+i+")"},a.initialOpacity=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?1:0},a.initialOpacityForCircle=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},a.opacityForCircle=function(e){var t=this.config.point_show?1:0;return v(e.value)?this.isScatterType(e)?.5:t:0},a.opacityForText=function(){return this.hasDataLabel()?1:0},a.xx=function(e){return e?this.x(e.x):null},a.xv=function(e){var t=e.value;return this.isTimeSeries()?t=this.parseDate(e.value):this.isCategorized()&&"string"==typeof e.value&&(t=this.config.axis_x_categories.indexOf(e.value)),Math.ceil(this.x(t))},a.yv=function(e){var t=e.axis&&"y2"===e.axis?this.y2:this.y;return Math.ceil(t(e.value))},a.subxx=function(e){return e?this.subX(e.x):null},a.transformMain=function(e,t){var i,n,o,r=this;t&&t.axisX?i=t.axisX:(i=r.main.select("."+I.axisX),e&&(i=i.transition())),t&&t.axisY?n=t.axisY:(n=r.main.select("."+I.axisY),e&&(n=n.transition())),t&&t.axisY2?o=t.axisY2:(o=r.main.select("."+I.axisY2),e&&(o=o.transition())),(e?r.main.transition():r.main).attr("transform",r.getTranslate("main")),i.attr("transform",r.getTranslate("x")),n.attr("transform",r.getTranslate("y")),o.attr("transform",r.getTranslate("y2")),r.main.select("."+I.chartArcs).attr("transform",r.getTranslate("arc"))},a.transformAll=function(e,t){this.transformMain(e,t),this.config.subchart_show&&this.transformContext(e,t),this.legend&&this.transformLegend(e)},a.updateSvgSize=function(){var e=this,t=e.svg.select(".c3-brush .background");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight),e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height),e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",t.size()?t.attr("height"):0),e.svg.select("."+I.zoomRect).attr("width",e.width).attr("height",e.height),e.selectChart.style("max-height",e.currentHeight+"px")},a.updateDimension=function(e){var t=this;e||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis))),t.updateSizes(),t.updateScales(),t.updateSvgSize(),t.transformAll(!1)},a.observeInserted=function(t){var i,n=this;"undefined"==typeof MutationObserver?r.console.error("MutationObserver not defined."):(i=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(i.disconnect(),n.intervalForObserveInserted=r.setInterval(function(){t.node().parentNode&&(r.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))},10))})})).observe(t.node(),{attributes:!0,childList:!0,characterData:!0})},a.generateResize=function(){var t=[];function e(){t.forEach(function(e){e()})}return e.add=function(e){t.push(e)},e},a.endall=function(e,t){var i=0;e.each(function(){++i}).each("end",function(){--i||t.apply(this,arguments)})},a.generateWait=function(){function e(e,i){var n=setInterval(function(){var t=0;o.forEach(function(e){if(e.empty())t+=1;else try{e.transition()}catch(e){t+=1}}),t===o.length&&(clearInterval(n),i&&i())},10)}var o=[];return e.add=function(e){o.push(e)},e},a.parseDate=function(e){var t;return e instanceof Date?t=e:"string"==typeof e?t=this.dataTimeFormat(this.config.data_xFormat).parse(e):"number"!=typeof e&&isNaN(e)||(t=new Date(+e)),t&&!isNaN(+t)||r.console.error("Failed to parse x '"+e+"' to Date object"),t},a.isTabVisible=function(){var e;return void 0!==document.hidden?e="hidden":void 0!==document.mozHidden?e="mozHidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden"),!document[e]},a.getDefaultConfig=function(){var t={bindto:"#chart",size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:void 0,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(e,t,i,n){return this.getTooltipContent?this.getTooltipContent(e,t,i,n):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(e){t[e]=this.additionalConfig[e]},this),t},a.additionalConfig={},a.loadConfig=function(t){var i,n,o,r=this.config;Object.keys(r).forEach(function(e){i=t,n=e.split("_"),o=function e(){var t=n.shift();return t&&i&&"object"==typeof i&&t in i?(i=i[t],e()):t?void 0:i}(),k(o)&&(r[e]=o)})},a.getScale=function(e,t,i){return(i?this.d3.time.scale():this.d3.scale.linear()).range([e,t])},a.getX=function(e,t,i,n){var o,r=this.getScale(e,t,this.isTimeSeries()),s=i?r.domain(i):r,r=this.isCategorized()?(n=n||function(){return 0},function(e,t){e=s(e)+n(e);return t?e:Math.ceil(e)}):function(e,t){e=s(e);return t?e:Math.ceil(e)};for(o in s)r[o]=s[o];return r.orgDomain=function(){return s.domain()},this.isCategorized()&&(r.domain=function(e){return arguments.length?(s.domain(e),r):[(e=this.orgDomain())[0],e[1]+1]}),r},a.getY=function(e,t,i){e=this.getScale(e,t,this.isTimeSeriesY());return i&&e.domain(i),e},a.getYScale=function(e){return"y2"===this.axis.getId(e)?this.y2:this.y},a.getSubYScale=function(e){return"y2"===this.axis.getId(e)?this.subY2:this.subY},a.updateScales=function(){var t=this,e=t.config,i=!t.x;t.xMin=e.axis_rotated?1:0,t.xMax=e.axis_rotated?t.height:t.width,t.yMin=e.axis_rotated?0:t.height,t.yMax=e.axis_rotated?t.width:1,t.subXMin=t.xMin,t.subXMax=t.xMax,t.subYMin=e.axis_rotated?0:t.height2,t.subYMax=e.axis_rotated?t.width2:1,t.x=t.getX(t.xMin,t.xMax,i?void 0:t.x.orgDomain(),function(){return t.xAxis.tickOffset()}),t.y=t.getY(t.yMin,t.yMax,i?e.axis_y_default:t.y.domain()),t.y2=t.getY(t.yMin,t.yMax,i?e.axis_y2_default:t.y2.domain()),t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,function(e){return e%1?0:t.subXAxis.tickOffset()}),t.subY=t.getY(t.subYMin,t.subYMax,i?e.axis_y_default:t.subY.domain()),t.subY2=t.getY(t.subYMin,t.subYMax,i?e.axis_y2_default:t.subY2.domain()),t.xAxisTickFormat=t.axis.getXAxisTickFormat(),t.xAxisTickValues=t.axis.getXAxisTickValues(),t.yAxisTickValues=t.axis.getYAxisTickValues(),t.y2AxisTickValues=t.axis.getY2AxisTickValues(),t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer),t.yAxis=t.axis.getYAxis(t.y,t.yOrient,e.axis_y_tick_format,t.yAxisTickValues,e.axis_y_tick_outer),t.y2Axis=t.axis.getYAxis(t.y2,t.y2Orient,e.axis_y2_tick_format,t.y2AxisTickValues,e.axis_y2_tick_outer),i||(t.brush&&t.brush.scale(t.subX),e.zoom_enabled&&t.zoom.scale(t.x)),t.updateArc&&t.updateArc()},a.getYDomainMin=function(e){var t,i,n,o,r,s,a=this,l=a.config,c=a.mapToIds(e),u=a.getValuesAsIdKeyed(e);if(0<l.data_groups.length)for(s=a.hasNegativeValueInTargets(e),t=0;t<l.data_groups.length;t++)if(0!==(o=l.data_groups[t].filter(function(e){return 0<=c.indexOf(e)})).length)for(n=o[0],s&&u[n]&&u[n].forEach(function(e,t){u[n][t]=e<0?e:0}),i=1;i<o.length;i++)r=o[i],u[r]&&u[r].forEach(function(e,t){a.axis.getId(r)!==a.axis.getId(n)||!u[n]||s&&0<+e||(u[n][t]+=+e)});return a.d3.min(Object.keys(u).map(function(e){return a.d3.min(u[e])}))},a.getYDomainMax=function(e){var t,i,n,o,r,s,a=this,l=a.config,c=a.mapToIds(e),u=a.getValuesAsIdKeyed(e);if(0<l.data_groups.length)for(s=a.hasPositiveValueInTargets(e),t=0;t<l.data_groups.length;t++)if(0!==(o=l.data_groups[t].filter(function(e){return 0<=c.indexOf(e)})).length)for(n=o[0],s&&u[n]&&u[n].forEach(function(e,t){u[n][t]=0<e?e:0}),i=1;i<o.length;i++)r=o[i],u[r]&&u[r].forEach(function(e,t){a.axis.getId(r)!==a.axis.getId(n)||!u[n]||s&&+e<0||(u[n][t]+=+e)});return a.d3.max(Object.keys(u).map(function(e){return a.d3.max(u[e])}))},a.getYDomain=function(e,t,i){var n,o,r,s,a=this,l=a.config,e=e.filter(function(e){return a.axis.getId(e.id)===t}),i=i?a.filterByXDomain(e,i):e,e="y2"===t?l.axis_y2_min:l.axis_y_min,c="y2"===t?l.axis_y2_max:l.axis_y_max,u=a.getYDomainMin(i),d=a.getYDomainMax(i),h="y2"===t?l.axis_y2_center:l.axis_y_center,p=a.hasType("bar",i)&&l.bar_zerobased||a.hasType("area",i)&&l.area_zerobased,f="y2"===t?l.axis_y2_inverted:l.axis_y_inverted,g=a.hasDataLabel()&&l.axis_rotated,m=a.hasDataLabel()&&!l.axis_rotated,u=v(e)?e:!v(c)||u<c?u:c-10,d=v(c)?c:!v(e)||e<d?d:e+10;return 0===i.length?("y2"===t?a.y2:a.y).domain():((u=isNaN(u)?0:u)===(d=isNaN(d)?u:d)&&(u<0?d=0:u=0),i=0<=u&&0<=d,s=u<=0&&d<=0,(p=v(e)&&i||v(c)&&s?!1:p)&&(i&&(u=0),s&&(d=0)),n=c=.1*(e=Math.abs(d-u)),void 0!==h&&(d=h+(r=Math.max(Math.abs(u),Math.abs(d))),u=h-r),g?(o=a.getDataLabelLength(u,d,"width"),h=O(a.y.range()),n+=e*((r=[o[0]/h,o[1]/h])[1]/(1-r[0]-r[1])),c+=e*(r[0]/(1-r[0]-r[1]))):m&&(o=a.getDataLabelLength(u,d,"height"),n+=a.axis.convertPixelsToAxisPadding(o[1],e),c+=a.axis.convertPixelsToAxisPadding(o[0],e)),"y"===t&&y(l.axis_y_padding)&&(n=a.axis.getPadding(l.axis_y_padding,"top",n,e),c=a.axis.getPadding(l.axis_y_padding,"bottom",c,e)),"y2"===t&&y(l.axis_y2_padding)&&(n=a.axis.getPadding(l.axis_y2_padding,"top",n,e),c=a.axis.getPadding(l.axis_y2_padding,"bottom",c,e)),p&&(i&&(c=u),s&&(n=-d)),g=a.config.axis_rotated?[u,d]:[u-c,d+n],f?g.reverse():g)},a.getXDomainMin=function(e){var t=this,i=t.config;return k(i.axis_x_min)?t.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:t.d3.min(e,function(e){return t.d3.min(e.values,function(e){return e.x})})},a.getXDomainMax=function(e){var t=this,i=t.config;return k(i.axis_x_max)?t.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:t.d3.max(e,function(e){return t.d3.max(e.values,function(e){return e.x})})},a.getXDomainPadding=function(e){var t,i,n=this.config,e=e[1]-e[0],o=this.isCategorized()?0:this.hasType("bar")?1<(o=this.getMaxDataCount())?e/(o-1)/2:.5:.01*e;return"object"==typeof n.axis_x_padding&&y(n.axis_x_padding)?(t=v(n.axis_x_padding.left)?n.axis_x_padding.left:o,i=v(n.axis_x_padding.right)?n.axis_x_padding.right:o):t=i="number"==typeof n.axis_x_padding?n.axis_x_padding:o,{left:t,right:i}},a.getXDomain=function(e){var e=[this.getXDomainMin(e),this.getXDomainMax(e)],t=e[0],i=e[1],e=this.getXDomainPadding(e),n=0,o=0;return t-i!=0||this.isCategorized()||(i=this.isTimeSeries()?(t=new Date(.5*t.getTime()),new Date(1.5*i.getTime())):(t=0===t?1:.5*t,0===i?-1:1.5*i)),[n=!t&&0!==t?n:this.isTimeSeries()?new Date(t.getTime()-e.left):t-e.left,o=!i&&0!==i?o:this.isTimeSeries()?new Date(i.getTime()+e.right):i+e.right]},a.updateXDomain=function(e,t,i,n,o){var r=this,s=r.config;return i&&(r.x.domain(o||r.d3.extent(r.getXDomain(e))),r.orgXDomain=r.x.domain(),s.zoom_enabled&&r.zoom.scale(r.x).updateScaleExtent(),r.subX.domain(r.x.domain()),r.brush&&r.brush.scale(r.subX)),t&&(r.x.domain(o||(!r.brush||r.brush.empty()?r.orgXDomain:r.brush.extent())),s.zoom_enabled&&r.zoom.scale(r.x).updateScaleExtent()),n&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},a.trimXDomain=function(e){return e[0]<=this.orgXDomain[0]&&(e[1]=+e[1]+(this.orgXDomain[0]-e[0]),e[0]=this.orgXDomain[0]),this.orgXDomain[1]<=e[1]&&(e[0]=+e[0]-(e[1]-this.orgXDomain[1]),e[1]=this.orgXDomain[1]),e},a.isX=function(e){var t=this.config;return t.data_x&&e===t.data_x||y(t.data_xs)&&m(t.data_xs,e)},a.isNotX=function(e){return!this.isX(e)},a.getXKey=function(e){var t=this.config;return t.data_x||(y(t.data_xs)?t.data_xs[e]:null)},a.getXValuesOfXKey=function(t,e){var i,n=this;return(e&&y(e)?n.mapToIds(e):[]).forEach(function(e){n.getXKey(e)===t&&(i=n.data.xs[e])}),i},a.getIndexByX=function(e){e=this.filterByX(this.data.targets,e);return e.length?e[0].index:null},a.getXValue=function(e,t){return e in this.data.xs&&this.data.xs[e]&&v(this.data.xs[e][t])?this.data.xs[e][t]:t},a.getOtherTargetXs=function(){var e=Object.keys(this.data.xs);return e.length?this.data.xs[e[0]]:null},a.getOtherTargetX=function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},a.addXs=function(t){var i=this;Object.keys(t).forEach(function(e){i.config.data_xs[e]=t[e]})},a.hasMultipleX=function(t){return 1<this.d3.set(Object.keys(t).map(function(e){return t[e]})).size()},a.isMultipleX=function(){return y(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},a.addName=function(e){var t;return e&&(t=this.config.data_names[e.id],e.name=t||e.id),e},a.getValueOnIndex=function(e,t){e=e.filter(function(e){return e.index===t});return e.length?e[0]:null},a.updateTargetX=function(e,n){var o=this;e.forEach(function(i){i.values.forEach(function(e,t){e.x=o.generateTargetX(n[t],i.id,t)}),o.data.xs[i.id]=n})},a.updateTargetXs=function(e,t){var i=this;e.forEach(function(e){t[e.id]&&i.updateTargetX([e],t[e.id])})},a.generateTargetX=function(e,t,i){e=this.isTimeSeries()?e?this.parseDate(e):this.parseDate(this.getXValue(t,i)):this.isCustomX()&&!this.isCategorized()?v(e)?+e:this.getXValue(t,i):i;return e},a.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},a.updateXs=function(){var t=this;t.data.targets.length&&(t.xs=[],t.data.targets[0].values.forEach(function(e){t.xs[e.index]=e.x}))},a.getPrevX=function(e){e=this.xs[e-1];return void 0!==e?e:null},a.getNextX=function(e){e=this.xs[e+1];return void 0!==e?e:null},a.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(e){return e.values.length})},a.getMaxDataCountTarget=function(e){var t,i=e.length,n=0;return 1<i?e.forEach(function(e){e.values.length>n&&(n=(t=e).values.length)}):t=i?e[0]:null,t},a.getEdgeX=function(e){return e.length?[this.d3.min(e,function(e){return e.values[0].x}),this.d3.max(e,function(e){return e.values[e.values.length-1].x})]:[0,0]},a.mapToIds=function(e){return e.map(function(e){return e.id})},a.mapToTargetIds=function(e){return e?h(e)?[e]:e:this.mapToIds(this.data.targets)},a.hasTarget=function(e,t){for(var i=this.mapToIds(e),n=0;n<i.length;n++)if(i[n]===t)return!0;return!1},a.isTargetToShow=function(e){return this.hiddenTargetIds.indexOf(e)<0},a.isLegendToShow=function(e){return this.hiddenLegendIds.indexOf(e)<0},a.filterTargetsToShow=function(e){var t=this;return e.filter(function(e){return t.isTargetToShow(e.id)})},a.mapTargetsToUniqueXs=function(e){e=this.d3.set(this.d3.merge(e.map(function(e){return e.values.map(function(e){return+e.x})}))).values();return this.isTimeSeries()?e.map(function(e){return new Date(+e)}):e.map(function(e){return+e})},a.addHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.concat(e)},a.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},a.addHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.concat(e)},a.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},a.getValuesAsIdKeyed=function(e){var i={};return e.forEach(function(t){i[t.id]=[],t.values.forEach(function(e){i[t.id].push(e.value)})}),i},a.checkValueInTargets=function(e,t){for(var i,n,o=Object.keys(e),r=0;r<o.length;r++)for(n=e[o[r]].values,i=0;i<n.length;i++)if(t(n[i].value))return!0;return!1},a.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return e<0})},a.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return 0<e})},a.isOrderDesc=function(){var e=this.config;return"string"==typeof e.data_order&&"desc"===e.data_order.toLowerCase()},a.isOrderAsc=function(){var e=this.config;return"string"==typeof e.data_order&&"asc"===e.data_order.toLowerCase()},a.orderTargets=function(e){var t=this.config,n=this.isOrderAsc(),i=this.isOrderDesc();return n||i?e.sort(function(e,t){function i(e,t){return e+Math.abs(t.value)}e=e.values.reduce(i,0),t=t.values.reduce(i,0);return n?t-e:e-t}):d(t.data_order)&&e.sort(t.data_order),e},a.filterByX=function(e,t){return this.d3.merge(e.map(function(e){return e.values})).filter(function(e){return e.x-t==0})},a.filterRemoveNull=function(e){return e.filter(function(e){return v(e.value)})},a.filterByXDomain=function(e,t){return e.map(function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter(function(e){return t[0]<=e.x&&e.x<=t[1]})}})},a.hasDataLabel=function(){var e=this.config;return!("boolean"!=typeof e.data_labels||!e.data_labels)||!("object"!=typeof e.data_labels||!y(e.data_labels))},a.getDataLabelLength=function(e,t,i){var n=this,o=[0,0];return n.selectChart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(e){return n.dataLabelFormat(e.id)(e)}).each(function(e,t){o[t]=1.3*this.getBoundingClientRect()[i]}).remove(),o},a.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},a.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},a.findSameXOfValues=function(e,t){for(var i=e[t].x,n=[],o=t-1;0<=o&&i===e[o].x;o--)n.push(e[o]);for(o=t;o<e.length&&i===e[o].x;o++)n.push(e[o]);return n},a.findClosestFromTargets=function(e,t){var i=this,e=e.map(function(e){return i.findClosest(e.values,t)});return i.findClosest(e,t)},a.findClosest=function(e,i){var n,o=this,r=100;return e.filter(function(e){return e&&o.isBarType(e.id)}).forEach(function(e){var t=o.main.select("."+I.bars+o.getTargetSelectorSuffix(e.id)+" ."+I.bar+"-"+e.index).node();!n&&o.isWithinBar(t)&&(n=e)}),e.filter(function(e){return e&&!o.isBarType(e.id)}).forEach(function(e){var t=o.dist(e,i);t<r&&(r=t,n=e)}),n},a.dist=function(e,t){var i=this.config,n=i.axis_rotated?1:0,i=i.axis_rotated?0:1,o=this.circleY(e,e.index),e=this.x(e.x);return Math.pow(e-t[n],2)+Math.pow(o-t[i],2)},a.convertValuesToStep=function(e){var t,i=[].concat(e);if(!this.isCategorized())return e;for(t=e.length+1;0<t;t--)i[t]=i[t-1];return i[0]={x:i[0].x-1,value:i[0].value,id:i[0].id},i[e.length+1]={x:i[e.length].x+1,value:i[e.length].value,id:i[e.length].id},i},a.updateDataAttributes=function(e,t){var i=this.config["data_"+e];return void 0===t||(Object.keys(t).forEach(function(e){i[e]=t[e]}),this.redraw({withLegend:!0})),i},a.convertUrlToData=function(e,t,i,n){var o=this,r=t||"csv";o.d3.xhr(e,function(e,t){if(!t)throw new Error(e.responseURL+" "+e.status+" ("+e.statusText+")");e="json"===r?o.convertJsonToData(JSON.parse(t.response),i):"tsv"===r?o.convertTsvToData(t.response):o.convertCsvToData(t.response),n.call(o,e)})},a.convertXsvToData=function(e,t){var i,n=t.parseRows(e);return 1===n.length?(i=[{}],n[0].forEach(function(e){i[0][e]=null})):i=t.parse(e),i},a.convertCsvToData=function(e){return this.convertXsvToData(e,this.d3.csv)},a.convertTsvToData=function(e){return this.convertXsvToData(e,this.d3.tsv)},a.convertJsonToData=function(t,e){var n,o=[],e=e?(e.x?(n=e.value.concat(e.x),this.config.data_x=e.x):n=e.value,o.push(n),t.forEach(function(t){var i=[];n.forEach(function(e){e=C(t[e])?null:t[e];i.push(e)}),o.push(i)}),this.convertRowsToData(o)):(Object.keys(t).forEach(function(e){o.push([e].concat(t[e]))}),this.convertColumnsToData(o));return e},a.convertRowsToData=function(e){for(var t,i=e[0],n={},o=[],r=1;r<e.length;r++){for(n={},t=0;t<e[r].length;t++){if(C(e[r][t]))throw new Error("Source data is missing a component at ("+r+","+t+")!");n[i[t]]=e[r][t]}o.push(n)}return o},a.convertColumnsToData=function(e){for(var t,i,n=[],o=0;o<e.length;o++)for(i=e[o][0],t=1;t<e[o].length;t++){if(C(n[t-1])&&(n[t-1]={}),C(e[o][t]))throw new Error("Source data is missing a component at ("+o+","+t+")!");n[t-1][i]=e[o][t]}return n},a.convertDataToTargets=function(e,n){var a=this,l=a.config,t=a.d3.keys(e[0]).filter(a.isNotX,a),o=a.d3.keys(e[0]).filter(a.isX,a);return t.forEach(function(i){var t=a.getXKey(i);a.isCustomX()||a.isTimeSeries()?0<=o.indexOf(t)?a.data.xs[i]=(n&&a.data.xs[i]?a.data.xs[i]:[]).concat(e.map(function(e){return e[t]}).filter(v).map(function(e,t){return a.generateTargetX(e,i,t)})):l.data_x?a.data.xs[i]=a.getOtherTargetXs():y(l.data_xs)&&(a.data.xs[i]=a.getXValuesOfXKey(t,a.data.targets)):a.data.xs[i]=e.map(function(e,t){return t})}),t.forEach(function(e){if(!a.data.xs[e])throw new Error('x is not defined for id = "'+e+'".')}),(t=t.map(function(o,r){var s=l.data_idConverter(o);return{id:s,id_org:o,values:e.map(function(e,t){var i=e[a.getXKey(o)],n=a.generateTargetX(i,o,t);return a.isCustomX()&&a.isCategorized()&&0===r&&i&&(0===t&&(l.axis_x_categories=[]),l.axis_x_categories.push(i)),{x:n=C(e[o])||a.data.xs[o].length<=t?void 0:n,value:null===e[o]||isNaN(e[o])?null:+e[o],id:s}}).filter(function(e){return k(e.x)})}})).forEach(function(e){var t;l.data_xSort&&(e.values=e.values.sort(function(e,t){return(e.x||0===e.x?e.x:1/0)-(t.x||0===t.x?t.x:1/0)})),t=0,e.values.forEach(function(e){e.index=t++}),a.data.xs[e.id].sort(function(e,t){return e-t})}),l.data_type&&a.setTargetType(a.mapToIds(t).filter(function(e){return!(e in l.data_types)}),l.data_type),t.forEach(function(e){a.addCache(e.id_org,e)}),t},a.load=function(i,n){var o=this;i&&(n.filter&&(i=i.filter(n.filter)),(n.type||n.types)&&i.forEach(function(e){var t=n.types&&n.types[e.id]?n.types[e.id]:n.type;o.setTargetType(e.id,t)}),o.data.targets.forEach(function(e){for(var t=0;t<i.length;t++)if(e.id===i[t].id){e.values=i[t].values,i.splice(t,1);break}}),o.data.targets=o.data.targets.concat(i)),o.updateTargets(o.data.targets),o.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.done&&n.done()},a.loadFromArgs=function(t){var i=this;t.data?i.load(i.convertDataToTargets(t.data),t):t.url?i.convertUrlToData(t.url,t.mimeType,t.keys,function(e){i.load(i.convertDataToTargets(e),t)}):t.json?i.load(i.convertDataToTargets(i.convertJsonToData(t.json,t.keys)),t):t.rows?i.load(i.convertDataToTargets(i.convertRowsToData(t.rows)),t):t.columns?i.load(i.convertDataToTargets(i.convertColumnsToData(t.columns)),t):i.load(null,t)},a.unload=function(e,t){var i=this;t=t||function(){},(e=e.filter(function(e){return i.hasTarget(i.data.targets,e)}))&&0!==e.length?(i.svg.selectAll(e.map(function(e){return i.selectorTarget(e)})).transition().style("opacity",0).remove().call(i.endall,t),e.forEach(function(t){i.withoutFadeIn[t]=!1,i.legend&&i.legend.selectAll("."+I.legendItem+i.getTargetSelectorSuffix(t)).remove(),i.data.targets=i.data.targets.filter(function(e){return e.id!==t})})):t()},a.categoryName=function(e){var t=this.config;return e<t.axis_x_categories.length?t.axis_x_categories[e]:e},a.initEventRect=function(){this.main.select("."+I.chart).append("g").attr("class",I.eventRects).style("fill-opacity",0)},a.redrawEventRect=function(){var e,t=this,i=t.config,n=t.isMultipleX(),i=t.main.select("."+I.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null).classed(I.eventRectsMultiple,n).classed(I.eventRectsSingle,!n);i.selectAll("."+I.eventRect).remove(),t.eventRect=i.selectAll("."+I.eventRect),n?(e=t.eventRect.data([0]),t.generateEventRectsForMultipleXs(e.enter()),t.updateEventRect(e)):(n=t.getMaxDataCountTarget(t.data.targets),i.datum(n?n.values:[]),t.eventRect=i.selectAll("."+I.eventRect),e=t.eventRect.data(function(e){return e}),t.generateEventRectsForSingleX(e.enter()),t.updateEventRect(e),e.exit().remove())},a.updateEventRect=function(e){var t,i,n,o,r,s=this,a=s.config;e=e||s.eventRect.data(function(e){return e}),r=s.isMultipleX()?(i=t=0,n=s.width,s.height):(r=!s.isCustomX()&&!s.isTimeSeries()||s.isCategorized()?(o=s.getEventRectWidth(),function(e){return s.x(e.x)-o/2}):(s.updateXs(),o=function(e){var t=s.getPrevX(e.index),e=s.getNextX(e.index);return null===t&&null===e?a.axis_rotated?s.height:s.width:(null===t&&(t=s.x.domain()[0]),null===e&&(e=s.x.domain()[1]),Math.max(0,(s.x(e)-s.x(t))/2))},function(e){var t=s.getPrevX(e.index),i=s.getNextX(e.index),e=s.data.xs[e.id][e.index];return null===t&&null===i?0:(null===t&&(t=s.x.domain()[0]),(s.x(e)+s.x(t))/2)}),t=a.axis_rotated?0:r,i=a.axis_rotated?r:0,n=a.axis_rotated?s.width:o,a.axis_rotated?o:s.height),e.attr("class",s.classEvent.bind(s)).attr("x",t).attr("y",i).attr("width",n).attr("height",r)},a.generateEventRectsForSingleX=function(e){var n=this,o=n.d3,r=n.config;e.append("rect").attr("class",n.classEvent.bind(n)).style("cursor",r.data_selection_enabled&&r.data_selection_grouped?"pointer":null).on("mouseover",function(e){e=e.index;n.dragging||n.flowing||n.hasArcType()||(r.point_focus_expand_enabled&&n.expandCircles(e,null,!0),n.expandBars(e,null,!0),n.main.selectAll("."+I.shape+"-"+e).each(function(e){r.data_onmouseover.call(n.api,e)}))}).on("mouseout",function(e){e=e.index;n.config&&!n.hasArcType()&&(n.hideXGridFocus(),n.hideTooltip(),n.unexpandCircles(),n.unexpandBars(),n.main.selectAll("."+I.shape+"-"+e).each(function(e){r.data_onmouseout.call(n.api,e)}))}).on("mousemove",function(e){var t=e.index,i=n.svg.select("."+I.eventRect+"-"+t);n.dragging||n.flowing||n.hasArcType()||(n.isStepType(e)&&"step-after"===n.config.line_step_type&&o.mouse(this)[0]<n.x(n.getXValue(e.id,t))&&--t,e=n.filterTargetsToShow(n.data.targets).map(function(e){return n.addName(n.getValueOnIndex(e.values,t))}),r.tooltip_grouped&&(n.showTooltip(e,this),n.showXGridFocus(e)),r.tooltip_grouped&&(!r.data_selection_enabled||r.data_selection_grouped)||n.main.selectAll("."+I.shape+"-"+t).each(function(){o.select(this).classed(I.EXPANDED,!0),r.data_selection_enabled&&i.style("cursor",r.data_selection_grouped?"pointer":null),r.tooltip_grouped||(n.hideXGridFocus(),n.hideTooltip(),r.data_selection_grouped||(n.unexpandCircles(t),n.unexpandBars(t)))}).filter(function(e){return n.isWithinShape(this,e)}).each(function(e){r.data_selection_enabled&&(r.data_selection_grouped||r.data_selection_isselectable(e))&&i.style("cursor","pointer"),r.tooltip_grouped||(n.showTooltip([e],this),n.showXGridFocus([e]),r.point_focus_expand_enabled&&n.expandCircles(t,e.id,!0),n.expandBars(t,e.id,!0))}))}).on("click",function(e){var t=e.index;!n.hasArcType()&&n.toggleShape&&(n.cancelClick?n.cancelClick=!1:(n.isStepType(e)&&"step-after"===r.line_step_type&&o.mouse(this)[0]<n.x(n.getXValue(e.id,t))&&--t,n.main.selectAll("."+I.shape+"-"+t).each(function(e){(r.data_selection_grouped||n.isWithinShape(this,e))&&(n.toggleShape(this,e,t),n.config.data_onclick.call(n.api,e,this))})))}).call(r.data_selection_draggable&&n.drag?o.behavior.drag().origin(Object).on("drag",function(){n.drag(o.mouse(this))}).on("dragstart",function(){n.dragstart(o.mouse(this))}).on("dragend",function(){n.dragend()}):function(){})},a.generateEventRectsForMultipleXs=function(e){var n=this,o=n.d3,r=n.config;function s(){n.svg.select("."+I.eventRect).style("cursor",null),n.hideXGridFocus(),n.hideTooltip(),n.unexpandCircles(),n.unexpandBars()}e.append("rect").attr("x",0).attr("y",0).attr("width",n.width).attr("height",n.height).attr("class",I.eventRect).on("mouseout",function(){!n.config||n.hasArcType()||s()}).on("mousemove",function(){var e,t,i=n.filterTargetsToShow(n.data.targets);n.dragging||n.hasArcType(i)||(e=o.mouse(this),t=n.findClosestFromTargets(i,e),!n.mouseover||t&&t.id===n.mouseover.id||(r.data_onmouseout.call(n.api,n.mouseover),n.mouseover=void 0),t?(i=(n.isScatterType(t)||!r.tooltip_grouped?[t]:n.filterByX(i,t.x)).map(function(e){return n.addName(e)}),n.showTooltip(i,this),r.point_focus_expand_enabled&&n.expandCircles(t.index,t.id,!0),n.expandBars(t.index,t.id,!0),n.showXGridFocus(i),(n.isBarType(t.id)||n.dist(t,e)<100)&&(n.svg.select("."+I.eventRect).style("cursor","pointer"),n.mouseover||(r.data_onmouseover.call(n.api,t),n.mouseover=t))):s())}).on("click",function(){var e,t,i=n.filterTargetsToShow(n.data.targets);n.hasArcType(i)||(e=o.mouse(this),(t=n.findClosestFromTargets(i,e))&&(n.isBarType(t.id)||n.dist(t,e)<100)&&n.main.selectAll("."+I.shapes+n.getTargetSelectorSuffix(t.id)).selectAll("."+I.shape+"-"+t.index).each(function(){(r.data_selection_grouped||n.isWithinShape(this,t))&&(n.toggleShape(this,t,t.index),n.config.data_onclick.call(n.api,t,this))}))}).call(r.data_selection_draggable&&n.drag?o.behavior.drag().origin(Object).on("drag",function(){n.drag(o.mouse(this))}).on("dragstart",function(){n.dragstart(o.mouse(this))}).on("dragend",function(){n.dragend()}):function(){})},a.dispatchEvent=function(e,t,i){var t="."+I.eventRect+(this.isMultipleX()?"":"-"+t),t=this.main.select(t).node(),n=t.getBoundingClientRect(),o=n.left+(i?i[0]:0),n=n.top+(i?i[1]:0),i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,r,0,o,n,o,n,!1,!1,!1,!1,0,null),t.dispatchEvent(i)},a.getCurrentWidth=function(){var e=this.config;return e.size_width||this.getParentWidth()},a.getCurrentHeight=function(){var e=this.config,e=e.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")?2:1)},a.getCurrentPaddingTop=function(){var e=this.config;return v(e.padding_top)?e.padding_top:0},a.getCurrentPaddingBottom=function(){var e=this.config;return v(e.padding_bottom)?e.padding_bottom:0},a.getCurrentPaddingLeft=function(e){var t=this.config;return v(t.padding_left)?t.padding_left:t.axis_rotated?t.axis_x_show?Math.max(p(this.getAxisWidthByAxisId("x",e)),40):1:!t.axis_y_show||t.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:p(this.getAxisWidthByAxisId("y",e))},a.getCurrentPaddingRight=function(){var e=this.config,t=this.isLegendRight?this.getLegendWidth()+20:0;return v(e.padding_right)?e.padding_right+1:e.axis_rotated?10+t:!e.axis_y2_show||e.axis_y2_inner?2+t+(this.axis.getY2AxisLabelPosition().isOuter?20:0):p(this.getAxisWidthByAxisId("y2"))+t},a.getParentRectValue=function(t){for(var i,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{i=n.getBoundingClientRect()[t]}catch(e){"width"===t&&(i=n.offsetWidth)}if(i)break;n=n.parentNode}return i},a.getParentWidth=function(){return this.getParentRectValue("width")},a.getParentHeight=function(){var e=this.selectChart.style("height");return 0<e.indexOf("px")?+e.replace("px",""):0},a.getSvgLeft=function(e){var t=this.config,i=t.axis_rotated||!t.axis_rotated&&!t.axis_y_inner,t=t.axis_rotated?I.axisX:I.axisY,t=this.main.select("."+t).node(),i=t&&i?t.getBoundingClientRect():{right:0},t=this.selectChart.node().getBoundingClientRect(),n=this.hasArcType(),i=i.right-t.left-(n?0:this.getCurrentPaddingLeft(e));return 0<i?i:0},a.getAxisWidthByAxisId=function(e,t){var i=this.axis.getLabelPositionById(e);return this.axis.getMaxTickWidth(e,t)+(i.isInner?20:40)},a.getHorizontalAxisHeight=function(e){var t=this.config,i=30;return"x"!==e||t.axis_x_show?"x"===e&&t.axis_x_height?t.axis_x_height:"y"!==e||t.axis_y_show?"y2"!==e||t.axis_y2_show?(i="x"===e&&!t.axis_rotated&&t.axis_x_tick_rotate?30+this.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-t.axis_x_tick_rotate)/180):i)+(this.axis.getLabelPositionById(e).isInner?0:10)+("y2"===e?-10:0):this.rotated_padding_top:!t.legend_show||this.isLegendRight||this.isLegendInset?1:10:8},a.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},a.getShapeIndices=function(e){var t,i,n=this.config,o={},r=0;return this.filterTargetsToShow(this.data.targets.filter(e,this)).forEach(function(e){for(t=0;t<n.data_groups.length;t++)if(!(n.data_groups[t].indexOf(e.id)<0))for(i=0;i<n.data_groups[t].length;i++)if(n.data_groups[t][i]in o){o[e.id]=o[n.data_groups[t][i]];break}C(o[e.id])&&(o[e.id]=r++)}),o.__max__=r-1,o},a.getShapeX=function(i,n,o,e){var r=e?this.subX:this.x;return function(e){var t=e.id in o?o[e.id]:0;return e.x||0===e.x?r(e.x)-i*(n/2-t):0}},a.getShapeY=function(t){var i=this;return function(e){return(t?i.getSubYScale(e.id):i.getYScale(e.id))(e.value)}},a.getShapeOffset=function(e,a,t){var l=this,c=l.orderTargets(l.filterTargetsToShow(l.data.targets.filter(e,l))),u=c.map(function(e){return e.id});return function(i,n){var o=t?l.getSubYScale(i.id):l.getYScale(i.id),r=o(0),s=r;return c.forEach(function(e){var t=l.isStepType(i)?l.convertValuesToStep(e.values):e.values;e.id!==i.id&&a[e.id]===a[i.id]&&u.indexOf(e.id)<u.indexOf(i.id)&&0<=t[n].value*i.value&&(s+=o(t[n].value)-r)}),s}},a.isWithinShape=function(e,t){var i,n=this.d3.select(e);return this.isTargetToShow(t.id)?"circle"===e.nodeName?i=this.isStepType(t)?this.isWithinStep(e,this.getYScale(t.id)(t.value)):this.isWithinCircle(e,1.5*this.pointSelectR(t)):"path"===e.nodeName&&(i=!n.classed(I.bar)||this.isWithinBar(e)):i=!1,i},a.getInterpolate=function(e){return this.isSplineType(e)?"cardinal":this.isStepType(e)?this.config.line_step_type:"linear"},a.initLine=function(){this.main.select("."+I.chart).append("g").attr("class",I.chartLines)},a.updateTargetsForLine=function(e){var i=this,t=i.config,n=i.classChartLine.bind(i),o=i.classLines.bind(i),r=i.classAreas.bind(i),s=i.classCircles.bind(i),a=i.classFocus.bind(i),l=i.main.select("."+I.chartLines).selectAll("."+I.chartLine).data(e).attr("class",function(e){return n(e)+a(e)}).enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none");l.append("g").attr("class",o),l.append("g").attr("class",r),l.append("g").attr("class",function(e){return i.generateClass(I.selectedCircles,e.id)}),l.append("g").attr("class",s).style("cursor",function(e){return t.data_selection_isselectable(e)?"pointer":null}),e.forEach(function(t){i.main.selectAll("."+I.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+I.selectedCircle).each(function(e){e.value=t.values[e.index].value})})},a.updateLine=function(e){var t=this;t.mainLine=t.main.selectAll("."+I.lines).selectAll("."+I.line).data(t.lineData.bind(t)),t.mainLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.mainLine.style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(e){return t.isStepType(e)?"crispEdges":""}).attr("transform",null),t.mainLine.exit().transition().duration(e).style("opacity",0).remove()},a.redrawLine=function(e,t){return[(t?this.mainLine.transition():this.mainLine).attr("d",e).style("stroke",this.color).style("opacity",1)]},a.generateDrawLine=function(e,s){function t(e){return(s?a.subxx:a.xx).call(a,e)}function i(e,t){return 0<l.data_groups.length?n(e,t)[0][1]:u.call(a,e.id)(e.value)}var a=this,l=a.config,c=a.d3.svg.line(),n=a.generateGetLinePoints(e,s),u=s?a.getSubYScale:a.getYScale,c=l.axis_rotated?c.x(i).y(t):c.x(t).y(i);return l.line_connectNull||(c=c.defined(function(e){return null!=e.value})),function(e){var t=l.line_connectNull?a.filterRemoveNull(e.values):e.values,i=s?a.x:a.subX,n=u.call(a,e.id),o=0,r=0,e=a.isLineType(e)?l.data_regions[e.id]?a.lineWithRegions(t,i,n,l.data_regions[e.id]):(a.isStepType(e)&&(t=a.convertValuesToStep(t)),c.interpolate(a.getInterpolate(e))(t)):(t[0]&&(o=i(t[0].x),r=n(t[0].value)),l.axis_rotated?"M "+r+" "+o:"M "+o+" "+r);return e||"M 0 0"}},a.generateGetLinePoints=function(e,t){var r=this,s=r.config,i=e.__max__+1,a=r.getShapeX(0,i,e,!!t),l=r.getShapeY(!!t),c=r.getShapeOffset(r.isLineType,e,!!t),u=t?r.getSubYScale:r.getYScale;return function(e,t){var i=u.call(r,e.id)(0),t=c(e,t)||i,n=a(e),o=l(e);return[[n,(o=s.axis_rotated&&(0<e.value&&o<i||e.value<0&&i<o)?i:o)-(i-t)],[n,o-(i-t)],[n,o-(i-t)],[n,o-(i-t)]]}},a.lineWithRegions=function(e,r,s,t){var i,n,o,a,l,c,u,d,h,p,f,g=this,m=g.config,v="M",y=g.isCategorized()?.5:0,b=[];if(k(t))for(i=0;i<t.length;i++)b[i]={},C(t[i].start)?b[i].start=e[0].x:b[i].start=g.isTimeSeries()?g.parseDate(t[i].start):t[i].start,C(t[i].end)?b[i].end=e[e.length-1].x:b[i].end=g.isTimeSeries()?g.parseDate(t[i].end):t[i].end;function w(e){return"M"+e[0][0]+" "+e[0][1]+" "+e[1][0]+" "+e[1][1]}for(p=m.axis_rotated?function(e){return s(e.value)}:function(e){return r(e.x)},f=m.axis_rotated?function(e){return r(e.x)}:function(e){return s(e.value)},o=g.isTimeSeries()?function(e,t,i,n){var o=e.x.getTime(),t=t.x-e.x,e=new Date(o+t*i),o=new Date(o+t*(i+n)),t=m.axis_rotated?[[s(l(i)),r(e)],[s(l(i+n)),r(o)]]:[[r(e),s(l(i))],[r(o),s(l(i+n))]];return w(t)}:function(e,t,i,n){i=m.axis_rotated?[[s(l(i),!0),r(a(i))],[s(l(i+n),!0),r(a(i+n))]]:[[r(a(i),!0),s(l(i))],[r(a(i+n),!0),s(l(i+n))]];return w(i)},i=0;i<e.length;i++){if(C(b)||!function(e,t){for(var i=0;i<t.length;i++)if(t[i].start<e&&e<=t[i].end)return 1}(e[i].x,b))v+=" "+p(e[i])+" "+f(e[i]);else for(a=g.getScale(e[i-1].x+y,e[i].x+y,g.isTimeSeries()),l=g.getScale(e[i-1].value,e[i].value),c=r(e[i].x)-r(e[i-1].x),u=s(e[i].value)-s(e[i-1].value),h=2*(d=2/Math.sqrt(Math.pow(c,2)+Math.pow(u,2))),n=d;n<=1;n+=h)v+=o(e[i-1],e[i],n,d);e[i].x}return v},a.updateArea=function(e){var t=this,i=t.d3;t.mainArea=t.main.selectAll("."+I.areas).selectAll("."+I.area).data(t.lineData.bind(t)),t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+i.select(this).style("opacity"),0}),t.mainArea.style("opacity",t.orgAreaOpacity),t.mainArea.exit().transition().duration(e).style("opacity",0).remove()},a.redrawArea=function(e,t){return[(t?this.mainArea.transition():this.mainArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},a.generateDrawArea=function(e,t){function i(e){return(t?r.subxx:r.xx).call(r,e)}function n(e,t){return 0<s.data_groups.length?l(e,t)[0][1]:c.call(r,e.id)(r.getAreaBaseValue(e.id))}function o(e,t){return 0<s.data_groups.length?l(e,t)[1][1]:c.call(r,e.id)(e.value)}var r=this,s=r.config,a=r.d3.svg.area(),l=r.generateGetAreaPoints(e,t),c=t?r.getSubYScale:r.getYScale,a=s.axis_rotated?a.x0(n).x1(o).y(i):a.x(i).y0(n).y1(o);return s.line_connectNull||(a=a.defined(function(e){return null!==e.value})),function(e){var t=s.line_connectNull?r.filterRemoveNull(e.values):e.values,i=0,n=0,e=r.isAreaType(e)?(r.isStepType(e)&&(t=r.convertValuesToStep(t)),a.interpolate(r.getInterpolate(e))(t)):(t[0]&&(i=r.x(t[0].x),n=r.getYScale(e.id)(t[0].value)),s.axis_rotated?"M "+n+" "+i:"M "+i+" "+n);return e||"M 0 0"}},a.getAreaBaseValue=function(){return 0},a.generateGetAreaPoints=function(e,t){var r=this,s=r.config,i=e.__max__+1,a=r.getShapeX(0,i,e,!!t),l=r.getShapeY(!!t),c=r.getShapeOffset(r.isAreaType,e,!!t),u=t?r.getSubYScale:r.getYScale;return function(e,t){var i=u.call(r,e.id)(0),t=c(e,t)||i,n=a(e),o=l(e);return[[n,t],[n,(o=s.axis_rotated&&(0<e.value&&o<i||e.value<0&&i<o)?i:o)-(i-t)],[n,o-(i-t)],[n,t]]}},a.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll("."+I.circles).selectAll("."+I.circle).data(e.lineOrScatterData.bind(e)),e.mainCircle.enter().append("circle").attr("class",e.classCircle.bind(e)).attr("r",e.pointR.bind(e)).style("fill",e.color),e.mainCircle.style("opacity",e.initialOpacityForCircle.bind(e)),e.mainCircle.exit().remove()},a.redrawCircle=function(e,t,i){var n=this.main.selectAll("."+I.selectedCircle);return[(i?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",e).attr("cy",t),(i?n.transition():n).attr("cx",e).attr("cy",t)]},a.circleX=function(e){return e.x||0===e.x?this.x(e.x):null},a.updateCircleY=function(){var e,i,t=this;0<t.config.data_groups.length?(e=t.getShapeIndices(t.isLineType),i=t.generateGetLinePoints(e),t.circleY=function(e,t){return i(e,t)[0][1]}):t.circleY=function(e){return t.getYScale(e.id)(e.value)}},a.getCircles=function(e,t){return(t?this.main.selectAll("."+I.circles+this.getTargetSelectorSuffix(t)):this.main).selectAll("."+I.circle+(v(e)?"-"+e:""))},a.expandCircles=function(e,t,i){var n=this.pointExpandedR.bind(this);i&&this.unexpandCircles(),this.getCircles(e,t).classed(I.EXPANDED,!0).attr("r",n)},a.unexpandCircles=function(e){var t=this,i=t.pointR.bind(t);t.getCircles(e).filter(function(){return t.d3.select(this).classed(I.EXPANDED)}).classed(I.EXPANDED,!1).attr("r",i)},a.pointR=function(e){var t=this.config;return this.isStepType(e)?0:d(t.point_r)?t.point_r(e):t.point_r},a.pointExpandedR=function(e){var t=this.config;return t.point_focus_expand_enabled?t.point_focus_expand_r||1.75*this.pointR(e):this.pointR(e)},a.pointSelectR=function(e){var t=this.config;return t.point_select_r||4*this.pointR(e)},a.isWithinCircle=function(e,t){var i=this.d3,n=i.mouse(e),i=i.select(e),e=+i.attr("cx"),i=+i.attr("cy");return Math.sqrt(Math.pow(e-n[0],2)+Math.pow(i-n[1],2))<t},a.isWithinStep=function(e,t){return Math.abs(t-this.d3.mouse(e)[1])<30},a.initBar=function(){this.main.select("."+I.chart).append("g").attr("class",I.chartBars)},a.updateTargetsForBar=function(e){var t=this.config,i=this.classChartBar.bind(this),n=this.classBars.bind(this),o=this.classFocus.bind(this);this.main.select("."+I.chartBars).selectAll("."+I.chartBar).data(e).attr("class",function(e){return i(e)+o(e)}).enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none").append("g").attr("class",n).style("cursor",function(e){return t.data_selection_isselectable(e)?"pointer":null})},a.updateBar=function(e){function t(e){return i.color(e.id)}var i=this,n=i.barData.bind(i),o=i.classBar.bind(i),r=i.initialOpacity.bind(i);i.mainBar=i.main.selectAll("."+I.bars).selectAll("."+I.bar).data(n),i.mainBar.enter().append("path").attr("class",o).style("stroke",t).style("fill",t),i.mainBar.style("opacity",r),i.mainBar.exit().transition().duration(e).style("opacity",0).remove()},a.redrawBar=function(e,t){return[(t?this.mainBar.transition():this.mainBar).attr("d",e).style("fill",this.color).style("opacity",1)]},a.getBarW=function(e,t){var i=this.config,e="number"==typeof i.bar_width?i.bar_width:t?e.tickInterval()*i.bar_width_ratio/t:0;return i.bar_width_max&&e>i.bar_width_max?i.bar_width_max:e},a.getBars=function(e,t){return(t?this.main.selectAll("."+I.bars+this.getTargetSelectorSuffix(t)):this.main).selectAll("."+I.bar+(v(e)?"-"+e:""))},a.expandBars=function(e,t,i){i&&this.unexpandBars(),this.getBars(e,t).classed(I.EXPANDED,!0)},a.unexpandBars=function(e){this.getBars(e).classed(I.EXPANDED,!1)},a.generateDrawBar=function(e,t){var n=this.config,o=this.generateGetBarPoints(e,t);return function(e,t){var e=o(e,t),t=n.axis_rotated?1:0,i=n.axis_rotated?0:1;return"M "+e[0][t]+","+e[0][i]+" L"+e[1][t]+","+e[1][i]+" L"+e[2][t]+","+e[2][i]+" L"+e[3][t]+","+e[3][i]+" z"}},a.generateGetBarPoints=function(e,t){var r=this,i=t?r.subXAxis:r.xAxis,n=e.__max__+1,s=r.getBarW(i,n),a=r.getShapeX(s,n,e,!!t),l=r.getShapeY(!!t),c=r.getShapeOffset(r.isBarType,e,!!t),u=t?r.getSubYScale:r.getYScale;return function(e,t){var i=u.call(r,e.id)(0),t=c(e,t)||i,n=a(e),o=l(e);return[[n,t],[n,(o=r.config.axis_rotated&&(0<e.value&&o<i||e.value<0&&i<o)?i:o)-(i-t)],[n+s,o-(i-t)],[n+s,t]]}},a.isWithinBar=function(e){var t=this.d3.mouse(e),i=e.getBoundingClientRect(),n=e.pathSegList.getItem(0),e=e.pathSegList.getItem(1),o=Math.min(n.x,e.x),n=Math.min(n.y,e.y),e=i.width,i=i.height;return o-2<t[0]&&t[0]<o+e+2&&n-2<t[1]&&t[1]<n+i+2},a.initText=function(){this.main.select("."+I.chart).append("g").attr("class",I.chartTexts),this.mainText=this.d3.selectAll([])},a.updateTargetsForText=function(e){var t=this.classChartText.bind(this),i=this.classTexts.bind(this),n=this.classFocus.bind(this);this.main.select("."+I.chartTexts).selectAll("."+I.chartText).data(e).attr("class",function(e){return t(e)+n(e)}).enter().append("g").attr("class",t).style("opacity",0).style("pointer-events","none").append("g").attr("class",i)},a.updateText=function(e){var n=this,t=n.config,i=n.barOrLineData.bind(n),o=n.classText.bind(n);n.mainText=n.main.selectAll("."+I.texts).selectAll("."+I.text).data(i),n.mainText.enter().append("text").attr("class",o).attr("text-anchor",function(e){return t.axis_rotated?e.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(e){return n.color(e)}).style("fill-opacity",0),n.mainText.text(function(e,t,i){return n.dataLabelFormat(e.id)(e.value,e.id,t,i)}),n.mainText.exit().transition().duration(e).style("fill-opacity",0).remove()},a.redrawText=function(e,t,i,n){return[(n?this.mainText.transition():this.mainText).attr("x",e).attr("y",t).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]},a.getTextRect=function(e,t){var i,n=this.d3.select("body").append("div").classed("c3",!0);return n.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).selectAll(".dummy").data([e]).enter().append("text").classed(t||"",!0).text(e).each(function(){i=this.getBoundingClientRect()}),n.remove(),i},a.generateXYForText=function(e,t,i,n){var o=this,r=o.generateGetAreaPoints(e,!1),s=o.generateGetBarPoints(t,!1),a=o.generateGetLinePoints(i,!1),l=n?o.getXForText:o.getYForText;return function(e,t){var i=o.isAreaType(e)?r:o.isBarType(e)?s:a;return l.call(o,i(e,t),e,this)}},a.getXForText=function(e,t,i){var i=i.getBoundingClientRect(),n=this.config.axis_rotated?(n=this.isBarType(t)?4:6,e[2][1]+n*(t.value<0?-1:1)):this.hasType("bar")?(e[2][0]+e[0][0])/2:e[0][0];return null===t.value&&(n>this.width?n=this.width-i.width:n<0&&(n=4)),n},a.getYForText=function(e,t,i){var n,i=i.getBoundingClientRect();return this.config.axis_rotated?n=(e[0][0]+e[2][0]+.6*i.height)/2:(n=e[2][1],t.value<0?(n+=i.height,this.isBarType(t)&&this.isSafari()?n-=3:!this.isBarType(t)&&this.isChrome()&&(n+=3)):n+=this.isBarType(t)?-3:-6),null!==t.value||this.config.axis_rotated||(n<i.height?n=i.height:n>this.height&&(n=this.height-4)),n},a.setTargetType=function(e,t){var i=this,n=i.config;i.mapToTargetIds(e).forEach(function(e){i.withoutFadeIn[e]=t===n.data_types[e],n.data_types[e]=t}),e||(n.data_type=t)},a.hasType=function(t,e){var i=this.config.data_types,n=!1;return(e=e||this.data.targets)&&e.length?e.forEach(function(e){e=i[e.id];(e&&0<=e.indexOf(t)||!e&&"line"===t)&&(n=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(e){i[e]===t&&(n=!0)}):n=this.config.data_type===t,n},a.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)},a.isLineType=function(e){var t=this.config,e=h(e)?e:e.id;return!t.data_types[e]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[e])},a.isStepType=function(e){e=h(e)?e:e.id;return 0<=["step","area-step"].indexOf(this.config.data_types[e])},a.isSplineType=function(e){e=h(e)?e:e.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[e])},a.isAreaType=function(e){e=h(e)?e:e.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[e])},a.isBarType=function(e){e=h(e)?e:e.id;return"bar"===this.config.data_types[e]},a.isScatterType=function(e){e=h(e)?e:e.id;return"scatter"===this.config.data_types[e]},a.isPieType=function(e){e=h(e)?e:e.id;return"pie"===this.config.data_types[e]},a.isGaugeType=function(e){e=h(e)?e:e.id;return"gauge"===this.config.data_types[e]},a.isDonutType=function(e){e=h(e)?e:e.id;return"donut"===this.config.data_types[e]},a.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},a.lineData=function(e){return this.isLineType(e)?[e]:[]},a.arcData=function(e){return this.isArcType(e.data)?[e]:[]},a.barData=function(e){return this.isBarType(e)?e.values:[]},a.lineOrScatterData=function(e){return this.isLineType(e)||this.isScatterType(e)?e.values:[]},a.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},a.initGrid=function(){var e=this,t=e.config,i=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",I.grid),t.grid_x_show&&e.grid.append("g").attr("class",I.xgrids),t.grid_y_show&&e.grid.append("g").attr("class",I.ygrids),t.grid_focus_show&&e.grid.append("g").attr("class",I.xgridFocus).append("line").attr("class",I.xgridFocus),e.xgrid=i.selectAll([]),t.grid_lines_front||e.initGridLines()},a.initGridLines=function(){var e=this.d3;this.gridLines=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",I.grid+" "+I.gridLines),this.gridLines.append("g").attr("class",I.xgridLines),this.gridLines.append("g").attr("class",I.ygridLines),this.xgridLines=e.selectAll([])},a.updateXGrid=function(e){var t=this,i=t.config,n=t.d3,o=t.generateGridData(i.grid_x_type,t.x),r=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=i.axis_rotated?{x1:0,x2:t.width,y1:function(e){return t.x(e)-r},y2:function(e){return t.x(e)-r}}:{x1:function(e){return t.x(e)+r},x2:function(e){return t.x(e)+r},y1:0,y2:t.height},t.xgrid=t.main.select("."+I.xgrids).selectAll("."+I.xgrid).data(o),t.xgrid.enter().append("line").attr("class",I.xgrid),e||t.xgrid.attr(t.xgridAttr).style("opacity",function(){return+n.select(this).attr(i.axis_rotated?"y1":"x1")===(i.axis_rotated?t.height:0)?0:1}),t.xgrid.exit().remove()},a.updateYGrid=function(){var e=this,t=e.config,i=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks);e.ygrid=e.main.select("."+I.ygrids).selectAll("."+I.ygrid).data(i),e.ygrid.enter().append("line").attr("class",I.ygrid),e.ygrid.attr("x1",t.axis_rotated?e.y:0).attr("x2",t.axis_rotated?e.y:e.width).attr("y1",t.axis_rotated?0:e.y).attr("y2",t.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,"grid")},a.gridTextAnchor=function(e){return e.position||"end"},a.gridTextDx=function(e){return"start"===e.position?4:"middle"===e.position?0:-4},a.xGridTextX=function(e){return"start"===e.position?-this.height:"middle"===e.position?-this.height/2:0},a.yGridTextX=function(e){return"start"===e.position?0:"middle"===e.position?this.width/2:this.width},a.updateGrid=function(e){var t,i=this,n=i.main,o=i.config;i.grid.style("visibility",i.hasArcType()?"hidden":"visible"),n.select("line."+I.xgridFocus).style("visibility","hidden"),o.grid_x_show&&i.updateXGrid(),i.xgridLines=n.select("."+I.xgridLines).selectAll("."+I.xgridLine).data(o.grid_x_lines),(t=i.xgridLines.enter().append("g").attr("class",function(e){return I.xgridLine+(e.class?" "+e.class:"")})).append("line").style("opacity",0),t.append("text").attr("text-anchor",i.gridTextAnchor).attr("transform",o.axis_rotated?"":"rotate(-90)").attr("dx",i.gridTextDx).attr("dy",-5).style("opacity",0),i.xgridLines.exit().transition().duration(e).style("opacity",0).remove(),o.grid_y_show&&i.updateYGrid(),i.ygridLines=n.select("."+I.ygridLines).selectAll("."+I.ygridLine).data(o.grid_y_lines),(t=i.ygridLines.enter().append("g").attr("class",function(e){return I.ygridLine+(e.class?" "+e.class:"")})).append("line").style("opacity",0),t.append("text").attr("text-anchor",i.gridTextAnchor).attr("transform",o.axis_rotated?"rotate(-90)":"").attr("dx",i.gridTextDx).attr("dy",-5).style("opacity",0),n=i.yv.bind(i),i.ygridLines.select("line").transition().duration(e).attr("x1",o.axis_rotated?n:0).attr("x2",o.axis_rotated?n:i.width).attr("y1",o.axis_rotated?0:n).attr("y2",o.axis_rotated?i.height:n).style("opacity",1),i.ygridLines.select("text").transition().duration(e).attr("x",(o.axis_rotated?i.xGridTextX:i.yGridTextX).bind(i)).attr("y",n).text(function(e){return e.text}).style("opacity",1),i.ygridLines.exit().transition().duration(e).style("opacity",0).remove()},a.redrawGrid=function(e){var t=this,i=t.config,n=t.xv.bind(t),o=t.xgridLines.select("line"),r=t.xgridLines.select("text");return[(e?o.transition():o).attr("x1",i.axis_rotated?0:n).attr("x2",i.axis_rotated?t.width:n).attr("y1",i.axis_rotated?n:0).attr("y2",i.axis_rotated?n:t.height).style("opacity",1),(e?r.transition():r).attr("x",(i.axis_rotated?t.yGridTextX:t.xGridTextX).bind(t)).attr("y",n).text(function(e){return e.text}).style("opacity",1)]},a.showXGridFocus=function(e){var t=this.config,e=e.filter(function(e){return e&&v(e.value)}),i=this.main.selectAll("line."+I.xgridFocus),n=this.xx.bind(this);!t.tooltip_show||this.hasType("scatter")||this.hasArcType()||(i.style("visibility","visible").data([e[0]]).attr(t.axis_rotated?"y1":"x1",n).attr(t.axis_rotated?"y2":"x2",n),this.smoothLines(i,"grid"))},a.hideXGridFocus=function(){this.main.select("line."+I.xgridFocus).style("visibility","hidden")},a.updateXgridFocus=function(){var e=this.config;this.main.select("line."+I.xgridFocus).attr("x1",e.axis_rotated?0:-10).attr("x2",e.axis_rotated?this.width:-10).attr("y1",e.axis_rotated?-10:0).attr("y2",e.axis_rotated?-10:this.height)},a.generateGridData=function(e,t){var i,n,o,r=[],s=this.main.select("."+I.axisX).selectAll(".tick").size();if("year"===e)for(i=(e=this.getXDomain())[0].getFullYear(),n=e[1].getFullYear(),o=i;o<=n;o++)r.push(new Date(o+"-01-01 00:00:00"));else(r=t.ticks(10)).length>s&&(r=r.filter(function(e){return(""+e).indexOf(".")<0}));return r},a.getGridFilterToRemove=function(e){return e?function(t){var i=!1;return[].concat(e).forEach(function(e){("value"in e&&t.value===e.value||"class"in e&&t.class===e.class)&&(i=!0)}),i}:function(){return!0}},a.removeGridLines=function(e,t){function i(e){return!o(e)}var n=this.config,o=this.getGridFilterToRemove(e),e=t?I.xgridLines:I.ygridLines,r=t?I.xgridLine:I.ygridLine;this.main.select("."+e).selectAll("."+r).filter(o).transition().duration(n.transition_duration).style("opacity",0).remove(),t?n.grid_x_lines=n.grid_x_lines.filter(i):n.grid_y_lines=n.grid_y_lines.filter(i)},a.initTooltip=function(){var e,t=this,i=t.config;if(t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",I.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),i.tooltip_init_show){if(t.isTimeSeries()&&h(i.tooltip_init_x)){for(i.tooltip_init_x=t.parseDate(i.tooltip_init_x),e=0;e<t.data.targets[0].values.length&&t.data.targets[0].values[e].x-i.tooltip_init_x!=0;e++);i.tooltip_init_x=e}t.tooltip.html(i.tooltip_contents.call(t,t.data.targets.map(function(e){return t.addName(e.values[i.tooltip_init_x])}),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType()),t.color)),t.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display","block")}},a.getTooltipContent=function(e,t,i,n){for(var o,r,s,a,l=this.config,c=l.tooltip_format_title||t,u=l.tooltip_format_name||function(e){return e},d=l.tooltip_format_value||i,h=0;h<e.length;h++)e[h]&&(e[h].value||0===e[h].value)&&(o||(r=c?c(e[h].x):e[h].x,o="<table class='"+I.tooltip+"'>"+(r||0===r?"<tr><th colspan='2'>"+r+"</th></tr>":"")),void 0!==(r=d(e[h].value,e[h].ratio,e[h].id,e[h].index))&&(s=u(e[h].name,e[h].ratio,e[h].id,e[h].index),a=this.levelColor?this.levelColor(e[h].value):n(e[h].id),o=(o=o+("<tr class='"+I.tooltipName+"-"+e[h].id)+"'><td class='name'><span style='background-color:"+a+"'></span>"+s+"</td>")+"<td class='value'>"+r+"</td></tr>"));return o+"</table>"},a.tooltipPosition=function(e,t,i,n){var o,r,s,a,l=this,c=l.config,u=l.d3,d=l.hasArcType(),u=u.mouse(n);return d?(o=(l.width-(l.isLegendRight?l.getLegendWidth():0))/2+u[0],s=l.height/2+u[1]+20):(n=l.getSvgLeft(!0),s=c.axis_rotated?(r=(o=n+u[0]+100)+t,a=l.currentWidth-l.getCurrentPaddingRight(),l.x(e[0].x)+20):(r=(o=n+l.getCurrentPaddingLeft(!0)+l.x(e[0].x)+20)+t,a=n+l.currentWidth-l.getCurrentPaddingRight(),u[1]+15),a<r&&(o-=r-a+20),s+i>l.currentHeight&&(s-=i+30)),{top:s=s<0?0:s,left:o}},a.showTooltip=function(e,t){var i=this,n=i.config,o=i.hasArcType(),r=e.filter(function(e){return e&&v(e.value)}),s=n.tooltip_position||a.tooltipPosition;0!==r.length&&n.tooltip_show&&(i.tooltip.html(n.tooltip_contents.call(i,e,i.axis.getXAxisTickFormat(),i.getYFormat(o),i.color)).style("display","block"),n=i.tooltip.property("offsetWidth"),e=i.tooltip.property("offsetHeight"),o=s.call(this,r,n,e,t),i.tooltip.style("top",o.top+"px").style("left",o.left+"px"))},a.hideTooltip=function(){this.tooltip.style("display","none")},a.initLegend=function(){var e=this;if(e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend")),!e.config.legend_show)return e.legend.style("visibility","hidden"),void(e.hiddenLegendIds=e.mapToIds(e.data.targets));e.updateLegendWithDefaults()},a.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},a.updateSizeForLegend=function(e,t){var i=this,n=i.config,n={top:i.isLegendTop?i.getCurrentPaddingTop()+n.legend_inset_y+5.5:i.currentHeight-e-i.getCurrentPaddingBottom()-n.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+n.legend_inset_x+.5:i.currentWidth-t-i.getCurrentPaddingRight()-n.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?n.top:i.currentHeight-e,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-t:i.isLegendInset?n.left:0}},a.transformLegend=function(e){(e?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},a.updateLegendStep=function(e){this.legendStep=e},a.updateLegendItemWidth=function(e){this.legendItemWidth=e},a.updateLegendItemHeight=function(e){this.legendItemHeight=e},a.getLegendWidth=function(){return this.config.legend_show?this.isLegendRight||this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0},a.getLegendHeight=function(){var e=0;return e=this.config.legend_show?this.isLegendRight?this.currentHeight:Math.max(20,this.legendItemHeight)*(this.legendStep+1):e},a.opacityForLegend=function(e){return e.classed(I.legendItemHidden)?null:1},a.opacityForUnfocusedLegend=function(e){return e.classed(I.legendItemHidden)?null:.3},a.toggleFocusLegend=function(t,e){var i=this;t=i.mapToTargetIds(t),i.legend.selectAll("."+I.legendItem).filter(function(e){return 0<=t.indexOf(e)}).classed(I.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,i.d3.select(this))})},a.revertLegend=function(){var e=this,t=e.d3;e.legend.selectAll("."+I.legendItem).classed(I.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return e.opacityForLegend(t.select(this))})},a.showLegend=function(e){var t=this,i=t.config;i.legend_show||(i.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults()),t.removeHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})},a.hideLegend=function(e){var t=this.config;t.legend_show&&g(e)&&(t.legend_show=!1,this.legend.style("visibility","hidden")),this.addHiddenLegendIds(e),this.legend.selectAll(this.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},a.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},a.updateLegend=function(c,e,t){var i,n,o,r,s,a,l,u,d,h=this,p=h.config,f=4,g=10,m=0,v=0,y=10,b=15,w=0,C={},_={},A={},E=[0],x={},S=0;function T(e,t,i){var n,o=0===i,i=i===c.length-1,e=(e=e,r=t,h.legendItemTextBox[r]||(h.legendItemTextBox[r]=h.getTextRect(e.textContent,I.legendItem)),h.legendItemTextBox[r]),r=e.width+b+(!i||h.isLegendRight||h.isLegendInset?g:0),i=e.height+f,s=h.isLegendRight||h.isLegendInset?i:r,a=h.isLegendRight||h.isLegendInset?h.getLegendHeight():h.getLegendWidth();function l(e,t){t||(n=(a-w-s)/2)<y&&(n=(a-s)/2,w=0,S++),x[e]=S,E[S]=h.isLegendInset?10:n,C[e]=w,w+=s}o&&(v=m=S=w=0),p.legend_show&&!h.isLegendToShow(t)?_[t]=A[t]=x[t]=C[t]=0:(_[t]=r,A[t]=i,(!m||m<=r)&&(m=r),(!v||v<=i)&&(v=i),e=h.isLegendRight||h.isLegendInset?v:m,p.legend_equally?(Object.keys(_).forEach(function(e){_[e]=m}),Object.keys(A).forEach(function(e){A[e]=v}),(n=(a-e*c.length)/2)<y?(S=w=0,c.forEach(function(e){l(e)})):l(t,!0)):l(t))}a=P(e=e||{},"withTransition",!0),e=P(e,"withTransitionForTransform",!0),h.isLegendInset&&(S=p.legend_inset_step||c.length,h.updateLegendStep(S)),o=h.isLegendRight?(i=function(e){return m*x[e]},function(e){return E[x[e]]+C[e]}):h.isLegendInset?(i=function(e){return m*x[e]+10},function(e){return E[x[e]]+C[e]}):(i=function(e){return E[x[e]]+C[e]},function(e){return v*x[e]}),u=function(e,t){return i(e,t)+14},r=function(e,t){return o(e,t)+9},n=function(e,t){return i(e,t)},s=function(e,t){return o(e,t)-5},(d=h.legend.selectAll("."+I.legendItem).data(c).enter().append("g").attr("class",function(e){return h.generateClass(I.legendItem,e)}).style("visibility",function(e){return h.isLegendToShow(e)?"visible":"hidden"}).style("cursor","pointer").on("click",function(e){p.legend_item_onclick?p.legend_item_onclick.call(h,e):h.d3.event.altKey?(h.api.hide(),h.api.show(e)):(h.api.toggle(e),h.isTargetToShow(e)?h.api.focus(e):h.api.revert())}).on("mouseover",function(e){h.d3.select(this).classed(I.legendItemFocused,!0),!h.transiting&&h.isTargetToShow(e)&&h.api.focus(e),p.legend_item_onmouseover&&p.legend_item_onmouseover.call(h,e)}).on("mouseout",function(e){h.d3.select(this).classed(I.legendItemFocused,!1),h.api.revert(),p.legend_item_onmouseout&&p.legend_item_onmouseout.call(h,e)})).append("text").text(function(e){return k(p.data_names[e])?p.data_names[e]:e}).each(function(e,t){T(this,e,t)}).style("pointer-events","none").attr("x",h.isLegendRight||h.isLegendInset?u:-200).attr("y",h.isLegendRight||h.isLegendInset?-200:r),d.append("rect").attr("class",I.legendItemEvent).style("fill-opacity",0).attr("x",h.isLegendRight||h.isLegendInset?n:-200).attr("y",h.isLegendRight||h.isLegendInset?-200:s),d.append("rect").attr("class",I.legendItemTile).style("pointer-events","none").style("fill",h.color).attr("x",h.isLegendRight||h.isLegendInset?u:-200).attr("y",h.isLegendRight||h.isLegendInset?-200:o).attr("width",10).attr("height",10),d=h.legend.select("."+I.legendBackground+" rect"),h.isLegendInset&&0<m&&0===d.size()&&(d=h.legend.insert("g","."+I.legendItem).attr("class",I.legendBackground).append("rect")),l=h.legend.selectAll("text").data(c).text(function(e){return k(p.data_names[e])?p.data_names[e]:e}).each(function(e,t){T(this,e,t)}),(a?l.transition():l).attr("x",u).attr("y",r),l=h.legend.selectAll("rect."+I.legendItemEvent).data(c),(a?l.transition():l).attr("width",function(e){return _[e]}).attr("height",function(e){return A[e]}).attr("x",n).attr("y",s),u=h.legend.selectAll("rect."+I.legendItemTile).data(c),(a?u.transition():u).style("fill",h.color).attr("x",i).attr("y",o),d&&(a?d.transition():d).attr("height",h.getLegendHeight()-12).attr("width",m*(S+1)+10),h.legend.selectAll("."+I.legendItem).classed(I.legendItemHidden,function(e){return!h.isTargetToShow(e)}),h.updateLegendItemWidth(m),h.updateLegendItemHeight(v),h.updateLegendStep(S),h.updateSizes(),h.updateScales(),h.updateSvgSize(),h.transformAll(e,t),h.legendHasRendered=!0},e=s,t=u,Object.create?t.prototype=Object.create(e.prototype):((n=function(){}).prototype=e.prototype,t.prototype=new n),t.prototype.constructor=t,u.prototype.init=function(){var e=this.owner,t=e.config,i=e.main;e.axes.x=i.append("g").attr("class",I.axis+" "+I.axisX).attr("clip-path",e.clipPathForXAxis).attr("transform",e.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden"),e.axes.x.append("text").attr("class",I.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),e.axes.y=i.append("g").attr("class",I.axis+" "+I.axisY).attr("clip-path",t.axis_y_inner?"":e.clipPathForYAxis).attr("transform",e.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden"),e.axes.y.append("text").attr("class",I.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=i.append("g").attr("class",I.axis+" "+I.axisY2).attr("transform",e.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden"),e.axes.y2.append("text").attr("class",I.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},u.prototype.getXAxis=function(e,t,i,n,o,r,s){var a=this.owner,l=a.config,o={isCategory:a.isCategorized(),withOuterTick:o,tickMultiline:l.axis_x_tick_multiline,tickWidth:l.axis_x_tick_width,tickTextRotate:s?0:l.axis_x_tick_rotate,withoutTransition:r},s=w(a.d3,o).scale(e).orient(t);return a.isTimeSeries()&&n&&(n=n.map(function(e){return a.parseDate(e)})),s.tickFormat(i).tickValues(n),a.isCategorized()&&(s.tickCentered(l.axis_x_tick_centered),g(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1)),s},u.prototype.updateXAxisTickValues=function(e,t){var i,n=this.owner,o=n.config;return(o.axis_x_tick_fit||o.axis_x_tick_count)&&(i=this.generateTickValues(n.mapTargetsToUniqueXs(e),o.axis_x_tick_count,n.isTimeSeries())),t?t.tickValues(i):(n.xAxis.tickValues(i),n.subXAxis.tickValues(i)),i},u.prototype.getYAxis=function(e,t,i,n,o,r){var s=this.owner,a=s.d3,l=s.config,o=w(a,{withOuterTick:o,withoutTransition:r}).scale(e).orient(t).tickFormat(i);return s.isTimeSeriesY()?o.ticks(a.time[l.axis_y_tick_time_value],l.axis_y_tick_time_interval):o.tickValues(n),o},u.prototype.getId=function(e){var t=this.owner.config;return e in t.data_axes?t.data_axes[e]:"y"},u.prototype.getXAxisTickFormat=function(){var t=this.owner,i=t.config,n=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(e){return e<0?e.toFixed(0):e};return i.axis_x_tick_format&&(d(i.axis_x_tick_format)?n=i.axis_x_tick_format:t.isTimeSeries()&&(n=function(e){return e?t.axisTimeFormat(i.axis_x_tick_format)(e):""})),d(n)?function(e){return n.call(t,e)}:n},u.prototype.getTickValues=function(e,t){return e||(t?t.tickValues():void 0)},u.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},u.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},u.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},u.prototype.getLabelOptionByAxisId=function(e){var t,i=this.owner.config;return"y"===e?t=i.axis_y_label:"y2"===e?t=i.axis_y2_label:"x"===e&&(t=i.axis_x_label),t},u.prototype.getLabelText=function(e){e=this.getLabelOptionByAxisId(e);return h(e)?e:e?e.text:null},u.prototype.setLabelText=function(e,t){var i=this.owner.config,n=this.getLabelOptionByAxisId(e);h(n)?"y"===e?i.axis_y_label=t:"y2"===e?i.axis_y2_label=t:"x"===e&&(i.axis_x_label=t):n&&(n.text=t)},u.prototype.getLabelPosition=function(e,t){e=this.getLabelOptionByAxisId(e),e=e&&"object"==typeof e&&e.position?e.position:t;return{isInner:0<=e.indexOf("inner"),isOuter:0<=e.indexOf("outer"),isLeft:0<=e.indexOf("left"),isCenter:0<=e.indexOf("center"),isRight:0<=e.indexOf("right"),isTop:0<=e.indexOf("top"),isMiddle:0<=e.indexOf("middle"),isBottom:0<=e.indexOf("bottom")}},u.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},u.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},u.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},u.prototype.getLabelPositionById=function(e){return"y2"===e?this.getY2AxisLabelPosition():"y"===e?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},u.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},u.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},u.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},u.prototype.xForAxisLabel=function(e,t){var i=this.owner;return e?t.isLeft?0:t.isCenter?i.width/2:i.width:t.isBottom?-i.height:t.isMiddle?-i.height/2:0},u.prototype.dxForAxisLabel=function(e,t){return e?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"},u.prototype.textAnchorForAxisLabel=function(e,t){return e?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"},u.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},u.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},u.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},u.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},u.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},u.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},u.prototype.dyForXAxisLabel=function(){var e=this.owner.config,t=this.getXAxisLabelPosition();return e.axis_rotated?t.isInner?"1.2em":-25-this.getMaxTickWidth("x"):t.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},u.prototype.dyForYAxisLabel=function(){var e=this.owner,t=this.getYAxisLabelPosition();return e.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(e.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},u.prototype.dyForY2AxisLabel=function(){var e=this.owner,t=this.getY2AxisLabelPosition();return e.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(e.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},u.prototype.textAnchorForXAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(!e.config.axis_rotated,this.getXAxisLabelPosition())},u.prototype.textAnchorForYAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getYAxisLabelPosition())},u.prototype.textAnchorForY2AxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getY2AxisLabelPosition())},u.prototype.getMaxTickWidth=function(e,t){var i,n,o,r=this.owner,s=r.config,a=0;return t&&r.currentMaxTickWidths[e]||(r.svg&&(t=r.filterTargetsToShow(r.data.targets),"y"===e?(i=r.y.copy().domain(r.getYDomain(t,"y")),n=this.getYAxis(i,r.yOrient,s.axis_y_tick_format,r.yAxisTickValues,!1,!0)):"y2"===e?(i=r.y2.copy().domain(r.getYDomain(t,"y2")),n=this.getYAxis(i,r.y2Orient,s.axis_y2_tick_format,r.y2AxisTickValues,!1,!0)):(i=r.x.copy().domain(r.getXDomain(t)),n=this.getXAxis(i,r.xOrient,r.xAxisTickFormat,r.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(t,n)),(o=r.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(n).each(function(){r.d3.select(this).selectAll("text").each(function(){var e=this.getBoundingClientRect();a<e.width&&(a=e.width)}),o.remove()})),r.currentMaxTickWidths[e]=a<=0?r.currentMaxTickWidths[e]:a),r.currentMaxTickWidths[e]},u.prototype.updateLabels=function(e){var t=this.owner,i=t.main.select("."+I.axisX+" ."+I.axisXLabel),n=t.main.select("."+I.axisY+" ."+I.axisYLabel),t=t.main.select("."+I.axisY2+" ."+I.axisY2Label);(e?i.transition():i).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(e?n.transition():n).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(e?t.transition():t).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},u.prototype.getPadding=function(e,t,i,n){return v(e[t])?"ratio"===e.unit?e[t]*n:this.convertPixelsToAxisPadding(e[t],n):i},u.prototype.convertPixelsToAxisPadding=function(e,t){var i=this.owner;return t*(e/(i.config.axis_rotated?i.width:i.height))},u.prototype.generateTickValues=function(e,t,i){var n,o,r,s,a,l=e;if(t)if(1===(t=d(t)?t():t))l=[e[0]];else if(2===t)l=[e[0],e[e.length-1]];else if(2<t){for(n=e[0],r=((e=e[e.length-1])-n)/(1+(o=t-2)),l=[n],s=0;s<o;s++)a=+n+r*(s+1),l.push(i?new Date(a):a);l.push(e)}return l=i?l:l.sort(function(e,t){return e-t})},u.prototype.generateTransitions=function(e){var t=this.owner.axes;return{axisX:e?t.x.transition().duration(e):t.x,axisY:e?t.y.transition().duration(e):t.y,axisY2:e?t.y2.transition().duration(e):t.y2,axisSubX:e?t.subx.transition().duration(e):t.subx}},u.prototype.redraw=function(e,t){var i=this.owner;i.axes.x.style("opacity",t?0:1),i.axes.y.style("opacity",t?0:1),i.axes.y2.style("opacity",t?0:1),i.axes.subx.style("opacity",t?0:1),e.axisX.call(i.xAxis),e.axisY.call(i.yAxis),e.axisY2.call(i.y2Axis),e.axisSubX.call(i.subXAxis)},a.getClipPath=function(e){return"url("+(0<=r.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+e+")"},a.appendClip=function(e,t){return e.append("clipPath").attr("id",t).append("rect")},a.getAxisClipX=function(e){var t=Math.max(30,this.margin.left);return e?-(1+t):-(t-1)},a.getAxisClipY=function(e){return e?-20:-this.margin.top},a.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},a.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},a.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},a.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},a.getAxisClipWidth=function(e){var t=Math.max(30,this.margin.left),i=Math.max(30,this.margin.right);return e?this.width+2+t+i:this.margin.left+20},a.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},a.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},a.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},a.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},a.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},a.initPie=function(){var e=this.d3,t=this.config;this.pie=e.layout.pie().value(function(e){return e.values.reduce(function(e,t){return e+t.value},0)}),t.data_order||this.pie.sort(null)},a.updateRadius=function(){var e=this,t=e.config,t=t.gauge_width||t.donut_width;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2,e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=t?(e.radius-t)/e.radius:.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0},a.updateArc=function(){this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded(),this.svgArcExpandedSub=this.getSvgArcExpanded(.98)},a.updateAngle=function(t){var e,i=this.config,n=!1,o=0,r=i.gauge_min,i=i.gauge_max;return this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(e){n||e.data.id!==t.data.id||(n=!0,(t=e).index=o),o++}),isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=t.startAngle),this.isGaugeType(t.data)&&(e=Math.PI/(i-r),i=t.value<r?0:t.value<i?t.value-r:i-r,t.startAngle=Math.PI/2*-1,t.endAngle=t.startAngle+e*i),n?t:null},a.getSvgArc=function(){function e(e,t){return t?n(e):(t=i.updateAngle(e))?n(t):"M 0 0"}var i=this,n=i.d3.svg.arc().outerRadius(i.radius).innerRadius(i.innerRadius);return e.centroid=n.centroid,e},a.getSvgArcExpanded=function(e){var t=this,i=t.d3.svg.arc().outerRadius(t.radiusExpanded*(e||1)).innerRadius(t.innerRadius);return function(e){e=t.updateAngle(e);return e?i(e):"M 0 0"}},a.getArc=function(e,t,i){return i||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},a.transformForArcLabel=function(e){var t,i,e=this.updateAngle(e),n="";return e&&!this.hasType("gauge")&&(e=this.svgArc.centroid(e),i=isNaN(e[0])?0:e[0],e=isNaN(e[1])?0:e[1],t=Math.sqrt(i*i+e*e),n="translate("+i*(i=this.radius&&t?(.375<36/this.radius?1.175-36/this.radius:.8)*this.radius/t:0)+","+e*i+")"),n},a.getArcRatio=function(e){var t=this.hasType("gauge")?Math.PI:2*Math.PI;return e?(e.endAngle-e.startAngle)/t:null},a.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getArcRatio(e),index:e.index})},a.textForArcLabel=function(e){var t,i,n;return this.shouldShowArcLabel()?(t=(i=this.updateAngle(e))?i.value:null,i=this.getArcRatio(i),e=e.data.id,this.hasType("gauge")||this.meetsArcLabelThreshold(i)?(n=this.getArcLabelFormat())?n(t,i,e):this.defaultArcValueFormat(t,i):""):""},a.expandArc=function(e){var t,i=this;i.transiting?t=r.setInterval(function(){i.transiting||(r.clearInterval(t),0<i.legend.selectAll(".c3-legend-item-focused").size()&&i.expandArc(e))},10):(e=i.mapToTargetIds(e),i.svg.selectAll(i.selectorTargets(e,"."+I.chartArc)).each(function(e){i.shouldExpand(e.data.id)&&i.d3.select(this).selectAll("path").transition().duration(50).attr("d",i.svgArcExpanded).transition().duration(100).attr("d",i.svgArcExpandedSub).each(function(e){i.isDonutType(e.data)})}))},a.unexpandArc=function(e){this.transiting||(e=this.mapToTargetIds(e),this.svg.selectAll(this.selectorTargets(e,"."+I.chartArc)).selectAll("path").transition().duration(50).attr("d",this.svgArc),this.svg.selectAll("."+I.arc).style("opacity",1))},a.shouldExpand=function(e){var t=this.config;return this.isDonutType(e)&&t.donut_expand||this.isGaugeType(e)&&t.gauge_expand||this.isPieType(e)&&t.pie_expand},a.shouldShowArcLabel=function(){var e=this.config,t=!0;return this.hasType("donut")?t=e.donut_label_show:this.hasType("pie")&&(t=e.pie_label_show),t},a.meetsArcLabelThreshold=function(e){var t=this.config;return(this.hasType("donut")?t.donut_label_threshold:t.pie_label_threshold)<=e},a.getArcLabelFormat=function(){var e=this.config,t=e.pie_label_format;return this.hasType("gauge")?t=e.gauge_label_format:this.hasType("donut")&&(t=e.donut_label_format),t},a.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},a.updateTargetsForArc=function(e){var t=this.main,i=this.classChartArc.bind(this),n=this.classArcs.bind(this),o=this.classFocus.bind(this),t=t.select("."+I.chartArcs).selectAll("."+I.chartArc).data(this.pie(e)).attr("class",function(e){return i(e)+o(e.data)}).enter().append("g").attr("class",i);t.append("g").attr("class",n),t.append("text").attr("dy",this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},a.initArc=function(){this.arcs=this.main.select("."+I.chart).append("g").attr("class",I.chartArcs).attr("transform",this.getTranslate("arc")),this.arcs.append("text").attr("class",I.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())},a.redrawArc=function(e,t,i){var n=this,o=n.d3,r=n.config,s=n.main,a=s.selectAll("."+I.arcs).selectAll("."+I.arc).data(n.arcData.bind(n));a.enter().append("path").attr("class",n.classArc.bind(n)).style("fill",function(e){return n.color(e.data)}).style("cursor",function(e){return r.interaction_enabled&&r.data_selection_isselectable(e)?"pointer":null}).style("opacity",0).each(function(e){n.isGaugeType(e.data)&&(e.startAngle=e.endAngle=Math.PI/2*-1),this._current=e}),a.attr("transform",function(e){return!n.isGaugeType(e.data)&&i?"scale(0)":""}).style("opacity",function(e){return e===this._current?0:1}).on("mouseover",r.interaction_enabled?function(e){var t;n.transiting||(e=n.updateAngle(e),t=n.convertToArcData(e),n.expandArc(e.data.id),n.api.focus(e.data.id),n.toggleFocusLegend(e.data.id,!0),n.config.data_onmouseover(t,this))}:null).on("mousemove",r.interaction_enabled?function(e){e=n.updateAngle(e),e=n.convertToArcData(e);n.showTooltip([e],this)}:null).on("mouseout",r.interaction_enabled?function(e){var t;n.transiting||(e=n.updateAngle(e),t=n.convertToArcData(e),n.unexpandArc(e.data.id),n.api.revert(),n.revertLegend(),n.hideTooltip(),n.config.data_onmouseout(t,this))}:null).on("click",r.interaction_enabled?function(e,t){e=n.updateAngle(e),e=n.convertToArcData(e);n.toggleShape&&n.toggleShape(this,e,t),n.config.data_onclick.call(n.api,e,this)}:null).each(function(){n.transiting=!0}).transition().duration(e).attrTween("d",function(t){var i,e=n.updateAngle(t);return e?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),i=o.interpolate(this._current,e),this._current=i(0),function(e){e=i(e);return e.data=t.data,n.getArc(e,!0)}):function(){return"M 0 0"}}).attr("transform",i?"scale(1)":"").style("fill",function(e){return n.levelColor?n.levelColor(e.data.values[0].value):n.color(e.data.id)}).style("opacity",1).call(n.endall,function(){n.transiting=!1}),a.exit().transition().duration(t).style("opacity",0).remove(),s.selectAll("."+I.chartArc).select("text").style("opacity",0).attr("class",function(e){return n.isGaugeType(e.data)?I.gaugeValue:""}).text(n.textForArcLabel.bind(n)).attr("transform",n.transformForArcLabel.bind(n)).style("font-size",function(e){return n.isGaugeType(e.data)?Math.round(n.radius/5)+"px":""}).transition().duration(e).style("opacity",function(e){return n.isTargetToShow(e.data.id)&&n.isArcType(e.data)?1:0}),s.select("."+I.chartArcsTitle).style("opacity",n.hasType("donut")||n.hasType("gauge")?1:0),n.hasType("gauge")&&(n.arcs.select("."+I.chartArcsBackground).attr("d",function(){var e={data:[{value:r.gauge_max}],startAngle:Math.PI/2*-1,endAngle:Math.PI/2};return n.getArc(e,!0,!0)}),n.arcs.select("."+I.chartArcsGaugeUnit).attr("dy",".75em").text(r.gauge_label_show?r.gauge_units:""),n.arcs.select("."+I.chartArcsGaugeMin).attr("dx",-1*(n.innerRadius+(n.radius-n.innerRadius)/2)+"px").attr("dy","1.2em").text(r.gauge_label_show?r.gauge_min:""),n.arcs.select("."+I.chartArcsGaugeMax).attr("dx",n.innerRadius+(n.radius-n.innerRadius)/2+"px").attr("dy","1.2em").text(r.gauge_label_show?r.gauge_max:""))},a.initGauge=function(){var e=this.arcs;this.hasType("gauge")&&(e.append("path").attr("class",I.chartArcsBackground),e.append("text").attr("class",I.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",I.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",I.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},a.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},a.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",I.regions)},a.updateRegion=function(e){var t=this.config;this.region.style("visibility",this.hasArcType()?"hidden":"visible"),this.mainRegion=this.main.select("."+I.regions).selectAll("."+I.region).data(t.regions),this.mainRegion.enter().append("g").attr("class",this.classRegion.bind(this)).append("rect").style("fill-opacity",0),this.mainRegion.exit().transition().duration(e).style("opacity",0).remove()},a.redrawRegion=function(e){var t=this.mainRegion.selectAll("rect"),i=this.regionX.bind(this),n=this.regionY.bind(this),o=this.regionWidth.bind(this),r=this.regionHeight.bind(this);return[(e?t.transition():t).attr("x",i).attr("y",n).attr("width",o).attr("height",r).style("fill-opacity",function(e){return v(e.opacity)?e.opacity:.1})]},a.regionX=function(e){var t=this.config,i="y"===e.axis?this.y:this.y2,i="y"===e.axis||"y2"===e.axis?t.axis_rotated&&"start"in e?i(e.start):0:!t.axis_rotated&&"start"in e?this.x(this.isTimeSeries()?this.parseDate(e.start):e.start):0;return i},a.regionY=function(e){var t=this.config,i="y"===e.axis?this.y:this.y2,i="y"===e.axis||"y2"===e.axis?!t.axis_rotated&&"end"in e?i(e.end):0:t.axis_rotated&&"start"in e?this.x(this.isTimeSeries()?this.parseDate(e.start):e.start):0;return i},a.regionWidth=function(e){var t=this,i=t.config,n=t.regionX(e),o="y"===e.axis?t.y:t.y2,o="y"===e.axis||"y2"===e.axis?i.axis_rotated&&"end"in e?o(e.end):t.width:!i.axis_rotated&&"end"in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.width;return o<n?0:o-n},a.regionHeight=function(e){var t=this,i=t.config,n=this.regionY(e),o="y"===e.axis?t.y:t.y2,o="y"===e.axis||"y2"===e.axis?!i.axis_rotated&&"start"in e?o(e.start):t.height:i.axis_rotated&&"end"in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.height;return o<n?0:o-n},a.isRegionOnX=function(e){return!e.axis||"x"===e.axis},a.drag=function(e){var t,i,n,d,h,p,f,g=this,o=g.config,r=g.main,m=g.d3;g.hasArcType()||!o.data_selection_enabled||o.zoom_enabled&&!g.zoom.altDomain||o.data_selection_multiple&&(t=g.dragStart[0],i=g.dragStart[1],n=e[0],e=e[1],d=Math.min(t,n),h=Math.max(t,n),p=o.data_selection_grouped?g.margin.top:Math.min(i,e),f=o.data_selection_grouped?g.height:Math.max(i,e),r.select("."+I.dragarea).attr("x",d).attr("y",p).attr("width",h-d).attr("height",f-p),r.selectAll("."+I.shapes).selectAll("."+I.shape).filter(function(e){return o.data_selection_isselectable(e)}).each(function(e,t){var i,n,o,r,s,a=m.select(this),l=a.classed(I.SELECTED),c=a.classed(I.INCLUDED),u=!1;if(a.classed(I.circle))i=+a.attr("cx"),n=+a.attr("cy"),r=g.togglePoint,u=d<i&&i<h&&p<n&&n<f;else{if(!a.classed(I.bar))return;i=(s=b(this)).x,n=s.y,o=s.width,s=s.height,r=g.togglePath,u=!(h<i||i+o<d||f<n||n+s<p)}u^c&&(a.classed(I.INCLUDED,!c),a.classed(I.SELECTED,!l),r.call(g,!l,a,e,t))}))},a.dragstart=function(e){var t=this.config;this.hasArcType()||t.data_selection_enabled&&(this.dragStart=e,this.main.select("."+I.chart).append("rect").attr("class",I.dragarea).style("opacity",.1),this.dragging=!0)},a.dragend=function(){var e=this.config;this.hasArcType()||e.data_selection_enabled&&(this.main.select("."+I.dragarea).transition().duration(100).style("opacity",0).remove(),this.main.selectAll("."+I.shape).classed(I.INCLUDED,!1),this.dragging=!1)},a.selectPoint=function(e,t,i){var n=this,o=n.config,r=(o.axis_rotated?n.circleY:n.circleX).bind(n),s=(o.axis_rotated?n.circleX:n.circleY).bind(n),a=n.pointSelectR.bind(n);o.data_onselected.call(n.api,t,e.node()),n.main.select("."+I.selectedCircles+n.getTargetSelectorSuffix(t.id)).selectAll("."+I.selectedCircle+"-"+i).data([t]).enter().append("circle").attr("class",function(){return n.generateClass(I.selectedCircle,i)}).attr("cx",r).attr("cy",s).attr("stroke",function(){return n.color(t)}).attr("r",function(e){return 1.4*n.pointSelectR(e)}).transition().duration(100).attr("r",a)},a.unselectPoint=function(e,t,i){this.config.data_onunselected(t,e.node()),this.main.select("."+I.selectedCircles+this.getTargetSelectorSuffix(t.id)).selectAll("."+I.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},a.togglePoint=function(e,t,i,n){e?this.selectPoint(t,i,n):this.unselectPoint(t,i,n)},a.selectPath=function(e,t){var i=this;i.config.data_onselected.call(i,t,e.node()),e.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(t)).brighter(.75)})},a.unselectPath=function(e,t){var i=this;i.config.data_onunselected.call(i,t,e.node()),e.transition().duration(100).style("fill",function(){return i.color(t)})},a.togglePath=function(e,t,i,n){e?this.selectPath(t,i,n):this.unselectPath(t,i,n)},a.getToggle=function(e,t){var i;return"circle"===e.nodeName?i=this.isStepType(t)?function(){}:this.togglePoint:"path"===e.nodeName&&(i=this.togglePath),i},a.toggleShape=function(e,t,i){var n=this.d3,o=this.config,r=n.select(e),s=r.classed(I.SELECTED),a=this.getToggle(e,t).bind(this);o.data_selection_enabled&&o.data_selection_isselectable(t)&&(o.data_selection_multiple||this.main.selectAll("."+I.shapes+(o.data_selection_grouped?this.getTargetSelectorSuffix(t.id):"")).selectAll("."+I.shape).each(function(e,t){var i=n.select(this);i.classed(I.SELECTED)&&a(!1,i.classed(I.SELECTED,!1),e,t)}),r.classed(I.SELECTED,!s),a(!s,r,t,i))},a.initBrush=function(){var t=this,e=t.d3;t.brush=e.svg.brush().on("brush",function(){t.redrawForBrush()}),t.brush.update=function(){return t.context&&t.context.select("."+I.brush).call(this),this},t.brush.scale=function(e){return t.config.axis_rotated?this.y(e):this.x(e)}},a.initSubchart=function(){var e=this,t=e.config,i=e.context=e.svg.append("g").attr("transform",e.getTranslate("context"));i.style("visibility",t.subchart_show?"visible":"hidden"),i.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",I.chart),i.select("."+I.chart).append("g").attr("class",I.chartBars),i.select("."+I.chart).append("g").attr("class",I.chartLines),i.append("g").attr("clip-path",e.clipPath).attr("class",I.brush).call(e.brush),e.axes.subx=i.append("g").attr("class",I.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":e.clipPathForXAxis)},a.updateTargetsForSubchart=function(e){var t=this,i=t.context,n=t.config,o=t.classChartBar.bind(t),r=t.classBars.bind(t),s=t.classChartLine.bind(t),a=t.classLines.bind(t),l=t.classAreas.bind(t);n.subchart_show&&(i.select("."+I.chartBars).selectAll("."+I.chartBar).data(e).attr("class",o).enter().append("g").style("opacity",0).attr("class",o).append("g").attr("class",r),(o=i.select("."+I.chartLines).selectAll("."+I.chartLine).data(e).attr("class",s).enter().append("g").style("opacity",0).attr("class",s)).append("g").attr("class",a),o.append("g").attr("class",l),i.selectAll("."+I.brush+" rect").attr(n.axis_rotated?"width":"height",n.axis_rotated?t.width2:t.height2))},a.updateBarForSubchart=function(e){var t=this;t.contextBar=t.context.selectAll("."+I.bars).selectAll("."+I.bar).data(t.barData.bind(t)),t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color),t.contextBar.style("opacity",t.initialOpacity.bind(t)),t.contextBar.exit().transition().duration(e).style("opacity",0).remove()},a.redrawBarForSubchart=function(e,t,i){(t?this.contextBar.transition().duration(i):this.contextBar).attr("d",e).style("opacity",1)},a.updateLineForSubchart=function(e){var t=this;t.contextLine=t.context.selectAll("."+I.lines).selectAll("."+I.line).data(t.lineData.bind(t)),t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.contextLine.style("opacity",t.initialOpacity.bind(t)),t.contextLine.exit().transition().duration(e).style("opacity",0).remove()},a.redrawLineForSubchart=function(e,t,i){(t?this.contextLine.transition().duration(i):this.contextLine).attr("d",e).style("opacity",1)},a.updateAreaForSubchart=function(e){var t=this,i=t.d3;t.contextArea=t.context.selectAll("."+I.areas).selectAll("."+I.area).data(t.lineData.bind(t)),t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+i.select(this).style("opacity"),0}),t.contextArea.style("opacity",0),t.contextArea.exit().transition().duration(e).style("opacity",0).remove()},a.redrawAreaForSubchart=function(e,t,i){(t?this.contextArea.transition().duration(i):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},a.redrawSubchart=function(e,t,i,n,o,r,s){var a=this,l=a.d3,c=a.config;a.context.style("visibility",c.subchart_show?"visible":"hidden"),c.subchart_show&&(l.event&&"zoom"===l.event.type&&a.brush.extent(a.x.orgDomain()).update(),e&&(a.brush.empty()||a.brush.extent(a.x.orgDomain()).update(),c=a.generateDrawArea(o,!0),l=a.generateDrawBar(r,!0),e=a.generateDrawLine(s,!0),a.updateBarForSubchart(i),a.updateLineForSubchart(i),a.updateAreaForSubchart(i),a.redrawBarForSubchart(l,i,i),a.redrawLineForSubchart(e,i,i),a.redrawAreaForSubchart(c,i,i)))},a.redrawForBrush=function(){var e=this.x;this.redraw({withTransition:!1,withY:this.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),this.config.subchart_onbrush.call(this.api,e.orgDomain())},a.transformContext=function(e,t){var i;t&&t.axisSubX?i=t.axisSubX:(i=this.context.select("."+I.axisX),e&&(i=i.transition())),this.context.attr("transform",this.getTranslate("context")),i.attr("transform",this.getTranslate("subx"))},a.getDefaultExtent=function(){var e=this.config,e=d(e.axis_x_extent)?e.axis_x_extent(this.getXDomain(this.data.targets)):e.axis_x_extent;return e=this.isTimeSeries()?[this.parseDate(e[0]),this.parseDate(e[1])]:e},a.initZoom=function(){var t,i=this,n=i.d3,o=i.config;i.zoom=n.behavior.zoom().on("zoomstart",function(){t=n.event.sourceEvent,i.zoom.altDomain=n.event.sourceEvent.altKey?i.x.orgDomain():null,o.zoom_onzoomstart.call(i.api,n.event.sourceEvent)}).on("zoom",function(){i.redrawForZoom.call(i)}).on("zoomend",function(){var e=n.event.sourceEvent;e&&t.clientX===e.clientX&&t.clientY===e.clientY||(i.redrawEventRect(),i.updateZoom(),o.zoom_onzoomend.call(i.api,i.x.orgDomain()))}),i.zoom.scale=function(e){return o.axis_rotated?this.y(e):this.x(e)},i.zoom.orgScaleExtent=function(){var e=o.zoom_extent||[1,10];return[e[0],Math.max(i.getMaxDataCount()/e[1],e[1])]},i.zoom.updateScaleExtent=function(){var e=O(i.x.orgDomain())/O(i.orgXDomain),t=this.orgScaleExtent();return this.scaleExtent([t[0]*e,t[1]*e]),this}},a.updateZoom=function(){var e=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+I.zoomRect).call(e).on("dblclick.zoom",null),this.main.selectAll("."+I.eventRect).call(e).on("dblclick.zoom",null)},a.redrawForZoom=function(){var e=this,t=e.d3,i=e.config,n=e.zoom,o=e.x;if(i.zoom_enabled&&0!==e.filterTargetsToShow(e.data.targets).length){if("mousemove"===t.event.sourceEvent.type&&n.altDomain)return o.domain(n.altDomain),void n.scale(o).updateScaleExtent();e.isCategorized()&&o.orgDomain()[0]===e.orgXDomain[0]&&o.domain([e.orgXDomain[0]-1e-10,o.orgDomain()[1]]),e.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===t.event.sourceEvent.type&&(e.cancelClick=!0),i.zoom_onzoom.call(e.api,o.orgDomain())}},a.generateColor=function(){var e=this.config,t=this.d3,n=e.data_colors,o=y(e.color_pattern)?e.color_pattern:t.scale.category10().range(),r=e.data_color,s=[];return function(e){var t,i=e.id||e.data&&e.data.id||e;return n[i]instanceof Function?t=n[i](e):n[i]?t=n[i]:(s.indexOf(i)<0&&s.push(i),t=o[s.indexOf(i)%o.length],n[i]=t),r instanceof Function?r(t,e):t}},a.generateLevelColor=function(){var e=this.config,n=e.color_pattern,t=e.color_threshold,o="value"===t.unit,r=t.values&&t.values.length?t.values:[],s=t.max||100;return y(e.color_threshold)?function(e){for(var t=n[n.length-1],i=0;i<r.length;i++)if((o?e:100*e/s)<r[i]){t=n[i];break}return t}:null},a.getYFormat=function(e){var n=this,o=e&&!n.hasType("gauge")?n.defaultArcValueFormat:n.yFormat,r=e&&!n.hasType("gauge")?n.defaultArcValueFormat:n.y2Format;return function(e,t,i){return("y2"===n.axis.getId(i)?r:o).call(n,e,t)}},a.yFormat=function(e){var t=this.config;return(t.axis_y_tick_format||this.defaultValueFormat)(e)},a.y2Format=function(e){var t=this.config;return(t.axis_y2_tick_format||this.defaultValueFormat)(e)},a.defaultValueFormat=function(e){return v(e)?+e:""},a.defaultArcValueFormat=function(e,t){return(100*t).toFixed(1)+"%"},a.dataLabelFormat=function(e){function t(e){return v(e)?+e:""}var i=this.config.data_labels,i="function"==typeof i.format?i.format:"object"==typeof i.format?i.format[e]?!0===i.format[e]?t:i.format[e]:function(){return""}:t;return i},a.hasCaches=function(e){for(var t=0;t<e.length;t++)if(!(e[t]in this.cache))return!1;return!0},a.addCache=function(e,t){this.cache[e]=this.cloneTarget(t)},a.getCaches=function(e){for(var t=[],i=0;i<e.length;i++)e[i]in this.cache&&t.push(this.cloneTarget(this.cache[e[i]]));return t};var z,I=a.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},v=(a.generateClass=function(e,t){return" "+e+" "+e+this.getTargetSelectorSuffix(t)},a.classText=function(e){return this.generateClass(I.text,e.index)},a.classTexts=function(e){return this.generateClass(I.texts,e.id)},a.classShape=function(e){return this.generateClass(I.shape,e.index)},a.classShapes=function(e){return this.generateClass(I.shapes,e.id)},a.classLine=function(e){return this.classShape(e)+this.generateClass(I.line,e.id)},a.classLines=function(e){return this.classShapes(e)+this.generateClass(I.lines,e.id)},a.classCircle=function(e){return this.classShape(e)+this.generateClass(I.circle,e.index)},a.classCircles=function(e){return this.classShapes(e)+this.generateClass(I.circles,e.id)},a.classBar=function(e){return this.classShape(e)+this.generateClass(I.bar,e.index)},a.classBars=function(e){return this.classShapes(e)+this.generateClass(I.bars,e.id)},a.classArc=function(e){return this.classShape(e.data)+this.generateClass(I.arc,e.data.id)},a.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(I.arcs,e.data.id)},a.classArea=function(e){return this.classShape(e)+this.generateClass(I.area,e.id)},a.classAreas=function(e){return this.classShapes(e)+this.generateClass(I.areas,e.id)},a.classRegion=function(e,t){return this.generateClass(I.region,t)+" "+("class"in e?e.class:"")},a.classEvent=function(e){return this.generateClass(I.eventRect,e.index)},a.classTarget=function(e){var t=this.config.data_classes[e],i="";return t&&(i=" "+I.target+"-"+t),this.generateClass(I.target,e)+i},a.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},a.classFocused=function(e){return" "+(0<=this.focusedTargetIds.indexOf(e.id)?I.focused:"")},a.classDefocused=function(e){return" "+(0<=this.defocusedTargetIds.indexOf(e.id)?I.defocused:"")},a.classChartText=function(e){return I.chartText+this.classTarget(e.id)},a.classChartLine=function(e){return I.chartLine+this.classTarget(e.id)},a.classChartBar=function(e){return I.chartBar+this.classTarget(e.id)},a.classChartArc=function(e){return I.chartArc+this.classTarget(e.data.id)},a.getTargetSelectorSuffix=function(e){return e||0===e?("-"+e).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},a.selectorTarget=function(e,t){return(t||"")+"."+I.target+this.getTargetSelectorSuffix(e)},a.selectorTargets=function(e,t){var i=this;return(e=e||[]).length?e.map(function(e){return i.selectorTarget(e,t)}):null},a.selectorLegend=function(e){return"."+I.legendItem+this.getTargetSelectorSuffix(e)},a.selectorLegends=function(e){var t=this;return e&&e.length?e.map(function(e){return t.selectorLegend(e)}):null},a.isValue=function(e){return e||0===e}),d=a.isFunction=function(e){return"function"==typeof e},h=a.isString=function(e){return"string"==typeof e},C=a.isUndefined=function(e){return void 0===e},k=a.isDefined=function(e){return void 0!==e},p=a.ceil10=function(e){return 10*Math.ceil(e/10)},f=a.asHalfPixel=function(e){return Math.ceil(e)+.5},O=a.diffDomain=function(e){return e[1]-e[0]},g=a.isEmpty=function(e){return!e||h(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length},y=a.notEmpty=function(e){return 0<Object.keys(e).length},P=a.getOption=function(e,t,i){return k(e[t])?e[t]:i},m=a.hasValue=function(t,i){var n=!1;return Object.keys(t).forEach(function(e){t[e]===i&&(n=!0)}),n},b=a.getPathBox=function(e){var t=e.getBoundingClientRect(),e=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)];return{x:e[0].x,y:Math.min(e[0].y,e[1].y),width:t.width,height:t.height}};function w(O,F){var L,t,M,N,$=O.scale.linear(),I="bottom",P=null,G=0,i=!0;function B(e,t){e.attr("transform",function(e){return"translate("+Math.ceil(t(e)+G)+", 0)"})}function W(e,t){e.attr("transform",function(e){return"translate(0,"+Math.ceil(t(e))+")"})}function H(e){e=t?t(e):e;return void 0!==e?e:""}function V(e){return F.withoutTransition?e:O.transition(e)}function j(e){e.each(function(){var e,t,i,n,o=j.g=O.select(this),r=this.__chart__||$,a=this.__chart__=(c=$.copy(),F.isCategory&&(s=$.domain(),c.domain([s[0],s[1]-1])),c),l=P||function(e){var t,i,n=[];if(e.ticks)return e.ticks.apply(e,M);for(i=e.domain(),t=Math.ceil(i[0]);t<i[1];t++)n.push(t);return 0<n.length&&0<n[0]&&n.unshift(n[0]-(n[1]-n[0])),n}(a),s=o.selectAll(".tick").data(l,a),c=s.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),u=s.exit().remove(),d=V(s).style("opacity",1),h=$.rangeExtent?$.rangeExtent():(p=$.range(),n=p[0],p=p[p.length-1],n<p?[n,p]:[p,n]),p=o.selectAll(".domain").data([0]),f=(p.enter().append("path").attr("class","domain"),V(p)),g=(c.append("line"),c.append("text"),c.select("line")),m=d.select("line"),v=c.select("text"),y=d.select("text");F.isCategory?(G=Math.ceil((a(1)-a(0))/2),t=N?0:G,i=N?G:0):G=t=0;var b,w,C=function(e){if(z)return z;var n={h:11.5,w:5.5};return e.select("text").text(H).each(function(e){var t=this.getBoundingClientRect(),e=H(e),i=t.height,t=e?t.width/e.length:void 0;i&&t&&(n.h=i,n.w=t)}).text(""),z=n}(o.select(".tick")),_=[],A=Math.max(6,0)+3,E="left"===I||"right"===I;function x(e,o){var r,s,e=H(e);return"[object Array]"===Object.prototype.toString.call(e)?e:((!o||o<=0)&&(o=E?95:F.isCategory?Math.ceil(a(l[1])-a(l[0]))-12:110),function e(t,i){r=void 0;for(var n=1;n<i.length;n++)if(" "===i.charAt(n)&&(r=n),s=i.substr(0,n+1),s=C.w*s.length,o<s)return e(t.concat(i.substr(0,r||n)),i.slice(r?r+1:n));return t.concat(i)}([],e+""))}function S(e,t){var i=C.h;return i=0===t?"left"===I||"right"===I?-((_[e.index]-1)*(C.h/2)-3):".71em":i}(w=(b=s.select("text")).selectAll("tspan").data(function(e,t){e=F.tickMultiline?x(e,F.tickWidth):[].concat(H(e));return _[t]=e.length,e.map(function(e){return{index:t,splitted:e}})})).enter().append("tspan"),w.exit().remove(),w.text(function(e){return e.splitted});var T,k,D,R=F.tickTextRotate;switch(I){case"bottom":e=B,g.attr("y2",6),v.attr("y",A),m.attr("x1",t).attr("x2",t).attr("y2",function(e){return e=$(e)+(N?0:G),h[0]<e&&e<h[1]?6:0}),y.attr("x",0).attr("y",(T=R)?11.5-T/15*2.5*(0<T?1:-1):A).style("text-anchor",(T=R)?0<T?"start":"end":"middle").attr("transform",(T=R)?"rotate("+T+")":""),w.attr("x",0).attr("dy",S).attr("dx",(T=R)?8*Math.sin(Math.PI*(T/180)):0),f.attr("d","M"+h[0]+","+L+"V0H"+h[1]+"V"+L);break;case"top":e=B,g.attr("y2",-6),v.attr("y",-A),m.attr("x2",0).attr("y2",-6),y.attr("x",0).attr("y",-A),b.style("text-anchor","middle"),w.attr("x",0).attr("dy","0em"),f.attr("d","M"+h[0]+","+-L+"V0H"+h[1]+"V"+-L);break;case"left":e=W,g.attr("x2",-6),v.attr("x",-A),m.attr("x2",-6).attr("y1",i).attr("y2",i),y.attr("x",-A).attr("y",G),b.style("text-anchor","end"),w.attr("x",-A).attr("dy",S),f.attr("d","M"+-L+","+h[0]+"H0V"+h[1]+"H"+-L);break;case"right":e=W,g.attr("x2",6),v.attr("x",A),m.attr("x2",6).attr("y2",0),y.attr("x",A).attr("y",0),b.style("text-anchor","start"),w.attr("x",A).attr("dy",S),f.attr("d","M"+L+","+h[0]+"H0V"+h[1]+"H"+L)}a.rangeBand?(D=(k=a).rangeBand()/2,r=a=function(e){return k(e)+D}):r.rangeBand?r=a:u.call(e,a),c.call(e,r),d.call(e,a)})}return L=(F=F||{}).withOuterTick?6:0,j.scale=function(e){return arguments.length?($=e,j):$},j.orient=function(e){return arguments.length?(I=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom",j):I},j.tickFormat=function(e){return arguments.length?(t=e,j):t},j.tickCentered=function(e){return arguments.length?(N=e,j):N},j.tickOffset=function(){return G},j.tickInterval=function(){var e=F.isCategory?2*G:(j.g.select("path.domain").node().getTotalLength()-2*L)/j.g.selectAll("line").size();return e===1/0?0:e},j.ticks=function(){return arguments.length?(M=arguments,j):M},j.tickCulling=function(e){return arguments.length?(i=e,j):i},j.tickValues=function(e){if("function"==typeof e)P=function(){return e($.domain())};else{if(!arguments.length)return P;P=e}return j},j}i.focus=function(t){var e,i=this.internal;t=i.mapToTargetIds(t),e=i.svg.selectAll(i.selectorTargets(t.filter(i.isTargetToShow,i))),this.revert(),this.defocus(),e.classed(I.focused,!0).classed(I.defocused,!1),i.hasArcType()&&i.expandArc(t),i.toggleFocusLegend(t,!0),i.focusedTargetIds=t,i.defocusedTargetIds=i.defocusedTargetIds.filter(function(e){return t.indexOf(e)<0})},i.defocus=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t.filter(e.isTargetToShow,e))).classed(I.focused,!1).classed(I.defocused,!0),e.hasArcType()&&e.unexpandArc(t),e.toggleFocusLegend(t,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(e){return t.indexOf(e)<0}),e.defocusedTargetIds=t},i.revert=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e)).classed(I.focused,!1).classed(I.defocused,!1),t.hasArcType()&&t.unexpandArc(e),t.config.legend_show&&(t.showLegend(e.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(e)).filter(function(){return t.d3.select(this).classed(I.legendItemFocused)}).classed(I.legendItemFocused,!1)),t.focusedTargetIds=[],t.defocusedTargetIds=[]},i.show=function(e,t){var i,n=this.internal;e=n.mapToTargetIds(e),t=t||{},n.removeHiddenTargetIds(e),(i=n.svg.selectAll(n.selectorTargets(e))).transition().style("opacity",1,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",1)}),t.withLegend&&n.showLegend(e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},i.hide=function(e,t){var i,n=this.internal;e=n.mapToTargetIds(e),t=t||{},n.addHiddenTargetIds(e),(i=n.svg.selectAll(n.selectorTargets(e))).transition().style("opacity",0,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",0)}),t.withLegend&&n.hideLegend(e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},i.toggle=function(e,t){var i=this,n=this.internal;n.mapToTargetIds(e).forEach(function(e){n.isTargetToShow(e)?i.hide(e,t):i.show(e,t)})},i.zoom=function(e){var t=this.internal;return e&&(t.isTimeSeries()&&(e=e.map(function(e){return t.parseDate(e)})),t.brush.extent(e),t.redraw({withUpdateXDomain:!0,withY:t.config.zoom_rescale}),t.config.zoom_onzoom.call(this,t.x.orgDomain())),t.brush.extent()},i.zoom.enable=function(e){var t=this.internal;t.config.zoom_enabled=e,t.updateAndRedraw()},i.unzoom=function(){var e=this.internal;e.brush.clear().update(),e.redraw({withUpdateXDomain:!0})},i.load=function(t){var e=this.internal,i=e.config;t.xs&&e.addXs(t.xs),"classes"in t&&Object.keys(t.classes).forEach(function(e){i.data_classes[e]=t.classes[e]}),"categories"in t&&e.isCategorized()&&(i.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(e){i.data_axes[e]=t.axes[e]}),"colors"in t&&Object.keys(t.colors).forEach(function(e){i.data_colors[e]=t.colors[e]}),"cacheIds"in t&&e.hasCaches(t.cacheIds)?e.load(e.getCaches(t.cacheIds),t.done):"unload"in t?e.unload(e.mapToTargetIds("boolean"==typeof t.unload&&t.unload?null:t.unload),function(){e.loadFromArgs(t)}):e.loadFromArgs(t)},i.unload=function(e){var t=this.internal;(e=e||{})instanceof Array?e={ids:e}:"string"==typeof e&&(e={ids:[e]}),t.unload(t.mapToTargetIds(e.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()})},i.flow=function(e){var o,t,i,n,r,s,a=this.internal,l=[],c=a.getMaxDataCount(),u=0,d=0;if(e.json)i=a.convertJsonToData(e.json,e.keys);else if(e.rows)i=a.convertRowsToData(e.rows);else{if(!e.columns)return;i=a.convertColumnsToData(e.columns)}o=a.convertDataToTargets(i,!0),a.data.targets.forEach(function(e){for(var t,i=!1,n=0;n<o.length;n++)if(e.id===o[n].id){for(i=!0,e.values[e.values.length-1]&&(d=e.values[e.values.length-1].index+1),u=o[n].values.length,t=0;t<u;t++)o[n].values[t].index=d+t,a.isTimeSeries()||(o[n].values[t].x=d+t);e.values=e.values.concat(o[n].values),o.splice(n,1);break}i||l.push(e.id)}),a.data.targets.forEach(function(e){for(var t,i=0;i<l.length;i++)if(e.id===l[i])for(d=e.values[e.values.length-1].index+1,t=0;t<u;t++)e.values.push({id:e.id,index:d+t,x:a.isTimeSeries()?a.getOtherTargetX(d+t):d+t,value:null})}),a.data.targets.length&&o.forEach(function(e){for(var t=[],i=a.data.targets[0].values[0].index;i<d;i++)t.push({id:e.id,index:i,x:a.isTimeSeries()?a.getOtherTargetX(i):i,value:null});e.values.forEach(function(e){e.index+=d,a.isTimeSeries()||(e.x+=d)}),e.values=t.concat(e.values)}),a.data.targets=a.data.targets.concat(o),a.getMaxDataCount(),n=(i=a.data.targets[0]).values[0],k(e.to)?(u=0,s=a.isTimeSeries()?a.parseDate(e.to):e.to,i.values.forEach(function(e){e.x<s&&u++})):k(e.length)&&(u=e.length),c?1===c&&a.isTimeSeries()&&(r=(i.values[i.values.length-1].x-n.x)/2,t=[new Date(+n.x-r),new Date(+n.x+r)],a.updateXDomain(null,!0,!0,!1,t)):(r=a.isTimeSeries()?1<i.values.length?i.values[i.values.length-1].x-n.x:n.x-a.getXDomain(a.data.targets)[0]:1,t=[n.x-r,n.x],a.updateXDomain(null,!0,!0,!1,t)),a.updateTargets(a.data.targets),a.redraw({flow:{index:n.index,length:u,duration:v(e.duration)?e.duration:a.config.transition_duration,done:e.done,orgDataCount:c},withLegend:!0,withTransition:1<c,withTrimXDomain:!1,withUpdateXAxis:!0})},a.generateFlow=function(T){var k=this,D=k.config,R=k.d3;return function(){var e,t=T.targets,i=T.flow,o=T.drawBar,r=T.drawLine,s=T.drawArea,a=T.cx,l=T.cy,c=T.xv,u=T.xForText,d=T.yForText,n=T.duration,h=i.index,p=i.length,f=k.getValueOnIndex(k.data.targets[0].values,h),g=k.getValueOnIndex(k.data.targets[0].values,h+p),m=k.x.domain(),n=i.duration||n,v=i.done||function(){},y=k.generateWait(),b=k.xgrid||R.selectAll([]),w=k.xgridLines||R.selectAll([]),C=k.mainRegion||R.selectAll([]),_=k.mainText||R.selectAll([]),A=k.mainBar||R.selectAll([]),E=k.mainLine||R.selectAll([]),x=k.mainArea||R.selectAll([]),S=k.mainCircle||R.selectAll([]);k.flowing=!0,k.data.targets.forEach(function(e){e.values.splice(0,p)}),t=k.updateXDomain(t,!0,!0),k.updateXGrid&&k.updateXGrid(!0),i=i.orgDataCount?1===i.orgDataCount||f.x===g.x||k.isTimeSeries()?k.x(m[0])-k.x(t[0]):k.x(f.x)-k.x(g.x):1!==k.data.targets[0].values.length?k.x(m[0])-k.x(t[0]):k.isTimeSeries()?(f=k.getValueOnIndex(k.data.targets[0].values,0),g=k.getValueOnIndex(k.data.targets[0].values,k.data.targets[0].values.length-1),k.x(f.x)-k.x(g.x)):O(t)/2,f=O(m)/O(t),e="translate("+i+",0) scale("+f+",1)",k.hideXGridFocus(),k.hideTooltip(),R.transition().ease("linear").duration(n).each(function(){y.add(k.axes.x.transition().call(k.xAxis)),y.add(A.transition().attr("transform",e)),y.add(E.transition().attr("transform",e)),y.add(x.transition().attr("transform",e)),y.add(S.transition().attr("transform",e)),y.add(_.transition().attr("transform",e)),y.add(C.filter(k.isRegionOnX).transition().attr("transform",e)),y.add(b.transition().attr("transform",e)),y.add(w.transition().attr("transform",e))}).call(y,function(){var e,t=[],i=[],n=[];if(p){for(e=0;e<p;e++)t.push("."+I.shape+"-"+(h+e)),i.push("."+I.text+"-"+(h+e)),n.push("."+I.eventRect+"-"+(h+e));k.svg.selectAll("."+I.shapes).selectAll(t).remove(),k.svg.selectAll("."+I.texts).selectAll(i).remove(),k.svg.selectAll("."+I.eventRects).selectAll(n).remove(),k.svg.select("."+I.xgrid).remove()}b.attr("transform",null).attr(k.xgridAttr),w.attr("transform",null),w.select("line").attr("x1",D.axis_rotated?0:c).attr("x2",D.axis_rotated?k.width:c),w.select("text").attr("x",D.axis_rotated?k.width:0).attr("y",c),A.attr("transform",null).attr("d",o),E.attr("transform",null).attr("d",r),x.attr("transform",null).attr("d",s),S.attr("transform",null).attr("cx",a).attr("cy",l),_.attr("transform",null).attr("x",u).attr("y",d).style("fill-opacity",k.opacityForText.bind(k)),C.attr("transform",null),C.select("rect").filter(k.isRegionOnX).attr("x",k.regionX.bind(k)).attr("width",k.regionWidth.bind(k)),D.interaction_enabled&&k.redrawEventRect(),v(),k.flowing=!1})}},i.selected=function(e){var t=this.internal,i=t.d3;return i.merge(t.main.selectAll("."+I.shapes+t.getTargetSelectorSuffix(e)).selectAll("."+I.shape).filter(function(){return i.select(this).classed(I.SELECTED)}).map(function(e){return e.map(function(e){e=e.__data__;return e.data||e})}))},i.select=function(a,l,c){var u=this.internal,d=u.d3,h=u.config;h.data_selection_enabled&&u.main.selectAll("."+I.shapes).selectAll("."+I.shape).each(function(e,t){var i=d.select(this),n=(e.data||e).id,o=u.getToggle(this,e).bind(u),n=h.data_selection_grouped||!a||0<=a.indexOf(n),r=!l||0<=l.indexOf(t),s=i.classed(I.SELECTED);i.classed(I.line)||i.classed(I.area)||(n&&r?h.data_selection_isselectable(e)&&!s&&o(!0,i.classed(I.SELECTED,!0),e,t):k(c)&&c&&s&&o(!1,i.classed(I.SELECTED,!1),e,t))})},i.unselect=function(a,l){var c=this.internal,u=c.d3,d=c.config;d.data_selection_enabled&&c.main.selectAll("."+I.shapes).selectAll("."+I.shape).each(function(e,t){var i=u.select(this),n=(e.data||e).id,o=c.getToggle(this,e).bind(c),n=d.data_selection_grouped||!a||0<=a.indexOf(n),r=!l||0<=l.indexOf(t),s=i.classed(I.SELECTED);i.classed(I.line)||i.classed(I.area)||n&&r&&d.data_selection_isselectable(e)&&s&&o(!1,i.classed(I.SELECTED,!1),e,t)})},i.transform=function(e,t){var i=this.internal,n=0<=["pie","donut"].indexOf(e)?{withTransform:!0}:null;i.transformTo(t,e,n)},a.transformTo=function(e,t,i){var n=!this.hasArcType(),i=i||{withTransitionForAxis:n};i.withTransitionForTransform=!1,this.transiting=!1,this.setTargetType(e,t),this.updateTargets(this.data.targets),this.updateAndRedraw(i)},i.groups=function(e){var t=this.internal,i=t.config;return C(e)||(i.data_groups=e,t.redraw()),i.data_groups},i.xgrids=function(e){var t=this.internal,i=t.config;return e&&(i.grid_x_lines=e,t.redrawWithoutRescale()),i.grid_x_lines},i.xgrids.add=function(e){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(e||[]))},i.xgrids.remove=function(e){this.internal.removeGridLines(e,!0)},i.ygrids=function(e){var t=this.internal,i=t.config;return e&&(i.grid_y_lines=e,t.redrawWithoutRescale()),i.grid_y_lines},i.ygrids.add=function(e){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(e||[]))},i.ygrids.remove=function(e){this.internal.removeGridLines(e,!1)},i.regions=function(e){var t=this.internal,i=t.config;return e&&(i.regions=e,t.redrawWithoutRescale()),i.regions},i.regions.add=function(e){var t=this.internal,i=t.config;return e&&(i.regions=i.regions.concat(e),t.redrawWithoutRescale()),i.regions},i.regions.remove=function(e){var t=this.internal,i=t.config,n=t.getOption(e=e||{},"duration",i.transition_duration),o=t.getOption(e,"classes",[I.region]),e=t.main.select("."+I.regions).selectAll(o.map(function(e){return"."+e}));return(n?e.transition().duration(n):e).style("opacity",0).remove(),i.regions=i.regions.filter(function(e){var t=!1;return!e.class||(e.class.split(" ").forEach(function(e){0<=o.indexOf(e)&&(t=!0)}),!t)}),i.regions},i.data=function(t){var e=this.internal.data.targets;return void 0===t?e:e.filter(function(e){return 0<=[].concat(t).indexOf(e.id)})},i.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},i.data.values=function(e){var t=null;return t=e?(e=this.data(e))[0]?e[0].values.map(function(e){return e.value}):null:t},i.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",e)},i.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)},i.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)},i.category=function(e,t){var i=this.internal,n=i.config;return 1<arguments.length&&(n.axis_x_categories[e]=t,i.redraw()),n.axis_x_categories[e]},i.categories=function(e){var t=this.internal,i=t.config;return arguments.length&&(i.axis_x_categories=e,t.redraw()),i.axis_x_categories},i.color=function(e){return this.internal.color(e)},i.x=function(e){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},i.xs=function(e){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},i.axis=function(){},i.axis.labels=function(t){var i=this.internal;arguments.length&&(Object.keys(t).forEach(function(e){i.axis.setLabelText(e,t[e])}),i.axis.updateLabels())},i.axis.max=function(e){var t=this.internal,i=t.config;if(!arguments.length)return{x:i.axis_x_max,y:i.axis_y_max,y2:i.axis_y2_max};"object"==typeof e?(v(e.x)&&(i.axis_x_max=e.x),v(e.y)&&(i.axis_y_max=e.y),v(e.y2)&&(i.axis_y2_max=e.y2)):i.axis_y_max=i.axis_y2_max=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},i.axis.min=function(e){var t=this.internal,i=t.config;if(!arguments.length)return{x:i.axis_x_min,y:i.axis_y_min,y2:i.axis_y2_min};"object"==typeof e?(v(e.x)&&(i.axis_x_min=e.x),v(e.y)&&(i.axis_y_min=e.y),v(e.y2)&&(i.axis_y2_min=e.y2)):i.axis_y_min=i.axis_y2_min=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},i.axis.range=function(e){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};k(e.max)&&this.axis.max(e.max),k(e.min)&&this.axis.min(e.min)},i.legend=function(){},i.legend.show=function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},i.legend.hide=function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},i.resize=function(e){var t=this.internal.config;t.size_width=e?e.width:null,t.size_height=e?e.height:null,this.flush()},i.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},i.destroy=function(){var t=this.internal;return r.clearInterval(t.intervalForObserveInserted),r.onresize=null,t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach(function(e){t[e]=null}),null},i.tooltip=function(){},i.tooltip.show=function(e){var t,i,n=this.internal;e.mouse&&(i=e.mouse),e.data?t=n.isMultipleX()?(i=[n.x(e.data.x),n.getYScale(e.data.id)(e.data.value)],null):v(e.data.index)?e.data.index:n.getIndexByX(e.data.x):void 0!==e.x?t=n.getIndexByX(e.x):void 0!==e.index&&(t=e.index),n.dispatchEvent("mouseover",t,i),n.dispatchEvent("mousemove",t,i)},i.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)},a.isSafari=function(){var e=r.navigator.userAgent;return 0<=e.indexOf("Safari")&&e.indexOf("Chrome")<0},a.isChrome=function(){return 0<=r.navigator.userAgent.indexOf("Chrome")},Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){return n.apply(this instanceof o?this:e,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),n=this,o=function(){};return o.prototype=this.prototype,t.prototype=new o,t}),"function"==typeof define&&define.amd?define("c3",["d3"],o):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=o:r.c3=o}(window),(typeof define==="function"&&define.amd?define:function(e,t){if(typeof module!=="undefined"&&module.exports)module.exports=t(require("jquery","lodash"));else window["toastr"]=t(window["jQuery"],window["_"])})(["jquery","lodash"],function(g,m){return function(){var a,t,l=0,n="alert",o="info",r="success",s="warning",e={clear:function(e){var t=p();a||c(t);u(e,t)||!function(e){for(var t=a.children(),i=t.length-1;0<=i;i--)u(g(t[i]),e)}(t)},remove:function(e){var t=p();a||c(t);e&&0===g(":focus",e).length?f(e):a.children().length&&a.remove()},alert:function(e,t,i){return h({type:n,title:e,message:t,options:i})},getContainer:c,info:function(e,t,i){return h({type:o,title:e,message:t,options:i})},options:{},subscribe:function(e){t=e},success:function(e,t,i){return h({type:r,title:e,message:t,options:i})},version:"2.0.3",warning:i,warning_permanent:i};return e;function i(e,t,i){return h({type:s,title:e,message:t,options:i})}function c(e,t){return e=e||p(),(a=g("#"+e.containerId)).length||t&&(t=e,(a=g("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert")).appendTo(g(t.target))),a}function u(e,t){return e&&0===g(":focus",e).length&&(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){f(e)}}),1)}function d(e){t&&t(e)}function h(e){var t=p(),i=g.extend(t,e),t=(void 0!==e.options&&(i=g.extend(i,e.options)),l++,a=c(i,!0),m.template(function(){return this._template||(this._template='<div class="{{= toastClass }} {{= toastClass }}-{{= type }}"><div class="notification-header"><p class="{{= titleClass }}"><i class="icon icon-state-{{= type }}"></i>&nbsp;<span class="text">{{= title }}</span><i class="js-close close-icon {{= closeIcon }}"></i></p></div><div class="{{= messageClass }}" style="display: none;">{{= message }}</div></div>')}())(i)),e=g(t),n=null,o=e,t=o.find(".js-close"),r={toastId:l,state:"visible",startTime:new Date,options:i};return i.message&&o.find("."+i.messageClass).show(),o.hide(),i.newestOnTop?a.prepend(o):a.append(o),o[i.showMethod]({duration:i.showDuration,easing:i.showEasing,complete:i.onShown}),0<i.timeOut&&(n=setTimeout(s,i.timeOut)),o.hover(function(){clearTimeout(n),o.stop(!0,!0)[i.showMethod]({duration:i.showDuration,easing:i.showEasing})},function(){(0<i.timeOut||0<i.extendedTimeOut)&&(n=setTimeout(s,i.extendedTimeOut))}),!i.onclick&&i.tapToDismiss&&o.click(s),t&&t.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),i.onCloseClick&&i.onCloseClick(e),s(!0)}),i.onclick&&o.click(function(){i.onclick(),s()}),d(r),i.debug&&console&&console.log(r),o;function s(e){if(!g(":focus",o).length||e)return o[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){f(o),i.onHidden&&"hidden"!==r.state&&i.onHidden(),r.state="hidden",r.endTime=new Date,d(r)}})}}function p(){return g.extend({},{tapToDismiss:!1,toastClass:"notification",containerId:"notifications-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,onCloseClick:void 0,positionClass:"notification-below-header",timeOut:5e3,titleClass:"headline",messageClass:"notification-content",closeIcon:"icon icon-times-circle",target:"body",newestOnTop:!0},e.options)}function f(e){a=a||c(),e.is(":visible")||(e.remove(),e=null,0===a.children().length&&a.remove())}}()}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var $;function p(){return $.apply(null,arguments)}function l(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function I(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){return void 0===e}function P(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function G(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function B(e,t){for(var i=[],n=0;n<e.length;++n)i.push(t(e[n],n));return i}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){for(var i in t)d(t,i)&&(e[i]=t[i]);return d(t,"toString")&&(e.toString=t.toString),d(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,i,n){return Lt(e,t,i,n,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function W(e){if(null==e._isValid){var t=f(e),i=V.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function H(e){var t=c(NaN);return null!=e?a(f(t),e):f(t).userInvalidated=!0,t}var V=Array.prototype.some||function(e){for(var t=Object(this),i=t.length>>>0,n=0;n<i;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1},j=p.momentProperties=[];function z(e,t){var i,n,o;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=f(t)),r(t._locale)||(e._locale=t._locale),0<j.length)for(i=0;i<j.length;i++)r(o=t[n=j[i]])||(e[n]=o);return e}var U=!1;function Y(e){z(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===U&&(U=!0,p.updateOffset(this),U=!1)}function s(e){return e instanceof Y||null!=e&&null!=e._isAMomentObject}function u(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function h(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?u(e):t}function q(e,t,i){for(var n=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0,s=0;s<n;s++)(i&&e[s]!==t[s]||!i&&h(e[s])!==h(t[s]))&&r++;return r+o}function K(e){!1===p.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function e(o,r){var s=!0;return a(function(){if(null!=p.deprecationHandler&&p.deprecationHandler(null,o),s){for(var e,t=[],i=0;i<arguments.length;i++){if(e="","object"==typeof arguments[i]){for(var n in e+="\n["+i+"] ",arguments[0])e+=n+": "+arguments[0][n]+", ";e=e.slice(0,-2)}else e=arguments[i];t.push(e)}K(o+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),s=!1}return r.apply(this,arguments)},r)}var X={};function Q(e,t){null!=p.deprecationHandler&&p.deprecationHandler(e,t),X[e]||(K(t),X[e]=!0)}function g(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function Z(e,t){var i,n=a({},e);for(i in t)d(t,i)&&(I(e[i])&&I(t[i])?(n[i]={},a(n[i],e[i]),a(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)d(e,i)&&!d(t,i)&&I(e[i])&&(n[i]=a({},n[i]));return n}function J(e){null!=e&&this.set(e)}p.suppressDeprecationWarnings=!1,p.deprecationHandler=null;var ee=Object.keys||function(e){var t,i=[];for(t in e)d(e,t)&&i.push(t);return i};var te={};function t(e,t){var i=e.toLowerCase();te[i]=te[i+"s"]=te[t]=e}function m(e){return"string"==typeof e?te[e]||te[e.toLowerCase()]:void 0}function ie(e){var t,i,n={};for(i in e)d(e,i)&&(t=m(i))&&(n[t]=e[i]);return n}var ne={};function i(e,t){ne[e]=t}function v(e,t,i){var n=""+Math.abs(e);return(0<=e?i?"+":"":"-")+Math.pow(10,Math.max(0,t-n.length)).toString().substr(1)+n}var oe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,re=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,se={},ae={};function n(e,t,i,n){var o="string"==typeof n?function(){return this[n]()}:n;e&&(ae[e]=o),t&&(ae[t[0]]=function(){return v(o.apply(this,arguments),t[1],t[2])}),i&&(ae[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function le(e,t){return e.isValid()?(t=ce(t,e.localeData()),se[t]=se[t]||function(n){for(var e,o=n.match(oe),t=0,r=o.length;t<r;t++)ae[o[t]]?o[t]=ae[o[t]]:o[t]=(e=o[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var t="",i=0;i<r;i++)t+=g(o[i])?o[i].call(e,n):o[i];return t}}(t),se[t](e)):e.localeData().invalidDate()}function ce(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}for(re.lastIndex=0;0<=i&&re.test(e);)e=e.replace(re,n),re.lastIndex=0,--i;return e}var o=/\d/,y=/\d\d/,ue=/\d{3}/,de=/\d{4}/,he=/[+-]?\d{6}/,b=/\d\d?/,pe=/\d\d\d\d?/,fe=/\d\d\d\d\d\d?/,ge=/\d{1,3}/,me=/\d{1,4}/,ve=/[+-]?\d{1,6}/,ye=/\d+/,be=/[+-]?\d+/,we=/Z|[+-]\d\d:?\d\d/gi,Ce=/Z|[+-]\d\d(?::?\d\d)?/gi,_e=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ae={};function w(e,i,n){Ae[e]=g(i)?i:function(e,t){return e&&n?n:i}}function Ee(e,t){return d(Ae,e)?Ae[e](t._strict,t._locale):new RegExp(xe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})))}function xe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Se={};function C(e,i){var t,n=i;for("string"==typeof e&&(e=[e]),P(i)&&(n=function(e,t){t[i]=h(e)}),t=0;t<e.length;t++)Se[e[t]]=n}function Te(e,o){C(e,function(e,t,i,n){i._w=i._w||{},o(e,i._w,i,n)})}var _=0,A=1,E=2,x=3,S=4,T=5,ke=6,De=7,Re=8;function Oe(e){return Fe(e)?366:365}function Fe(e){return e%4==0&&e%100!=0||e%400==0}n("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),n(0,["YY",2],0,function(){return this.year()%100}),n(0,["YYYY",4],0,"year"),n(0,["YYYYY",5],0,"year"),n(0,["YYYYYY",6,!0],0,"year"),t("year","y"),i("year",1),w("Y",be),w("YY",b,y),w("YYYY",me,de),w("YYYYY",ve,he),w("YYYYYY",ve,he),C(["YYYYY","YYYYYY"],_),C("YYYY",function(e,t){t[_]=2===e.length?p.parseTwoDigitYear(e):h(e)}),C("YY",function(e,t){t[_]=p.parseTwoDigitYear(e)}),C("Y",function(e,t){t[_]=parseInt(e,10)}),p.parseTwoDigitYear=function(e){return h(e)+(68<h(e)?1900:2e3)};var k,Le=Me("FullYear",!0);function Me(t,i){return function(e){return null!=e?($e(this,t,e),p.updateOffset(this,i),this):Ne(this,t)}}function Ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function $e(e,t,i){e.isValid()&&!isNaN(i)&&("FullYear"===t&&Fe(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),Ie(i,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function Ie(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=(t%(i=12)+i)%i;return e+=(t-i)/12,1==i?Fe(e)?29:28:31-i%7%2}k=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},n("M",["MM",2],"Mo",function(){return this.month()+1}),n("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),n("MMMM",0,0,function(e){return this.localeData().months(this,e)}),t("month","M"),i("month",8),w("M",b),w("MM",b,y),w("MMM",function(e,t){return t.monthsShortRegex(e)}),w("MMMM",function(e,t){return t.monthsRegex(e)}),C(["M","MM"],function(e,t){t[A]=h(e)-1}),C(["MMM","MMMM"],function(e,t,i,n){n=i._locale.monthsParse(e,n,i._strict);null!=n?t[A]=n:f(i).invalidMonth=e});var Pe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ge="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Be="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function We(e,t){var i;if(e.isValid()){if("string"==typeof t)if(/^\d+$/.test(t))t=h(t);else if(!P(t=e.localeData().monthsParse(t)))return;i=Math.min(e.date(),Ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i)}}function He(e){return null!=e?(We(this,e),p.updateOffset(this,!0),this):Ne(this,"Month")}var Ve=_e;var je=_e;function ze(){function e(e,t){return t.length-e.length}for(var t,i=[],n=[],o=[],r=0;r<12;r++)t=c([2e3,r]),i.push(this.monthsShort(t,"")),n.push(this.months(t,"")),o.push(this.months(t,"")),o.push(this.monthsShort(t,""));for(i.sort(e),n.sort(e),o.sort(e),r=0;r<12;r++)i[r]=xe(i[r]),n[r]=xe(n[r]);for(r=0;r<24;r++)o[r]=xe(o[r]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ue(e,t,i,n,o,r,s){var a;return e<100&&0<=e?(a=new Date(e+400,t,i,n,o,r,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,i,n,o,r,s),a}function Ye(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function qe(e,t,i){i=7+t-i;return i-(7+Ye(e,0,i).getUTCDay()-t)%7-1}function Ke(e,t,i,n,o){var r,t=1+7*(t-1)+(7+i-n)%7+qe(e,n,o),i=t<=0?Oe(r=e-1)+t:t>Oe(e)?(r=e+1,t-Oe(e)):(r=e,t);return{year:r,dayOfYear:i}}function Xe(e,t,i){var n,o,r=qe(e.year(),t,i),r=Math.floor((e.dayOfYear()-r-1)/7)+1;return r<1?n=r+Qe(o=e.year()-1,t,i):r>Qe(e.year(),t,i)?(n=r-Qe(e.year(),t,i),o=e.year()+1):(o=e.year(),n=r),{week:n,year:o}}function Qe(e,t,i){var n=qe(e,t,i),t=qe(e+1,t,i);return(Oe(e)-n+t)/7}n("w",["ww",2],"wo","week"),n("W",["WW",2],"Wo","isoWeek"),t("week","w"),t("isoWeek","W"),i("week",5),i("isoWeek",5),w("w",b),w("ww",b,y),w("W",b),w("WW",b,y),Te(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=h(e)});function Ze(e,t){return e.slice(t,7).concat(e.slice(0,t))}n("d",0,"do","day"),n("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),n("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),n("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),n("e",0,0,"weekday"),n("E",0,0,"isoWeekday"),t("day","d"),t("weekday","e"),t("isoWeekday","E"),i("day",11),i("weekday",11),i("isoWeekday",11),w("d",b),w("e",b),w("E",b),w("dd",function(e,t){return t.weekdaysMinRegex(e)}),w("ddd",function(e,t){return t.weekdaysShortRegex(e)}),w("dddd",function(e,t){return t.weekdaysRegex(e)}),Te(["dd","ddd","dddd"],function(e,t,i,n){n=i._locale.weekdaysParse(e,n,i._strict);null!=n?t.d=n:f(i).invalidWeekday=e}),Te(["d","e","E"],function(e,t,i,n){t[n]=h(e)});var Je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var et="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var tt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var it=_e;var nt=_e;var ot=_e;function rt(){function e(e,t){return t.length-e.length}for(var t,i,n,o=[],r=[],s=[],a=[],l=0;l<7;l++)n=c([2e3,1]).day(l),t=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),n=this.weekdays(n,""),o.push(t),r.push(i),s.push(n),a.push(t),a.push(i),a.push(n);for(o.sort(e),r.sort(e),s.sort(e),a.sort(e),l=0;l<7;l++)r[l]=xe(r[l]),s[l]=xe(s[l]),a[l]=xe(a[l]);this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function st(){return this.hours()%12||12}function at(e,t){n(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function lt(e,t){return t._meridiemParse}n("H",["HH",2],0,"hour"),n("h",["hh",2],0,st),n("k",["kk",2],0,function(){return this.hours()||24}),n("hmm",0,0,function(){return""+st.apply(this)+v(this.minutes(),2)}),n("hmmss",0,0,function(){return""+st.apply(this)+v(this.minutes(),2)+v(this.seconds(),2)}),n("Hmm",0,0,function(){return""+this.hours()+v(this.minutes(),2)}),n("Hmmss",0,0,function(){return""+this.hours()+v(this.minutes(),2)+v(this.seconds(),2)}),at("a",!0),at("A",!1),t("hour","h"),i("hour",13),w("a",lt),w("A",lt),w("H",b),w("h",b),w("k",b),w("HH",b,y),w("hh",b,y),w("kk",b,y),w("hmm",pe),w("hmmss",fe),w("Hmm",pe),w("Hmmss",fe),C(["H","HH"],x),C(["k","kk"],function(e,t,i){e=h(e);t[x]=24===e?0:e}),C(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),C(["h","hh"],function(e,t,i){t[x]=h(e),f(i).bigHour=!0}),C("hmm",function(e,t,i){var n=e.length-2;t[x]=h(e.substr(0,n)),t[S]=h(e.substr(n)),f(i).bigHour=!0}),C("hmmss",function(e,t,i){var n=e.length-4,o=e.length-2;t[x]=h(e.substr(0,n)),t[S]=h(e.substr(n,2)),t[T]=h(e.substr(o)),f(i).bigHour=!0}),C("Hmm",function(e,t,i){var n=e.length-2;t[x]=h(e.substr(0,n)),t[S]=h(e.substr(n))}),C("Hmmss",function(e,t,i){var n=e.length-4,o=e.length-2;t[x]=h(e.substr(0,n)),t[S]=h(e.substr(n,2)),t[T]=h(e.substr(o))});var ct,_e=Me("Hours",!0),ut={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ge,monthsShort:Be,week:{dow:0,doy:6},weekdays:Je,weekdaysMin:tt,weekdaysShort:et,meridiemParse:/[ap]\.?m?\.?/i},D={},dt={};function ht(e){return e&&e.toLowerCase().replace("_","-")}function pt(e){if(!D[e]&&"undefined"!=typeof module&&module&&module.exports)try{var t=ct._abbr;require("./locale/"+e),ft(t)}catch(e){}return D[e]}function ft(e,t){return e&&((t=r(t)?mt(e):gt(e,t))?ct=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ct._abbr}function gt(e,t){if(null===t)return delete D[e],null;var i,n=ut;if(t.abbr=e,null!=D[e])Q("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=D[e]._config;else if(null!=t.parentLocale)if(null!=D[t.parentLocale])n=D[t.parentLocale]._config;else{if(null==(i=pt(t.parentLocale)))return dt[t.parentLocale]||(dt[t.parentLocale]=[]),dt[t.parentLocale].push({name:e,config:t}),null;n=i._config}return D[e]=new J(Z(n,t)),dt[e]&&dt[e].forEach(function(e){gt(e.name,e.config)}),ft(e),D[e]}function mt(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return ct;if(!l(e)){if(t=pt(e))return t;e=[e]}for(var i,n,o,r,s=e,a=0;a<s.length;){for(i=(r=ht(s[a]).split("-")).length,n=(n=ht(s[a+1]))?n.split("-"):null;0<i;){if(o=pt(r.slice(0,i).join("-")))return o;if(n&&n.length>=i&&q(r,n,!0)>=i-1)break;i--}a++}return ct}function vt(e){var t=e._a;return t&&-2===f(e).overflow&&(t=t[A]<0||11<t[A]?A:t[E]<1||t[E]>Ie(t[_],t[A])?E:t[x]<0||24<t[x]||24===t[x]&&(0!==t[S]||0!==t[T]||0!==t[ke])?x:t[S]<0||59<t[S]?S:t[T]<0||59<t[T]?T:t[ke]<0||999<t[ke]?ke:-1,f(e)._overflowDayOfYear&&(t<_||E<t)&&(t=E),f(e)._overflowWeeks&&-1===t&&(t=De),f(e)._overflowWeekday&&-1===t&&(t=Re),f(e).overflow=t),e}function yt(e,t,i){return null!=e?e:null!=t?t:i}function bt(e){var t,i,n,o,r,s,a,l,c,u,d,h=[];if(!e._d){for(n=e,o=new Date(p.now()),i=n._useUTC?[o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()]:[o.getFullYear(),o.getMonth(),o.getDate()],e._w&&null==e._a[E]&&null==e._a[A]&&(null!=(o=(n=e)._w).GG||null!=o.W||null!=o.E?(l=1,c=4,r=yt(o.GG,n._a[_],Xe(R(),1,4).year),s=yt(o.W,1),((a=yt(o.E,1))<1||7<a)&&(u=!0)):(l=n._locale._week.dow,c=n._locale._week.doy,d=Xe(R(),l,c),r=yt(o.gg,n._a[_],d.year),s=yt(o.w,d.week),null!=o.d?((a=o.d)<0||6<a)&&(u=!0):null!=o.e?(a=o.e+l,(o.e<0||6<o.e)&&(u=!0)):a=l),s<1||s>Qe(r,l,c)?f(n)._overflowWeeks=!0:null!=u?f(n)._overflowWeekday=!0:(d=Ke(r,s,a,l,c),n._a[_]=d.year,n._dayOfYear=d.dayOfYear)),null!=e._dayOfYear&&(o=yt(e._a[_],i[_]),(e._dayOfYear>Oe(o)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),u=Ye(o,0,e._dayOfYear),e._a[A]=u.getUTCMonth(),e._a[E]=u.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=h[t]=i[t];for(;t<7;t++)e._a[t]=h[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[x]&&0===e._a[S]&&0===e._a[T]&&0===e._a[ke]&&(e._nextDay=!0,e._a[x]=0),e._d=(e._useUTC?Ye:Ue).apply(null,h),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[x]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(f(e).weekdayMismatch=!0)}}var wt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ct=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,At=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Et=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xt=/^\/?Date\((\-?\d+)/i;function St(e){var t,i,n,o,r,s,a=e._i,l=wt.exec(a)||Ct.exec(a);if(l){for(f(e).iso=!0,t=0,i=At.length;t<i;t++)if(At[t][1].exec(l[1])){o=At[t][0],n=!1!==At[t][2];break}if(null==o)e._isValid=!1;else{if(l[3]){for(t=0,i=Et.length;t<i;t++)if(Et[t][1].exec(l[3])){r=(l[2]||" ")+Et[t][0];break}if(null==r)return void(e._isValid=!1)}if(n||null==r){if(l[4]){if(!_t.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=o+(r||"")+(s||""),Ot(e)}else e._isValid=!1}}else e._isValid=!1}var Tt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function kt(e,t,i,n,o,r){e=[function(e){e=parseInt(e,10);{if(e<=49)return 2e3+e;if(e<=999)return 1900+e}return e}(e),Be.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(o,10)];return r&&e.push(parseInt(r,10)),e}var Dt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Rt(e){var t,i,n,o,r=Tt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));r?(t=kt(r[4],r[3],r[2],r[5],r[6],r[7]),i=r[1],n=t,o=e,i&&et.indexOf(i)!==new Date(n[0],n[1],n[2]).getDay()?(f(o).weekdayMismatch=!0,o._isValid=!1):(e._a=t,e._tzm=(i=r[8],n=r[9],o=r[10],i?Dt[i]:n?0:60*(((i=parseInt(o,10))-(n=i%100))/100)+n),e._d=Ye.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0)):e._isValid=!1}function Ot(e){if(e._f===p.ISO_8601)St(e);else if(e._f===p.RFC_2822)Rt(e);else{e._a=[],f(e).empty=!0;for(var t,i,n,o,r,s=""+e._i,a=s.length,l=0,c=ce(e._f,e._locale).match(oe)||[],u=0;u<c.length;u++)i=c[u],(t=(s.match(Ee(i,e))||[])[0])&&(0<(n=s.substr(0,s.indexOf(t))).length&&f(e).unusedInput.push(n),s=s.slice(s.indexOf(t)+t.length),l+=t.length),ae[i]?(t?f(e).empty=!1:f(e).unusedTokens.push(i),n=i,r=e,null!=(o=t)&&d(Se,n)&&Se[n](o,r._a,r,n)):e._strict&&!t&&f(e).unusedTokens.push(i);f(e).charsLeftOver=a-l,0<s.length&&f(e).unusedInput.push(s),e._a[x]<=12&&!0===f(e).bigHour&&0<e._a[x]&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[x]=function(e,t,i){if(null==i)return t;return null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((e=e.isPM(i))&&t<12&&(t+=12),t=e||12!==t?t:0):t}(e._locale,e._a[x],e._meridiem),bt(e),vt(e)}}function Ft(e){var t,i,n=e._i,o=e._f;if(e._locale=e._locale||mt(e._l),null===n||void 0===o&&""===n)return H({nullInput:!0});if("string"==typeof n&&(e._i=n=e._locale.preparse(n)),s(n))return new Y(vt(n));if(G(n))e._d=n;else if(l(o))!function(e){var t,i,n,o,r;if(0===e._f.length)return f(e).invalidFormat=!0,e._d=new Date(NaN);for(o=0;o<e._f.length;o++)r=0,t=z({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],Ot(t),W(t)&&(r=(r+=f(t).charsLeftOver)+10*f(t).unusedTokens.length,f(t).score=r,(null==n||r<n)&&(n=r,i=t));a(e,i||t)}(e);else if(o)Ot(e);else if(r(o=(n=e)._i))n._d=new Date(p.now());else G(o)?n._d=new Date(o.valueOf()):"string"==typeof o?(i=n,null!==(t=xt.exec(i._i))?i._d=new Date(+t[1]):(St(i),!1===i._isValid&&(delete i._isValid,Rt(i),!1===i._isValid&&(delete i._isValid,p.createFromInputFallback(i))))):l(o)?(n._a=B(o.slice(0),function(e){return parseInt(e,10)}),bt(n)):I(o)?(t=n)._d||(i=ie(t._i),t._a=B([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(e){return e&&parseInt(e,10)}),bt(t)):P(o)?n._d=new Date(o):p.createFromInputFallback(n);return W(e)||(e._d=null),e}function Lt(e,t,i,n,o){var r={};return!0!==i&&!1!==i||(n=i,i=void 0),(I(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(e.hasOwnProperty(t))return;return 1}(e)||l(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=i,r._i=e,r._f=t,r._strict=n,(o=new Y(vt(Ft(o=r))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function R(e,t,i,n){return Lt(e,t,i,n,!1)}p.createFromInputFallback=e("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),p.ISO_8601=function(){},p.RFC_2822=function(){};pe=e("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=R.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:H()}),fe=e("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=R.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:H()});function Mt(e,t){var i,n;if(!(t=1===t.length&&l(t[0])?t[0]:t).length)return R();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}var Nt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function $t(e){var e=ie(e),t=e.year||0,i=e.quarter||0,n=e.month||0,o=e.week||e.isoWeek||0,r=e.day||0,s=e.hour||0,a=e.minute||0,l=e.second||0,c=e.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===k.call(Nt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var i=!1,n=0;n<Nt.length;++n)if(e[Nt[n]]){if(i)return!1;parseFloat(e[Nt[n]])!==h(e[Nt[n]])&&(i=!0)}return!0}(e),this._milliseconds=+c+1e3*l+6e4*a+1e3*s*60*60,this._days=+r+7*o,this._months=+n+3*i+12*t,this._data={},this._locale=mt(),this._bubble()}function It(e){return e instanceof $t}function Pt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Gt(e,i){n(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+v(~~(e/60),2)+i+v(~~e%60,2)})}Gt("Z",":"),Gt("ZZ",""),w("Z",Ce),w("ZZ",Ce),C(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Wt(Ce,e)});var Bt=/([\+\-]|\d\d)/gi;function Wt(e,t){t=(t||"").match(e);if(null===t)return null;e=((t[t.length-1]||[])+"").match(Bt)||["-",0,0],t=60*e[1]+h(e[2]);return 0===t?0:"+"===e[0]?t:-t}function Ht(e,t){var i;return t._isUTC?(t=t.clone(),i=(s(e)||G(e)?e:R(e)).valueOf()-t.valueOf(),t._d.setTime(t._d.valueOf()+i),p.updateOffset(t,!1),t):R(e).local()}function Vt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function jt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}p.updateOffset=function(){};var zt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ut=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function O(e,t){var i,n=e,o=null;return It(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:P(e)?(n={},t?n[t]=e:n.milliseconds=e):(o=zt.exec(e))?(i="-"===o[1]?-1:1,n={y:0,d:h(o[E])*i,h:h(o[x])*i,m:h(o[S])*i,s:h(o[T])*i,ms:h(Pt(1e3*o[ke]))*i}):(o=Ut.exec(e))?(i="-"===o[1]?-1:1,n={y:Yt(o[2],i),M:Yt(o[3],i),w:Yt(o[4],i),d:Yt(o[5],i),h:Yt(o[6],i),m:Yt(o[7],i),s:Yt(o[8],i)}):null==n?n={}:"object"==typeof n&&("from"in n||"to"in n)&&(t=function(e,t){var i;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Ht(t,e),e.isBefore(t)?i=qt(e,t):((i=qt(t,e)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(R(n.from),R(n.to)),(n={}).ms=t.milliseconds,n.M=t.months),o=new $t(n),It(e)&&d(e,"_locale")&&(o._locale=e._locale),o}function Yt(e,t){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*t}function qt(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Kt(n,o){return function(e,t){var i;return null===t||isNaN(+t)||(Q(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=e,e=t,t=i),Xt(this,O(e="string"==typeof e?+e:e,t),n),this}}function Xt(e,t,i,n){var o=t._milliseconds,r=Pt(t._days),t=Pt(t._months);e.isValid()&&(n=null==n||n,t&&We(e,Ne(e,"Month")+t*i),r&&$e(e,"Date",Ne(e,"Date")+r*i),o&&e._d.setTime(e._d.valueOf()+o*i),n&&p.updateOffset(e,r||t))}O.fn=$t.prototype,O.invalid=function(){return O(NaN)};Ge=Kt(1,"add"),Je=Kt(-1,"subtract");function Qt(e,t){var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,"months"),t=t-n<0?(t-n)/(n-e.clone().add(i-1,"months")):(t-n)/(e.clone().add(1+i,"months")-n);return-(i+t)||0}function Zt(e){return void 0===e?this._locale._abbr:(null!=(e=mt(e))&&(this._locale=e),this)}p.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",p.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";tt=e("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Jt(){return this._locale}var ei=126227808e5;function ti(e,t){return(e%t+t)%t}function ii(e,t,i){return e<100&&0<=e?new Date(e+400,t,i)-ei:new Date(e,t,i).valueOf()}function ni(e,t,i){return e<100&&0<=e?Date.UTC(e+400,t,i)-ei:Date.UTC(e,t,i)}function oi(e,t){n(0,[e,e.length],0,t)}function ri(e,t,i,n,o){var r;return null==e?Xe(this,n,o).year:(r=Qe(e,n,o),function(e,t,i,n,o){e=Ke(e,t,i,n,o),t=Ye(e.year,0,e.dayOfYear);return this.year(t.getUTCFullYear()),this.month(t.getUTCMonth()),this.date(t.getUTCDate()),this}.call(this,e,t=r<t?r:t,i,n,o))}n(0,["gg",2],0,function(){return this.weekYear()%100}),n(0,["GG",2],0,function(){return this.isoWeekYear()%100}),oi("gggg","weekYear"),oi("ggggg","weekYear"),oi("GGGG","isoWeekYear"),oi("GGGGG","isoWeekYear"),t("weekYear","gg"),t("isoWeekYear","GG"),i("weekYear",1),i("isoWeekYear",1),w("G",be),w("g",be),w("GG",b,y),w("gg",b,y),w("GGGG",me,de),w("gggg",me,de),w("GGGGG",ve,he),w("ggggg",ve,he),Te(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=h(e)}),Te(["gg","GG"],function(e,t,i,n){t[n]=p.parseTwoDigitYear(e)}),n("Q",0,"Qo","quarter"),t("quarter","Q"),i("quarter",7),w("Q",o),C("Q",function(e,t){t[A]=3*(h(e)-1)}),n("D",["DD",2],"Do","date"),t("date","D"),i("date",9),w("D",b),w("DD",b,y),w("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),C(["D","DD"],E),C("Do",function(e,t){t[E]=h(e.match(b)[0])});me=Me("Date",!0);n("DDD",["DDDD",3],"DDDo","dayOfYear"),t("dayOfYear","DDD"),i("dayOfYear",4),w("DDD",ge),w("DDDD",ue),C(["DDD","DDDD"],function(e,t,i){i._dayOfYear=h(e)}),n("m",["mm",2],0,"minute"),t("minute","m"),i("minute",14),w("m",b),w("mm",b,y),C(["m","mm"],S);var si,de=Me("Minutes",!1),ve=(n("s",["ss",2],0,"second"),t("second","s"),i("second",15),w("s",b),w("ss",b,y),C(["s","ss"],T),Me("Seconds",!1));for(n("S",0,0,function(){return~~(this.millisecond()/100)}),n(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),n(0,["SSS",3],0,"millisecond"),n(0,["SSSS",4],0,function(){return 10*this.millisecond()}),n(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),n(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),n(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),n(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),n(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),t("millisecond","ms"),i("millisecond",16),w("S",ge,o),w("SS",ge,y),w("SSS",ge,ue),si="SSSS";si.length<=9;si+="S")w(si,ye);function ai(e,t){t[ke]=h(1e3*("0."+e))}for(si="S";si.length<=9;si+="S")C(si,ai);he=Me("Milliseconds",!1);n("z",0,0,"zoneAbbr"),n("zz",0,0,"zoneName");o=Y.prototype;function li(e){return e}o.add=Ge,o.calendar=function(e,t){var i=Ht(e=e||R(),this).startOf("day"),i=p.calendarFormat(this,i)||"sameElse",t=t&&(g(t[i])?t[i].call(this,e):t[i]);return this.format(t||this.localeData().calendar(i,this,R(e)))},o.clone=function(){return new Y(this)},o.diff=function(e,t,i){var n,o,r;if(!this.isValid())return NaN;if(!(n=Ht(e,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),t=m(t)){case"year":r=Qt(this,n)/12;break;case"month":r=Qt(this,n);break;case"quarter":r=Qt(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return i?r:u(r)},o.endOf=function(e){var t;if(void 0===(e=m(e))||"millisecond"===e||!this.isValid())return this;var i=this._isUTC?ni:ii;switch(e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-ti(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-ti(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-ti(t,1e3)-1}return this._d.setTime(t),p.updateOffset(this,!0),this},o.format=function(e){return e=e||(this.isUtc()?p.defaultFormatUtc:p.defaultFormat),e=le(this,e),this.localeData().postformat(e)},o.from=function(e,t){return this.isValid()&&(s(e)&&e.isValid()||R(e).isValid())?O({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},o.fromNow=function(e){return this.from(R(),e)},o.to=function(e,t){return this.isValid()&&(s(e)&&e.isValid()||R(e).isValid())?O({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},o.toNow=function(e){return this.to(R(),e)},o.get=function(e){return g(this[e=m(e)])?this[e]():this},o.invalidAt=function(){return f(this).overflow},o.isAfter=function(e,t){return e=s(e)?e:R(e),!(!this.isValid()||!e.isValid())&&("millisecond"===(t=m(t)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},o.isBefore=function(e,t){return e=s(e)?e:R(e),!(!this.isValid()||!e.isValid())&&("millisecond"===(t=m(t)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},o.isBetween=function(e,t,i,n){return e=s(e)?e:R(e),t=s(t)?t:R(t),!!(this.isValid()&&e.isValid()&&t.isValid())&&(("("===(n=n||"()")[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===n[1]?this.isBefore(t,i):!this.isAfter(t,i)))},o.isSame=function(e,t){var e=s(e)?e:R(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=m(t)||"millisecond")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},o.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},o.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},o.isValid=function(){return W(this)},o.lang=tt,o.locale=Zt,o.localeData=Jt,o.max=fe,o.min=pe,o.parsingFlags=function(){return a({},f(this))},o.set=function(e,t){if("object"==typeof e)for(var i=function(e){var t,i=[];for(t in e)i.push({unit:t,priority:ne[t]});return i.sort(function(e,t){return e.priority-t.priority}),i}(e=ie(e)),n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit]);else if(g(this[e=m(e)]))return this[e](t);return this},o.startOf=function(e){var t;if(void 0===(e=m(e))||"millisecond"===e||!this.isValid())return this;var i=this._isUTC?ni:ii;switch(e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ti(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=ti(t,6e4);break;case"second":t=this._d.valueOf(),t-=ti(t,1e3)}return this._d.setTime(t),p.updateOffset(this,!0),this},o.subtract=Je,o.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},o.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},o.toDate=function(){return new Date(this.valueOf())},o.toISOString=function(e){if(!this.isValid())return null;var t=(e=!0!==e)?this.clone().utc():this;return t.year()<0||9999<t.year()?le(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):g(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",le(t,"Z")):le(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},o.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",e=(this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z"),"["+e+'("]'),i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";return this.format(e+i+"-MM-DD[T]HH:mm:ss.SSS"+(t+'[")]'))},o.toJSON=function(){return this.isValid()?this.toISOString():null},o.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},o.unix=function(){return Math.floor(this.valueOf()/1e3)},o.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},o.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},o.year=Le,o.isLeapYear=function(){return Fe(this.year())},o.weekYear=function(e){return ri.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},o.isoWeekYear=function(e){return ri.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},o.quarter=o.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},o.month=He,o.daysInMonth=function(){return Ie(this.year(),this.month())},o.week=o.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},o.isoWeek=o.isoWeeks=function(e){var t=Xe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},o.weeksInYear=function(){var e=this.localeData()._week;return Qe(this.year(),e.dow,e.doy)},o.isoWeeksInYear=function(){return Qe(this.year(),1,4)},o.date=me,o.day=o.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,i,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,i=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=i.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-n,"d")):n},o.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},o.isoWeekday=function(e){return this.isValid()?null!=e?(t=e,i=this.localeData(),i="string"==typeof t?i.weekdaysParse(t)%7||7:isNaN(t)?null:t,this.day(this.day()%7?i:i-7)):this.day()||7:null!=e?this:NaN;var t,i},o.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},o.hour=o.hours=_e,o.minute=o.minutes=de,o.second=o.seconds=ve,o.millisecond=o.milliseconds=he,o.utcOffset=function(e,t,i){var n,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?o:Vt(this);if("string"==typeof e){if(null===(e=Wt(Ce,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(n=Vt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==e&&(!t||this._changeInProgress?Xt(this,O(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,p.updateOffset(this,!0),this._changeInProgress=null)),this},o.utc=function(e){return this.utcOffset(0,e)},o.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Vt(this),"m")),this},o.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Wt(we,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},o.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?R(e).utcOffset():0,(this.utcOffset()-e)%60==0)},o.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},o.isLocal=function(){return!!this.isValid()&&!this._isUTC},o.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},o.isUtc=jt,o.isUTC=jt,o.zoneAbbr=function(){return this._isUTC?"UTC":""},o.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},o.dates=e("dates accessor is deprecated. Use date instead.",me),o.months=e("months accessor is deprecated. Use month instead",He),o.years=e("years accessor is deprecated. Use year instead",Le),o.zone=e("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),o.isDSTShifted=e("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e,t={};return z(t,this),(t=Ft(t))._a?(e=(t._isUTC?c:R)(t._a),this._isDSTShifted=this.isValid()&&0<q(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});y=J.prototype;function ci(e,t,i,n){var o=mt(),n=c().set(n,t);return o[i](n,e)}function ui(e,t,i){if(P(e)&&(t=e,e=void 0),e=e||"",null!=t)return ci(e,t,i,"month");for(var n=[],o=0;o<12;o++)n[o]=ci(e,o,i,"month");return n}function di(e,t,i,n){t=("boolean"==typeof e?P(t)&&(i=t,t=void 0):(t=e,e=!1,P(i=t)&&(i=t,t=void 0)),t||"");var o=mt(),r=e?o._week.dow:0;if(null!=i)return ci(t,(i+r)%7,n,"day");for(var s=[],a=0;a<7;a++)s[a]=ci(t,(a+r)%7,n,"day");return s}y.calendar=function(e,t,i){return g(e=this._calendar[e]||this._calendar.sameElse)?e.call(t,i):e},y.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},y.invalidDate=function(){return this._invalidDate},y.ordinal=function(e){return this._ordinal.replace("%d",e)},y.preparse=li,y.postformat=li,y.relativeTime=function(e,t,i,n){var o=this._relativeTime[i];return g(o)?o(e,t,i,n):o.replace(/%d/i,e)},y.pastFuture=function(e,t){return g(e=this._relativeTime[0<e?"future":"past"])?e(t):e.replace(/%s/i,t)},y.set=function(e){var t,i;for(i in e)g(t=e[i])?this[i]=t:this["_"+i]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},y.months=function(e,t){return e?(l(this._months)?this._months:this._months[(this._months.isFormat||Pe).test(t)?"format":"standalone"])[e.month()]:l(this._months)?this._months:this._months.standalone},y.monthsShort=function(e,t){return e?(l(this._monthsShort)?this._monthsShort:this._monthsShort[Pe.test(t)?"format":"standalone"])[e.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},y.monthsParse=function(e,t,i){var n,o;if(this._monthsParseExact)return function(e,t,i){var n,o,r,e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=c([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(o=k.call(this._shortMonthsParse,e))?o:null:-1!==(o=k.call(this._longMonthsParse,e))?o:null:"MMM"===t?-1!==(o=k.call(this._shortMonthsParse,e))||-1!==(o=k.call(this._longMonthsParse,e))?o:null:-1!==(o=k.call(this._longMonthsParse,e))||-1!==(o=k.call(this._shortMonthsParse,e))?o:null}.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=c([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},y.monthsRegex=function(e){return this._monthsParseExact?(d(this,"_monthsRegex")||ze.call(this),e?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=je),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},y.monthsShortRegex=function(e){return this._monthsParseExact?(d(this,"_monthsRegex")||ze.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Ve),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},y.week=function(e){return Xe(e,this._week.dow,this._week.doy).week},y.firstDayOfYear=function(){return this._week.doy},y.firstDayOfWeek=function(){return this._week.dow},y.weekdays=function(e,t){return t=l(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"],!0===e?Ze(t,this._week.dow):e?t[e.day()]:t},y.weekdaysMin=function(e){return!0===e?Ze(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},y.weekdaysShort=function(e){return!0===e?Ze(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},y.weekdaysParse=function(e,t,i){var n,o;if(this._weekdaysParseExact)return function(e,t,i){var n,o,r,e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=c([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(o=k.call(this._weekdaysParse,e))?o:null:"ddd"===t?-1!==(o=k.call(this._shortWeekdaysParse,e))?o:null:-1!==(o=k.call(this._minWeekdaysParse,e))?o:null:"dddd"===t?-1!==(o=k.call(this._weekdaysParse,e))||-1!==(o=k.call(this._shortWeekdaysParse,e))||-1!==(o=k.call(this._minWeekdaysParse,e))?o:null:"ddd"===t?-1!==(o=k.call(this._shortWeekdaysParse,e))||-1!==(o=k.call(this._weekdaysParse,e))||-1!==(o=k.call(this._minWeekdaysParse,e))?o:null:-1!==(o=k.call(this._minWeekdaysParse,e))||-1!==(o=k.call(this._weekdaysParse,e))||-1!==(o=k.call(this._shortWeekdaysParse,e))?o:null}.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=c([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}},y.weekdaysRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||rt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=it),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},y.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||rt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=nt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},y.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||rt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ot),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},y.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},y.meridiem=function(e,t,i){return 11<e?i?"pm":"PM":i?"am":"AM"},ft("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===h(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),p.lang=e("moment.lang is deprecated. Use moment.locale instead.",ft),p.langData=e("moment.langData is deprecated. Use moment.localeData instead.",mt);var F=Math.abs;function hi(e,t,i,n){t=O(t,i);return e._milliseconds+=n*t._milliseconds,e._days+=n*t._days,e._months+=n*t._months,e._bubble()}function pi(e){return e<0?Math.floor(e):Math.ceil(e)}function fi(e){return 4800*e/146097}function gi(e){return 146097*e/4800}function L(e){return function(){return this.as(e)}}ge=L("ms"),ue=L("s"),Ge=L("m"),fe=L("h"),pe=L("d"),Je=L("w"),_e=L("M"),de=L("Q"),ve=L("y");function mi(e){return function(){return this.isValid()?this._data[e]:NaN}}var he=mi("milliseconds"),me=mi("seconds"),Le=mi("minutes"),y=mi("hours"),vi=mi("days"),yi=mi("months"),bi=mi("years");var wi=Math.round,M={ss:44,s:45,m:45,h:22,d:26,M:11};function Ci(e,t,i){var n=O(e).abs(),o=wi(n.as("s")),r=wi(n.as("m")),s=wi(n.as("h")),a=wi(n.as("d")),l=wi(n.as("M")),n=wi(n.as("y")),o=(o<=M.ss?["s",o]:o<M.s&&["ss",o])||r<=1&&["m"]||r<M.m&&["mm",r]||s<=1&&["h"]||s<M.h&&["hh",s]||a<=1&&["d"]||a<M.d&&["dd",a]||l<=1&&["M"]||l<M.M&&["MM",l]||n<=1&&["y"]||["yy",n];return o[2]=t,o[3]=0<+e,o[4]=i,function(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}.apply(null,o)}var _i=Math.abs;function Ai(e){return(0<e)-(e<0)||+e}function Ei(){if(!this.isValid())return this.localeData().invalidDate();var e=_i(this._milliseconds)/1e3,t=_i(this._days),i=_i(this._months),n=u(e/60),o=u(n/60),r=(e%=60,n%=60,u(i/12)),i=i%=12,e=e?e.toFixed(3).replace(/\.?0+$/,""):"",s=this.asSeconds();if(!s)return"P0D";var a=Ai(this._months)!==Ai(s)?"-":"",l=Ai(this._days)!==Ai(s)?"-":"",c=Ai(this._milliseconds)!==Ai(s)?"-":"";return(s<0?"-":"")+"P"+(r?a+r+"Y":"")+(i?a+i+"M":"")+(t?l+t+"D":"")+(o||n||e?"T":"")+(o?c+o+"H":"")+(n?c+n+"M":"")+(e?c+e+"S":"")}var N=$t.prototype;return N.isValid=function(){return this._isValid},N.abs=function(){var e=this._data;return this._milliseconds=F(this._milliseconds),this._days=F(this._days),this._months=F(this._months),e.milliseconds=F(e.milliseconds),e.seconds=F(e.seconds),e.minutes=F(e.minutes),e.hours=F(e.hours),e.months=F(e.months),e.years=F(e.years),this},N.add=function(e,t){return hi(this,e,t,1)},N.subtract=function(e,t){return hi(this,e,t,-1)},N.as=function(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=m(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,i=this._months+fi(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(gi(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},N.asMilliseconds=ge,N.asSeconds=ue,N.asMinutes=Ge,N.asHours=fe,N.asDays=pe,N.asWeeks=Je,N.asMonths=_e,N.asQuarters=de,N.asYears=ve,N.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*h(this._months/12):NaN},N._bubble=function(){var e=this._milliseconds,t=this._days,i=this._months,n=this._data;return 0<=e&&0<=t&&0<=i||e<=0&&t<=0&&i<=0||(e+=864e5*pi(gi(i)+t),i=t=0),n.milliseconds=e%1e3,e=u(e/1e3),n.seconds=e%60,e=u(e/60),n.minutes=e%60,e=u(e/60),n.hours=e%24,t+=u(e/24),i+=e=u(fi(t)),t-=pi(gi(e)),e=u(i/12),i%=12,n.days=t,n.months=i,n.years=e,this},N.clone=function(){return O(this)},N.get=function(e){return e=m(e),this.isValid()?this[e+"s"]():NaN},N.milliseconds=he,N.seconds=me,N.minutes=Le,N.hours=y,N.days=vi,N.weeks=function(){return u(this.days()/7)},N.months=yi,N.years=bi,N.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),i=Ci(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)},N.toISOString=Ei,N.toString=Ei,N.toJSON=Ei,N.locale=Zt,N.localeData=Jt,N.toIsoString=e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ei),N.lang=tt,n("X",0,0,"unix"),n("x",0,0,"valueOf"),w("x",be),w("X",/[+-]?\d+(\.\d{1,3})?/),C("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),C("x",function(e,t,i){i._d=new Date(h(e))}),p.version="2.24.0",$=R,p.fn=o,p.min=function(){return Mt("isBefore",[].slice.call(arguments,0))},p.max=function(){return Mt("isAfter",[].slice.call(arguments,0))},p.now=function(){return Date.now?Date.now():+new Date},p.utc=c,p.unix=function(e){return R(1e3*e)},p.months=function(e,t){return ui(e,t,"months")},p.isDate=G,p.locale=ft,p.invalid=H,p.duration=O,p.isMoment=s,p.weekdays=function(e,t,i){return di(e,t,i,"weekdays")},p.parseZone=function(){return R.apply(null,arguments).parseZone()},p.localeData=mt,p.isDuration=It,p.monthsShort=function(e,t){return ui(e,t,"monthsShort")},p.weekdaysMin=function(e,t,i){return di(e,t,i,"weekdaysMin")},p.defineLocale=gt,p.updateLocale=function(e,t){var i,n;return null!=t?(i=ut,(n=new J(t=Z(i=null!=(n=pt(e))?n._config:i,t))).parentLocale=D[e],D[e]=n,ft(e)):null!=D[e]&&(null!=D[e].parentLocale?D[e]=D[e].parentLocale:null!=D[e]&&delete D[e]),D[e]},p.locales=function(){return ee(D)},p.weekdaysShort=function(e,t,i){return di(e,t,i,"weekdaysShort")},p.normalizeUnits=m,p.relativeTimeRounding=function(e){return void 0===e?wi:"function"==typeof e&&(wi=e,!0)},p.relativeTimeThreshold=function(e,t){return void 0!==M[e]&&(void 0===t?M[e]:(M[e]=t,"s"===e&&(M.ss=t-1),!0))},p.calendarFormat=function(e,t){return(e=e.diff(t,"days",!0))<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"},p.prototype=o,p.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},p}),!function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,function(o){"use strict";var t,c={},r={},u={},d={},e=(o&&"string"==typeof o.version||T("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/"),o.version.split(".")),i=+e[0],n=+e[1];function a(e){return 96<e?e-87:64<e?e-29:e-48}function s(e){var t=0,i=e.split("."),n=i[0],o=i[1]||"",r=1,s=0,i=1;for(45===e.charCodeAt(0)&&(i=-(t=1));t<n.length;t++)s=60*s+a(n.charCodeAt(t));for(t=0;t<o.length;t++)r/=60,s+=a(o.charCodeAt(t))*r;return s*i}function h(e){for(var t=0;t<e.length;t++)e[t]=s(e[t])}function l(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=e[t[n]];return i}function p(e){for(var e=e.split("|"),t=e[2].split(" "),i=e[3].split(""),n=e[4].split(" "),o=(h(t),h(i),h(n),n),r=i.length,s=0;s<r;s++)o[s]=Math.round((o[s-1]||0)+6e4*o[s]);return o[r-1]=1/0,{name:e[0],abbrs:l(e[1].split(" "),i),offsets:l(t,i),untils:n,population:0|e[5]}}function f(e){e&&this._set(p(e))}function g(e){var t=e.toTimeString(),i=t.match(/\([a-z ]+\)/i);"GMT"===(i=i&&i[0]?(i=i[0].match(/[A-Z]/g))?i.join(""):void 0:(i=t.match(/[A-Z]{3,5}/g))?i[0]:void 0)&&(i=void 0),this.at=+e,this.abbr=i,this.offset=e.getTimezoneOffset()}function m(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function v(){for(var e,t,i=(new Date).getFullYear()-2,n=new g(new Date(i,0,1)),o=[n],r=1;r<48;r++)(t=new g(new Date(i,r,1))).offset!==n.offset&&(e=function(e,t){for(var i;i=6e4*((t.at-e.at)/12e4|0);)(i=new g(new Date(e.at+i))).offset===e.offset?e=i:t=i;return e}(n,t),o.push(e),o.push(new g(new Date(e.at+6e4)))),n=t;for(r=0;r<4;r++)o.push(new g(new Date(i+r,0,1))),o.push(new g(new Date(i+r,6,1)));return o}function y(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:t.zone.population-e.zone.population}function b(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&3<e.length){var t=u[w(e)];if(t)return t;T("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}for(var i,n,o=v(),r=o.length,s=function(e){for(var t,i,n=e.length,o={},r=[],s=0;s<n;s++)for(t in i=d[e[s].offset]||{})i.hasOwnProperty(t)&&(o[t]=!0);for(s in o)o.hasOwnProperty(s)&&r.push(u[s]);return r}(o),a=[],l=0;l<s.length;l++){for(i=new m(_(s[l])),n=0;n<r;n++)i.scoreOffsetAt(o[n]);a.push(i)}return a.sort(y),0<a.length?a[0].zone.name:void 0}function w(e){return(e||"").toLowerCase().replace(/\//g,"_")}function C(e){var t,i,n,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++){o=w(i=(n=e[t].split("|"))[0]),c[o]=e[t],u[o]=i,s=r=l=a=void 0;var r,s,a=o,l=n[2].split(" ");for(h(l),r=0;r<l.length;r++)s=l[r],d[s]=d[s]||{},d[s][a]=!0}}function _(e,t){e=w(e);var i=c[e];return i instanceof f?i:"string"==typeof i?(i=new f(i),c[e]=i):r[e]&&t!==_&&(t=_(r[e],_))?((i=c[e]=new f)._set(t),i.name=u[e],i):null}function A(e){var t,i,n,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=w((i=e[t].split("|"))[0]),o=w(i[1]),r[n]=o,u[n]=i[0],r[o]=n,u[o]=i[1]}function E(e){C(e.zones),A(e.links),k.dataVersion=e.version}function x(e){return x.didShowError||(x.didShowError=!0,T("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!_(e)}function S(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function T(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function k(e){var t=Array.prototype.slice.call(arguments,0,-1),i=arguments[arguments.length-1],n=_(i),t=o.utc.apply(null,t);return n&&!o.isMoment(e)&&S(t)&&t.add(n.parse(t),"minutes"),t.tz(i),t}(i<2||2==i&&n<6)&&T("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+o.version+". See momentjs.com"),f.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){for(var t=+e,i=this.untils,n=0;n<i.length;n++)if(t<i[n])return n},parse:function(e){for(var t,i,n,o=+e,r=this.offsets,s=this.untils,a=s.length-1,l=0;l<a;l++)if(t=r[l],i=r[l+1],n=r[l&&l-1],t<i&&k.moveAmbiguousForward?t=i:n<t&&k.moveInvalidForward&&(t=n),o<s[l]-6e4*t)return r[l];return r[a]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return T("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},m.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},k.version="0.5.25",k.dataVersion="",k._zones=c,k._links=r,k._names=u,k.add=C,k.link=A,k.load=E,k.zone=_,k.zoneExists=x,k.guess=function(e){return t=t&&!e?t:b()},k.names=function(){var e,t=[];for(e in u)u.hasOwnProperty(e)&&(c[e]||c[r[e]])&&u[e]&&t.push(u[e]);return t.sort()},k.Zone=f,k.unpack=p,k.unpackBase60=s,k.needsOffset=S,k.moveInvalidForward=!0,k.moveAmbiguousForward=!1;var D,e=o.fn;function R(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function O(e){return function(){return this._z=null,e.apply(this,arguments)}}o.tz=k,o.defaultZone=null,o.updateOffset=function(e,t){var i,n=o.defaultZone;void 0===e._z&&(n&&S(e)&&!e._isUTC&&(e._d=o.utc(e._a)._d,e.utc().add(n.parse(e),"minutes")),e._z=n),e._z&&(n=e._z.utcOffset(e),Math.abs(n)<16&&(n/=60),void 0!==e.utcOffset?(i=e._z,e.utcOffset(-n,t),e._z=i):e.zone(n,t))},e.tz=function(e,t){if(e){if("string"!=typeof e)throw new Error("Time zone name must be a string, got "+e+" ["+typeof e+"]");return this._z=_(e),this._z?o.updateOffset(this,t):T("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},e.zoneName=R(e.zoneName),e.zoneAbbr=R(e.zoneAbbr),e.utc=O(e.utc),e.local=O(e.local),e.utcOffset=(D=e.utcOffset,function(){return 0<arguments.length&&(this._z=null),D.apply(this,arguments)}),o.tz.setDefault=function(e){return(i<2||2==i&&n<9)&&T("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+o.version+"."),o.defaultZone=e?_(e):null,o};e=o.momentProperties;return"[object Array]"===Object.prototype.toString.call(e)?(e.push("_z"),e.push("_a")):e&&(e._z=null),E({version:"2019a",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|01010|1M2m0 gL0 e10 mn0|15e6","Africa/Casablanca|+00 +01|0 -10|01010101010101010101010101010101|1LHC0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Khartoum|EAT CAT|-30 -20|01|1Usl0|51e5","Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00","Africa/Tripoli|EET|-20|0||11e5","Africa/Windhoek|CAT WAT|-20 -10|010101010|1LKo0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1Lzo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1Lzn0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1LEP0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1LKw0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|20e6","America/Managua|CST|60|0||22e5","America/La_Paz|-04|40|0||19e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1Lzl0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|01010101010101010101010|1LqP0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0|77e4","America/Cancun|CST CDT EST|60 50 50|0102|1LKw0 1lb0 Dd0|63e4","America/Caracas|-0430 -04|4u 40|01|1QMT0|29e5","America/Chicago|CST CDT|60 50|01010101010101010101010|1Lzk0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1LKx0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|81e4","America/Phoenix|MST|70|0||42e5","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1Lzm0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/New_York|EST EDT|50 40|01010101010101010101010|1Lzj0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Fort_Nelson|PST PDT MST|80 70 70|0102|1Lzm0 1zb0 Op0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1Lzi0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02|30 20|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e3","America/Grand_Turk|EST EDT AST|50 40 40|0101210101010101010|1Lzj0 1zb0 Op0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1Lzh0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Metlakatla|PST AKST AKDT|80 90 80|012121201212121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1Lzh0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Montevideo|-02 -03|20 30|0101|1Lzg0 1o10 11z0|17e5","America/Noronha|-02|20|0||30e2","America/Port-au-Prince|EST EDT|50 40|010101010101010101010|1Lzj0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","Antarctica/Palmer|-03 -04|30 40|01010|1LSP0 Rd0 46n0 Ap0|40","America/Santiago|-03 -04|30 40|010101010101010101010|1LSP0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0|62e5","America/Sao_Paulo|-02 -03|20 30|01010101010101010101010|1LqO0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1Lzhu 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+08 +11|-80 -b0|010|1RWg0 3m10|10","Asia/Bangkok|+07|-70|0||15e6","Pacific/Port_Moresby|+10|-a0|0||25e4","Pacific/Guadalcanal|+11|-b0|0||11e4","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1LKe0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00|14e5","Asia/Baghdad|+03|-30|0||66e5","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST|-20 -30|01010101010101010101010|1LGK0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Baku|+04 +05|-40 -50|01010|1LHA0 1o00 11A0 1o00|27e5","Asia/Barnaul|+07 +06|-70 -60|010|1N7v0 3rd0","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1LHy0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|22e5","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+10 +08 +09|-a0 -80 -90|012|1N7s0 3re0|33e4","Asia/Ulaanbaatar|+08 +09|-80 -90|01010|1O8G0 1cJ0 1cP0 1cJ0|12e5","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1LGK0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0|26e5","Asia/Dili|+09|-90|0||19e4","Asia/Dubai|+04|-40|0||39e5","Asia/Famagusta|EET EEST +03|-20 -30 -30|0101012010101010101010|1LHB0 1o00 11A0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1LGK0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|+07 +08|-70 -80|01010|1O8H0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|+09 +08|-90 -80|01|1N7t0|60e4","Europe/Istanbul|EET EEST +03|-20 -30 -30|0101012|1LI10 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1LGM0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Yakutsk|+10 +09|-a0 -90|01|1N7s0|28e4","Asia/Krasnoyarsk|+08 +07|-80 -70|01|1N7u0|10e5","Asia/Magadan|+12 +10 +11|-c0 -a0 -b0|012|1N7q0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|35e5","Asia/Novosibirsk|+07 +06|-70 -60|010|1N7v0 4eN0|15e5","Asia/Omsk|+07 +06|-70 -60|01|1N7v0|12e5","Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5","Asia/Qyzylorda|+06 +05|-60 -50|01|1Xei0|73e4","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+11 +10|-b0 -a0|010|1N7r0 3rd0|58e4","Asia/Seoul|KST|-90|0||23e6","Asia/Srednekolymsk|+12 +11|-c0 -b0|01|1N7q0|35e2","Asia/Tehran|+0330 +0430|-3u -4u|01010101010101010101010|1LEku 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+07 +06|-70 -60|010|1N7v0 3Qp0|10e5","Asia/Vladivostok|+11 +10|-b0 -a0|01|1N7r0|60e4","Asia/Yekaterinburg|+06 +05|-60 -50|01|1N7w0|14e5","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1LKg0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1LKgu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1LKf0 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|010101010101010101010|1LSP0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Etc/GMT-1|+01|-10|0|","Pacific/Fakaofo|+13|-d0|0||483","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0|","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0|","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0|","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0|","Europe/Ulyanovsk|+04 +03|-40 -30|010|1N7y0 3rd0|13e5","Europe/London|GMT BST|0 -10|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1LHA0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|67e4","Europe/Kaliningrad|+03 EET|-30 -20|01|1N7z0|44e4","Europe/Kirov|+04 +03|-40 -30|01|1N7y0|48e4","Europe/Moscow|MSK MSK|-40 -30|01|1N7y0|16e6","Europe/Saratov|+04 +03|-40 -30|010|1N7y0 5810","Europe/Simferopol|EET MSK MSK|-20 -40 -30|012|1LHA0 1nW0|33e4","Europe/Volgograd|+04 +03|-40 -30|010|1N7y0 9Jd0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1LHB0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1LKe0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101010101010101010|1LKe0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00|37e3","Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4","Pacific/Fiji|+13 +12|-d0 -c0|01010101010101010101010|1Lfp0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+1130 +11|-bu -b0|01|1PoCu|25e4","Pacific/Tongatapu|+13 +14|-d0 -e0|010|1S4d0 s00|75e3"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Juba","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Araguaina","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Bahia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/La_Paz|America/Boa_Vista","America/La_Paz|America/Guyana","America/La_Paz|America/Manaus","America/La_Paz|America/Porto_Velho","America/La_Paz|Brazil/West","America/La_Paz|Etc/GMT+4","America/Lima|America/Bogota","America/Lima|America/Eirunepe","America/Lima|America/Guayaquil","America/Lima|America/Porto_Acre","America/Lima|America/Rio_Branco","America/Lima|Brazil/Acre","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Dawson","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|America/Whitehorse","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Canada/Yukon","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/Palmer|America/Punta_Arenas","Asia/Baghdad|Antarctica/Syowa","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Baghdad|Etc/GMT-3","Asia/Baghdad|Europe/Minsk","Asia/Bangkok|Antarctica/Davis","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Qostanay","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dili|Etc/GMT-9","Asia/Dili|Pacific/Palau","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Samara","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Choibalsan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Vladivostok|Asia/Ust-Nera","Asia/Yakutsk|Asia/Khandyga","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Europe/Ulyanovsk|Europe/Astrakhan","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Fakaofo|Etc/GMT-13","Pacific/Fakaofo|Pacific/Enderbury","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guadalcanal|Antarctica/Macquarie","Pacific/Guadalcanal|Etc/GMT-11","Pacific/Guadalcanal|Pacific/Efate","Pacific/Guadalcanal|Pacific/Kosrae","Pacific/Guadalcanal|Pacific/Noumea","Pacific/Guadalcanal|Pacific/Pohnpei","Pacific/Guadalcanal|Pacific/Ponape","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Port_Moresby|Antarctica/DumontDUrville","Pacific/Port_Moresby|Etc/GMT-10","Pacific/Port_Moresby|Pacific/Chuuk","Pacific/Port_Moresby|Pacific/Truk","Pacific/Port_Moresby|Pacific/Yap","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga"]}),o}),!function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}(function(g){var n=g(window),m=g(document),v=g(document.documentElement),y=null!=document.documentElement.style.transition;function b(n,t,i,e){if(!n)return b;function o(){return this.start()}var r=!1,a={id:n.id||"P"+Math.abs(~~(Math.random()*new Date))},l=i?g.extend(!0,{},i.defaults,e):e||{},s=g.extend({},b.klasses(),l.klass),c=g(n),u=o.prototype={constructor:o,$node:c,start:function(){return a&&a.start?u:(a.methods={},a.start=!0,a.open=!1,a.type=n.type,n.autofocus=n==_(),n.readOnly=!l.editable,n.id=n.id||a.id,"text"!=n.type&&(n.type="text"),u.component=new i(u,l),u.$root=g('<div class="'+s.picker+'" id="'+n.id+'_root" />'),C(u.$root[0],"hidden",!0),u.$holder=g(d()).appendTo(u.$root),h(),l.formatSubmit&&(!0===l.hiddenName?(e=n.name,n.name=""):e=(e=["string"==typeof l.hiddenPrefix?l.hiddenPrefix:"","string"==typeof l.hiddenSuffix?l.hiddenSuffix:"_submit"])[0]+n.name+e[1],u._hidden=g('<input type=hidden name="'+e+'"'+(c.data("value")||n.value?' value="'+u.get("select",l.formatSubmit)+'"':"")+">")[0],c.on("change."+a.id,function(){u._hidden.value=n.value?u.get("select",l.formatSubmit):""})),c.data(t,u).addClass(s.input).val(c.data("value")?u.get("select",l.format):n.value),l.editable||c.on("focus."+a.id+" click."+a.id,function(e){e.preventDefault(),u.open()}).on("keydown."+a.id,f),C(n,{haspopup:!0,expanded:!1,readonly:!1,owns:n.id+"_root"}),l.containerHidden?g(l.containerHidden).append(u._hidden):c.after(u._hidden),l.container?g(l.container).append(u.$root):c.after(u.$root),u.on({start:u.component.onStart,render:u.component.onRender,stop:u.component.onStop,open:u.component.onOpen,close:u.component.onClose,set:u.component.onSet}).on({start:l.onStart,render:l.onRender,stop:l.onStop,open:l.onOpen,close:l.onClose,set:l.onSet}),r=function(e){var t;e.currentStyle?t=e.currentStyle.position:window.getComputedStyle&&(t=getComputedStyle(e).position);return"fixed"==t}(u.$holder[0]),n.autofocus&&u.open(),u.trigger("start").trigger("render"));var e},render:function(e){return e?(u.$holder=g(d()),h(),u.$root.html(u.$holder)):u.$root.find("."+s.box).html(u.component.nodes(a.open)),u.trigger("render")},stop:function(){return a.start&&(u.close(),u._hidden&&u._hidden.parentNode.removeChild(u._hidden),u.$root.remove(),c.removeClass(s.input).removeData(t),setTimeout(function(){c.off("."+a.id)},0),n.type=a.type,n.readOnly=!1,u.trigger("stop"),a.methods={},a.start=!1),u},open:function(e){return a.open?u:(c.addClass(s.active),C(n,"expanded",!0),setTimeout(function(){u.$root.addClass(s.opened),C(u.$root[0],"hidden",!1)},0),!1!==e&&(a.open=!0,r&&v.css("overflow","hidden").css("padding-right","+="+w()),r&&y?u.$holder.find("."+s.frame).one("transitionend",function(){u.$holder[0].focus()}):u.$holder[0].focus(),m.on("click."+a.id+" focusin."+a.id,function(e){var t=e.target;t!=n&&t!=document&&3!=e.which&&u.close(t===u.$holder[0])}).on("keydown."+a.id,function(e){var t=e.keyCode,i=u.component.key[t],n=e.target;27==t?u.close(!0):n!=u.$holder[0]||!i&&13!=t?g.contains(u.$root[0],n)&&13==t&&(e.preventDefault(),n.click()):(e.preventDefault(),i?b._.trigger(u.component.key.go,u,[b._.trigger(i)]):u.$root.find("."+s.highlighted).hasClass(s.disabled)||(u.set("select",u.component.item.highlight),l.closeOnSelect&&u.close(!0)))})),u.trigger("open"))},close:function(e){return e&&(l.editable?n.focus():(u.$holder.off("focus.toOpen").focus(),setTimeout(function(){u.$holder.on("focus.toOpen",p)},0))),c.removeClass(s.active),C(n,"expanded",!1),setTimeout(function(){u.$root.removeClass(s.opened+" "+s.focused),C(u.$root[0],"hidden",!0)},0),a.open?(a.open=!1,r&&v.css("overflow","").css("padding-right","-="+w()),m.off("."+a.id),u.trigger("close")):u},clear:function(e){return u.set("clear",null,e)},set:function(e,t,i){var n,o,r=g.isPlainObject(e),s=r?e:{};if(i=r&&g.isPlainObject(t)?t:i||{},e){for(n in r||(s[e]=t),s)o=s[n],n in u.component.item&&(void 0===o&&(o=null),u.component.set(n,o,i)),"select"!=n&&"clear"!=n||c.val("clear"==n?"":u.get(n,l.format)).trigger("change");u.render()}return i.muted?u:u.trigger("set",s)},get:function(e,t){if(null!=a[e=e||"value"])return a[e];if("valueSubmit"==e){if(u._hidden)return u._hidden.value;e="value"}return"value"==e?n.value:e in u.component.item?"string"==typeof t?(i=u.component.get(e))?b._.trigger(u.component.formats.toString,u.component,[t,i]):"":u.component.get(e):void 0;var i},on:function(e,t,i){var n,o,r=g.isPlainObject(e),s=r?e:{};if(e)for(n in r||(s[e]=t),s)o=s[n],a.methods[n=i?"_"+n:n]=a.methods[n]||[],a.methods[n].push(o);return u},off:function(){var e,t=arguments,i=0;for(namesCount=t.length;i<namesCount;i+=1)(e=t[i])in a.methods&&delete a.methods[e];return u},trigger:function(e,t){function i(e){(e=a.methods[e])&&e.map(function(e){b._.trigger(e,u,[t])})}return i("_"+e),i(e),u}};function d(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",u.component.nodes(a.open),s.box),s.wrap),s.frame),s.holder,'tabindex="-1"')}function h(){u.$holder.on({keydown:f,"focus.toOpen":p,blur:function(){c.removeClass(s.target)},focusin:function(e){u.$root.removeClass(s.focused),e.stopPropagation()},"mousedown click":function(e){var t=e.target;t!=u.$holder[0]&&(e.stopPropagation(),"mousedown"!=e.type||g(t).is("input, select, textarea, button, option")||(e.preventDefault(),u.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=g(this),t=e.data(),e=e.hasClass(s.navDisabled)||e.hasClass(s.disabled),i=(i=_())&&(i.type||i.href);(e||i&&!g.contains(u.$root[0],i))&&u.$holder[0].focus(),!e&&t.nav?u.set("highlight",u.component.item.highlight,{nav:t.nav}):!e&&"pick"in t?(u.set("select",t.pick),l.closeOnSelect&&u.close(!0)):t.clear?(u.clear(),l.closeOnClear&&u.close(!0)):t.close&&u.close(!0)})}function p(e){e.stopPropagation(),c.addClass(s.target),u.$root.addClass(s.focused),u.open()}function f(e){var t=e.keyCode,i=/^(8|46)$/.test(t);if(27==t)return u.close(!0),!1;(32==t||i||!a.open&&u.component.key[t])&&(e.preventDefault(),e.stopPropagation(),i?u.clear().close():u.open())}return new o}function w(){if(v.height()<=n.height())return 0;var e=g('<div style="visibility:hidden;width:100px" />').appendTo("body"),t=e[0].offsetWidth;e.css("overflow","scroll");var i=g('<div style="width:100%" />').appendTo(e)[0].offsetWidth;return e.remove(),t-i}function C(e,t,i){if(g.isPlainObject(t))for(var n in t)o(e,n,t[n]);else o(e,t,i)}function o(e,t,i){e.setAttribute(("role"==t?"":"aria-")+t,i)}function _(){try{return document.activeElement}catch(e){}}return b.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},b._={group:function(e){for(var t,i="",n=b._.trigger(e.min,e);n<=b._.trigger(e.max,e,[n]);n+=e.i)t=b._.trigger(e.item,e,[n]),i+=b._.node(e.node,t[0],t[1],t[2]);return i},node:function(e,t,i,n){return t?"<"+e+(i=i?' class="'+i+'"':"")+(n=n?" "+n:"")+">"+(t=g.isArray(t)?t.join(""):t)+"</"+e+">":""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return-1<{}.toString.call(e).indexOf("Date")&&this.isInteger(e.getDate())},isInteger:function(e){return-1<{}.toString.call(e).indexOf("Number")&&e%1==0},ariaAttr:function(e,t){g.isPlainObject(e)||(e={attribute:t});for(var i in t="",e){var n=("role"==i?"":"aria-")+i,o=e[i];t+=null==o?"":n+'="'+e[i]+'"'}return t}},b.extend=function(n,o){g.fn[n]=function(e,t){var i=this.data(n);return"picker"==e?i:i&&"string"==typeof e?b._.trigger(i[e],i,[t]):this.each(function(){g(this).data(n)||new b(this,n,o,e)})},g.fn[n].defaults=o.defaults},b}),!function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,f){var t,m=e._;function i(t,i){function e(){return r.currentStyle?"rtl"==r.currentStyle.direction:"rtl"==getComputedStyle(t.$root[0]).direction}var n,o=this,r=t.$node[0],s=r.value,a=t.$node.data("value"),s=a||s,a=a?i.formatSubmit:i.format;o.settings=i,o.$node=t.$node,o.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},o.item={},o.item.clear=null,o.item.disable=(i.disable||[]).slice(0),o.item.enable=-(!0===(n=o.item.disable)[0]?n.shift():-1),o.set("min",i.min).set("max",i.max).set("now"),s?o.set("select",s,{format:a,defaultValue:!0}):o.set("select",null).set("highlight",o.item.now),o.key={40:7,38:-7,39:function(){return e()?-1:1},37:function(){return e()?1:-1},go:function(e){var t=o.item.highlight,t=new Date(t.year,t.month,t.date+e);o.set("highlight",t,{interval:e}),this.render()}},t.on("render",function(){t.$root.find("."+i.klass.selectMonth).on("change",function(){var e=this.value;e&&(t.set("highlight",[t.get("view").year,e,t.get("highlight").date]),t.$root.find("."+i.klass.selectMonth).trigger("focus"))}),t.$root.find("."+i.klass.selectYear).on("change",function(){var e=this.value;e&&(t.set("highlight",[e,t.get("view").month,t.get("highlight").date]),t.$root.find("."+i.klass.selectYear).trigger("focus"))})},1).on("open",function(){var e="";o.disabled(o.get("now"))&&(e=":not(."+i.klass.buttonToday+")"),t.$root.find("button"+e+", select").attr("disabled",!1)},1).on("close",function(){t.$root.find("button, select").attr("disabled",!0)},1)}function n(e,t,i){e=e.match(/[^\x00-\x7F]+|\w+/)[0];return i.mm||i.m||(i.m=t.indexOf(e)+1),e.length}function o(e){return e.match(/\w+/)[0].length}i.prototype.set=function(t,i,n){var o=this,e=o.item;return null===i?e[t="clear"==t?"select":t]=i:(e["enable"==t?"disable":"flip"==t?"enable":t]=o.queue[t].split(" ").map(function(e){return i=o[e](t,i,n)}).pop(),"select"==t?o.set("highlight",e.select,n):"highlight"==t?o.set("view",e.highlight,n):t.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&o.disabled(e.select)&&o.set("select",e.select,n),e.highlight&&o.disabled(e.highlight)&&o.set("highlight",e.highlight,n))),o},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,t,i){var n;return(t=void 0===t?e:t)==-1/0||t==1/0?n=t:t=f.isPlainObject(t)&&m.isInteger(t.pick)?t.obj:f.isArray(t)?(t=new Date(t[0],t[1],t[2]),m.isDate(t)?t:this.create().obj):m.isInteger(t)||m.isDate(t)?this.normalize(new Date(t),i):this.now(e,t,i),{year:n||t.getFullYear(),month:n||t.getMonth(),date:n||t.getDate(),day:n||t.getDay(),obj:n||t,pick:n||t.getTime()}},i.prototype.createRange=function(e,t){function i(e){return!0===e||f.isArray(e)||m.isDate(e)?n.create(e):e}var n=this;return m.isInteger(e)||(e=i(e)),m.isInteger(t)||(t=i(t)),m.isInteger(e)&&f.isPlainObject(t)?e=[t.year,t.month,t.date+e]:m.isInteger(t)&&f.isPlainObject(e)&&(t=[e.year,e.month,e.date+t]),{from:i(e),to:i(t)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){return e=this.createRange(e.from,e.to),t=this.createRange(t.from,t.to),this.withinRange(e,t.from)||this.withinRange(e,t.to)||this.withinRange(t,e.from)||this.withinRange(t,e.to)},i.prototype.now=function(e,t,i){return t=new Date,i&&i.rel&&t.setDate(t.getDate()+i.rel),this.normalize(t,i)},i.prototype.navigate=function(e,t,i){var n,o,r,s=f.isArray(t),a=f.isPlainObject(t),l=this.item.view;if(s||a){for(r=a?(n=t.year,o=t.month,t.date):(n=+t[0],o=+t[1],+t[2]),i&&i.nav&&l&&l.month!==o&&(n=l.year,o=l.month),n=(s=new Date(n,o+(i&&i.nav?i.nav:0),1)).getFullYear(),o=s.getMonth();new Date(n,o,r).getMonth()!==o;)--r;t=[n,o,r]}return t},i.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},i.prototype.measure=function(e,t){return t?"string"==typeof t?t=this.parse(e,t):m.isInteger(t)&&(t=this.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},i.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},i.prototype.validate=function(e,i,t){var n,o,r,s,a=this,l=i,c=t&&t.interval?t.interval:1,u=-1===a.item.enable,d=a.item.min,h=a.item.max,p=u&&a.item.disable.filter(function(e){var t;return f.isArray(e)&&((t=a.create(e).pick)<i.pick?n=!0:t>i.pick&&(o=!0)),m.isInteger(e)}).length;if((!t||!t.nav&&!t.defaultValue)&&(!u&&a.disabled(i)||u&&a.disabled(i)&&(p||n||o)||!u&&(i.pick<=d.pick||i.pick>=h.pick)))for(u&&!p&&(!o&&0<c||!n&&c<0)&&(c*=-1);a.disabled(i)&&(1<Math.abs(c)&&(i.month<l.month||i.month>l.month)&&(i=l,c=0<c?1:-1),i.pick<=d.pick?(r=!0,c=1,i=a.create([d.year,d.month,d.date+(i.pick===d.pick?0:-1)])):i.pick>=h.pick&&(s=!0,c=-1,i=a.create([h.year,h.month,h.date+(i.pick===h.pick?0:1)])),!r||!s);)i=a.create([i.year,i.month,i.date+c]);return i},i.prototype.disabled=function(t){var i=this,e=(e=i.item.disable.filter(function(e){return m.isInteger(e)?t.day===(i.settings.firstDay?e:e-1)%7:f.isArray(e)||m.isDate(e)?t.pick===i.create(e).pick:f.isPlainObject(e)?i.withinRange(e,t):void 0})).length&&!e.filter(function(e){return f.isArray(e)&&"inverted"==e[3]||f.isPlainObject(e)&&e.inverted}).length;return-1===i.item.enable?!e:e||t.pick<i.item.min.pick||t.pick>i.item.max.pick},i.prototype.parse=function(e,n,t){var o=this,r={};return n&&"string"==typeof n?(t&&t.format||((t=t||{}).format=o.settings.format),o.formats.toArray(t.format).map(function(e){var t=o.formats[e],i=t?m.trigger(t,o,[n,r]):e.replace(/^!/,"").length;t&&(r[e]=n.substr(0,i)),n=n.substr(i)}),[r.yyyy||r.yy,+(r.mm||r.m)-1,r.dd||r.d]):n},i.prototype.formats={d:function(e,t){return e?m.digits(e):t.date},dd:function(e,t){return e?2:m.lead(t.date)},ddd:function(e,t){return e?o(e):this.settings.weekdaysShort[t.day]},dddd:function(e,t){return e?o(e):this.settings.weekdaysFull[t.day]},m:function(e,t){return e?m.digits(e):t.month+1},mm:function(e,t){return e?2:m.lead(t.month+1)},mmm:function(e,t){var i=this.settings.monthsShort;return e?n(e,i,t):i[t.month]},mmmm:function(e,t){var i=this.settings.monthsFull;return e?n(e,i,t):i[t.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return m.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}},i.prototype.isDateExact=function(e,t){return m.isInteger(e)&&m.isInteger(t)||"boolean"==typeof e&&"boolean"==typeof t?e===t:(m.isDate(e)||f.isArray(e))&&(m.isDate(t)||f.isArray(t))?this.create(e).pick===this.create(t).pick:!(!f.isPlainObject(e)||!f.isPlainObject(t))&&(this.isDateExact(e.from,t.from)&&this.isDateExact(e.to,t.to))},i.prototype.isDateOverlap=function(e,t){var i=this.settings.firstDay?1:0;return m.isInteger(e)&&(m.isDate(t)||f.isArray(t))?(e=e%7+i)===this.create(t).day+1:m.isInteger(t)&&(m.isDate(e)||f.isArray(e))?(t=t%7+i)===this.create(e).day+1:!(!f.isPlainObject(e)||!f.isPlainObject(t))&&this.overlapRanges(e,t)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,t){var n=this,o=n.item.disable.slice(0);return"flip"==t?n.flipEnable():!1===t?(n.flipEnable(1),o=[]):!0===t?(n.flipEnable(-1),o=[]):t.map(function(e){for(var t,i=0;i<o.length;i+=1)if(n.isDateExact(e,o[i])){t=!0;break}t||(m.isInteger(e)||m.isDate(e)||f.isArray(e)||f.isPlainObject(e)&&e.from&&e.to)&&o.push(e)}),o},i.prototype.activate=function(e,t){var r=this,s=r.item.disable,a=s.length;return"flip"==t?r.flipEnable():!0===t?(r.flipEnable(1),s=[]):!1===t?(r.flipEnable(-1),s=[]):t.map(function(e){for(var t,i,n,o=0;o<a;o+=1){if(i=s[o],r.isDateExact(i,e)){n=!(t=s[o]=null);break}if(r.isDateOverlap(i,e)){f.isPlainObject(e)?(e.inverted=!0,t=e):f.isArray(e)?(t=e)[3]||t.push("inverted"):m.isDate(e)&&(t=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(t)for(o=0;o<a;o+=1)if(r.isDateExact(s[o],e)){s[o]=null;break}if(n)for(o=0;o<a;o+=1)if(r.isDateOverlap(s[o],e)){s[o]=null;break}t&&s.push(t)}),s.filter(function(e){return null!=e})},i.prototype.nodes=function(s){function e(e){return m.node("div"," ",l.klass["nav"+(e?"Next":"Prev")]+(e&&h.year>=g.year&&h.month>=g.month||!e&&h.year<=f.year&&h.month<=f.month?" "+l.klass.navDisabled:""),"data-nav="+(e||-1)+" "+m.ariaAttr({role:"button",controls:a.$node[0].id+"_table"})+' title="'+(e?l.labelMonthNext:l.labelMonthPrev)+'"')}function t(){var t=l.showMonthsShort?l.monthsShort:l.monthsFull;return l.selectMonths?m.node("select",m.group({min:0,max:11,i:1,node:"option",item:function(e){return[t[e],0,"value="+e+(h.month==e?" selected":"")+(h.year==f.year&&e<f.month||h.year==g.year&&e>g.month?" disabled":"")]}}),l.klass.selectMonth,(s?"":"disabled")+" "+m.ariaAttr({controls:a.$node[0].id+"_table"})+' title="'+l.labelMonthSelect+'"'):m.node("div",t[h.month],l.klass.month)}function i(){var e,t,i,n,o=h.year,r=!0===l.selectYears?5:~~(l.selectYears/2);return r?(i=f.year,e=g.year,t=o+r,(r=o-r)<i&&(t+=i-r,r=i),e<t&&(r-=(n=t-e)<(i=r-i)?n:i,t=e),m.node("select",m.group({min:r,max:t,i:1,node:"option",item:function(e){return[e,0,"value="+e+(o==e?" selected":"")]}}),l.klass.selectYear,(s?"":"disabled")+" "+m.ariaAttr({controls:a.$node[0].id+"_table"})+' title="'+l.labelYearSelect+'"')):m.node("div",o,l.klass.year)}var n,o,a=this,l=a.settings,r=a.item,c=r.now,u=r.select,d=r.highlight,h=r.view,p=r.disable,f=r.min,g=r.max,r=(n=(l.showWeekdaysFull?l.weekdaysFull:l.weekdaysShort).slice(0),o=l.weekdaysFull.slice(0),l.firstDay&&(n.push(n.shift()),o.push(o.shift())),m.node("thead",m.node("tr",m.group({min:0,max:6,i:1,node:"th",item:function(e){return[n[e],l.klass.weekdays,'scope=col title="'+o[e]+'"']}}))));return m.node("div",(l.selectYears?i()+t():t()+i())+e()+e(1),l.klass.header)+m.node("table",r+m.node("tbody",m.group({min:0,max:5,i:1,node:"tr",item:function(e){var t=l.firstDay&&0===a.create([h.year,h.month,1]).day?-7:0;return[m.group({min:7*e-h.day+t+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(e){e=a.create([h.year,h.month,e+(l.firstDay?1:0)]);var t,i=u&&u.pick==e.pick,n=d&&d.pick==e.pick,o=p&&a.disabled(e)||e.pick<f.pick||e.pick>g.pick,r=m.trigger(a.formats.toString,a,[l.format,e]);return[m.node("div",e.date,((t=[l.klass.day]).push(h.month==e.month?l.klass.infocus:l.klass.outfocus),c.pick==e.pick&&t.push(l.klass.now),i&&t.push(l.klass.selected),n&&t.push(l.klass.highlighted),o&&t.push(l.klass.disabled),t.join(" ")),"data-pick="+e.pick+" "+m.ariaAttr({role:"gridcell",label:r,selected:!(!i||a.$node.val()!==r)||null,activedescendant:!!n||null,disabled:!!o||null})),"",m.ariaAttr({role:"presentation"})]}})]}})),l.klass.table,'id="'+a.$node[0].id+'_table" '+m.ariaAttr({role:"grid",controls:a.$node[0].id,readonly:!0}))+m.node("div",m.node("button",l.today,l.klass.buttonToday,"type=button data-pick="+c.pick+(s&&!a.disabled(c)?"":" disabled")+" "+m.ariaAttr({controls:a.$node[0].id}))+m.node("button",l.clear,l.klass.buttonClear,"type=button data-clear=1"+(s?"":" disabled")+" "+m.ariaAttr({controls:a.$node[0].id}))+m.node("button",l.close,l.klass.buttonClose,"type=button data-close=true "+(s?"":" disabled")+" "+m.ariaAttr({controls:a.$node[0].id})),l.klass.footer)},i.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:(t=e.klasses().picker+"__")+"table",header:t+"header",navPrev:t+"nav--prev",navNext:t+"nav--next",navDisabled:t+"nav--disabled",month:t+"month",year:t+"year",selectMonth:t+"select--month",selectYear:t+"select--year",weekdays:t+"weekday",day:t+"day",disabled:t+"day--disabled",selected:t+"day--selected",highlighted:t+"day--highlighted",now:t+"day--today",infocus:t+"day--infocus",outfocus:t+"day--outfocus",footer:t+"footer",buttonClear:t+"button--clear",buttonToday:t+"button--today",buttonClose:t+"button--close"}},e.extend("pickadate",i)}),!function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,l){var t,p=e._;function i(o,r){var e,t=this,i=o.$node[0].value,n=o.$node.data("value"),i=n||i,n=n?r.formatSubmit:r.format;t.settings=r,t.$node=o.$node,t.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},t.item={},t.item.clear=null,t.item.interval=r.interval||30,t.item.disable=(r.disable||[]).slice(0),t.item.enable=-(!0===(e=t.item.disable)[0]?e.shift():-1),t.set("min",r.min).set("max",r.max).set("now"),i?t.set("select",i,{format:n}):t.set("select",null).set("highlight",t.item.now),t.key={40:1,38:-1,39:1,37:-1,go:function(e){t.set("highlight",t.item.highlight.pick+e*t.item.interval,{interval:e*t.item.interval}),this.render()}},o.on("render",function(){function e(t,i){n("transform").map(function(e){t.css(e,i)}),n("transition").map(function(e){t.css(e,i)})}var t=o.$root.children(),i=t.find("."+r.klass.viewset),n=function(t){return["webkit","moz","ms","o",""].map(function(e){return(e?"-"+e+"-":"")+t})};i.length&&(e(t,"none"),t[0].scrollTop=~~i.position().top-2*i[0].clientHeight,e(t,""))},1).on("open",function(){o.$root.find("button").attr("disabled",!1)},1).on("close",function(){o.$root.find("button").attr("disabled",!0)},1)}i.prototype.set=function(t,i,n){var o=this,e=o.item;return null===i?e[t="clear"==t?"select":t]=i:(e["enable"==t?"disable":"flip"==t?"enable":t]=o.queue[t].split(" ").map(function(e){return i=o[e](t,i,n)}).pop(),"select"==t?o.set("highlight",e.select,n):"highlight"==t?o.set("view",e.highlight,n):"interval"==t?o.set("min",e.min,n).set("max",e.max,n):t.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&o.disabled(e.select)&&o.set("select",i,n),e.highlight&&o.disabled(e.highlight)&&o.set("highlight",i,n),"min"==t&&o.set("max",e.max,n))),o},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,t,i){return p.isDate(t=void 0===t?e:t)&&(t=[t.getHours(),t.getMinutes()]),l.isPlainObject(t)&&p.isInteger(t.pick)?t=t.pick:l.isArray(t)?t=60*+t[0]+ +t[1]:p.isInteger(t)||(t=this.now(e,t,i)),"max"==e&&t<this.item.min.pick&&(t+=1440),"min"!=e&&"max"!=e&&(t-this.item.min.pick)%this.item.interval!=0&&(t+=this.item.interval),{hour:~~(24+(t=this.normalize(e,t,i))/60)%24,mins:(60+t%60)%60,time:(1440+t)%1440,pick:t%1440}},i.prototype.createRange=function(e,t){function i(e){return!0===e||l.isArray(e)||p.isDate(e)?n.create(e):e}var n=this;return p.isInteger(e)||(e=i(e)),p.isInteger(t)||(t=i(t)),p.isInteger(e)&&l.isPlainObject(t)?e=[t.hour,t.mins+e*n.settings.interval]:p.isInteger(t)&&l.isPlainObject(e)&&(t=[e.hour,e.mins+t*n.settings.interval]),{from:i(e),to:i(t)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){return e=this.createRange(e.from,e.to),t=this.createRange(t.from,t.to),this.withinRange(e,t.from)||this.withinRange(e,t.to)||this.withinRange(t,e.from)||this.withinRange(t,e.to)},i.prototype.now=function(e,t){var i,n=this.item.interval,o=new Date,o=60*o.getHours()+o.getMinutes();return o-=o%n,i=t<0&&n*t+o<=-n,o+="min"==e&&i?0:n,p.isInteger(t)&&(o+=n*(i&&"max"!=e?t+1:t)),o},i.prototype.normalize=function(e,t){var i=this.item.interval,n=this.item.min&&this.item.min.pick||0;return t-="min"==e?0:(t-n)%i},i.prototype.measure=function(e,t,i){return"string"==typeof(t=t||("min"==e?[0,0]:[23,59]))?t=this.parse(e,t):!0===t||p.isInteger(t)?t=this.now(e,t,i):l.isPlainObject(t)&&p.isInteger(t.pick)&&(t=this.normalize(e,t.pick,i)),t},i.prototype.validate=function(e,t,i){i=(i&&i.interval?i:this.item).interval;return this.disabled(t)&&(t=this.shift(t,i)),t=this.scope(t),t=this.disabled(t)?this.shift(t,-1*i):t},i.prototype.disabled=function(t){var i=this,e=(e=i.item.disable.filter(function(e){return p.isInteger(e)?t.hour==e:l.isArray(e)||p.isDate(e)?t.pick==i.create(e).pick:l.isPlainObject(e)?i.withinRange(e,t):void 0})).length&&!e.filter(function(e){return l.isArray(e)&&"inverted"==e[2]||l.isPlainObject(e)&&e.inverted}).length;return-1===i.item.enable?!e:e||t.pick<i.item.min.pick||t.pick>i.item.max.pick},i.prototype.shift=function(e,t){var i=this.item.min.pick,n=this.item.max.pick;for(t=t||this.item.interval;this.disabled(e)&&!((e=this.create(e.pick+=t)).pick<=i||e.pick>=n););return e},i.prototype.scope=function(e){var t=this.item.min.pick,i=this.item.max.pick;return this.create(e.pick>i?i:e.pick<t?t:e)},i.prototype.parse=function(e,n,t){var i,o,r,s,a,l=this,c={};if(!n||"string"!=typeof n)return n;for(s in t&&t.format||((t=t||{}).format=l.settings.format),l.formats.toArray(t.format).map(function(e){var t=l.formats[e],i=t?p.trigger(t,l,[n,c]):e.replace(/^!/,"").length;t&&(t=n.substr(0,i),c[e]=t.match(/^\d+$/)?+t:t),n=n.substr(i)}),c)a=c[s],p.isInteger(a)?s.match(/^(h|hh)$/i)?(i=a,"h"!=s&&"hh"!=s||(i%=12)):"i"==s&&(o=a):s.match(/^a$/i)&&a.match(/^p/i)&&("h"in c||"hh"in c)&&(r=!0);return 60*(r?i+12:i)+o},i.prototype.formats={h:function(e,t){return e?p.digits(e):t.hour%12||12},hh:function(e,t){return e?2:p.lead(t.hour%12||12)},H:function(e,t){return e?p.digits(e):""+t.hour%24},HH:function(e,t){return e?p.digits(e):p.lead(t.hour%24)},i:function(e,t){return e?2:p.lead(t.mins)},a:function(e,t){return e?4:t.time%1440<720?"a.m.":"p.m."},A:function(e,t){return e?2:t.time%1440<720?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return p.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}},i.prototype.isTimeExact=function(e,t){return p.isInteger(e)&&p.isInteger(t)||"boolean"==typeof e&&"boolean"==typeof t?e===t:(p.isDate(e)||l.isArray(e))&&(p.isDate(t)||l.isArray(t))?this.create(e).pick===this.create(t).pick:!(!l.isPlainObject(e)||!l.isPlainObject(t))&&(this.isTimeExact(e.from,t.from)&&this.isTimeExact(e.to,t.to))},i.prototype.isTimeOverlap=function(e,t){return p.isInteger(e)&&(p.isDate(t)||l.isArray(t))?e===this.create(t).hour:p.isInteger(t)&&(p.isDate(e)||l.isArray(e))?t===this.create(e).hour:!(!l.isPlainObject(e)||!l.isPlainObject(t))&&this.overlapRanges(e,t)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,t){var n=this,o=n.item.disable.slice(0);return"flip"==t?n.flipEnable():!1===t?(n.flipEnable(1),o=[]):!0===t?(n.flipEnable(-1),o=[]):t.map(function(e){for(var t,i=0;i<o.length;i+=1)if(n.isTimeExact(e,o[i])){t=!0;break}t||(p.isInteger(e)||p.isDate(e)||l.isArray(e)||l.isPlainObject(e)&&e.from&&e.to)&&o.push(e)}),o},i.prototype.activate=function(e,t){var r=this,s=r.item.disable,a=s.length;return"flip"==t?r.flipEnable():!0===t?(r.flipEnable(1),s=[]):!1===t?(r.flipEnable(-1),s=[]):t.map(function(e){for(var t,i,n,o=0;o<a;o+=1){if(i=s[o],r.isTimeExact(i,e)){n=!(t=s[o]=null);break}if(r.isTimeOverlap(i,e)){l.isPlainObject(e)?(e.inverted=!0,t=e):l.isArray(e)?(t=e)[2]||t.push("inverted"):p.isDate(e)&&(t=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(t)for(o=0;o<a;o+=1)if(r.isTimeExact(s[o],e)){s[o]=null;break}if(n)for(o=0;o<a;o+=1)if(r.isTimeOverlap(s[o],e)){s[o]=null;break}t&&s.push(t)}),s.filter(function(e){return null!=e})},i.prototype.i=function(e,t){return p.isInteger(t)&&0<t?t:this.item.interval},i.prototype.nodes=function(e){var a=this,l=a.settings,c=a.item.select,u=a.item.highlight,d=a.item.view,h=a.item.disable;return p.node("ul",p.group({min:a.item.min.pick,max:a.item.max.pick,i:a.item.interval,node:"li",item:function(e){var t,i=(e=a.create(e)).pick,n=c&&c.pick==i,o=u&&u.pick==i,r=h&&a.disabled(e),s=p.trigger(a.formats.toString,a,[l.format,e]);return[p.trigger(a.formats.toString,a,[p.trigger(l.formatLabel,a,[e])||l.format,e]),(t=[l.klass.listItem],n&&t.push(l.klass.selected),o&&t.push(l.klass.highlighted),d&&d.pick==i&&t.push(l.klass.viewset),r&&t.push(l.klass.disabled),t.join(" ")),"data-pick="+e.pick+" "+p.ariaAttr({role:"option",label:s,selected:!(!n||a.$node.val()!==s)||null,activedescendant:!!o||null,disabled:!!r||null})]}})+p.node("li",p.node("button",l.clear,l.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+p.ariaAttr({controls:a.$node[0].id})),"",p.ariaAttr({role:"presentation"})),l.klass.list,p.ariaAttr({role:"listbox",controls:a.$node[0].id}))},i.defaults={clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:(t=e.klasses().picker)+" "+t+"--time",holder:t+"__holder",list:t+"__list",listItem:t+"__list-item",disabled:t+"__list-item--disabled",selected:t+"__list-item--selected",highlighted:t+"__list-item--highlighted",viewset:t+"__list-item--viewset",now:t+"__list-item--now",buttonClear:t+"__button--clear"}},e.extend("pickatime",i)}),[].map||(Array.prototype.map=function(e,t){for(var i=this.length,n=new Array(i),o=0;o<i;o++)o in this&&(n[o]=e.call(t,this[o],o,this));return n}),[].filter||(Array.prototype.filter=function(e){if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n,o=[],r=arguments[1],s=0;s<i;s++)s in t&&(n=t[s],e.call(r,n,s,t)&&o.push(n));return o}),[].indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0==i)return-1;var n=0;if(1<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!=1/0&&n!=-1/0&&(n=(0<n||-1)*Math.floor(Math.abs(n)))),i<=n)return-1;for(var o=0<=n?n:Math.max(i-Math.abs(n),0);o<i;o++)if(o in t&&t[o]===e)return o;return-1}),String.prototype.split),compliantExecNpcg=void 0===/()??/.exec("")[1],cachedTemplates=(String.prototype.split=function(e,t){var i=this;if("[object RegExp]"!==Object.prototype.toString.call(e))return nativeSplit.call(i,e,t);var n,o,r,s,a=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),c=0;for(e=new RegExp(e.source,l+"g"),i+="",compliantExecNpcg||(n=new RegExp("^"+e.source+"$(?!\\s)",l)),t=void 0===t?-1>>>0:t>>>0;(o=e.exec(i))&&!(c<(r=o.index+o[0].length)&&(a.push(i.slice(c,o.index)),!compliantExecNpcg&&1<o.length&&o[0].replace(n,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),1<o.length&&o.index<i.length&&Array.prototype.push.apply(a,o.slice(1)),s=o[0].length,c=r,a.length>=t));)e.lastIndex===o.index&&e.lastIndex++;return c===i.length?!s&&e.test("")||a.push(""):a.push(i.slice(c)),a.length>t?a.slice(0,t):a},!function(){function o(e,t){var i;if(-1!==t.indexOf("!"))return i=t.split("!"),o(e,i[0])+"!"+o(e,i[1]);if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&n!=t;){var n=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t}var e,t,i=function(){return this}(),r=function(e,t,i){"string"!=typeof e?r.original?r.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace()):(2==arguments.length&&(i=t),r.modules||(r.modules={},r.payloads={}),r.payloads[e]=i,r.modules[e]=null)},l=function(e,t,i){if("[object Array]"===Object.prototype.toString.call(t)){for(var n=[],o=0,r=t.length;o<r;++o){var s=c(e,t[o]);if(!s&&l.original)return l.original.apply(window,arguments);n.push(s)}i&&i.apply(null,n)}else{var a;{if("string"==typeof t)return!(a=c(e,t))&&l.original?l.original.apply(window,arguments):(i&&i(),a);if(l.original)return l.original.apply(window,arguments)}}},c=function(e,i){i=o(e,i);var t,n,e=r.modules[i];return e||("function"==typeof(e=r.payloads[i])&&(t={id:i,uri:"",exports:n={},packaged:!0},n=e(function(e,t){return l(i,e,t)},n,t)||t.exports,r.modules[i]=n,delete r.payloads[i]),e=r.modules[i]=n||e),e};t=i,(e="ace")&&(i[e]||(i[e]={}),t=i[e]),t.define&&t.define.packaged||(r.original=t.define,t.define=r,t.define.packaged=!0),t.require&&t.require.packaged||(l.original=t.require,t.require=function(e,t){return l("",e,t)},t.require.packaged=!0)}(),ace.define("ace/lib/regexp",["require","exports","module"],function(e,t,i){"use strict";var n,r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},s=void 0===r.exec.call(/()??/,"")[1],a=(n=/^/g,r.test.call(n,""),!n.lastIndex);a&&s||(RegExp.prototype.exec=function(e){var t,i,n=r.exec.apply(this,arguments);if("string"==typeof e&&n){if(!s&&1<n.length&&-1<function(e,t,i){if(Array.prototype.indexOf)return e.indexOf(t,i);for(var n=i||0;n<e.length;n++)if(e[n]===t)return n;return-1}(n,"")&&(i=RegExp(this.source,r.replace.call(((i=this).global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),"g","")),r.replace.call(e.slice(n.index),i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(n[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var o=1;o<n.length;o++)(t=this._xregexp.captureNames[o-1])&&(n[t]=n[o]);!a&&this.global&&!n[0].length&&this.lastIndex>n.index&&this.lastIndex--}return n},a||(RegExp.prototype.test=function(e){e=r.exec.call(this,e);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(e,t,i){function r(){}Function.prototype.bind||(Function.prototype.bind=function(t){var i=this;if("function"!=typeof i)throw new TypeError("Function.prototype.bind called on incompatible "+i);var n=p.call(arguments,1),o=function(){var e;return this instanceof o?(e=i.apply(this,n.concat(p.call(arguments))),Object(e)===e?e:this):i.apply(t,n.concat(p.call(arguments)))};return i.prototype&&(r.prototype=i.prototype,o.prototype=new r,r.prototype=null),o});var o,s,a,l,c,n,u=Function.prototype.call,d=Array.prototype,h=Object.prototype,p=d.slice,f=u.bind(h.toString),g=u.bind(h.hasOwnProperty);function m(e){e=new Array(e+2);return e[0]=e[1]=0,e}(c=g(h,"__defineGetter__"))&&(o=u.bind(h.__defineGetter__),s=u.bind(h.__defineSetter__),a=u.bind(h.__lookupGetter__),l=u.bind(h.__lookupSetter__)),2!=[1,2].splice(0).length&&((d=[]).splice.apply(d,m(20)),d.splice.apply(d,m(26)),u=d.length,d.splice(5,0,"XXX"),d.length,u+1==d.length?(n=Array.prototype.splice,Array.prototype.splice=function(e,t){return arguments.length?n.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(p.call(arguments,2))):[]}):Array.prototype.splice=function(e,t){var i=this.length,n=(0<e?i<e&&(e=i):null==e?e=0:e<0&&(e=Math.max(i+e,0)),this.slice(e,e+(t=e+t<i?t:i-e))),o=p.call(arguments,2),r=o.length;if(e===i)r&&this.push.apply(this,o);else{var s=Math.min(t,i-e),a=e+s,l=a+r-s,c=i-a,i=i-s;if(l<a)for(var u=0;u<c;++u)this[l+u]=this[a+u];else if(a<l)for(u=c;u--;)this[l+u]=this[a+u];if(r&&e===i)this.length=i,this.push.apply(this,o);else for(this.length=i+r,u=0;u<r;++u)this[e+u]=o[u]}return n}),Array.isArray||(Array.isArray=function(e){return"[object Array]"==f(e)});var v,y,b,u=Object("a"),w="a"!=u[0]||!(0 in u);function C(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){}}Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=k(this),i=w&&"[object String]"==f(this)?this.split(""):t,n=arguments[1],o=-1,r=i.length>>>0;if("[object Function]"!=f(e))throw new TypeError;for(;++o<r;)o in i&&e.call(n,i[o],o,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=k(this),i=w&&"[object String]"==f(this)?this.split(""):t,n=i.length>>>0,o=Array(n),r=arguments[1];if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");for(var s=0;s<n;s++)s in i&&(o[s]=e.call(r,i[s],s,t));return o}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,i=k(this),n=w&&"[object String]"==f(this)?this.split(""):i,o=n.length>>>0,r=[],s=arguments[1];if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");for(var a=0;a<o;a++)a in n&&(t=n[a],e.call(s,t,a,i)&&r.push(t));return r}),Array.prototype.every||(Array.prototype.every=function(e){var t=k(this),i=w&&"[object String]"==f(this)?this.split(""):t,n=i.length>>>0,o=arguments[1];if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");for(var r=0;r<n;r++)if(r in i&&!e.call(o,i[r],r,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=k(this),i=w&&"[object String]"==f(this)?this.split(""):t,n=i.length>>>0,o=arguments[1];if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");for(var r=0;r<n;r++)if(r in i&&e.call(o,i[r],r,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=k(this),i=w&&"[object String]"==f(this)?this.split(""):t,n=i.length>>>0;if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,r=0;if(2<=arguments.length)o=arguments[1];else for(;;){if(r in i){o=i[r++];break}if(++r>=n)throw new TypeError("reduce of empty array with no initial value")}for(;r<n;r++)r in i&&(o=e.call(void 0,o,i[r],r,t));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=k(this),i=w&&"[object String]"==f(this)?this.split(""):t,n=i.length>>>0;if("[object Function]"!=f(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,r=n-1;if(2<=arguments.length)o=arguments[1];else for(;;){if(r in i){o=i[r--];break}if(--r<0)throw new TypeError("reduceRight of empty array with no initial value")}for(;r in this&&(o=e.call(void 0,o,i[r],r,t)),r--;);return o}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var t=w&&"[object String]"==f(this)?this.split(""):k(this),i=t.length>>>0;if(!i)return-1;for(var n=0,n=0<=(n=1<arguments.length?T(arguments[1]):n)?n:Math.max(0,i+n);n<i;n++)if(n in t&&t[n]===e)return n;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var t=w&&"[object String]"==f(this)?this.split(""):k(this),i=t.length>>>0;if(!i)return-1;for(var n=i-1,n=0<=(n=1<arguments.length?Math.min(n,T(arguments[1])):n)?n:i-Math.abs(n);0<=n;n--)if(n in t&&e===t[n])return n;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:h)}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(g(e,t)){var i={enumerable:!0,configurable:!0};if(c){var n=e.__proto__,o=(e.__proto__=h,a(e,t)),r=l(e,t);if(e.__proto__=n,o||r)return o&&(i.get=o),r&&(i.set=r),i}return i.value=e[t],i}}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),Object.create||(v=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e,t={};for(e in t)t[e]=null;return t.constructor=t.hasOwnProperty=t.propertyIsEnumerable=t.isPrototypeOf=t.toLocaleString=t.toString=t.valueOf=t.__proto__=null,t},Object.create=function(e,t){var i;if(null===e)i=v();else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");function n(){}n.prototype=e,(i=new n).__proto__=e}return void 0!==t&&Object.defineProperties(i,t),i}),Object.defineProperty&&(d=C({}),u="undefined"==typeof document||C(document.createElement("div")),d&&u||(y=Object.defineProperty)),Object.defineProperty&&!y||(Object.defineProperty=function(e,t,i){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.defineProperty called on non-object: "+e);if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Property description must be an object: "+i);if(y)try{return y.call(Object,e,t,i)}catch(e){}if(g(i,"value")){var n;c&&(a(e,t)||l(e,t))?(n=e.__proto__,e.__proto__=h,delete e[t],e[t]=i.value,e.__proto__=n):e[t]=i.value}else{if(!c)throw new TypeError("getters & setters can not be defined on this javascript engine");g(i,"get")&&o(e,t,i.get),g(i,"set")&&s(e,t,i.set)}return e}),Object.defineProperties||(Object.defineProperties=function(e,t){for(var i in t)g(t,i)&&Object.defineProperty(e,i,t[i]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze(function(){})}catch(e){Object.freeze=(b=Object.freeze,function(e){return"function"==typeof e?e:b(e)})}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(e){return!1}),Object.isFrozen||(Object.isFrozen=function(e){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";g(e,t);)t+="?";e[t]=!0;var i=g(e,t);return delete e[t],i}),!Object.keys){var _,A=!0,E=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],x=E.length;for(_ in{toString:null})A=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t,i=[];for(t in e)g(e,t)&&i.push(t);if(A)for(var n=0,o=x;n<o;n++){var r=E[n];g(e,r)&&i.push(r)}return i}}Date.now||(Date.now=function(){return(new Date).getTime()});var S="\t\n\v\f\r ¬†·öÄ·†é‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ\u2028\u2029\ufeff";function T(e){return(e=+e)!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(0<e||-1)*Math.floor(Math.abs(e))),e}String.prototype.trim&&!S.trim()||(String.prototype.trim=function(){var e;return this&&(-1==(e=function(e){for(var t,i=e.length,n=0;n<i;n++)if(t=e.charAt(n),-1===S.indexOf(t))return n;return-1}(this))?"":this.substring(e,function(e){for(var t,i=e.length-1;0<=i;i--)if(t=e.charAt(i),-1===S.indexOf(t))return i+1;return-1}(this)))});var k=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,i){"use strict";e("./regexp"),e("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(e,r,t){"use strict";var o="http://www.w3.org/1999/xhtml";r.getDocumentHead=function(e){return(e=e||document).head||e.getElementsByTagName("head")[0]||e.documentElement},r.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||o,e):document.createElement(e)},r.hasCssClass=function(e,t){return-1!==(e.className||"").split(/\s+/g).indexOf(t)},r.addCssClass=function(e,t){r.hasCssClass(e,t)||(e.className+=" "+t)},r.removeCssClass=function(e,t){for(var i=e.className.split(/\s+/g);;){var n=i.indexOf(t);if(-1==n)break;i.splice(n,1)}e.className=i.join(" ")},r.toggleCssClass=function(e,t){for(var i=e.className.split(/\s+/g),n=!0;;){var o=i.indexOf(t);if(-1==o)break;n=!1,i.splice(o,1)}return n&&i.push(t),e.className=i.join(" "),n},r.setCssClass=function(e,t,i){i?r.addCssClass(e,t):r.removeCssClass(e,t)},r.hasCssString=function(e,t){var i,n=0;if((t=t||document).createStyleSheet&&(i=t.styleSheets)){for(;n<i.length;)if(i[n++].owningElement.id===e)return!0}else if(i=t.getElementsByTagName("style"))for(;n<i.length;)if(i[n++].id===e)return!0;return!1},r.importCssString=function(e,t,i){if(i=i||document,t&&r.hasCssString(t,i))return null;var n;i.createStyleSheet?((n=i.createStyleSheet()).cssText=e,t&&(n.owningElement.id=t)):((n=i.createElementNS?i.createElementNS(o,"style"):i.createElement("style")).appendChild(i.createTextNode(e)),t&&(n.id=t),r.getDocumentHead(i).appendChild(n))},r.importCssStylsheet=function(e,t){var i;t.createStyleSheet?t.createStyleSheet(e):((i=r.createElement("link")).rel="stylesheet",i.href=e,r.getDocumentHead(t).appendChild(i))},r.getInnerWidth=function(e){return parseInt(r.computedStyle(e,"paddingLeft"),10)+parseInt(r.computedStyle(e,"paddingRight"),10)+e.clientWidth},r.getInnerHeight=function(e){return parseInt(r.computedStyle(e,"paddingTop"),10)+parseInt(r.computedStyle(e,"paddingBottom"),10)+e.clientHeight},"undefined"!=typeof document&&(void 0!==window.pageYOffset?(r.getPageScrollTop=function(){return window.pageYOffset},r.getPageScrollLeft=function(){return window.pageXOffset}):(r.getPageScrollTop=function(){return document.body.scrollTop},r.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?r.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:r.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},r.scrollbarWidth=function(e){var t=r.createElement("ace_inner"),i=(t.style.width="100%",t.style.minWidth="0px",t.style.height="200px",t.style.display="block",r.createElement("ace_outer")),n=i.style,e=(n.position="absolute",n.left="-10000px",n.overflow="hidden",n.width="200px",n.minWidth="0px",n.height="150px",n.display="block",i.appendChild(t),e.documentElement),o=(e.appendChild(i),t.offsetWidth),n=(n.overflow="scroll",t.offsetWidth);return o==n&&(n=i.clientWidth),e.removeChild(i),o-n},r.setInnerHtml=function(e,t){var i=e.cloneNode(!1);return i.innerHTML=t,e.parentNode.replaceChild(i,e),i},"textContent"in document.documentElement?(r.setInnerText=function(e,t){e.textContent=t},r.getInnerText=function(e){return e.textContent}):(r.setInnerText=function(e,t){e.innerText=t},r.getInnerText=function(e){return e.innerText}),r.getParentWindow=function(e){return e.defaultView||e.parentWindow})}),ace.define("ace/lib/oop",["require","exports","module"],function(e,i,t){"use strict";i.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},i.mixin=function(e,t){for(var i in t)e[i]=t[i];return e},i.implement=function(e,t){i.mixin(e,t)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(e,t,i){"use strict";e("./fixoldbrowsers");var r=e("./oop"),n=function(){var e,t,i={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(t in i.FUNCTION_KEYS)e=i.FUNCTION_KEYS[t].toLowerCase(),i[e]=parseInt(t,10);for(t in i.PRINTABLE_KEYS)e=i.PRINTABLE_KEYS[t].toLowerCase(),i[e]=parseInt(t,10);r.mixin(i,i.MODIFIER_KEYS),r.mixin(i,i.PRINTABLE_KEYS),r.mixin(i,i.FUNCTION_KEYS),i.enter=i.return,i.escape=i.esc,i.del=i.delete,i[173]="-";for(var n=["cmd","ctrl","alt","shift"],o=Math.pow(2,n.length);o--;)i.KEY_MODS[o]=n.filter(function(e){return o&i.KEY_MODS[e]}).join("-")+"-";return i.KEY_MODS[0]="",i.KEY_MODS[-1]="input",i}();r.mixin(t,n),t.keyCodeToString=function(e){var t=n[e];return(t="string"!=typeof t?String.fromCharCode(e):t).toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,i){"use strict";var n,o;t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS},"object"==typeof navigator&&(n=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),o=navigator.userAgent,t.isWin="win"==n,t.isMac="mac"==n,t.isLinux="linux"==n,t.isIE="Microsoft Internet Explorer"==navigator.appName||0<=navigator.appName.indexOf("MSAppHost")?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,t.isOldGecko=t.isGecko&&parseInt((o.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,t.isAIR=0<=o.indexOf("AdobeAIR"),t.isIPad=0<=o.indexOf("iPad"),t.isTouchPad=0<=o.indexOf("TouchPad"),t.isChromeOS=0<=o.indexOf(" CrOS "))}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,u,t){"use strict";var s=e("./keys"),d=e("./useragent"),a=(u.addListener=function(e,t,i){if(e.addEventListener)return e.addEventListener(t,i,!1);var n;e.attachEvent&&(i._wrapper=n=function(){i.call(e,window.event)},e.attachEvent("on"+t,n))},u.removeListener=function(e,t,i){if(e.removeEventListener)return e.removeEventListener(t,i,!1);e.detachEvent&&e.detachEvent("on"+t,i._wrapper||i)},u.stopEvent=function(e){return u.stopPropagation(e),u.preventDefault(e),!1},u.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},u.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},u.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||d.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},u.capture=function(e,t,i){function n(e){t&&t(e),i&&i(e),u.removeListener(document,"mousemove",t,!0),u.removeListener(document,"mouseup",n,!0),u.removeListener(document,"dragstart",n,!0)}return u.addListener(document,"mousemove",t,!0),u.addListener(document,"mouseup",n,!0),u.addListener(document,"dragstart",n,!0),n},u.addMouseWheelListener=function(e,t){"onmousewheel"in e?u.addListener(e,"mousewheel",function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),t(e)}):"onwheel"in e?u.addListener(e,"wheel",function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}t(e)}):u.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),t(e)})},u.addMultiMouseDownListener=function(e,i,n,o){var r,s,a,l=0,c={2:"dblclick",3:"tripleclick",4:"quadclick"};u.addListener(e,"mousedown",function(e){var t;if(0!==u.getButton(e)?l=0:1<e.detail&&!(4<++l)||(l=1),d.isIE&&(t=5<Math.abs(e.clientX-r)||5<Math.abs(e.clientY-s),a&&!t||(l=1),a&&clearTimeout(a),a=setTimeout(function(){a=null},i[l-1]||600),1==l&&(r=e.clientX,s=e.clientY)),e._clicks=l,n[o]("mousedown",e),4<l)l=0;else if(1<l)return n[o](c[l],e)}),d.isOldIE&&u.addListener(e,"dblclick",function(e){l=2,a&&clearTimeout(a),a=setTimeout(function(){a=null},i[l-1]||600),n[o]("mousedown",e),n[o](c[l],e)})},!d.isMac||!d.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)});function r(e,t,i){var n,o=a(t);if(!d.isMac&&l){if((l[91]||l[92])&&(o|=8),l.altGr){if(3==(3&o))return;l.altGr=0}18!==i&&17!==i||(r="location"in t?t.location:t.keyLocation,17===i&&1===r?c=t.timeStamp:18===i&&3===o&&2===r&&(n=-c,(n+=c=t.timeStamp)<3&&(l.altGr=!0)))}if(i in s.MODIFIER_KEYS){switch(s.MODIFIER_KEYS[i]){case"Alt":o=2;break;case"Shift":o=4;break;case"Ctrl":o=1;break;default:o=8}i=-1}if(8&o&&(91===i||93===i)&&(i=-1),!o&&13===i){var r="location"in t?t.location:t.keyLocation;if(3===r&&(e(t,o,-i),t.defaultPrevented))return}if(d.isChromeOS&&8&o){if(e(t,o,i),t.defaultPrevented)return;o&=-9}return!!(o||i in s.FUNCTION_KEYS||i in s.PRINTABLE_KEYS)&&e(t,o,i)}u.getModifierString=function(e){return s.KEY_MODS[a(e)]};var l=null,c=0;u.addCommandKeyListener=function(e,i){var t,n,o=u.addListener;d.isOldGecko||d.isOpera&&!("KeyboardEvent"in window)?(t=null,o(e,"keydown",function(e){t=e.keyCode}),o(e,"keypress",function(e){return r(i,e,t)})):(n=null,o(e,"keydown",function(e){l[e.keyCode]=!0;var t=r(i,e,e.keyCode);return n=e.defaultPrevented,t}),o(e,"keypress",function(e){n&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(u.stopEvent(e),n=null)}),o(e,"keyup",function(e){l[e.keyCode]=null}),l||(l=Object.create(null),o(window,"focus",function(e){l=Object.create(null)})))},window.postMessage&&!d.isOldIE&&(u.nextTick=function(i,n){n=n||window;var o="zero-timeout-message-1";u.addListener(n,"message",function e(t){t.data==o&&(u.stopPropagation(t),u.removeListener(n,"message",e),i())}),n.postMessage(o,"*")}),u.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,u.nextFrame?u.nextFrame=u.nextFrame.bind(window):u.nextFrame=function(e){setTimeout(e,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(e,o,t){"use strict";o.last=function(e){return e[e.length-1]},o.stringReverse=function(e){return e.split("").reverse().join("")},o.stringRepeat=function(e,t){for(var i="";0<t;)1&t&&(i+=e),(t>>=1)&&(e+=e);return i};var i=/^\s\s*/,n=/\s\s*$/;o.stringTrimLeft=function(e){return e.replace(i,"")},o.stringTrimRight=function(e){return e.replace(n,"")},o.copyObject=function(e){var t,i={};for(t in e)i[t]=e[t];return i},o.copyArray=function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[i]&&"object"==typeof e[i]?t[i]=this.copyObject(e[i]):t[i]=e[i];return t},o.deepCopy=function(e){if("object"!=typeof e||!e)return e;var t=e.constructor;if(t===RegExp)return e;var i,n=t();for(i in e)"object"==typeof e[i]?n[i]=o.deepCopy(e[i]):n[i]=e[i];return n},o.arrayToMap=function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=1;return t},o.createMap=function(e){var t,i=Object.create(null);for(t in e)i[t]=e[t];return i},o.arrayRemove=function(e,t){for(var i=0;i<=e.length;i++)t===e[i]&&e.splice(i,1)},o.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},o.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},o.getMatchOffsets=function(e,t){var i=[];return e.replace(t,function(e){i.push({offset:arguments[arguments.length-2],length:e.length})}),i},o.deferredCall=function(e){function t(){n=null,e()}function i(e){return i.cancel(),n=setTimeout(t,e||0),i}var n=null;return(i.schedule=i).call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(n),n=null,i},i.isPending=function(){return n},i},o.delayedCall=function(e,t){function i(){o=null,e()}function n(e){null==o&&(o=setTimeout(i,e||t))}var o=null;return n.delay=function(e){o&&clearTimeout(o),o=setTimeout(i,e||t)},(n.schedule=n).call=function(){this.cancel(),e()},n.cancel=function(){o&&clearTimeout(o),o=null},n.isPending=function(){return o},n}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,i){"use strict";var M=e("../lib/event"),N=e("../lib/useragent"),$=e("../lib/dom"),I=e("../lib/lang"),P=N.isChrome<18,G=N.isIE;t.TextInput=function(e,s){var a=$.createElement("textarea"),i=(a.className="ace_text-input",N.isTouchPad&&a.setAttribute("x-palm-disable-auto-cap",!0),a.setAttribute("wrap","off"),a.setAttribute("autocorrect","off"),a.setAttribute("autocapitalize","off"),a.setAttribute("spellcheck",!1),a.style.opacity="0",N.isOldIE&&(a.style.top="-100px"),e.insertBefore(a,e.firstChild),""),n=!1,o=!1,r=!1,l="",t=!0;try{var c=document.activeElement===a}catch(e){}M.addListener(a,"blur",function(e){s.onBlur(e),c=!1}),M.addListener(a,"focus",function(e){c=!0,s.onFocus(e),h()}),this.focus=function(){a.style.position="fixed",a.style.top="-10000000px",a.focus(),setTimeout(function(){a.style.position=""},0)},this.blur=function(){a.blur()},this.isFocused=function(){return c};var u=I.delayedCall(function(){c&&h(t)}),d=I.delayedCall(function(){r||(a.value=i,c&&h())});function h(e){if(!r){var t,e=A?(t=0,e?0:a.value.length-1):(t=e?2:1,2);try{a.setSelectionRange(t,e)}catch(e){}}}function p(){r||(a.value=i,N.isWebKit&&d.schedule())}N.isWebKit||s.addEventListener("changeSelection",function(){s.selection.isEmpty()!=t&&(t=!t,u.schedule())}),p(),c&&s.onFocus();function f(e){T(e,!0)}function g(e){T(e,!1)}function m(e){var t=S(e);"string"==typeof t?(t&&s.onPaste(t),N.isIE&&setTimeout(h),M.preventDefault(e)):(a.value="",o=!0)}var v,y,b,w,C,_=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length},A=(!a.setSelectionRange&&a.createTextRange&&(a.setSelectionRange=function(e,t){var i=this.createTextRange();i.collapse(!0),i.moveStart("character",e),i.moveEnd("character",t),i.select()},_=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&t.text==e.value}),N.isOldIE&&(v=!1,b=I.delayedCall(y=function(e){if(!v){var t=a.value;if(!r&&t&&t!=i){if(e&&t==i[0])return b.schedule();x(t),v=!0,p(),v=!1}}}),M.addListener(a,"propertychange",y),w={13:1,27:1},M.addListener(a,"keyup",function(e){if(!r||a.value&&!w[e.keyCode]||setTimeout(R,0),(a.value.charCodeAt(0)||0)<129)return b.call();(r?D:k)()}),M.addListener(a,"keydown",function(e){b.schedule(50)})),null),E=(this.setInputHandler=function(e){A=e},!(this.getInputHandler=function(){return A})),x=function(e){A&&(e=A(e),A=null),o?(h(),e&&s.onPaste(e),o=!1):e==i.charAt(0)?E?s.execCommand("del",{source:"ace"}):s.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==i?e=e.substr(2):e.charAt(0)==i.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==i.charAt(0)&&(e=e.slice(0,-1)),(e=e.charAt(e.length-1)==i.charAt(0)?e.slice(0,-1):e)&&s.onTextInput(e)),E=E&&!1},S=function(e,t){var i,e=e.clipboardData||window.clipboardData;if(e&&!P)return i=G?"Text":"text/plain",t?!1!==e.setData(i,t):e.getData(i)},T=function(e,t){var i=s.getCopyText();if(!i)return M.preventDefault(e);S(e,i)?(t?s.onCut():s.onCopy(),M.preventDefault(e)):(n=!0,a.value=i,a.select(),setTimeout(function(){n=!1,p(),h(),t?s.onCut():s.onCopy()}))},k=(M.addCommandKeyListener(a,s.onCommandKey.bind(s)),M.addListener(a,"select",function(e){n?n=!1:_(a)?(s.selectAll(),h()):A&&h(s.selection.isEmpty())}),M.addListener(a,"input",function(e){var t;r||(t=a.value,x(t),p())}),M.addListener(a,"cut",f),M.addListener(a,"copy",g),M.addListener(a,"paste",m),"oncut"in a&&"oncopy"in a&&"onpaste"in a||M.addListener(e,"keydown",function(e){if((!N.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:g(e);break;case 86:m(e);break;case 88:f(e)}}),function(e){r||!s.onCompositionStart||s.$readOnly||(r={},s.onCompositionStart(),setTimeout(D,0),s.on("mousedown",R),s.selection.isEmpty()||(s.insert(""),s.session.markUndoGroup(),s.selection.clearSelection()),s.session.markUndoGroup())}),D=function(){var e;r&&s.onCompositionUpdate&&!s.$readOnly&&(e=a.value.replace(/\x01/g,""),r.lastValue!==e&&(s.onCompositionUpdate(e),r.lastValue&&s.undo(),r.lastValue=e,r.lastValue&&(e=s.selection.getRange(),s.insert(r.lastValue),s.session.markUndoGroup(),r.range=s.selection.getRange(),s.selection.setRange(e),s.selection.clearSelection())))},R=function(e){var t,i;s.onCompositionEnd&&!s.$readOnly&&(t=r,r=!1,i=setTimeout(function(){i=null;var e=a.value.replace(/\x01/g,"");r||(e==t.lastValue?p():!t.lastValue&&e&&(p(),x(e)))}),A=function(e){return i&&clearTimeout(i),(e=e.replace(/\x01/g,""))==t.lastValue?"":(t.lastValue&&i&&s.undo(),e)},s.onCompositionEnd(),s.removeListener("mousedown",R),"compositionend"==e.type&&t.range&&s.selection.setRange(t.range))},O=I.delayedCall(D,50);function F(){clearTimeout(C),C=setTimeout(function(){l&&(a.style.cssText=l,l=""),null==s.renderer.$keepTextAreaAtCursor&&(s.renderer.$keepTextAreaAtCursor=!0,s.renderer.$moveTextAreaToCursor())},N.isOldIE?200:0)}M.addListener(a,"compositionstart",k),N.isGecko?M.addListener(a,"text",function(){O.schedule()}):(M.addListener(a,"keyup",function(){O.schedule()}),M.addListener(a,"keydown",function(){O.schedule()})),M.addListener(a,"compositionend",R),this.getElement=function(){return a},this.setReadOnly=function(e){a.readOnly=e},this.onContextMenu=function(e){E=!0,h(s.selection.isEmpty()),s._emit("nativecontextmenu",{target:s,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,t){var i,n,o,r;!t&&N.isOldIE||(l=l||a.style.cssText,a.style.cssText=(t?"z-index:100000;":"")+"height:"+a.style.height+";"+(N.isIE?"opacity:0.1;":""),t=s.container.getBoundingClientRect(),r=$.computedStyle(s.container),i=t.top+(parseInt(r.borderTopWidth)||0),n=t.left+(parseInt(t.borderLeftWidth)||0),o=t.bottom-i-a.clientHeight-2,(r=function(e){a.style.left=e.clientX-n-2+"px",a.style.top=Math.min(e.clientY-i-2,o)+"px"})(e),"mousedown"==e.type&&(s.renderer.$keepTextAreaAtCursor&&(s.renderer.$keepTextAreaAtCursor=null),N.isWin&&!N.isOldIE&&M.capture(s.container,r,F)))},this.onContextMenuClose=F;function L(e){s.textInput.onContextMenu(e),F()}M.addListener(s.renderer.scroller,"contextmenu",L),M.addListener(a,"contextmenu",L)}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict";e("../lib/dom"),e("../lib/event"),e("../lib/useragent");function n(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(e){t[e]=this[e]},this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function s(e,t){return(e.start.row==e.end.row?2*t.column-e.start.column-e.end.column:e.start.row!=e.end.row-1||e.start.column||e.end.column?2*t.row-e.start.row-e.end.row:t.column-4)<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}!function(){this.onMouseDown=function(e){var t,i=e.inSelection(),n=e.getDocumentPosition(),o=(this.mousedownEvent=e,this.editor);return 0!==e.getButton()?(t=o.getSelectionRange().isEmpty(),o.$blockScrolling++,t&&o.selection.moveToPosition(n),o.$blockScrolling--,void o.textInput.onContextMenu(e.domEvent)):(this.mousedownEvent.time=Date.now(),!i||o.isFocused()||(o.focus(),!this.$focusTimout||this.$clickSelection||o.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,1<e.domEvent._clicks),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var i=this.editor;i.$blockScrolling++,this.mousedownEvent.getShiftKey()?i.selection.selectToPosition(e):t||i.selection.moveToPosition(e),t||this.select(),i.renderer.scroller.setCapture&&i.renderer.scroller.setCapture(),i.setStyle("ace_selecting"),this.setState("select"),i.$blockScrolling--},this.select=function(){var e,t=this.editor,i=t.renderer.screenToTextCoordinates(this.x,this.y);t.$blockScrolling++,this.$clickSelection&&(e=-1==(e=this.$clickSelection.comparePoint(i))?this.$clickSelection.end:1==e?this.$clickSelection.start:(i=(e=s(this.$clickSelection,i)).cursor,e.anchor),t.selection.setSelectionAnchor(e.row,e.column)),t.selection.selectToPosition(i),t.$blockScrolling--,t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,i,n,o=this.editor,r=o.renderer.screenToTextCoordinates(this.x,this.y),e=o.selection[e](r.row,r.column);o.$blockScrolling++,this.$clickSelection&&(i=this.$clickSelection.comparePoint(e.start),t=this.$clickSelection.comparePoint(e.end),-1==i&&t<=0?(n=this.$clickSelection.end,e.end.row==r.row&&e.end.column==r.column||(r=e.start)):1==t&&0<=i?(n=this.$clickSelection.start,e.start.row==r.row&&e.start.column==r.column||(r=e.end)):n=-1==i&&1==t?(r=e.end,e.start):(r=(i=s(this.$clickSelection,r)).cursor,i.anchor),o.selection.setSelectionAnchor(n.row,n.column)),o.selection.selectToPosition(r),o.$blockScrolling--,o.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){n=this.mousedownEvent.x,e=this.mousedownEvent.y,i=this.x,t=this.y;var e,t,i=Math.sqrt(Math.pow(i-n,2)+Math.pow(t-e,2)),n=Date.now();(0<i||n-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var e=e.getDocumentPosition(),t=this.editor,i=t.session.getBracketRange(e);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=t.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var e=e.getDocumentPosition(),t=this.editor,i=(this.setState("selectByLines"),t.getSelectionRange());i.isMultiLine()&&i.contains(e.row,e.column)?(this.$clickSelection=t.selection.getLineRange(i.start.row),this.$clickSelection.end=t.selection.getLineRange(i.end.row).end):this.$clickSelection=t.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){var t,i,n;if(!e.getAccelKey())return e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0),t=e.domEvent.timeStamp,i=t-(this.$lastScrollTime||0),n=this.editor,n.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed)||i<200?(this.$lastScrollTime=t,n.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}.call(n.prototype),t.DefaultHandlers=n}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,i){"use strict";e("./lib/oop");var n=e("./lib/dom");function o(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}!function(){this.$init=function(){return this.$element=n.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){n.setInnerText(this.getElement(),e)},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){n.addCssClass(this.getElement(),e)},this.show=function(e,t,i){null!=e&&this.setText(e),null!=t&&null!=i&&this.setPosition(t,i),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}.call(o.prototype),t.Tooltip=o}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,i){"use strict";var n=e("../lib/dom"),o=e("../lib/oop"),h=e("../lib/event"),s=e("../tooltip").Tooltip;function p(e){s.call(this,e)}o.inherits(p,s),function(){this.setPosition=function(e,t){var i=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,o=this.getWidth(),r=this.getHeight();i<(e+=15)+o&&(e-=e+o-i),n<(t+=15)+r&&(t-=20+r),s.prototype.setPosition.call(this,e,t)}}.call(p.prototype),t.GutterHandler=function(o){var i,r,s,a=o.editor,l=a.renderer.$gutterLayer,c=new p(a.container);function u(){i=i&&clearTimeout(i),s&&(c.hide(),s=null,a.removeEventListener("mousewheel",u))}function d(e){c.setPosition(e.x,e.y)}o.editor.setDefaultHandler("guttermousedown",function(e){if(a.isFocused()&&0==e.getButton()){var t=l.getRegion(e);if("foldWidgets"!=t){var t=e.getDocumentPosition().row,i=a.session.selection;if(e.getShiftKey())i.selectTo(t,0);else{if(2==e.domEvent.detail)return a.selectAll(),e.preventDefault();o.$clickSelection=a.selection.getLineRange(t)}return o.setState("selectByLines"),o.captureMouse(e),e.preventDefault()}}}),o.editor.setDefaultHandler("guttermousemove",function(e){var t=e.domEvent.target||e.domEvent.srcElement;if(n.hasCssClass(t,"ace_fold-widget"))return u();s&&o.$tooltipFollowsMouse&&d(e),r=e,i=i||setTimeout(function(){i=null,(r&&!o.isMousePressed?function(){var e=r.getDocumentPosition().row,t=l.$annotations[e];if(!t)return u();if(e==a.session.getLength()){var i=a.renderer.pixelToScreenCoordinates(0,r.y).row,n=r.$pos;if(i>a.session.documentToScreenRow(n.row,n.column))return u()}s!=t&&(s=t.text.join("<br/>"),c.setHtml(s),c.show(),a.on("mousewheel",u),o.$tooltipFollowsMouse?d(r):(i=l.$cells[a.session.documentToScreenRow(e,0)].element.getBoundingClientRect(),(n=c.getElement().style).left=i.right+"px",n.top=i.bottom+"px"))}:u)()},50)}),h.addListener(a.renderer.$gutter,"mouseout",function(e){r=null,s&&!i&&(i=setTimeout(function(){i=null,u()},50))}),a.on("changeSession",u)}}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict";var n=e("../lib/event"),o=e("../lib/useragent"),e=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};!function(){this.stopPropagation=function(){n.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){n.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e,t=this.editor.getSelectionRange();return t.isEmpty()?this.$inSelection=!1:(e=this.getDocumentPosition(),this.$inSelection=t.contains(e.row,e.column)),this.$inSelection},this.getButton=function(){return n.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=o.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}.call(e.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict";var A=e("../lib/dom"),E=e("../lib/event"),x=e("../lib/useragent");function n(t){var i,c,u,e,n,d,o,r,h,p,f,g=t.editor,s=A.createElement("img"),a=(s.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",x.isOpera&&(s.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(e){t[e]=this[e]},this),g.addEventListener("mousedown",this.onMouseDown.bind(t)),g.container),l=0;function m(){var e,t,i,n,o,r,s,a,l=d;d=g.renderer.screenToTextCoordinates(c,u),i=d,t=l,n=Date.now(),e=!t||i.row!=t.row,t=!t||i.column!=t.column,!p||e||t?(g.$blockScrolling+=1,g.moveCursorToPosition(i),--g.$blockScrolling,p=n,f={x:c,y:u}):5<S(f.x,f.y,c,u)?p=null:200<=n-p&&(g.renderer.scrollCursorIntoView(),p=null),e=d,t=l,i=Date.now(),n=g.renderer.layerConfig.lineHeight,l=g.renderer.layerConfig.characterWidth,o=g.renderer.scroller.getBoundingClientRect(),o={x:{left:c-o.left,right:o.right-c},y:{top:u-o.top,bottom:o.bottom-u}},r=Math.min(o.x.left,o.x.right),s=Math.min(o.y.top,o.y.bottom),a={row:e.row,column:e.column},r/l<=2&&(a.column+=o.x.left<o.x.right?-3:2),s/n<=1&&(a.row+=o.y.top<o.y.bottom?-1:1),r=e.row!=a.row,l=e.column!=a.column,s=!t||e.row!=t.row,r||l&&!s?h?200<=i-h&&g.renderer.scrollCursorIntoView(a):h=i:h=null}function v(){n=g.selection.toOrientedRange(),i=g.session.addMarker(n,"ace_selection",g.getSelectionStyle()),g.clearSelection(),g.isFocused()&&g.renderer.$cursorLayer.setBlinking(!1),clearInterval(e),m(),e=setInterval(m,20),l=0,E.addListener(document,"mousemove",w)}function y(){clearInterval(e),g.session.removeMarker(i),i=null,g.$blockScrolling+=1,g.selection.fromOrientedRange(n),--g.$blockScrolling,g.isFocused()&&!r&&g.renderer.$cursorLayer.setBlinking(!g.getReadOnly()),l=0,p=h=d=n=null,E.removeListener(document,"mousemove",w)}this.onDragStart=function(e){var t;if(this.cancelDrag||!a.draggable)return t=this,setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault();n=g.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=g.getReadOnly()?"copy":"copyMove",x.isOpera&&(g.container.appendChild(s),s.scrollTop=0),i.setDragImage&&i.setDragImage(s,0,0),x.isOpera&&g.container.removeChild(s),i.clearData(),i.setData("Text",g.session.getTextRange()),r=!0,this.setState("drag")},this.onDragEnd=function(e){a.draggable=!1,r=!1,this.setState(null),g.getReadOnly()||(e=e.dataTransfer.dropEffect,o||"move"!=e||g.session.remove(g.getSelectionRange()),g.renderer.$cursorLayer.setBlinking(!0)),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!g.getReadOnly()&&C(e.dataTransfer))return c=e.clientX,u=e.clientY,i||v(),l++,e.dataTransfer.dropEffect=o=_(e),E.preventDefault(e)},this.onDragOver=function(e){if(!g.getReadOnly()&&C(e.dataTransfer))return c=e.clientX,u=e.clientY,i||(v(),l++),null!==b&&(b=null),e.dataTransfer.dropEffect=o=_(e),E.preventDefault(e)},this.onDragLeave=function(e){if(--l<=0&&i)return y(),o=null,E.preventDefault(e)},this.onDrop=function(e){if(d){var t=e.dataTransfer;if(r)switch(o){case"move":n=n.contains(d.row,d.column)?{start:d,end:d}:g.moveText(n,d);break;case"copy":n=g.moveText(n,d,!0)}else{t=t.getData("Text");n={start:d,end:g.session.insert(d,t)},g.focus(),o=null}return y(),E.preventDefault(e)}},E.addListener(a,"dragstart",this.onDragStart.bind(t)),E.addListener(a,"dragend",this.onDragEnd.bind(t)),E.addListener(a,"dragenter",this.onDragEnter.bind(t)),E.addListener(a,"dragover",this.onDragOver.bind(t)),E.addListener(a,"dragleave",this.onDragLeave.bind(t)),E.addListener(a,"drop",this.onDrop.bind(t));var b=null;function w(){null==b&&(b=setTimeout(function(){null!=b&&i&&y()},20))}function C(e){e=e.types;return!e||Array.prototype.some.call(e,function(e){return"text/plain"==e||"Text"==e})}function _(e){var t=["copy","copymove","all","uninitialized"],i=x.isMac?e.altKey:e.ctrlKey,n="uninitialized";try{n=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return i&&0<=t.indexOf(n)?o="copy":0<=["move","copymove","linkmove","all","uninitialized"].indexOf(n)?o="move":0<=t.indexOf(n)&&(o="copy"),o}}function S(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))}!function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor,t=(e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging"),x.isWin?"default":"move");e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;x.isIE&&"dragReady"==this.state&&3<S(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&t.dragDrop(),"dragWait"===this.state&&0<S(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(e){var t,i,n;this.$dragEnabled&&(this.mousedownEvent=e,t=this.editor,i=e.inSelection(),n=e.getButton(),1!==(e.domEvent.detail||1)||0!==n||!i||e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey())||(this.mousedownEvent.time=Date.now(),"unselectable"in(n=e.domEvent.target||e.domEvent.srcElement)&&(n.unselectable="on"),t.getDragDelay()?(x.isWebKit&&(this.cancelDrag=!0,t.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0))}}.call(n.prototype),t.DragdropHandler=n}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";var o=e("./dom");t.get=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&t(i.responseText)},i.send(null)},t.loadScript=function(e,i){var t=o.getDocumentHead(),n=document.createElement("script");n.src=e,t.appendChild(n),n.onload=n.onreadystatechange=function(e,t){!t&&n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(n=n.onload=n.onreadystatechange=null,t||i())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,i){"use strict";function r(){this.propagationStopped=!0}function s(){this.defaultPrevented=!0}var n={};n._emit=n._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[e]||[],n=this._defaultHandlers[e];if(i.length||n){(t="object"==typeof t&&t?t:{}).type||(t.type=e),t.stopPropagation||(t.stopPropagation=r),t.preventDefault||(t.preventDefault=s);for(var i=i.slice(),o=0;o<i.length&&(i[o](t,this),!t.propagationStopped);o++);return n&&!t.defaultPrevented?n(t,this):void 0}},n._signal=function(e,t){if(i=(this._eventRegistry||{})[e])for(var i=i.slice(),n=0;n<i.length;n++)i[n](t,this)},n.once=function(t,i){var n=this;i&&this.addEventListener(t,function e(){n.removeEventListener(t,e),i.apply(null,arguments)})},n.setDefaultHandler=function(e,t){var i,n,o=this._defaultHandlers;(o=o||(this._defaultHandlers={_disabled_:{}}))[e]&&(n=o[e],(i=o._disabled_[e])||(o._disabled_[e]=i=[]),i.push(n),-1!=(n=i.indexOf(t))&&i.splice(n,1)),o[e]=t},n.removeDefaultHandler=function(e,t){var i,n=this._defaultHandlers;n&&(i=n._disabled_[e],n[e]==t?(n[e],i&&this.setDefaultHandler(e,i.pop())):i&&-1!=(n=i.indexOf(t))&&i.splice(n,1))},n.on=n.addEventListener=function(e,t,i){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];return-1==(n=n||(this._eventRegistry[e]=[])).indexOf(t)&&n[i?"unshift":"push"](t),t},n.off=n.removeListener=n.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};e=this._eventRegistry[e];!e||-1!==(t=e.indexOf(t))&&e.splice(t,1)},n.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=n}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){var o=e("./oop"),n=e("./event_emitter").EventEmitter,r={setOptions:function(t){Object.keys(t).forEach(function(e){this.setOption(e,t[e])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){var i;if(this["$"+e]!==t)return i=this.$options[e],i?i.forwardTo?this[i.forwardTo]&&this[i.forwardTo].setOption(e,t):(i.handlesSet||(this["$"+e]=t),void(i&&i.set&&i.set.call(this,t))):s('misspelled option "'+e+'"')},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:s('misspelled option "'+e+'"')}};function s(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function a(e,t){var i=new Error(e);i.data=t,"object"==typeof console&&console.error&&console.error(i),setTimeout(function(){throw i})}function l(){this.$defaultOptions={}}!function(){o.implement(this,n),this.defineOptions=function(i,e,n){return i.$options||(this.$defaultOptions[e]=i.$options={}),Object.keys(n).forEach(function(e){var t=n[e];(t="string"==typeof t?{forwardTo:t}:t).name||(t.name=e),"initialValue"in(i.$options[t.name]=t)&&(i["$"+t.name]=t.initialValue)}),o.implement(i,r),this},this.resetOptions=function(i){Object.keys(i.$options).forEach(function(e){var t=i.$options[e];"value"in t&&i.setOption(e,t.value)})},this.setDefaultValue=function(e,t,i){e=this.$defaultOptions[e]||(this.$defaultOptions[e]={});e[t]&&(e.forwardTo?this.setDefaultValue(e.forwardTo,t,i):e[t].value=i)},this.setDefaultValues=function(t,i){Object.keys(i).forEach(function(e){this.setDefaultValue(t,e,i[e])},this)},this.warn=s,this.reportError=a}.call(l.prototype),t.AppConfig=l}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(h,p,f){var e=h("./lib/lang"),o=(h("./lib/oop"),h("./lib/net")),t=h("./lib/app_config").AppConfig,g=(f.exports=p=new t,function(){return this}()),m={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};function i(e){if(m.packaged=e||h.packaged||f.packaged||g.define&&define.packaged,!g.document)return"";for(var t,i={},n="",e=document.currentScript||document._currentScript,o=(e&&e.ownerDocument||document).getElementsByTagName("script"),r=0;r<o.length;r++){var s=o[r],a=s.src||s.getAttribute("src");if(a){for(var l=s.attributes,c=0,u=l.length;c<u;c++){var d=l[c];0===d.name.indexOf("data-ace-")&&(i[d.name.replace(/^data-ace-/,"").replace(/-(.)/g,function(e,t){return t.toUpperCase()})]=d.value)}s=a.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);s&&(n=s[1])}}for(t in n&&(i.base=i.base||n,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base,i)void 0!==i[t]&&p.set(t,i[t])}p.get=function(e){if(m.hasOwnProperty(e))return m[e];throw new Error("Unknown config key: "+e)},p.set=function(e,t){if(!m.hasOwnProperty(e))throw new Error("Unknown config key: "+e);m[e]=t},p.all=function(){return e.copyObject(m)},p.moduleUrl=function(e,t){if(m.$moduleUrls[e])return m.$moduleUrls[e];var e=e.split("/"),i="snippets"==(t=t||e[e.length-2]||"")?"/":"-",n=e[e.length-1],o=("worker"==t&&"-"==i&&(o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g"),n=n.replace(o,"")),(!n||n==t)&&1<e.length&&(n=e[e.length-2]),m[t+"Path"]);return null==o?o=m.basePath:"/"==i&&(t=i=""),o&&"/"!=o.slice(-1)&&(o+="/"),o+t+i+n+this.get("suffix")},p.setModuleUrl=function(e,t){return m.$moduleUrls[e]=t},p.$loading={},p.loadModule=function(i,e){var t,n;Array.isArray(i)&&(t=i[0],i=i[1]);try{n=h(i)}catch(e){}if(n&&!p.$loading[i])return e&&e(n);if(p.$loading[i]||(p.$loading[i]=[]),p.$loading[i].push(e),!(1<p.$loading[i].length))return n=function(){h([i],function(t){p._emit("load.module",{name:i,module:t});var e=p.$loading[i];p.$loading[i]=null,e.forEach(function(e){e&&e(t)})})},p.get("packaged")?void o.loadScript(p.moduleUrl(i,t),n):n()},i(!0),p.init=i}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,i){"use strict";function n(n){function e(e){document.hasFocus&&document.hasFocus()||window.focus(),n.focus()}var o=this,t=(this.editor=n,new r(this),new s(this),new a(this),n.renderer.getMouseEventTarget()),i=(l.addListener(t,"click",this.onMouseEvent.bind(this,"click")),l.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove")),l.addMultiMouseDownListener(t,[400,300,250],this,"onMouseEvent"),n.renderer.scrollBarV&&(l.addMultiMouseDownListener(n.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent"),l.addMultiMouseDownListener(n.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent"),c.isIE&&(l.addListener(n.renderer.scrollBarV.element,"mousedown",e),l.addListener(n.renderer.scrollBarH.element,"mousedown",e))),l.addMouseWheelListener(n.container,this.onMouseWheel.bind(this,"mousewheel")),n.renderer.$gutter);l.addListener(i,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),l.addListener(i,"click",this.onMouseEvent.bind(this,"gutterclick")),l.addListener(i,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),l.addListener(i,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),l.addListener(t,"mousedown",e),l.addListener(i,"mousedown",function(e){return n.focus(),l.preventDefault(e)}),n.on("mousemove",function(e){var t,i;o.state||o.$dragDelay||!o.$dragEnabled||(e=n.renderer.screenToTextCoordinates(e.x,e.y),t=n.session.selection.getRange(),i=n.renderer,!t.isEmpty()&&t.insideStart(e.row,e.column)?i.setCursorStyle("default"):i.setCursorStyle(""))})}var l=e("../lib/event"),c=e("../lib/useragent"),r=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,e=e("../config");!function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var i=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;i&&i.length&&this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var i=new u(t,this.editor);i.speed=2*this.$scrollSpeed,i.wheelX=t.wheelX,i.wheelY=t.wheelY,this.editor._emit(e,i)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;function i(e){if(e){if(c.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse();s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new u(e,s.editor),s.$mouseMoved=!0}}function n(e){clearInterval(a),o(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",null==r.$keepTextAreaAtCursor&&(r.$keepTextAreaAtCursor=!0,r.$moveTextAreaToCursor()),s.isMousePressed=!1,s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e)}function o(){s[s.state]&&s[s.state](),s.$mouseMoved=!1}var r=this.editor.renderer,s=(r.$keepTextAreaAtCursor&&(r.$keepTextAreaAtCursor=null),this);if(c.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){n(e)});s.$onCaptureMouseMove=i,s.releaseMouse=l.capture(this.editor.container,i,n);var a=setInterval(o,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&l.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)}}.call(n.prototype),e.defineOptions(n.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:c.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=n}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,i){"use strict";t.FoldHandler=function(o){o.on("click",function(e){var t=e.getDocumentPosition(),i=o.session,t=i.getFoldAt(t.row,t.column,1);t&&(e.getAccelKey()?i.removeFold(t):i.expandFold(t),e.stop())}),o.on("gutterclick",function(e){var t,i;"foldWidgets"==o.renderer.$gutterLayer.getRegion(e)&&(t=e.getDocumentPosition().row,(i=o.session).foldWidgets&&i.foldWidgets[t]&&o.session.onFoldWidgetClick(t,e),o.isFocused()||o.focus(),e.stop())}),o.on("gutterdblclick",function(e){var t,i,n;"foldWidgets"==o.renderer.$gutterLayer.getRegion(e)&&(n=e.getDocumentPosition().row,(i=(i=(t=o.session).getParentFoldRangeData(n,!0)).range||i.firstRange)&&(n=i.start.row,(n=t.getFoldAt(n,t.getLine(n).length,1))?t.removeFold(n):(t.addFold("...",i),o.renderer.scrollCursorIntoView({row:i.start.row,column:0}))),e.stop())})}}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,i){"use strict";function n(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)}var o=e("../lib/keys"),l=e("../lib/event");!function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){var i;e&&("function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e),-1!=(i=this.$handlers.indexOf(e))&&this.$handlers.splice(i,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==i&&e.attach&&e.attach(this.$editor))},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,i=t.editor;return this.$handlers.map(function(e){return e.getStatusText&&e.getStatusText(i,t)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,i,n){for(var o,r=!1,s=this.$editor.commands,a=this.$handlers.length;a--&&!((o=this.$handlers[a].handleKeyboard(this.$data,e,t,i,n))&&o.command&&((r="null"==o.command||s.exec(o.command,this.$editor,o.args,n))&&n&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&l.stopEvent(n),r)););return r},this.onCommandKey=function(e,t,i){var n=o.keyCodeToString(i);this.$callKeyboardHandlers(t,n,i,e)},this.onTextInput=function(e){this.$callKeyboardHandlers(-1,e)||this.$editor.commands.exec("insertstring",this.$editor,e)}}.call(n.prototype),t.KeyBinding=n}),ace.define("ace/range",["require","exports","module"],function(e,t,i){"use strict";function r(e,t,i,n){this.start={row:e,column:t},this.end={row:i,column:n}}!function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t=e.end,e=e.start,t=this.compare(t.row,t.column);return 1==t?1==(t=this.compare(e.row,e.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(e.row,e.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){e=this.compareRange(e);return-1==e||0==e||1==e},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row!==e||t<=this.end.column?0:1:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){var i,n;return this.end.row>t?i={row:t+1,column:0}:this.end.row<e&&(i={row:e,column:0}),this.start.row>t?n={row:t+1,column:0}:this.start.row<e&&(n={row:e,column:0}),r.fromPoints(n||this.start,i||this.end)},this.extend=function(e,t){var i,n,o=this.compare(e,t);return 0==o?this:(-1==o?i={row:e,column:t}:n={row:e,column:t},r.fromPoints(i||this.start,n||this.end))},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),e=e.documentToScreenPosition(this.end);return new r(t.row,t.column,e.row,e.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}.call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=r}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,i){"use strict";function n(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})}var o=e("./lib/oop"),r=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range;!function(){o.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){var t,i,n;this.$isEmpty?this.moveCursorTo(this.lead.row,this.lead.column+e):(t=this.getSelectionAnchor(),i=this.getSelectionLead(),(n=this.isBackwards())&&0===t.column||this.setSelectionAnchor(t.row,t.column+e),!n&&0===i.column||this.$moveSelection(function(){this.moveCursorTo(i.row,i.column+e)}))},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?a.fromPoints(t,t):this.isBackwards()?a.fromPoints(t,e):a.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){var i;return void 0===t&&(e=(i=e||this.lead).row,t=i.column),this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),e=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(e)},this.getLineRange=function(e,t){var e="number"==typeof e?e:this.lead.row,i=this.session.getFoldLine(e),i=i?(e=i.start.row,i.end.row):e;return!0===t?new a(e,0,i,this.session.getLine(i).length):new a(e,0,i+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();(e=this.session.getFoldAt(t.row,t.column,-1))?this.moveCursorTo(e.start.row,e.start.column):0===t.column?0<t.row&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length):(e=this.session.getTabSize(),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column-e,t.column).split(" ").length-1==e?this.moveCursorBy(0,-e):this.moveCursorBy(0,-1))},this.moveCursorRight=function(){var e,t=this.lead.getPosition();(e=this.session.getFoldAt(t.row,t.column,1))?this.moveCursorTo(e.end.row,e.end.column):this.lead.column==this.doc.getLine(this.lead.row).length?this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0):(e=this.session.getTabSize(),t=this.lead,this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column,t.column+e).split(" ").length-1==e?this.moveCursorBy(0,e):this.moveCursorBy(0,1))},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,i=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(i,0),e=this.session.getDisplayLine(e,null,i.row,i.column).match(/^\s*/);e[0].length==t||this.session.$useEmacsStyleLineStart||(i.column+=e[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var e,t=this.lead,t=this.session.getDocumentLastRowColumnPosition(t.row,t.column);this.lead.column==t.column&&(e=this.session.getLine(t.row),t.column==e.length&&0<(e=e.search(/\s+$/))&&(t.column=e)),this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),n=i.substring(t),o=(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.getFoldAt(e,t,1));if(o)this.moveCursorTo(o.end.row,o.end.column);else{if(this.session.nonTokenRe.exec(n)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=i.substring(t)),t>=i.length)return this.moveCursorTo(e,i.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(n)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column;if(i=this.session.getFoldAt(e,t,-1))this.moveCursorTo(i.start.row,i.start.column);else{var i=this.session.getFoldStringAt(e,t,-1),i=(null==i&&(i=this.doc.getLine(e).substring(0,t)),r.stringReverse(i));if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(i)&&(t-=this.session.nonTokenRe.lastIndex,i=i.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),t<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(0<e&&this.moveCursorWordLeft());this.session.tokenRe.exec(i)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.$shortWordEndIndex=function(e){var t,i=0,n=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,this.session.tokenRe.exec(e))i=this.session.tokenRe.lastIndex;else{for(;(t=e[i])&&n.test(t);)i++;if(i<1)for(o.lastIndex=0;(t=e[i])&&!o.test(t);)if(o.lastIndex=0,i++,n.test(t)){if(2<i){i--;break}for(;(t=e[i])&&n.test(t);)i++;if(2<i)break}}return o.lastIndex=0,i},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),n=i.substring(t),o=this.session.getFoldAt(e,t,1);if(o)return this.moveCursorTo(o.end.row,o.end.column);if(t==i.length){for(var r=this.doc.getLength();n=this.doc.getLine(++e),e<r&&/^\s*$/.test(n););/^\s+/.test(n)||(n=""),t=0}o=this.$shortWordEndIndex(n);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var i=this.session.getLine(e).substring(0,t);if(0===t){for(;i=this.doc.getLine(--e),0<e&&/^\s*$/.test(i););t=i.length,/\s+$/.test(i)||(i="")}var n=r.stringReverse(i),n=this.$shortWordEndIndex(n);return this.moveCursorTo(e,t-n)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var i=this.session.documentToScreenPosition(this.lead.row,this.lead.column),i=(0===t&&(this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column),this.session.screenToDocumentPosition(i.row+e,i.column));0!==e&&0===t&&i.row===this.lead.row&&i.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[i.row]&&i.row++,this.moveCursorTo(i.row,i.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,i){var n=this.session.getFoldAt(e,t,1);n&&(e=n.start.row,t=n.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,i||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,i){e=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(e.row,e.column,i)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e.call(null,this);var i=this.getCursor();return a.fromPoints(t,i)}catch(e){return a.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){var e;return this.rangeCount?e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}):(e=this.getRange()).isBackwards=this.isBackwards(),e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var i=a.fromPoints(e[t].start,e[t].end);e.isBackwards&&(i.cursor=i.start),this.addRange(i,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}.call(n.prototype),t.Selection=n}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,i){"use strict";function n(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var i=this.states[t],n=[],o=0,r=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],l=0;l<i.length;l++){var c,u,d=i[l];d.defaultToken&&(r.defaultToken=d.defaultToken),d.caseInsensitive&&(s="gi"),null!=d.regex&&(d.regex instanceof RegExp&&(d.regex=d.regex.toString().slice(1,-1)),c=d.regex,u=new RegExp("(?:("+c+")|(.))").exec("a").length-2,Array.isArray(d.token)?1==d.token.length||1==u?d.token=d.token[0]:u-1!=d.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:d,groupCount:u-1}),d.token=d.token[0]):(d.tokenArray=d.token,d.token=null,d.onMatch=this.$arrayTokens):"function"!=typeof d.token||d.onMatch||(d.onMatch=1<u?this.$applyToken:d.token),1<u&&(c=/\\\d/.test(d.regex)?d.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+o+1)}):(u=1,this.removeCapturingGroups(d.regex)),d.splitRegex||"string"==typeof d.token||a.push(d)),r[o]=l,o+=u,n.push(c),d.onMatch||(d.onMatch=null))}n.length||(r[0]=0,n.push("$")),a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)},this),this.regExps[t]=new RegExp("("+n.join(")|(")+")|($)",s)}}var o=e("./config"),y=2e3;!function(){this.$setMaxTokenCount=function(e){y=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),i=this.token.apply(this,t);if("string"==typeof i)return[{type:i,value:e}];for(var n=[],o=0,r=i.length;o<r;o++)t[o]&&(n[n.length]={type:i[o],value:t[o]});return n},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var i=[],n=this.tokenArray,o=0,r=n.length;o<r;o++)t[o+1]&&(i[i.length]={type:n[o],value:t[o+1]});return i},this.removeCapturingGroups=function(e){return e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e})},this.createSplitterRegexp=function(e,t){var s,a,l;return-1!=e.indexOf("(?=")&&(s=0,a=!1,l={},e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,i,n,o,r){return a?a="]"!=o:o?a=!0:n?(s==l.stack&&(l.end=r+1,l.stack=-1),s--):i&&(s++,1!=i.length&&(l.stack=s,l.start=r)),e}),null!=l.end&&/^\)*$/.test(e.substr(l.end))&&(e=e.substring(0,l.start)+e.substr(l.end))),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){t&&"string"!=typeof t?"#tmp"===(t=(i=t.slice(0))[0])&&(i.shift(),t=i.shift()):i=[];for(var i,n,o=t||"start",r=(r=this.states[o])||this.states[o="start"],s=this.matchMappings[o],a=this.regExps[o],l=[],c=a.lastIndex=0,u=0,d={type:null,value:""};n=a.exec(e);){var h,p=s.defaultToken,f=null,g=n[0],m=a.lastIndex;m-g.length>c&&(h=e.substring(c,m-g.length),d.type==p?d.value+=h:(d.type&&l.push(d),d={type:p,value:h}));for(var v=0;v<n.length-2;v++)if(void 0!==n[v+1]){p=(f=r[s[v]]).onMatch?f.onMatch(g,o,i):f.token,f.next&&(o="string"==typeof f.next?f.next:f.next(o,i),(r=this.states[o])||(this.reportError("state doesn't exist",o),r=this.states[o="start"]),s=this.matchMappings[o],(a=this.regExps[o]).lastIndex=c=m);break}if(g)if("string"==typeof p)f&&!1===f.merge||d.type!==p?(d.type&&l.push(d),d={type:p,value:g}):d.value+=g;else if(p){d.type&&l.push(d);for(d={type:null,value:""},v=0;v<p.length;v++)l.push(p[v])}if(c==e.length)break;if(c=m,u++>y){for(u>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});c<e.length;)d.type&&l.push(d),d={value:e.substring(c,c+=2e3),type:"overflow"};o="start",i=[];break}}return d.type&&l.push(d),1<i.length&&i[0]!==o&&i.unshift("#tmp",o),{tokens:l,state:i.length?i:o}},this.reportError=o.reportError}.call(n.prototype),t.Tokenizer=n}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,i){"use strict";function n(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}}var l=e("../lib/lang");!function(){this.addRules=function(e,t){if(t)for(var i in e){for(var n=e[i],o=0;o<n.length;o++){var r=n[o];(r.next||r.onMatch)&&("string"!=typeof r.next?r.nextState&&0!==r.nextState.indexOf(t)&&(r.nextState=t+r.nextState):0!==r.next.indexOf(t)&&(r.next=t+r.next))}this.$rules[t+i]=n}else for(var i in e)this.$rules[i]=e[i]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,i,n,o){e="function"==typeof e?(new e).getRules():e;if(n)for(var r=0;r<n.length;r++)n[r]=t+n[r];else for(var s in n=[],e)n.push(t+s);if(this.addRules(e,t),i)for(var a=Array.prototype[o?"push":"unshift"],r=0;r<n.length;r++)a.apply(this.$rules[n[r]],l.deepCopy(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};function d(e,t){return"start"==e&&!t.length||t.unshift(this.nextState,e),this.nextState}function h(e,t){return t.shift(),t.shift()||"start"}this.normalizeRules=function(){var c=0,u=this.$rules;Object.keys(u).forEach(function e(t){var i=u[t];i.processed=!0;for(var n=0;n<i.length;n++){var o,r,s=i[n],a=(!s.regex&&s.start&&(s.regex=s.start,s.next||(s.next=[]),s.next.push({defaultToken:s.token},{token:s.token+".end",regex:s.end||s.start,next:"pop"}),s.token=s.token+".start",s.push=!0),s.next||s.push);if(a&&Array.isArray(a)?((o=s.stateName)||("string"!=typeof(o=s.token)&&(o=o[0]||""),u[o]&&(o+=c++)),u[o]=a,e(s.next=o)):"pop"==a&&(s.next=h),s.push&&(s.nextState=s.next||s.push,s.next=d,delete s.push),s.rules)for(var l in s.rules)u[l]?u[l].push&&u[l].push.apply(u[l],s.rules[l]):u[l]=s.rules[l];s.include||"string"==typeof s?(o=s.include||s,r=u[o]):Array.isArray(s)&&(r=s),r&&(a=[n,1].concat(r),s.noEscape&&(a=a.filter(function(e){return!e.next})),i.splice.apply(i,a),n--,r=null),s.keywordMap&&(s.token=this.createKeywordMapper(s.keywordMap,s.defaultToken||"text",s.caseInsensitive),delete s.defaultToken)}},this)},this.createKeywordMapper=function(o,t,r,s){var a=Object.create(null);return Object.keys(o).forEach(function(e){for(var t=o[e],i=(t=r?t.toLowerCase():t).split(s||"|"),n=i.length;n--;)a[i[n]]=e}),Object.getPrototypeOf(a)&&(a.__proto__=null),this.$keywordList=Object.keys(a),o=null,r?function(e){return a[e.toLowerCase()]||t}:function(e){return a[e]||t}},this.getKeywords=function(){return this.$keywords}}.call(n.prototype),t.TextHighlightRules=n}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,i){"use strict";function n(){this.$behaviours={}}!function(){this.add=function(e,t,i){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=i},this.addBehaviours=function(e){for(var t in e)for(var i in e[t])this.add(t,i,e[t][i])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){e=("function"==typeof e?new e:e).getBehaviours(t),this.addBehaviours(e)},this.getBehaviours=function(e){if(e){for(var t={},i=0;i<e.length;i++)this.$behaviours[e[i]]&&(t[e[i]]=this.$behaviours[e[i]]);return t}return this.$behaviours}}.call(n.prototype),t.Behaviour=n}),ace.define("ace/unicode",["require","exports","module"],function(e,t,i){"use strict";t.packages={};var n,o={L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"},r=/\w{4}/g;for(n in o)t.packages[n]=o[n].replace(r,"\\u$&")}),ace.define("ace/token_iterator",["require","exports","module"],function(e,t,i){"use strict";function n(e,t,i){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t),e=e.getTokenAt(t,i),this.$tokenIndex=e?e.index:-1}!function(){this.stepBackward=function(){for(--this.$tokenIndex;this.$tokenIndex<0;){if(--this.$row,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e=e||this.$session.getLength(),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,i=e[t].start;if(void 0!==i)return i;for(i=0;0<t;)i+=e[--t].value.length;return i}}.call(n.prototype),t.TokenIterator=n}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,i){"use strict";function n(){this.HighlightRules=r,this.$behaviour=new s}var o=e("../tokenizer").Tokenizer,r=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour").Behaviour,a=e("../unicode"),C=e("../lib/lang"),g=e("../token_iterator").TokenIterator,m=e("../range").Range;!function(){this.tokenRe=new RegExp("^["+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new o(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,o,i,n){var r=o.doc,s=!0,a=!0,l=1/0,c=o.getTabSize(),t=!1;if(this.lineCommentStart){g=Array.isArray(this.lineCommentStart)?(v=this.lineCommentStart.map(C.escapeRegExp).join("|"),this.lineCommentStart[0]):(v=C.escapeRegExp(this.lineCommentStart),this.lineCommentStart),v=new RegExp("^(\\s*)(?:"+v+") ?"),t=o.getUseSoftTabs();var u=function(e,t){var i,n,o=e.match(v);o&&(i=o[1].length,n=o[0].length,f(e,i,n)||" "!=o[0][n-1]||n--,r.removeInLine(t,i,n))},d=g+" ",h=function(e,t){s&&!/\S/.test(e)||(f(e,l,l)?r.insertInLine({row:t,column:l},d):r.insertInLine({row:t,column:l},g))},p=function(e,t){return v.test(e)},f=function(e,t,i){for(var n=0;t--&&" "==e.charAt(t);)n++;if(n%c!=0)return!1;for(n=0;" "==e.charAt(i++);)n++;return 2<c?n%c!=c-1:n%c==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,m=this.blockComment.end,v=new RegExp("^(\\s*)(?:"+C.escapeRegExp(g)+")"),y=new RegExp("(?:"+C.escapeRegExp(m)+")\\s*$"),h=function(e,t){p(e,t)||s&&!/\S/.test(e)||(r.insertInLine({row:t,column:e.length},m),r.insertInLine({row:t,column:l},g))},u=function(e,t){var i;(i=e.match(y))&&r.removeInLine(t,e.length-i[0].length,e.length),(i=e.match(v))&&r.removeInLine(t,i[1].length,i[0].length)},p=function(e,t){if(v.test(e))return!0;for(var i=o.getTokens(t),n=0;n<i.length;n++)if("comment"===i[n].type)return!0}}function b(e){for(var t=i;t<=n;t++)e(r.getLine(t),t)}var w=1/0;b(function(e,t){var i=e.search(/\S/);-1!==i?(i<l&&(l=i),a&&!p(e,t)&&(a=!1)):w>e.length&&(w=e.length)}),l==1/0&&(l=w,a=s=!1),t&&l%c!=0&&(l=Math.floor(l/c)*c),b(a?u:h)},this.toggleBlockComment=function(e,t,i,n){var o=this.blockComment;if(o){!o.start&&o[0]&&(o=o[0]);var r,s,a=(h=new g(t,n.row,n.column)).getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(;a&&/comment/.test(a.type);){if(-1!=(p=a.value.indexOf(o.start))){var c=h.getCurrentTokenRow(),u=h.getCurrentTokenColumn()+p,d=new m(c,u,c,u+o.start.length);break}a=h.stepBackward()}for(var h,p,a=(h=new g(t,n.row,n.column)).getCurrentToken();a&&/comment/.test(a.type);){if(-1!=(p=a.value.indexOf(o.end))){var c=h.getCurrentTokenRow(),u=h.getCurrentTokenColumn()+p,f=new m(c,u,c,u+o.end.length);break}a=h.stepForward()}f&&t.remove(f),d&&(t.remove(d),r=d.start.row,s=-o.start.length)}else s=o.start.length,r=i.start.row,t.insert(i.end,o.end),t.insert(i.start,o.start);l.start.row==r&&(l.start.column+=s),l.end.row==r&&(l.end.column+=s),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,i){return this.$getIndent(t)},this.checkOutdent=function(e,t,i){return!1},this.autoOutdent=function(e,t,i){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var n in this.$embeds=[],this.$modes={},e)e[n]&&(this.$embeds.push(n),this.$modes[n]=new e[n]);for(var o=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],n=0;n<o.length;n++)!function(e){var t=o[n],i=e[t];e[o[n]]=function(){return this.$delegator(t,arguments,i)}}(this)},this.$delegator=function(e,t,i){var n=t[0];"string"!=typeof n&&(n=n[0]);for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var r=n.split(this.$embeds[o]);if(!r[0]&&r[1])return t[0]=r[1],(r=this.$modes[this.$embeds[o]])[e].apply(r,t)}var s=i.apply(this,t);return i?s:void 0},this.transformAction=function(e,t,i,n,o){if(this.$behaviour){var r,s=this.$behaviour.getBehaviours();for(r in s)if(s[r][t]){var a=s[r][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,i=[];for(s in t)for(var n=t[s],o=0,r=n.length;o<r;o++)if("string"==typeof n[o].token)/keyword|support|storage/.test(n[o].token)&&i.push(n[o].regex);else if("object"==typeof n[o].token)for(var s,a=0,l=n[o].token.length;a<l;a++)/keyword|support|storage/.test(n[o].token[a])&&(s=n[o].regex.match(/\(.+?\)/g)[a],i.push(s.substr(1,s.length-2)));this.completionKeywords=i}return e?i.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,i,n){return(this.$keywordList||this.$createKeywordList()).map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(n.prototype),t.Mode=n}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){"use strict";var n=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,e=t.Anchor=function(e,t,i){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===i?this.setPosition(t.row,t.column):this.setPosition(t,i)};!function(){n.implement(this,o),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){var t,i,n,e=e.data,o=e.range;o.start.row==o.end.row&&o.start.row!=this.row||o.start.row>this.row||o.start.row==this.row&&o.start.column>this.column||(t=this.row,i=this.column,n=o.start,o=o.end,"insertText"===e.action?n.row===t&&n.column<=i?n.column===i&&this.$insertRight||(n.row===o.row?i+=o.column-n.column:(i-=n.column,t+=o.row-n.row)):n.row!==o.row&&n.row<t&&(t+=o.row-n.row):"insertLines"===e.action?n.row===t&&0===i&&this.$insertRight||n.row<=t&&(t+=o.row-n.row):"removeText"===e.action?n.row===t&&n.column<i?i=o.column>=i?n.column:Math.max(0,i-(o.column-n.column)):n.row!==o.row&&n.row<t?(o.row===t&&(i=Math.max(0,i-o.column)+n.column),t-=o.row-n.row):o.row===t&&(t-=o.row-n.row,i=Math.max(0,i-o.column)+n.column):"removeLines"==e.action&&n.row<=t&&(o.row<=t?t-=o.row-n.row:(t=n.row,i=0)),this.setPosition(t,i,!0))},this.setPosition=function(e,t,i){i=i?{row:e,column:t}:this.$clipPositionToDocument(e,t);this.row==i.row&&this.column==i.column||(e={row:this.row,column:this.column},this.row=i.row,this.column=i.column,this._signal("change",{old:e,value:i}))},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var i={};return e>=this.document.getLength()?(i.row=Math.max(0,this.document.getLength()-1),i.column=this.document.getLine(i.row).length):e<0?(i.row=0,i.column=0):(i.row=e,i.column=Math.min(this.document.getLine(i.row).length,Math.max(0,t))),t<0&&(i.column=0),i}}.call(e.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,i){"use strict";function n(e){this.$lines=[],0===e.length?this.$lines=[""]:Array.isArray(e)?this._insertLines(0,e):this.insert({row:0,column:0},e)}var o=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=e("./anchor").Anchor;!function(){o.implement(this,r),this.setValue=function(e){var t=this.getLength();this.remove(new s(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new a(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){e=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.getLine(e.start.row).substring(e.start.column,e.end.column);var t=this.getLines(e.start.row,e.end.row),i=(t[0]=(t[0]||"").substring(e.start.column),t.length-1);return e.end.row-e.start.row==i&&(t[i]=t[i].substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):e.row<0&&(e.row=0),e},this.insert=function(e,t){if(!t||0===t.length)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var t=this.$split(t),i=t.splice(0,1)[0],n=0==t.length?null:t.splice(t.length-1,1)[0];return e=this.insertInLine(e,i),null!==n&&(e=this.insertNewLine(e),e=this._insertLines(e.row,t),e=this.insertInLine(e,n||"")),e},this.insertLines=function(e,t){return e>=this.getLength()?this.insert({row:e,column:0},"\n"+t.join("\n")):this._insertLines(Math.max(e,0),t)},this._insertLines=function(e,t){if(0==t.length)return{row:e,column:0};for(;61440<t.length;){var i=this._insertLines(e,t.slice(0,61440));t=t.slice(61440),e=i.row}var n=[e,0],n=(n.push.apply(n,t),this.$lines.splice.apply(this.$lines,n),new s(e,0,e+t.length,0));return this._signal("change",{data:{action:"insertLines",range:n,lines:t}}),n.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"",t=(this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length)),{row:e.row+1,column:0}),e={action:"insertText",range:s.fromPoints(e,t),text:this.getNewLineCharacter()};return this._signal("change",{data:e}),t},this.insertInLine=function(e,t){if(0==t.length)return e;var i=this.$lines[e.row]||"",i=(this.$lines[e.row]=i.substring(0,e.column)+t+i.substring(e.column),{row:e.row,column:e.column+t.length}),e={action:"insertText",range:s.fromPoints(e,i),text:t};return this._signal("change",{data:e}),i},this.remove=function(e){if((e=e instanceof s?e:s.fromPoints(e.start,e.end)).start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end),e.isEmpty())return e.start;var t,i,n=e.start.row,o=e.end.row;return e.isMultiLine()?(t=0==e.start.column?n:n+1,i=o-1,0<e.end.column&&this.removeInLine(o,0,e.end.column),t<=i&&this._removeLines(t,i),t!=n&&(this.removeInLine(n,e.start.column,this.getLine(n).length),this.removeNewLine(e.start.row))):this.removeInLine(n,e.start.column,e.end.column),e.start},this.removeInLine=function(e,t,i){var n,o,r;if(t!=i)return n=new s(e,t,e,i),o=this.getLine(e),r=o.substring(t,i),t=o.substring(0,t)+o.substring(i,o.length),this.$lines.splice(e,1,t),i={action:"removeText",range:n,text:r},this._signal("change",{data:i}),n.start},this.removeLines=function(e,t){return e<0||t>=this.getLength()?this.remove(new s(e,0,t+1,0)):this._removeLines(e,t)},this._removeLines=function(e,t){var i=new s(e,0,t+1,0),t=this.$lines.splice(e,t-e+1),e={action:"removeLines",range:i,nl:this.getNewLineCharacter(),lines:t};return this._signal("change",{data:e}),t},this.removeNewLine=function(e){var t=this.getLine(e),i=this.getLine(e+1),n=new s(e,t.length,e+1,0),e=(this.$lines.splice(e,2,t+i),{action:"removeText",range:n,text:this.getNewLineCharacter()});this._signal("change",{data:e})},this.replace=function(e,t){return e instanceof s||(e=s.fromPoints(e.start,e.end)),0==t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var i=e[t],n=s.fromPoints(i.range.start,i.range.end);"insertLines"==i.action?this.insertLines(n.start.row,i.lines):"insertText"==i.action?this.insert(n.start,i.text):"removeLines"==i.action?this._removeLines(n.start.row,n.end.row-1):"removeText"==i.action&&this.remove(n)}},this.revertDeltas=function(e){for(var t=e.length-1;0<=t;t--){var i=e[t],n=s.fromPoints(i.range.start,i.range.end);"insertLines"==i.action?this._removeLines(n.start.row,n.end.row-1):"insertText"==i.action?this.remove(n):"removeLines"==i.action?this._insertLines(n.start.row,i.lines):"removeText"==i.action&&this.insert(n.start,i.text)}},this.indexToPosition=function(e,t){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,o=t||0,r=i.length;o<r;o++)if((e-=i[o].length+n)<0)return{row:o,column:e+i[o].length+n};return{row:r-1,column:i[r-1].length}},this.positionToIndex=function(e,t){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,o=0,r=Math.min(e.row,i.length),s=t||0;s<r;++s)o+=i[s].length+n;return o+e.column}}.call(n.prototype),t.Document=n}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var a=this;this.$worker=function(){if(a.running){for(var e=new Date,t=a.currentLine,i=-1,n=a.doc;a.lines[t];)t++;var o=t,r=n.getLength(),s=0;for(a.running=!1;t<r;){for(a.$tokenizeRow(t),i=t;t++,a.lines[t];);if(++s%5==0&&20<new Date-e){a.running=setTimeout(a.$worker,20);break}}a.currentLine=t,o<=i&&a.fireUpdateEvent(o,i)}}}var o=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter;!function(){o.implement(this,r),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){this._signal("update",{data:{first:e,last:t}})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.range,i=t.start.row,t=t.end.row-i;0==t?this.lines[i]=null:"removeText"==e.action||"removeLines"==e.action?(this.lines.splice(i,1+t,null),this.states.splice(i,1+t,null)):((e=Array(1+t)).unshift(i,1),this.lines.splice.apply(this.lines,e),this.states.splice.apply(this.states,e)),this.currentLine=Math.min(i,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),i=this.states[e-1],t=this.tokenizer.getLineTokens(t,i,e);return this.states[e]+""!=t.state+""?(this.states[e]=t.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=t.tokens}}.call(n.prototype),t.BackgroundTokenizer=n}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,i){"use strict";function n(e,t,i){this.setRegexp(e),this.clazz=t,this.type=i||"text"}var c=e("./lib/lang"),u=(e("./lib/oop"),e("./range").Range);!function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,i,n){if(this.regExp)for(var o=n.firstRow,r=n.lastRow,s=o;s<=r;s++){var a=this.cache[s];null==a&&(a=(a=(a=c.getMatchOffsets(i.getLine(s),this.regExp)).length>this.MAX_RANGES?a.slice(0,this.MAX_RANGES):a).map(function(e){return new u(s,e.offset,s,e.offset+e.length)}),this.cache[s]=a.length?a:"");for(var l=a.length;l--;)t.drawSingleLineMarker(e,a[l].toScreenRange(i),this.clazz,n)}}}.call(n.prototype),t.SearchHighlight=n}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,i){"use strict";var n=e("../range").Range;function o(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];e=t[t.length-1];this.range=new n(t[0].start.row,t[0].start.column,e.end.row,e.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}!function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach(function(e){e.start.row+=t,e.end.row+=t})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),0<this.range.compareEnd(e.start.row,e.start.column)?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,i){var n,o,r=0,s=this.folds,a=!0;null==t&&(t=this.end.row,i=this.end.column);for(var l=0;l<s.length;l++){if(-1==(o=(n=s[l]).range.compareStart(t,i)))return void e(null,t,i,r,a);if(!e(null,n.start.row,n.start.column,r,a)&&e(n.placeholder,n.start.row,n.start.column,r)||0===o)return;a=!n.sameRow,r=n.end.column}e(null,t,i,r,a)},this.getNextFoldTo=function(e,t){for(var i,n,o=0;o<this.folds.length;o++){if(-1==(n=(i=this.folds[o]).range.compareEnd(e,t)))return{fold:i,kind:"after"};if(0===n)return{fold:i,kind:"inside"}}return null},this.addRemoveChars=function(e,t,i){var n,o=this.getNextFoldTo(e,t);if(o)if(n=o.fold,"inside"==o.kind&&n.start.column!=t&&n.start.row!=e)window.console&&window.console.log(e,t,n);else if(n.start.row==e){var r,s=(r=this.folds).indexOf(n);for(0===s&&(this.start.column+=i);s<r.length;s++){if((n=r[s]).start.column+=i,!n.sameRow)return;n.end.column+=i}this.end.column+=i}},this.split=function(e,t){e=this.getNextFoldTo(e,t);if(!e||"inside"==e.kind)return null;var t=e.fold,e=this.folds,i=this.foldData,t=e.indexOf(t),n=e[t-1],n=(this.end.row=n.end.row,this.end.column=n.end.column,new o(i,e=e.splice(t,e.length-t)));return i.splice(i.indexOf(this)+1,0,n),n},this.merge=function(e){for(var t=e.folds,i=0;i<t.length;i++)this.addFold(t[i]);var n=this.foldData;n.splice(n.indexOf(e),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach(function(e){t.push("  "+e.toString())}),t.push("]"),t.join("\n")},this.idxToPosition=function(e){for(var t=0,i=0;i<this.folds.length;i++){var n=this.folds[i];if((e-=n.start.column-t)<0)return{row:n.start.row,column:n.start.column+e};if((e-=n.placeholder.length)<0)return n.start;t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}.call(o.prototype),t.FoldLine=o}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,i){"use strict";function n(){this.ranges=[]}var a=e("./range").Range.comparePoints;!function(){this.comparePoints=a,this.pointIndex=function(e,t,i){for(var n=this.ranges,o=i||0;o<n.length;o++){var r=n[o],s=a(e,r.end);if(0<s);else return r=a(e,r.start),0===s?t&&0!==r?-o-2:o:0<r||0===r&&!t?o:-o-1}return-o-1},this.add=function(e){var t=!e.isEmpty(),i=this.pointIndex(e.start,t),t=this.pointIndex(e.end,t,i=i<0?-i-1:i);return t<0?t=-t-1:t++,this.ranges.splice(i,t-i,e)},this.addList=function(e){for(var t=[],i=e.length;i--;)t.push.call(t,this.add(e[i]));return t},this.substractPoint=function(e){e=this.pointIndex(e);if(0<=e)return this.ranges.splice(e,1)},this.merge=function(){for(var e=[],t=this.ranges,i=(t=t.sort(function(e,t){return a(e.start,t.start)}))[0],n=1;n<t.length;n++){var o=i,i=t[n],r=a(o.end,i.start);r<0||(0!=r||o.isEmpty()||i.isEmpty())&&(a(o.end,i.end)<0&&(o.end.row=i.end.row,o.end.column=i.end.column),t.splice(n,1),e.push(i),i=o,n--)}return this.ranges=t,e},this.contains=function(e,t){return 0<=this.pointIndex({row:e,column:t})},this.containsPoint=function(e){return 0<=this.pointIndex(e)},this.rangeAtPoint=function(e){e=this.pointIndex(e);if(0<=e)return this.ranges[e]},this.clipRows=function(e,t){var i=this.ranges;if(i[0].start.row>t||i[i.length-1].start.row<e)return[];for(var e=this.pointIndex({row:e,column:0}),n=this.pointIndex({row:t,column:0},e=e<0?-e-1:e),o=(n<0&&(n=-n-1),[]),r=e;r<n;r++)o.push(i[r]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t,i,n=e.data.range,o=("i"==e.data.action[0]?(i=n.start,t=n.end):(t=n.start,i=n.end),i.row),r=t.row-o,s=-i.column+t.column,a=this.ranges,l=0,c=a.length;l<c;l++){var u=a[l];if(!(u.end.row<o)){if(u.start.row>o)break;u.start.row==o&&u.start.column>=i.column&&(u.start.column==i.column&&this.$insertRight||(u.start.column+=s,u.start.row+=r)),u.end.row==o&&u.end.column>=i.column&&(u.end.column==i.column&&this.$insertRight||(u.end.column==i.column&&0<s&&l<c-1&&u.end.column>u.start.column&&u.end.column==a[l+1].start.column&&(u.end.column-=s),u.end.column+=s,u.end.row+=r))}}if(0!=r&&l<c)for(;l<c;l++)(u=a[l]).start.row+=r,u.end.row+=r}}.call(n.prototype),t.RangeList=n}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,i){"use strict";e("../range").Range;var n=e("../range_list").RangeList,e=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};function l(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function r(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}e.inherits(o,n),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach(function(e){e.setFoldLine(t)})},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);s=e,t=this.start,l(s.start,t),l(s.end,t);for(var t,i=e.start.row,n=e.start.column,o=0,r=-1;o<this.subFolds.length&&1==(r=this.subFolds[o].range.compare(i,n));o++);var s=this.subFolds[o];if(0==r)return s.addSubFold(e);for(var i=e.range.end.row,n=e.range.end.column,a=o,r=-1;a<this.subFolds.length&&1==(r=this.subFolds[a].range.compare(i,n));a++);this.subFolds[a];if(0==r)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);this.subFolds.splice(o,a-o,e);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return e=e,t=this.start,r(e.start,t),void r(e.end,t);var t}}.call(o.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,i){"use strict";var a=e("../range").Range,h=e("./fold_line").FoldLine,p=e("./fold").Fold,l=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,i){var n=this.getFoldLine(e);if(!n)return null;for(var o=n.folds,r=0;r<o.length;r++){var s=o[r];if(s.range.contains(e,t)&&!(1==i&&s.range.isEnd(e,t)||-1==i&&s.range.isStart(e,t)))return s}},this.getFoldsInRange=function(e){var t=e.start,i=e.end,n=this.$foldData,o=[];t.column+=1,--i.column;for(var r=0;r<n.length;r++){var s=n[r].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=n[r].folds,l=0;l<a.length;l++){var c=a[l];if(-2==(s=c.range.compareRange(e)))break;if(2!=s){if(42==s)break;o.push(c)}}}}return--t.column,i.column+=1,o},this.getFoldsInRangeList=function(e){var t;return Array.isArray(e)?(t=[],e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)):t=this.getFoldsInRange(e),t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,i=0;i<t.length;i++)for(var n=0;n<t[i].folds.length;n++)e.push(t[i].folds[n]);return e},this.getFoldStringAt=function(e,t,i,n){if(!(n=n||this.getFoldLine(e)))return null;for(var o,r={end:{column:0}},s=0;s<n.folds.length;s++){var a,l=(a=n.folds[s]).range.compareEnd(e,t);if(-1==l){o=this.getLine(a.start.row).substring(r.end.column,a.start.column);break}if(0===l)return null;r=a}return o=o||this.getLine(a.start.row).substring(r.end.column),-1==i?o.substring(0,t-r.end.column):1==i?o.substring(t-r.end.column):o},this.getFoldLine=function(e,t){var i=this.$foldData,n=0;for(-1==(n=t?i.indexOf(t):n)&&(n=0);n<i.length;n++){var o=i[n];if(o.start.row<=e&&o.end.row>=e)return o;if(o.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var i=this.$foldData,n=0;for(-1==(n=t?i.indexOf(t):n)&&(n=0);n<i.length;n++){var o=i[n];if(o.end.row>=e)return o}return null},this.getFoldedRowCount=function(e,t){for(var i=this.$foldData,n=t-e+1,o=0;o<i.length;o++){var r=i[o],s=r.end.row,r=r.start.row;if(t<=s){r<t&&(e<=r?n-=t-r:n=0);break}e<=s&&(n-=e<=r?s-r:s-e+1)}return n},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var i,n=this.$foldData,o=!1,r=(e instanceof p?i=e:(i=new p(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(i.range),i.start.row),e=i.start.column,s=i.end.row,t=i.end.column;if(!(r<s||r==s&&e<=t-2))throw new Error("The range has to be at least 2 characters width");var a=this.getFoldAt(r,e,1),l=this.getFoldAt(s,t,-1);if(a&&l==a)return a.addSubFold(i);a&&!a.range.isStart(r,e)&&this.removeFold(a),l&&!l.range.isEnd(s,t)&&this.removeFold(l);e=this.getFoldsInRange(i.range);0<e.length&&(this.removeFolds(e),e.forEach(function(e){i.addSubFold(e)}));for(var c=0;c<n.length;c++){var u=n[c];if(s==u.start.row){u.addFold(i),o=!0;break}if(r==u.end.row){if(u.addFold(i),o=!0,!i.sameRow){var d=n[c+1];if(d&&d.start.row==s){u.merge(d);break}}break}if(s<=u.start.row)break}return o||(u=this.$addFoldLine(new h(this.$foldData,i))),this.$useWrapMode?this.$updateWrapData(u.start.row,u.start.row):this.$updateRowLengthCache(u.start.row,u.start.row),this.$modified=!0,this._emit("changeFold",{data:i,action:"add"}),i},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,i=t.start.row,n=t.end.row,o=this.$foldData,r=t.folds;1==r.length?o.splice(o.indexOf(t),1):t.range.isEnd(e.end.row,e.end.column)?(r.pop(),t.end.row=r[r.length-1].end.row,t.end.column=r[r.length-1].end.column):t.range.isStart(e.start.row,e.start.column)?(r.shift(),t.start.row=r[0].start.row,t.start.column=r[0].start.column):e.sameRow?r.splice(r.indexOf(e),1):((r=(o=t.split(e.start.row,e.start.column)).folds).shift(),o.start.row=r[0].start.row,o.start.column=r[0].start.column),this.$updating||(this.$useWrapMode?this.$updateWrapData(i,n):this.$updateRowLengthCache(i,n)),this.$modified=!0,this._emit("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(e){t.restoreRange(e),this.addFold(e)},this),0<t.collapseChildren&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var i;if(null==e?(i=new a(0,0,this.getLength(),0),t=!0):i="number"==typeof e?new a(e,0,e,this.getLine(e).length):"row"in e?a.fromPoints(e,e):e,e=this.getFoldsInRangeList(i),t)this.removeFolds(e);else for(var n=e;n.length;)this.expandFolds(n),n=this.getFoldsInRangeList(i);if(e.length)return e},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){t=this.getFoldLine(e,t);return t?t.end.row:e},this.getRowFoldStart=function(e,t){t=this.getFoldLine(e,t);return t?t.start.row:e},this.getFoldDisplayLine=function(e,t,i,o,r){null==o&&(o=e.start.row),null==r&&(r=0),null==t&&(t=e.end.row),null==i&&(i=this.getLine(t).length);var s=this.doc,a="";return e.walk(function(e,t,i,n){if(!(t<o)){if(t==o){if(i<r)return;n=Math.max(r,n)}a+=null!=e?e:s.getLine(t).substring(n,i)}},t,i),a},this.getDisplayLine=function(e,t,i,n){var o=this.getFoldLine(e);return o?this.getFoldDisplayLine(o,e,t,i,n):(o=this.doc.getLine(e)).substring(n||0,t||o.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(e){e=e.folds.map(function(e){return e.clone()});return new h(t,e)})},this.toggleFold=function(e){var t=this.selection.getRange();if(t.isEmpty()){var i,n=t.start;if(i=this.getFoldAt(n.row,n.column))return void this.expandFold(i);(o=this.findMatchingBracket(n))?1==t.comparePoint(o)?t.end=o:(t.start=o,t.start.column++,t.end.column--):(o=this.findMatchingBracket({row:n.row,column:n.column+1}))?(1==t.comparePoint(o)?t.end=o:t.start=o,t.start.column++):t=this.getCommentFoldRange(n.row,n.column)||t}else{var o=this.getFoldsInRange(t);if(e&&o.length)return void this.expandFolds(o);1==o.length&&(i=o[0])}if((i=i||this.getFoldAt(t.start.row,t.start.column))&&i.range.toString()==t.toString())this.expandFold(i);else{n="...";if(!t.isMultiLine()){if((n=this.getTextRange(t)).length<4)return;n=n.trim().substring(0,2)+".."}this.addFold(n,t)}},this.getCommentFoldRange=function(e,t,i){var n=new l(this,e,t),o=n.getCurrentToken();if(o&&/^comment|string/.test(o.type)){var r=new a,s=new RegExp(o.type.replace(/\..*/,"\\."));if(1!=i){for(;(o=n.stepBackward())&&s.test(o.type););n.stepForward()}if(r.start.row=n.getCurrentTokenRow(),r.start.column=n.getCurrentTokenColumn()+2,n=new l(this,e,t),-1!=i){for(;(o=n.stepForward())&&s.test(o.type););o=n.stepBackward()}else o=n.getCurrentToken();return r.end.row=n.getCurrentTokenRow(),r.end.column=n.getCurrentTokenColumn()+o.value.length-2,r}},this.foldAll=function(e,t,i){null==i&&(i=1e5);var n=this.foldWidgets;if(n){t=t||this.getLength();for(var o=e=e||0;o<t;o++)if(null==n[o]&&(n[o]=this.getFoldWidget(o)),"start"==n[o]){var r=this.getFoldWidgetRange(o);if(r&&r.isMultiLine()&&r.end.row<=t&&r.start.row>=e){o=r.end.row;try{var s=this.addFold("...",r);s&&(s.collapseChildren=i)}catch(e){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");this.$foldStyle!=e&&("manual"==(this.$foldStyle=e)&&this.unfold(),e=this.$foldMode,this.$setFolding(null),this.$setFolding(e))},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._emit("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var i=this.foldWidgets;if(!i||t&&i[e])return{};for(var n=e-1;0<=n;){var o=i[n];if("start"==(o=null==o?i[n]=this.getFoldWidget(n):o)){var r=this.getFoldWidgetRange(n),s=s||r;if(r&&r.end.row>=e)break}n--}return{range:-1!==n&&r,firstRange:s}},this.onFoldWidgetClick=function(e,t){var i={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};this.$toggleFoldWidget(e,i)||(e=t.target||t.srcElement)&&/ace_fold-widget/.test(e.className)&&(e.className+=" ace_invalid")},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var i=this.getFoldWidget(e),n=this.getLine(e),i="end"===i?-1:1,n=this.getFoldAt(e,-1==i?0:n.length,i);if(n)t.children||t.all?this.removeFold(n):this.expandFold(n);else{var o,r,s,i=this.getFoldWidgetRange(e,!0);if(!i||i.isMultiLine()||!(n=this.getFoldAt(i.start.row,i.start.column,1))||!i.isEqual(n.range))return t.siblings?((o=this.getParentFoldRangeData(e)).range&&(r=o.range.start.row+1,s=o.range.end.row),this.foldAll(r,s,t.all?1e4:0)):t.children?(s=i?i.end.row:this.getLength(),this.foldAll(e+1,i.end.row,t.all?1e4:0)):i&&(t.all&&(i.collapseChildren=1e4),this.addFold("...",i)),i;this.removeFold(n)}}},this.toggleFoldWidget=function(e){var t,i=this.selection.getCursor().row;i=this.getRowFoldStart(i),this.$toggleFoldWidget(i,{})||(t=(t=this.getParentFoldRangeData(i,!0)).range||t.firstRange)&&(i=t.start.row,(i=this.getFoldAt(i,this.getLine(i).length,1))?this.removeFold(i):this.addFold("...",t))},this.updateFoldWidgets=function(e){var e=e.data,t=e.range,i=t.start.row,t=t.end.row-i;0==t?this.foldWidgets[i]=null:"removeText"==e.action||"removeLines"==e.action?this.foldWidgets.splice(i,1+t,null):((e=Array(1+t)).unshift(i,1),this.foldWidgets.splice.apply(this.foldWidgets,e))},this.tokenizerUpdateFoldWidgets=function(e){e=e.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,i){"use strict";var d=e("../token_iterator").TokenIterator,a=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;t=t||this.getLine(e.row).charAt(e.column-1);if(""==t)return null;t=t.match(/([\(\[\{])|([\)\]\}])/);return t?t[1]?this.$findClosingBracket(t[1],e):this.$findOpeningBracket(t[2],e):null},this.getBracketRange=function(e){var t,i,n=this.getLine(e.row),o=!0,r=n.charAt(e.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(s||(r=n.charAt(e.column),e={row:e.row,column:e.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),o=!1),!s)return null;if(s[1]){if(!(i=this.$findClosingBracket(s[1],e)))return null;t=a.fromPoints(e,i),o||(t.end.column++,t.start.column--),t.cursor=t.end}else{if(!(i=this.$findOpeningBracket(s[2],e)))return null;t=a.fromPoints(i,e),o||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,i){var n=this.$brackets[e],o=1,r=new d(this,t.row,t.column),s=r.getCurrentToken();if(s=s||r.stepForward()){i=i||new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+");for(var a=t.column-r.getCurrentTokenColumn()-2,l=s.value;;){for(;0<=a;){var c=l.charAt(a);if(c==n){if(0==--o)return{row:r.getCurrentTokenRow(),column:a+r.getCurrentTokenColumn()}}else c==e&&(o+=1);--a}for(;(s=r.stepBackward())&&!i.test(s.type););if(null==s)break;a=(l=s.value).length-1}return null}},this.$findClosingBracket=function(e,t,i){var n=this.$brackets[e],o=1,r=new d(this,t.row,t.column),s=r.getCurrentToken();if(s=s||r.stepForward()){i=i||new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+");for(var a=t.column-r.getCurrentTokenColumn();;){for(var l=s.value,c=l.length;a<c;){var u=l.charAt(a);if(u==n){if(0==--o)return{row:r.getCurrentTokenRow(),column:a+r.getCurrentTokenColumn()}}else u==e&&(o+=1);a+=1}for(;(s=r.stepForward())&&!i.test(s.type););if(null==s)break;a=0}return null}}}}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,i){"use strict";function n(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new u(e)),this.setDocument(e),this.selection=new a(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)}var o=e("./lib/oop"),r=e("./lib/lang"),s=e("./config"),l=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,c=e("./mode/text").Mode,h=e("./range").Range,u=e("./document").Document,p=e("./background_tokenizer").BackgroundTokenizer,f=e("./search_highlight").SearchHighlight;!function(){o.implement(this,l),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),(this.doc=e).on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,e=this.$getRowCacheIndex(this.$docRowCache,e)+1;e<t&&(this.$docRowCache.splice(e,t),this.$screenRowCache.splice(e,t))},this.$getRowCacheIndex=function(e,t){for(var i=0,n=e.length-1;i<=n;){var o=i+n>>1,r=e[o];if(r<t)i=1+o;else{if(!(t<r))return o;n=o-1}}return i-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){e=e.data;this.$resetRowCache(e.start.row)},this.onChange=function(e){var t=e.data,i=(this.$modified=!0,this.$resetRowCache(t.range.start.row),this.$updateInternalDataOnChange(e));this.$fromUndo||!this.$undoManager||t.ignore||(this.$deltasDoc.push(t),i&&0!=i.length&&this.$deltasFold.push({action:"removeFolds",folds:i}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var i=this.bgTokenizer.getTokens(e),n=0;if(null==t)o=i.length-1,n=this.getLine(e).length;else for(var o=0;o<i.length&&!(t<=(n+=i[o].value.length));o++);return(e=i[o])?(e.index=o,e.start=n-e.value.length,e):null},this.setUndoManager=function(e){var t;this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),e&&((t=this).$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),0<t.$deltas.length&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager))},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){(t=void 0===t?"ace_breakpoint":t)?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,i,n){var o=this.$markerId++,e={range:e,type:i||"line",renderer:"function"==typeof i?i:null,clazz:t,inFront:!!n,id:o};return n?(this.$frontMarkers[o]=e,this._signal("changeFrontMarker")):(this.$backMarkers[o]=e,this._signal("changeBackMarker")),o},this.addDynamicMarker=function(e,t){var i;if(e.update)return i=this.$markerId++,e.id=i,e.inFront=!!t,t?(this.$frontMarkers[i]=e,this._signal("changeFrontMarker")):(this.$backMarkers[i]=e,this._signal("changeBackMarker")),e},this.removeMarker=function(e){var t,i=this.$frontMarkers[e]||this.$backMarkers[e];i&&(t=i.inFront?this.$frontMarkers:this.$backMarkers,i&&(delete t[e],this._signal(i.inFront?"changeFrontMarker":"changeBackMarker")))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){var t;this.$searchHighlight||(t=new f(null,"ace_selected-word","text"),this.$searchHighlight=this.addDynamicMarker(t)),this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,i,n){"number"!=typeof t&&(i=t,t=e),i=i||"ace_step";e=new h(e,0,t,1/0);return e.id=this.addMarker(e,i,"fullLine",n),e},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){e=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(e,t){var i,n=this.getLine(e),o=!1,r=(i=(o=(o=0<t?!!n.charAt(t-1).match(this.tokenRe):o)||!!n.charAt(t).match(this.tokenRe))?this.tokenRe:/^\s+$/.test(n.slice(t-1,t+1))?/\s/:this.nonTokenRe,t);if(0<r){for(;0<=--r&&n.charAt(r).match(i););r++}for(var s=t;s<n.length&&n.charAt(s).match(i);)s++;return new h(e,r,e,s)},this.getAWordRange=function(e,t){for(var i=this.getWordRange(e,t),n=this.getLine(i.end.row);n.charAt(i.end.column).match(/[ \t]/);)i.end.column+=1;return i},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var i=e,n=i.path}else n=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[n]&&!i)return this.$onChangeMode(this.$modes[n]),void(t&&t());this.$modeId=n,s.loadModule(["mode",n],function(e){return this.$modeId!==n?t&&t():this.$modes[n]&&!i?this.$onChangeMode(this.$modes[n]):void(e&&e.Mode&&(e=new e.Mode(i),i||((this.$modes[n]=e).$id=n),this.$onChangeMode(e),t&&t()))}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){var i,n,o;t||(this.$modeId=e.$id),this.$mode!==e&&(this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker(),void 0!==(i=e.getTokenizer()).addEventListener&&(n=this.onReloadTokenizer.bind(this),i.addEventListener("update",n)),this.bgTokenizer?this.bgTokenizer.setTokenizer(i):(this.bgTokenizer=new p(i),(o=this).bgTokenizer.addEventListener("update",function(e){o._signal("tokenizerUpdate",e)})),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode")))},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){s.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>t&&(t=e.screenWidth)}),this.lineWidgetWidth=t},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),i=this.$rowLengthCache,n=0,o=0,r=this.$foldData[o],s=r?r.start.row:1/0,a=t.length,l=0;l<a;l++){if(s<l){if(a<=(l=r.end.row+1))break;s=(r=this.$foldData[o++])?r.start.row:1/0}null==i[l]&&(i[l]=this.$getStringScreenWidth(t[l])[0]),i[l]>n&&(n=i[l])}this.screenWidth=n}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var i=null,n=e.length-1;-1!=n;n--){var o=e[n];"doc"==o.group?(this.doc.revertDeltas(o.deltas),i=this.$getUndoSelection(o.deltas,!0,i)):o.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,i&&this.$undoSelect&&!t&&this.selection.setSelectionRange(i),i}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var i=null,n=0;n<e.length;n++){var o=e[n];"doc"==o.group&&(this.doc.applyDeltas(o.deltas),i=this.$getUndoSelection(o.deltas,!1,i))}return this.$fromUndo=!1,i&&this.$undoSelect&&!t&&this.selection.setSelectionRange(i),i}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,i){function n(e){e="insertText"===e.action||"insertLines"===e.action;return t?!e:e}for(var o,r,s,a=e[0],l=(n(a)?o=h.fromPoints(a.range.start,a.range.end):o=h.fromPoints(a.range.start,a.range.start),1);l<e.length;l++)n(a=e[l])?(r=a.range.start,-1==o.compare(r.row,r.column)&&o.setStart(a.range.start),r=a.range.end,1==o.compare(r.row,r.column)&&o.setEnd(a.range.end),!0):(r=a.range.start,-1==o.compare(r.row,r.column)&&(o=h.fromPoints(a.range.start,a.range.start)),!1);return null!=i&&(0===h.comparePoints(i.start,o.start)&&(i.start.column+=o.end.column-o.start.column,i.end.column+=o.end.column-o.start.column),1==(s=i.compareRange(o))?o.setStart(i.start):-1==s&&o.setEnd(i.end)),o},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,i){var n,o,r,s=this.getTextRange(e),a=this.getFoldsInRange(e),t=h.fromPoints(t,t);return i||(this.remove(e),o=e.start.row-e.end.row,(r=o?-e.end.column:e.start.column-e.end.column)&&(t.start.row==e.end.row&&t.start.column>e.end.column&&(t.start.column+=r),t.end.row==e.end.row&&t.end.column>e.end.column&&(t.end.column+=r)),o&&t.start.row>=e.end.row&&(t.start.row+=o,t.end.row+=o)),t.end=this.insert(t.start,s),a.length&&(n=e.start,i=t.start,o=i.row-n.row,r=i.column-n.column,this.addFolds(a.map(function(e){return(e=e.clone()).start.row==n.row&&(e.start.column+=r),e.end.row==n.row&&(e.end.column+=r),e.start.row+=o,e.end.row+=o,e}))),t},this.indentRows=function(e,t,i){i=i.replace(/\t/g,this.getTabString());for(var n=e;n<=t;n++)this.insert({row:n,column:0},i)},this.outdentRows=function(e){for(var t=e.collapseRows(),i=new h(0,0,0,0),n=this.getTabSize(),o=t.start.row;o<=t.end.row;++o){var r=this.getLine(o);i.start.row=o,i.end.row=o;for(var s=0;s<n&&" "==r.charAt(s);++s);s<n&&"\t"==r.charAt(s)?(i.start.column=s,i.end.column=s+1):(i.start.column=0,i.end.column=s),this.remove(i)}},this.$moveLines=function(e,t,i){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),i<0){if((o=this.getRowFoldStart(e+i))<0)return 0;var n=o-e}else if(0<i){if((o=this.getRowFoldEnd(t+i))>this.doc.getLength()-1)return 0;n=o-t}else{e=this.$clipRowToDocument(e);n=(t=this.$clipRowToDocument(t))-e+1}var o=new h(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(o).map(function(e){return(e=e.clone()).start.row+=n,e.end.row+=n,e}),i=0==i?this.doc.getLines(e,t):this.doc.removeLines(e,t);return this.doc.insertLines(e+n,i),o.length&&this.addFolds(o),n},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){var i;return t=Math.max(0,t),t=e<0?e=0:(i=this.doc.getLength())<=e?this.doc.getLine(e=i-1).length:Math.min(this.doc.getLine(e).length,t),{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){e!=this.$useWrapMode&&(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e&&(e=this.getLength(),this.$wrapData=Array(e),this.$updateWrapData(0,e-1)),this._signal("changeWrapMode"))},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var i=this.$wrapLimitRange,t=(i.max<0&&(i={min:t,max:t}),this.$constrainWrapLimit(e,i.min,i.max));return t!=this.$wrapLimit&&1<t&&(this.$wrapLimit=t,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,i){return t&&(e=Math.max(t,e)),e=i?Math.min(i,e):e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,i=e.data.action,n=e.data.range.start.row,o=e.data.range.end.row,r=e.data.range.start,s=e.data.range.end,a=null;if(p=-1!=i.indexOf("Lines")?(o="insertLines"==i?n+e.data.lines.length:n,e.data.lines?e.data.lines.length:o-n):o-n,this.$updating=!0,0!=p)if(-1!=i.indexOf("remove")){this[t?"$wrapData":"$rowLengthCache"].splice(n,p);var l=this.$foldData,a=this.getFoldsInRange(e.data.range);this.removeFolds(a);var c=0;for((h=this.getFoldLine(s.row))&&(h.addRemoveChars(s.row,s.column,r.column-s.column),h.shiftRow(-p),(u=this.getFoldLine(n))&&u!==h&&(u.merge(h),h=u),c=l.indexOf(h)+1);c<l.length;c++)(h=l[c]).start.row>=s.row&&h.shiftRow(-p);o=n}else{var u=Array(p),d=(u.unshift(n,0),t?this.$wrapData:this.$rowLengthCache),l=(d.splice.apply(d,u),this.$foldData),c=0;for((h=this.getFoldLine(n))&&(0==(d=h.range.compareInside(r.row,r.column))?(h=h.split(r.row,r.column))&&(h.shiftRow(p),h.addRemoveChars(o,0,s.column-r.column)):-1==d&&(h.addRemoveChars(n,0,s.column-r.column),h.shiftRow(p)),c=l.indexOf(h)+1);c<l.length;c++)(h=l[c]).start.row>=n&&h.shiftRow(p)}else{var h,p=Math.abs(e.data.range.start.column-e.data.range.end.column);-1!=i.indexOf("remove")&&(a=this.getFoldsInRange(e.data.range),this.removeFolds(a),p=-p),(h=this.getFoldLine(n))&&h.addRemoveChars(n,r.column,p)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(n,o):this.$updateRowLengthCache(n,o),a},this.$updateRowLengthCache=function(e,t,i){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var s,i,a=this.doc.getAllLines(),n=this.getTabSize(),o=this.$wrapData,r=this.$wrapLimit,l=e;for(t=Math.min(t,a.length-1);l<=t;)(i=this.getFoldLine(l,i))?(s=[],i.walk(function(e,t,i,n){var o;if(null!=e){(o=this.$getDisplayTokens(e,s.length))[0]=u;for(var r=1;r<o.length;r++)o[r]=d}else o=this.$getDisplayTokens(a[t].substring(n,i),s.length);s=s.concat(o)}.bind(this),i.end.row,a[i.end.row].length+1),o[i.start.row]=this.$computeWrapSplits(s,r,n),l=i.end.row+1):(s=this.$getDisplayTokens(a[l]),o[l]=this.$computeWrapSplits(s,r,n),l++)};var u=3,d=4;function a(e){return!(e<4352)&&(4352<=e&&e<=4447||4515<=e&&e<=4519||4602<=e&&e<=4607||9001<=e&&e<=9002||11904<=e&&e<=11929||11931<=e&&e<=12019||12032<=e&&e<=12245||12272<=e&&e<=12283||12288<=e&&e<=12350||12353<=e&&e<=12438||12441<=e&&e<=12543||12549<=e&&e<=12589||12593<=e&&e<=12686||12688<=e&&e<=12730||12736<=e&&e<=12771||12784<=e&&e<=12830||12832<=e&&e<=12871||12880<=e&&e<=13054||13056<=e&&e<=19903||19968<=e&&e<=42124||42128<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||55216<=e&&e<=55238||55243<=e&&e<=55291||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65106||65108<=e&&e<=65126||65128<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510)}this.$computeWrapSplits=function(n,e){if(0==n.length)return[];var o=[],t=n.length,r=0,s=0,i=this.$wrapAsCode;function a(e){var t=n.slice(r,e),i=t.length;t.join("").replace(/12/g,function(){--i}).replace(/2/g,function(){--i}),s+=i,o.push(s),r=e}for(;e<t-r;){var l=r+e;if(10<=n[l-1]&&10<=n[l])a(l);else if(n[l]==u||n[l]==d){for(;l!=r-1&&n[l]!=u;l--);if(r<l)a(l);else{for(l=r+e;l<n.length&&n[l]==d;l++);if(l==n.length)break;a(l)}}else{for(var c=Math.max(l-(i?10:e-(e>>2)),r-1);c<l&&n[l]<u;)l--;if(i){for(;c<l&&n[l]<u;)l--;for(;c<l&&9==n[l];)l--}else for(;c<l&&n[l]<10;)l--;c<l?a(++l):(2==n[l=r+e]&&l--,a(l))}}return o},this.$getDisplayTokens=function(e,t){var i,n=[];t=t||0;for(var o=0;o<e.length;o++){var r=e.charCodeAt(o);if(9==r){i=this.getScreenTabSize(n.length+t),n.push(11);for(var s=1;s<i;s++)n.push(12)}else 32==r?n.push(10):39<r&&r<48||57<r&&r<64?n.push(9):4352<=r&&a(r)?n.push(1,2):n.push(1)}return n},this.$getStringScreenWidth=function(e,t,i){if(0==t)return[0,0];var n,o;for(null==t&&(t=1/0),i=i||0,o=0;o<e.length&&(9==(n=e.charCodeAt(o))?i+=this.getScreenTabSize(i):4352<=n&&a(n)?i+=2:i+=1,!(t<i));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(e){var t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getScreenLastRowColumn=function(e){e=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(e,t){e=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(e)},this.getDocumentLastRowColumnPosition=function(e,t){e=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(e,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){if(this.$useWrapMode)return this.$wrapData[e]},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(e<0)return{row:0,column:0};for(var i,n,o,r=0,s=0,a=0,l=0,c=this.$screenRowCache,u=this.$getRowCacheIndex(c,e),d=c.length,h=(n=d&&0<=u?(a=c[u],r=this.$docRowCache[u],e>c[d-1]):!d,this.getLength()-1),p=this.getNextFoldLine(r),f=p?p.start.row:1/0;a<=e&&!(e<a+(l=this.getRowLength(r))||h<=r);)a+=l,f<++r&&(r=p.end.row+1,f=(p=this.getNextFoldLine(r,p))?p.start.row:1/0),n&&(this.$docRowCache.push(r),this.$screenRowCache.push(a));if(p&&p.start.row<=r)i=this.getFoldDisplayLine(p),r=p.start.row;else{if(a+l<=e||h<r)return{row:h,column:this.getLine(h).length};i=this.getLine(r),p=null}return this.$useWrapMode&&(u=this.$wrapData[r])&&(o=u[c=Math.floor(e-a)],0<c&&u.length&&(s=u[c-1]||u[u.length-1],i=i.substring(s))),s+=this.$getStringScreenWidth(i,t)[1],this.$useWrapMode&&o<=s&&(s=o-1),p?p.idxToPosition(s):{row:r,column:s}},this.documentToScreenPosition=function(e,t){var i=void 0===t?this.$clipPositionToDocument(e.row,e.column):this.$clipPositionToDocument(e,t),n=(e=i.row,t=i.column,0),i=null;(a=this.getFoldAt(e,t,1))&&(e=a.start.row,t=a.start.column);for(var o,r,s=0,a=this.$docRowCache,l=this.$getRowCacheIndex(a,e),c=a.length,u=(r=c&&0<=l?(s=a[l],n=this.$screenRowCache[l],e>a[c-1]):!c,this.getNextFoldLine(s)),d=u?u.start.row:1/0;s<e;){if(d<=s){if(e<(o=u.end.row+1))break;d=(u=this.getNextFoldLine(o,u))?u.start.row:1/0}else o=s+1;n+=this.getRowLength(s),s=o,r&&(this.$docRowCache.push(s),this.$screenRowCache.push(n))}var h="",i=u&&d<=s?(h=this.getFoldDisplayLine(u,e,t),u.start.row):(h=this.getLine(e).substring(0,t),e);if(this.$useWrapMode){var p=this.$wrapData[i];if(p){for(var f=0;h.length>=p[f];)n++,f++;h=h.substring(p[f-1]||0,h.length)}}return{row:n,column:this.$getStringScreenWidth(h)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,n=0,o=0,r=(t=this.$foldData[o++])?t.start.row:1/0;n<i;){var s=this.$wrapData[n];e+=s?s.length+1:1,r<++n&&(n=t.end.row+1,r=(t=this.$foldData[o++])?t.start.row:1/0)}else for(var e=this.getLength(),a=this.$foldData,o=0;o<a.length;o++)e-=(t=a[o]).end.row-t.start.row;return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}.call(n.prototype),e("./edit_session/folding").Folding.call(n.prototype),e("./edit_session/bracket_match").BracketMatch.call(n.prototype),s.defineOptions(n.prototype,"session",{wrap:{set:function(e){var t;e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e&&(e?(this.setWrapLimitRange(t="number"==typeof e?e:null,t),this.setUseWrapMode(!0)):this.setUseWrapMode(!1),this.$wrap=e)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=n}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,i){"use strict";function n(){this.$options={}}var y=e("./lib/lang"),o=e("./lib/oop"),b=e("./range").Range;!function(){this.set=function(e){return o.mixin(this.$options,e),this},this.getOptions=function(){return y.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var n=this.$options,e=this.$matchIterator(e,n);if(!e)return!1;var o=null;return e.forEach(function(e,t,i){if(e.start)o=e;else{i=e.offset+(i||0);if(o=new b(t,i,t,i+e.length),!e.length&&n.start&&n.start.start&&0!=n.skipCurrent&&o.isEqual(n.start))return o=null,!1}return!0}),o},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var i=t.range,n=i?e.getLines(i.start.row,i.end.row):e.doc.getAllLines(),o=[],r=t.re;if(t.$isMultiLine){var s,a=r.length,l=n.length-a;e:for(var c=r.offset||0;c<=l;c++){for(var u=0;u<a;u++)if(-1==n[c+u].search(r[u]))continue e;var d=n[c],h=n[c+a-1],d=d.length-d.match(r[0])[0].length,h=h.match(r[a-1])[0].length;s&&s.end.row===c&&s.end.column>d||(o.push(s=new b(c,d,c+a-1,h)),2<a&&(c=c+a-2))}}else for(var p=0;p<n.length;p++)for(var f=y.getMatchOffsets(n[p],r),u=0;u<f.length;u++){var g=f[u];o.push(new b(p,g.offset,p,g.offset+g.length))}if(i){for(var m=i.start.column,v=i.start.column,p=0,u=o.length-1;p<u&&o[p].start.column<m&&o[p].start.row==i.start.row;)p++;for(;p<u&&o[u].end.column>v&&o[u].end.row==i.end.row;)u--;for(o=o.slice(p,u+1),p=0,u=o.length;p<u;p++)o[p].start.row+=i.start.row,o[p].end.row+=i.start.row}return o},this.replace=function(e,t){var i=this.$options,n=this.$assembleRegExp(i);if(i.$isMultiLine)return t;if(n){var o=n.exec(e);if(!o||o[0].length!=e.length)return null;if(t=e.replace(n,t),i.preserveCase){t=t.split("");for(var r=Math.min(e.length,e.length);r--;){var s=e[r];s&&s.toLowerCase()!=s?t[r]=t[r].toUpperCase():t[r]=t[r].toLowerCase()}t=t.join("")}return t}},this.$matchIterator=function(s,e){var a,l,t,c=this.$assembleRegExp(e);if(!c)return!1;t=e.$isMultiLine?(l=c.length,function(e,t,i){var n=e.search(c[0]);if(-1!=n){for(var o=1;o<l;o++)if(-1==(e=s.getLine(t+o)).search(c[o]))return;var r=e.match(c[l-1])[0].length,n=new b(t,n,t+l-1,r);return 1==c.offset?(n.start.row--,n.start.column=Number.MAX_VALUE):i&&(n.start.column+=i),!!a(n)||void 0}}):e.backwards?function(e,t,i){for(var n=y.getMatchOffsets(e,c),o=n.length-1;0<=o;o--)if(a(n[o],t,i))return!0}:function(e,t,i){for(var n=y.getMatchOffsets(e,c),o=0;o<n.length;o++)if(a(n[o],t,i))return!0};var i=this.$lineIterator(s,e);return{forEach:function(e){a=e,i.forEach(t)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var i=e.needle;if(!e.needle)return e.re=!1;e.regExp||(i=y.escapeRegExp(i)),e.wholeWord&&(i="\\b"+i+"\\b");var n=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(i),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(i,n);try{var o=new RegExp(i,n)}catch(e){o=!1}return e.re=o},this.$assembleMultilineRegExp=function(e,t){for(var i=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),n=[],o=0;o<i.length;o++)try{n.push(new RegExp(i[o],t))}catch(e){return!1}return""==i[0]?(n.shift(),n.offset=1):n.offset=0,n},this.$lineIterator=function(n,o){var e=1==o.backwards,t=0!=o.skipCurrent,i=o.range,r=o.start,s=((r=r||(i?i[e?"end":"start"]:n.selection.getRange())).start&&(r=r[t!=e?"end":"start"]),i?i.start.row:0),a=i?i.end.row:n.getLength()-1;return{forEach:e?function(e){var t=r.row,i=n.getLine(t).substring(0,r.column);if(!e(i,t)){for(t--;s<=t;t--)if(e(n.getLine(t),t))return;if(0!=o.wrap)for(t=a,s=r.row;s<=t;t--)if(e(n.getLine(t),t))return}}:function(e){var t=r.row,i=n.getLine(t).substr(r.column);if(!e(i,t,r.column)){for(t+=1;t<=a;t++)if(e(n.getLine(t),t))return;if(0!=o.wrap)for(t=s,a=r.row;t<=a;t++)if(e(n.getLine(t),t))return}}}}}.call(n.prototype),t.Search=n}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,i){"use strict";var a=e("../lib/keys"),n=e("../lib/useragent"),r=a.KEY_MODS;function o(e,t){this.platform=t||(n.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function s(e,t){o.call(this,e,t),this.$singleCommand=!1}s.prototype=o.prototype,function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),(this.commands[e.name]=e).bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var i,n=e&&("string"==typeof e?e:e.name),o=(e=this.commands[n],t||delete this.commands[n],this.commandKeyBinding);for(i in o){var r,s=o[i];s==e?delete o[i]:Array.isArray(s)&&-1!=(r=s.indexOf(e))&&(s.splice(r,1),1==s.length&&(o[i]=s[0]))}},this.bindKey=function(e,n,o){if(e="object"==typeof e?e[this.platform]:e)return"function"==typeof n?this.addCommand({exec:n,bindKey:e,name:n.name||e}):void e.split("|").forEach(function(e){var t="",i=(-1!=e.indexOf(" ")&&(e=(i=e.split(/\s+/)).pop(),i.forEach(function(e){e=this.parseKeys(e),e=r[e.hashId]+e.key;t+=(t?" ":"")+e,this._addCommandToBinding(t,"chainKeys")},this),t+=" "),this.parseKeys(e)),e=r[i.hashId]+i.key;this._addCommandToBinding(t+e,n,o)},this)},this._addCommandToBinding=function(e,t,i){var n,o=this.commandKeyBinding;t?!o[e]||this.$singleCommand?o[e]=t:(Array.isArray(o[e])?-1!=(n=o[e].indexOf(t))&&o[e].splice(n,1):o[e]=[o[e]],i||t.isDefault?o[e].unshift(t):o[e].push(t)):delete o[e]},this.addCommands=function(i){i&&Object.keys(i).forEach(function(e){var t=i[e];if(t){if("string"==typeof t)return this.bindKey(t,e);"object"==typeof(t="function"==typeof t?{exec:t}:t)&&(t.name||(t.name=e),this.addCommand(t))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),i=t.pop(),n=a[i];if(a.FUNCTION_KEYS[n])i=a.FUNCTION_KEYS[n].toLowerCase();else{if(!t.length)return{key:i,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:i.toUpperCase(),hashId:-1}}for(var o=0,r=t.length;r--;){var s=a.KEY_MODS[t[r]];if(null==s)return"undefined"!=typeof console&&console.error("invalid modifier "+t[r]+" in "+e),!1;o|=s}return{key:i,hashId:o}},this.findKeyCommand=function(e,t){e=r[e]+t;return this.commandKeyBinding[e]},this.handleKeyboard=function(e,t,i,n){t=r[t]+i,i=this.commandKeyBinding[t];return e.$keyChain&&(e.$keyChain+=" "+t,i=this.commandKeyBinding[e.$keyChain]||i),!i||"chainKeys"!=i&&"chainKeys"!=i[i.length-1]?(e.$keyChain&&0<n&&(e.$keyChain=""),{command:i}):(e.$keyChain=e.$keyChain||t,{command:"null"})}}.call(o.prototype),t.HashHandler=o,t.MultiHashHandler=s}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e,t){r.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})}var o=e("../lib/oop"),r=e("../keyboard/hash_handler").MultiHashHandler,s=e("../lib/event_emitter").EventEmitter;o.inherits(n,r),function(){o.implement(this,s),this.exec=function(e,t,i){if(Array.isArray(e)){for(var n=e.length;n--;)if(this.exec(e[n],t,i))return!0;return!1}if(!(e="string"==typeof e?this.commands[e]:e))return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var o={editor:t,command:e,args:i};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),!1!==o.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach(function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e=e[1]?e:e[0]})}}.call(n.prototype),t.CommandManager=n}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,i){"use strict";var l=e("../lib/lang"),n=e("../config"),c=e("../range").Range;function o(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",bindKey:o("Ctrl-,","Command-,"),exec:function(t){n.loadModule("ace/ext/settings_menu",function(e){e.init(t),t.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:o("Alt-E","Ctrl-E"),exec:function(t){n.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:o("Alt-Shift-E","Ctrl-Shift-E"),exec:function(t){n.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:o("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:o("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:o("Ctrl-F","Command-F"),exec:function(t){n.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:o("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:o("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:o("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:o("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:o("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:o("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:o("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:o("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:o("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:o("null","null"),exec:function(){},passEvent:!0,readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(t){n.loadModule("ace/ext/searchbox",function(e){e.Search(t,!0)})}},{name:"undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:o("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:o("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(l.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:o("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:o(null,null),exec:function(e){for(var t=e.selection.isBackwards(),i=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),n=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),t=e.session.doc.getLine(i.row).length,o=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,r=e.session.doc.getLine(i.row),s=i.row+1;s<=n.row+1;s++){var a=l.stringTrimLeft(l.stringTrimRight(e.session.doc.getLine(s)));r+=a=0!==a.length?" "+a:a}n.row+1<e.session.doc.getLength()-1&&(r+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new c(i.row,0,n.row+2,0),r),0<o?(e.selection.moveCursorTo(i.row,i.column),e.selection.selectTo(i.row,i.column+o)):(t=e.session.doc.getLine(i.row).length>t?t+1:t,e.selection.moveCursorTo(i.row,t))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,i=e.session.doc.getLine(t).length,n=e.selection.rangeList.ranges,o=[];n.length<1&&(n=[e.selection.getRange()]);for(var r=0;r<n.length;r++)r!=n.length-1||n[r].end.row===t&&n[r].end.column===i||o.push(new c(n[r].end.row,n[r].end.column,t,i)),0===r?0===n[r].start.row&&0===n[r].start.column||o.push(new c(0,0,n[r].start.row,n[r].start.column)):o.push(new c(n[r-1].end.row,n[r-1].end.column,n[r].start.row,n[r].start.column));e.exitMultiSelectMode(),e.clearSelection();for(r=0;r<o.length;r++)e.selection.addRange(o[r],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(e,t,i){"use strict";e("./lib/fixoldbrowsers");function n(e,t){var i=e.getContainerElement();this.container=i,this.renderer=e,this.commands=new m(s.isMac?"mac":"win",v),this.textInput=new l(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new d(this),this.$mouseHandler=new c(this),new u(this),this.$blockScrolling=0,this.$search=(new p).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||new h("")),y.resetOptions(this),y._signal("editor",this)}var o=e("./lib/oop"),r=e("./lib/dom"),a=e("./lib/lang"),s=e("./lib/useragent"),l=e("./keyboard/textinput").TextInput,c=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,d=e("./keyboard/keybinding").KeyBinding,h=e("./edit_session").EditSession,p=e("./search").Search,g=e("./range").Range,f=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,v=e("./commands/default_commands").commands,y=e("./config"),b=e("./token_iterator").TokenIterator;!function(){o.implement(this,f),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=a.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&this.$blockScrolling++},this.endOperation=function(e){if(this.curOp){if(e&&!1===e.returnValue)return this.curOp=null;this._signal("beforeEndOperation");e=this.curOp.command;if(e.name&&this.$blockScrolling&&this.$blockScrolling--,e&&e.scrollIntoView){switch(e.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var t=this.selection.getRange(),i=this.renderer.layerConfig;(t.start.row>=i.lastRow||t.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==e.scrollIntoView&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){var t,i,n,o;this.$mergeUndoDeltas&&(t=this.prevOp,i=this.$mergeableCommands,n=t.command&&e.command.name==t.command.name,"insertstring"==e.command.name?(o=e.args,void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),n=n&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(t.args)),this.mergeNextCommand=!0):n=n&&-1!==i.indexOf(e.command.name),(n="always"!=this.$mergeUndoDeltas&&2e3<Date.now()-this.sequenceStartTime?!1:n)?this.session.mergeUndoDeltas=!0:-1!==i.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now()))},this.setKeyboardHandler=function(t,i){var n;t&&"string"==typeof t?(this.$keybindingId=t,n=this,y.loadModule(["keybinding",t],function(e){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(e&&e.handler),i&&i()})):(this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),i&&i())},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){var t,i;this.session!=e&&((t=this.session)&&(this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange),(i=this.session.getSelection()).removeEventListener("changeCursor",this.$onCursorChange),i.removeEventListener("changeSelection",this.$onSelectionChange)),(this.session=e)?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),--this.$blockScrolling,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}))},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){var n;this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),this.$highlightPending||((n=this).$highlightPending=!0,setTimeout(function(){n.$highlightPending=!1;var e,t,i=n.session;i&&i.bgTokenizer&&((e=i.findMatchingBracket(n.getCursorPosition()))?t=new g(e.row,e.column,e.row,e.column+1):i.$mode.getMatching&&(t=i.$mode.getMatching(n.session)),t&&(i.$bracketHighlight=i.addMarker(t,"ace_bracket","text")))},50))},this.$highlightTags=function(){var l;this.$highlightTagPending||((l=this).$highlightTagPending=!0,setTimeout(function(){l.$highlightTagPending=!1;var e=l.session;if(e&&e.bgTokenizer){var t=l.getCursorPosition(),i=new b(l.session,t.row,t.column),n=i.getCurrentToken();if(!n||!/\b(?:tag-open|tag-name)/.test(n.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var o=(n=-1!=n.type.indexOf("tag-open")?i.stepForward():n).value,r=0,s=i.stepBackward();if("<"==s.value)for(;s=n,(n=i.stepForward())&&n.value===o&&-1!==n.type.indexOf("tag-name")&&("<"===s.value?r++:"</"===s.value&&r--),n&&0<=r;);else{for(;n=s,s=i.stepBackward(),n&&n.value===o&&-1!==n.type.indexOf("tag-name")&&("<"===s.value?r++:"</"===s.value&&r--),s&&r<=0;);i.stepForward()}if(!n)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var t=i.getCurrentTokenRow(),a=i.getCurrentTokenColumn(),t=new g(t,a,t,a+n.value.length);e.$tagHighlight&&0!==t.compareRange(e.$backMarkers[e.$tagHighlight].range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),t&&!e.$tagHighlight&&(e.$tagHighlight=e.addMarker(t,"ace_bracket","text"))}},50))},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=e.data,i=t.range,t=i.start.row==i.end.row&&"insertLines"!=t.action&&"removeLines"!=t.action?i.end.row:1/0;this.renderer.updateLines(i.start.row,t,this.session.$useWrapMode),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){e=e.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(y.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t,i=this.getSession();this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||1<this.renderer.$minLines||(e=!1)),i.$highlightLineMarker&&!e?(i.removeMarker(i.$highlightLineMarker.id),i.$highlightLineMarker=null):!i.$highlightLineMarker&&e?((t=new g(e.row,e.column,e.row,1/0)).id=i.addMarker(t,"ace_active-line","screenLine"),i.$highlightLineMarker=t):e&&(i.$highlightLineMarker.start.row=e.row,i.$highlightLineMarker.end.row=e.row,i.$highlightLineMarker.start.column=e.column,i._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t,i,n=this.session,n=(n.$selectionMarker&&n.removeMarker(n.$selectionMarker),n.$selectionMarker=null,this.selection.isEmpty()?this.$updateHighlightActiveLine():(t=this.selection.getRange(),i=this.getSelectionStyle(),n.$selectionMarker=n.addMarker(t,"ace_selection",i)),this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp());this.session.highlight(n),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var i=t.start.column-1,n=t.end.column+1,e=e.getLine(t.start.row),o=e.length,r=e.substring(Math.max(i,0),Math.min(n,o));if(!(0<=i&&/^[\w\d]/.test(r)||n<=o&&/[\w\d]$/.test(r))){r=e.substring(t.start.column,t.end.column);if(/^[\w\d]+$/.test(r))return this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:r})}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){if(!this.$readOnly){var t={text:e};if(this._signal("paste",t),e=t.text,!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(e);else{var i=e.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges;if(i.length>n.length||i.length<2||!i[1])return this.commands.exec("insertstring",this,e);for(var o=n.length;o--;){var r=n[o];r.isEmpty()||this.session.remove(r),this.session.insert(r.start,i[o])}}this.renderer.scrollCursorIntoView()}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var i,n=this.session,o=n.getMode(),r=this.getCursorPosition(),s=(!this.getBehavioursEnabled()||t||(i=o.transformAction(n.getState(r.row),"insertion",this,n,e))&&(e!==i.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=i.text),"\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()?this.session.getOverwrite()&&((s=new g.fromPoints(r,r)).end.column+=e.length,this.session.remove(s)):(s=this.getSelectionRange(),r=this.session.remove(s),this.clearSelection()),"\n"!=e&&"\r\n"!=e||(a=n.getLine(r.row),r.column>a.search(/\S|$/)&&(t=a.substr(r.column).search(/\S|$/),n.doc.removeInLine(r.row,r.column,r.column+t))),this.clearSelection(),r.column),t=n.getState(r.row),a=n.getLine(r.row),l=o.checkOutdent(t,a,e);n.insert(r,e);i&&i.selection&&(2==i.selection.length?this.selection.setSelectionRange(new g(r.row,s+i.selection[0],r.row,s+i.selection[1])):this.selection.setSelectionRange(new g(r.row+i.selection[0],i.selection[1],r.row+i.selection[2],i.selection[3]))),n.getDocument().isNewLine(e)&&(s=o.getNextLineIndent(t,a.slice(0,r.column),n.getTabString()),n.insert({row:r.row+1,column:0},s)),l&&o.autoOutdent(t,n,r.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,i){this.keyBinding.onCommandKey(e,t,i)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t,i,n,e=this.getSelectionRange();this.getBehavioursEnabled()&&(i=(t=this.session).getState(e.start.row),i=t.getMode().transformAction(i,"deletion",this,t,e),0===e.end.column&&"\n"==(n=t.getTextRange(e))[n.length-1]&&(n=t.getLine(e.end.row),/^\s+$/.test(n)&&(e.end.column=n.length)),i&&(e=i)),this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){var e,t,i,n;!this.selection.isEmpty()||0!==(t=(e=this.getCursorPosition()).column)&&(n=t<(n=this.session.getLine(e.row)).length?(i=n.charAt(t)+n.charAt(t-1),new g(e.row,t-1,e.row,t+1)):(i=n.charAt(t-1)+n.charAt(t-2),new g(e.row,t-2,e.row,t)),this.session.replace(n,i))},this.toLowerCase=function(){var e=this.getSelectionRange(),t=(this.selection.isEmpty()&&this.selection.selectWord(),this.getSelectionRange()),i=this.session.getTextRange(t);this.session.replace(t,i.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange(),t=(this.selection.isEmpty()&&this.selection.selectWord(),this.getSelectionRange()),i=this.session.getTextRange(t);this.session.replace(t,i.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row)return o=this.$getSelectedRows(),void e.indentRows(o.first,o.last,"\t");if(t.start.column<t.end.column){var i=e.getTextRange(t);if(!/^\s+$/.test(i))return o=this.$getSelectedRows(),void e.indentRows(o.first,o.last,"\t")}var n=e.getLine(t.start.row),i=t.start,o=e.getTabSize(),e=e.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var r=o-e%o,s=a.stringRepeat(" ",r);else{for(r=e%o;" "==n[t.start.column]&&r;)t.start.column--,r--;this.selection.setSelectionRange(t),s="\t"}return this.insert(s)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,i=[],n=e.first;n<=e.last;n++)i.push(t.getLine(n));i.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var o=new g(0,0,0,0),n=e.first;n<=e.last;n++){var r=t.getLine(n);o.start.row=n,o.end.row=n,o.end.column=r.length,t.replace(o,i[n-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),i=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,i,e)},this.getNumberAt=function(e,t){for(var i=/[\-]?[0-9]+(?:\.[0-9]+)?/g,n=(i.lastIndex=0,this.session.getLine(e));i.lastIndex<t;){var o=i.exec(n);if(o.index<=t&&o.index+o[0].length>=t)return{value:o[0],start:o.index,end:o.index+o[0].length}}return null},this.modifyNumber=function(e){var t,i,n,o=this.selection.getCursor().row,r=this.selection.getCursor().column,s=new g(o,r-1,o,r),s=this.session.getTextRange(s);!isNaN(parseFloat(s))&&isFinite(s)&&(s=this.getNumberAt(o,r))&&(n=0<=s.value.indexOf(".")?s.start+s.value.indexOf(".")+1:s.end,t=s.start+s.value.length-n,i=parseFloat(s.value),i*=Math.pow(10,t),n!==s.end&&r<n?e*=Math.pow(10,s.end-r-1):e*=Math.pow(10,s.end-r),n=(i=(i+=e)/Math.pow(10,t)).toFixed(t),e=new g(o,s.start,o,s.end),this.session.replace(e,n),this.moveCursorTo(o,Math.max(s.start+1,r+n.length-s.value.length)))},this.removeLines=function(){var e=this.$getSelectedRows(),e=0===e.first||e.last+1<this.session.getLength()?new g(e.first,0,e.last+1,0):new g(e.first-1,this.session.getLine(e.first-1).length,e.last,this.session.getLine(e.last).length);this.session.remove(e),this.clearSelection()},this.duplicateSelection=function(){var e,t=this.selection,i=this.session,n=t.getRange(),o=t.isBackwards();n.isEmpty()?(e=n.start.row,i.duplicateLines(e,e)):(e=o?n.start:n.end,i=i.insert(e,i.getTextRange(n),!1),n.start=e,n.end=i,t.setSelectionRange(n,o))},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,i){return this.session.moveText(e,t,i)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var n=i.toOrientedRange(),o=this.$getSelectedRows(n),r=this.session.$moveLines(o.first,o.last,t?0:e);n.moveBy(r=t&&-1==e?0:r,0),i.fromOrientedRange(n)}else{for(var s=i.rangeList.ranges,a=(i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0,0),l=0,c=s.length,u=0;u<c;u++){for(var d=u,h=(s[u].moveBy(a,0),(o=this.$getSelectedRows(s[u])).first),p=o.last;++u<c;){l&&s[u].moveBy(l,0);var f=this.$getSelectedRows(s[u]);if(t&&f.first!=p)break;if(!t&&f.first>p+1)break;p=f.last}for(u--,a=this.session.$moveLines(h,p,t?0:e),t&&-1==e&&(d=u+1);d<=u;)s[d].moveBy(a,0),d++;l+=a=t?a:0}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var i=this.renderer,n=this.renderer.layerConfig,o=e*Math.floor(n.height/n.lineHeight),e=(this.$blockScrolling++,!0===t?this.selection.$moveSelection(function(){this.moveCursorBy(o,0)}):!1===t&&(this.selection.moveCursorBy(o,0),this.selection.clearSelection()),this.$blockScrolling--,i.scrollTop);i.scrollBy(0,o*n.lineHeight),null!=t&&i.scrollCursorIntoView(null,.5),i.animateScrolling(e)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,i,n){this.renderer.scrollToLine(e,t,i,n)},this.centerSelection=function(){var e=this.getSelectionRange(),e={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),--this.$blockScrolling},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var i=this.getCursorPosition(),n=new b(this.session,i.row,i.column),o=n.getCurrentToken(),r=o||n.stepForward();if(r){var s,a,l,c=!1,u={},d=i.column-r.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(r.value.match(/[{}()\[\]]/g)){for(;d<r.value.length&&!c;d++)if(h[r.value[d]])switch(a=h[r.value[d]]+"."+r.type.replace("rparen","lparen"),isNaN(u[a])&&(u[a]=0),r.value[d]){case"(":case"[":case"{":u[a]++;break;case")":case"]":case"}":u[a]--,-1===u[a]&&(s="bracket",c=!0)}}else r&&-1!==r.type.indexOf("tag-name")&&(isNaN(u[r.value])&&(u[r.value]=0),"<"===o.value?u[r.value]++:"</"===o.value&&u[r.value]--,-1===u[r.value]&&(s="tag",c=!0))}while(c||(o=r,r=n.stepForward(),d=0),r&&!c);if(s){if("bracket"===s)(p=this.session.getBracketRange(i))||(l=(p=new g(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+d-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+d-1)).start,(t||l.row===i.row&&Math.abs(l.column-i.column)<2)&&(p=this.session.getBracketRange(l)));else if("tag"===s){if(!r||-1===r.type.indexOf("tag-name"))return;var p,f=r.value;if(0===(p=new g(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2)).compare(i.row,i.column))for(c=!1;r=o,(o=n.stepBackward())&&(-1!==o.type.indexOf("tag-close")&&p.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1),r.value===f&&-1!==r.type.indexOf("tag-name")&&("<"===o.value?u[f]++:"</"===o.value&&u[f]--,0===u[f]&&(c=!0))),o&&!c;);r&&r.type.indexOf("tag-name")&&(l=p.start).row==i.row&&Math.abs(l.column-i.column)<2&&(l=p.end)}(l=p&&p.cursor||l)&&(e?p&&t?this.selection.setRange(p):p&&p.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(l.row,l.column):this.selection.moveTo(l.row,l.column))}}},this.gotoLine=function(e,t,i){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),--this.$blockScrolling,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,i)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){var t;if(this.selection.isMultiLine()&&!this.selection.isBackwards())return t=this.selection.anchor.getPosition(),this.moveCursorToPosition(t);this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){var t;if(this.selection.isMultiLine()&&this.selection.isBackwards())return t=this.selection.anchor.getPosition(),this.moveCursorToPosition(t);this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var t=this.$search.find(this.session),i=0;return t&&(this.$tryReplace(t,e)&&(i=1),null!==t&&(this.selection.setSelectionRange(t),this.renderer.scrollSelectionIntoView(t.start,t.end))),i},this.replaceAll=function(e,t){t&&this.$search.set(t);var i=this.$search.findAll(this.session),n=0;if(!i.length)return n;this.$blockScrolling+=1;t=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=i.length-1;0<=o;--o)this.$tryReplace(i[o],e)&&n++;return this.selection.setSelectionRange(t),--this.$blockScrolling,n},this.$tryReplace=function(e,t){var i=this.session.getTextRange(e);return null!==(t=this.$search.replace(i,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,i){t=t||{},"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&o.mixin(t,e);var n=this.selection.getRange(),e=(null==t.needle&&((e=this.session.getTextRange(n)||this.$search.$options.needle)||(n=this.session.getWordRange(n.start.row,n.start.column),e=this.session.getTextRange(n)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:n}),this.$search.find(this.session));return t.preventScroll?e:e?(this.revealRange(e,i),e):(t.backwards?n.start=n.end:n.end=n.start,void this.selection.setRange(n))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),--this.$blockScrolling;var i=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(i)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){var n,o,r,s,t,i,a;e&&(r=!1,(o=this).$scrollAnchor||(this.$scrollAnchor=document.createElement("div")),(s=this.$scrollAnchor).style.cssText="position:absolute",this.container.insertBefore(s,this.container.firstChild),t=this.on("changeSelection",function(){r=!0}),i=this.renderer.on("beforeRender",function(){r&&(n=o.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){var e,t,i;r&&n&&(o.isFocused()||o.searchBox&&o.searchBox.isFocused())&&(e=(t=o.renderer).$cursorLayer.$pixelPos,t=t.layerConfig,i=e.top-t.offset,null!=(r=0<=e.top&&i+n.top<0||!(e.top<t.height&&e.top+n.top+t.lineHeight>window.innerHeight)&&null)&&(s.style.top=i+"px",s.style.left=e.left+"px",s.style.height=t.lineHeight+"px",s.scrollIntoView(r)),r=n=null)}),this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",t),this.renderer.removeEventListener("afterRender",a),this.renderer.removeEventListener("beforeRender",i))})},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,r.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))}}.call(n.prototype),y.defineOptions(n.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"}),t.Editor=n}),ace.define("ace/undomanager",["require","exports","module"],function(e,t,i){"use strict";function n(){this.reset()}!function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(this.dirtyCounter--,t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),i=null;return t&&(i=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),i},this.redo=function(e){var t=this.$redoStack.pop(),i=null;return t&&(i=this.$doc.redoChanges(t,e),this.$undoStack.push(t),this.dirtyCounter++),i},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return 0<this.$undoStack.length},this.hasRedo=function(){return 0<this.$redoStack.length},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter}}.call(n.prototype),t.UndoManager=n}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e){this.element=b.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]}var b=e("../lib/dom"),o=e("../lib/oop"),r=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter;!function(){o.implement(this,s),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),(this.session=e)&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var i=e[t],n=i.row,o=(o=this.$annotations[n])||(this.$annotations[n]={text:[]}),n=(n=i.text)?r.escapeHTML(n):i.html||"",n=(-1===o.text.indexOf(n)&&o.text.push(n),i.type);"error"==n?o.className=" ace_error":"warning"==n&&" ace_error"!=o.className?o.className=" ace_warning":"info"!=n||o.className||(o.className=" ace_info")}},this.$updateAnnotations=function(e){var t,i;this.$annotations.length&&(t=(i=(e=e.data).range).start.row,0!=(i=i.end.row-t)&&("removeText"==e.action||"removeLines"==e.action?this.$annotations.splice(t,1+i,null):((e=new Array(1+i)).unshift(t,1),this.$annotations.splice.apply(this.$annotations,e))))},this.update=function(e){for(var t=this.session,i=e.firstRow,n=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),o=t.getNextFoldLine(i),r=o?o.start.row:1/0,s=this.$showFoldWidgets&&t.foldWidgets,a=t.$breakpoints,l=t.$decorations,c=t.$firstLineNumber,u=0,d=t.gutterRenderer||this.$renderer,h=null,p=-1,f=i;;){if(r<f&&(f=o.end.row+1,r=(o=t.getNextFoldLine(f,o))?o.start.row:1/0),n<f){for(;this.$cells.length>p+1;)h=this.$cells.pop(),this.element.removeChild(h.element);break}(h=this.$cells[++p])||((h={element:null,textNode:null,foldWidget:null}).element=b.createElement("div"),h.textNode=document.createTextNode(""),h.element.appendChild(h.textNode),this.element.appendChild(h.element),this.$cells[p]=h);var g,m="ace_gutter-cell ",v=(a[f]&&(m+=a[f]),l[f]&&(m+=l[f]),this.$annotations[f]&&(m+=this.$annotations[f].className),h.element.className!=m&&(h.element.className=m),t.getRowLength(f)*e.lineHeight+"px"),m=(v!=h.element.style.height&&(h.element.style.height=v),!s||null==(g=s[f])&&(g=s[f]=t.getFoldWidget(f)),g?(h.foldWidget||(h.foldWidget=b.createElement("span"),h.element.appendChild(h.foldWidget)),m="ace_fold-widget ace_"+g,"start"==g&&f==r&&f<o.end.row?m+=" ace_closed":m+=" ace_open",h.foldWidget.className!=m&&(h.foldWidget.className=m),v=e.lineHeight+"px",h.foldWidget.style.height!=v&&(h.foldWidget.style.height=v)):h.foldWidget&&(h.element.removeChild(h.foldWidget),h.foldWidget=null),u=d?d.getText(t,f):f+c);m!=h.textNode.data&&(h.textNode.data=m),f++}this.element.style.height=e.minHeight+"px",(this.$fixedWidth||t.$useWrapMode)&&(u=t.getLength()+c);var i=d?d.getWidth(t,u,e):u.toString().length*e.characterWidth,y=this.$padding||this.$computePadding();(i+=y.left+y.right)===this.gutterWidth||isNaN(i)||(this.gutterWidth=i,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",i))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?b.addCssClass(this.element,"ace_folding-enabled"):b.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=b.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),i=this.element.getBoundingClientRect();return e.x<t.left+i.left?"markers":this.$showFoldWidgets&&e.x>i.right-t.right?"foldWidgets":void 0}}.call(n.prototype),t.Gutter=n}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,i){"use strict";function n(e){this.element=o.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)}var a=e("../range").Range,o=e("../lib/dom");!function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){if(e=e||this.config){this.config=e;var t,i=[];for(t in this.markers){var n,o,r,s=this.markers[t];s.range?(r=s.range.clipRows(e.firstRow,e.lastRow)).isEmpty()||(r=r.toScreenRange(this.session),s.renderer?(n=this.$getTop(r.start.row,e),o=this.$padding+r.start.column*e.characterWidth,s.renderer(i,r,o,n,e)):"fullLine"==s.type?this.drawFullLineMarker(i,r,s.clazz,e):"screenLine"==s.type?this.drawScreenLineMarker(i,r,s.clazz,e):r.isMultiLine()?"text"==s.type?this.drawTextMarker(i,r,s.clazz,e):this.drawMultiLineMarker(i,r,s.clazz,e):this.drawSingleLineMarker(i,r,s.clazz+" ace_start",e)):s.update(i,this,this.session,e)}this.element.innerHTML=i.join("")}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,i,n,o){var r=t.start.row,s=new a(r,t.start.column,r,this.session.getScreenLastRowColumn(r));for(this.drawSingleLineMarker(e,s,i+" ace_start",n,1,o),r=t.end.row,s=new a(r,0,r,t.end.column),this.drawSingleLineMarker(e,s,i,n,0,o),r=t.start.row+1;r<t.end.row;r++)s.start.row=r,s.end.row=r,s.end.column=this.session.getScreenLastRowColumn(r),this.drawSingleLineMarker(e,s,i,n,1,o)},this.drawMultiLineMarker=function(e,t,i,n,o){var r=this.$padding,s=n.lineHeight,a=this.$getTop(t.start.row,n),l=r+t.start.column*n.characterWidth,l=(e.push("<div class='",i," ace_start' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",l,"px;",o=o||"","'></div>"),a=this.$getTop(t.end.row,n),t.end.column*n.characterWidth);e.push("<div class='",i,"' style='","height:",s,"px;","width:",l,"px;","top:",a,"px;","left:",r,"px;",o,"'></div>"),(s=(t.end.row-t.start.row-1)*n.lineHeight)<0||(a=this.$getTop(t.start.row+1,n),e.push("<div class='",i,"' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",r,"px;",o,"'></div>"))},this.drawSingleLineMarker=function(e,t,i,n,o,r){var s=n.lineHeight,o=(t.end.column+(o||0)-t.start.column)*n.characterWidth,a=this.$getTop(t.start.row,n),t=this.$padding+t.start.column*n.characterWidth;e.push("<div class='",i,"' style='","height:",s,"px;","width:",o,"px;","top:",a,"px;","left:",t,"px;",r||"","'></div>")},this.drawFullLineMarker=function(e,t,i,n,o){var r=this.$getTop(t.start.row,n),s=n.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,n)-r),e.push("<div class='",i,"' style='","height:",s,"px;","top:",r,"px;","left:0;right:0;",o||"","'></div>")},this.drawScreenLineMarker=function(e,t,i,n,o){t=this.$getTop(t.start.row,n),n=n.lineHeight;e.push("<div class='",i,"' style='","height:",n,"px;","top:",t,"px;","left:0;right:0;",o||"","'></div>")}}.call(n.prototype),t.Marker=n}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e){this.element=c.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)}var o=e("../lib/oop"),c=e("../lib/dom"),l=e("../lib/lang"),r=(e("../lib/useragent"),e("../lib/event_emitter").EventEmitter);!function(){o.implement(this,r),this.EOF_CHAR="¬∂",this.EOL_CHAR_LF="¬¨",this.EOL_CHAR_CRLF="¬§",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="‚Üí",this.SPACE_CHAR="¬∑",this.$padding=0,this.$updateEolChar=function(){var e="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){(this.session=e)&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){for(var e,t,i,n,o,r=this.session.getTabSize(),s=(this.tabSize=r,this.$tabStrings=[0]),a=1;a<r+1;a++)this.showInvisibles?s.push("<span class='ace_invisible ace_invisible_tab'>"+this.TAB_CHAR+l.stringRepeat("¬†",a-1)+"</span>"):s.push(l.stringRepeat("¬†",a));this.displayIndentGuides&&(this.$indentGuideRe=/\s\S| \t|\t |\s$/,e="ace_indent-guide",i=t="",o=this.showInvisibles?(e+=" ace_invisible",t=" ace_invisible_space",i=" ace_invisible_tab",n=l.stringRepeat(this.SPACE_CHAR,this.tabSize),this.TAB_CHAR+l.stringRepeat("¬†",this.tabSize-1)):n=l.stringRepeat("¬†",this.tabSize),this.$tabStrings[" "]="<span class='"+e+t+"'>"+n+"</span>",this.$tabStrings["\t"]="<span class='"+e+i+"'>"+o+"</span>")},this.updateLines=function(e,t,i){this.config.lastRow==e.lastRow&&this.config.firstRow==e.firstRow||this.scrollLines(e),this.config=e;for(var n=Math.max(t,e.firstRow),o=Math.min(i,e.lastRow),r=this.element.childNodes,s=0,a=e.firstRow;a<n;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(n)){n=l.start.row;break}a=l.end.row}s++}for(var l,a=n,c=(l=this.session.getNextFoldLine(a))?l.start.row:1/0;c<a&&(a=l.end.row+1,c=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(o<a);){var u,d=r[s++];d&&(this.$renderLine(u=[],a,!this.$useLineGroups(),a==c&&l),d.style.height=e.lineHeight*this.session.getRowLength(a)+"px",d.innerHTML=u.join("")),a++}},this.scrollLines=function(e){var t=this.config;if(this.config=e,!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var i,n=this.element;if(t.firstRow<e.firstRow)for(var o=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);0<o;o--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(o=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);0<o;o--)n.removeChild(n.lastChild);e.firstRow<t.firstRow&&(i=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1),n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),e.lastRow>t.lastRow&&(i=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow),n.appendChild(i))},this.$renderLinesFragment=function(e,t,i){for(var n=this.element.ownerDocument.createDocumentFragment(),o=t,r=this.session.getNextFoldLine(o),s=r?r.start.row:1/0;s<o&&(o=r.end.row+1,s=(r=this.session.getNextFoldLine(o,r))?r.start.row:1/0),!(i<o);){var a=c.createElement("div"),l=[];if(this.$renderLine(l,o,!1,o==s&&r),a.innerHTML=l.join(""),this.$useLineGroups())a.className="ace_line_group",n.appendChild(a),a.style.height=e.lineHeight*this.session.getRowLength(o)+"px";else for(;a.firstChild;)n.appendChild(a.firstChild);o++}return n},this.update=function(e){for(var t=[],i=(this.config=e).firstRow,n=e.lastRow,o=i,r=this.session.getNextFoldLine(o),s=r?r.start.row:1/0;s<o&&(o=r.end.row+1,s=(r=this.session.getNextFoldLine(o,r))?r.start.row:1/0),!(n<o);)this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(o),"px'>"),this.$renderLine(t,o,!1,o==s&&r),this.$useLineGroups()&&t.push("</div>"),o++;this.element.innerHTML=t.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,r,t,i){var n,o,s=this,a=i.replace(/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,function(e,t,i,n,o){return t?s.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+l.stringRepeat(s.SPACE_CHAR,e.length)+"</span>":l.stringRepeat("¬†",e.length):"&"==e?"&#38;":"<"==e?"&#60;":"\t"==e?(t=s.session.getScreenTabSize(r+n),r+=t-1,s.$tabStrings[t]):"„ÄÄ"==e?(n=s.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",t=s.showInvisibles?s.SPACE_CHAR:"",r+=1,"<span class='"+n+"' style='width:"+2*s.config.characterWidth+"px'>"+t+"</span>"):i?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+s.SPACE_CHAR+"</span>":(r+=1,"<span class='ace_cjk' style='width:"+2*s.config.characterWidth+"px'>"+e+"</span>")});return this.$textToken[t.type]?e.push(a):(n="ace_"+t.type.replace(/\./g," ace_"),o="","fold"==t.type&&(o=" style='width:"+t.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",n,"'",o,">",a,"</span>")),r+i.length},this.renderIndentGuide=function(e,t,i){var n=t.search(this.$indentGuideRe);return n<=0||i<=n?t:" "==t[0]?(n-=n%this.tabSize,e.push(l.stringRepeat(this.$tabStrings[" "],n/this.tabSize)),t.substr(n)):"\t"==t[0]?(e.push(l.stringRepeat(this.$tabStrings["\t"],n)),t.substr(n)):t},this.$renderWrappedLine=function(e,t,i,n){for(var o=0,r=0,s=i[0],a=0,l=0;l<t.length;l++){var c=t[l],u=c.value;if(0==l&&this.displayIndentGuides){if(o=u.length,!(u=this.renderIndentGuide(e,u,s)))continue;o-=u.length}if(o+u.length<s)a=this.$renderToken(e,a,c,u),o+=u.length;else{for(;o+u.length>=s;)a=this.$renderToken(e,a,c,u.substring(0,s-o)),u=u.substring(s-o),o=s,n||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),a=0,s=i[++r]||Number.MAX_VALUE;0!=u.length&&(o+=u.length,a=this.$renderToken(e,a,c,u))}}},this.$renderSimpleLine=function(e,t){var i=0,n=t[0],o=n.value;(o=this.displayIndentGuides?this.renderIndentGuide(e,o):o)&&(i=this.$renderToken(e,i,n,o));for(var r=1;r<t.length;r++)o=(n=t[r]).value,i=this.$renderToken(e,i,n,o)},this.$renderLine=function(e,t,i,n){var o,r;o=(n=n||0==n?n:this.session.getFoldLine(t))?this.$getFoldLineTokens(t,n):this.session.getTokens(t),i||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>"),o.length&&((r=this.session.getRowSplitData(t))&&r.length?this.$renderWrappedLine(e,o,r,i):this.$renderSimpleLine(e,o)),this.showInvisibles&&(n&&(t=n.end.row),e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),i||e.push("</div>")},this.$getFoldLineTokens=function(e,t){var d=this.session,h=[];var p=d.getTokens(e);return t.walk(function(e,t,i,n,o){if(null!=e)h.push({type:"fold",value:e});else if((p=o?d.getTokens(t):p).length){for(var r,s=p,a=n,l=i,c=0,u=0;u+s[c].value.length<a;)if(u+=s[c].value.length,++c==s.length)return void!void 0;for(u!=a&&((r=s[c].value.substring(a-u)).length>l-a&&(r=r.substring(0,l-a)),h.push({type:s[c].type,value:r}),u=a+r.length,c+=1);u<l&&c<s.length;)(r=s[c].value).length+u>l?h.push({type:s[c].type,value:r.substring(0,l-u)}):h.push(s[c]),u+=r.length,c+=1}},t.end.row,this.session.getLine(t.end.row).length),h},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}.call(n.prototype),t.Text=n}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";function n(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),void 0===o&&(o="opacity"in this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateVisibility.bind(this)}var o,r=e("../lib/dom");!function(){this.$updateVisibility=function(e){for(var t=this.cursors,i=t.length;i--;)t[i].style.visibility=e?"":"hidden"},this.$updateOpacity=function(e){for(var t=this.cursors,i=t.length;i--;)t[i].style.opacity=e?"":"0"},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e==this.smoothBlinking||o||(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=(e?this.$updateOpacity:this.$updateVisibility).bind(this),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){var e;if(1<this.cursors.length)return(e=this.cursors.pop()).parentNode.removeChild(e),e},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e,t=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible&&(this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),e=function(){this.timeoutId=setTimeout(function(){t(!1)},.6*this.blinkInterval)}.bind(this),this.intervalId=setInterval(function(){t(!0),e()},this.blinkInterval),e())},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e=e||this.session.selection.getCursor();e=this.session.documentToScreenPosition(e);return{left:this.$padding+e.column*this.config.characterWidth,top:(e.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.update=function(e){this.config=e;for(var t=this.session.$selectionMarkers,i=0,n=0,i=0,o=(t=void 0!==t&&0!==t.length?t:[{cursor:null}]).length;i<o;i++){var r,s=this.getPixelPosition(t[i].cursor,!0);(s.top>e.height+e.offset||s.top<0)&&1<i||(r=(this.cursors[n++]||this.addCursor()).style,this.drawCursor?this.drawCursor(r,s,e,t[i],this.session):(r.left=s.left+"px",r.top=s.top+"px",r.width=e.characterWidth+"px",r.height=e.lineHeight+"px"))}for(;this.cursors.length>n;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&((this.overwrite=e)?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}.call(n.prototype),t.Cursor=n}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e){this.element=a.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=a.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)}function o(e,t){n.call(this,e),this.scrollTop=0,t.$scrollbarWidth=this.width=a.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"}function r(e,t){n.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"}var s=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/event"),c=e("./lib/event_emitter").EventEmitter;!function(){s.implement(this,c),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e}}.call(n.prototype),s.inherits(o,n),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)}}.call(o.prototype);s.inherits(r,n),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(r.prototype),t.ScrollBar=o,t.ScrollBarV=o,t.ScrollBarH=r,t.VScrollBar=o,t.HScrollBar=r}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,i){"use strict";function n(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window}var o=e("./lib/event");!function(){this.schedule=function(e){var t;this.changes=this.changes|e,!this.pending&&this.changes&&(this.pending=!0,o.nextFrame(function(){var e;for(t.pending=!1;e=t.changes;)t.changes=0,t.onRender(e)},(t=this).window))}}.call(n.prototype),t.RenderLoop=n}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,i){var n=e("../lib/oop"),o=e("../lib/dom"),r=e("../lib/lang"),s=e("../lib/useragent"),a=e("../lib/event_emitter").EventEmitter,l=0,e=t.FontMetrics=function(e,t){this.el=o.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=o.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=o.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),l||this.$testFractionalRect(),this.$measureNode.innerHTML=r.stringRepeat("X",l),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};!function(){n.implement(this,a),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=o.createElement("div"),t=(this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e),e.getBoundingClientRect().width);l=0<t&&t<1?50:100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",s.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e,t=this.$measureSizes();!t||this.$characterSize.width===t.width&&this.$characterSize.height===t.height||(this.$measureNode.style.fontWeight="bold",e=this.$measureSizes(),this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t}))},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&this.$pollSizeChangesTimer},this.$measureSizes=function(){if(50===l){var t=null;try{t=this.$measureNode.getBoundingClientRect()}catch(e){t={width:0,height:0}}t={height:t.height,width:t.width/l}}else t={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/l};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.innerHTML=r.stringRepeat(e,l),this.$main.getBoundingClientRect().width/l},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}.call(e.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e,t){var i=this,e=(this.container=e||r.createElement("div"),this.$keepTextAreaAtCursor=!a.isOldIE,r.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new l(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new c(this.content),this.$textLayer=new u(this.content));this.canvas=e.element,this.$markerFront=new c(this.content),this.$cursorLayer=new d(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new p(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){i.$scrollAnimation||i.session.setScrollTop(e.data-i.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){i.$scrollAnimation||i.session.setScrollLeft(e.data-i.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new g(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){i.updateCharacterSize(),i.onResize(!0,i.gutterWidth,i.$size.width,i.$size.height),i._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new f(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._emit("renderer",this)}var o=e("./lib/oop"),r=e("./lib/dom"),s=e("./config"),a=e("./lib/useragent"),l=e("./layer/gutter").Gutter,c=e("./layer/marker").Marker,u=e("./layer/text").Text,d=e("./layer/cursor").Cursor,h=e("./scrollbar").HScrollBar,p=e("./scrollbar").VScrollBar,f=e("./renderloop").RenderLoop,g=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter;r.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}',"ace_editor");!function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,o.implement(this,m),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),(this.session=e)&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,i){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!i)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,i,n){if(!(2<this.resizing)){0<this.resizing?this.resizing++:this.resizing=e?1:0;var o=this.container,o=(n=n||(o.clientHeight||o.scrollHeight),i=i||(o.clientWidth||o.scrollWidth),this.$updateCachedSize(e,t,i,n));if(!this.$size.scrollerHeight||!i&&!n)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,i,n){n-=this.$extraHeight||0;var o=0,r=this.$size,s={width:r.width,height:r.height,scrollerHeight:r.scrollerHeight,scrollerWidth:r.scrollerWidth};return n&&(e||r.height!=n)&&(r.height=n,o|=this.CHANGE_SIZE,r.scrollerHeight=r.height,this.$horizScroll&&(r.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),i&&(e||r.width!=i)&&(o|=this.CHANGE_SIZE,r.width=i,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",r.scrollerWidth=Math.max(0,i-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(o|=this.CHANGE_FULL)),r.$dirty=!i||!n,o&&this._signal("resize",s),o},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e,t=this.$cursorLayer.$pixelPos,i=this.layerConfig.lineHeight;this.session.getUseWrapMode()&&((e=this.session.selection.getCursor()).column=0,t=this.$cursorLayer.getPixelPosition(e,!0),i*=this.session.getRowLength(e.row)),this.$gutterLineHighlight.style.top=t.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=i+"px"},this.$updatePrintMargin=function(){var e;(this.$showPrintMargin||this.$printMarginEl)&&(this.$printMarginEl||((e=r.createElement("div")).className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)),(e=this.$printMarginEl.style).left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit())},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){var e,t,i,n,o,r;this.$keepTextAreaAtCursor&&(o=this.layerConfig,e=this.$cursorLayer.$pixelPos.top,t=this.$cursorLayer.$pixelPos.left,e-=o.offset,i=this.textarea.style,n=this.lineHeight,e<0||e>o.height-n?i.top=i.left="0":(o=this.characterWidth,this.$composition&&(r=this.textarea.value.replace(/^\x01+/,""),o*=this.session.$getStringScreenWidth(r)[0]+2,n+=2),(t-=this.scrollLeft)>this.$size.scrollerWidth-o&&(t=this.$size.scrollerWidth-o),t+=this.gutterWidth,i.height=n+"px",i.width=o+"px",i.left=Math.min(t,this.$size.scrollerWidth-o)+"px",i.top=Math.min(e,this.$size.height-n)+"px"))},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,i,n){var o=this.scrollMargin;o.top=0|e,o.bottom=0|t,o.right=0|n,o.left=0|i,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var i,t=this.layerConfig;return((e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL)&&(e|=this.$computeLayerConfig(),t.firstRow!=this.layerConfig.firstRow&&t.firstRowScreen==this.layerConfig.firstRowScreen&&0<(i=this.scrollTop+(t.firstRow-this.layerConfig.firstRow)*this.lineHeight)&&(this.scrollTop=i,e=(e|=this.CHANGE_SCROLL)|this.$computeLayerConfig()),t=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-t.offset+"px",this.content.style.marginTop=-t.offset+"px",this.content.style.width=t.width+2*this.$padding+"px",this.content.style.height=t.minHeight+"px"),e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL)?(this.$textLayer.update(t),this.$showGutter&&this.$gutterLayer.update(t),this.$markerBack.update(t),this.$markerFront.update(t),this.$cursorLayer.update(t),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):(e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(t):this.$textLayer.scrollLines(t),this.$showGutter&&this.$gutterLayer.update(t),this.$markerBack.update(t),this.$markerFront.update(t),this.$cursorLayer.update(t),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor()):(e&this.CHANGE_TEXT?(this.$textLayer.update(t),this.$showGutter&&this.$gutterLayer.update(t)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(t):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(t),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(t),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(t),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(t)),void this._signal("afterRender"))}this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,i=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0),t=t<e;i==this.desiredHeight&&this.$size.height==this.desiredHeight&&t==this.$vScroll||(t!=this.$vScroll&&(this.$vScroll=t,this.scrollBarV.setVisible(t)),e=this.container.clientWidth,this.container.style.height=i+"px",this.$updateCachedSize(!0,this.$gutterWidth,e,i),this.desiredHeight=i,this._signal("autosize"))},this.$computeLayerConfig=function(){this.$maxLines&&1<this.lineHeight&&this.$autosize();var e,t=this.session,i=this.$size,n=i.height<=2*this.lineHeight,o=this.session.getScreenLength()*this.lineHeight,r=this.scrollTop%this.lineHeight,s=i.scrollerHeight+this.lineHeight,a=this.$getLongestLine(),l=!n&&(this.$hScrollBarAlwaysVisible||i.scrollerWidth-a-2*this.$padding<0),c=this.$horizScroll!==l,l=(c&&(this.$horizScroll=l,this.scrollBarH.setVisible(l)),!this.$maxLines&&this.$scrollPastEnd?(i.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0),n=(o+=l,this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,o-i.scrollerHeight+this.scrollMargin.bottom))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,a+2*this.$padding-i.scrollerWidth+this.scrollMargin.right))),!n&&(this.$vScrollBarAlwaysVisible||i.scrollerHeight-o+l<0||this.scrollTop)),l=this.$vScroll!==n,n=(l&&(this.$vScroll=n,this.scrollBarV.setVisible(n)),Math.ceil(s/this.lineHeight)-1),n=(d=Math.max(0,Math.round((this.scrollTop-r)/this.lineHeight)))+n,u=this.lineHeight,d=t.screenToDocumentRow(d,0),h=t.getFoldLine(d),t=(h&&(d=h.start.row),h=t.documentToScreenRow(d,0),e=t.getRowLength(d)*u,n=Math.min(t.screenToDocumentRow(n,0),t.getLength()-1),s=i.scrollerHeight+t.getRowLength(n)*u+e,r=this.scrollTop-h*u,0);return this.layerConfig.width!=a&&(t=this.CHANGE_H_SCROLL),(c||l)&&(t=this.$updateCachedSize(!0,this.gutterWidth,i.width,i.height),this._signal("scrollbarVisibilityChanged"),l&&(a=this.$getLongestLine())),this.layerConfig={width:a,padding:this.$padding,firstRow:d,firstRowScreen:h,lastRow:n,lineHeight:u,characterWidth:this.characterWidth,minHeight:s,maxHeight:o,offset:r,gutterOffset:Math.max(0,Math.ceil((r+i.height-i.scrollerHeight)/u)),height:this.$size.scrollerHeight},t},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow,i=(this.$changedLines=null,this.layerConfig);if(!(e>i.lastRow+1||t<i.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(i),void this.$textLayer.update(i)):(this.$textLayer.updateLines(i,e,t),!0)},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,i){this.scrollCursorIntoView(e,i),this.scrollCursorIntoView(t,i)},this.scrollCursorIntoView=function(e,t,i){var n,o,r;0!==this.$size.scrollerHeight&&(n=(e=this.$cursorLayer.getPixelPosition(e)).left,e=e.top,r=i&&i.top||0,i=i&&i.bottom||0,e<(o=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop)+r?(t&&(e-=t*this.$size.scrollerHeight),0===e&&(e=-this.scrollMargin.top),this.session.setScrollTop(e)):o+this.$size.scrollerHeight-i<e+this.lineHeight&&(t&&(e+=t*this.$size.scrollerHeight),this.session.setScrollTop(e+this.lineHeight-this.$size.scrollerHeight)),n<(r=this.scrollLeft)?(n<this.$padding+2*this.layerConfig.characterWidth&&(n=-this.scrollMargin.left),this.session.setScrollLeft(n)):r+this.$size.scrollerWidth<n+this.characterWidth?this.session.setScrollLeft(Math.round(n+this.characterWidth-this.$size.scrollerWidth)):r<=this.$padding&&n-r<this.characterWidth&&this.session.setScrollLeft(0))},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){var e=this.$cursorLayer.getPixelPosition(e="number"==typeof e?{row:e,column:0}:e),i=this.$size.scrollerHeight-this.lineHeight,e=e.top-i*(t||0);return this.session.setScrollTop(e),e},this.STEPS=8,this.$calcSteps=function(e,t){for(var i,n,o=0,r=this.STEPS,s=[],o=0;o<r;++o)s.push((i=o/this.STEPS,(t-(n=e))*(Math.pow(i-1,3)+1)+n));return s},this.scrollToLine=function(e,t,i,n){e=this.$cursorLayer.getPixelPosition({row:e,column:0}).top,t&&(e-=this.$size.scrollerHeight/2),t=this.scrollTop;this.session.setScrollTop(e),!1!==i&&this.animateScrolling(t,n)},this.animateScrolling=function(e,t){var i=this.scrollTop;if(this.$animatedScroll){var n=this;if(e!=i){if(this.$scrollAnimation){var o=this.$scrollAnimation.steps;if(o.length&&(e=o[0])==i)return}var r=n.$calcSteps(e,i);this.$scrollAnimation={from:e,to:i,steps:r},clearInterval(this.$timer),n.session.setScrollTop(r.shift()),n.session.$scrollTop=i,this.$timer=setInterval(function(){r.length?(n.session.setScrollTop(r.shift()),n.session.$scrollTop=i):null!=i?(n.session.$scrollTop=-1,n.session.setScrollTop(i),i=null):(n.$timer=clearInterval(n.$timer),n.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(0<t&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(0<e&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),e=(e+this.scrollLeft-i.left-this.$padding)/this.characterWidth,t=Math.floor((t+this.scrollTop-i.top)/this.lineHeight),i=Math.round(e);return{row:t,column:i,side:0<e-i?1:-1}},this.screenToTextCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),e=Math.round((e+this.scrollLeft-i.left-this.$padding)/this.characterWidth),t=(t+this.scrollTop-i.top)/this.lineHeight;return this.session.screenToDocumentPosition(t,Math.max(e,0))},this.textToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),e=this.session.documentToScreenPosition(e,t),t=this.$padding+Math.round(e.column*this.characterWidth),e=e.row*this.lineHeight;return{pageX:i.left+t-this.scrollLeft,pageY:i.top+e-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(r.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(i,n){var e,o=this;function t(e){if(o.$themeId!=i)return n&&n();var t;e.cssClass&&(r.importCssString(e.cssText,e.cssClass,o.container.ownerDocument),o.theme&&r.removeCssClass(o.container,o.theme.cssClass),t="padding"in e?e.padding:"padding"in(o.theme||{})?4:o.$padding,o.$padding&&t!=o.$padding&&o.setPadding(t),o.$theme=e.cssClass,o.theme=e,r.addCssClass(o.container,e.cssClass),r.setCssClass(o.container,"ace_dark",e.isDark),o.$size&&(o.$size.width=0,o.$updateSizeAsync()),o._dispatchEvent("themeLoaded",{theme:e}),n&&n())}this.$themeId=i,o._dispatchEvent("themeChange",{theme:i}),i&&"string"!=typeof i?t(i):(e=i||this.$options.theme.initialValue,s.loadModule(["theme",e],t))},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){r.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){r.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.scroller.style.cursor!=e&&(this.scroller.style.cursor=e)},this.setMouseCursor=function(e){this.scroller.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}.call(n.prototype),s.defineOptions(n.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){if(!this.$gutterLineHighlight)return this.$gutterLineHighlight=r.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight);this.$gutterLineHighlight.style.display=e?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){this.$scrollPastEnd!=(e=+e||0)&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=n}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(s,e,t){"use strict";function i(t,e,i,n){var o,r;this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),s.nameToUrl&&!s.toUrl&&(s.toUrl=s.nameToUrl),c.get("packaged")||!s.toUrl?n=n||c.moduleUrl(e,"worker"):(o=this.$normalizePath,n=n||o(s.toUrl("ace/worker/worker.js",null,"_")),r={},t.forEach(function(e){r[e]=o(s.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))}));try{this.$worker=new Worker(n)}catch(e){if(!(e instanceof window.DOMException))throw e;t=this.$workerBlob(n),n=window.URL||window.webkitURL,t=n.createObjectURL(t);this.$worker=new Worker(t),n.revokeObjectURL(t)}this.$worker.postMessage({init:!0,tlns:r,module:e,classname:i}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage}function n(e,t,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var n=null,o=!1,r=Object.create(l),s=this,a=(this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){s.messageBuffer.push(e),n&&(o?setTimeout(a):a())},this.setEmitSync=function(e){o=e},function(){var e=s.messageBuffer.shift();e.command?n[e.command].apply(n,e.args):e.event&&r._signal(e.event,e.data)});r.postMessage=function(e){s.onMessage({data:e})},r.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},r.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},c.loadModule(["worker",t],function(e){for(n=new e[i](r);s.messageBuffer.length;)a()})}var o=s("../lib/oop"),r=s("../lib/net"),l=s("../lib/event_emitter").EventEmitter,c=s("../config");!function(){o.implement(this,l),this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var i=this.callbacks[t.id];i&&(i(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return r.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,i){var n;i&&(n=this.callbackId++,this.callbacks[n]=i,t.push(n)),this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue?this.deltaQueue.push(e.data):(this.deltaQueue=[e.data],setTimeout(this.$sendDeltaQueue,0))},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,20<e.length&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))},this.$workerBlob=function(t){t="importScripts('"+r.qualifyURL(t)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return i.append(t),i.getBlob("application/javascript")}}}.call(i.prototype);n.prototype=i.prototype,e.UIWorkerClient=n,e.WorkerClient=i}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,i){"use strict";function n(e,t,i,n,o,r){var s=this,t=(this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=o,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=i,e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1});this.$undoStackDepth=t.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)}var l=e("./range").Range,o=e("./lib/event_emitter").EventEmitter,r=e("./lib/oop");!function(){r.implement(this,o),this.setup=function(){var t=this,i=this.doc,n=this.session,e=this.$pos;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=i.createAnchor(e.row,e.column),this.markerId=n.addMarker(new l(e.row,e.column,e.row,e.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(e){n.removeMarker(t.markerId),t.markerId=n.addMarker(new l(e.value.row,e.value.column,e.value.row,e.value.column+t.length),t.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(e){e=i.createAnchor(e.row,e.column);t.others.push(e)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){var i,n;this.othersActive||(i=this.session,(n=this).othersActive=!0,this.others.forEach(function(t){t.markerId=i.addMarker(new l(t.row,t.column,t.row,t.column+n.length),n.othersClass,null,!1),t.on("change",function(e){i.removeMarker(t.markerId),t.markerId=i.addMarker(new l(e.value.row,e.value.column,e.value.row,e.value.column+n.length),n.othersClass,null,!1)})}))},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){var t=e.data,n=t.range;if(n.start.row===n.end.row&&n.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var o="insertText"===t.action?n.end.column-n.start.column:n.start.column-n.end.column;if(n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1){var i=n.start.column-this.pos.column;if(this.length+=o,!this.session.$fromUndo){if("insertText"===t.action)for(var r=this.others.length-1;0<=r;r--){var s={row:(a=this.others[r]).row,column:a.column+i};a.row===n.start.row&&n.start.column<a.column&&(s.column+=o),this.doc.insert(s,t.text)}else if("removeText"===t.action)for(r=this.others.length-1;0<=r;r--){var a,s={row:(a=this.others[r]).row,column:a.column+i};a.row===n.start.row&&n.start.column<a.column&&(s.column+=o),this.doc.remove(new l(s.row,s.column,s.row,s.column-o))}n.start.column===this.pos.column&&"insertText"===t.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-o);for(var e=0;e<this.others.length;e++){var t=this.others[e],i={row:t.row,column:t.column-o};t.row===n.start.row&&n.start.column<t.column&&(i.column+=o),t.setPosition(i.row,i.column)}}.bind(this),0):n.start.column===this.pos.column&&"removeText"===t.action&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===n.start.row&&n.start.column<t.column&&t.setPosition(t.row,t.column-o)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(r=0;r<this.others.length;r++)this.others[r]._emit("change",{value:this.others[r]})}this.$updating=!1}},this.onCursorChange=function(e){var t;!this.$updating&&this.session&&((t=this.session.selection.getCursor()).row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e)))},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1===this.$undoStackDepth)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,i=0;i<t;i++)e.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}.call(n.prototype),t.PlaceHolder=n}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,i){var E=e("../lib/event"),x=e("../lib/useragent");function S(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,i=t.altKey,n=t.shiftKey,o=t.ctrlKey,r=e.getAccelKey(),s=e.getButton();if(o&&x.isMac&&(s=t.button),e.editor.inMultiSelectMode&&2==s)e.editor.textInput.onContextMenu(e.domEvent);else if(o||i||r){if(0===s){var a,l,c,u,d,h,p,f=e.editor,g=f.selection,m=f.inMultiSelectMode,v=e.getDocumentPosition(),y=g.getCursor(),y=e.inSelection()||g.isEmpty()&&S(v,y),b=e.x,w=e.y,C=f.session,_=f.renderer.pixelToScreenCoordinates(b,w),A=_;if(f.$mouseHandler.$enableJumpToDef)o&&i||r&&i?a="add":i&&(a="block");else if(r&&!i){if(a="add",!m&&n)return}else i&&(a="block");if(a&&x.isMac&&t.ctrlKey&&f.$mouseHandler.cancelContextMenu(),"add"==a)!m&&y||(m||(l=g.toOrientedRange(),f.addSelectionMarker(l)),c=g.rangeList.rangeAtPoint(v),f.$blockScrolling++,f.inVirtualSelectionMode=!0,n&&(c=null,l=g.ranges[0],f.removeSelectionMarker(l)),f.once("mouseup",function(){var e=g.toOrientedRange();c&&e.isEmpty()&&S(c.cursor,e.cursor)?g.substractPoint(e.cursor):(n?g.substractPoint(l.cursor):l&&(f.removeSelectionMarker(l),g.addRange(l)),g.addRange(e)),f.$blockScrolling--,f.inVirtualSelectionMode=!1}));else if("block"==a)return e.stop(),f.inVirtualSelectionMode=!0,d=[],f.$blockScrolling++,m&&!r?g.toSingleRange():!m&&r&&(u=g.toOrientedRange(),f.addSelectionMarker(u)),n?_=C.documentToScreenPosition(g.lead):g.moveToPosition(v),f.$blockScrolling--,A={row:-1,column:-1},h=function(){var e=f.renderer.pixelToScreenCoordinates(b,w),t=C.screenToDocumentPosition(e.row,e.column);S(A,e)&&S(t,g.lead)||(A=e,f.$blockScrolling++,f.selection.moveToPosition(t),f.renderer.scrollCursorIntoView(),f.removeSelectionMarkers(d),d=g.rectangularRangeBlock(A,_),f.$mouseHandler.$clickSelection&&1==d.length&&d[0].isEmpty()&&(d[0]=f.$mouseHandler.$clickSelection.clone()),d.forEach(f.addSelectionMarker,f),f.updateSelectionMarkers(),f.$blockScrolling--)},E.capture(f.container,function(e){b=e.clientX,w=e.clientY},function(e){clearInterval(p),f.removeSelectionMarkers(d),d.length||(d=[g.toOrientedRange()]),f.$blockScrolling++,u&&(f.removeSelectionMarker(u),g.toSingleRange(u));for(var t=0;t<d.length;t++)g.addRange(d[t]);f.inVirtualSelectionMode=!1,f.$mouseHandler.$clickSelection=null,f.$blockScrolling--}),p=setInterval(function(){h()},20),e.preventDefault()}}else 0===s&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,i){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readonly:!0}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];e=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new e(t.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,o,t){var i=e("./range_list").RangeList,y=e("./range").Range,h=e("./selection").Selection,r=e("./mouse/multi_select_handler").onMouseDown,s=e("./lib/event"),p=e("./lib/lang"),a=e("./commands/multi_select_commands");o.commands=a.defaultCommands.concat(a.multiSelectCommands);var l=new(e("./search").Search);var n=e("./edit_session").EditSession,n=(!function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}.call(n.prototype),!function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var i=this.toOrientedRange();if(this.rangeList.add(i),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(i),this.$onAddRange(i)}e.cursor||(e.cursor=e.end);i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),1<this.rangeCount&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){e=this.rangeList.substractPoint(e);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){var t;this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode&&(t=this.rangeList.ranges.pop(),e.push(t),this.rangeCount=0);for(var i=e.length;i--;){var n=this.ranges.indexOf(e[i]);this.ranges.splice(n,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(1<this.rangeCount){var e=this.rangeList.ranges,t=e[e.length-1],e=y.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(e,t.cursor==t.start)}else{var i,e=this.getRange(),t=this.isBackwards(),n=e.start.row,o=e.end.row;if(n==o)return t=t?(i=e.end,e.start):(i=e.start,e.end),this.addRange(y.fromPoints(t,t)),void this.addRange(y.fromPoints(i,i));var r=[],t=this.getLineRange(n,!0);t.start.column=e.start.column,r.push(t);for(var s=n+1;s<o;s++)r.push(this.getLineRange(s,!0));(t=this.getLineRange(o,!0)).end.column=e.end.column,r.push(t),r.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){var e,t;1<this.rangeCount?(t=(e=this.rangeList.ranges)[e.length-1],e=y.fromPoints(e[0].start,t.end),this.toSingleRange(),this.setSelectionRange(e,t.cursor==t.start)):(e=this.session.documentToScreenPosition(this.selectionLead),t=this.session.documentToScreenPosition(this.selectionAnchor),this.rectangularRangeBlock(e,t).forEach(this.addRange,this))},this.rectangularRangeBlock=function(e,t,i){var n,o,r,s,a=[],l=e.column<t.column,c=(o=l?(n=e.column,t.column):(n=t.column,e.column),e.row<t.row);s=c?(r=e.row,t.row):(r=t.row,e.row),n<0&&(n=0),(r=r<0?0:r)==s&&(i=!0);for(var u,d,h=r;h<=s;h++){var p=y.fromPoints(this.session.screenToDocumentPosition(h,n),this.session.screenToDocumentPosition(h,o));if(p.isEmpty()){if(f&&(u=p.end,d=f,u.row==d.row&&u.column==d.column))break;var f=p.end}p.cursor=l?p.start:p.end,a.push(p)}if(c&&a.reverse(),!i){for(var g=a.length-1;a[g].isEmpty()&&0<g;)g--;if(0<g)for(var m=0;a[m].isEmpty();)m++;for(var v=g;m<=v;v--)a[v].isEmpty()&&a.splice(v,1)}return a}}.call(h.prototype),e("./editor").Editor);function c(e){var t,i;function n(e){i&&(t.renderer.setMouseCursor(""),i=!1)}e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=o.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",r),e.commands.addCommands(a.defaultCommands),e=(t=e).textInput.getElement(),i=!1,s.addListener(e,"keydown",function(e){18!=e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?i&&n():i||(t.renderer.setMouseCursor("crosshair"),i=!0)}),s.addListener(e,"keyup",n),s.addListener(e,"blur",n))}!function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){e.marker&&(this.session.removeMarker(e.marker),-1!=(e=this.session.$selectionMarkers.indexOf(e))&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length)},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,i=e.length;i--;){var n=e[i];n.marker&&(this.session.removeMarker(n.marker),-1!=(n=t.indexOf(n))&&t.splice(n,1))}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(a.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(a.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t,i=e.command,n=e.editor;if(n.multiSelect)return i.multiSelectAction?t="forEach"==i.multiSelectAction?n.forEachSelection(i,e.args):"forEachLine"==i.multiSelectAction?n.forEachSelection(i,e.args,!0):"single"==i.multiSelectAction?(n.exitMultiSelectMode(),i.exec(n,e.args||{})):i.multiSelectAction(n,e.args||{}):(t=i.exec(n,e.args||{}),n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()),t},this.forEachSelection=function(e,t,i){if(!this.inVirtualSelectionMode){var n,o=i&&i.keepOrder,r=1==i||i&&i.$byLines,s=this.session,i=this.selection,a=i.rangeList,l=(o?i:a).ranges;if(!l.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var o=i._eventRegistry,c=(i._eventRegistry={},new h(s));this.inVirtualSelectionMode=!0;for(var u=l.length;u--;){if(r)for(;0<u&&l[u].start.row==l[u-1].end.row;)u--;c.fromOrientedRange(l[u]),c.index=u,this.selection=s.selection=c;var d=e.exec?e.exec(this,t||{}):e(this,t||{});n||void 0===d||(n=d),c.toOrientedRange(l[u])}c.detach(),this.selection=s.selection=i,this.inVirtualSelectionMode=!1,i._eventRegistry=o,i.mergeOverlappingRanges();a=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),a&&a.from==a.to&&this.renderer.animateScrolling(a.from),n}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,i=[],n=0;n<t.length;n++)i.push(this.session.getTextRange(t[n]));var o=this.session.getDocument().getNewLineCharacter();(e=i.join(o)).length==(i.length-1)*o.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){var i;this.inMultiSelectMode&&!this.inVirtualSelectionMode&&(i=this.multiSelect.ranges[0],this.multiSelect.isEmpty()&&t==this.multiSelect.anchor||((i=t==this.multiSelect.anchor?i.cursor==i.start?i.end:i.start:i.cursor).row==t.row&&this.session.$clipPositionToDocument(i.row,i.column).column==t.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())))},this.findAll=function(e,t,i){(t=t||{}).needle=e||t.needle,null==t.needle&&(n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange(),t.needle=this.session.getTextRange(n)),this.$search.set(t);var n,o=this.$search.findAll(this.session);if(!o.length)return 0;this.$blockScrolling+=1;var r=this.multiSelect;i||r.toSingleRange(o[0]);for(var s=o.length;s--;)r.addRange(o[s],!0);return n&&r.rangeList.rangeAtPoint(n.start)&&r.addRange(n,!0),--this.$blockScrolling,o.length},this.selectMoreLines=function(e,t){var i,n,o,r=this.selection.toOrientedRange(),s=r.cursor==r.end,a=this.session.documentToScreenPosition(r.cursor),l=(this.selection.$desiredColumn&&(a.column=this.selection.$desiredColumn),this.session.screenToDocumentPosition(a.row+e,a.column));e=r.isEmpty()?l:(i=this.session.documentToScreenPosition(s?r.end:r.start),this.session.screenToDocumentPosition(i.row+e,i.column)),s?(n=y.fromPoints(l,e)).cursor=n.start:(n=y.fromPoints(e,l)).cursor=n.end,n.desiredColumn=a.column,this.selection.inMultiSelectMode?t&&(o=r.cursor):this.selection.addRange(r),this.selection.addRange(n),o&&this.selection.substractPoint(o)},this.transposeSelections=function(e){for(var t=this.session,i=t.multiSelect,n=i.ranges,o=n.length;o--;)(s=n[o]).isEmpty()&&(a=t.getWordRange(s.start.row,s.start.column),s.start.row=a.start.row,s.start.column=a.start.column,s.end.row=a.end.row,s.end.column=a.end.column);i.mergeOverlappingRanges();for(var r=[],o=n.length;o--;){var s=n[o];r.unshift(t.getTextRange(s))}e<0?r.unshift(r.pop()):r.push(r.shift());for(o=n.length;o--;){var a=(s=n[o]).clone();t.replace(s,r[o]),s.start.row=a.start.row,s.start.column=a.start.column}},this.selectMore=function(e,t,i){var n,o=this.session,r=o.multiSelect.toOrientedRange();r.isEmpty()&&((r=o.getWordRange(r.start.row,r.start.column)).cursor=-1==e?r.start:r.end,this.multiSelect.addRange(r),i)||(i=o.getTextRange(r),o=o,i=i,n=e,l.$options.wrap=!0,l.$options.needle=i,l.$options.backwards=-1==n,(i=l.find(o))&&(i.cursor=-1==e?i.start:i.end,this.$blockScrolling+=1,this.session.unfold(i),this.multiSelect.addRange(i),--this.$blockScrolling,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(r.cursor))},this.alignCursors=function(){var o=this.session,t=o.multiSelect,e=t.ranges,i=-1,n=e.filter(function(e){if(e.cursor.row==i)return!0;i=e.cursor.row});if(e.length&&n.length!=e.length-1){n.forEach(function(e){t.substractPoint(e.cursor)});var r=0,s=1/0,a=e.map(function(e){var e=e.cursor,t=o.getLine(e.row).substr(e.column).search(/\S/g);return e.column>r&&(r=e.column),(t=-1==t?0:t)<s&&(s=t),t});e.forEach(function(e,t){var i=e.cursor,n=r-i.column,t=a[t]-s;t<n?o.insert(i,p.stringRepeat(" ",n-t)):o.remove(new y(i.row,i.column,i.row,i.column-n+t)),e.start.column=e.end.column=r,e.start.row=e.end.row=i.row,e.cursor=e.end}),t.fromOrientedRange(e[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var n=this.selection.getRange(),l=n.start.row,c=n.end.row,e=l==c;if(e){for(var u,d=this.session.getLength();u=this.session.getLine(c),/[=:]/.test(u)&&++c<d;);for(;u=this.session.getLine(l),/[=:]/.test(u)&&0<--l;);l<0&&(l=0),d<=c&&(c=d-1)}var h=this.session.doc.removeLines(l,c),h=this.$reAlignText(h,e);this.session.doc.insert({row:l,column:0},h.join("\n")+"\n"),e||(n.start.column=0,n.end.column=h[h.length-1].length),this.selection.setRange(n)}},this.$reAlignText=function(e,t){var i,n,o,r=!0,s=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?(null==i?(i=t[1].length,n=t[2].length,o=t[3].length):(i+n+o!=t[1].length+t[2].length+t[3].length&&(s=!1),i!=t[1].length&&(r=!1),i>t[1].length&&(i=t[1].length),n<t[2].length&&(n=t[2].length),o>t[3].length&&(o=t[3].length)),t):[e]}).map(t?l:r?s?function(e){return e[2]?a(i+n-e[2].length)+e[2]+a(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:l:function(e){return e[2]?a(i)+e[2]+a(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function a(e){return p.stringRepeat(" ",e)}function l(e){return e[2]?a(i)+e[2]+a(n-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}.call(n.prototype),o.onSessionChange=function(e){var t=e.session,e=(t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect,e.oldSession);e&&(e.multiSelect.off("addRange",this.$onAddRange),e.multiSelect.off("removeRange",this.$onRemoveRange),e.multiSelect.off("multiSelect",this.$onMultiSelect),e.multiSelect.off("singleSelect",this.$onSingleSelect),e.multiSelect.lead.off("change",this.$checkMultiselectChange),e.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},o.MultiSelect=c,e("./config").defineOptions(n.prototype,"editor",{enableMultiselect:{set:function(e){c(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",r)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",r))},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,i){"use strict";var u=e("../../range").Range,e=t.FoldMode=function(){};!function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,i){e=e.getLine(i);return this.foldingStartMarker.test(e)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(e)?"end":""},this.getFoldWidgetRange=function(e,t,i){return null},this.indentationBlock=function(e,t,i){var n=/\S/,o=e.getLine(t),r=o.search(n);if(-1!=r){for(var s,i=i||o.length,a=e.getLength(),o=t,l=t;++t<a;){var c=e.getLine(t).search(n);if(-1!=c){if(c<=r)break;l=t}}return o<l?(s=e.getLine(l).length,new u(o,i,l,s)):void 0}},this.openingBracketBlock=function(e,t,i,n,o){i={row:i,column:n+1},n=e.$findClosingBracket(t,i,o);if(n)return t=e.foldWidgets[n.row],"start"==(t=null==t?e.getFoldWidget(n.row):t)&&n.row>i.row&&(n.row--,n.column=e.getLine(n.row).length),u.fromPoints(i,n)},this.closingBracketBlock=function(e,t,i,n,o){i={row:i,column:n},n=e.$findOpeningBracket(t,i);if(n)return n.column++,i.column--,u.fromPoints(n,i)}}.call(e.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e("../lib/dom").importCssString(t.cssText,t.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,i){"use strict";e("./lib/oop");var n=e("./lib/dom");e("./range").Range;function o(e){this.session=e,(this.session.widgetManager=this).session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeEditor",this.$onChangeEditor)}!function(){this.getRowLength=function(e){var t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&(t+=e.rowCount)}),t},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),(this.editor=e)&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;t&&(this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets),(t=this.session.lineWidgets)&&t.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))},this.updateOnChange=function(e){var t,i,n=this.session.lineWidgets;n&&(t=(i=(e=e.data).range).start.row,0!=(i=i.end.row-t)&&("removeText"==e.action||"removeLines"==e.action?n.splice(t+1,i).forEach(function(e){e&&this.removeLineWidget(e)},this):((e=new Array(i)).unshift(t,0),n.splice.apply(n,e)),this.$updateRows()))},this.$updateRows=function(){var i,e=this.session.lineWidgets;e&&(i=!0,e.forEach(function(e,t){e&&(i=!1,e.row=t)}),i&&(this.session.lineWidgets=null))},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength())),this.session.lineWidgets[e.row]=e;var t=this.editor.renderer;return e.html&&!e.el&&(e.el=n.createElement("div"),e.el.innerHTML=e.html),e.el&&(n.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight||(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}this.session.lineWidgets&&(this.session.lineWidgets[e.row]=void 0),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var i=this.session._changedWidgets,n=t.layerConfig;if(i&&i.length){for(var o=1/0,r=0;r<i.length;r++){var s=i[r],a=(s._inDocument||(s._inDocument=!0,t.container.appendChild(s.el)),s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/n.characterWidth)),s.h/n.lineHeight);s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<o&&(o=s.row))}o!=1/0&&(this.session._emit("changeFold",{data:{start:{row:o}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var i=t.layerConfig,n=this.session.lineWidgets;if(n){for(var o=Math.min(this.firstRow,i.firstRow),r=Math.max(this.lastRow,i.lastRow,n.length);0<o&&!n[o];)o--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,t.$cursorLayer.config=i;for(var s=o;s<=r;s++){var a,l=n[s];l&&l.el&&(l._inDocument||(l._inDocument=!0,t.container.appendChild(l.el)),a=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top,l.coverLine||(a+=i.lineHeight*this.session.getRowLineCount(l.row)),l.el.style.top=a-i.offset+"px",a=l.coverGutter?0:t.gutterWidth,l.fixedWidth||(a-=t.scrollLeft),l.el.style.left=a+"px",l.fixedWidth?l.el.style.right=t.scrollBar.getWidth()+"px":l.el.style.right="")}}}}.call(o.prototype),t.LineWidgets=o}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,i){"use strict";var c=e("../line_widgets").LineWidgets,u=e("../lib/dom"),a=e("../range").Range;function d(e,t,i){var n=e.getAnnotations().sort(a.comparePoints);if(n.length){var o=function(e,t,i){for(var n=0,o=e.length-1;n<=o;){var r=n+o>>1,s=i(t,e[r]);if(0<s)n=1+r;else{if(!(s<0))return r;o=r-1}}return-(n+1)}(n,{row:t,column:-1},a.comparePoints),r=((o=o<0?-o-1:o)>=n.length-1?o=0<i?0:n.length-1:0===o&&i<0&&(o=n.length-1),n[o]);if(r&&i){if(r.row===t){for(;(r=n[o+=i])&&r.row===t;);if(!r)return n.slice()}var s=[];for(t=r.row;s[i<0?"unshift":"push"](r),(r=n[o+=i])&&r.row==t;);return s.length&&s}}}t.showErrorMarker=function(e,t){var i,n=e.session,o=(n.widgetManager||(n.widgetManager=new c(n),n.widgetManager.attach(e)),e.getCursorPosition()),r=o.row,s=n.lineWidgets&&n.lineWidgets[r],r=(s?s.destroy():r-=t,d(n,r,t));if(r){t=r[0];o.column=(t.pos&&"number"!=typeof t.column?t.pos.sc:t.column)||0,o.row=t.row,i=e.renderer.$gutterLayer.$annotations[o.row]}else{if(s)return;i={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(o.row),e.selection.moveToPosition(o);function a(e,t,i){if(0===t&&("esc"===i||"return"===i))return l.destroy(),{command:"null"}}var l={row:o.row,fixedWidth:!0,coverGutter:!0,el:u.createElement("div")},r=l.el.appendChild(u.createElement("div")),t=l.el.appendChild(u.createElement("div")),s=(t.className="error_widget_arrow "+i.className,e.renderer.$cursorLayer.getPixelPosition(o).left);t.style.left=s+e.renderer.gutterWidth-5+"px",l.el.className="error_widget_wrapper",r.className="error_widget "+i.className,r.innerHTML=i.text.join("<br>"),r.appendChild(u.createElement("div"));l.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(a),n.widgetManager.removeLineWidget(l),e.off("changeSelection",l.destroy),e.off("changeSession",l.destroy),e.off("mouseup",l.destroy),e.off("change",l.destroy))},e.keyBinding.addKeyboardHandler(a),e.on("changeSelection",l.destroy),e.on("changeSession",l.destroy),e.on("mouseup",l.destroy),e.on("change",l.destroy),e.session.widgetManager.addLineWidget(l),l.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:l.el.offsetHeight})},u.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,o,t){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/dom"),s=e("./lib/event"),a=e("./editor").Editor,i=e("./edit_session").EditSession,n=e("./undomanager").UndoManager,l=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),o.config=e("./config"),o.require=e,o.edit=function(e){if("string"==typeof e){var t=e;if(!(e=document.getElementById(t)))throw new Error("ace.edit can't find div #"+t)}if(e&&e.env&&e.env.editor instanceof a)return e.env.editor;var i,t="",t=(e&&/input|textarea/i.test(e.tagName)?(t=(i=e).value,e=r.createElement("pre"),i.parentNode.replaceChild(e,i)):(t=r.getInnerText(e),e.innerHTML=""),o.createEditSession(t)),e=new a(new l(e)),n=(e.setSession(t),{document:t,editor:e,onResize:e.resize.bind(e,null)});return i&&(n.textarea=i),s.addListener(window,"resize",n.onResize),e.on("destroy",function(){s.removeListener(window,"resize",n.onResize),n.editor.container.env=null}),e.container.env=e.env=n,e},o.createEditSession=function(e,t){e=new i(e,t);return e.setUndoManager(new n),e},o.EditSession=i,o.UndoManager=n}),ace.require(["ace/ace"],function(e){for(var t in e&&e.config.init(!0),window.ace||(window.ace=e),e)e.hasOwnProperty(t)&&(window.ace[t]=e[t])}),ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(e,s,t){"use strict";function i(){this.snippetMap={},this.snippetNameMap={}}var n=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,c=e("./lib/lang"),u=e("./range").Range,r=e("./anchor").Anchor,a=e("./keyboard/hash_handler").HashHandler,l=e("./tokenizer").Tokenizer,d=u.comparePoints,y=(!function(){n.implement(this,o),this.getTokenizer=function(){function n(e,t,i){return e=e.substr(1),/^\d+$/.test(e)&&!i.inFormatString?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function e(e){return"(?:[^\\\\"+e+"]|\\\\.)"}return i.$tokenizer=new l({start:[{regex:/:/,onMatch:function(e,t,i){return i.length&&i[0].expectIf?(i[0].expectIf=!1,i[0].elseBranch=i[0],[i[0]]):":"}},{regex:/\\./,onMatch:function(e,t,i){var n=e[1];return"}"==n&&i.length||-1!="`$\\".indexOf(n)?e=n:i.inFormatString&&("n"==n||"t"==n?e="\n":-1!="ulULE".indexOf(n)&&(e={changeCase:n,local:"a"<n})),[e]}},{regex:/}/,onMatch:function(e,t,i){return[i.length?i.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:n},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,t,i){e=n(e.substr(1),0,i);return i.unshift(e[0]),e},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+e("\\|")+"*\\|",onMatch:function(e,t,i){i[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+e("/")+"+)/(?:("+e("/")+"*)/)(\\w*):?",onMatch:function(e,t,i){i=i[0];return i.fmtString=e,e=this.splitRegex.exec(e),i.guard=e[1],i.fmt=e[2],i.flag=e[3],""},next:"start"},{regex:"`"+e("`")+"*`",onMatch:function(e,t,i){return i[0].code=e.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(e,t,i){i[0]&&(i[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+e("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,i){i.inFormatString=!0},next:"start"}]}),i.prototype.getTokenizer=function(){return i.$tokenizer},i.$tokenizer},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.$getDefaultValue=function(e,t){var i;if(/^[A-Z]\d+$/.test(t))return i=t.substr(1),(this.variables[t[0]+"__"]||{})[i];if(/^\d+$/.test(t))return(this.variables.__||{})[t];if(t=t.replace(/^TM_/,""),e){var n=e.session;switch(t){case"CURRENT_WORD":var o=n.getWordRange();case"SELECTION":case"SELECTED_TEXT":return n.getTextRange(o);case"CURRENT_LINE":return n.getLine(e.getCursorPosition().row);case"PREV_LINE":return n.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return n.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return n.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(e,t){return this.variables.hasOwnProperty(t)?this.variables[t](e,t)||"":this.$getDefaultValue(e,t)||""},this.tmStrFormat=function(e,t,r){var i=t.flag||"",n=t.guard,n=new RegExp(n,i.replace(/[^gi]/,"")),s=this.tokenizeTmSnippet(t.fmt,"formatString"),a=this,i=e.replace(n,function(){a.variables.__=arguments;for(var e=a.resolveVariables(s,r),t="E",i=0;i<e.length;i++){var n,o=e[i];"object"==typeof o?(e[i]="",o.changeCase&&o.local?(n=e[i+1])&&"string"==typeof n&&("u"==o.changeCase?e[i]=n[0].toUpperCase():e[i]=n[0].toLowerCase(),e[i+1]=n.substr(1)):o.changeCase&&(t=o.changeCase)):"U"==t?e[i]=o.toUpperCase():"L"==t&&(e[i]=o.toLowerCase())}return e.join("")});return this.variables.__=null,i},this.resolveVariables=function(t,e){for(var i=[],n=0;n<t.length;n++){var o,r=t[n];"string"==typeof r?i.push(r):"object"==typeof r&&(r.skip?s(r):r.processed<n||(r.text?((o=this.getVariableValue(e,r.text))&&r.fmtString&&(o=this.tmStrFormat(o,r)),r.processed=n,null==r.expectIf?o&&(i.push(o),s(r)):o?r.skip=r.elseBranch:s(r)):null==r.tabstopId&&null==r.changeCase||i.push(r)))}function s(e){e=t.indexOf(e,n+1);-1!=e&&(n=e)}return i},this.insertSnippetForSelection=function(e,t){var i=e.getCursorPosition(),n=e.session.getLine(i.row),o=e.session.getTabString(),r=n.match(/^\s*/)[0],s=(i.column<r.length&&(r=r.slice(0,i.column)),this.tokenizeTmSnippet(t)),a=(s=(s=this.resolveVariables(s,e)).map(function(e){return"\n"==e?e+r:"string"==typeof e?e.replace(/\t/g,o):e}),[]),l=(s.forEach(function(e,t){var i,n;"object"==typeof e&&(n=e.tabstopId,(i=a[n])||((i=a[n]=[]).index=n,i.value=""),-1===i.indexOf(e)&&(i.push(e),-1!==(n=s.indexOf(e,t+1))&&((e=s.slice(t+1,n)).some(function(e){return"object"==typeof e})&&!i.value?i.value=e:!e.length||i.value&&"string"==typeof i.value||(i.value=e.join("")))))}),a.forEach(function(e){e.length=0}),{});for(var c=0;c<s.length;c++){var u,d,h,p,f=s[c];"object"==typeof f&&(u=f.tabstopId,d=s.indexOf(f,c+1),l[u]?l[u]===f&&(l[u]=null):((p="string"==typeof(h=a[u]).value?[h.value]:function(e){for(var t=[],i=0;i<e.length;i++){if("object"==typeof(n=e[i])){if(l[n.tabstopId])continue;var n=t[e.lastIndexOf(n,i-1)]||{tabstopId:n.tabstopId}}t[i]=n}return t}(h.value)).unshift(c+1,Math.max(0,d-c)),p.push(f),l[u]=f,s.splice.apply(s,p),-1===h.indexOf(f)&&h.push(f)))}var g=0,m=0,v="",n=(s.forEach(function(e){"string"==typeof e?("\n"===e[0]?(m=e.length-1,g++):m+=e.length,v+=e):e.start?e.end={row:g,column:m}:e.start={row:g,column:m}}),e.getSelectionRange()),i=e.session.replace(n,v),t=new y(e),e=e.inVirtualSelectionMode&&e.selection.index;t.addTabstops(a,n.start,i,e)},this.insertSnippet=function(e,t){var i=this;if(e.inVirtualSelectionMode)return i.insertSnippetForSelection(e,t);e.forEachSelection(function(){i.insertSnippetForSelection(e,t)},null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},this.$getScope=function(e){var t,i=e.session.$mode.$id||"";return"html"!==(i=i.split("/").pop())&&"php"!==i||("php"!==i||e.session.$mode.inlinePhp||(i="html"),t=e.getCursorPosition(),(e="object"==typeof(e=e.session.getState(t.row))?e[0]:e).substring&&("js-"==e.substring(0,3)?i="javascript":"css-"==e.substring(0,4)?i="css":"php-"==e.substring(0,4)&&(i="php"))),i},this.getActiveScopes=function(e){var e=this.$getScope(e),t=[e],i=this.snippetMap;return i[e]&&i[e].includeScopes&&t.push.apply(t,i[e].includeScopes),t.push("_"),t},this.expandWithTab=function(e,t){var i=this,n=e.forEachSelection(function(){return i.expandSnippetForSelection(e,t)},null,{keepOrder:!0});return n&&e.tabstopManager&&e.tabstopManager.tabNext(),n},this.expandSnippetForSelection=function(e,t){var i,n=e.getCursorPosition(),o=e.session.getLine(n.row),r=o.substring(0,n.column),s=o.substr(n.column),a=this.snippetMap;return this.getActiveScopes(e).some(function(e){e=a[e];return!!(i=e?this.findMatchingSnippet(e,r,s):i)},this),!!i&&(!(!t||!t.dryRun)||(e.session.doc.removeInLine(n.row,n.column-i.replaceBefore.length,n.column+i.replaceAfter.length),this.variables.M__=i.matchBefore,this.variables.T__=i.matchAfter,this.insertSnippetForSelection(e,i.content),!(this.variables.M__=this.variables.T__=null)))},this.findMatchingSnippet=function(e,t,i){for(var n=e.length;n--;){var o=e[n];if((!o.startRe||o.startRe.test(t))&&((!o.endRe||o.endRe.test(i))&&(o.startRe||o.endRe)))return o.matchBefore=o.startRe?o.startRe.exec(t):[""],o.matchAfter=o.endRe?o.endRe.exec(i):[""],o.replaceBefore=o.triggerRe?o.triggerRe.exec(t)[0]:"",o.replaceAfter=o.endTriggerRe?o.endTriggerRe.exec(i)[0]:"",o}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,n){var o=this.snippetMap,r=this.snippetNameMap,s=this;function a(e){return(e=e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)?"(?:"+e+")":e)||""}function l(e,t,i){return e=a(e),t=a(t),i?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function t(e){e.scope||(e.scope=n||"_"),n=e.scope,o[n]||(o[n]=[],r[n]={});var t,i=r[n];e.name&&((t=i[e.name])&&s.unregister(t),i[e.name]=e),o[n].push(e),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=c.escapeRegExp(e.tabTrigger)),e.startRe=l(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger,"",!0),e.endRe=l(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger,"",!0)}(e=e||[])&&e.content?t(e):Array.isArray(e)&&e.forEach(t),this._signal("registerSnippets",{scope:n})},this.unregister=function(e,i){var n=this.snippetMap,o=this.snippetNameMap;function t(e){var t=o[e.scope||i];t&&t[e.name]&&(delete t[e.name],0<=(e=(t=n[e.scope||i])&&t.indexOf(e))&&t.splice(e,1))}e.content?t(e):Array.isArray(e)&&e.forEach(t)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,i,n,o=[],r={},s=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;i=s.exec(e);){if(i[1])try{r=JSON.parse(i[1]),o.push(r)}catch(e){}i[4]?(r.content=i[4].replace(/^\t/gm,""),o.push(r),r={}):(t=i[2],i=i[3],"regex"==t?(r.guard=(n=/\/((?:[^\/\\]|\\.)*)|$/g).exec(i)[1],r.trigger=n.exec(i)[1],r.endTrigger=n.exec(i)[1],r.endGuard=n.exec(i)[1]):"snippet"==t?(r.tabTrigger=i.match(/^\S*/)[0],r.name||(r.name=i)):r[t]=i)}return o},this.getSnippetByName=function(t,e){var i,n=this.snippetNameMap;return this.getActiveScopes(e).some(function(e){e=n[e];return!!(i=e?e[t]:i)},this),i}}.call(i.prototype),function(e){if(e.tabstopManager)return e.tabstopManager;(e.tabstopManager=this).$onChange=this.onChange.bind(this),this.$onChangeSelection=c.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)}),h=(!function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){var t=e.data.range,i="r"==e.data.action[0],n=t.start,o=t.end,r=n.row,s=o.row-r,a=o.column-n.column;if(i&&(s=-s,a=-a),!this.$inChange&&i){e=this.selectedTabstop;if(e&&!e.some(function(e){return d(e.start,n)<=0&&0<=d(e.end,o)}))return this.detach()}for(var l=this.ranges,c=0;c<l.length;c++){var u=l[c];u.end.row<n.row||(i&&d(n,u.start)<0&&0<d(o,u.end)?(this.removeRange(u),c--):(u.start.row==r&&u.start.column>n.column&&(u.start.column+=a),u.end.row==r&&u.end.column>=n.column&&(u.end.column+=a),u.start.row>=r&&(u.start.row+=s),u.end.row>=r&&(u.end.row+=s),0<d(u.start,u.end)&&this.removeRange(u)))}l.length||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges){this.$inChange=!0;for(var t=this.editor.session,i=t.getTextRange(e.firstNonLinked),n=e.length;n--;){var o,r=e[n];r.linked&&(o=s.snippetManager.tmStrFormat(i,r.original),t.replace(r,o))}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,i=this.editor.selection.isEmpty(),n=this.ranges.length;n--;)if(!this.ranges[n].linked){var o=this.ranges[n].contains(e.row,e.column),r=i||this.ranges[n].contains(t.row,t.column);if(o&&r)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,e=this.index+(e||1),e=Math.min(Math.max(e,1),t);this.selectTabstop(e=e==t?0:e),0===e&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){if(this.selectedTabstop=t,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(t.firstNonLinked);else{var i=this.editor.multiSelect;i.toSingleRange(t.firstNonLinked.clone());for(var n=t.length;n--;)t.hasLinkedRanges&&t[n].linked||i.addRange(t[n].clone(),!0);i.ranges[0]&&i.addRange(i.ranges[0].clone())}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(e,s,t){this.$openTabstops||(this.$openTabstops=[]),e[0]||(t=u.fromPoints(t,t),f(t.start,s),f(t.end,s),e[0]=[t],e[0].index=0);var a=[this.index+1,0],l=this.ranges;e.forEach(function(e,t){for(var i=this.$openTabstops[t]||e,n=e.length;n--;){var o=e[n],r=u.fromPoints(o.start,o.end||o.start);p(r.start,s),p(r.end,s),r.original=o,r.tabstop=i,l.push(r),i!=e?i.unshift(r):i[n]=r,o.fmtString?(r.linked=!0,i.hasLinkedRanges=!0):i.firstNonLinked||(i.firstNonLinked=r)}i.firstNonLinked||(i.hasLinkedRanges=!1),i===e&&(a.push(i),this.$openTabstops[t]=i),this.addTabstopMarkers(i)},this),2<a.length&&(this.tabstops.length&&a.push(a.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,a))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1),t=this.ranges.indexOf(e),this.ranges.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new a,this.keyboardHandler.bindKeys({Tab:function(e){s.snippetManager&&s.snippetManager.expandWithTab(e)||e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(e){return!1}})}.call(y.prototype),{}),p=(h.onChange=r.prototype.onChange,h.setPosition=function(e,t){this.pos.row=e,this.pos.column=t},h.update=function(e,t,i){this.$insertRight=i,this.pos=e,this.onChange(t)},function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}),f=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row},r=(e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),s.snippetManager=new i,e("./editor").Editor);!function(){this.insertSnippet=function(e,t){return s.snippetManager.insertSnippet(this,e,t)},this.expandSnippet=function(e){return s.snippetManager.expandWithTab(this,e)}}.call(r.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/edit_session","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t,i){"use strict";e("../edit_session").EditSession;function a(e){return(e=new n(e)).$maxLines=4,(e=new o(e)).setHighlightActiveLine(!1),e.setShowPrintMargin(!1),e.renderer.setShowGutter(!1),e.renderer.setHighlightGutterLine(!1),e.$mouseHandler.$focusWaitTimout=0,e.$highlightTagPending=!0,e}var n=e("../virtual_renderer").VirtualRenderer,o=e("../editor").Editor,u=e("../range").Range,d=e("../lib/event"),h=e("../lib/lang"),p=e("../lib/dom");p.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),t.AcePopup=function(e){function t(){}function i(){s(-1)}var l,n=p.createElement("div"),c=new a(n),o=(e&&e.appendChild(n),n.style.display="none",c.renderer.content.style.cursor="default",c.renderer.setStyle("ace_autocomplete"),c.setOption("displayIndentGuides",!1),c.setOption("dragDelay",150),c.focus=t,c.$isFocused=!0,c.renderer.$cursorLayer.restartTimer=t,c.renderer.$cursorLayer.element.style.opacity=0,c.renderer.$maxLines=8,c.renderer.$keepTextAreaAtCursor=!1,c.setHighlightActiveLine(!1),c.session.highlight(""),c.session.$searchHighlight.clazz="ace_highlight-marker",c.on("mousedown",function(e){var t=e.getDocumentPosition();c.selection.moveToPosition(t),r.start.row=r.end.row=t.row,e.stop()}),new u(-1,0,-1,1/0)),r=new u(-1,0,-1,1/0),s=(r.id=c.session.addMarker(r,"ace_active-line","fullLine"),c.setSelectOnHover=function(e){e?o.id&&(c.session.removeMarker(o.id),o.id=null):o.id=c.session.addMarker(o,"ace_line-hover","fullLine")},c.setSelectOnHover(!1),c.on("mousemove",function(e){var t;l?l.x==e.x&&l.y==e.y||((l=e).scrollTop=c.renderer.scrollTop,t=l.getDocumentPosition().row,o.start.row!=t&&(o.id||c.setRow(t),s(t))):l=e}),c.renderer.on("beforeRender",function(){var e;l&&-1!=o.start.row&&(l.$pos=null,e=l.getDocumentPosition().row,o.id||c.setRow(e),s(e,!0))}),c.renderer.on("afterRender",function(){var e=c.getRow(),t=c.renderer.$textLayer,e=t.element.childNodes[e-t.config.firstRow];e!=t.selectedNode&&(t.selectedNode&&p.removeCssClass(t.selectedNode,"ace_selected"),(t.selectedNode=e)&&p.addCssClass(e,"ace_selected"))}),function(e,t){e!==o.start.row&&(o.start.row=o.end.row=e,t||c.session._emit("changeBackMarker"),c._emit("changeHoverMarker"))}),e=(c.getHoveredRow=function(){return o.start.row},d.addListener(c.container,"mouseout",i),c.on("hide",i),c.on("changeSelection",i),c.session.doc.getLength=function(){return c.data.length},c.session.doc.getLine=function(e){e=c.data[e];return"string"==typeof e?e:e&&e.value||""},c.session.bgTokenizer);return e.$tokenizeRow=function(e){var t=c.data[e],i=[];if(!t)return i;(t="string"==typeof t?{value:t}:t).caption||(t.caption=t.value||t.name);for(var n,o,r=-1,s=0;s<t.caption.length;s++)o=t.caption[s],r!==(n=t.matchMask&1<<s?1:0)?(i.push({type:t.className||(n?"completion-highlight":""),value:o}),r=n):i[i.length-1].value+=o;return t.meta&&(e=c.renderer.$size.scrollerWidth/c.renderer.layerConfig.characterWidth,t.meta.length+t.caption.length<e-2&&i.push({type:"rightAlignedText",value:t.meta})),i},e.$updateOnChange=t,e.start=t,c.session.$computeWidth=function(){return this.screenWidth=0},c.$blockScrolling=1/0,c.isOpen=!1,c.isTopdown=!1,c.data=[],c.setData=function(e){c.data=e||[],c.setValue(h.stringRepeat("\n",e.length),-1),c.setRow(0)},c.getData=function(e){return c.data[e]},c.getRow=function(){return r.start.row},c.setRow=function(e){e=Math.max(-1,Math.min(this.data.length,e)),r.start.row!=e&&(c.selection.clearSelection(),r.start.row=r.end.row=e||0,c.session._emit("changeBackMarker"),c.moveCursorTo(e||0,0),c.isOpen&&c._signal("select"))},c.on("changeSelection",function(){c.isOpen&&c.setRow(c.selection.lead.row),c.renderer.scrollCursorIntoView()}),c.hide=function(){this.container.style.display="none",this._signal("hide"),c.isOpen=!1},c.show=function(e,t,i){var n=this.container,o=window.innerHeight,r=window.innerWidth,s=this.renderer.$maxLines*t*1.4,a=e.top+this.$borderSize,s=(o-t<a+s&&!i?(n.style.top="",n.style.bottom=o-a+"px",c.isTopdown=!1):(n.style.top=(a+=t)+"px",n.style.bottom="",c.isTopdown=!0),n.style.display="",this.renderer.$textLayer.checkForSizeChanges(),e.left);s+n.offsetWidth>r&&(s=r-n.offsetWidth),n.style.left=s+"px",this._signal("show"),l=null,c.isOpen=!0},c.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},c.$imageSize=0,c.$borderSize=1,c}}),ace.define("ace/autocomplete/util",["require","exports","module"],function(e,t,i){"use strict";t.parForEach=function(e,t,i){var n=0,o=e.length;0===o&&i();for(var r=0;r<o;r++)t(e[r],function(e,t){++n===o&&i(e,t)})};var r=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,i){i=i||r;for(var n=[],o=t-1;0<=o&&i.test(e[o]);o--)n.push(e[o]);return n.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,i){i=i||r;for(var n=[],o=t;o<e.length&&i.test(e[o]);o++)n.push(e[o]);return n}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],function(e,t,i){"use strict";function n(){this.autoInsert=!0,this.autoSelect=!0,this.exactMatch=!1,this.keyboardHandler=new o,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=s.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=s.delayedCall(this.updateDocTooltip.bind(this),50)}var o=e("./keyboard/hash_handler").HashHandler,r=e("./autocomplete/popup").AcePopup,c=e("./autocomplete/util"),s=(e("./lib/event"),e("./lib/lang")),a=e("./lib/dom"),l=e("./snippets").snippetManager,u=(!function(){this.gatherCompletionsId=0,this.$init=function(){return this.popup=new r(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(e,t,i){this.popup||this.$init(),this.popup.setData(this.completions.filtered);var n,o=e.renderer;this.popup.setRow(this.autoSelect?0:-1),i?t||this.detach():(this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize()),i=o.layerConfig.lineHeight,(t=o.$cursorLayer.getPixelPosition(this.base,!0)).left-=this.popup.getTextLeftOffset(),n=e.container.getBoundingClientRect(),t.top+=n.top-o.layerConfig.offset,t.left+=n.left-e.renderer.scrollLeft,t.left+=o.$gutterLayer.gutterWidth,this.popup.show(t,i))},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.popup&&this.popup.isOpen&&(this.gatherCompletionsId+=1,this.popup.hide()),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(e){var t=document.activeElement,i=this.editor.textInput.getElement();t!=i&&t.parentNode!=this.popup.container&&t!=this.tooltipNode&&e.relatedTarget!=this.tooltipNode&&e.relatedTarget!=i&&this.detach()},this.mousedownListener=function(e){this.detach()},this.mousewheelListener=function(e){this.detach()},this.goTo=function(e){var t=this.popup.getRow(),i=this.popup.session.getLength()-1;switch(e){case"up":t=t<=0?i:t-1;break;case"down":t=i<=t?-1:t+1;break;case"start":t=0;break;case"end":t=i}this.popup.setRow(t)},this.insertMatch=function(e){if(!(e=e||this.popup.getData(this.popup.getRow())))return!1;if(e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor,e);else{if(this.completions.filterText)for(var t,i=this.editor.selection.getAllRanges(),n=0;t=i[n];n++)t.start.column-=this.completions.filterText.length,this.editor.session.remove(t);e.snippet?l.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.detach()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Space:function(e){e.completer.detach(),e.insert(" ")},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(!0)},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(n,o){var r=n.getSession(),i=n.getCursorPosition(),e=r.getLine(i.row),s=c.retrievePrecedingIdentifier(e,i.column),a=(this.base=r.doc.createAnchor(i.row,i.column-s.length),this.base.$insertRight=!0,[]),l=n.completers.length;return n.completers.forEach(function(e,t){e.getCompletions(n,r,i,s,function(e,t){e||(a=a.concat(t));var e=n.getCursorPosition(),i=r.getLine(e.row);o(null,{prefix:c.retrievePrecedingIdentifier(i,e.column,t[0]&&t[0].identifierRegex),matches:a,finished:0==--l})})}),!0},this.showPopup=function(e){this.editor&&this.detach(),this.activated=!0,(this.editor=e).completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.keyBinding.addKeyboardHandler(this.keyboardHandler),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(r){var e;if(r&&this.base&&this.completions)return e=this.editor.getCursorPosition(),(e=this.editor.session.getTextRange({start:this.base,end:e}))==this.completions.filterText?void 0:(this.completions.setFilter(e),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=e||this.completions.filtered[0].snippet)?void this.openPopup(this.editor,e,r):this.detach());var s=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(e,t){var i=function(){if(t.finished)return this.detach()}.bind(this),n=t.prefix,o=t&&t.matches;if(!o||!o.length)return i();if(0===n.indexOf(t.prefix)&&s==this.gatherCompletionsId)return this.completions=new u(o),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(n),o=this.completions.filtered,o.length&&(1!=o.length||o[0].value!=n||o[0].snippet)?this.autoInsert&&1==o.length&&t.finished?this.insertMatch(o[0]):void this.openPopup(this.editor,n,r):i()}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var e=this.popup,t=e.data,i=t&&(t[e.getHoveredRow()]||t[e.getRow()]),n=null;return i&&this.editor&&this.popup.isOpen?(this.editor.completers.some(function(e){return n=e.getDocTooltip?e.getDocTooltip(i):n}),(n="string"==typeof(n=n||i)?{docText:n}:n)&&(n.docHTML||n.docText)?void this.showDocTooltip(n):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=a.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this));var t=this.tooltipNode,e=(e.docHTML?t.innerHTML=e.docHTML:e.docText&&(t.textContent=e.docText),t.parentNode||document.body.appendChild(t),this.popup),i=e.container.getBoundingClientRect();t.style.top=e.container.style.top,t.style.bottom=e.container.style.bottom,window.innerWidth-i.right<320?(t.style.right=window.innerWidth-i.left+"px",t.style.left=""):(t.style.left=i.right+1+"px",t.style.right=""),t.style.display="block"},this.hideDocTooltip=function(){var e;this.tooltipTimer.cancel(),this.tooltipNode&&(e=this.tooltipNode,this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e))}}.call(n.prototype),n.startCommand={name:"startAutocomplete",exec:function(e){e.completer||(e.completer=new n),e.completer.autoInsert=e.completer.autoSelect=!0,e.completer.showPopup(e),e.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"},function(e,t,i){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1});!function(){this.setFilter=function(e){t=e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0)?this.filtered:this.all,this.filterText=e,t=(t=this.filterCompletions(t,this.filterText)).sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var t,i=null;t=t.filter(function(e){e=e.snippet||e.caption||e.value;return e!==i&&(i=e,!0)}),this.filtered=t},this.filterCompletions=function(e,t){var i=[],n=t.toUpperCase(),o=t.toLowerCase();e:for(var r,s=0;r=e[s];s++){var a=r.value||r.caption||r.snippet;if(a){var l=-1,c=0,u=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue}else for(var d=0;d<t.length;d++){var h=a.indexOf(o[d],l+1),p=a.indexOf(n[d],l+1);if((h=0<=h&&(p<0||h<p)?h:p)<0)continue e;0<(p=h-l-1)&&(-1===l&&(u+=10),u+=p),c|=1<<h,l=h}r.matchMask=c,r.exactMatch=u?0:1,r.score=(r.score||0)-u,i.push(r)}}return i}}.call(u.prototype),t.Autocomplete=n,t.FilteredList=u}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t,i){var s=e("../range").Range,a=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function l(e,t){var i=e.getTextRange(s.fromPoints({row:0,column:0},t)).split(a).length-1,n=e.getValue().split(a),o=Object.create(null),r=n[i];return n.forEach(function(e,t){e&&e!==r&&(t=Math.abs(i-t),t=n.length-t,o[e]?o[e]=Math.max(t,o[e]):o[e]=t)}),o}t.getCompletions=function(e,t,i,n,o){var r=l(t,i);o(null,Object.keys(r).map(function(e){return{caption:e,value:e,score:r[e],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,t,i){"use strict";function n(e,t){f(t.session.$mode)}var a=e("../snippets").snippetManager,o=e("../autocomplete").Autocomplete,r=e("../config"),s=e("../lib/lang"),l=e("../autocomplete/util"),c=e("../autocomplete/text_completer"),u={getCompletions:function(e,t,i,n,o){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,i,n,o);e=e.session.getState(i.row);o(null,t.$mode.getCompletions(e,t,i,n))}},d={getCompletions:function(e,t,i,n,o){var r=a.snippetMap,s=[];a.getActiveScopes(e).forEach(function(e){for(var t=r[e]||[],i=t.length;i--;){var n=t[i],o=n.name||n.tabTrigger;o&&s.push({caption:o,snippet:n.content,meta:n.tabTrigger&&!n.name?n.tabTrigger+"‚á• ":"snippet",type:"snippet"})}},this),o(null,s)},getDocTooltip:function(e){"snippet"!=e.type||e.docHTML||(e.docHTML=["<b>",s.escapeHTML(e.caption),"</b>","<hr></hr>",s.escapeHTML(e.snippet)].join(""))}},h=[d,c,u],p=(t.setCompleters=function(e){h=e||[]},t.addCompleter=function(e){h.push(e)},t.textCompleter=c,t.keyWordCompleter=u,t.snippetCompleter=d,{name:"expandSnippet",exec:function(e){return a.expandWithTab(e)},bindKey:"Tab"}),f=function(e){var t=e.$id;a.files||(a.files={}),g(t),e.modes&&e.modes.forEach(f)},g=function(t){var e;t&&!a.files[t]&&(e=t.replace("mode","snippets"),a.files[t]={},r.loadModule(e,function(e){e&&(!(a.files[t]=e).snippets&&e.snippetText&&(e.snippets=a.parseSnippetFile(e.snippetText)),a.register(e.snippets||[],e.scope),e.includeScopes&&(a.snippetMap[e.scope].includeScopes=e.includeScopes,e.includeScopes.forEach(function(e){g("ace/mode/"+e)})))}))};function m(e){var t=e.getCursorPosition(),i=e.session.getLine(t.row),n=l.retrievePrecedingIdentifier(i,t.column);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!n&&e&&(n=l.retrievePrecedingIdentifier(i,t.column,e))})}),n}function v(e){var t=e.editor,i=(e.args,t.completer&&t.completer.activated);"backspace"===e.command.name?i&&!m(t)&&t.completer.detach():"insertstring"===e.command.name&&m(t)&&!i&&(t.completer||(t.completer=new o),t.completer.autoSelect=!1,t.completer.autoInsert=!1,t.completer.showPopup(t))}c=e("../editor").Editor;e("../config").defineOptions(c.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:h),this.commands.addCommand(o.startCommand)):this.commands.removeCommand(o.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:h),this.commands.on("afterExec",v)):this.commands.removeListener("afterExec",v)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(p),this.on("changeMode",n),n(0,this)):(this.commands.removeCommand(p),this.off("changeMode",n))},value:!1}})}),ace.require(["ace/ext/language_tools"],function(){}),!function(){var o,r,l,s,c,e,t,i=function(){return this}();i||"undefined"==typeof window||(i=window),"undefined"==typeof requirejs&&((o=function(e,t,i){"string"!=typeof e?o.original?o.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace()):(2==arguments.length&&(i=t),o.modules[e]||(o.payloads[e]=i,o.modules[e]=null))}).modules={},o.payloads={},r=function(e,t,i){if("string"==typeof t){var n=c(e,t);if(null!=n)return i&&i(),n}else if("[object Array]"===Object.prototype.toString.call(t)){for(var o=[],r=0,s=t.length;r<s;++r){var a=c(e,t[r]);if(null==a&&l.original)return;o.push(a)}return i&&i.apply(null,o)||!0}},l=function(e,t){var i=r("",e,t);return null==i&&l.original?l.original.apply(this,arguments):i},s=function(e,t){var i;if(-1!==t.indexOf("!"))return i=t.split("!"),s(e,i[0])+"!"+s(e,i[1]);if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&n!=t;){var n=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t},c=function(e,i){i=s(e,i);var t,n,e=o.modules[i];return e||("function"==typeof(e=o.payloads[i])&&(t={id:i,uri:"",exports:n={},packaged:!0},n=e(function(e,t){return r(i,e,t)},n,t)||t.exports,o.modules[i]=n,delete o.payloads[i]),e=o.modules[i]=n||e),e},t=i,(e="")&&(i[e]||(i[e]={}),t=i[e]),t.define&&t.define.packaged||(o.original=t.define,t.define=o,t.define.packaged=!0),t.require&&t.require.packaged||(l.original=t.require,t.require=l,t.require.packaged=!0))}(),define("ace/lib/fixoldbrowsers",["require","exports","module"],function(e,t,i){"use strict";"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}),define("ace/lib/useragent",["require","exports","module"],function(e,t,i){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var n="object"==typeof navigator?navigator:{},o=(/mac|win|linux/i.exec(n.platform)||["other"])[0].toLowerCase(),r=n.userAgent||"",n=n.appName||"";t.isWin="win"==o,t.isMac="mac"==o,t.isLinux="linux"==o,t.isIE="Microsoft Internet Explorer"==n||0<=n.indexOf("MSAppHost")?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=r.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(r.split(" Edge/")[1])||void 0,t.isAIR=0<=r.indexOf("AdobeAIR"),t.isAndroid=0<=r.indexOf("Android"),t.isChromeOS=0<=r.indexOf(" CrOS "),t.isIOS=/iPad|iPhone|iPod/.test(r)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid}),define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,r,t){"use strict";var s,i,e=e("./useragent"),a=(r.buildDom=function e(t,i,n){if("string"==typeof t&&t)return c=document.createTextNode(t),i&&i.appendChild(c),c;if(!Array.isArray(t))return t&&t.appendChild&&i&&i.appendChild(t),t;if("string"!=typeof t[0]||!t[0]){for(var o=[],r=0;r<t.length;r++){var s=e(t[r],i,n);s&&o.push(s)}return o}for(var a=document.createElement(t[0]),l=t[1],c=1,r=c=l&&"object"==typeof l&&!Array.isArray(l)?2:c;r<t.length;r++)e(t[r],a,n);return 2==c&&Object.keys(l).forEach(function(e){var t=l[e];"class"===e?a.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e||"$"==e[0]?a[e]=t:"ref"===e?n&&(n[t]=a):"style"===e?"string"==typeof t&&(a.style.cssText=t):null!=t&&a.setAttribute(e,t)}),i&&i.appendChild(a),a},r.getDocumentHead=function(e){return(e=e||document).head||e.getElementsByTagName("head")[0]||e.documentElement},r.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},r.removeChildren=function(e){e.innerHTML=""},r.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},r.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},r.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},r.addCssClass=function(e,t){r.hasCssClass(e,t)||(e.className+=" "+t)},r.removeCssClass=function(e,t){for(var i=e.className.split(/\s+/g);;){var n=i.indexOf(t);if(-1==n)break;i.splice(n,1)}e.className=i.join(" ")},r.toggleCssClass=function(e,t){for(var i=e.className.split(/\s+/g),n=!0;;){var o=i.indexOf(t);if(-1==o)break;n=!1,i.splice(o,1)}return n&&i.push(t),e.className=i.join(" "),n},r.setCssClass=function(e,t,i){i?r.addCssClass(e,t):r.removeCssClass(e,t)},r.hasCssString=function(e,t){var i,n=0;if(i=(t=t||document).querySelectorAll("style"))for(;n<i.length;)if(i[n++].id===e)return!0},[]);function l(){var e=a;a=null,e&&e.forEach(function(e){n(e[0],e[1])})}function n(e,t,i){if("undefined"!=typeof document){if(a)if(i)l();else if(!1===i)return a.push([e,t]);if(!s){var n=i,i=(n=i&&i.getRootNode&&(n=i.getRootNode())&&n!=i?n:document).ownerDocument||n;if(t&&r.hasCssString(t,n))return null;t&&(e+="\n/*# sourceURL=ace/css/"+t+" */");var o=r.createElement("style");o.appendChild(i.createTextNode(e)),t&&(o.id=t),(n=n==i?r.getDocumentHead(i):n).appendChild(o)}}}r.useStrictCSP=function(e){0==(s=e)?l():a=a||[]},r.importCssString=n,r.importCssStylsheet=function(e,t){r.buildDom(["link",{rel:"stylesheet",href:e}],r.getDocumentHead(t))},r.scrollbarWidth=function(e){var t=r.createElement("ace_inner"),i=(t.style.width="100%",t.style.minWidth="0px",t.style.height="200px",t.style.display="block",r.createElement("ace_outer")),n=i.style,e=(n.position="absolute",n.left="-10000px",n.overflow="hidden",n.width="200px",n.minWidth="0px",n.height="150px",n.display="block",i.appendChild(t),e.documentElement),o=(e.appendChild(i),t.offsetWidth),n=(n.overflow="scroll",t.offsetWidth);return o==n&&(n=i.clientWidth),e.removeChild(i),o-n},r.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},r.setStyle=function(e,t,i){e[t]!==i&&(e[t]=i)},r.HAS_CSS_ANIMATION=!1,r.HAS_CSS_TRANSFORMS=!1,r.HI_DPI=!e.isWin||"undefined"!=typeof window&&1.5<=window.devicePixelRatio,e.isChromeOS&&(r.HI_DPI=!1),"undefined"!=typeof document&&(i=document.createElement("div"),r.HI_DPI&&void 0!==i.style.transform&&(r.HAS_CSS_TRANSFORMS=!0),e.isEdge||void 0===i.style.animationName||(r.HAS_CSS_ANIMATION=!0),i=null),r.HAS_CSS_TRANSFORMS?r.translate=function(e,t,i){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(i)+"px)"}:r.translate=function(e,t,i){e.style.top=Math.round(i)+"px",e.style.left=Math.round(t)+"px"}}),define("ace/lib/oop",["require","exports","module"],function(e,i,t){"use strict";i.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},i.mixin=function(e,t){for(var i in t)e[i]=t[i];return e},i.implement=function(e,t){i.mixin(e,t)}}),define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,i){"use strict";var r=e("./oop"),n=function(){var e,t,i={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in i.FUNCTION_KEYS)e=i.FUNCTION_KEYS[t].toLowerCase(),i[e]=parseInt(t,10);for(t in i.PRINTABLE_KEYS)e=i.PRINTABLE_KEYS[t].toLowerCase(),i[e]=parseInt(t,10);r.mixin(i,i.MODIFIER_KEYS),r.mixin(i,i.PRINTABLE_KEYS),r.mixin(i,i.FUNCTION_KEYS),i.enter=i.return,i.escape=i.esc,i.del=i.delete,i[173]="-";for(var n=["cmd","ctrl","alt","shift"],o=Math.pow(2,n.length);o--;)i.KEY_MODS[o]=n.filter(function(e){return o&i.KEY_MODS[e]}).join("-")+"-";return i.KEY_MODS[0]="",i.KEY_MODS[-1]="input-",i}();r.mixin(t,n),t.keyCodeToString=function(e){var t=n[e];return(t="string"!=typeof t?String.fromCharCode(e):t).toLowerCase()}}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,d,t){"use strict";var i,r=e("./keys"),h=e("./useragent"),s=null,a=0;function o(){if(null==i){i=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){i={passive:!1}}})}catch(e){}}return i}function l(e,t,i){this.elem=e,this.type=t,this.callback=i}l.prototype.destroy=function(){f(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};function c(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}var u,p=d.addListener=function(e,t,i,n){e.addEventListener(t,i,o()),n&&n.$toDestroy.push(new l(e,t,i))},f=d.removeListener=function(e,t,i){e.removeEventListener(t,i,o())};d.stopEvent=function(e){return d.stopPropagation(e),d.preventDefault(e),!1},d.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},d.preventDefault=function(e){e.preventDefault&&e.preventDefault()},d.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||h.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},d.capture=function(e,t,i){var n=e&&e.ownerDocument||document;function o(e){t&&t(e),i&&i(e),f(n,"mousemove",t),f(n,"mouseup",o),f(n,"dragstart",o)}return p(n,"mousemove",t),p(n,"mouseup",o),p(n,"dragstart",o),o},d.addMouseWheelListener=function(e,t,i){"onmousewheel"in e?p(e,"mousewheel",function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),t(e)},i):"onwheel"in e?p(e,"wheel",function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}t(e)},i):p(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),t(e)},i)},d.addMultiMouseDownListener=function(e,i,n,o,t){var r,s,a,l=0,c={2:"dblclick",3:"tripleclick",4:"quadclick"};function u(e){var t;if(0!==d.getButton(e)?l=0:1<e.detail&&!(4<++l)||(l=1),h.isIE&&(t=5<Math.abs(e.clientX-r)||5<Math.abs(e.clientY-s),a&&!t||(l=1),a&&clearTimeout(a),a=setTimeout(function(){a=null},i[l-1]||600),1==l&&(r=e.clientX,s=e.clientY)),e._clicks=l,n[o]("mousedown",e),4<l)l=0;else if(1<l)return n[o](c[l],e)}(e=Array.isArray(e)?e:[e]).forEach(function(e){p(e,"mousedown",u,t)})};function g(e,t,i){var n=c(t);if(!h.isMac&&s){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(n|=8),s.altGr){if(3==(3&n))return;s.altGr=0}18!==i&&17!==i||(o="location"in t?t.location:t.keyLocation,17===i&&1===o?1==s[i]&&(a=t.timeStamp):18===i&&3===n&&2===o&&t.timeStamp-a<50&&(s.altGr=!0))}if(i in r.MODIFIER_KEYS&&(i=-1),!n&&13===i){var o="location"in t?t.location:t.keyLocation;if(3===o&&(e(t,n,-i),t.defaultPrevented))return}if(h.isChromeOS&&8&n){if(e(t,n,i),t.defaultPrevented)return;n&=-9}return!!(n||i in r.FUNCTION_KEYS||i in r.PRINTABLE_KEYS)&&e(t,n,i)}function m(){s=Object.create(null)}d.getModifierString=function(e){return r.KEY_MODS[c(e)]},d.addCommandKeyListener=function(e,i,t){var n,o;h.isOldGecko||h.isOpera&&!("KeyboardEvent"in window)?(n=null,p(e,"keydown",function(e){n=e.keyCode},t),p(e,"keypress",function(e){return g(i,e,n)},t)):(o=null,p(e,"keydown",function(e){s[e.keyCode]=(s[e.keyCode]||0)+1;var t=g(i,e,e.keyCode);return o=e.defaultPrevented,t},t),p(e,"keypress",function(e){o&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(d.stopEvent(e),o=null)},t),p(e,"keyup",function(e){s[e.keyCode]=null},t),s||(m(),p(window,"focus",m)))},"object"==typeof window&&window.postMessage&&!h.isOldIE&&(u=1,d.nextTick=function(t,i){i=i||window;function n(e){e.data==o&&(d.stopPropagation(e),f(i,"message",n),t())}var o="zero-timeout-message-"+u++;p(i,"message",n),i.postMessage(o,"*")}),d.$idleBlocked=!1,d.onIdle=function(t,e){return setTimeout(function e(){d.$idleBlocked?setTimeout(e,100):t()},e)},d.$idleBlockId=null,d.blockIdle=function(e){d.$idleBlockId&&clearTimeout(d.$idleBlockId),d.$idleBlocked=!0,d.$idleBlockId=setTimeout(function(){d.$idleBlocked=!1},e||100)},d.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),d.nextFrame?d.nextFrame=d.nextFrame.bind(window):d.nextFrame=function(e){setTimeout(e,17)}}),define("ace/range",["require","exports","module"],function(e,t,i){"use strict";function r(e,t,i,n){this.start={row:e,column:t},this.end={row:i,column:n}}!function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t=e.end,e=e.start,t=this.compare(t.row,t.column);return 1==t?1==(t=this.compare(e.row,e.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(e.row,e.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){e=this.compareRange(e);return-1==e||0==e||1==e},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row!==e||t<=this.end.column?0:1:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){var i,n;return this.end.row>t?i={row:t+1,column:0}:this.end.row<e&&(i={row:e,column:0}),this.start.row>t?n={row:t+1,column:0}:this.start.row<e&&(n={row:e,column:0}),r.fromPoints(n||this.start,i||this.end)},this.extend=function(e,t){var i,n,o=this.compare(e,t);return 0==o?this:(-1==o?i={row:e,column:t}:n={row:e,column:t},r.fromPoints(i||this.start,n||this.end))},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),e=e.documentToScreenPosition(this.end);return new r(t.row,t.column,e.row,e.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}.call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=r}),define("ace/lib/lang",["require","exports","module"],function(e,t,i){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var i="";0<t;)1&t&&(i+=e),(t>>=1)&&(e+=e);return i};var n=/^\s\s*/,o=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(n,"")},t.stringTrimRight=function(e){return e.replace(o,"")},t.copyObject=function(e){var t,i={};for(t in e)i[t]=e[t];return i},t.copyArray=function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[i]&&"object"==typeof e[i]?t[i]=this.copyObject(e[i]):t[i]=e[i];return t},t.deepCopy=function e(t){if("object"!=typeof t||!t)return t;if(Array.isArray(t)){for(var i=[],n=0;n<t.length;n++)i[n]=e(t[n]);return i}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(n in i={},t)i[n]=e(t[n]);return i},t.arrayToMap=function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=1;return t},t.createMap=function(e){var t,i=Object.create(null);for(t in e)i[t]=e[t];return i},t.arrayRemove=function(e,t){for(var i=0;i<=e.length;i++)t===e[i]&&e.splice(i,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var i=[];return e.replace(t,function(e){i.push({offset:arguments[arguments.length-2],length:e.length})}),i},t.deferredCall=function(e){function t(){n=null,e()}function i(e){return i.cancel(),n=setTimeout(t,e||0),i}var n=null;return(i.schedule=i).call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(n),n=null,i},i.isPending=function(){return n},i},t.delayedCall=function(e,t){function i(){o=null,e()}function n(e){null==o&&(o=setTimeout(i,e||t))}var o=null;return n.delay=function(e){o&&clearTimeout(o),o=setTimeout(i,e||t)},(n.schedule=n).call=function(){this.cancel(),e()},n.cancel=function(){o&&clearTimeout(o),o=null},n.isPending=function(){return o},n}}),define("ace/clipboard",["require","exports","module"],function(e,t,i){"use strict";var n;i.exports={lineMode:!1,pasteCancelled:function(){return!!(n&&n>Date.now()-50)||(n=!1)},cancel:function(){n=Date.now()}}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,i){"use strict";var P=e("../lib/event"),G=e("../lib/useragent"),B=e("../lib/dom"),W=e("../lib/lang"),H=e("../clipboard"),V=G.isChrome<18,j=G.isIE,z=63<G.isChrome,U=e("../lib/keys"),Y=U.KEY_MODS,q=G.isIOS,K=q?/\s/:/\n/,X=G.isMobile;t.TextInput=function(e,d){var h=B.createElement("textarea"),r=(h.className="ace_text-input",h.setAttribute("wrap","off"),h.setAttribute("autocorrect","off"),h.setAttribute("autocapitalize","off"),h.setAttribute("spellcheck",!1),h.style.opacity="0",e.insertBefore(h,e.firstChild),!1),p=!1,s=!1,f=!1,a="",g=(X||(h.style.fontSize="1px"),!1),t=!1,m="",v=0,y=0,b=0;try{var l=document.activeElement===h}catch(e){}P.addListener(h,"blur",function(e){t||(d.onBlur(e),l=!1)},d),P.addListener(h,"focus",function(e){if(!t){if(l=!0,G.isEdge)try{if(!document.hasFocus())return}catch(e){}d.onFocus(e),G.isEdge?setTimeout(w):w()}},d),this.$focusScroll=!1,this.focus=function(){if(a||z||"browser"==this.$focusScroll)return h.focus({preventScroll:!0});var e=h.style.top;h.style.position="fixed",h.style.top="0px";try{var t=0!=h.getBoundingClientRect().top}catch(e){return}var i=[];if(t)for(var n=h.parentElement;n&&1==n.nodeType;)i.push(n),n.setAttribute("ace_nocontext",!0),n=!n.parentElement&&n.getRootNode?n.getRootNode().host:n.parentElement;h.focus({preventScroll:!0}),t&&i.forEach(function(e){e.removeAttribute("ace_nocontext")}),setTimeout(function(){h.style.position="","0px"==h.style.top&&(h.style.top=e)},0)},this.blur=function(){h.blur()},this.isFocused=function(){return l},d.on("beforeEndOperation",function(){var e=d.curOp,t=e&&e.command&&e.command.name;"insertstring"!=t&&(t=t&&(e.docChanged||e.selectionChanged),s&&t&&(m=h.value="",S()),w())});function i(e){E(e,!0)}function n(e){E(e,!1)}function o(e){var t=A(e);H.pasteCancelled()||("string"==typeof t?(t&&d.onPaste(t,e),G.isIE&&setTimeout(w),P.preventDefault(e)):(h.value="",p=!0))}var w=q?function(e){var t;!l||r&&!e||f||((t="\n ab"+(e=e||"")+"cde fg\n")!=h.value&&(h.value=m=t),t=4+(e.length||(d.selection.isEmpty()?0:1)),4==v&&y==t||h.setSelectionRange(4,t),v=4,y=t)}:function(){if(!s&&!f&&(l||C)){s=!0;var e,t,i=0,n=0,o="",r=(d.session&&(r=(e=d.selection).getRange(),e=e.cursor.row,i=r.start.column,n=r.end.column,o=d.session.getLine(e),r.start.row!=e?(t=d.session.getLine(e-1),i=r.start.row<e-1?0:i,n+=t.length+1,o=t+"\n"+o):r.end.row!=e?(t=d.session.getLine(e+1),n=r.end.row>e+1?t.length:n,n+=o.length+1,o=o+"\n"+t):X&&0<e&&(o="\n"+o,n+=1,i+=1),400<o.length&&(i<400&&n<400?o=o.slice(0,400):(o="\n",i==n?i=n=0:(i=0,n=1)))),o+"\n\n");if(r!=m&&(h.value=m=r,v=y=r.length),C&&(v=h.selectionStart,y=h.selectionEnd),y!=n||v!=i||h.selectionEnd!=y)try{h.setSelectionRange(i,n),v=i,y=n}catch(e){}s=!1}},$=(this.resetSelection=w,l&&d.onFocus(),function(e){return 0===e.selectionStart&&e.selectionEnd>=m.length&&e.value===m&&m&&e.selectionEnd!==y}),c=null,C=(this.setInputHandler=function(e){c=e},!(this.getInputHandler=function(){return c})),u=function(e,t){if(C=C&&!1,p)return w(),e&&d.onPaste(e),p=!1,"";for(var i=h.selectionStart,n=h.selectionEnd,o=v,r=m.length-y,s=e,a=e.length-i,l=e.length-n,c=0;0<o&&m[c]==e[c];)c++,o--;for(s=s.slice(c),c=1;0<r&&m.length-c>v-1&&m[m.length-c]==e[e.length-c];)c++,r--;a-=c-1,l-=c-1;var u=s.length-c+1;if(u<0&&(o=-u,u=0),s=s.slice(0,u),!(t||s||a||o||r||l))return"";u=!(f=!0);return G.isAndroid&&". "==s&&(s="  ",u=!0),s&&!o&&!r&&!a&&!l||g?d.onTextInput(s):d.onTextInput(s,{extendLeft:o,extendRight:r,restoreStart:a,restoreEnd:l}),f=!1,m=e,v=i,y=n,b=l,u?"\n":s},_=function(e){if(s)return x();if(e&&e.inputType){if("historyUndo"==e.inputType)return d.execCommand("undo");if("historyRedo"==e.inputType)return d.execCommand("redo")}var e=h.value,t=u(e,!0);(500<e.length||K.test(t)||X&&v<1&&v==y)&&w()},A=function(e,t,i){var n=e.clipboardData||window.clipboardData;if(n&&!V){var o=j||i?"Text":"text/plain";try{return t?!1!==n.setData(o,t):n.getData(o)}catch(e){if(!i)return A(e,t,!0)}}},E=function(e,t){var i=d.getCopyText();if(!i)return P.preventDefault(e);A(e,i)?(q&&(w(i),r=i,setTimeout(function(){r=!1},10)),t?d.onCut():d.onCopy(),P.preventDefault(e)):(r=!0,h.value=i,h.select(),setTimeout(function(){r=!1,w(),t?d.onCut():d.onCopy()}))},x=(P.addCommandKeyListener(h,d.onCommandKey.bind(d),d),P.addListener(h,"select",function(e){s||(r?r=!1:$(h)?(d.selectAll(),w()):X&&h.selectionStart!=v&&w())},d),P.addListener(h,"input",_,d),P.addListener(h,"cut",i,d),P.addListener(h,"copy",n,d),P.addListener(h,"paste",o,d),"oncut"in h&&"oncopy"in h&&"onpaste"in h||P.addListener(e,"keydown",function(e){if((!G.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:n(e);break;case 86:o(e);break;case 88:i(e)}},d),function(){var e;if(s&&d.onCompositionUpdate&&!d.$readOnly)return g?T():void(s.useTextareaForIME?d.onCompositionUpdate(h.value):(e=h.value,u(e),s.markerRange&&(s.context&&(s.markerRange.start.column=s.selectionStart=s.context.compositionStartOffset),s.markerRange.end.column=s.markerRange.start.column+y-s.selectionStart+b)))}),S=function(e){d.onCompositionEnd&&!d.$readOnly&&(s=!1,d.onCompositionEnd(),d.off("mousedown",T),e&&_())};function T(){t=!0,h.blur(),h.focus(),t=!1}var k,D=W.delayedCall(x,50).schedule.bind(null,null);function R(){clearTimeout(k),k=setTimeout(function(){a&&(h.style.cssText=a,a=""),d.renderer.$isMousePressed=!1,d.renderer.$keepTextAreaAtCursor&&d.renderer.$moveTextAreaToCursor()},0)}P.addListener(h,"compositionstart",function(e){s||!d.onCompositionStart||d.$readOnly||(s={},g||(e.data&&(s.useTextareaForIME=!1),setTimeout(x,0),d._signal("compositionStart"),d.on("mousedown",T),(e=d.getSelectionRange()).end.row=e.start.row,e.end.column=e.start.column,s.markerRange=e,s.selectionStart=v,d.onCompositionStart(s),s.useTextareaForIME?(m=h.value="",y=v=0):(h.msGetInputContext&&(s.context=h.msGetInputContext()),h.getInputContext&&(s.context=h.getInputContext()))))},d),P.addListener(h,"compositionupdate",x,d),P.addListener(h,"keyup",function(e){27==e.keyCode&&h.value.length<h.selectionStart&&(s||(m=h.value),v=y=-1,w()),D()},d),P.addListener(h,"keydown",D,d),P.addListener(h,"compositionend",S,d),this.getElement=function(){return h},this.setCommandMode=function(e){g=e,h.readOnly=!1},this.setReadOnly=function(e){g||(h.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){C=!0,w(),d._emit("nativecontextmenu",{target:d,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,t){a=a||h.style.cssText,h.style.cssText=(t?"z-index:100000;":"")+(G.isIE?"opacity:0.1;":"")+"text-indent: -"+(v+y)*d.renderer.characterWidth*.5+"px;";function i(e){B.translate(h,e.clientX-r-2,Math.min(e.clientY-o-2,s))}var t=d.container.getBoundingClientRect(),n=B.computedStyle(d.container),o=t.top+(parseInt(n.borderTopWidth)||0),r=t.left+(parseInt(t.borderLeftWidth)||0),s=t.bottom-o-h.clientHeight-2;i(e),"mousedown"==e.type&&(d.renderer.$isMousePressed=!0,clearTimeout(k),G.isWin&&P.capture(d.container,i,R))},this.onContextMenuClose=R;function O(e){d.textInput.onContextMenu(e),R()}if(P.addListener(h,"mouseup",O,d),P.addListener(h,"mousedown",function(e){e.preventDefault(),R()},d),P.addListener(d.renderer.scroller,"contextmenu",O,d),P.addListener(h,"contextmenu",O,d),q){var F=d,L=h;function I(e){var t,i,n,o;document.activeElement!==L||N||s||F.$mouseHandler.isMousePressed||r||(t=L.selectionStart,i=L.selectionEnd,n=null,(o=0)==t?n=U.up:1==t?n=U.home:y<i&&"\n"==m[i]?n=U.end:t<v&&" "==m[t-1]?(n=U.left,o=Y.option):t<v||t==v&&y!=v&&t==i?n=U.left:y<i&&2<m.slice(0,i).split("\n").length?n=U.down:y<i&&" "==m[i-1]?(n=U.right,o=Y.option):(y<i||i==y&&y!=v&&t==i)&&(n=U.right),t!==i&&(o|=Y.shift),n&&(!F.onCommandKey({},o,n)&&F.commands&&(n=U.keyCodeToString(n),(o=F.commands.findKeyCommand(o,n))&&F.execCommand(o)),v=t,y=i,w("")))}var M=null,N=!1;L.addEventListener("keydown",function(e){M&&clearTimeout(M),N=!0},!0),L.addEventListener("keyup",function(e){M=setTimeout(function(){N=!1},100)},!0),document.addEventListener("selectionchange",I),F.on("destroy",function(){document.removeEventListener("selectionchange",I)})}},t.$setUserAgentForTests=function(e,t){X=e,q=t}}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,i){"use strict";var r=e("../lib/useragent");function n(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(e){t[e]=this[e]},this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function s(e,t){return(e.start.row==e.end.row?2*t.column-e.start.column-e.end.column:e.start.row!=e.end.row-1||e.start.column||e.end.column?2*t.row-e.start.row-e.end.row:t.column-4)<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}!function(){this.onMouseDown=function(e){var t=e.inSelection(),i=e.getDocumentPosition(),n=(this.mousedownEvent=e,this.editor),o=e.getButton();return 0!==o?(!n.getSelectionRange().isEmpty()&&1!=o||n.selection.moveToPosition(i),void(2==o&&(n.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||n.isFocused()||(n.focus(),!this.$focusTimeout||this.$clickSelection||n.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(i,1<e.domEvent._clicks),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var i=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?i.selection.selectToPosition(e):t||i.selection.moveToPosition(e),t||this.select(),i.renderer.scroller.setCapture&&i.renderer.scroller.setCapture(),i.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,i=t.renderer.screenToTextCoordinates(this.x,this.y);this.$clickSelection&&(e=-1==(e=this.$clickSelection.comparePoint(i))?this.$clickSelection.end:1==e?this.$clickSelection.start:(i=(e=s(this.$clickSelection,i)).cursor,e.anchor),t.selection.setSelectionAnchor(e.row,e.column)),t.selection.selectToPosition(i),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,i,n,o=this.editor,r=o.renderer.screenToTextCoordinates(this.x,this.y),e=o.selection[e](r.row,r.column);this.$clickSelection&&(i=this.$clickSelection.comparePoint(e.start),t=this.$clickSelection.comparePoint(e.end),-1==i&&t<=0?(n=this.$clickSelection.end,e.end.row==r.row&&e.end.column==r.column||(r=e.start)):1==t&&0<=i?(n=this.$clickSelection.start,e.start.row==r.row&&e.start.column==r.column||(r=e.end)):n=-1==i&&1==t?(r=e.end,e.start):(r=(i=s(this.$clickSelection,r)).cursor,i.anchor),o.selection.setSelectionAnchor(n.row,n.column)),o.selection.selectToPosition(r),o.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){n=this.mousedownEvent.x,e=this.mousedownEvent.y,i=this.x,t=this.y;var e,t,i=Math.sqrt(Math.pow(i-n,2)+Math.pow(t-e,2)),n=Date.now();(0<i||n-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var e=e.getDocumentPosition(),t=this.editor,i=t.session.getBracketRange(e);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=t.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var e=e.getDocumentPosition(),t=this.editor,i=(this.setState("selectByLines"),t.getSelectionRange());i.isMultiLine()&&i.contains(e.row,e.column)?(this.$clickSelection=t.selection.getLineRange(i.start.row),this.$clickSelection.end=t.selection.getLineRange(i.end.row).end):this.$clickSelection=t.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){var t,i,n,o,r,s,a;if(!e.getAccelKey())return e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0),t=this.editor,this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0}),i=this.$lastScroll,n=e.domEvent.timeStamp,s=n-i.t,o=s?e.wheelX/s:i.vx,r=s?e.wheelY/s:i.vy,s<550&&(o=(o+i.vx)/2,r=(r+i.vy)/2),s=Math.abs(o/r),a=!1,1<=s&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(a=!0),(a=s<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)?!0:a)?i.allowed=n:n-i.allowed<550&&(Math.abs(o)<=1.5*Math.abs(i.vx)&&Math.abs(r)<=1.5*Math.abs(i.vy)?(a=!0,i.allowed=n):i.allowed=0),i.t=n,i.vx=o,i.vy=r,a?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}.call(n.prototype),t.DefaultHandlers=n}),define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,i){"use strict";e("./lib/oop");var n=e("./lib/dom");function o(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}!function(){this.$init=function(){return this.$element=n.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){n.addCssClass(this.getElement(),e)},this.show=function(e,t,i){null!=e&&this.setText(e),null!=t&&null!=i&&this.setPosition(t,i),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}.call(o.prototype),t.Tooltip=o}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,i){"use strict";var d=e("../lib/dom"),n=e("../lib/oop"),h=e("../lib/event"),s=e("../tooltip").Tooltip;function p(e){s.call(this,e)}n.inherits(p,s),function(){this.setPosition=function(e,t){var i=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,o=this.getWidth(),r=this.getHeight();i<(e+=15)+o&&(e-=e+o-i),n<(t+=15)+r&&(t-=20+r),s.prototype.setPosition.call(this,e,t)}}.call(p.prototype),t.GutterHandler=function(n){var i,o,r,s=n.editor,a=s.renderer.$gutterLayer,l=new p(s.container);function c(){i=i&&clearTimeout(i),r&&(l.hide(),r=null,s._signal("hideGutterTooltip",l),s.off("mousewheel",c))}function u(e){l.setPosition(e.x,e.y)}n.editor.setDefaultHandler("guttermousedown",function(e){if(s.isFocused()&&0==e.getButton()){var t=a.getRegion(e);if("foldWidgets"!=t){var t=e.getDocumentPosition().row,i=s.session.selection;if(e.getShiftKey())i.selectTo(t,0);else{if(2==e.domEvent.detail)return s.selectAll(),e.preventDefault();n.$clickSelection=s.selection.getLineRange(t)}return n.setState("selectByLines"),n.captureMouse(e),e.preventDefault()}}}),n.editor.setDefaultHandler("guttermousemove",function(e){var t=e.domEvent.target||e.domEvent.srcElement;if(d.hasCssClass(t,"ace_fold-widget"))return c();r&&n.$tooltipFollowsMouse&&u(e),o=e,i=i||setTimeout(function(){i=null,(o&&!n.isMousePressed?function(){var e=o.getDocumentPosition().row,t=a.$annotations[e];if(!t)return c();if(e==s.session.getLength()){var e=s.renderer.pixelToScreenCoordinates(0,o.y).row,i=o.$pos;if(e>s.session.documentToScreenRow(i.row,i.column))return c()}r!=t&&(r=t.text.join("<br/>"),l.setHtml(r),l.show(),s._signal("showGutterTooltip",l),s.on("mousewheel",c),n.$tooltipFollowsMouse?u(o):(e=o.domEvent.target.getBoundingClientRect(),(i=l.getElement().style).left=e.right+"px",i.top=e.bottom+"px"))}:c)()},50)}),h.addListener(s.renderer.$gutter,"mouseout",function(e){o=null,r&&!i&&(i=setTimeout(function(){i=null,c()},50))},s),s.on("changeSession",c)}}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict";var n=e("../lib/event"),o=e("../lib/useragent"),e=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};!function(){this.stopPropagation=function(){n.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){n.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e,t=this.editor.getSelectionRange();return t.isEmpty()?this.$inSelection=!1:(e=this.getDocumentPosition(),this.$inSelection=t.contains(e.row,e.column)),this.$inSelection},this.getButton=function(){return n.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=o.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}.call(e.prototype)}),define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict";var A=e("../lib/dom"),E=e("../lib/event"),x=e("../lib/useragent");function n(t){var i,c,u,e,n,d,o,r,h,p,f,g=t.editor,s=A.createElement("div"),a=(s.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",s.textContent="¬†",["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(e){t[e]=this[e]},this),g.on("mousedown",this.onMouseDown.bind(t)),g.container),l=0;function m(){var e,t,i,n,o,r,s,a,l=d;d=g.renderer.screenToTextCoordinates(c,u),i=d,t=l,n=Date.now(),e=!t||i.row!=t.row,t=!t||i.column!=t.column,!p||e||t?(g.moveCursorToPosition(i),p=n,f={x:c,y:u}):5<S(f.x,f.y,c,u)?p=null:200<=n-p&&(g.renderer.scrollCursorIntoView(),p=null),e=d,t=l,i=Date.now(),n=g.renderer.layerConfig.lineHeight,l=g.renderer.layerConfig.characterWidth,o=g.renderer.scroller.getBoundingClientRect(),o={x:{left:c-o.left,right:o.right-c},y:{top:u-o.top,bottom:o.bottom-u}},r=Math.min(o.x.left,o.x.right),s=Math.min(o.y.top,o.y.bottom),a={row:e.row,column:e.column},r/l<=2&&(a.column+=o.x.left<o.x.right?-3:2),s/n<=1&&(a.row+=o.y.top<o.y.bottom?-1:1),r=e.row!=a.row,l=e.column!=a.column,s=!t||e.row!=t.row,r||l&&!s?h?200<=i-h&&g.renderer.scrollCursorIntoView(a):h=i:h=null}function v(){n=g.selection.toOrientedRange(),i=g.session.addMarker(n,"ace_selection",g.getSelectionStyle()),g.clearSelection(),g.isFocused()&&g.renderer.$cursorLayer.setBlinking(!1),clearInterval(e),m(),e=setInterval(m,20),l=0,E.addListener(document,"mousemove",w)}function y(){clearInterval(e),g.session.removeMarker(i),i=null,g.selection.fromOrientedRange(n),g.isFocused()&&!r&&g.$resetCursorStyle(),l=0,p=h=d=n=null,E.removeListener(document,"mousemove",w)}this.onDragStart=function(e){var t;if(this.cancelDrag||!a.draggable)return t=this,setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault();n=g.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=g.getReadOnly()?"copy":"copyMove",g.container.appendChild(s),i.setDragImage&&i.setDragImage(s,0,0),setTimeout(function(){g.container.removeChild(s)}),i.clearData(),i.setData("Text",g.session.getTextRange()),r=!0,this.setState("drag")},this.onDragEnd=function(e){a.draggable=!1,r=!1,this.setState(null),g.getReadOnly()||(e=e.dataTransfer.dropEffect,o||"move"!=e||g.session.remove(g.getSelectionRange()),g.$resetCursorStyle()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!g.getReadOnly()&&C(e.dataTransfer))return c=e.clientX,u=e.clientY,i||v(),l++,e.dataTransfer.dropEffect=o=_(e),E.preventDefault(e)},this.onDragOver=function(e){if(!g.getReadOnly()&&C(e.dataTransfer))return c=e.clientX,u=e.clientY,i||(v(),l++),null!==b&&(b=null),e.dataTransfer.dropEffect=o=_(e),E.preventDefault(e)},this.onDragLeave=function(e){if(--l<=0&&i)return y(),o=null,E.preventDefault(e)},this.onDrop=function(e){if(d){var t=e.dataTransfer;if(r)switch(o){case"move":n=n.contains(d.row,d.column)?{start:d,end:d}:g.moveText(n,d);break;case"copy":n=g.moveText(n,d,!0)}else{t=t.getData("Text");n={start:d,end:g.session.insert(d,t)},g.focus(),o=null}return y(),E.preventDefault(e)}},E.addListener(a,"dragstart",this.onDragStart.bind(t),g),E.addListener(a,"dragend",this.onDragEnd.bind(t),g),E.addListener(a,"dragenter",this.onDragEnter.bind(t),g),E.addListener(a,"dragover",this.onDragOver.bind(t),g),E.addListener(a,"dragleave",this.onDragLeave.bind(t),g),E.addListener(a,"drop",this.onDrop.bind(t),g);var b=null;function w(){null==b&&(b=setTimeout(function(){null!=b&&i&&y()},20))}function C(e){e=e.types;return!e||Array.prototype.some.call(e,function(e){return"text/plain"==e||"Text"==e})}function _(e){var t=["copy","copymove","all","uninitialized"],i=x.isMac?e.altKey:e.ctrlKey,n="uninitialized";try{n=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return i&&0<=t.indexOf(n)?o="copy":0<=["move","copymove","linkmove","all","uninitialized"].indexOf(n)?o="move":0<=t.indexOf(n)&&(o="copy"),o}}function S(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))}!function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor,t=(e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging"),x.isWin?"default":"move");e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;x.isIE&&"dragReady"==this.state&&3<S(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&t.dragDrop(),"dragWait"===this.state&&0<S(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(e){var t,i,n;this.$dragEnabled&&(this.mousedownEvent=e,t=this.editor,i=e.inSelection(),n=e.getButton(),1!==(e.domEvent.detail||1)||0!==n||!i||e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey())||(this.mousedownEvent.time=Date.now(),"unselectable"in(n=e.domEvent.target||e.domEvent.srcElement)&&(n.unselectable="on"),t.getDragDelay()?(x.isWebKit&&(this.cancelDrag=!0,t.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0))}}.call(n.prototype),t.DragdropHandler=n}),define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,i){"use strict";var E=e("./mouse_event").MouseEvent,n=e("../lib/event"),a=e("../lib/dom");t.addTouchListeners=function(e,u){var d,h,p,f,g,t,m,v,r,y="scroll",b=0,w=0,C=0,_=0;function o(){function t(e){var t,i=e.target.getAttribute("action");if("more"==i||!o)return o=!o,e=u.getCopyText(),t=u.session.getUndoManager().hasUndo(),void r.replaceChild(a.buildDom(o?["span",!e&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],e&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],e&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],n&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],t&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),r.firstChild);"paste"==i?n.readText().then(function(e){u.execCommand(i,e)}):i&&("cut"!=i&&"copy"!=i||(n?n.writeText(u.getCopyText()):document.execCommand("copy")),u.execCommand(i)),r.firstChild.style.display="none",o=!1,"openCommandPallete"!=i&&u.focus()}var n=window.navigator&&window.navigator.clipboard,o=!1;r=a.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){y="menu",e.stopPropagation(),e.preventDefault(),u.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),t(e)},onclick:t},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],u.container)}function i(){r||o();var e=u.selection.cursor,e=u.renderer.textToScreenCoordinates(e.row,e.column),t=u.renderer.textToScreenCoordinates(0,0).pageX,i=u.renderer.scrollLeft,n=u.container.getBoundingClientRect();r.style.top=e.pageY-n.top-3+"px",e.pageX-n.left<n.width-70?(r.style.left="",r.style.right="10px"):(r.style.right="",r.style.left=t+i-n.left+"px"),r.style.display="",r.firstChild.style.display="none",u.on("input",s)}function s(e){r&&(r.style.display="none"),u.off("input",s)}function A(){g=null,clearTimeout(g);var e=u.selection.getRange(),t=e.contains(m.row,m.column);!e.isEmpty()&&t||(u.selection.moveToPosition(m),u.selection.selectWord()),y="wait",i()}n.addListener(e,"contextmenu",function(e){v&&u.textInput.getElement().focus()},u),n.addListener(e,"touchstart",function(e){var t=e.touches;if(g||1<t.length)return clearTimeout(g),g=null,p=-1,void(y="zoom");v=u.$mouseHandler.isMousePressed=!0;var i=u.renderer.layerConfig.lineHeight,n=u.renderer.layerConfig.lineHeight,o=e.timeStamp,r=(f=o,t[0]),s=r.clientX,r=r.clientY,s=(Math.abs(d-s)+Math.abs(h-r)>i&&(p=-1),d=e.clientX=s,h=e.clientY=r,C=_=0,new E(e,u));if(m=s.getDocumentPosition(),o-p<500&&1==t.length&&!b)w++,e.preventDefault(),e.button=0,g=null,clearTimeout(g),u.selection.moveToPosition(m),(r=2<=w?u.selection.getLineRange(m.row):u.session.getBracketRange(m))&&!r.isEmpty()?u.selection.setRange(r):u.selection.selectWord(),y="wait";else{w=0;var s=u.selection.cursor,t=u.selection.isEmpty()?s:u.selection.anchor,r=u.renderer.$cursorLayer.getPixelPosition(s,!0),s=u.renderer.$cursorLayer.getPixelPosition(t,!0),t=u.renderer.scroller.getBoundingClientRect(),a=u.renderer.layerConfig.offset,l=u.renderer.scrollLeft,c=function(e,t){return(e/=n)*e+(t=t/i-.75)*t};if(e.clientX<t.left)return void(y="zoom");r=c(e.clientX-t.left-r.left+l,e.clientY-t.top-r.top+a),c=c(e.clientX-t.left-s.left+l,e.clientY-t.top-s.top+a);r<3.5&&c<3.5&&(y=c<r?"cursor":"anchor"),y=c<3.5?"anchor":r<3.5?"cursor":"scroll",g=setTimeout(A,450)}p=o},u),n.addListener(e,"touchend",function(e){v=u.$mouseHandler.isMousePressed=!1,t&&clearInterval(t),"zoom"==y?(y="",b=0):g?(u.selection.moveToPosition(m),b=0,i()):"scroll"==y?(b+=60,t=setInterval(function(){b--<=0&&(clearInterval(t),t=null),Math.abs(C)<.01&&(C=0),Math.abs(_)<.01&&(_=0),b<20&&(C*=.9),b<20&&(_*=.9);var e=u.session.getScrollTop();u.renderer.scrollBy(10*C,10*_),e==u.session.getScrollTop()&&(b=0)},10),s()):i(),clearTimeout(g),g=null},u),n.addListener(e,"touchmove",function(e){g&&(clearTimeout(g),g=null);var t=e.touches;if(!(1<t.length||"zoom"==y)){var t=t[0],i=d-t.clientX,n=h-t.clientY;if("wait"==y){if(!(4<i*i+n*n))return e.preventDefault();y="cursor"}d=t.clientX,h=t.clientY,e.clientX=t.clientX,e.clientY=t.clientY;var t=e.timeStamp,o=t-f;f=t,"scroll"==y?((t=new E(e,u)).speed=1,t.wheelX=i,t.wheelY=n,10*Math.abs(i)<Math.abs(n)&&(i=0),10*Math.abs(n)<Math.abs(i)&&(n=0),0!=o&&(C=i/o,_=n/o),u._emit("mousewheel",t),t.propagationStopped||(C=_=0)):(i=new E(e,u).getDocumentPosition(),"cursor"==y?u.selection.moveCursorToPosition(i):"anchor"==y&&u.selection.setSelectionAnchor(i.row,i.column),u.renderer.scrollCursorIntoView(i),e.preventDefault())}},u)}}),define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";var o=e("./dom");t.get=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&t(i.responseText)},i.send(null)},t.loadScript=function(e,i){var t=o.getDocumentHead(),n=document.createElement("script");n.src=e,t.appendChild(n),n.onload=n.onreadystatechange=function(e,t){!t&&n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(n=n.onload=n.onreadystatechange=null,t||i())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t,i){"use strict";function r(){this.propagationStopped=!0}function s(){this.defaultPrevented=!0}var n={};n._emit=n._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[e]||[],n=this._defaultHandlers[e];if(i.length||n){(t="object"==typeof t&&t?t:{}).type||(t.type=e),t.stopPropagation||(t.stopPropagation=r),t.preventDefault||(t.preventDefault=s);for(var i=i.slice(),o=0;o<i.length&&(i[o](t,this),!t.propagationStopped);o++);return n&&!t.defaultPrevented?n(t,this):void 0}},n._signal=function(e,t){if(i=(this._eventRegistry||{})[e])for(var i=i.slice(),n=0;n<i.length;n++)i[n](t,this)},n.once=function(t,i){var n=this;if(this.on(t,function e(){n.off(t,e),i.apply(null,arguments)}),!i)return new Promise(function(e){i=e})},n.setDefaultHandler=function(e,t){var i,n,o=this._defaultHandlers;(o=o||(this._defaultHandlers={_disabled_:{}}))[e]&&(n=o[e],(i=o._disabled_[e])||(o._disabled_[e]=i=[]),i.push(n),-1!=(n=i.indexOf(t))&&i.splice(n,1)),o[e]=t},n.removeDefaultHandler=function(e,t){var i,n=this._defaultHandlers;n&&(i=n._disabled_[e],n[e]==t?i&&this.setDefaultHandler(e,i.pop()):i&&-1!=(n=i.indexOf(t))&&i.splice(n,1))},n.on=n.addEventListener=function(e,t,i){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];return-1==(n=n||(this._eventRegistry[e]=[])).indexOf(t)&&n[i?"unshift":"push"](t),t},n.off=n.removeListener=n.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};e=this._eventRegistry[e];!e||-1!==(t=e.indexOf(t))&&e.splice(t,1)},n.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[e]=void 0),this._defaultHandlers&&(this._defaultHandlers[e]=void 0)},t.EventEmitter=n}),define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){var o=e("./oop"),n=e("./event_emitter").EventEmitter,r={setOptions:function(t){Object.keys(t).forEach(function(e){this.setOption(e,t[e])},this)},getOptions:function(e){var t,i={};return e?Array.isArray(e)||(i=e,e=Object.keys(i)):(t=this.$options,e=Object.keys(t).filter(function(e){return!t[e].hidden})),e.forEach(function(e){i[e]=this.getOption(e)},this),i},setOption:function(e,t){var i;if(this["$"+e]!==t)return i=this.$options[e],i?i.forwardTo?this[i.forwardTo]&&this[i.forwardTo].setOption(e,t):(i.handlesSet||(this["$"+e]=t),void(i&&i.set&&i.set.call(this,t))):s('misspelled option "'+e+'"')},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:s('misspelled option "'+e+'"')}};function s(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function a(e,t){var i=new Error(e);i.data=t,"object"==typeof console&&console.error&&console.error(i),setTimeout(function(){throw i})}function l(){this.$defaultOptions={}}!function(){o.implement(this,n),this.defineOptions=function(i,e,n){return i.$options||(this.$defaultOptions[e]=i.$options={}),Object.keys(n).forEach(function(e){var t=n[e];(t="string"==typeof t?{forwardTo:t}:t).name||(t.name=e),"initialValue"in(i.$options[t.name]=t)&&(i["$"+t.name]=t.initialValue)}),o.implement(i,r),this},this.resetOptions=function(i){Object.keys(i.$options).forEach(function(e){var t=i.$options[e];"value"in t&&i.setOption(e,t.value)})},this.setDefaultValue=function(e,t,i){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var n=this.$defaultOptions[e]||(this.$defaultOptions[e]={});n[t]&&(n.forwardTo?this.setDefaultValue(n.forwardTo,t,i):n[t].value=i)},this.setDefaultValues=function(t,i){Object.keys(i).forEach(function(e){this.setDefaultValue(t,e,i[e])},this)},this.warn=s,this.reportError=a}.call(l.prototype),t.AppConfig=l}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/dom","ace/lib/app_config"],function(h,p,f){var e=h("./lib/lang"),r=(h("./lib/oop"),h("./lib/net")),i=h("./lib/dom"),t=h("./lib/app_config").AppConfig,g=(f.exports=p=new t,function(){return this||"undefined"!=typeof window&&window}()),m={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null},s=(p.get=function(e){if(m.hasOwnProperty(e))return m[e];throw new Error("Unknown config key: "+e)},p.set=function(e,t){if(m.hasOwnProperty(e))m[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e);"useStrictCSP"==e&&i.useStrictCSP(t)},p.all=function(){return e.copyObject(m)},p.$modes={},p.moduleUrl=function(e,t){if(m.$moduleUrls[e])return m.$moduleUrls[e];var e=e.split("/"),i="snippets"==(t=t||e[e.length-2]||"")?"/":"-",n=e[e.length-1],o=("worker"==t&&"-"==i&&(o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g"),n=n.replace(o,"")),(!n||n==t)&&1<e.length&&(n=e[e.length-2]),m[t+"Path"]);return null==o?o=m.basePath:"/"==i&&(t=i=""),o&&"/"!=o.slice(-1)&&(o+="/"),o+t+i+n+this.get("suffix")},p.setModuleUrl=function(e,t){return m.$moduleUrls[e]=t},p.$loading={},p.loadModule=function(i,e){var t,n;Array.isArray(i)&&(n=i[0],i=i[1]);try{t=h(i)}catch(e){}if(t&&!p.$loading[i])return e&&e(t);if(p.$loading[i]||(p.$loading[i]=[]),p.$loading[i].push(e),!(1<p.$loading[i].length)){function o(){h([i],function(t){p._emit("load.module",{name:i,module:t});var e=p.$loading[i];p.$loading[i]=null,e.forEach(function(e){e&&e(t)})})}if(!p.get("packaged"))return o();r.loadScript(p.moduleUrl(i,n),o),s()}},function(){m.basePath||m.workerPath||m.modePath||m.themePath||Object.keys(m.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),s=function(){})});function n(e){if(g&&g.document){m.packaged=e||h.packaged||f.packaged||g.define&&define.packaged;for(var t,i={},n="",e=document.currentScript||document._currentScript,o=(e&&e.ownerDocument||document).getElementsByTagName("script"),r=0;r<o.length;r++){var s=o[r],a=s.src||s.getAttribute("src");if(a){for(var l=s.attributes,c=0,u=l.length;c<u;c++){var d=l[c];0===d.name.indexOf("data-ace-")&&(i[d.name.replace(/^data-ace-/,"").replace(/-(.)/g,function(e,t){return t.toUpperCase()})]=d.value)}s=a.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);s&&(n=s[1])}}for(t in n&&(i.base=i.base||n,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base,i)void 0!==i[t]&&p.set(t,i[t])}}n(!0),p.init=n,p.version="1.4.14"}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,i){"use strict";function n(n){function e(e){document.hasFocus&&document.hasFocus()&&(n.isFocused()||document.activeElement!=(n.textInput&&n.textInput.getElement()))||window.focus(),n.focus()}var o=this,t=(this.editor=n,new r(this),new s(this),new a(this),n.renderer.getMouseEventTarget()),i=(u.addListener(t,"click",this.onMouseEvent.bind(this,"click"),n),u.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove"),n),u.addMultiMouseDownListener([t,n.renderer.scrollBarV&&n.renderer.scrollBarV.inner,n.renderer.scrollBarH&&n.renderer.scrollBarH.inner,n.textInput&&n.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",n),u.addMouseWheelListener(n.container,this.onMouseWheel.bind(this,"mousewheel"),n),l(n.container,n),n.renderer.$gutter);u.addListener(i,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),n),u.addListener(i,"click",this.onMouseEvent.bind(this,"gutterclick"),n),u.addListener(i,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),n),u.addListener(i,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),n),u.addListener(t,"mousedown",e,n),u.addListener(i,"mousedown",e,n),d.isIE&&n.renderer.scrollBarV&&(u.addListener(n.renderer.scrollBarV.element,"mousedown",e,n),u.addListener(n.renderer.scrollBarH.element,"mousedown",e,n)),n.on("mousemove",function(e){var t,i;o.state||o.$dragDelay||!o.$dragEnabled||(e=n.renderer.screenToTextCoordinates(e.x,e.y),t=n.session.selection.getRange(),i=n.renderer,!t.isEmpty()&&t.insideStart(e.row,e.column)?i.setCursorStyle("default"):i.setCursorStyle(""))},n)}var u=e("../lib/event"),d=e("../lib/useragent"),r=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,h=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,l=e("./touch_handler").addTouchListeners,e=e("../config");!function(){this.onMouseEvent=function(e,t){this.editor.session&&this.editor._emit(e,new h(t,this.editor))},this.onMouseMove=function(e,t){var i=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;i&&i.length&&this.editor._emit(e,new h(t,this.editor))},this.onMouseWheel=function(e,t){var i=new h(t,this.editor);i.speed=2*this.$scrollSpeed,i.wheelX=t.wheelX,i.wheelY=t.wheelY,this.editor._emit(e,i)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;function i(e){if(e){if(d.isWebKit&&!e.which&&a.releaseMouse)return a.releaseMouse();a.x=e.clientX,a.y=e.clientY,t&&t(e),a.mouseEvent=new h(e,a.editor),a.$mouseMoved=!0}}function n(e){r.off("beforeEndOperation",l),clearInterval(c),r.session&&o(),a[a.state+"End"]&&a[a.state+"End"](e),a.state="",a.isMousePressed=s.$isMousePressed=!1,s.$keepTextAreaAtCursor&&s.$moveTextAreaToCursor(),a.$onCaptureMouseMove=a.releaseMouse=null,e&&a.onMouseEvent("mouseup",e),r.endOperation()}function o(){a[a.state]&&a[a.state](),a.$mouseMoved=!1}var r=this.editor,s=this.editor.renderer,a=(s.$isMousePressed=!0,this);if(d.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){n(e)});var l=function(e){a.releaseMouse&&r.curOp.command.name&&r.curOp.selectionChanged&&(a[a.state+"End"]&&a[a.state+"End"](),a.state="",a.releaseMouse())},c=(r.on("beforeEndOperation",l),r.startOperation({command:{name:"mouse"}}),a.$onCaptureMouseMove=i,a.releaseMouse=u.capture(this.editor.container,i,n),setInterval(o,20))},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&u.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}.call(n.prototype),e.defineOptions(n.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:d.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=n}),define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";var n=e("../lib/dom");t.FoldHandler=function(o){o.on("click",function(e){var t=e.getDocumentPosition(),i=o.session,t=i.getFoldAt(t.row,t.column,1),t=(t&&(e.getAccelKey()?i.removeFold(t):i.expandFold(t),e.stop()),e.domEvent&&e.domEvent.target);t&&n.hasCssClass(t,"ace_inline_button")&&n.hasCssClass(t,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),o.renderer.scrollCursorIntoView())}),o.on("gutterclick",function(e){var t,i;"foldWidgets"==o.renderer.$gutterLayer.getRegion(e)&&(t=e.getDocumentPosition().row,(i=o.session).foldWidgets&&i.foldWidgets[t]&&o.session.onFoldWidgetClick(t,e),o.isFocused()||o.focus(),e.stop())}),o.on("gutterdblclick",function(e){var t,i,n;"foldWidgets"==o.renderer.$gutterLayer.getRegion(e)&&(n=e.getDocumentPosition().row,(i=(i=(t=o.session).getParentFoldRangeData(n,!0)).range||i.firstRange)&&(n=i.start.row,(n=t.getFoldAt(n,t.getLine(n).length,1))?t.removeFold(n):(t.addFold("...",i),o.renderer.scrollCursorIntoView({row:i.start.row,column:0}))),e.stop())})}}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,i){"use strict";function n(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)}var o=e("../lib/keys"),l=e("../lib/event");!function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){var i;e&&("function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e),-1!=(i=this.$handlers.indexOf(e))&&this.$handlers.splice(i,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==i&&e.attach&&e.attach(this.$editor))},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,i=t.editor;return this.$handlers.map(function(e){return e.getStatusText&&e.getStatusText(i,t)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,i,n){for(var o,r=!1,s=this.$editor.commands,a=this.$handlers.length;a--&&!((o=this.$handlers[a].handleKeyboard(this.$data,e,t,i,n))&&o.command&&((r="null"==o.command||s.exec(o.command,this.$editor,o.args,n))&&n&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&l.stopEvent(n),r)););return r||-1!=e||(o={command:"insertstring"},r=s.exec("insertstring",this.$editor,t)),r&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),r},this.onCommandKey=function(e,t,i){var n=o.keyCodeToString(i);return this.$callKeyboardHandlers(t,n,i,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}.call(n.prototype),t.KeyBinding=n}),define("ace/lib/bidiutil",["require","exports","module"],function(e,l,t){"use strict";var f=0,g=0,m=!1,v=!1,y=!1,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],w=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C=0,_=1,A=2,E=3,x=4,S=5,T=6,k=7,D=8,R=9,O=10,F=11,L=12,M=13,N=14,$=15,I=16,P=17,G=18,n=[G,G,G,G,G,G,G,G,G,T,S,T,D,S,G,G,G,G,G,G,G,G,G,G,G,G,G,G,S,S,S,T,D,x,x,F,F,F,x,x,x,x,x,O,R,O,R,R,A,A,A,A,A,A,A,A,A,A,R,x,x,x,x,x,x,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,x,x,x,x,x,x,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,x,x,x,x,G,G,G,G,G,G,S,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,R,x,F,F,F,F,x,x,x,x,C,x,x,G,x,x,F,F,A,A,x,C,x,x,x,A,C,x,x,x,x,x],o=[D,D,D,D,D,D,D,D,D,D,D,G,G,G,C,_,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,D,S,M,N,$,I,P,R,F,F,F,F,F,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,R,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,D];function c(e,t,i,n){var o,r,s,a=f?w:b,l=0,c=-1,u=null,d=null,h=[];if(!n)for(u=0,n=[];u<i;u++)n[u]=B(e[u]);for(g=f,y=v=m=!1,d=0;d<i;d++){if(s=l,h[d]=o=function(e,t,i,n){var o,r,s,a=t[n];switch(a){case C:case _:m=!1;case x:case E:return a;case A:return m?E:A;case k:return m=!0,_;case D:return x;case R:return n<1||n+1>=t.length||(o=i[n-1])!=A&&o!=E||(l=t[n+1])!=A&&l!=E?x:(l=m?E:l)==o?l:x;case O:return(o=0<n?i[n-1]:S)==A&&n+1<t.length&&t[n+1]==A?A:x;case F:if(0<n&&i[n-1]==A)return A;if(m)return x;for(s=n+1,r=t.length;s<r&&t[s]==F;)s++;return s<r&&t[s]==A?A:x;case L:for(r=t.length,s=n+1;s<r&&t[s]==L;)s++;if(s<r){var l=e[n],l=1425<=l&&l<=2303||64286==l;if(o=t[s],l&&(o==_||o==k))return _}return n<1||(o=t[n-1])==S?x:i[n-1];case S:return v=!(m=!1),f;case T:return y=!0,x;case M:case N:case I:case P:case $:m=!1;case G:return x}}(e,n,h,d),s=240&(l=a[s][o]),l&=15,t[d]=r=a[l][5],0<s)if(16==s){for(u=c;u<d;u++)t[u]=1;c=-1}else c=-1;if(a[l][6])-1==c&&(c=d);else if(-1<c){for(u=c;u<d;u++)t[u]=r;c=-1}n[d]==S&&(t[d]=0),g|=r}if(y)for(u=0;u<i;u++)if(n[u]==T){t[u]=f;for(var p=u-1;0<=p&&n[p]==D;p--)t[p]=f}}function u(e,t,i){if(!(g<e))if(1!=e||1!=f||v)for(var n,o,r,s,a=i.length,l=0;l<a;){if(t[l]>=e){for(n=l+1;n<a&&t[n]>=e;)n++;for(o=l,r=n-1;o<r;o++,r--)s=i[o],i[o]=i[r],i[r]=s;l=n}l++}else i.reverse()}function B(e){var t=e.charCodeAt(0),i=t>>8;return 0==i?191<t?C:n[t]:5==i?/[\u0591-\u05f4]/.test(e)?_:C:6==i?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?L:/[\u0660-\u0669\u066b-\u066c]/.test(e)?E:1642==t?F:/[\u06f0-\u06f9]/.test(e)?A:k:32==i&&t<=8287?o[255&t]:254==i&&65136<=t?k:x}l.L=C,l.R=_,l.EN=A,l.ON_R=3,l.AN=4,l.R_H=5,l.B=6,l.RLE=7,l.DOT="¬∑",l.doBidiReorder=function(e,t,i){if(e.length<2)return{};var n=e.split(""),o=new Array(n.length),r=new Array(n.length),s=[];f=i?1:0,c(n,s,n.length,t);for(var a=0;a<o.length;o[a]=a,a++);u(2,s,o),u(1,s,o);for(a=0;a<o.length-1;a++)t[a]===E?s[a]=l.AN:s[a]===_&&(t[a]>k&&t[a]<M||t[a]===x||t[a]===G)?s[a]=l.ON_R:0<a&&"ŸÑ"===n[a-1]&&/\u0622|\u0623|\u0625|\u0627/.test(n[a])&&(s[a-1]=s[a]=l.R_H,a++);n[n.length-1]===l.DOT&&(s[n.length-1]=l.B),"‚Ä´"===n[0]&&(s[0]=l.RLE);for(a=0;a<o.length;a++)r[a]=s[o[a]];return{logicalFromVisual:o,bidiLevels:r}},l.hasBidiCharacters=function(e,t){for(var i=!1,n=0;n<e.length;n++)t[n]=B(e.charAt(n)),i||t[n]!=_&&t[n]!=k&&t[n]!=E||(i=!0);return i},l.getVisualFromLogicalIdx=function(e,t){for(var i=0;i<t.logicalFromVisual.length;i++)if(t.logicalFromVisual[i]==e)return i;return 0}}),define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,i){"use strict";function n(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=a,this.charWidths=[],this.EOL="¬¨",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¬∂",this.RLE="‚Ä´",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(e.getValue())}var a=e("./lib/bidiutil"),s=e("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/;!function(){this.isBidiRow=function(e,t,i){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,i),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&o.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;return e=t.length&&0<=(t=this.session.$getRowCacheIndex(t,this.currentRow))?this.session.$docRowCache[t]:e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var i,n=this.session.$getRowCacheIndex(t,this.currentRow);0<this.currentRow-e&&(i=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===n;)n=i,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){var i,n=(e=void 0===e?this.getDocumentRow():e)===this.session.getLength()-1?this.EOF:this.EOL,o=(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode?((e=this.session.$wrapData[e])&&(0<(t=void 0===t?this.getSplitIndex():t)&&e.length?(this.wrapIndent=e.indent,this.wrapOffset=this.wrapIndent*this.charWidths[a.L],this.line=t<e.length?this.line.substring(e[t-1],e[t]):this.line.substring(e[e.length-1])):this.line=this.line.substring(0,e[t])),t==e.length&&(this.line+=this.showInvisibles?n:a.DOT)):this.line+=this.showInvisibles?n:a.DOT,this.session),r=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(e,t){return"\t"===e||o.isFullWidth(e.charCodeAt(0))?(i="\t"===e?o.getScreenTabSize(t+r):2,r+=i-1,s.stringRepeat(a.DOT,i)):e}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==a.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];a.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=a.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){var t;this.characterWidth!==e.$characterSize.width&&(this.fontMetrics=e,t=this.characterWidth=e.$characterSize.width,e=e.$measureCharWidth("◊î"),this.charWidths[a.L]=this.charWidths[a.EN]=this.charWidths[a.ON_R]=t,this.charWidths[a.R]=this.charWidths[a.AN]=e,this.charWidths[a.R_H]=.45*e,this.charWidths[a.B]=this.charWidths[a.RLE]=0,this.currentRow=null)},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(null!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var i=e.getCursorPosition(),n=e.selection.getSelectionAnchor().row;n<=i.row;n++)t||e.session.getLine(n).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(n).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:n},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(n,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,i=t<e?this.session.getOverwrite()?e:e-1:t,n=a.getVisualFromLogicalIdx(i,this.bidiMap),o=this.bidiMap.bidiLevels,r=0;!this.session.getOverwrite()&&e<=t&&o[n]%2!=0&&n++;for(var s=0;s<n;s++)r+=this.charWidths[o[s]];return!this.session.getOverwrite()&&t<e&&o[n]%2==0&&(r+=this.charWidths[o[n]]),this.wrapIndent&&(r+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(r+=this.rtlLineOffset),r},this.getSelections=function(e,t){var i,n=this.bidiMap,o=n.bidiLevels,r=[],s=0,a=Math.min(e,t)-this.wrapIndent,l=Math.max(e,t)-this.wrapIndent,c=!1,u=!1,d=0;this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var h,p=0;p<o.length;p++)h=n.logicalFromVisual[p],i=o[p],(c=a<=h&&h<l)&&!u?d=s:!c&&u&&r.push({left:d,width:s-d}),s+=this.charWidths[i],u=c;if(c&&p===o.length&&r.push({left:d,width:s-d}),this.isRtlDir)for(var f=0;f<r.length;f++)r[f].left+=this.rtlLineOffset;return r},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,e=Math.max(e,0),i=0,n=0,o=this.bidiMap.bidiLevels,r=this.charWidths[o[n]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);i+r/2<e;){if(i+=r,n===o.length-1){r=0;break}r=this.charWidths[o[++n]]}return 0===(t=0<n&&o[n-1]%2!=0&&o[n]%2==0?(e<i&&n--,this.bidiMap.logicalFromVisual[n]):0<n&&o[n-1]%2==0&&o[n]%2!=0?1+(i<e?this.bidiMap.logicalFromVisual[n]:this.bidiMap.logicalFromVisual[n-1]):this.isRtlDir&&n===o.length-1&&0===r&&o[n-1]%2==0||!this.isRtlDir&&0===n&&o[n]%2!=0?1+this.bidiMap.logicalFromVisual[n]:(0<n&&o[n-1]%2!=0&&0!==r&&n--,this.bidiMap.logicalFromVisual[n]))&&this.isRtlDir&&t++,t+this.wrapIndent}}.call(n.prototype),t.BidiHandler=n}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,i){"use strict";function n(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")})}var o=e("./lib/oop"),r=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range;!function(){o.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?a.fromPoints(t,t):this.isBackwards()?a.fromPoints(t,e):a.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var i=t?e.end:e.start,t=t?e.start:e.end;this.$setSelection(i.row,i.column,t.row,t.column)},this.$setSelection=function(e,t,i,n){var o,r;this.$silent||(o=this.$isEmpty,r=this.inMultiSelectMode,this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(i,n),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||o!=this.$isEmpty||r)&&this._emit("changeSelection"))},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){var i;return void 0===t&&(e=(i=e||this.lead).row,t=i.column),this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),e=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(e)},this.getLineRange=function(e,t){var e="number"==typeof e?e:this.lead.row,i=this.session.getFoldLine(e),i=i?(e=i.start.row,i.end.row):e;return!0===t?new a(e,0,i,this.session.getLine(i).length):new a(e,0,i+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,i){var n=e.column,o=e.column+t;return i<0&&(n=e.column-t,o=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(n,o).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();(e=this.session.getFoldAt(t.row,t.column,-1))?this.moveCursorTo(e.start.row,e.start.column):0===t.column?0<t.row&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length):(e=this.session.getTabSize(),this.wouldMoveIntoSoftTab(t,e,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-e):this.moveCursorBy(0,-1))},this.moveCursorRight=function(){var e,t=this.lead.getPosition();(e=this.session.getFoldAt(t.row,t.column,1))?this.moveCursorTo(e.end.row,e.end.column):this.lead.column==this.doc.getLine(this.lead.row).length?this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0):(e=this.session.getTabSize(),t=this.lead,this.wouldMoveIntoSoftTab(t,e,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,e):this.moveCursorBy(0,1))},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,i=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(i,0),e=this.session.getDisplayLine(e,null,i.row,i.column).match(/^\s*/);e[0].length==t||this.session.$useEmacsStyleLineStart||(i.column+=e[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var e,t=this.lead,t=this.session.getDocumentLastRowColumnPosition(t.row,t.column);this.lead.column==t.column&&(e=this.session.getLine(t.row),t.column==e.length&&0<(e=e.search(/\s+$/))&&(t.column=e)),this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),n=i.substring(t),o=(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.getFoldAt(e,t,1));if(o)this.moveCursorTo(o.end.row,o.end.column);else{if(this.session.nonTokenRe.exec(n)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=i.substring(t)),t>=i.length)return this.moveCursorTo(e,i.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(n)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column;if(i=this.session.getFoldAt(e,t,-1))this.moveCursorTo(i.start.row,i.start.column);else{var i=this.session.getFoldStringAt(e,t,-1),i=(null==i&&(i=this.doc.getLine(e).substring(0,t)),r.stringReverse(i));if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(i)&&(t-=this.session.nonTokenRe.lastIndex,i=i.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),t<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(0<e&&this.moveCursorWordLeft());this.session.tokenRe.exec(i)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.$shortWordEndIndex=function(e){var t,i=0,n=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,this.session.tokenRe.exec(e))i=this.session.tokenRe.lastIndex;else{for(;(t=e[i])&&n.test(t);)i++;if(i<1)for(o.lastIndex=0;(t=e[i])&&!o.test(t);)if(o.lastIndex=0,i++,n.test(t)){if(2<i){i--;break}for(;(t=e[i])&&n.test(t);)i++;if(2<i)break}}return o.lastIndex=0,i},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),n=i.substring(t),o=this.session.getFoldAt(e,t,1);if(o)return this.moveCursorTo(o.end.row,o.end.column);if(t==i.length){for(var r=this.doc.getLength();n=this.doc.getLine(++e),e<r&&/^\s*$/.test(n););/^\s+/.test(n)||(n=""),t=0}o=this.$shortWordEndIndex(n);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var i=this.session.getLine(e).substring(0,t);if(0===t){for(;i=this.doc.getLine(--e),0<e&&/^\s*$/.test(i););t=i.length,/\s+$/.test(i)||(i="")}var n=r.stringReverse(i),n=this.$shortWordEndIndex(n);return this.moveCursorTo(e,t-n)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var i,n=this.session.documentToScreenPosition(this.lead.row,this.lead.column),o=(0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(n.row,this.lead.row)?(i=this.session.$bidiHandler.getPosLeft(n.column),n.column=Math.round(i/this.session.$bidiHandler.charWidths[0])):i=n.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column),0!=e&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]&&(o=this.session.lineWidgets[this.lead.row],e<0?e-=o.rowsAbove||0:0<e&&(e+=o.rowCount-(o.rowsAbove||0))),this.session.screenToDocumentPosition(n.row+e,n.column,i));0!==e&&0===t&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,i){var n=this.session.getFoldAt(e,t,1),n=(n&&(e=n.start.row,t=n.start.column),this.$keepDesiredColumnOnChange=!0,this.session.getLine(e));/[\uDC00-\uDFFF]/.test(n.charAt(t))&&n.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,i||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,i){e=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(e.row,e.column,i)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var i=this.getCursor();return a.fromPoints(t,i)}catch(e){return a.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){var e;return this.rangeCount?e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}):(e=this.getRange()).isBackwards=this.isBackwards(),e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList&&1<e.length){this.toSingleRange(e[0]);for(var t=e.length;t--;){var i=a.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(i.cursor=i.start),this.addRange(i,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}.call(n.prototype),t.Selection=n}),define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,i){"use strict";function n(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var i=this.states[t],n=[],o=0,r=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],l=0;l<i.length;l++){var c,u,d=i[l];d.defaultToken&&(r.defaultToken=d.defaultToken),d.caseInsensitive&&(s="gi"),null!=d.regex&&(d.regex instanceof RegExp&&(d.regex=d.regex.toString().slice(1,-1)),c=d.regex,u=new RegExp("(?:("+c+")|(.))").exec("a").length-2,Array.isArray(d.token)?1==d.token.length||1==u?d.token=d.token[0]:u-1!=d.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:d,groupCount:u-1}),d.token=d.token[0]):(d.tokenArray=d.token,d.token=null,d.onMatch=this.$arrayTokens):"function"!=typeof d.token||d.onMatch||(d.onMatch=1<u?this.$applyToken:d.token),1<u&&(c=/\\\d/.test(d.regex)?d.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+o+1)}):(u=1,this.removeCapturingGroups(d.regex)),d.splitRegex||"string"==typeof d.token||a.push(d)),r[o]=l,o+=u,n.push(c),d.onMatch||(d.onMatch=null))}n.length||(r[0]=0,n.push("$")),a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)},this),this.regExps[t]=new RegExp("("+n.join(")|(")+")|($)",s)}}var o=e("./config"),y=2e3;!function(){this.$setMaxTokenCount=function(e){y=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),i=this.token.apply(this,t);if("string"==typeof i)return[{type:i,value:e}];for(var n=[],o=0,r=i.length;o<r;o++)t[o]&&(n[n.length]={type:i[o],value:t[o]});return n},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var i=[],n=this.tokenArray,o=0,r=n.length;o<r;o++)t[o+1]&&(i[i.length]={type:n[o],value:t[o+1]});return i},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(e,t){return t?"(?:":e})},this.createSplitterRegexp=function(e,t){var s,a,l;return-1!=e.indexOf("(?=")&&(s=0,a=!1,l={},e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,i,n,o,r){return a?a="]"!=o:o?a=!0:n?(s==l.stack&&(l.end=r+1,l.stack=-1),s--):i&&(s++,1!=i.length&&(l.stack=s,l.start=r)),e}),null!=l.end&&/^\)*$/.test(e.substr(l.end))&&(e=e.substring(0,l.start)+e.substr(l.end))),"$"!=(e="^"!=e.charAt(0)?"^"+e:e).charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){t&&"string"!=typeof t?"#tmp"===(t=(i=t.slice(0))[0])&&(i.shift(),t=i.shift()):i=[];for(var i,n,o=t||"start",r=(r=this.states[o])||this.states[o="start"],s=this.matchMappings[o],a=this.regExps[o],l=[],c=a.lastIndex=0,u=0,d={type:null,value:""};n=a.exec(e);){var h,p=s.defaultToken,f=null,g=n[0],m=a.lastIndex;m-g.length>c&&(h=e.substring(c,m-g.length),d.type==p?d.value+=h:(d.type&&l.push(d),d={type:p,value:h}));for(var v=0;v<n.length-2;v++)if(void 0!==n[v+1]){p=(f=r[s[v]]).onMatch?f.onMatch(g,o,i,e):f.token,f.next&&(o="string"==typeof f.next?f.next:f.next(o,i),(r=this.states[o])||(this.reportError("state doesn't exist",o),r=this.states[o="start"]),s=this.matchMappings[o],(a=this.regExps[o]).lastIndex=c=m),f.consumeLineEnd&&(c=m);break}if(g)if("string"==typeof p)f&&!1===f.merge||d.type!==p?(d.type&&l.push(d),d={type:p,value:g}):d.value+=g;else if(p){d.type&&l.push(d);for(d={type:null,value:""},v=0;v<p.length;v++)l.push(p[v])}if(c==e.length)break;if(c=m,u++>y){for(u>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});c<e.length;)d.type&&l.push(d),d={value:e.substring(c,c+=500),type:"overflow"};o="start",i=[];break}}return d.type&&l.push(d),1<i.length&&i[0]!==o&&i.unshift("#tmp",o),{tokens:l,state:i.length?i:o}},this.reportError=o.reportError}.call(n.prototype),t.Tokenizer=n}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,i){"use strict";function n(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}}var l=e("../lib/lang");!function(){this.addRules=function(e,t){if(t)for(var i in e){for(var n=e[i],o=0;o<n.length;o++){var r=n[o];(r.next||r.onMatch)&&("string"==typeof r.next&&0!==r.next.indexOf(t)&&(r.next=t+r.next),r.nextState&&0!==r.nextState.indexOf(t)&&(r.nextState=t+r.nextState))}this.$rules[t+i]=n}else for(var i in e)this.$rules[i]=e[i]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,i,n,o){e="function"==typeof e?(new e).getRules():e;if(n)for(var r=0;r<n.length;r++)n[r]=t+n[r];else for(var s in n=[],e)n.push(t+s);if(this.addRules(e,t),i)for(var a=Array.prototype[o?"push":"unshift"],r=0;r<n.length;r++)a.apply(this.$rules[n[r]],l.deepCopy(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};function d(e,t){return"start"==e&&!t.length||t.unshift(this.nextState,e),this.nextState}function h(e,t){return t.shift(),t.shift()||"start"}this.normalizeRules=function(){var c=0,u=this.$rules;Object.keys(u).forEach(function e(t){var i=u[t];i.processed=!0;for(var n=0;n<i.length;n++){var o=i[n],r=null,s=(Array.isArray(o)&&(r=o,o={}),!o.regex&&o.start&&(o.regex=o.start,o.next||(o.next=[]),o.next.push({defaultToken:o.token},{token:o.token+".end",regex:o.end||o.start,next:"pop"}),o.token=o.token+".start",o.push=!0),o.next||o.push);if(s&&Array.isArray(s)?((l=o.stateName)||("string"!=typeof(l=o.token)&&(l=l[0]||""),u[l]&&(l+=c++)),u[l]=s,e(o.next=l)):"pop"==s&&(o.next=h),o.push&&(o.nextState=o.next||o.push,o.next=d,delete o.push),o.rules)for(var a in o.rules)u[a]?u[a].push&&u[a].push.apply(u[a],o.rules[a]):u[a]=o.rules[a];var l="string"==typeof o?o:o.include;(r=l?Array.isArray(l)?l.map(function(e){return u[e]}):u[l]:r)&&(s=[n,1].concat(r),o.noEscape&&(s=s.filter(function(e){return!e.next})),i.splice.apply(i,s),n--),o.keywordMap&&(o.token=this.createKeywordMapper(o.keywordMap,o.defaultToken||"text",o.caseInsensitive),delete o.defaultToken)}},this)},this.createKeywordMapper=function(o,t,r,s){var a=Object.create(null);return this.$keywordList=[],Object.keys(o).forEach(function(e){for(var t=o[e].split(s||"|"),i=t.length;i--;){var n=t[i];this.$keywordList.push(n),r&&(n=n.toLowerCase()),a[n]=e}},this),o=null,r?function(e){return a[e.toLowerCase()]||t}:function(e){return a[e]||t}},this.getKeywords=function(){return this.$keywords}}.call(n.prototype),t.TextHighlightRules=n}),define("ace/mode/behaviour",["require","exports","module"],function(e,t,i){"use strict";function n(){this.$behaviours={}}!function(){this.add=function(e,t,i){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=i},this.addBehaviours=function(e){for(var t in e)for(var i in e[t])this.add(t,i,e[t][i])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){e=("function"==typeof e?new e:e).getBehaviours(t),this.addBehaviours(e)},this.getBehaviours=function(e){if(e){for(var t={},i=0;i<e.length;i++)this.$behaviours[e[i]]&&(t[e[i]]=this.$behaviours[e[i]]);return t}return this.$behaviours}}.call(n.prototype),t.Behaviour=n}),define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,i){"use strict";function n(e,t,i){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t),e=e.getTokenAt(t,i),this.$tokenIndex=e?e.index:-1}var o=e("./range").Range;!function(){this.stepBackward=function(){for(--this.$tokenIndex;this.$tokenIndex<0;){if(--this.$row,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e=e||this.$session.getLength(),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,i=e[t].start;if(void 0!==i)return i;for(i=0;0<t;)i+=e[--t].value.length;return i},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new o(this.$row,t,this.$row,t+e.value.length)}}.call(n.prototype),t.TokenIterator=n}),define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,i){"use strict";function h(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount})),l[t])return g=l[t];g=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}}function p(e,t,i,n){var o=e.end.row-e.start.row;return{text:i+t+n,selection:[0,e.start.column+1,o,e.end.column+(o?0:1)]}}function f(d){this.add("braces","insertion",function(e,t,i,n,o){var r=i.getCursorPosition(),s=n.doc.getLine(r.row);if("{"==o)return h(i),l=i.getSelectionRange(),""!==(c=n.doc.getTextRange(l))&&"{"!==c&&i.getWrapBehavioursEnabled()?p(l,c,"{","}"):f.isSaneInsertion(i,n)?/[\]\}\)]/.test(s[r.column])||i.inMultiSelectMode||d&&d.braces?(f.recordAutoInsert(i,n,"}"),{text:"{}",selection:[1,1]}):(f.recordMaybeInsert(i,n,"{"),{text:"{",selection:[1,1]}):void 0;if("}"==o){h(i);var a=s.substring(r.column,r.column+1);if("}"==a)if(null!==n.$findOpeningBracket("}",{column:r.column+1,row:r.row})&&f.isAutoInsertedClosing(r,s,o))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==o||"\r\n"==o){h(i);var l="";if(f.isMaybeInsertedClosing(r,s)&&(l=m.stringRepeat("}",g.maybeInsertedBrackets),f.clearMaybeInsertedClosing()),"}"===(a=s.substring(r.column,r.column+1))){var c=n.findMatchingBracket({row:r.row,column:r.column+1},"}");if(!c)return null;var u=this.$getIndent(n.getLine(c.row))}else{if(!l)return void f.clearMaybeInsertedClosing();u=this.$getIndent(s)}o=u+n.getTabString();return{text:"\n"+o+"\n"+u+l,selection:[1,o.length,1,o.length]}}f.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,i,n,o){var r=n.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==r){if(h(i),"}"==n.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;g.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,i,n,o){if("("==o)return h(i),r=i.getSelectionRange(),""!==(s=n.doc.getTextRange(r))&&i.getWrapBehavioursEnabled()?p(r,s,"(",")"):f.isSaneInsertion(i,n)?(f.recordAutoInsert(i,n,")"),{text:"()",selection:[1,1]}):void 0;if(")"==o){h(i);var r=i.getCursorPosition(),s=n.doc.getLine(r.row),i=s.substring(r.column,r.column+1);if(")"==i)if(null!==n.$findOpeningBracket(")",{column:r.column+1,row:r.row})&&f.isAutoInsertedClosing(r,s,o))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("parens","deletion",function(e,t,i,n,o){var r=n.doc.getTextRange(o);if(!o.isMultiLine()&&"("==r&&(h(i),")"==n.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)))return o.end.column++,o}),this.add("brackets","insertion",function(e,t,i,n,o){if("["==o)return h(i),r=i.getSelectionRange(),""!==(s=n.doc.getTextRange(r))&&i.getWrapBehavioursEnabled()?p(r,s,"[","]"):f.isSaneInsertion(i,n)?(f.recordAutoInsert(i,n,"]"),{text:"[]",selection:[1,1]}):void 0;if("]"==o){h(i);var r=i.getCursorPosition(),s=n.doc.getLine(r.row),i=s.substring(r.column,r.column+1);if("]"==i)if(null!==n.$findOpeningBracket("]",{column:r.column+1,row:r.row})&&f.isAutoInsertedClosing(r,s,o))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("brackets","deletion",function(e,t,i,n,o){var r=n.doc.getTextRange(o);if(!o.isMultiLine()&&"["==r&&(h(i),"]"==n.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)))return o.end.column++,o}),this.add("string_dquotes","insertion",function(e,t,i,n,o){var r=n.$mode.$quotes||v;if(1==o.length&&r[o]&&(!this.lineCommentStart||-1==this.lineCommentStart.indexOf(o))){h(i);var s=i.getSelectionRange(),a=n.doc.getTextRange(s);if(!(""===a||1==a.length&&r[a])&&i.getWrapBehavioursEnabled())return p(s,a,o,o);if(!a){var r=i.getCursorPosition(),s=n.doc.getLine(r.row),a=s.substring(r.column-1,r.column),i=s.substring(r.column,r.column+1),l=n.getTokenAt(r.row,r.column),c=n.getTokenAt(r.row,r.column+1);if("\\"==a&&l&&/escape/.test(l.type))return null;var u,l=l&&/string|escape/.test(l.type),d=!c||/string|escape/.test(c.type);if(i==o)(u=l!==d)&&/string\.end/.test(c.type)&&(u=!1);else{if(l&&!d)return null;if(l&&d)return null;c=n.$mode.tokenRe,l=(c.lastIndex=0,c.test(a)),d=(c.lastIndex=0,c.test(a));if(l||d)return null;if(i&&!/[\s;,.})\]\\]/.test(i))return null;n=s[r.column-2];if(a==o&&(n==o||c.test(n)))return null;u=!0}return{text:u?o+o:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,i,n,o){var r=n.$mode.$quotes||v,s=n.doc.getTextRange(o);if(!o.isMultiLine()&&r.hasOwnProperty(s)&&(h(i),n.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)==s))return o.end.column++,o})}var g,n=e("../../lib/oop"),o=e("../behaviour").Behaviour,r=e("../../token_iterator").TokenIterator,m=e("../../lib/lang"),s=["text","paren.rparen","rparen","paren","punctuation.operator"],a=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],l={},v={'"':'"',"'":"'"};f.isSaneInsertion=function(e,t){var i=e.getCursorPosition(),n=new r(t,i.row,i.column);if(!this.$matchTokenType(n.getCurrentToken()||"text",s)){if(/[)}\]]/.test(e.session.getLine(i.row)[i.column]))return!0;e=new r(t,i.row,i.column+1);if(!this.$matchTokenType(e.getCurrentToken()||"text",s))return!1}return n.stepForward(),n.getCurrentTokenRow()!==i.row||this.$matchTokenType(n.getCurrentToken()||"text",a)},f.$matchTokenType=function(e,t){return-1<t.indexOf(e.type||e)},f.recordAutoInsert=function(e,t,i){e=e.getCursorPosition(),t=t.doc.getLine(e.row);this.isAutoInsertedClosing(e,t,g.autoInsertedLineEnd[0])||(g.autoInsertedBrackets=0),g.autoInsertedRow=e.row,g.autoInsertedLineEnd=i+t.substr(e.column),g.autoInsertedBrackets++},f.recordMaybeInsert=function(e,t,i){e=e.getCursorPosition(),t=t.doc.getLine(e.row);this.isMaybeInsertedClosing(e,t)||(g.maybeInsertedBrackets=0),g.maybeInsertedRow=e.row,g.maybeInsertedLineStart=t.substr(0,e.column)+i,g.maybeInsertedLineEnd=t.substr(e.column),g.maybeInsertedBrackets++},f.isAutoInsertedClosing=function(e,t,i){return 0<g.autoInsertedBrackets&&e.row===g.autoInsertedRow&&i===g.autoInsertedLineEnd[0]&&t.substr(e.column)===g.autoInsertedLineEnd},f.isMaybeInsertedClosing=function(e,t){return 0<g.maybeInsertedBrackets&&e.row===g.maybeInsertedRow&&t.substr(e.column)===g.maybeInsertedLineEnd&&t.substr(0,e.column)==g.maybeInsertedLineStart},f.popAutoInsertedClosing=function(){g.autoInsertedLineEnd=g.autoInsertedLineEnd.substr(1),g.autoInsertedBrackets--},f.clearMaybeInsertedClosing=function(){g&&(g.maybeInsertedBrackets=0,g.maybeInsertedRow=-1)},n.inherits(f,o),t.CstyleBehaviour=f}),define("ace/unicode",["require","exports","module"],function(e,t,i){"use strict";for(var n=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],o=0,r=[],s=0;s<n.length;s+=2)r.push(o+=n[s]),n[s+1]&&r.push(45,o+=n[s+1]);t.wordChars=String.fromCharCode.apply(null,r)}),define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,i){"use strict";function n(){this.HighlightRules=r}var s=e("../config"),o=e("../tokenizer").Tokenizer,r=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,l=e("../unicode"),C=e("../lib/lang"),g=e("../token_iterator").TokenIterator,m=e("../range").Range;!function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new o(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,o,i,n){var r=o.doc,s=!0,a=!0,l=1/0,c=o.getTabSize(),t=!1;if(this.lineCommentStart){g=Array.isArray(this.lineCommentStart)?(v=this.lineCommentStart.map(C.escapeRegExp).join("|"),this.lineCommentStart[0]):(v=C.escapeRegExp(this.lineCommentStart),this.lineCommentStart),v=new RegExp("^(\\s*)(?:"+v+") ?"),t=o.getUseSoftTabs();var u=function(e,t){var i,n,o=e.match(v);o&&(i=o[1].length,n=o[0].length,f(e,i,n)||" "!=o[0][n-1]||n--,r.removeInLine(t,i,n))},d=g+" ",h=function(e,t){s&&!/\S/.test(e)||(f(e,l,l)?r.insertInLine({row:t,column:l},d):r.insertInLine({row:t,column:l},g))},p=function(e,t){return v.test(e)},f=function(e,t,i){for(var n=0;t--&&" "==e.charAt(t);)n++;if(n%c!=0)return!1;for(n=0;" "==e.charAt(i++);)n++;return 2<c?n%c!=c-1:n%c==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,m=this.blockComment.end,v=new RegExp("^(\\s*)(?:"+C.escapeRegExp(g)+")"),y=new RegExp("(?:"+C.escapeRegExp(m)+")\\s*$"),h=function(e,t){p(e,t)||s&&!/\S/.test(e)||(r.insertInLine({row:t,column:e.length},m),r.insertInLine({row:t,column:l},g))},u=function(e,t){var i;(i=e.match(y))&&r.removeInLine(t,e.length-i[0].length,e.length),(i=e.match(v))&&r.removeInLine(t,i[1].length,i[0].length)},p=function(e,t){if(v.test(e))return!0;for(var i=o.getTokens(t),n=0;n<i.length;n++)if("comment"===i[n].type)return!0}}function b(e){for(var t=i;t<=n;t++)e(r.getLine(t),t)}var w=1/0;b(function(e,t){var i=e.search(/\S/);-1!==i?(i<l&&(l=i),a&&!p(e,t)&&(a=!1)):w>e.length&&(w=e.length)}),l==1/0&&(l=w,a=s=!1),t&&l%c!=0&&(l=Math.floor(l/c)*c),b(a?u:h)},this.toggleBlockComment=function(e,t,i,n){var o=this.blockComment;if(o){!o.start&&o[0]&&(o=o[0]);var r,s,a=(h=new g(t,n.row,n.column)).getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(;a&&/comment/.test(a.type);){if(-1!=(p=a.value.indexOf(o.start))){var c=h.getCurrentTokenRow(),u=h.getCurrentTokenColumn()+p,d=new m(c,u,c,u+o.start.length);break}a=h.stepBackward()}for(var h,p,a=(h=new g(t,n.row,n.column)).getCurrentToken();a&&/comment/.test(a.type);){if(-1!=(p=a.value.indexOf(o.end))){var c=h.getCurrentTokenRow(),u=h.getCurrentTokenColumn()+p,f=new m(c,u,c,u+o.end.length);break}a=h.stepForward()}f&&t.remove(f),d&&(t.remove(d),r=d.start.row,s=-o.start.length)}else s=o.start.length,r=i.start.row,t.insert(i.end,o.end),t.insert(i.start,o.start);l.start.row==r&&(l.start.column+=s),l.end.row==r&&(l.end.column+=s),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,i){return this.$getIndent(t)},this.checkOutdent=function(e,t,i){return!1},this.autoOutdent=function(e,t,i){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var n in this.$embeds=[],this.$modes={},e){var t,i,o;e[n]&&(i=(t=e[n]).prototype.$id,(o=s.$modes[i])||(s.$modes[i]=o=new t),s.$modes[n]||(s.$modes[n]=o),this.$embeds.push(n),this.$modes[n]=o)}for(var r=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],n=0;n<r.length;n++)!function(e){var t=r[n],i=e[t];e[r[n]]=function(){return this.$delegator(t,arguments,i)}}(this)},this.$delegator=function(e,t,i){var n=t[0]||"start";if("string"!=typeof n){if(Array.isArray(n[2])){var o=n[2][n[2].length-1];if(s=this.$modes[o])return s[e].apply(s,[n[1]].concat([].slice.call(t,1)))}n=n[0]||"start"}for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var s,a=n.split(this.$embeds[r]);if(!a[0]&&a[1])return t[0]=a[1],(s=this.$modes[this.$embeds[r]])[e].apply(s,t)}o=i.apply(this,t);return i?o:void 0},this.transformAction=function(e,t,i,n,o){if(this.$behaviour){var r,s=this.$behaviour.getBehaviours();for(r in s)if(s[r][t]){var a=s[r][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,i=[];for(s in t)for(var n=t[s],o=0,r=n.length;o<r;o++)if("string"==typeof n[o].token)/keyword|support|storage/.test(n[o].token)&&i.push(n[o].regex);else if("object"==typeof n[o].token)for(var s,a=0,l=n[o].token.length;a<l;a++)/keyword|support|storage/.test(n[o].token[a])&&(s=n[o].regex.match(/\(.+?\)/g)[a],i.push(s.substr(1,s.length-2)));this.completionKeywords=i}return e?i.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,i,n){return(this.$keywordList||this.$createKeywordList()).map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(n.prototype),t.Mode=n}),define("ace/apply_delta",["require","exports","module"],function(e,t,i){"use strict";t.applyDelta=function(e,t,i){var n=t.start.row,o=t.start.column,r=e[n]||"";switch(t.action){case"insert":1===t.lines.length?e[n]=r.substring(0,o)+t.lines[0]+r.substring(o):(s=[n,1].concat(t.lines),e.splice.apply(e,s),e[n]=r.substring(0,o)+e[n],e[n+t.lines.length-1]+=r.substring(o));break;case"remove":var s=t.end.column,a=t.end.row;n===a?e[n]=r.substring(0,o)+r.substring(s):e.splice(n,a-n+1,r.substring(0,o)+e[a].substring(s))}}}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){"use strict";var n=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,e=t.Anchor=function(e,t,i){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===i?this.setPosition(t.row,t.column):this.setPosition(t,i)};!function(){function a(e,t,i){i=i?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&i}n.implement(this,o),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){e.start.row==e.end.row&&e.start.row!=this.row||e.start.row>this.row||(e=function(e,t,i){var n="insert"==e.action,o=(n?1:-1)*(e.end.row-e.start.row),r=(n?1:-1)*(e.end.column-e.start.column),s=e.start,n=n?s:e.end;if(a(t,s,i))return{row:t.row,column:t.column};if(a(n,t,!i))return{row:t.row+o,column:t.column+(t.row==n.row?r:0)};return{row:s.row,column:s.column}}(e,{row:this.row,column:this.column},this.$insertRight),this.setPosition(e.row,e.column,!0))},this.setPosition=function(e,t,i){i=i?{row:e,column:t}:this.$clipPositionToDocument(e,t);this.row==i.row&&this.column==i.column||(e={row:this.row,column:this.column},this.row=i.row,this.column=i.column,this._signal("change",{old:e,value:i}))},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var i={};return e>=this.document.getLength()?(i.row=Math.max(0,this.document.getLength()-1),i.column=this.document.getLine(i.row).length):e<0?(i.row=0,i.column=0):(i.row=e,i.column=Math.min(this.document.getLine(i.row).length,Math.max(0,t))),t<0&&(i.column=0),i}}.call(e.prototype)}),define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,i){"use strict";function n(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)}var o=e("./lib/oop"),r=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,l=e("./anchor").Anchor;!function(){o.implement(this,s),this.setValue=function(e){var t=this.getLength()-1;this.remove(new a(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new l(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){e=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t,i;return e.start.row===e.end.row?t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)]:((t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column),i=t.length-1,e.end.row-e.start.row==i&&(t[i]=t[i].substring(0,e.end.column))),t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var i=this.clippedPos(e.row,e.column),e=this.pos(e.row,e.column+t.length);return this.applyDelta({start:i,end:e,action:"insert",lines:[t]},!0),this.clonePos(e)},this.clippedPos=function(e,t){var i=this.getLength(),i=(void 0===e?e=i:e<0?e=0:i<=e&&(e=i-1,t=void 0),this.getLine(e));return null==t&&(t=i.length),{row:e,column:t=Math.min(Math.max(t,0),i.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var i=0,i=(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),0):(t=[""].concat(t),this.$lines[--e].length);this.insertMergedLines({row:e,column:i},t)},this.insertMergedLines=function(e,t){var e=this.clippedPos(e.row,e.column),i={row:e.row+t.length-1,column:(1==t.length?e.column:0)+t[t.length-1].length};return this.applyDelta({start:e,end:i,action:"insert",lines:t}),this.clonePos(i)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),e=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:e,action:"remove",lines:this.getLinesForRange({start:t,end:e})}),this.clonePos(t)},this.removeInLine=function(e,t,i){t=this.clippedPos(e,t),e=this.clippedPos(e,i);return this.applyDelta({start:t,end:e,action:"remove",lines:this.getLinesForRange({start:t,end:e})},!0),this.clonePos(t)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var i=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&0<e,n=t<this.getLength()-1,o=i?e-1:e,i=i?this.getLine(o).length:0,r=n?t+1:t,n=n?0:this.getLine(r).length,o=new a(o,i,r,n),i=this.$lines.slice(e,t+1);return this.applyDelta({start:o.start,end:o.end,action:"remove",lines:this.getLinesForRange(o)}),i},this.removeNewLine=function(e){e<this.getLength()-1&&0<=e&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){return e instanceof a||(e=a.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;0<=t;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var i="insert"==e.action;(i?e.lines.length<=1&&!e.lines[0]:!a.comparePoints(e.start,e.end))||(i&&2e4<e.lines.length?this.$splitAndapplyLargeDelta(e,2e4):(r(this.$lines,e,t),this._signal("change",e)))},this.$safeApplyDelta=function(e){var t=this.$lines.length;("remove"==e.action&&e.start.row<t&&e.end.row<t||"insert"==e.action&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){for(var i=e.lines,n=i.length-t+1,o=e.start.row,r=e.start.column,s=0,a=0;s<n;s=a){a+=t-1;var l=i.slice(s,a);l.push(""),this.applyDelta({start:this.pos(o+s,r),end:this.pos(o+a,r=0),action:e.action,lines:l},!0)}e.lines=i.slice(s),e.start.row=o+s,e.start.column=r,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,o=t||0,r=i.length;o<r;o++)if((e-=i[o].length+n)<0)return{row:o,column:e+i[o].length+n};return{row:r-1,column:e+i[r-1].length+n}},this.positionToIndex=function(e,t){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,o=0,r=Math.min(e.row,i.length),s=t||0;s<r;++s)o+=i[s].length+n;return o+e.column}}.call(n.prototype),t.Document=n}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var a=this;this.$worker=function(){if(a.running){for(var e=new Date,t=a.currentLine,i=-1,n=a.doc,o=t;a.lines[t];)t++;var r=n.getLength(),s=0;for(a.running=!1;t<r;){for(a.$tokenizeRow(t),i=t;t++,a.lines[t];);if(++s%5==0&&20<new Date-e){a.running=setTimeout(a.$worker,20);break}}a.currentLine=t,o<=(i=-1==i?t:i)&&a.fireUpdateEvent(o,i)}}}var o=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter;!function(){o.implement(this,r),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){this._signal("update",{data:{first:e,last:t}})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,i=e.end.row-t;0==i?this.lines[t]=null:"remove"==e.action?(this.lines.splice(t,1+i,null),this.states.splice(t,1+i,null)):((e=Array(1+i)).unshift(t,1),this.lines.splice.apply(this.lines,e),this.states.splice.apply(this.states,e)),this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),i=this.states[e-1],t=this.tokenizer.getLineTokens(t,i,e);return this.states[e]+""!=t.state+""?(this.states[e]=t.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=t.tokens}}.call(n.prototype),t.BackgroundTokenizer=n}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,i){"use strict";function n(e,t,i){this.setRegexp(e),this.clazz=t,this.type=i||"text"}var c=e("./lib/lang"),u=(e("./lib/oop"),e("./range").Range);!function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,i,n){if(this.regExp)for(var o=n.firstRow,r=n.lastRow,s=o;s<=r;s++){var a=this.cache[s];null==a&&(a=(a=(a=c.getMatchOffsets(i.getLine(s),this.regExp)).length>this.MAX_RANGES?a.slice(0,this.MAX_RANGES):a).map(function(e){return new u(s,e.offset,s,e.offset+e.length)}),this.cache[s]=a.length?a:"");for(var l=a.length;l--;)t.drawSingleLineMarker(e,a[l].toScreenRange(i),this.clazz,n)}}}.call(n.prototype),t.SearchHighlight=n}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,i){"use strict";var n=e("../range").Range;function o(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];e=t[t.length-1];this.range=new n(t[0].start.row,t[0].start.column,e.end.row,e.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}!function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach(function(e){e.start.row+=t,e.end.row+=t})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),0<this.range.compareEnd(e.start.row,e.start.column)?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,i){var n,o,r=0,s=this.folds,a=!0;null==t&&(t=this.end.row,i=this.end.column);for(var l=0;l<s.length;l++){if(-1==(o=(n=s[l]).range.compareStart(t,i)))return void e(null,t,i,r,a);if(!e(null,n.start.row,n.start.column,r,a)&&e(n.placeholder,n.start.row,n.start.column,r)||0===o)return;a=!n.sameRow,r=n.end.column}e(null,t,i,r,a)},this.getNextFoldTo=function(e,t){for(var i,n,o=0;o<this.folds.length;o++){if(-1==(n=(i=this.folds[o]).range.compareEnd(e,t)))return{fold:i,kind:"after"};if(0===n)return{fold:i,kind:"inside"}}return null},this.addRemoveChars=function(e,t,i){var n,o=this.getNextFoldTo(e,t);if(o)if(n=o.fold,"inside"==o.kind&&n.start.column!=t&&n.start.row!=e)window.console&&window.console.log(e,t,n);else if(n.start.row==e){var r,s=(r=this.folds).indexOf(n);for(0===s&&(this.start.column+=i);s<r.length;s++){if((n=r[s]).start.column+=i,!n.sameRow)return;n.end.column+=i}this.end.column+=i}},this.split=function(e,t){e=this.getNextFoldTo(e,t);if(!e||"inside"==e.kind)return null;var t=e.fold,e=this.folds,i=this.foldData,t=e.indexOf(t),n=e[t-1],n=(this.end.row=n.end.row,this.end.column=n.end.column,new o(i,e=e.splice(t,e.length-t)));return i.splice(i.indexOf(this)+1,0,n),n},this.merge=function(e){for(var t=e.folds,i=0;i<t.length;i++)this.addFold(t[i]);var n=this.foldData;n.splice(n.indexOf(e),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach(function(e){t.push("  "+e.toString())}),t.push("]"),t.join("\n")},this.idxToPosition=function(e){for(var t=0,i=0;i<this.folds.length;i++){var n=this.folds[i];if((e-=n.start.column-t)<0)return{row:n.start.row,column:n.start.column+e};if((e-=n.placeholder.length)<0)return n.start;t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}.call(o.prototype),t.FoldLine=o}),define("ace/range_list",["require","exports","module","ace/range"],function(e,t,i){"use strict";function n(){this.ranges=[],this.$bias=1}var a=e("./range").Range.comparePoints;!function(){this.comparePoints=a,this.pointIndex=function(e,t,i){for(var n=this.ranges,o=i||0;o<n.length;o++){var r=n[o],s=a(e,r.end);if(0<s);else return r=a(e,r.start),0===s?t&&0!==r?-o-2:o:0<r||0===r&&!t?o:-o-1}return-o-1},this.add=function(e){var t=!e.isEmpty(),i=this.pointIndex(e.start,t),t=this.pointIndex(e.end,t,i=i<0?-i-1:i);return t<0?t=-t-1:t++,this.ranges.splice(i,t-i,e)},this.addList=function(e){for(var t=[],i=e.length;i--;)t.push.apply(t,this.add(e[i]));return t},this.substractPoint=function(e){e=this.pointIndex(e);if(0<=e)return this.ranges.splice(e,1)},this.merge=function(){for(var e=[],t=this.ranges,i=(t=t.sort(function(e,t){return a(e.start,t.start)}))[0],n=1;n<t.length;n++){var o=i,i=t[n],r=a(o.end,i.start);r<0||(0!=r||o.isEmpty()||i.isEmpty())&&(a(o.end,i.end)<0&&(o.end.row=i.end.row,o.end.column=i.end.column),t.splice(n,1),e.push(i),i=o,n--)}return this.ranges=t,e},this.contains=function(e,t){return 0<=this.pointIndex({row:e,column:t})},this.containsPoint=function(e){return 0<=this.pointIndex(e)},this.rangeAtPoint=function(e){e=this.pointIndex(e);if(0<=e)return this.ranges[e]},this.clipRows=function(e,t){var i=this.ranges;if(i[0].start.row>t||i[i.length-1].start.row<e)return[];for(var e=this.pointIndex({row:e,column:0}),n=this.pointIndex({row:t,column:0},e=e<0?-e-1:e),o=(n<0&&(n=-n-1),[]),r=e;r<n;r++)o.push(i[r]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,i=e.end,n=t.row,o=i.row,r=this.ranges,s=0,a=r.length;s<a&&!((u=r[s]).end.row>=n);s++);if("insert"==e.action)for(var l=o-n,c=-t.column+i.column;s<a;s++){if((u=r[s]).start.row>n)break;u.start.row==n&&u.start.column>=t.column&&(u.start.column==t.column&&this.$bias<=0||(u.start.column+=c,u.start.row+=l)),u.end.row==n&&u.end.column>=t.column&&(u.end.column==t.column&&this.$bias<0||(u.end.column==t.column&&0<c&&s<a-1&&u.end.column>u.start.column&&u.end.column==r[s+1].start.column&&(u.end.column-=c),u.end.column+=c,u.end.row+=l))}else for(var u,l=n-o,c=t.column-i.column;s<a;s++){if((u=r[s]).start.row>o)break;u.end.row<o&&(n<u.end.row||n==u.end.row&&t.column<u.end.column)?(u.end.row=n,u.end.column=t.column):u.end.row==o?u.end.column<=i.column?(l||u.end.column>t.column)&&(u.end.column=t.column,u.end.row=t.row):(u.end.column+=c,u.end.row+=l):u.end.row>o&&(u.end.row+=l),u.start.row<o&&(n<u.start.row||n==u.start.row&&t.column<u.start.column)?(u.start.row=n,u.start.column=t.column):u.start.row==o?u.start.column<=i.column?(l||u.start.column>t.column)&&(u.start.column=t.column,u.start.row=t.row):(u.start.column+=c,u.start.row+=l):u.start.row>o&&(u.start.row+=l)}if(0!=l&&s<a)for(;s<a;s++)(u=r[s]).start.row+=l,u.end.row+=l}}.call(n.prototype),t.RangeList=n}),define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(e,t,i){"use strict";var n=e("../range_list").RangeList,e=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};function d(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function r(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}e.inherits(o,n),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach(function(e){e.setFoldLine(t)})},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){r=e,s=this.start,d(r.start,s),d(r.end,s);for(var t=e.start.row,i=e.start.column,n=0,o=-1;n<this.subFolds.length&&1==(o=this.subFolds[n].range.compare(t,i));n++);var r=this.subFolds[n],s=0;if(0==o){if(r.range.containsRange(e))return r.addSubFold(e);s=1}for(var t=e.range.end.row,i=e.range.end.column,a=n,o=-1;a<this.subFolds.length&&1==(o=this.subFolds[a].range.compare(t,i));a++);0==o&&a++;for(var l=this.subFolds.splice(n,a-n,e),c=0==o?l.length-1:l.length,u=s;u<c;u++)e.addSubFold(l[u]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return e=e,t=this.start,r(e.start,t),void r(e.end,t);var t}}.call(o.prototype)}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,i){"use strict";var c=e("../range").Range,h=e("./fold_line").FoldLine,p=e("./fold").Fold,u=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,i){var n=this.getFoldLine(e);if(!n)return null;for(var o=n.folds,r=0;r<o.length;r++){var s=o[r].range;if(s.contains(e,t)&&(1!=i||!s.isEnd(e,t)||s.isEmpty())&&(-1!=i||!s.isStart(e,t)||s.isEmpty()))return o[r]}},this.getFoldsInRange=function(e){var t=e.start,i=e.end,n=this.$foldData,o=[];t.column+=1,--i.column;for(var r=0;r<n.length;r++){var s=n[r].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=n[r].folds,l=0;l<a.length;l++){var c=a[l];if(-2==(s=c.range.compareRange(e)))break;if(2!=s){if(42==s)break;o.push(c)}}}}return--t.column,i.column+=1,o},this.getFoldsInRangeList=function(e){var t;return Array.isArray(e)?(t=[],e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)):t=this.getFoldsInRange(e),t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,i=0;i<t.length;i++)for(var n=0;n<t[i].folds.length;n++)e.push(t[i].folds[n]);return e},this.getFoldStringAt=function(e,t,i,n){if(!(n=n||this.getFoldLine(e)))return null;for(var o,r={end:{column:0}},s=0;s<n.folds.length;s++){var a,l=(a=n.folds[s]).range.compareEnd(e,t);if(-1==l){o=this.getLine(a.start.row).substring(r.end.column,a.start.column);break}if(0===l)return null;r=a}return o=o||this.getLine(a.start.row).substring(r.end.column),-1==i?o.substring(0,t-r.end.column):1==i?o.substring(t-r.end.column):o},this.getFoldLine=function(e,t){var i=this.$foldData,n=0;for(-1==(n=t?i.indexOf(t):n)&&(n=0);n<i.length;n++){var o=i[n];if(o.start.row<=e&&o.end.row>=e)return o;if(o.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var i=this.$foldData,n=0;for(-1==(n=t?i.indexOf(t):n)&&(n=0);n<i.length;n++){var o=i[n];if(o.end.row>=e)return o}return null},this.getFoldedRowCount=function(e,t){for(var i=this.$foldData,n=t-e+1,o=0;o<i.length;o++){var r=i[o],s=r.end.row,r=r.start.row;if(t<=s){r<t&&(e<=r?n-=t-r:n=0);break}e<=s&&(n-=e<=r?s-r:s-e+1)}return n},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var i,n=this.$foldData,o=!1,r=(e instanceof p?i=e:(i=new p(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(i.range),i.start.row),e=i.start.column,s=i.end.row,t=i.end.column,a=this.getFoldAt(r,e,1),l=this.getFoldAt(s,t,-1);if(a&&l==a)return a.addSubFold(i);a&&!a.range.isStart(r,e)&&this.removeFold(a),l&&!l.range.isEnd(s,t)&&this.removeFold(l);e=this.getFoldsInRange(i.range);0<e.length&&(this.removeFolds(e),i.collapseChildren||e.forEach(function(e){i.addSubFold(e)}));for(var c=0;c<n.length;c++){var u=n[c];if(s==u.start.row){u.addFold(i),o=!0;break}if(r==u.end.row){if(u.addFold(i),o=!0,!i.sameRow){var d=n[c+1];if(d&&d.start.row==s){u.merge(d);break}}break}if(s<=u.start.row)break}return o||(u=this.$addFoldLine(new h(this.$foldData,i))),this.$useWrapMode?this.$updateWrapData(u.start.row,u.start.row):this.$updateRowLengthCache(u.start.row,u.start.row),this.$modified=!0,this._signal("changeFold",{data:i,action:"add"}),i},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,i=t.start.row,n=t.end.row,o=this.$foldData,r=t.folds;1==r.length?o.splice(o.indexOf(t),1):t.range.isEnd(e.end.row,e.end.column)?(r.pop(),t.end.row=r[r.length-1].end.row,t.end.column=r[r.length-1].end.column):t.range.isStart(e.start.row,e.start.column)?(r.shift(),t.start.row=r[0].start.row,t.start.column=r[0].start.column):e.sameRow?r.splice(r.indexOf(e),1):((r=(o=t.split(e.start.row,e.start.column)).folds).shift(),o.start.row=r[0].start.row,o.start.column=r[0].start.column),this.$updating||(this.$useWrapMode?this.$updateWrapData(i,n):this.$updateRowLengthCache(i,n)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(e){t.restoreRange(e),this.addFold(e)},this),0<t.collapseChildren&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var i;if(null==e)i=new c(0,0,this.getLength(),0),null==t&&(t=!0);else if("number"==typeof e)i=new c(e,0,e,this.getLine(e).length);else if("row"in e)i=c.fromPoints(e,e);else{if(Array.isArray(e))return n=[],e.forEach(function(e){n=n.concat(this.unfold(e))},this),n;i=e}for(var n,e=n=this.getFoldsInRangeList(i);1==n.length&&c.comparePoints(n[0].start,i.start)<0&&0<c.comparePoints(n[0].end,i.end);)this.expandFolds(n),n=this.getFoldsInRangeList(i);if(0!=t?this.removeFolds(n):this.expandFolds(n),e.length)return e},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){t=this.getFoldLine(e,t);return t?t.end.row:e},this.getRowFoldStart=function(e,t){t=this.getFoldLine(e,t);return t?t.start.row:e},this.getFoldDisplayLine=function(e,t,i,o,r){null==o&&(o=e.start.row),null==r&&(r=0),null==t&&(t=e.end.row),null==i&&(i=this.getLine(t).length);var s=this.doc,a="";return e.walk(function(e,t,i,n){if(!(t<o)){if(t==o){if(i<r)return;n=Math.max(r,n)}a+=null!=e?e:s.getLine(t).substring(n,i)}},t,i),a},this.getDisplayLine=function(e,t,i,n){var o=this.getFoldLine(e);return o?this.getFoldDisplayLine(o,e,t,i,n):(o=this.doc.getLine(e)).substring(n||0,t||o.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(e){e=e.folds.map(function(e){return e.clone()});return new h(t,e)})},this.toggleFold=function(e){var t=this.selection.getRange();if(t.isEmpty()){var i,n=t.start;if(i=this.getFoldAt(n.row,n.column))return void this.expandFold(i);(o=this.findMatchingBracket(n))?1==t.comparePoint(o)?t.end=o:(t.start=o,t.start.column++,t.end.column--):(o=this.findMatchingBracket({row:n.row,column:n.column+1}))?(1==t.comparePoint(o)?t.end=o:t.start=o,t.start.column++):t=this.getCommentFoldRange(n.row,n.column)||t}else{var o=this.getFoldsInRange(t);if(e&&o.length)return void this.expandFolds(o);1==o.length&&(i=o[0])}if((i=i||this.getFoldAt(t.start.row,t.start.column))&&i.range.toString()==t.toString())this.expandFold(i);else{n="...";if(!t.isMultiLine()){if((n=this.getTextRange(t)).length<4)return;n=n.trim().substring(0,2)+".."}this.addFold(n,t)}},this.getCommentFoldRange=function(e,t,i){var n=new u(this,e,t),o=n.getCurrentToken(),r=o&&o.type;if(o&&/^comment|string/.test(r)){"comment"==(r=r.match(/comment|string/)[0])&&(r+="|doc-start");var s=new RegExp(r),r=new c;if(1!=i){for(;(o=n.stepBackward())&&s.test(o.type););n.stepForward()}if(r.start.row=n.getCurrentTokenRow(),r.start.column=n.getCurrentTokenColumn()+2,n=new u(this,e,t),-1!=i){var a=-1;do{if(o=n.stepForward(),-1==a){var l=this.getState(n.$row);s.test(l)||(a=n.$row)}else if(n.$row>a)break}while(o&&s.test(o.type));o=n.stepBackward()}else o=n.getCurrentToken();return r.end.row=n.getCurrentTokenRow(),r.end.column=n.getCurrentTokenColumn()+o.value.length-2,r}},this.foldAll=function(e,t,i,n){null==i&&(i=1e5);var o=this.foldWidgets;if(o){t=t||this.getLength();for(var r,s=e=e||0;s<t;s++)null==o[s]&&(o[s]=this.getFoldWidget(s)),"start"!=o[s]||n&&!n(s)||(r=this.getFoldWidgetRange(s))&&r.isMultiLine()&&r.end.row<=t&&r.start.row>=e&&(s=r.end.row,r.collapseChildren=i,this.addFold("...",r))}},this.foldToLevel=function(e){for(this.foldAll();0<e--;)this.unfold(null,!1)},this.foldAllComments=function(){var o=this;this.foldAll(null,null,null,function(e){for(var t=o.getTokens(e),i=0;i<t.length;i++){var n=t[i];if("text"!=n.type||!/^\s+$/.test(n.value))return!!/comment/.test(n.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");this.$foldStyle!=e&&("manual"==(this.$foldStyle=e)&&this.unfold(),e=this.$foldMode,this.$setFolding(null),this.$setFolding(e))},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var i=this.foldWidgets;if(!i||t&&i[e])return{};for(var n=e-1;0<=n;){var o=i[n];if("start"==(o=null==o?i[n]=this.getFoldWidget(n):o)){var r=this.getFoldWidgetRange(n),s=s||r;if(r&&r.end.row>=e)break}n--}return{range:-1!==n&&r,firstRange:s}},this.onFoldWidgetClick=function(e,t){var i={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};this.$toggleFoldWidget(e,i)||(e=t.target||t.srcElement)&&/ace_fold-widget/.test(e.className)&&(e.className+=" ace_invalid")},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var i=this.getFoldWidget(e),n=this.getLine(e),i="end"===i?-1:1,n=this.getFoldAt(e,-1==i?0:n.length,i);if(n)return t.children||t.all?this.removeFold(n):this.expandFold(n),n;var o,r,i=this.getFoldWidgetRange(e,!0);return i&&!i.isMultiLine()&&(n=this.getFoldAt(i.start.row,i.start.column,1))&&i.isEqual(n.range)?(this.removeFold(n),n):(t.siblings?((n=this.getParentFoldRangeData(e)).range&&(o=n.range.start.row+1,r=n.range.end.row),this.foldAll(o,r,t.all?1e4:0)):t.children?(r=i?i.end.row:this.getLength(),this.foldAll(e+1,r,t.all?1e4:0)):i&&(t.all&&(i.collapseChildren=1e4),this.addFold("...",i)),i)}},this.toggleFoldWidget=function(e){var t,i=this.selection.getCursor().row;i=this.getRowFoldStart(i),this.$toggleFoldWidget(i,{})||(t=(t=this.getParentFoldRangeData(i,!0)).range||t.firstRange)&&(i=t.start.row,(i=this.getFoldAt(i,this.getLine(i).length,1))?this.removeFold(i):this.addFold("...",t))},this.updateFoldWidgets=function(e){var t=e.start.row,i=e.end.row-t;0==i?this.foldWidgets[t]=null:"remove"==e.action?this.foldWidgets.splice(t,1+i,null):((e=Array(1+i)).unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,e))},this.tokenizerUpdateFoldWidgets=function(e){e=e.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,i){"use strict";var d=e("../token_iterator").TokenIterator,a=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;t=t||this.getLine(e.row).charAt(e.column-1);if(""==t)return null;t=t.match(/([\(\[\{])|([\)\]\}])/);return t?t[1]?this.$findClosingBracket(t[1],e):this.$findOpeningBracket(t[2],e):null},this.getBracketRange=function(e){var t,i,n=this.getLine(e.row),o=!0,r=n.charAt(e.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(s||(r=n.charAt(e.column),e={row:e.row,column:e.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),o=!1),!s)return null;if(s[1]){if(!(i=this.$findClosingBracket(s[1],e)))return null;t=a.fromPoints(e,i),o||(t.end.column++,t.start.column--),t.cursor=t.end}else{if(!(i=this.$findOpeningBracket(s[2],e)))return null;t=a.fromPoints(i,e),o||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(e){var t=this.getLine(e.row),i=t.charAt(e.column-1),n=i&&i.match(/([\(\[\{])|([\)\]\}])/);if(n||(i=t.charAt(e.column),e={row:e.row,column:e.column+1},n=i&&i.match(/([\(\[\{])|([\)\]\}])/)),!n)return null;t=new a(e.row,e.column-1,e.row,e.column),i=n[1]?this.$findClosingBracket(n[1],e):this.$findOpeningBracket(n[2],e);return i?[t,new a(i.row,i.column,i.row,i.column+1)]:[t]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,i){var n=this.$brackets[e],o=1,r=new d(this,t.row,t.column),s=r.getCurrentToken();if(s=s||r.stepForward()){i=i||new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+");for(var a=t.column-r.getCurrentTokenColumn()-2,l=s.value;;){for(;0<=a;){var c=l.charAt(a);if(c==n){if(0==--o)return{row:r.getCurrentTokenRow(),column:a+r.getCurrentTokenColumn()}}else c==e&&(o+=1);--a}for(;(s=r.stepBackward())&&!i.test(s.type););if(null==s)break;a=(l=s.value).length-1}return null}},this.$findClosingBracket=function(e,t,i){var n=this.$brackets[e],o=1,r=new d(this,t.row,t.column),s=r.getCurrentToken();if(s=s||r.stepForward()){i=i||new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+");for(var a=t.column-r.getCurrentTokenColumn();;){for(var l=s.value,c=l.length;a<c;){var u=l.charAt(a);if(u==n){if(0==--o)return{row:r.getCurrentTokenRow(),column:a+r.getCurrentTokenColumn()}}else u==e&&(o+=1);a+=1}for(;(s=r.stepForward())&&!i.test(s.type););if(null==s)break;a=0}return null}}}}),define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,i){"use strict";function n(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++n.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new h(e)),this.setDocument(e),this.selection=new a(this),this.$bidiHandler=new s(this),l.resetOptions(this),this.setMode(t),l._signal("session",this)}var o=e("./lib/oop"),r=e("./lib/lang"),s=e("./bidihandler").BidiHandler,l=e("./config"),c=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,u=e("./mode/text").Mode,d=e("./range").Range,h=e("./document").Document,p=e("./background_tokenizer").BackgroundTokenizer,m=e("./search_highlight").SearchHighlight;n.$uid=0,function(){o.implement(this,c),this.setDocument=function(e){this.doc&&this.doc.off("change",this.$onChange),(this.doc=e).on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,e=this.$getRowCacheIndex(this.$docRowCache,e)+1;e<t&&(this.$docRowCache.splice(e,t),this.$screenRowCache.splice(e,t))},this.$getRowCacheIndex=function(e,t){for(var i=0,n=e.length-1;i<=n;){var o=i+n>>1,r=e[o];if(r<t)i=1+o;else{if(!(t<r))return o;n=o-1}}return i-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){e=e.data;this.$resetRowCache(e.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var i=this.bgTokenizer.getTokens(e),n=0;if(null==t)var o=i.length-1,n=this.getLine(e).length;else for(o=0;o<i.length&&!(t<=(n+=i[o].value.length));o++);return(e=i[o])?(e.index=o,e.start=n-e.value.length,e):null},this.setUndoManager=function(e){var t;this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e?(e.addSession(t=this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)):this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){(t=void 0===t?"ace_breakpoint":t)?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,i,n){var o=this.$markerId++,e={range:e,type:i||"line",renderer:"function"==typeof i?i:null,clazz:t,inFront:!!n,id:o};return n?(this.$frontMarkers[o]=e,this._signal("changeFrontMarker")):(this.$backMarkers[o]=e,this._signal("changeBackMarker")),o},this.addDynamicMarker=function(e,t){var i;if(e.update)return i=this.$markerId++,e.id=i,e.inFront=!!t,t?(this.$frontMarkers[i]=e,this._signal("changeFrontMarker")):(this.$backMarkers[i]=e,this._signal("changeBackMarker")),e},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){var t;this.$searchHighlight||(t=new m(null,"ace_selected-word","text"),this.$searchHighlight=this.addDynamicMarker(t)),this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,i,n){"number"!=typeof t&&(i=t,t=e),i=i||"ace_step";e=new d(e,0,t,1/0);return e.id=this.addMarker(e,i,"fullLine",n),e},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){e=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(e,t){var i,n=this.getLine(e),o=!1,r=(i=(o=(o=0<t?!!n.charAt(t-1).match(this.tokenRe):o)||!!n.charAt(t).match(this.tokenRe))?this.tokenRe:/^\s+$/.test(n.slice(t-1,t+1))?/\s/:this.nonTokenRe,t);if(0<r){for(;0<=--r&&n.charAt(r).match(i););r++}for(var s=t;s<n.length&&n.charAt(s).match(i);)s++;return new d(e,r,e,s)},this.getAWordRange=function(e,t){for(var i=this.getWordRange(e,t),n=this.getLine(i.end.row);n.charAt(i.end.column).match(/[ \t]/);)i.end.column+=1;return i},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=l.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var i=e,n=i.path}else n=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new u),this.$modes[n]&&!i)return this.$onChangeMode(this.$modes[n]),void(t&&t());this.$modeId=n,l.loadModule(["mode",n],function(e){if(this.$modeId!==n)return t&&t();this.$modes[n]&&!i?this.$onChangeMode(this.$modes[n]):e&&e.Mode&&(e=new e.Mode(i),i||((this.$modes[n]=e).$id=n),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){var i,n,o,r;t||(this.$modeId=e.$id),this.$mode!==e&&(i=this.$mode,this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker(),void 0!==(n=e.getTokenizer()).on&&(o=this.onReloadTokenizer.bind(this),n.on("update",o)),this.bgTokenizer?this.bgTokenizer.setTokenizer(n):(this.bgTokenizer=new p(n),(r=this).bgTokenizer.on("update",function(e){r._signal("tokenizerUpdate",e)})),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:i,mode:e})))},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){l.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>t&&(t=e.screenWidth)}),this.lineWidgetWidth=t},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),i=this.$rowLengthCache,n=0,o=0,r=this.$foldData[o],s=r?r.start.row:1/0,a=t.length,l=0;l<a;l++){if(s<l){if(a<=(l=r.end.row+1))break;s=(r=this.$foldData[o++])?r.start.row:1/0}null==i[l]&&(i[l]=this.$getStringScreenWidth(t[l])[0]),i[l]>n&&(n=i[l])}this.screenWidth=n}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var i=e.length-1;-1!=i;i--){var n=e[i];"insert"==n.action||"remove"==n.action?this.doc.revertDelta(n):n.folds&&this.addFolds(n.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var i=0;i<e.length;i++){var n=e[i];"insert"!=n.action&&"remove"!=n.action||this.doc.$safeApplyDelta(n)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function i(e){return t?"insert"!==e.action:"insert"===e.action}for(var n,o,r=0;r<e.length;r++){var s=e[r];s.start&&(n?i(s)?(o=s.start,-1==n.compare(o.row,o.column)&&n.setStart(o),o=s.end,1==n.compare(o.row,o.column)&&n.setEnd(o)):(o=s.start,-1==n.compare(o.row,o.column)&&(n=d.fromPoints(s.start,s.start))):n=i(s)?d.fromPoints(s.start,s.end):d.fromPoints(s.start,s.start))}return n},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,i){var n,o,r,s=this.getTextRange(e),a=this.getFoldsInRange(e),t=d.fromPoints(t,t);return i||(this.remove(e),o=e.start.row-e.end.row,(r=o?-e.end.column:e.start.column-e.end.column)&&(t.start.row==e.end.row&&t.start.column>e.end.column&&(t.start.column+=r),t.end.row==e.end.row&&t.end.column>e.end.column&&(t.end.column+=r)),o&&t.start.row>=e.end.row&&(t.start.row+=o,t.end.row+=o)),t.end=this.insert(t.start,s),a.length&&(n=e.start,i=t.start,o=i.row-n.row,r=i.column-n.column,this.addFolds(a.map(function(e){return(e=e.clone()).start.row==n.row&&(e.start.column+=r),e.end.row==n.row&&(e.end.column+=r),e.start.row+=o,e.end.row+=o,e}))),t},this.indentRows=function(e,t,i){i=i.replace(/\t/g,this.getTabString());for(var n=e;n<=t;n++)this.doc.insertInLine({row:n,column:0},i)},this.outdentRows=function(e){for(var t=e.collapseRows(),i=new d(0,0,0,0),n=this.getTabSize(),o=t.start.row;o<=t.end.row;++o){var r=this.getLine(o);i.start.row=o,i.end.row=o;for(var s=0;s<n&&" "==r.charAt(s);++s);s<n&&"\t"==r.charAt(s)?(i.start.column=s,i.end.column=s+1):(i.start.column=0,i.end.column=s),this.remove(i)}},this.$moveLines=function(e,t,i){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),i<0){if((o=this.getRowFoldStart(e+i))<0)return 0;var n=o-e}else if(0<i){if((o=this.getRowFoldEnd(t+i))>this.doc.getLength()-1)return 0;n=o-t}else{e=this.$clipRowToDocument(e);n=(t=this.$clipRowToDocument(t))-e+1}var o=new d(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(o).map(function(e){return(e=e.clone()).start.row+=n,e.end.row+=n,e}),i=0==i?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+n,i),o.length&&this.addFolds(o),n},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){var i;return t=Math.max(0,t),t=e<0?e=0:(i=this.doc.getLength())<=e?this.doc.getLine(e=i-1).length:Math.min(this.doc.getLine(e).length,t),{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){e!=this.$useWrapMode&&(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e&&(e=this.getLength(),this.$wrapData=Array(e),this.$updateWrapData(0,e-1)),this._signal("changeWrapMode"))},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var i=this.$wrapLimitRange,t=(i.max<0&&(i={min:t,max:t}),this.$constrainWrapLimit(e,i.min,i.max));return t!=this.$wrapLimit&&1<t&&(this.$wrapLimit=t,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,i){return t&&(e=Math.max(t,e)),e=i?Math.min(i,e):e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,i=e.action,n=e.start,o=e.end,r=n.row,s=o.row,a=s-r,l=null;if(this.$updating=!0,0!=a)if("remove"===i){this[t?"$wrapData":"$rowLengthCache"].splice(r,a);var c=this.$foldData,l=this.getFoldsInRange(e);this.removeFolds(l);var u=0;for((p=this.getFoldLine(o.row))&&(p.addRemoveChars(o.row,o.column,n.column-o.column),p.shiftRow(-a),(d=this.getFoldLine(r))&&d!==p&&(d.merge(p),p=d),u=c.indexOf(p)+1);u<c.length;u++)(p=c[u]).start.row>=o.row&&p.shiftRow(-a);s=r}else{var d=Array(a),h=(d.unshift(r,0),t?this.$wrapData:this.$rowLengthCache),c=(h.splice.apply(h,d),this.$foldData),u=0;for((p=this.getFoldLine(r))&&(0==(h=p.range.compareInside(n.row,n.column))?(p=p.split(n.row,n.column))&&(p.shiftRow(a),p.addRemoveChars(s,0,o.column-n.column)):-1==h&&(p.addRemoveChars(r,0,o.column-n.column),p.shiftRow(a)),u=c.indexOf(p)+1);u<c.length;u++)(p=c[u]).start.row>=r&&p.shiftRow(a)}else{var p,a=Math.abs(e.start.column-e.end.column);"remove"===i&&(l=this.getFoldsInRange(e),this.removeFolds(l),a=-a),(p=this.getFoldLine(r))&&p.addRemoveChars(r,n.column,a)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(r,s):this.$updateRowLengthCache(r,s),l},this.$updateRowLengthCache=function(e,t,i){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var s,i,a=this.doc.getAllLines(),n=this.getTabSize(),o=this.$wrapData,r=this.$wrapLimit,l=e;for(t=Math.min(t,a.length-1);l<=t;)(i=this.getFoldLine(l,i))?(s=[],i.walk(function(e,t,i,n){var o;if(null!=e){(o=this.$getDisplayTokens(e,s.length))[0]=f;for(var r=1;r<o.length;r++)o[r]=g}else o=this.$getDisplayTokens(a[t].substring(n,i),s.length);s=s.concat(o)}.bind(this),i.end.row,a[i.end.row].length+1),o[i.start.row]=this.$computeWrapSplits(s,r,n),l=i.end.row+1):(s=this.$getDisplayTokens(a[l]),o[l]=this.$computeWrapSplits(s,r,n),l++)};var f=3,g=4;function a(e){return!(e<4352)&&(4352<=e&&e<=4447||4515<=e&&e<=4519||4602<=e&&e<=4607||9001<=e&&e<=9002||11904<=e&&e<=11929||11931<=e&&e<=12019||12032<=e&&e<=12245||12272<=e&&e<=12283||12288<=e&&e<=12350||12353<=e&&e<=12438||12441<=e&&e<=12543||12549<=e&&e<=12589||12593<=e&&e<=12686||12688<=e&&e<=12730||12736<=e&&e<=12771||12784<=e&&e<=12830||12832<=e&&e<=12871||12880<=e&&e<=13054||13056<=e&&e<=19903||19968<=e&&e<=42124||42128<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||55216<=e&&e<=55238||55243<=e&&e<=55291||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65106||65108<=e&&e<=65126||65128<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510)}this.$computeWrapSplits=function(o,e,r){if(0==o.length)return[];var s=[],t=o.length,a=0,l=0,c=this.$wrapAsCode,u=this.$indentedSoftWrap,d=e<=Math.max(2*r,8)||!1===u?0:Math.floor(e/2);function i(e){for(var t=e-a,i=a;i<e;i++){var n=o[i];12!==n&&2!==n||--t}s.length||(h=function(){var e=0;if(0===d)return e;if(u)for(var t=0;t<o.length;t++){var i=o[t];if(10==i)e+=1;else if(11==i)e+=r;else if(12!=i)break}return c&&!1!==u&&(e+=r),Math.min(e,d)}(),s.indent=h),l+=t,s.push(l),a=e}for(var h=0;e-h<t-a;){var n=a+e-h;if(10<=o[n-1]&&10<=o[n])i(n);else if(o[n]==f||o[n]==g){for(;n!=a-1&&o[n]!=f;n--);if(a<n)i(n);else{for(n=a+e;n<o.length&&o[n]==g;n++);if(n==o.length)break;i(n)}}else{for(var p=Math.max(n-(e-(e>>2)),a-1);p<n&&o[n]<f;)n--;if(c){for(;p<n&&o[n]<f;)n--;for(;p<n&&9==o[n];)n--}else for(;p<n&&o[n]<10;)n--;p<n?i(++n):(2==o[n=a+e]&&n--,i(n-h))}}return s},this.$getDisplayTokens=function(e,t){var i,n=[];t=t||0;for(var o=0;o<e.length;o++){var r=e.charCodeAt(o);if(9==r){i=this.getScreenTabSize(n.length+t),n.push(11);for(var s=1;s<i;s++)n.push(12)}else 32==r?n.push(10):39<r&&r<48||57<r&&r<64?n.push(9):4352<=r&&a(r)?n.push(1,2):n.push(1)}return n},this.$getStringScreenWidth=function(e,t,i){if(0==t)return[0,0];var n,o;for(null==t&&(t=1/0),i=i||0,o=0;o<e.length&&(9==(n=e.charCodeAt(o))?i+=this.getScreenTabSize(i):4352<=n&&a(n)?i+=2:i+=1,!(t<i));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+t:t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){var t;return this.$useWrapMode?(e=this.screenToDocumentPosition(e,Number.MAX_VALUE),(t=this.$wrapData[e.row]).length&&t[0]<e.column?t.indent:0):0},this.getScreenLastRowColumn=function(e){e=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(e,t){e=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(e)},this.getDocumentLastRowColumnPosition=function(e,t){e=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(e,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){if(this.$useWrapMode)return this.$wrapData[e]},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,i){if(e<0)return{row:0,column:0};for(var n,o,r,s=0,a=0,l=0,c=0,u=this.$screenRowCache,d=this.$getRowCacheIndex(u,e),h=u.length,p=(r=h&&0<=d?(l=u[d],s=this.$docRowCache[d],e>u[h-1]):!h,this.getLength()-1),f=this.getNextFoldLine(s),g=f?f.start.row:1/0;l<=e&&!(e<l+(c=this.getRowLength(s))||p<=s);)l+=c,g<++s&&(s=f.end.row+1,g=(f=this.getNextFoldLine(s,f))?f.start.row:1/0),r&&(this.$docRowCache.push(s),this.$screenRowCache.push(l));if(f&&f.start.row<=s)n=this.getFoldDisplayLine(f),s=f.start.row;else{if(l+c<=e||p<s)return{row:p,column:this.getLine(p).length};n=this.getLine(s),f=null}d=0,u=Math.floor(e-l);return this.$useWrapMode&&(h=this.$wrapData[s])&&(o=h[u],0<u&&h.length&&(d=h.indent,a=h[u-1]||h[h.length-1],n=n.substring(a))),void 0!==i&&this.$bidiHandler.isBidiRow(l+u,s,u)&&(t=this.$bidiHandler.offsetToCol(i)),a+=this.$getStringScreenWidth(n,t-d)[1],this.$useWrapMode&&o<=a&&(a=o-1),f?f.idxToPosition(a):{row:s,column:a}},this.documentToScreenPosition=function(e,t){var i=void 0===t?this.$clipPositionToDocument(e.row,e.column):this.$clipPositionToDocument(e,t),n=(e=i.row,t=i.column,0),i=null;(a=this.getFoldAt(e,t,1))&&(e=a.start.row,t=a.start.column);for(var o,r,s=0,a=this.$docRowCache,l=this.$getRowCacheIndex(a,e),c=a.length,u=(r=c&&0<=l?(s=a[l],n=this.$screenRowCache[l],e>a[c-1]):!c,this.getNextFoldLine(s)),d=u?u.start.row:1/0;s<e;){if(d<=s){if(e<(o=u.end.row+1))break;d=(u=this.getNextFoldLine(o,u))?u.start.row:1/0}else o=s+1;n+=this.getRowLength(s),s=o,r&&(this.$docRowCache.push(s),this.$screenRowCache.push(n))}var h="",i=u&&d<=s?(h=this.getFoldDisplayLine(u,e,t),u.start.row):(h=this.getLine(e).substring(0,t),e),l=0;if(this.$useWrapMode){var p=this.$wrapData[i];if(p){for(var f=0;h.length>=p[f];)n++,f++;h=h.substring(p[f-1]||0,h.length),l=0<f?p.indent:0}}return this.lineWidgets&&this.lineWidgets[s]&&this.lineWidgets[s].rowsAbove&&(n+=this.lineWidgets[s].rowsAbove),{row:n,column:l+this.$getStringScreenWidth(h)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,n=0,o=0,r=(t=this.$foldData[o++])?t.start.row:1/0;n<i;){var s=this.$wrapData[n];e+=s?s.length+1:1,r<++n&&(n=t.end.row+1,r=(t=this.$foldData[o++])?t.start.row:1/0)}else for(var e=this.getLength(),a=this.$foldData,o=0;o<a.length;o++)e-=(t=a[o]).end.row-t.start.row;return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(r){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,t,i){if(0===t)return[0,0];var n,o;for(t=t||1/0,i=i||0,o=0;o<e.length&&!(t<(i+="\t"===(n=e.charAt(o))?this.getScreenTabSize(i):r.getCharacterWidth(n)));o++);return[i,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},this.isFullWidth=a}.call(n.prototype),e("./edit_session/folding").Folding.call(n.prototype),e("./edit_session/bracket_match").BracketMatch.call(n.prototype),l.defineOptions(n.prototype,"session",{wrap:{set:function(e){e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e&&((this.$wrap=e)?(this.setWrapLimitRange(e="number"==typeof e?e:null,e),this.setUseWrapMode(!0)):this.setUseWrapMode(!1))},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){0<(e=parseInt(e))&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=n}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,i){"use strict";function n(){this.$options={}}var y=e("./lib/lang"),o=e("./lib/oop"),b=e("./range").Range;!function(){this.set=function(e){return o.mixin(this.$options,e),this},this.getOptions=function(){return y.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var o=this.$options,e=this.$matchIterator(e,o);if(!e)return!1;var r=null;return e.forEach(function(e,t,i,n){return r=new b(e,t,i,n),!(t==n&&o.start&&o.start.start&&0!=o.skipCurrent&&r.isEqual(o.start))||(r=null,!1)}),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var i=t.range,n=i?e.getLines(i.start.row,i.end.row):e.doc.getAllLines(),o=[],r=t.re;if(t.$isMultiLine){var s,a=r.length,l=n.length-a;e:for(var c=r.offset||0;c<=l;c++){for(var u=0;u<a;u++)if(-1==n[c+u].search(r[u]))continue e;var d=n[c],h=n[c+a-1],d=d.length-d.match(r[0])[0].length,h=h.match(r[a-1])[0].length;s&&s.end.row===c&&s.end.column>d||(o.push(s=new b(c,d,c+a-1,h)),2<a&&(c=c+a-2))}}else for(var p=0;p<n.length;p++)for(var f=y.getMatchOffsets(n[p],r),u=0;u<f.length;u++){var g=f[u];o.push(new b(p,g.offset,p,g.offset+g.length))}if(i){for(var m=i.start.column,v=i.start.column,p=0,u=o.length-1;p<u&&o[p].start.column<m&&o[p].start.row==i.start.row;)p++;for(;p<u&&o[u].end.column>v&&o[u].end.row==i.end.row;)u--;for(o=o.slice(p,u+1),p=0,u=o.length;p<u;p++)o[p].start.row+=i.start.row,o[p].end.row+=i.start.row}return o},this.replace=function(e,t){var i=this.$options,n=this.$assembleRegExp(i);if(i.$isMultiLine)return t;if(n){var o=n.exec(e);if(!o||o[0].length!=e.length)return null;if(t=e.replace(n,t),i.preserveCase){t=t.split("");for(var r=Math.min(e.length,e.length);r--;){var s=e[r];s&&s.toLowerCase()!=s?t[r]=t[r].toUpperCase():t[r]=t[r].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var i,n=e.needle;if(!e.needle)return e.re=!1;function o(e){return/\w/.test(e)||i.regExp?"\\b":""}e.regExp||(n=y.escapeRegExp(n)),e.wholeWord&&(i=e,n=o((r=n)[0])+r+o(r[r.length-1]));var r=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,r);try{var s=new RegExp(n,r)}catch(e){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){for(var i=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),n=[],o=0;o<i.length;o++)try{n.push(new RegExp(i[o],t))}catch(e){return!1}return n},this.$matchIterator=function(u,i){var d=this.$assembleRegExp(i);if(!d)return!1;var a,n,l=1==i.backwards,e=0!=i.skipCurrent,t=i.range,o=i.start,r=((o=o||(t?t[l?"end":"start"]:u.selection.getRange())).start&&(o=o[e!=l?"end":"start"]),t?t.start.row:0),s=t?t.end.row:u.getLength()-1;return n=i.$isMultiLine?(a=d.length,function(e,t,i){var n=l?e-a+1:e;if(!(n<0||n+a>u.getLength())){var o=u.getLine(n),e=o.search(d[0]);if(!(!l&&e<t||-1===e)){for(var r=1;r<a;r++)if(-1==(o=u.getLine(n+r)).search(d[r]))return;var s=o.match(d[a-1])[0].length;if(!(l&&t<s))return!!i(n,e,n+a-1,s)||void 0}}}):l?function(e,t,i){var n,o=u.getLine(e),r=[];for(d.lastIndex=0;n=d.exec(o);){var s=n[0].length,a=n.index;if(!s){if(a>=o.length)break;d.lastIndex=a+=1}if(n.index+s>t)break;r.push(n.index,s)}for(var l=r.length-1;0<=l;l-=2){var c=r[l-1];if(i(e,c,e,c+(s=r[l])))return!0}}:function(e,t,i){var n=u.getLine(e);for(d.lastIndex=t;o=d.exec(n);){var o,r=o[0].length;if(i(e,o=o.index,e,o+r))return!0;if(!r&&(d.lastIndex=o+=1,o>=n.length))return!1}},{forEach:l?function(e){var t=o.row;if(!n(t,o.column,e)){for(t--;r<=t;t--)if(n(t,Number.MAX_VALUE,e))return;if(0!=i.wrap)for(t=s,r=o.row;r<=t;t--)if(n(t,Number.MAX_VALUE,e))return}}:function(e){var t=o.row;if(!n(t,o.column,e)){for(t+=1;t<=s;t++)if(n(t,0,e))return;if(0!=i.wrap)for(t=r,s=o.row;t<=s;t++)if(n(t,0,e))return}}}}}.call(n.prototype),t.Search=n}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,i){"use strict";var a=e("../lib/keys"),n=e("../lib/useragent"),l=a.KEY_MODS;function o(e,t){this.platform=t||(n.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function r(e,t){o.call(this,e,t),this.$singleCommand=!1}r.prototype=o.prototype,function(){function s(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),(this.commands[e.name]=e).bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var i,n=e&&("string"==typeof e?e:e.name),o=(e=this.commands[n],t||delete this.commands[n],this.commandKeyBinding);for(i in o){var r,s=o[i];s==e?delete o[i]:Array.isArray(s)&&-1!=(r=s.indexOf(e))&&(s.splice(r,1),1==s.length&&(o[i]=s[0]))}},this.bindKey=function(e,n,o){if("object"==typeof e&&e&&(null==o&&(o=e.position),e=e[this.platform]),e)return"function"==typeof n?this.addCommand({exec:n,bindKey:e,name:n.name||e}):void e.split("|").forEach(function(e){var t="",i=(-1!=e.indexOf(" ")&&(e=(i=e.split(/\s+/)).pop(),i.forEach(function(e){e=this.parseKeys(e),e=l[e.hashId]+e.key;t+=(t?" ":"")+e,this._addCommandToBinding(t,"chainKeys")},this),t+=" "),this.parseKeys(e)),e=l[i.hashId]+i.key;this._addCommandToBinding(t+e,n,o)},this)},this._addCommandToBinding=function(e,t,i){var n=this.commandKeyBinding;if(t)if(!n[e]||this.$singleCommand)n[e]=t;else{Array.isArray(n[e])?-1!=(r=n[e].indexOf(t))&&n[e].splice(r,1):n[e]=[n[e]],"number"!=typeof i&&(i=s(t));for(var o=n[e],r=0;r<o.length;r++)if(i<s(o[r]))break;o.splice(r,0,t)}else delete n[e]},this.addCommands=function(i){i&&Object.keys(i).forEach(function(e){var t=i[e];if(t){if("string"==typeof t)return this.bindKey(t,e);"object"==typeof(t="function"==typeof t?{exec:t}:t)&&(t.name||(t.name=e),this.addCommand(t))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),i=t.pop(),n=a[i];if(a.FUNCTION_KEYS[n])i=a.FUNCTION_KEYS[n].toLowerCase();else{if(!t.length)return{key:i,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:i.toUpperCase(),hashId:-1}}for(var o=0,r=t.length;r--;){var s=a.KEY_MODS[t[r]];if(null==s)return"undefined"!=typeof console&&console.error("invalid modifier "+t[r]+" in "+e),!1;o|=s}return{key:i,hashId:o}},this.findKeyCommand=function(e,t){e=l[e]+t;return this.commandKeyBinding[e]},this.handleKeyboard=function(e,t,i,n){var o,r;if(!(n<0))return o=l[t]+i,r=this.commandKeyBinding[o],e.$keyChain&&(e.$keyChain+=" "+o,r=this.commandKeyBinding[e.$keyChain]||r),!r||"chainKeys"!=r&&"chainKeys"!=r[r.length-1]?(e.$keyChain&&(t&&4!=t||1!=i.length?(-1==t||0<n)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-o.length-1)),{command:r}):(e.$keyChain=e.$keyChain||o,{command:"null"})},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(o.prototype),t.HashHandler=o,t.MultiHashHandler=r}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e,t){r.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})}var o=e("../lib/oop"),r=e("../keyboard/hash_handler").MultiHashHandler,s=e("../lib/event_emitter").EventEmitter;o.inherits(n,r),function(){o.implement(this,s),this.exec=function(e,t,i){if(Array.isArray(e)){for(var n=e.length;n--;)if(this.exec(e[n],t,i))return!0;return!1}if(!(e="string"==typeof e?this.commands[e]:e))return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var o={editor:t,command:e,args:i};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),!1!==o.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach(function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e=e[1]?e:e[0]})}}.call(n.prototype),t.CommandManager=n}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,i){"use strict";var l=e("../lib/lang"),n=e("../config"),c=e("../range").Range;function o(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:o("Ctrl-,","Command-,"),exec:function(t){n.loadModule("ace/ext/settings_menu",function(e){e.init(t),t.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:o("Alt-E","F4"),exec:function(t){n.loadModule("./ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(t){n.loadModule("./ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(e,t){"number"!=typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(t){n.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(t){n.loadModule("ace/ext/searchbox",function(e){e.Search(t,!0)})}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(l.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(e){e.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(e){for(var t=e.selection.isBackwards(),i=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),n=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),t=e.session.doc.getLine(i.row).length,o=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,r=e.session.doc.getLine(i.row),s=i.row+1;s<=n.row+1;s++){var a=l.stringTrimLeft(l.stringTrimRight(e.session.doc.getLine(s)));r+=a=0!==a.length?" "+a:a}n.row+1<e.session.doc.getLength()-1&&(r+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new c(i.row,0,n.row+2,0),r),0<o?(e.selection.moveCursorTo(i.row,i.column),e.selection.selectTo(i.row,i.column+o)):(t=e.session.doc.getLine(i.row).length>t?t+1:t,e.selection.moveCursorTo(i.row,t))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,i=e.session.doc.getLine(t).length,n=e.selection.rangeList.ranges,o=[];n.length<1&&(n=[e.selection.getRange()]);for(var r=0;r<n.length;r++)r!=n.length-1||n[r].end.row===t&&n[r].end.column===i||o.push(new c(n[r].end.row,n[r].end.column,t,i)),0===r?0===n[r].start.row&&0===n[r].start.column||o.push(new c(0,0,n[r].start.row,n[r].start.column)):o.push(new c(n[r-1].end.row,n[r-1].end.column,n[r].start.row,n[r].start.column));e.exitMultiSelectMode(),e.clearSelection();for(r=0;r<o.length;r++)e.selection.addRange(o[r],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),0===t.row&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:o("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var r=1;r<9;r++)t.commands.push({name:"foldToLevel"+r,description:"Fold To Level "+r,level:r,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(e,t,i){"use strict";e("./lib/fixoldbrowsers");function o(e,t,i){this.$toDestroy=[];var n=e.getContainerElement();this.container=n,this.renderer=e,this.id="editor"+ ++o.$uid,this.commands=new f(s.isMac?"mac":"win",v),"object"==typeof document&&(this.textInput=new a(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new l(this),new c(this)),this.keyBinding=new u(this),this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=g.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||i&&i.session||new d("")),y.resetOptions(this),i&&this.setOptions(i),y._signal("editor",this)}var r=e("./lib/oop"),n=e("./lib/dom"),g=e("./lib/lang"),s=e("./lib/useragent"),a=e("./keyboard/textinput").TextInput,l=e("./mouse/mouse_handler").MouseHandler,c=e("./mouse/fold_handler").FoldHandler,u=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,h=e("./search").Search,m=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,f=e("./commands/command_manager").CommandManager,v=e("./commands/default_commands").commands,y=e("./config"),b=e("./token_iterator").TokenIterator,w=e("./clipboard"),C=(o.$uid=0,!function(){r.implement(this,p),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=g.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&!1===e.returnValue||!this.session)return this.curOp=null;if((1!=e||!this.curOp.command||"mouse"!=this.curOp.command.name)&&(this._signal("beforeEndOperation"),this.curOp)){var e=this.curOp.command,t=e&&e.scrollIntoView;if(t){switch(t){case"center-animate":t="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),n=this.renderer.layerConfig;(i.start.row>=n.lastRow||i.end.row<=n.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==t&&this.renderer.animateScrolling(this.curOp.scrollTop)}e=this.selection.toJSON();this.curOp.selectionAfter=e,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(e),this.prevOp=this.curOp,this.curOp=null}}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){var t,i,n,o;this.$mergeUndoDeltas&&(t=this.prevOp,i=this.$mergeableCommands,n=t.command&&e.command.name==t.command.name,"insertstring"==e.command.name?(o=e.args,void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),n=n&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(t.args)),this.mergeNextCommand=!0):n=n&&-1!==i.indexOf(e.command.name),(n="always"!=this.$mergeUndoDeltas&&2e3<Date.now()-this.sequenceStartTime?!1:n)?this.session.mergeUndoDeltas=!0:-1!==i.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now()))},this.setKeyboardHandler=function(t,i){var n;t&&"string"==typeof t&&"ace"!=t?(this.$keybindingId=t,n=this,y.loadModule(["keybinding",t],function(e){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(e&&e.handler),i&&i()})):(this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),i&&i())},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){var t,i;this.session!=e&&(this.curOp&&this.endOperation(),this.curOp={},(t=this.session)&&(this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),(i=this.session.getSelection()).off("changeCursor",this.$onCursorChange),i.off("changeSelection",this.$onSelectionChange)),(this.session=e)?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart())},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||n.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){var n;this.$highlightPending||((n=this).$highlightPending=!0,setTimeout(function(){n.$highlightPending=!1;var e,t,i=n.session;i&&i.bgTokenizer&&(i.$bracketHighlight&&(i.$bracketHighlight.markerIds.forEach(function(e){i.removeMarker(e)}),i.$bracketHighlight=null),(e=!(e=i.getMatchingBracketRanges(n.getCursorPosition()))&&i.$mode.getMatching?i.$mode.getMatching(n.session):e)&&(t="ace_bracket",Array.isArray(e)?1==e.length&&(t="ace_error_bracket"):e=[e],2==e.length&&(0==m.comparePoints(e[0].end,e[1].start)?e=[m.fromPoints(e[0].start,e[1].end)]:0==m.comparePoints(e[0].start,e[1].end)&&(e=[m.fromPoints(e[1].start,e[0].end)])),i.$bracketHighlight={ranges:e,markerIds:e.map(function(e){return i.addMarker(e,t,"text")})}))},50))},this.$highlightTags=function(){var h;this.$highlightTagPending||((h=this).$highlightTagPending=!0,setTimeout(function(){h.$highlightTagPending=!1;var e=h.session;if(e&&e.bgTokenizer){var t=h.getCursorPosition(),i=new b(h.session,t.row,t.column),n=i.getCurrentToken();if(!n||!/\b(?:tag-open|tag-name)/.test(n.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1===n.type.indexOf("tag-open")||(n=i.stepForward())){var o=n.value,r=n.value,s=0,a=i.stepBackward();if("<"===a.value)for(;a=n,(n=i.stepForward())&&(-1!==n.type.indexOf("tag-name")?o===(r=n.value)&&("<"===a.value?s++:"</"===a.value&&s--):o===r&&"/>"===n.value&&s--),n&&0<=s;);else{do{if(n=a,a=i.stepBackward(),n)if(-1!==n.type.indexOf("tag-name"))o===n.value&&("<"===a.value?s++:"</"===a.value&&s--);else if("/>"===n.value){for(var l=0,c=a;c;){if(-1!==c.type.indexOf("tag-name")&&c.value===o){s--;break}if("<"===c.value)break;c=i.stepBackward(),l++}for(var u=0;u<l;u++)i.stepForward()}}while(a&&s<=0);i.stepForward()}if(!n)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var t=i.getCurrentTokenRow(),d=i.getCurrentTokenColumn(),t=new m(t,d,t,d+n.value.length),d=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&null!=d&&0!==t.compareRange(d.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),e.$tagHighlight||(e.$tagHighlight=e.addMarker(t,"ace_bracket","text"))}}},50))},this.focus=function(){var e=this;setTimeout(function(){e.isFocused()||e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,i=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,i,t),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){e=e.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t,i=this.getSession();this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||1<this.renderer.$minLines||(e=!1)),i.$highlightLineMarker&&!e?(i.removeMarker(i.$highlightLineMarker.id),i.$highlightLineMarker=null):!i.$highlightLineMarker&&e?((t=new m(e.row,e.column,e.row,1/0)).id=i.addMarker(t,"ace_active-line","screenLine"),i.$highlightLineMarker=t):e&&(i.$highlightLineMarker.start.row=e.row,i.$highlightLineMarker.end.row=e.row,i.$highlightLineMarker.start.column=e.column,i._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t,i,n=this.session,n=(n.$selectionMarker&&n.removeMarker(n.$selectionMarker),n.$selectionMarker=null,this.selection.isEmpty()?this.$updateHighlightActiveLine():(t=this.selection.getRange(),i=this.getSelectionStyle(),n.$selectionMarker=n.addMarker(t,"ace_selection",i)),this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp());this.session.highlight(n),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var i=t.start.column,n=t.end.column,e=e.getLine(t.start.row),t=e.substring(i,n);if(!(5e3<t.length)&&/[\w\d]/.test(t)){t=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:t}),e=e.substring(i-1,n+1);if(t.test(e))return t}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),i=!1;if(!e&&this.$copyWithEmptySelection)for(var i=!0,n=this.selection.getAllRanges(),o=0;o<n.length;o++){var r=n[o];o&&n[o-1].start.row==r.start.row||(e+=this.session.getLine(r.start.row)+t)}var s={text:e};return this._signal("copy",s),w.lineMode=!!i&&s.text,s.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){this.commands.exec("paste",this,{text:e,event:t})},this.$handlePaste=function(e){this._signal("paste",e="string"==typeof e?{text:e}:e);var t=e.text,e=t===w.lineMode,i=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)e?i.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(e)this.selection.rangeList.ranges.forEach(function(e){i.insert({row:e.start.row,column:0},t)});else{var n=t.split(/\r\n|\r|\n/),o=this.selection.rangeList.ranges,e=!(2!=n.length||n[0]&&n[1]);if(n.length!=o.length||e)return this.commands.exec("insertstring",this,t);for(var r=o.length;r--;){var s=o[r];s.isEmpty()||i.remove(s),i.insert(s.start,n[r])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var i,n=this.session,o=n.getMode(),r=this.getCursorPosition(),s=(!this.getBehavioursEnabled()||t||(i=o.transformAction(n.getState(r.row),"insertion",this,n,e))&&(e===i.text||this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1),e=i.text),"\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()?this.session.getOverwrite()&&-1==e.indexOf("\n")&&((s=new m.fromPoints(r,r)).end.column+=e.length,this.session.remove(s)):(s=this.getSelectionRange(),r=this.session.remove(s),this.clearSelection()),"\n"!=e&&"\r\n"!=e||(a=n.getLine(r.row),r.column>a.search(/\S|$/)&&(t=a.substr(r.column).search(/\S|$/),n.doc.removeInLine(r.row,r.column,r.column+t))),this.clearSelection(),r.column),t=n.getState(r.row),a=n.getLine(r.row),l=o.checkOutdent(t,a,e);n.insert(r,e),i&&i.selection&&(2==i.selection.length?this.selection.setSelectionRange(new m(r.row,s+i.selection[0],r.row,s+i.selection[1])):this.selection.setSelectionRange(new m(r.row+i.selection[0],i.selection[1],r.row+i.selection[2],i.selection[3]))),this.$enableAutoIndent&&(n.getDocument().isNewLine(e)&&(s=o.getNextLineIndent(t,a.slice(0,r.column),n.getTabString()),n.insert({row:r.row+1,column:0},s)),l&&o.autoOutdent(t,n,r.row))},this.autoIndent=function(){for(var e,t,i,n,o,r=this.session,s=r.getMode(),a=(i=this.selection.isEmpty()?(t=0,r.doc.getLength()-1):(t=(e=this.getSelectionRange()).start.row,e.end.row),""),l="",c=r.getTabString(),u=t;u<=i;u++)0<u&&(a=r.getState(u-1),n=r.getLine(u-1),l=s.getNextLineIndent(a,n,c)),n=r.getLine(u),l!==(o=s.$getIndent(n))&&(0<o.length&&(o=new m(u,0,u,o.length),r.remove(o)),0<l.length&&r.insert({row:u,column:0},l)),s.autoOutdent(a,r,u)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});e=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(e):e(),this.endOperation()},this.applyComposition=function(e,t){var i;(t.extendLeft||t.extendRight)&&((i=this.selection.getRange()).start.column-=t.extendLeft,i.end.column+=t.extendRight,i.start.column<0&&(i.start.row--,i.start.column+=this.session.getLine(i.start.row).length+1),this.selection.setRange(i),e||i.isEmpty()||this.remove()),!e&&this.selection.isEmpty()||this.insert(e,!0),(t.restoreStart||t.restoreEnd)&&((i=this.selection.getRange()).start.column-=t.restoreStart,i.end.column-=t.restoreEnd,this.selection.setRange(i))},this.onCommandKey=function(e,t,i){return this.keyBinding.onCommandKey(e,t,i)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t,i,n,e=this.getSelectionRange();this.getBehavioursEnabled()&&(i=(t=this.session).getState(e.start.row),i=t.getMode().transformAction(i,"deletion",this,t,e),0===e.end.column&&"\n"==(n=t.getTextRange(e))[n.length-1]&&(n=t.getLine(e.end.row),/^\s+$/.test(n)&&(e.end.column=n.length)),i&&(e=i)),this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){var e,t,i,n;!this.selection.isEmpty()||0!==(t=(e=this.getCursorPosition()).column)&&(n=t<(n=this.session.getLine(e.row)).length?(i=n.charAt(t)+n.charAt(t-1),new m(e.row,t-1,e.row,t+1)):(i=n.charAt(t-1)+n.charAt(t-2),new m(e.row,t-2,e.row,t)),this.session.replace(n,i),this.session.selection.moveToPosition(n.end))},this.toLowerCase=function(){var e=this.getSelectionRange(),t=(this.selection.isEmpty()&&this.selection.selectWord(),this.getSelectionRange()),i=this.session.getTextRange(t);this.session.replace(t,i.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange(),t=(this.selection.isEmpty()&&this.selection.selectWord(),this.getSelectionRange()),i=this.session.getTextRange(t);this.session.replace(t,i.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row)return o=this.$getSelectedRows(),void e.indentRows(o.first,o.last,"\t");if(t.start.column<t.end.column){var i=e.getTextRange(t);if(!/^\s+$/.test(i))return o=this.$getSelectedRows(),void e.indentRows(o.first,o.last,"\t")}var n=e.getLine(t.start.row),i=t.start,o=e.getTabSize(),e=e.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var r=o-e%o,s=g.stringRepeat(" ",r);else{for(r=e%o;" "==n[t.start.column-1]&&r;)t.start.column--,r--;this.selection.setSelectionRange(t),s="\t"}return this.insert(s)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,i=[],n=e.first;n<=e.last;n++)i.push(t.getLine(n));i.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var o=new m(0,0,0,0),n=e.first;n<=e.last;n++){var r=t.getLine(n);o.start.row=n,o.end.row=n,o.end.column=r.length,t.replace(o,i[n-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),i=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,i,e)},this.getNumberAt=function(e,t){for(var i=/[\-]?[0-9]+(?:\.[0-9]+)?/g,n=(i.lastIndex=0,this.session.getLine(e));i.lastIndex<t;){var o=i.exec(n);if(o.index<=t&&o.index+o[0].length>=t)return{value:o[0],start:o.index,end:o.index+o[0].length}}return null},this.modifyNumber=function(e){var t,i,n,o=this.selection.getCursor().row,r=this.selection.getCursor().column,s=new m(o,r-1,o,r),s=this.session.getTextRange(s);!isNaN(parseFloat(s))&&isFinite(s)?(s=this.getNumberAt(o,r))&&(n=0<=s.value.indexOf(".")?s.start+s.value.indexOf(".")+1:s.end,t=s.start+s.value.length-n,i=parseFloat(s.value),i*=Math.pow(10,t),n!==s.end&&r<n?e*=Math.pow(10,s.end-r-1):e*=Math.pow(10,s.end-r),n=(i=(i+=e)/Math.pow(10,t)).toFixed(t),e=new m(o,s.start,o,s.end),this.session.replace(e,n),this.moveCursorTo(o,Math.max(s.start+1,r+n.length-s.value.length))):this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){for(var i,n=this.selection.getCursor().row,e=this.selection.getCursor().column,o=(this.selection.selectWord(),this.getSelectedText()),r=this.selection.getWordRange().start.column,t=o.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),s=e-r-1,a=(s<0&&(s=0),0),l=this,c=(o.match(/[A-Za-z0-9_]+/)&&t.forEach(function(e,t){i=a+e.length,a<=s&&s<=i&&(o=e,l.selection.clearSelection(),l.moveCursorTo(n,a+r),l.selection.selectTo(n,i+r)),a=i}),this.$toggleWordPairs),u=0;u<c.length;u++)for(var d=c[u],h=0;h<=1;h++){var p=+!h,f=o.match(new RegExp("^\\s?_?("+g.escapeRegExp(d[h])+")\\s?$","i"));f&&o.match(new RegExp("([_]|^|\\s)("+g.escapeRegExp(f[1])+")($|\\s)","g"))&&(f=o.replace(new RegExp(g.escapeRegExp(d[h]),"i"),function(e){var t=d[p];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+d[p].charAt(0).toUpperCase()+t.substr(1)),t}),this.insert(f))}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e,t=this.selection,i=this.session,n=t.getRange(),o=t.isBackwards();n.isEmpty()?(e=n.start.row,i.duplicateLines(e,e)):(e=o?n.start:n.end,i=i.insert(e,i.getTextRange(n),!1),n.start=e,n.end=i,t.setSelectionRange(n,o))},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,i){return this.session.moveText(e,t,i)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var n=i.toOrientedRange(),o=this.$getSelectedRows(n),r=this.session.$moveLines(o.first,o.last,t?0:e);n.moveBy(r=t&&-1==e?0:r,0),i.fromOrientedRange(n)}else{for(var s=i.rangeList.ranges,a=(i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0,0),l=0,c=s.length,u=0;u<c;u++){for(var d=u,h=(s[u].moveBy(a,0),(o=this.$getSelectedRows(s[u])).first),p=o.last;++u<c;){l&&s[u].moveBy(l,0);var f=this.$getSelectedRows(s[u]);if(t&&f.first!=p)break;if(!t&&f.first>p+1)break;p=f.last}for(u--,a=this.session.$moveLines(h,p,t?0:e),t&&-1==e&&(d=u+1);d<=u;)s[d].moveBy(a,0),d++;l+=a=t?a:0}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var i=this.renderer,n=this.renderer.layerConfig,o=e*Math.floor(n.height/n.lineHeight),e=(!0===t?this.selection.$moveSelection(function(){this.moveCursorBy(o,0)}):!1===t&&(this.selection.moveCursorBy(o,0),this.selection.clearSelection()),i.scrollTop);i.scrollBy(0,o*n.lineHeight),null!=t&&i.scrollCursorIntoView(null,.5),i.animateScrolling(e)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,i,n){this.renderer.scrollToLine(e,t,i,n)},this.centerSelection=function(){var e=this.getSelectionRange(),e={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var i=this.getCursorPosition(),n=new b(this.session,i.row,i.column),o=n.getCurrentToken(),r=o||n.stepForward();if(r){var s,a,l,c=!1,u={},d=i.column-r.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(r.value.match(/[{}()\[\]]/g)){for(;d<r.value.length&&!c;d++)if(h[r.value[d]])switch(a=h[r.value[d]]+"."+r.type.replace("rparen","lparen"),isNaN(u[a])&&(u[a]=0),r.value[d]){case"(":case"[":case"{":u[a]++;break;case")":case"]":case"}":u[a]--,-1===u[a]&&(s="bracket",c=!0)}}else-1!==r.type.indexOf("tag-name")&&(isNaN(u[r.value])&&(u[r.value]=0),"<"===o.value?u[r.value]++:"</"===o.value&&u[r.value]--,-1===u[r.value]&&(s="tag",c=!0))}while(c||(o=r,r=n.stepForward(),d=0),r&&!c);if(s){if("bracket"===s)(p=this.session.getBracketRange(i))||(l=(p=new m(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+d-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+d-1)).start,(t||l.row===i.row&&Math.abs(l.column-i.column)<2)&&(p=this.session.getBracketRange(l)));else if("tag"===s){if(!r||-1===r.type.indexOf("tag-name"))return;var p,f=r.value;if(0===(p=new m(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2)).compare(i.row,i.column))for(c=!1;r=o,(o=n.stepBackward())&&(-1!==o.type.indexOf("tag-close")&&p.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1),r.value===f&&-1!==r.type.indexOf("tag-name")&&("<"===o.value?u[f]++:"</"===o.value&&u[f]--,0===u[f]&&(c=!0))),o&&!c;);r&&r.type.indexOf("tag-name")&&(l=p.start).row==i.row&&Math.abs(l.column-i.column)<2&&(l=p.end)}(l=p&&p.cursor||l)&&(e?p&&t?this.selection.setRange(p):p&&p.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(l.row,l.column):this.selection.moveTo(l.row,l.column))}}},this.gotoLine=function(e,t,i){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,i)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){var t;if(this.selection.isMultiLine()&&!this.selection.isBackwards())return t=this.selection.anchor.getPosition(),this.moveCursorToPosition(t);this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){var t;if(this.selection.isMultiLine()&&this.selection.isBackwards())return t=this.selection.anchor.getPosition(),this.moveCursorToPosition(t);this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var t=this.$search.find(this.session),i=0;return t&&(this.$tryReplace(t,e)&&(i=1),this.selection.setSelectionRange(t),this.renderer.scrollSelectionIntoView(t.start,t.end)),i},this.replaceAll=function(e,t){t&&this.$search.set(t);var i=this.$search.findAll(this.session),n=0;if(!i.length)return n;t=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=i.length-1;0<=o;--o)this.$tryReplace(i[o],e)&&n++;return this.selection.setSelectionRange(t),n},this.$tryReplace=function(e,t){var i=this.session.getTextRange(e);return null!==(t=this.$search.replace(i,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,i){t=t||{},"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&r.mixin(t,e);var n=this.selection.getRange(),e=(null==t.needle&&((e=this.session.getTextRange(n)||this.$search.$options.needle)||(n=this.session.getWordRange(n.start.row,n.start.column),e=this.session.getTextRange(n)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:n}),this.$search.find(this.session));return t.preventScroll?e:e?(this.revealRange(e,i),e):(t.backwards?n.start=n.end:n.end=n.start,void this.selection.setRange(n))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var i=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(i)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(e){e.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){var n,o,r,s,t,i,a;e&&(r=!1,(o=this).$scrollAnchor||(this.$scrollAnchor=document.createElement("div")),(s=this.$scrollAnchor).style.cssText="position:absolute",this.container.insertBefore(s,this.container.firstChild),t=this.on("changeSelection",function(){r=!0}),i=this.renderer.on("beforeRender",function(){r&&(n=o.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){var e,t,i;r&&n&&(o.isFocused()||o.searchBox&&o.searchBox.isFocused())&&(e=(t=o.renderer).$cursorLayer.$pixelPos,t=t.layerConfig,i=e.top-t.offset,null!=(r=0<=e.top&&i+n.top<0||!(e.top<t.height&&e.top+n.top+t.lineHeight>window.innerHeight)&&null)&&(s.style.top=i+"px",s.style.left=e.left+"px",s.style.height=t.lineHeight+"px",s.scrollIntoView(r)),r=n=null)}),this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",t),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",i))})},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,n.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(t,i,n){var o=this;y.loadModule("./ext/prompt",function(e){e.prompt(o,t,i,n)})}}.call(o.prototype),y.defineOptions(o.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?C.attach(this):C.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?C.attach(this):C.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());e&&this.renderer.placeholderNode?(this.renderer.off("afterRender",this.$updatePlaceholder),n.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null):e||this.renderer.placeholderNode?!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||""):(this.renderer.on("afterRender",this.$updatePlaceholder),n.addCssClass(this.container,"ace_hasPlaceholder"),(e=n.createElement("div")).className="ace_placeholder",e.textContent=this.$placeholder||"",this.renderer.placeholderNode=e,this.renderer.content.appendChild(this.renderer.placeholderNode))}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),{getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"¬∑":""))+""},getWidth:function(e,t,i){return Math.max(t.toString().length,(i.lastRow+1).toString().length,2)*i.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}});t.Editor=o}),define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,i){"use strict";function n(){this.$maxRev=0,this.$fromUndo=!1,this.reset()}!function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,i){this.$fromUndo||e!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev),"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e))},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var i=this.$undoStack,n=i.length;n--;){var o=i[n][0];if(o.id<=e)break;o.id<t&&(o.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var i=this.selections,n=i.length;n--;){var o=i[n];if(o.rev<e)return o=t?i[n+1]:o}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var i=this.$undoStack,n=null,o=0,r=i.length;r--;){var s=i[r][0];if(s.id<t&&!n&&(n=r+1),s.id<=e){o=r+1;break}}return i.slice(o,n)},this.getChangedRanges=function(e,t){null==t&&this.$rev},this.getChangedLines=function(e,t){null==t&&this.$rev},this.undo=function(e,t){this.lastDeltas=null;var i,n=this.$undoStack;if(function(e,t){for(var i=t;i--;){var n=e[i];if(n&&!n[0].ignore){for(;i<t-1;){var o=function(e,t){for(var i=e.length;i--;)for(var n=0;n<t.length;n++)if(!s(e[i],t[n])){for(;i<e.length;){for(;n--;)s(t[n],e[i]);n=t.length,i++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}(e[i],e[i+1]);e[i]=o[0],e[i+1]=o[1],i++}return 1}}}(n,n.length))return e=e||this.$session,this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0,n=n.pop(),i=null,n&&(i=e.undoChanges(n,t),this.$redoStack.push(n),this.$syncRev()),this.$fromUndo=!1,i},this.redo=function(e,t){if(this.lastDeltas=null,e=e||this.$session,this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){for(var i=this.getDeltas(this.$redoStackBaseRev,this.$rev+1),n=this.$redoStack,o=i,r=0;r<o.length;r++)for(var s=o[r],a=0;a<s.length;a++){l=void 0;c=void 0;u=void 0;d=void 0;h=void 0;p=void 0;var l=n;var c=s[a];c=function(e){return{start:v(e.start),end:v(e.end),action:e.action,lines:e.lines.slice()}}(c);for(var u=l.length;u--;){for(var d=l[u],h=0;h<d.length;h++){var p=function(e,t){var i,n,o="insert"==e.action,r="insert"==t.action;if(o&&r)m(e.start,t.start)<0?y(t,e,1):y(e,t,1);else if(o&&!r)0<=m(e.start,t.end)?y(e,t,-1):(m(e.start,t.start)<=0||y(e,g.fromPoints(t.start,e.start),-1),y(t,e,1));else if(!o&&r)0<=m(t.start,e.end)?y(t,e,-1):(m(t.start,e.start)<=0||y(t,g.fromPoints(e.start,t.start),-1),y(e,t,1));else if(!o&&!r)if(0<=m(t.start,e.end))y(t,e,-1);else{if(!(m(t.end,e.start)<=0))return m(e.start,t.start)<0&&(e=w(i=e,t.start)),0<m(e.end,t.end)&&(n=w(e,t.end)),b(t.end,e.start,e.end,-1),n&&!i&&(e.lines=n.lines,e.start=n.start,e.end=n.end,n=e),[t,i,n].filter(Boolean);y(e,t,-1)}return[t,e]}(d[h],c);c=p[0],2!=p.length&&(p[2]?(d.splice(h+1,1,p[1],p[2]),h++):p[1]||(d.splice(h,1),h--))}d.length||l.splice(u,1)}}this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(e){e[0].id=++this.$maxRev},this)}var i=this.$redoStack.pop(),f=null;return i&&(f=e.redoChanges(i,t),this.$undoStack.push(i),this.$syncRev()),this.$fromUndo=!1,f},this.$syncRev=function(){var e=this.$undoStack,e=e[e.length-1],e=e&&e[0].id||0;this.$redoStackBaseRev=e,this.$rev=e},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return 0<this.$undoStack.length},this.canRedo=function(){return 0<this.$redoStack.length},this.bookmark=function(e){null==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?o(e):o(this.$undoStack)+"\n---\n"+o(this.$redoStack)}}.call(n.prototype);var g=e("./range").Range,m=g.comparePoints;g.comparePoints;function v(e){return{row:e.row,column:e.column}}function o(e){if(e=e||this,Array.isArray(e))return e.map(o).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(r).join("\n"):r(e.value)),e.start&&(t+=r(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function r(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function s(e,t){var i="insert"==e.action,n="insert"==t.action;if(i&&n)if(0<=m(t.start,e.end))y(t,e,-1);else{if(!(m(t.start,e.start)<=0))return;y(e,t,1)}else if(i&&!n)if(0<=m(t.start,e.end))y(t,e,-1);else{if(!(m(t.end,e.start)<=0))return;y(e,t,-1)}else if(!i&&n)if(0<=m(t.start,e.start))y(t,e,1);else{if(!(m(t.start,e.start)<=0))return;y(e,t,1)}else if(!i&&!n)if(0<=m(t.start,e.start))y(t,e,1);else{if(!(m(t.end,e.start)<=0))return;y(e,t,-1)}return 1}function y(e,t,i){b(e.start,t.start,t.end,i),b(e.end,t.start,t.end,i)}function b(e,t,i,n){e.row==(1==n?t:i).row&&(e.column+=n*(i.column-t.column)),e.row+=n*(i.row-t.row)}function w(e,t){var i=e.lines,n=e.end,o=(e.end=v(t),e.end.row-e.start.row),r=i.splice(o,i.length),o=o?t.column:t.column-e.start.column;return i.push(r[0].substring(0,o)),r[0]=r[0].substr(o),{start:v(t),end:n,lines:r,action:e.action}}t.UndoManager=n}),define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";function n(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}var s=e("../lib/dom");!function(){this.moveContainer=function(e){s.translate(this.element,0,-(e.firstRowScreen*e.lineHeight%this.canvasHeight)-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,i){var n=t.firstRowScreen*t.lineHeight,n=Math.floor(n/this.canvasHeight);return i.documentToScreenRow(e,0)*t.lineHeight-n*this.canvasHeight},this.computeLineHeight=function(e,t,i){return t.lineHeight*i.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=s.createFragment(this.element),i=0;i<e.length;i++)t.appendChild(e[i].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=s.createFragment(this.element),i=0;i<e.length;i++)t.appendChild(e[i].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,i,n){var o,r=this.cellCache.pop();return r||(o=s.createElement("div"),n&&n(o),this.element.appendChild(o),r={element:o,text:"",row:e}),r.row=e,r}}.call(n.prototype),t.Lines=n}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(e,t,i){"use strict";function n(e){this.element=m.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new a(this.element),this.$lines.$offsetCoefficient=1}var m=e("../lib/dom"),o=e("../lib/oop"),r=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,a=e("./lines").Lines;function c(e){var t=document.createTextNode(""),t=(e.appendChild(t),m.createElement("span"));return e.appendChild(t),e}!function(){o.implement(this,s),this.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),(this.session=e)&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var i=e[t],n=i.row,o=(o=this.$annotations[n])||(this.$annotations[n]={text:[]}),n=(n=i.text)?r.escapeHTML(n):i.html||"",n=(-1===o.text.indexOf(n)&&o.text.push(n),i.type);"error"==n?o.className=" ace_error":"warning"==n&&" ace_error"!=o.className?o.className=" ace_warning":"info"!=n||o.className||(o.className=" ace_info")}},this.$updateAnnotations=function(e){var t,i;this.$annotations.length&&(t=e.start.row,0!=(i=e.end.row-t)&&("remove"==e.action?this.$annotations.splice(t,1+i,null):((e=new Array(1+i)).unshift(t,1),this.$annotations.splice.apply(this.$annotations,e))))},this.update=function(e){this.config=e;for(var t=this.session,i=e.firstRow,n=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),o=(this.oldLastRow=n,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow(),t.getNextFoldLine(i)),r=o?o.start.row:1/0,s=null,a=-1,l=i;;){if(r<l&&(l=o.end.row+1,r=(o=t.getNextFoldLine(l,o))?o.start.row:1/0),n<l){for(;this.$lines.getLength()>a+1;)this.$lines.pop();break}(s=this.$lines.get(++a))?s.row=l:(s=this.$lines.createCell(l,e,this.session,c),this.$lines.push(s)),this.$renderCell(s,e,o,l),l++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,i=t.gutterRenderer||this.$renderer,n=t.$firstLineNumber,o=this.$lines.last()?this.$lines.last().text:"",n=((this.$fixedWidth||t.$useWrapMode)&&(o=t.getLength()+n-1),i?i.getWidth(t,o,e):o.toString().length*e.characterWidth),i=this.$padding||this.$computePadding();(n+=i.left+i.right)===this.gutterWidth||isNaN(n)||(this.gutterWidth=n,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",n))},this.$updateCursorRow=function(){var e;this.$highlightGutterLine&&(e=this.session.selection.getCursor(),this.$cursorRow!==e.row&&(this.$cursorRow=e.row))},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var i=0;i<t.length;i++){var n=t[i];if(n.row>=this.$cursorRow){if(n.row>this.$cursorRow){var o=this.session.getFoldLine(this.$cursorRow);if(!(0<i&&o&&o.start.row==t[i-1].row))break;n=t[i-1]}n.element.className="ace_gutter-active-line "+n.element.className,this.$cursorCell=n;break}}}}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var i=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),n=this.oldLastRow;if(this.oldLastRow=i,!t||n<e.firstRow)return this.update(e);if(i<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var o=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);0<o;o--)this.$lines.shift();if(i<n)for(o=this.session.getFoldedRowCount(i+1,n);0<o;o--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n<i&&this.$lines.push(this.$renderLines(e,n+1,i)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,i){for(var n=[],o=t,r=this.session.getNextFoldLine(o),s=r?r.start.row:1/0;s<o&&(o=r.end.row+1,s=(r=this.session.getNextFoldLine(o,r))?r.start.row:1/0),!(i<o);){var a=this.$lines.createCell(o,e,this.session,c);this.$renderCell(a,e,r,o),n.push(a),o++}return n},this.$renderCell=function(e,t,i,n){var o,r=e.element,s=this.session,a=r.childNodes[0],l=r.childNodes[1],c=s.$firstLineNumber,u=s.$breakpoints,d=s.$decorations,h=s.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&s.foldWidgets,f=i?i.start.row:Number.MAX_VALUE,g="ace_gutter-cell ",d=(this.$highlightGutterLine&&(n==this.$cursorRow||i&&n<this.$cursorRow&&f<=n&&this.$cursorRow<=i.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),u[n]&&(g+=u[n]),d[n]&&(g+=d[n]),this.$annotations[n]&&(g+=this.$annotations[n].className),r.className!=g&&(r.className=g),!p||null==(o=p[n])&&(o=p[n]=s.getFoldWidget(n)),o?(g="ace_fold-widget ace_"+o,"start"==o&&n==f&&n<i.end.row?g+=" ace_closed":g+=" ace_open",l.className!=g&&(l.className=g),u=t.lineHeight+"px",m.setStyle(l.style,"height",u),m.setStyle(l.style,"display","inline-block")):l&&m.setStyle(l.style,"display","none"),(h?h.getText(s,n):n+c).toString());return d!==a.data&&(a.data=d),m.setStyle(e.element.style,"height",this.$lines.computeLineHeight(n,t,s)+"px"),m.setStyle(e.element.style,"top",this.$lines.computeLineTop(n,t,s)+"px"),e.text=d,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?m.addCssClass(this.element,"ace_folding-enabled"):m.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=m.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),i=this.element.getBoundingClientRect();return e.x<t.left+i.left?"markers":this.$showFoldWidgets&&e.x>i.right-t.right?"foldWidgets":void 0}}.call(n.prototype),t.Gutter=n}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,i){"use strict";function n(e){this.element=o.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)}var p=e("../range").Range,o=e("../lib/dom");!function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var i=-1!=this.i&&this.element.childNodes[this.i];i?this.i++:(i=document.createElement("div"),this.element.appendChild(i),this.i=-1),i.style.cssText=t,i.className=e},this.update=function(e){if(e){var t,i;for(i in this.config=e,this.i=0,this.markers){var n,o,r,s=this.markers[i];s.range?(r=s.range.clipRows(e.firstRow,e.lastRow)).isEmpty()||(r=r.toScreenRange(this.session),s.renderer?(n=this.$getTop(r.start.row,e),o=this.$padding+r.start.column*e.characterWidth,s.renderer(t,r,o,n,e)):"fullLine"==s.type?this.drawFullLineMarker(t,r,s.clazz,e):"screenLine"==s.type?this.drawScreenLineMarker(t,r,s.clazz,e):r.isMultiLine()?"text"==s.type?this.drawTextMarker(t,r,s.clazz,e):this.drawMultiLineMarker(t,r,s.clazz,e):this.drawSingleLineMarker(t,r,s.clazz+" ace_start ace_br15",e)):s.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,i,n,o){for(var r,s=this.session,a=t.start.row,l=t.end.row,c=a,u=0,d=s.getScreenLastRowColumn(c),h=new p(c,t.start.column,c,u);c<=l;c++)h.start.row=h.end.row=c,h.start.column=c==a?t.start.column:s.getRowWrapIndent(c),h.end.column=d,r=u,u=d,d=c+1<l?s.getScreenLastRowColumn(c+1):c==l?0:t.end.column,this.drawSingleLineMarker(e,h,i+(c==a?" ace_start":"")+" ace_br"+((c==a||c==a+1&&t.start.column?1:0)|(r<u?2:0)|(d<u?4:0)|(c==l?8:0)),n,c==l?0:1,o)},this.drawMultiLineMarker=function(e,t,i,n,o){var r,s=this.$padding,a=n.lineHeight,l=this.$getTop(t.start.row,n),c=s+t.start.column*n.characterWidth;o=o||"",this.session.$bidiHandler.isBidiRow(t.start.row)?((r=t.clone()).end.row=r.start.row,r.end.column=this.session.getLine(r.start.row).length,this.drawBidiSingleLineMarker(e,r,i+" ace_br1 ace_start",n,null,o)):this.elt(i+" ace_br1 ace_start","height:"+a+"px;right:0;top:"+l+"px;left:"+c+"px;"+(o||"")),this.session.$bidiHandler.isBidiRow(t.end.row)?((r=t.clone()).start.row=r.end.row,r.start.column=0,this.drawBidiSingleLineMarker(e,r,i+" ace_br12",n,null,o)):(l=this.$getTop(t.end.row,n),c=t.end.column*n.characterWidth,this.elt(i+" ace_br12","height:"+a+"px;width:"+c+"px;top:"+l+"px;left:"+s+"px;"+(o||""))),(a=(t.end.row-t.start.row-1)*n.lineHeight)<=0||(l=this.$getTop(t.start.row+1,n),e=(t.start.column?1:0)|(t.end.column?0:8),this.elt(i+(e?" ace_br"+e:""),"height:"+a+"px;right:0;top:"+l+"px;left:"+s+"px;"+(o||"")))},this.drawSingleLineMarker=function(e,t,i,n,o,r){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,i,n,o,r);var e=n.lineHeight,o=(t.end.column+(o||0)-t.start.column)*n.characterWidth,s=this.$getTop(t.start.row,n),t=this.$padding+t.start.column*n.characterWidth;this.elt(i,"height:"+e+"px;width:"+o+"px;top:"+s+"px;left:"+t+"px;"+(r||""))},this.drawBidiSingleLineMarker=function(e,t,i,n,o,r){var s=n.lineHeight,a=this.$getTop(t.start.row,n),l=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach(function(e){this.elt(i,"height:"+s+"px;width:"+e.width+(o||0)+"px;top:"+a+"px;left:"+(l+e.left)+"px;"+(r||""))},this)},this.drawFullLineMarker=function(e,t,i,n,o){var r=this.$getTop(t.start.row,n),s=n.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,n)-r),this.elt(i,"height:"+s+"px;top:"+r+"px;left:0;right:0;"+(o||""))},this.drawScreenLineMarker=function(e,t,i,n,o){t=this.$getTop(t.start.row,n),n=n.lineHeight;this.elt(i,"height:"+n+"px;top:"+t+"px;left:0;right:0;"+(o||""))}}.call(n.prototype),t.Marker=n}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e){this.dom=c,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new r(this.element)}var o=e("../lib/oop"),c=e("../lib/dom"),v=e("../lib/lang"),r=e("./lines").Lines,s=e("../lib/event_emitter").EventEmitter;!function(){o.implement(this,s),this.EOF_CHAR="¬∂",this.EOL_CHAR_LF="¬¨",this.EOL_CHAR_CRLF="¬§",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="‚Äî",this.SPACE_CHAR="¬∑",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,e="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){(this.session=e)&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&("string"==typeof(this.showInvisibles=e)?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){for(var e,t,i,n,o,r,s=this.session.getTabSize(),a=(this.tabSize=s,this.$tabStrings=[0]),l=1;l<s+1;l++)this.showTabs?((r=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",r.textContent=v.stringRepeat(this.TAB_CHAR,l),a.push(r)):a.push(this.dom.createTextNode(v.stringRepeat(" ",l),this.element));this.displayIndentGuides&&(this.$indentGuideRe=/\s\S| \t|\t |\s$/,e="ace_indent-guide",t=this.showSpaces?" ace_invisible ace_invisible_space":"",i=this.showSpaces?v.stringRepeat(this.SPACE_CHAR,this.tabSize):v.stringRepeat(" ",this.tabSize),n=this.showTabs?" ace_invisible ace_invisible_tab":"",o=this.showTabs?v.stringRepeat(this.TAB_CHAR,this.tabSize):i,(r=this.dom.createElement("span")).className=e+t,r.textContent=i,this.$tabStrings[" "]=r,(r=this.dom.createElement("span")).className=e+n,r.textContent=o,this.$tabStrings["\t"]=r)},this.updateLines=function(e,t,i){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var n=Math.max(t,e.firstRow),o=Math.min(i,e.lastRow),r=this.element.childNodes,s=0,a=e.firstRow;a<n;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(n)){n=l.start.row;break}a=l.end.row}s++}for(var l,c=!1,a=n,u=(l=this.session.getNextFoldLine(a))?l.start.row:1/0;u<a&&(a=l.end.row+1,u=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(o<a);){var d,h=r[s++];h&&(this.dom.removeChildren(h),this.$renderLine(h,a,a==u&&l),c&&(h.style.top=this.$lines.computeLineTop(a,e,this.session)+"px"),d=e.lineHeight*this.session.getRowLength(a)+"px",h.style.height!=d&&(c=!0,h.style.height=d)),a++}if(c)for(;s<this.$lines.cells.length;){var p=this.$lines.cells[s++];p.element.style.top=this.$lines.computeLineTop(p.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var i=e.lastRow,n=t?t.lastRow:-1;if(!t||n<e.firstRow)return this.update(e);if(i<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var o=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);0<o;o--)this.$lines.shift();if(t.lastRow>e.lastRow)for(o=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);0<o;o--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,i){for(var n=[],o=t,r=this.session.getNextFoldLine(o),s=r?r.start.row:1/0;s<o&&(o=r.end.row+1,s=(r=this.session.getNextFoldLine(o,r))?r.start.row:1/0),!(i<o);){var a=this.$lines.createCell(o,e,this.session),l=a.element;this.dom.removeChildren(l),c.setStyle(l.style,"height",this.$lines.computeLineHeight(o,e,this.session)+"px"),c.setStyle(l.style,"top",this.$lines.computeLineTop(o,e,this.session)+"px"),this.$renderLine(l,o,o==s&&r),this.$useLineGroups()?l.className="ace_line_group":l.className="ace_line",n.push(a),o++}return n},this.update=function(e){this.$lines.moveContainer(e);for(var t=(this.config=e).firstRow,i=e.lastRow,n=this.$lines;n.getLength();)n.pop();n.push(this.$renderLinesFragment(e,t,i))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,i,n){for(var o,r,s=this,a=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,l=this.dom.createFragment(this.element),c=0;o=a.exec(n);){var u,d,h=o[1],p=o[2],f=o[3],g=o[4],m=o[5];!s.showSpaces&&p||(u=c!=o.index?n.slice(c,o.index):"",c=o.index+o[0].length,u&&l.appendChild(this.dom.createTextNode(u,this.element)),h?(u=s.session.getScreenTabSize(t+o.index),l.appendChild(s.$tabStrings[u].cloneNode(!0)),t+=u-1):p?s.showSpaces?((d=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",d.textContent=v.stringRepeat(s.SPACE_CHAR,p.length),l.appendChild(d)):l.appendChild(this.com.createTextNode(p,this.element)):f?((d=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",d.textContent=v.stringRepeat(s.SPACE_CHAR,f.length),l.appendChild(d)):g?(t+=1,(d=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",d.className=s.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",d.textContent=s.showSpaces?s.SPACE_CHAR:g,l.appendChild(d)):m&&(t+=1,(d=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",d.className="ace_cjk",d.textContent=m,l.appendChild(d)))}return l.appendChild(this.dom.createTextNode(c?n.slice(c):n,this.element)),this.$textToken[i.type]?e.appendChild(l):(r="ace_"+i.type.replace(/\./g," ace_"),d=this.dom.createElement("span"),"fold"==i.type&&(d.style.width=i.value.length*this.config.characterWidth+"px"),d.className=r,d.appendChild(l),e.appendChild(d)),t+n.length},this.renderIndentGuide=function(e,t,i){var n=t.search(this.$indentGuideRe);if(n<=0||i<=n)return t;if(" "==t[0]){for(var o=(n-=n%this.tabSize)/this.tabSize,r=0;r<o;r++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(n)}if("\t"!=t[0])return t;for(r=0;r<n;r++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(n)},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,i){var n=0,o=0,r=i[0],s=0,a=this.$createLineElement();e.appendChild(a);for(var l=0;l<t.length;l++){var c=t[l],u=c.value;if(0==l&&this.displayIndentGuides){if(n=u.length,!(u=this.renderIndentGuide(a,u,r)))continue;n-=u.length}if(n+u.length<r)s=this.$renderToken(a,s,c,u),n+=u.length;else{for(;n+u.length>=r;)s=this.$renderToken(a,s,c,u.substring(0,r-n)),u=u.substring(r-n),n=r,a=this.$createLineElement(),e.appendChild(a),a.appendChild(this.dom.createTextNode(v.stringRepeat("¬†",i.indent),this.element)),s=0,r=i[++o]||Number.MAX_VALUE;0!=u.length&&(n+=u.length,s=this.$renderToken(a,s,c,u))}}i[i.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(a,s,null,"",!0)},this.$renderSimpleLine=function(e,t){var i=0,n=t[0],o=n.value;(o=this.displayIndentGuides?this.renderIndentGuide(e,o):o)&&(i=this.$renderToken(e,i,n,o));for(var r=1;r<t.length;r++){if(i+(o=(n=t[r]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,i,n,o);i=this.$renderToken(e,i,n,o)}},this.$renderOverflowMessage=function(e,t,i,n,o){i&&this.$renderToken(e,t,i,n.slice(0,this.MAX_LINE_LENGTH-t));i=this.dom.createElement("span");i.className="ace_inline_button ace_keyword ace_toggle_wrap",i.textContent=o?"<hide>":"<click to see more...>",e.appendChild(i)},this.$renderLine=function(e,t,i){var n,o,r=e;(n=(i=i||0==i?i:this.session.getFoldLine(t))?this.$getFoldLineTokens(t,i):this.session.getTokens(t)).length?(o=this.session.getRowSplitData(t))&&o.length?(this.$renderWrappedLine(e,n,o),r=e.lastChild):(r=e,this.$useLineGroups()&&(r=this.$createLineElement(),e.appendChild(r)),this.$renderSimpleLine(r,n)):this.$useLineGroups()&&(r=this.$createLineElement(),e.appendChild(r)),this.showEOL&&r&&(i&&(t=i.end.row),(o=this.dom.createElement("span")).className="ace_invisible ace_invisible_eol",o.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,r.appendChild(o))},this.$getFoldLineTokens=function(e,t){var d=this.session,h=[];var p=d.getTokens(e);return t.walk(function(e,t,i,n,o){if(null!=e)h.push({type:"fold",value:e});else if((p=o?d.getTokens(t):p).length){for(var r,s=p,a=n,l=i,c=0,u=0;u+s[c].value.length<a;)if(u+=s[c].value.length,++c==s.length)return void!void 0;for(u!=a&&((r=s[c].value.substring(a-u)).length>l-a&&(r=r.substring(0,l-a)),h.push({type:s[c].type,value:r}),u=a+r.length,c+=1);u<l&&c<s.length;)(r=s[c].value).length+u>l?h.push({type:s[c].type,value:r.substring(0,l-u)}):h.push(s[c]),u+=r.length,c+=1}},t.end.row,this.session.getLine(t.end.row).length),h},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}.call(n.prototype),t.Text=n}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";function n(e){this.element=c.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),c.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}var c=e("../lib/dom");!function(){this.$updateOpacity=function(e){for(var t=this.cursors,i=t.length;i--;)c.setStyle(t[i].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&c.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,c.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,c.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=c.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){var e;if(1<this.cursors.length)return(e=this.cursors.pop()).parentNode.removeChild(e),e},this.hideCursor=function(){this.isVisible=!1,c.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,c.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e,t=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,c.removeCssClass(this.element,"ace_smooth-blinking")),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible?(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&c.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),c.HAS_CSS_ANIMATION?this.$startCssAnimation():(e=function(){this.timeoutId=setTimeout(function(){t(!1)},.6*this.blinkInterval)}.bind(this),this.intervalId=setInterval(function(){t(!0),e()},this.blinkInterval),e())):this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e=e||this.session.selection.getCursor();var i=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,e.row)?this.session.$bidiHandler.getPosLeft(i.column):i.column*this.config.characterWidth),top:(i.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return 0<=e.top&&e.top<t.maxHeight},this.update=function(e){this.config=e;for(var t=this.session.$selectionMarkers,i=0,n=0,i=0,o=(t=void 0!==t&&0!==t.length?t:[{cursor:null}]).length;i<o;i++){var r,s,a=this.getPixelPosition(t[i].cursor,!0);(a.top>e.height+e.offset||a.top<0)&&1<i||(s=(r=this.cursors[n++]||this.addCursor()).style,this.drawCursor?this.drawCursor(r,a,e,t[i],this.session):this.isCursorInView(a,e)?(c.setStyle(s,"display","block"),c.translate(r,a.left,a.top),c.setStyle(s,"width",Math.round(e.characterWidth)+"px"),c.setStyle(s,"height",e.lineHeight+"px")):c.setStyle(s,"display","none"))}for(;this.cursors.length>n;)this.removeCursor();var l=this.session.getOverwrite();this.$setOverwrite(l),this.$pixelPos=a,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&((this.overwrite=e)?c.addCssClass(this.element,"ace_overwrite-cursors"):c.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}.call(n.prototype),t.Cursor=n}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,i){"use strict";function n(e){this.element=a.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=a.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="¬†",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)}function o(e,t){n.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=a.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0}function r(e,t){n.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"}var s=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/event"),c=e("./lib/event_emitter").EventEmitter;!function(){s.implement(this,c),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}.call(n.prototype),s.inherits(o,n),function(){this.classSuffix="-v",this.onScroll=function(){var e;this.skipEvent||(this.scrollTop=this.element.scrollTop,1!=this.coeff&&(e=this.element.clientHeight/this.scrollHeight,this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)),this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){32768<(this.scrollHeight=e)?(this.coeff=32768/e,e=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(o.prototype);s.inherits(r,n),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(r.prototype),t.ScrollBar=o,t.ScrollBarV=o,t.ScrollBarH=r,t.VScrollBar=o,t.HScrollBar=r}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,i){"use strict";function n(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var i=this;this._flush=function(e){i.pending=!1;var t=i.changes;t&&(o.blockIdle(100),i.changes=0,i.onRender(t)),i.changes?i.$recursionLimit--<0||i.schedule():i.$recursionLimit=2}}var o=e("./lib/event");!function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(o.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}.call(n.prototype),t.RenderLoop=n}),define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,i){var n=e("../lib/oop"),o=e("../lib/dom"),r=e("../lib/lang"),s=e("../lib/event"),a=e("../lib/useragent"),l=e("../lib/event_emitter").EventEmitter,c="function"==typeof ResizeObserver,e=t.FontMetrics=function(e){this.el=o.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=o.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=o.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=r.stringRepeat("X",256),this.$characterSize={width:0,height:0},c?this.$addObserver():this.checkForSizeChanges()};!function(){n.implement(this,l),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",a.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){var t;!(e=void 0===e?this.$measureSizes():e)||this.$characterSize.width===e.width&&this.$characterSize.height===e.height||(this.$measureNode.style.fontWeight="bold",t=this.$measureSizes(),this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e}))},this.$addObserver=function(){var t=this;this.$observer=new window.ResizeObserver(function(e){t.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=s.onIdle(function e(){t.checkForSizeChanges(),s.onIdle(e,500)},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){e={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/256};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(e){return this.$main.textContent=r.stringRepeat(e,256),this.$main.getBoundingClientRect().width/256},this.getCharacterWidth=function(e){var t=this.charSizes[e];return t=void 0===t?this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width:t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t&&t.parentElement?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){function e(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]}this.els=o.buildDom([e(0,0),e(200,0),e(0,200),e(200,200)],this.el)},this.transformCoordinates=function(e,t){function i(e,t,i){var n=e[1]*t[0]-e[0]*t[1];return[(-t[1]*i[0]+t[0]*i[1])/n,(+e[1]*i[0]-e[0]*i[1])/n]}function n(e,t){return[e[0]-t[0],e[1]-t[1]]}function o(e,t){return[e[0]+t[0],e[1]+t[1]]}function r(e,t){return[e*t[0],e*t[1]]}function s(e){e=e.getBoundingClientRect();return[e.left,e.top]}e=e&&r(1/this.$getZoom(this.el),e),this.els||this.$initTransformMeasureNodes();var a=s(this.els[0]),l=s(this.els[1]),c=s(this.els[2]),u=s(this.els[3]),u=i(n(u,l),n(u,c),n(o(l,c),o(u,a))),l=r(1+u[0],n(l,a)),c=r(1+u[1],n(c,a));if(t)return d=u[0]*t[0]/200+u[1]*t[1]/200+1,t=o(r(t[0],l),r(t[1],c)),o(r(1/d/200,t),a);var d=n(e,a),t=i(n(l,r(u[0],d)),n(c,r(u[1],d)),d);return r(200,t)}}.call(e.prototype)}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(e,t,i){"use strict";function n(e,t){var i=this,e=(this.container=e||a.createElement("div"),a.addCssClass(this.container,"ace_editor"),a.HI_DPI&&a.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),null==r.get("useStrictCSP")&&r.set("useStrictCSP",!1),this.$gutter=a.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=a.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=a.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new l(this.content),this.$textLayer=new c(this.content));this.canvas=e.element,this.$markerFront=new l(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.on("scroll",function(e){i.$scrollAnimation||i.session.setScrollTop(e.data-i.scrollMargin.top)}),this.scrollBarH.on("scroll",function(e){i.$scrollAnimation||i.session.setScrollLeft(e.data-i.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new f(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(e){i.updateCharacterSize(),i.onResize(!0,i.gutterWidth,i.$size.width,i.$size.height),i._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!v.isIOS,this.$loop=new p(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),r.resetOptions(this),r._signal("renderer",this)}var o=e("./lib/oop"),a=e("./lib/dom"),r=e("./config"),s=e("./layer/gutter").Gutter,l=e("./layer/marker").Marker,c=e("./layer/text").Text,u=e("./layer/cursor").Cursor,d=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,p=e("./renderloop").RenderLoop,f=e("./layer/font_metrics").FontMetrics,g=e("./lib/event_emitter").EventEmitter,m='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',v=e("./lib/useragent"),y=v.isIE;a.importCssString(m,"ace_editor.css",!1);!function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,o.implement(this,g),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),a.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),(this.session=e)&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,i){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!i)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,i,n){if(!(2<this.resizing)){0<this.resizing?this.resizing++:this.resizing=e?1:0;var o=this.container,o=(n=n||(o.clientHeight||o.scrollHeight),i=i||(o.clientWidth||o.scrollWidth),this.$updateCachedSize(e,t,i,n));if(!this.$size.scrollerHeight||!i&&!n)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,i,n){n-=this.$extraHeight||0;var o=0,r=this.$size,s={width:r.width,height:r.height,scrollerHeight:r.scrollerHeight,scrollerWidth:r.scrollerWidth};return n&&(e||r.height!=n)&&(r.height=n,o|=this.CHANGE_SIZE,r.scrollerHeight=r.height,this.$horizScroll&&(r.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),i&&(e||r.width!=i)&&(o|=this.CHANGE_SIZE,r.width=i,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,a.setStyle(this.scrollBarH.element.style,"left",t+"px"),a.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),r.scrollerWidth=Math.max(0,i-t-this.scrollBarV.getWidth()-this.margin.h),a.setStyle(this.$gutter.style,"left",this.margin.left+"px"),t=this.scrollBarV.getWidth()+"px",a.setStyle(this.scrollBarH.element.style,"right",t),a.setStyle(this.scroller.style,"right",t),a.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(o|=this.CHANGE_FULL)),r.$dirty=!i||!n,o&&this._signal("resize",s),o},this.onGutterResize=function(e){e=this.$showGutter?e:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){var e;(this.$showPrintMargin||this.$printMarginEl)&&(this.$printMarginEl||((e=a.createElement("div")).className="ace_layer ace_print-margin-layer",this.$printMarginEl=a.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)),(e=this.$printMarginEl.style).left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit())},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){var e,t,i,n,o,r,s;this.$isMousePressed||(e=this.textarea.style,r=this.$composition,this.$keepTextAreaAtCursor||r?(i=this.$cursorLayer.$pixelPos)&&(r&&r.markerRange&&(i=this.$cursorLayer.getPixelPosition(r.markerRange.start,!0)),s=this.layerConfig,t=i.top,i=i.left,t-=s.offset,n=r&&r.useTextareaForIME?this.lineHeight:y?0:1,t<0||t>s.height-n?a.translate(this.textarea,0,0):(s=1,o=this.$size.height-n,r?r.useTextareaForIME?(r=this.textarea.value,s=this.characterWidth*this.session.$getStringScreenWidth(r)[0]):t+=this.lineHeight+2:t+=this.lineHeight,(i-=this.scrollLeft)>this.$size.scrollerWidth-s&&(i=this.$size.scrollerWidth-s),i+=this.gutterWidth+this.margin.left,a.setStyle(e,"height",n+"px"),a.setStyle(e,"width",s+"px"),a.translate(this.textarea,Math.min(i,this.$size.scrollerWidth-s),Math.min(t,o)))):a.translate(this.textarea,-100,0))},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,i,n){var o=this.scrollMargin;o.top=0|e,o.bottom=0|t,o.right=0|n,o.left=0|i,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.setMargin=function(e,t,i,n){var o=this.margin;o.top=0|e,o.bottom=0|t,o.right=0|n,o.left=0|i,o.v=o.top+o.bottom,o.h=o.left+o.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var i,n,t=this.layerConfig;return((e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL)&&(e|=this.$computeLayerConfig()|this.$loop.clear(),t.firstRow!=this.layerConfig.firstRow&&t.firstRowScreen==this.layerConfig.firstRowScreen&&0<(i=this.scrollTop+(t.firstRow-this.layerConfig.firstRow)*this.lineHeight)&&(this.scrollTop=i,e=(e|=this.CHANGE_SCROLL)|(this.$computeLayerConfig()|this.$loop.clear())),t=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),a.translate(this.content,-this.scrollLeft,-t.offset),i=t.width+2*this.$padding+"px",n=t.minHeight+"px",a.setStyle(this.content.style,"width",i),a.setStyle(this.content.style,"height",n)),e&this.CHANGE_H_SCROLL&&(a.translate(this.content,-this.scrollLeft,-t.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL)?(this.$changedLines=null,this.$textLayer.update(t),this.$showGutter&&this.$gutterLayer.update(t),this.$markerBack.update(t),this.$markerFront.update(t),this.$cursorLayer.update(t),this.$moveTextAreaToCursor(),void this._signal("afterRender",e)):(e&this.CHANGE_SCROLL?(this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(t):this.$textLayer.scrollLines(t),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(t):this.$gutterLayer.scrollLines(t)),this.$markerBack.update(t),this.$markerFront.update(t),this.$cursorLayer.update(t),this.$moveTextAreaToCursor()):(e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(t),this.$showGutter&&this.$gutterLayer.update(t)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(t):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(t):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(t),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(t),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(t),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(t)),void this._signal("afterRender",e))}this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,i=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(i+=this.scrollBarH.getHeight());t=!((i=this.$maxPixelHeight&&i>this.$maxPixelHeight?this.$maxPixelHeight:i)<=2*this.lineHeight)&&t<e;i==this.desiredHeight&&this.$size.height==this.desiredHeight&&t==this.$vScroll||(t!=this.$vScroll&&(this.$vScroll=t,this.scrollBarV.setVisible(t)),e=this.container.clientWidth,this.container.style.height=i+"px",this.$updateCachedSize(!0,this.$gutterWidth,e,i),this.desiredHeight=i,this._signal("autosize"))},this.$computeLayerConfig=function(){var e,t=this.session,i=this.$size,n=i.height<=2*this.lineHeight,o=this.session.getScreenLength()*this.lineHeight,r=this.$getLongestLine(),s=!n&&(this.$hScrollBarAlwaysVisible||i.scrollerWidth-r-2*this.$padding<0),a=this.$horizScroll!==s,s=(a&&(this.$horizScroll=s,this.scrollBarH.setVisible(s)),this.$vScroll),l=(this.$maxLines&&1<this.lineHeight&&this.$autosize(),i.scrollerHeight+this.lineHeight),c=!this.$maxLines&&this.$scrollPastEnd?(i.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0,u=(o+=c,this.scrollMargin),n=(this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,o-i.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,r+2*this.$padding-i.scrollerWidth+u.right))),!n&&(this.$vScrollBarAlwaysVisible||i.scrollerHeight-o+c<0||this.scrollTop>u.top)),c=s!==n,u=(c&&(this.$vScroll=n,this.scrollBarV.setVisible(n)),this.scrollTop%this.lineHeight),s=Math.ceil(l/this.lineHeight)-1,s=(n=Math.max(0,Math.round((this.scrollTop-u)/this.lineHeight)))+s,d=this.lineHeight,n=t.screenToDocumentRow(n,0),h=t.getFoldLine(n),t=(h&&(n=h.start.row),h=t.documentToScreenRow(n,0),e=t.getRowLength(n)*d,s=Math.min(t.screenToDocumentRow(s,0),t.getLength()-1),l=i.scrollerHeight+t.getRowLength(s)*d+e,u=this.scrollTop-h*d,0);return this.layerConfig.width==r&&!a||(t=this.CHANGE_H_SCROLL),(a||c)&&(t|=this.$updateCachedSize(!0,this.gutterWidth,i.width,i.height),this._signal("scrollbarVisibilityChanged"),c&&(r=this.$getLongestLine())),this.layerConfig={width:r,padding:this.$padding,firstRow:n,firstRowScreen:h,lastRow:s,lineHeight:d,characterWidth:this.characterWidth,minHeight:l,maxHeight:o,offset:u,gutterOffset:d?Math.max(0,Math.ceil((u+i.height-i.scrollerHeight)/d)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(r-this.$padding),t},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow,i=(this.$changedLines=null,this.layerConfig);if(!(e>i.lastRow+1||t<i.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(i),void this.$textLayer.update(i)):(this.$textLayer.updateLines(i,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,i){this.scrollCursorIntoView(e,i),this.scrollCursorIntoView(t,i)},this.scrollCursorIntoView=function(e,t,i){var n,o,r;0!==this.$size.scrollerHeight&&(n=(e=this.$cursorLayer.getPixelPosition(e)).left,e=e.top,r=i&&i.top||0,i=i&&i.bottom||0,e<(o=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop)+r?(t&&o+r>e+this.lineHeight&&(e-=t*this.$size.scrollerHeight),0===e&&(e=-this.scrollMargin.top),this.session.setScrollTop(e)):o+this.$size.scrollerHeight-i<e+this.lineHeight&&(t&&o+this.$size.scrollerHeight-i<e-this.lineHeight&&(e+=t*this.$size.scrollerHeight),this.session.setScrollTop(e+this.lineHeight+i-this.$size.scrollerHeight)),n<(r=this.scrollLeft)?(n<this.$padding+2*this.layerConfig.characterWidth&&(n=-this.scrollMargin.left),this.session.setScrollLeft(n)):r+this.$size.scrollerWidth<n+this.characterWidth?this.session.setScrollLeft(Math.round(n+this.characterWidth-this.$size.scrollerWidth)):r<=this.$padding&&n-r<this.characterWidth&&this.session.setScrollLeft(0))},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){var e=this.$cursorLayer.getPixelPosition(e="number"==typeof e?{row:e,column:0}:e),i=this.$size.scrollerHeight-this.lineHeight,e=e.top-i*(t||0);return this.session.setScrollTop(e),e},this.STEPS=8,this.$calcSteps=function(e,t){for(var i,n,o=0,r=this.STEPS,s=[],o=0;o<r;++o)s.push((i=o/this.STEPS,(t-(n=e))*(Math.pow(i-1,3)+1)+n));return s},this.scrollToLine=function(e,t,i,n){e=this.$cursorLayer.getPixelPosition({row:e,column:0}).top,t&&(e-=this.$size.scrollerHeight/2),t=this.scrollTop;this.session.setScrollTop(e),!1!==i&&this.animateScrolling(t,n)},this.animateScrolling=function(e,t){var i=this.scrollTop;if(this.$animatedScroll){var n=this;if(e!=i){if(this.$scrollAnimation){var o=this.$scrollAnimation.steps;if(o.length&&(e=o[0])==i)return}var r=n.$calcSteps(e,i);this.$scrollAnimation={from:e,to:i,steps:r},clearInterval(this.$timer),n.session.setScrollTop(r.shift()),n.session.$scrollTop=i,this.$timer=setInterval(function(){if(!n.session)return clearInterval(n.$timer);r.length?(n.session.setScrollTop(r.shift()),n.session.$scrollTop=i):null!=i?(n.session.$scrollTop=-1,n.session.setScrollTop(i),i=null):(n.$timer=clearInterval(n.$timer),n.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(e)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(0<t&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(0<e&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){this.$hasCssTransforms?(n={top:0,left:0},e=(i=this.$fontMetrics.transformCoordinates([e,t]))[1]-this.gutterWidth-this.margin.left,t=i[0]):n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,e=i/this.characterWidth,t=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),n=this.$blockCursor?Math.floor(e):Math.round(e);return{row:t,column:n,side:0<e-n?1:-1,offsetX:i}},this.screenToTextCoordinates=function(e,t){this.$hasCssTransforms?(i={top:0,left:0},e=(n=this.$fontMetrics.transformCoordinates([e,t]))[1]-this.gutterWidth-this.margin.left,t=n[0]):i=this.scroller.getBoundingClientRect();var i,n=e+this.scrollLeft-i.left-this.$padding,e=n/this.characterWidth,e=this.$blockCursor?Math.floor(e):Math.round(e),t=Math.floor((t+this.scrollTop-i.top)/this.lineHeight);return this.session.screenToDocumentPosition(t,Math.max(e,0),n)},this.textToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),t=this.session.documentToScreenPosition(e,t),e=this.$padding+(this.session.$bidiHandler.isBidiRow(t.row,e)?this.session.$bidiHandler.getPosLeft(t.column):Math.round(t.column*this.characterWidth)),t=t.row*this.lineHeight;return{pageX:i.left+e-this.scrollLeft,pageY:i.top+t-this.scrollTop}},this.visualizeFocus=function(){a.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){a.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){(this.$composition=e).cssText||(e.cssText=this.textarea.style.cssText),null==e.useTextareaForIME&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(a.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){var e;this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),a.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,e=this.session.selection.cursor,this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(e,t,i,n){var o=this.session,r=(o.bgTokenizer.lines[i]=null,{type:t,value:e}),s=o.getTokens(i);if(null==n)s.push(r);else for(var a=0,l=0;l<s.length;l++){var c=s[l];if(n<=(a+=c.value.length)){var u=c.value.length-(a-n),d=c.value.slice(0,u),u=c.value.slice(u);s.splice(l,1,{type:c.type,value:d},r,{type:c.type,value:u});break}}this.updateLines(i,i)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(i,n){var e,o=this;function t(e){if(o.$themeId!=i)return n&&n();if(!e||!e.cssClass)throw new Error("couldn't load module "+i+" or it didn't call define");e.$id&&(o.$themeId=e.$id),a.importCssString(e.cssText,e.cssClass,o.container),o.theme&&a.removeCssClass(o.container,o.theme.cssClass);var t="padding"in e?e.padding:"padding"in(o.theme||{})?4:o.$padding;o.$padding&&t!=o.$padding&&o.setPadding(t),o.$theme=e.cssClass,o.theme=e,a.addCssClass(o.container,e.cssClass),a.setCssClass(o.container,"ace_dark",e.isDark),o.$size&&(o.$size.width=0,o.$updateSizeAsync()),o._dispatchEvent("themeLoaded",{theme:e}),n&&n()}this.$themeId=i,o._dispatchEvent("themeChange",{theme:i}),i&&"string"!=typeof i?t(i):(e=i||this.$options.theme.initialValue,r.loadModule(["theme",e],t))},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){a.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){a.removeCssClass(this.container,e)},this.setCursorStyle=function(e){a.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){a.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){a.importCssString(m,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}.call(n.prototype),r.defineOptions(n.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){a.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){this.$scrollPastEnd!=(e=+e||0)&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!v.isMobile&&!v.isIE}}),t.VirtualRenderer=n}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(a,e,t){"use strict";var i=a("../lib/oop"),n=a("../lib/net"),c=a("../lib/event_emitter").EventEmitter,u=a("../config");function l(e){return"undefined"==typeof Worker?{postMessage:function(){},terminate:function(){}}:u.get("loadWorkerFromBlob")?(t=function(t){t="importScripts('"+n.qualifyURL(t)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return i.append(t),i.getBlob("application/javascript")}}(e),t=(window.URL||window.webkitURL).createObjectURL(t),new Worker(t)):new Worker(e);var t}function d(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage}(function(){i.implement(this,c),this.$createWorkerFromOldConfig=function(e,t,i,n,o){var r,s;return a.nameToUrl&&!a.toUrl&&(a.toUrl=a.nameToUrl),u.get("packaged")||!a.toUrl?n=n||u.moduleUrl(t,"worker"):(r=this.$normalizePath,n=n||r(a.toUrl("ace/worker/worker.js",null,"_")),s={},e.forEach(function(e){s[e]=r(a.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})),this.$worker=l(n),o&&this.send("importScripts",o),this.$worker.postMessage({init:!0,tlns:s,module:t,classname:i}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var i=this.callbacks[t.id];i&&(i(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return n.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,i){var n;i&&(n=this.callbackId++,this.callbacks[n]=i,t.push(n)),this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,50<e.length&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(d.prototype);e.UIWorkerClient=function(e,t,i){var n=null,o=!1,r=Object.create(c),s=[],a=new d({messageBuffer:s,terminate:function(){},postMessage:function(e){s.push(e),n&&(o?setTimeout(l):l())}}),l=(a.setEmitSync=function(e){o=e},function(){var e=s.shift();e.command?n[e.command].apply(n,e.args):e.event&&r._signal(e.event,e.data)});return r.postMessage=function(e){a.onMessage({data:e})},r.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},r.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},u.loadModule(["worker",t],function(e){for(n=new e[i](r);s.length;)l()}),a},e.WorkerClient=d,e.createWorker=l}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,i){"use strict";function n(e,t,i,n,o,r){var s=this,t=(this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=o,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=i,e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1});this.$undoStackDepth=t.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)}var l=e("./range").Range,o=e("./lib/event_emitter").EventEmitter,r=e("./lib/oop");!function(){r.implement(this,o),this.setup=function(){var t=this,i=this.doc,e=this.session,n=(this.selectionBefore=e.selection.toJSON(),e.selection.inMultiSelectMode&&e.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column),this.pos);n.$insertRight=!0,n.detach(),n.markerId=e.addMarker(new l(n.row,n.column,n.row,n.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(e){e=i.createAnchor(e.row,e.column);e.$insertRight=!0,e.detach(),t.others.push(e)}),e.setUndoSelect(!1)},this.showOtherMarkers=function(){var t,i;this.othersActive||(t=this.session,(i=this).othersActive=!0,this.others.forEach(function(e){e.markerId=t.addMarker(new l(e.row,e.column,e.row,e.column+i.length),i.othersClass,null,!1)}))},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var i="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,n=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,o=t.start.column-this.pos.column;if(this.updateAnchors(e),n&&(this.length+=i),n&&!this.session.$fromUndo)if("insert"===e.action)for(var r=this.others.length-1;0<=r;r--){var s={row:(a=this.others[r]).row,column:a.column+o};this.doc.insertMergedLines(s,e.lines)}else if("remove"===e.action)for(r=this.others.length-1;0<=r;r--){var a,s={row:(a=this.others[r]).row,column:a.column+o};this.doc.remove(new l(s.row,s.column,s.row,s.column-i))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var i=this,n=this.session,e=function(e,t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new l(e.row,e.column,e.row,e.column+i.length),t,null,!1)};e(this.pos,this.mainClass);for(var t=this.others.length;t--;)e(this.others[t],this.othersClass)}},this.onCursorChange=function(e){var t;!this.$updating&&this.session&&((t=this.session.selection.getCursor()).row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e)))},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,i=0;i<t;i++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}.call(n.prototype),t.PlaceHolder=n}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,i){var x=e("../lib/event"),S=e("../lib/useragent");function T(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,i=t.altKey,n=t.shiftKey,o=t.ctrlKey,r=e.getAccelKey(),s=e.getButton();if(o&&S.isMac&&(s=t.button),e.editor.inMultiSelectMode&&2==s)e.editor.textInput.onContextMenu(e.domEvent);else if(o||i||r){if(0===s){var a,l,c,u,d,h,p,f,g=e.editor,m=g.selection,v=g.inMultiSelectMode,y=e.getDocumentPosition(),b=m.getCursor(),b=e.inSelection()||m.isEmpty()&&T(y,b),w=e.x,C=e.y,_=g.session,A=g.renderer.pixelToScreenCoordinates(w,C),E=A;if(g.$mouseHandler.$enableJumpToDef)o&&i||r&&i?a=n?"block":"add":i&&g.$blockSelectEnabled&&(a="block");else if(r&&!i){if(a="add",!v&&n)return}else i&&g.$blockSelectEnabled&&(a="block");if(a&&S.isMac&&t.ctrlKey&&g.$mouseHandler.cancelContextMenu(),"add"==a)!v&&b||(v||(l=m.toOrientedRange(),g.addSelectionMarker(l)),c=m.rangeList.rangeAtPoint(y),g.inVirtualSelectionMode=!0,n&&(c=null,l=m.ranges[0]||l,g.removeSelectionMarker(l)),g.once("mouseup",function(){var e=m.toOrientedRange();c&&e.isEmpty()&&T(c.cursor,e.cursor)?m.substractPoint(e.cursor):(n?m.substractPoint(l.cursor):l&&(g.removeSelectionMarker(l),m.addRange(l)),m.addRange(e)),g.inVirtualSelectionMode=!1}));else if("block"==a)return e.stop(),g.inVirtualSelectionMode=!0,d=[],h=function(){var e=g.renderer.pixelToScreenCoordinates(w,C),t=_.screenToDocumentPosition(e.row,e.column,e.offsetX);T(E,e)&&T(t,m.lead)||(E=e,g.selection.moveToPosition(t),g.renderer.scrollCursorIntoView(),g.removeSelectionMarkers(d),d=m.rectangularRangeBlock(E,A),g.$mouseHandler.$clickSelection&&1==d.length&&d[0].isEmpty()&&(d[0]=g.$mouseHandler.$clickSelection.clone()),d.forEach(g.addSelectionMarker,g),g.updateSelectionMarkers())},v&&!r?m.toSingleRange():!v&&r&&(u=m.toOrientedRange(),g.addSelectionMarker(u)),n?A=_.documentToScreenPosition(m.lead):m.moveToPosition(y),E={row:-1,column:-1},p=h,x.capture(g.container,function(e){w=e.clientX,C=e.clientY},function(e){h(),clearInterval(f),g.removeSelectionMarkers(d),d.length||(d=[m.toOrientedRange()]),u&&(g.removeSelectionMarker(u),m.toSingleRange(u));for(var t=0;t<d.length;t++)m.addRange(d[t]);g.inVirtualSelectionMode=!1,g.$mouseHandler.$clickSelection=null}),f=setInterval(function(){p()},20),e.preventDefault()}}else 0===s&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,i){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(e){1<e.multiSelect.rangeCount?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];e=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new e(t.multiSelectCommands)}),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,o,t){var i=e("./range_list").RangeList,w=e("./range").Range,h=e("./selection").Selection,r=e("./mouse/multi_select_handler").onMouseDown,s=e("./lib/event"),p=e("./lib/lang"),a=e("./commands/multi_select_commands");o.commands=a.defaultCommands.concat(a.multiSelectCommands);var l=new(e("./search").Search);var n=e("./edit_session").EditSession,n=(!function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}.call(n.prototype),!function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var i=this.toOrientedRange();if(this.rangeList.add(i),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(i),this.$onAddRange(i)}e.cursor||(e.cursor=e.end);i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),1<this.rangeCount&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){e=this.rangeList.substractPoint(e);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){var t;this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode&&(t=this.rangeList.ranges.pop(),e.push(t),this.rangeCount=0);for(var i=e.length;i--;){var n=this.ranges.indexOf(e[i]);this.ranges.splice(n,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var e=this.ranges.length?this.ranges:[this.getRange()],t=[],i=0;i<e.length;i++){var n=e[i],o=n.start.row,r=n.end.row;if(o===r)t.push(n.clone());else{for(t.push(new w(o,n.start.column,o,this.session.getLine(o).length));++o<r;)t.push(this.getLineRange(o,!0));t.push(new w(r,0,r,n.end.column))}0!=i||this.isBackwards()||(t=t.reverse())}this.toSingleRange();for(i=t.length;i--;)this.addRange(t[i])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],e=w.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(e,t.cursor==t.start)},this.toggleBlockSelection=function(){var e,t;1<this.rangeCount?(t=(e=this.rangeList.ranges)[e.length-1],e=w.fromPoints(e[0].start,t.end),this.toSingleRange(),this.setSelectionRange(e,t.cursor==t.start)):(e=this.session.documentToScreenPosition(this.cursor),t=this.session.documentToScreenPosition(this.anchor),this.rectangularRangeBlock(e,t).forEach(this.addRange,this))},this.rectangularRangeBlock=function(e,t,i){var n,o,r,s,a,l,c,u=[],d=e.column<t.column,h=(s=d?(n=e.column,o=t.column,r=e.offsetX,t.offsetX):(n=t.column,o=e.column,r=t.offsetX,e.offsetX),e.row<t.row);l=h?(a=e.row,t.row):(a=t.row,e.row),n<0&&(n=0),(a=a<0?0:a)==l&&(i=!0);for(var p,f,g=a;g<=l;g++){var m=w.fromPoints(this.session.screenToDocumentPosition(g,n,r),this.session.screenToDocumentPosition(g,o,s));if(m.isEmpty()){if(c&&(p=m.end,f=c,p.row==f.row&&p.column==f.column))break;c=m.end}m.cursor=d?m.start:m.end,u.push(m)}if(h&&u.reverse(),!i){for(var v=u.length-1;u[v].isEmpty()&&0<v;)v--;if(0<v)for(var y=0;u[y].isEmpty();)y++;for(var b=v;y<=b;b--)u[b].isEmpty()&&u.splice(b,1)}return u}}.call(h.prototype),e("./editor").Editor);function c(e){var t,i;function n(e){i&&(t.renderer.setMouseCursor(""),i=!1)}e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=o.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",r),e.commands.addCommands(a.defaultCommands),(t=e).textInput&&(e=t.textInput.getElement(),i=!1,s.addListener(e,"keydown",function(e){e=18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey);t.$blockSelectEnabled&&e?i||(t.renderer.setMouseCursor("crosshair"),i=!0):i&&n()},t),s.addListener(e,"keyup",n,t),s.addListener(e,"blur",n,t)))}!function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){e.marker&&(this.session.removeMarker(e.marker),-1!=(e=this.session.$selectionMarkers.indexOf(e))&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length)},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,i=e.length;i--;){var n=e[i];n.marker&&(this.session.removeMarker(n.marker),-1!=(n=t.indexOf(n))&&t.splice(n,1))}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(a.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(a.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t,i=e.command,n=e.editor;if(n.multiSelect)return i.multiSelectAction?t="forEach"==i.multiSelectAction?n.forEachSelection(i,e.args):"forEachLine"==i.multiSelectAction?n.forEachSelection(i,e.args,!0):"single"==i.multiSelectAction?(n.exitMultiSelectMode(),i.exec(n,e.args||{})):i.multiSelectAction(n,e.args||{}):(t=i.exec(n,e.args||{}),n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()),t},this.forEachSelection=function(e,t,i){if(!this.inVirtualSelectionMode){var n,o=i&&i.keepOrder,r=1==i||i&&i.$byLines,s=this.session,i=this.selection,a=i.rangeList,l=(o?i:a).ranges;if(!l.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var o=i._eventRegistry,c=(i._eventRegistry={},new h(s));this.inVirtualSelectionMode=!0;for(var u=l.length;u--;){if(r)for(;0<u&&l[u].start.row==l[u-1].end.row;)u--;c.fromOrientedRange(l[u]),c.index=u,this.selection=s.selection=c;var d=e.exec?e.exec(this,t||{}):e(this,t||{});n||void 0===d||(n=d),c.toOrientedRange(l[u])}c.detach(),this.selection=s.selection=i,this.inVirtualSelectionMode=!1,i._eventRegistry=o,i.mergeOverlappingRanges(),i.ranges[0]&&i.fromOrientedRange(i.ranges[0]);a=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),a&&a.from==a.to&&this.renderer.animateScrolling(a.from),n}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,i=[],n=0;n<t.length;n++)i.push(this.session.getTextRange(t[n]));var o=this.session.getDocument().getNewLineCharacter();(e=i.join(o)).length==(i.length-1)*o.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){var i;this.inMultiSelectMode&&!this.inVirtualSelectionMode&&(i=this.multiSelect.ranges[0],this.multiSelect.isEmpty()&&t==this.multiSelect.anchor||((i=t==this.multiSelect.anchor?i.cursor==i.start?i.end:i.start:i.cursor).row!=t.row||this.session.$clipPositionToDocument(i.row,i.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()))},this.findAll=function(e,t,i){(t=t||{}).needle=e||t.needle,null==t.needle&&(n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange(),t.needle=this.session.getTextRange(n)),this.$search.set(t);var n,o=this.$search.findAll(this.session);if(!o.length)return 0;var r=this.multiSelect;i||r.toSingleRange(o[0]);for(var s=o.length;s--;)r.addRange(o[s],!0);return n&&r.rangeList.rangeAtPoint(n.start)&&r.addRange(n,!0),o.length},this.selectMoreLines=function(e,t){var i,n,o,r=this.selection.toOrientedRange(),s=r.cursor==r.end,a=this.session.documentToScreenPosition(r.cursor),l=(this.selection.$desiredColumn&&(a.column=this.selection.$desiredColumn),this.session.screenToDocumentPosition(a.row+e,a.column));e=r.isEmpty()?l:(i=this.session.documentToScreenPosition(s?r.end:r.start),this.session.screenToDocumentPosition(i.row+e,i.column)),s?(n=w.fromPoints(l,e)).cursor=n.start:(n=w.fromPoints(e,l)).cursor=n.end,n.desiredColumn=a.column,this.selection.inMultiSelectMode?t&&(o=r.cursor):this.selection.addRange(r),this.selection.addRange(n),o&&this.selection.substractPoint(o)},this.transposeSelections=function(e){for(var t=this.session,i=t.multiSelect,n=i.ranges,o=n.length;o--;)(s=n[o]).isEmpty()&&(a=t.getWordRange(s.start.row,s.start.column),s.start.row=a.start.row,s.start.column=a.start.column,s.end.row=a.end.row,s.end.column=a.end.column);i.mergeOverlappingRanges();for(var r=[],o=n.length;o--;){var s=n[o];r.unshift(t.getTextRange(s))}e<0?r.unshift(r.pop()):r.push(r.shift());for(o=n.length;o--;){var a=(s=n[o]).clone();t.replace(s,r[o]),s.start.row=a.start.row,s.start.column=a.start.column}i.fromOrientedRange(i.ranges[0])},this.selectMore=function(e,t,i){var n,o=this.session,r=o.multiSelect.toOrientedRange();r.isEmpty()&&((r=o.getWordRange(r.start.row,r.start.column)).cursor=-1==e?r.start:r.end,this.multiSelect.addRange(r),i)||(i=o.getTextRange(r),o=o,i=i,n=e,l.$options.wrap=!0,l.$options.needle=i,l.$options.backwards=-1==n,(i=l.find(o))&&(i.cursor=-1==e?i.start:i.end,this.session.unfold(i),this.multiSelect.addRange(i),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(r.cursor))},this.alignCursors=function(){var o=this.session,t=o.multiSelect,e=t.ranges,i=-1,n=e.filter(function(e){if(e.cursor.row==i)return!0;i=e.cursor.row});if(e.length&&n.length!=e.length-1){n.forEach(function(e){t.substractPoint(e.cursor)});var r=0,s=1/0,a=e.map(function(e){var e=e.cursor,t=o.getLine(e.row).substr(e.column).search(/\S/g);return e.column>r&&(r=e.column),(t=-1==t?0:t)<s&&(s=t),t});e.forEach(function(e,t){var i=e.cursor,n=r-i.column,t=a[t]-s;t<n?o.insert(i,p.stringRepeat(" ",n-t)):o.remove(new w(i.row,i.column,i.row,i.column-n+t)),e.start.column=e.end.column=r,e.start.row=e.end.row=i.row,e.cursor=e.end}),t.fromOrientedRange(e[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var n=this.selection.getRange(),l=n.start.row,c=n.end.row,e=l==c;if(e){for(var u,d=this.session.getLength();u=this.session.getLine(c),/[=:]/.test(u)&&++c<d;);for(;u=this.session.getLine(l),/[=:]/.test(u)&&0<--l;);l<0&&(l=0),d<=c&&(c=d-1)}var h=this.session.removeFullLines(l,c),h=this.$reAlignText(h,e);this.session.insert({row:l,column:0},h.join("\n")+"\n"),e||(n.start.column=0,n.end.column=h[h.length-1].length),this.selection.setRange(n)}},this.$reAlignText=function(e,t){var i,n,o,r=!0,s=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?(null==i?(i=t[1].length,n=t[2].length,o=t[3].length):(i+n+o!=t[1].length+t[2].length+t[3].length&&(s=!1),i!=t[1].length&&(r=!1),i>t[1].length&&(i=t[1].length),n<t[2].length&&(n=t[2].length),o>t[3].length&&(o=t[3].length)),t):[e]}).map(t?l:r?s?function(e){return e[2]?a(i+n-e[2].length)+e[2]+a(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:l:function(e){return e[2]?a(i)+e[2]+a(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function a(e){return p.stringRepeat(" ",e)}function l(e){return e[2]?a(i)+e[2]+a(n-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}.call(n.prototype),o.onSessionChange=function(e){var t=e.session,e=(t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect,e.oldSession);e&&(e.multiSelect.off("addRange",this.$onAddRange),e.multiSelect.off("removeRange",this.$onRemoveRange),e.multiSelect.off("multiSelect",this.$onMultiSelect),e.multiSelect.off("singleSelect",this.$onSingleSelect),e.multiSelect.lead.off("change",this.$checkMultiselectChange),e.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},o.MultiSelect=c,e("./config").defineOptions(n.prototype,"editor",{enableMultiselect:{set:function(e){c(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",r)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",r))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,i){"use strict";var u=e("../../range").Range,e=t.FoldMode=function(){};!function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,i){e=e.getLine(i);return this.foldingStartMarker.test(e)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(e)?"end":""},this.getFoldWidgetRange=function(e,t,i){return null},this.indentationBlock=function(e,t,i){var n=/\S/,o=e.getLine(t),r=o.search(n);if(-1!=r){for(var s,i=i||o.length,a=e.getLength(),o=t,l=t;++t<a;){var c=e.getLine(t).search(n);if(-1!=c){if(c<=r){c=e.getTokenAt(t,0);if(!c||"string"!==c.type)break}l=t}}return o<l?(s=e.getLine(l).length,new u(o,i,l,s)):void 0}},this.openingBracketBlock=function(e,t,i,n,o){i={row:i,column:n+1},n=e.$findClosingBracket(t,i,o);if(n)return t=e.foldWidgets[n.row],"start"==(t=null==t?e.getFoldWidget(n.row):t)&&n.row>i.row&&(n.row--,n.column=e.getLine(n.row).length),u.fromPoints(i,n)},this.closingBracketBlock=function(e,t,i,n,o){i={row:i,column:n},n=e.$findOpeningBracket(t,i);if(n)return n.column++,i.column--,u.fromPoints(n,i)}}.call(e.prototype)}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)}),define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict";var o=e("./lib/dom");function n(e){this.session=e,(this.session.widgetManager=this).session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}!function(){this.getRowLength=function(e){var t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)}),t},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),(this.editor=e)&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;t&&(this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets),(t=this.session.lineWidgets)&&t.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))},this.updateOnFold=function(e,t){var i=t.lineWidgets;if(i&&e.action){for(var t=e.data,n=t.start.row,o=t.end.row,r="add"==e.action,s=n+1;s<o;s++)i[s]&&(i[s].hidden=r);i[o]&&(r?i[n]?i[o].hidden=r:i[n]=i[o]:(i[n]==i[o]&&(i[n]=void 0),i[o].hidden=r))}},this.updateOnChange=function(e){var t,i,n,o=this.session.lineWidgets;o&&(t=e.start.row,0!=(i=e.end.row-t)&&("remove"==e.action?(n=o.splice(t+1,i),!o[t]&&n[n.length-1]&&(o[t]=n.pop()),n.forEach(function(e){e&&this.removeLineWidget(e)},this)):(n=new Array(i),o[t]&&null!=o[t].column&&e.start.column>o[t].column&&t++,n.unshift(t,0),o.splice.apply(o,n)),this.$updateRows()))},this.$updateRows=function(){var i,e=this.session.lineWidgets;e&&(i=!0,e.forEach(function(e,t){if(e)for(i=!1,e.row=t;e.$oldWidget;)e.$oldWidget.row=t,e=e.$oldWidget}),i&&(this.session.lineWidgets=null))},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t).el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1),this.session.lineWidgets[e.row]=e},this.addLineWidget=function(e){if(this.$registerLineWidget(e),e.session=this.session,!this.editor)return e;var t,i=this.editor.renderer,n=(e.html&&!e.el&&(e.el=o.createElement("div"),e.el.innerHTML=e.html),e.el&&(o.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,i.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight)),null==e.rowCount&&(e.rowCount=e.pixelHeight/i.layerConfig.lineHeight),this.session.getFoldAt(e.row,0));return(e.$fold=n)&&(t=this.session.lineWidgets,e.row!=n.end.row||t[n.start.row]?e.hidden=!0:t[n.start.row]=e),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,i),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,i=t&&t[e],n=[];i;)n.push(i),i=i.$oldWidget;return n},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var i=this.session._changedWidgets,n=t.layerConfig;if(i&&i.length){for(var o=1/0,r=0;r<i.length;r++){var s=i[r];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,t.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/n.characterWidth));var a=s.h/n.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<o&&(o=s.row))}}o!=1/0&&(this.session._emit("changeFold",{data:{start:{row:o}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var i=t.layerConfig,n=this.session.lineWidgets;if(n){for(var o=Math.min(this.firstRow,i.firstRow),r=Math.max(this.lastRow,i.lastRow,n.length);0<o&&!n[o];)o--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,t.$cursorLayer.config=i;for(var s=o;s<=r;s++){var a,l=n[s];l&&l.el&&(l.hidden?l.el.style.top=-100-(l.pixelHeight||0)+"px":(l._inDocument||(l._inDocument=!0,t.container.appendChild(l.el)),a=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top,l.coverLine||(a+=i.lineHeight*this.session.getRowLineCount(l.row)),l.el.style.top=a-i.offset+"px",a=l.coverGutter?0:t.gutterWidth,l.fixedWidth||(a-=t.scrollLeft),l.el.style.left=a+"px",l.fullWidth&&l.screenWidth&&(l.el.style.minWidth=i.width+2*i.padding+"px"),l.fixedWidth?l.el.style.right=t.scrollBar.getWidth()+"px":l.el.style.right=""))}}}}.call(n.prototype),t.LineWidgets=n}),define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,i){"use strict";var c=e("../line_widgets").LineWidgets,u=e("../lib/dom"),a=e("../range").Range;function d(e,t,i){var n=e.getAnnotations().sort(a.comparePoints);if(n.length){var o=function(e,t,i){for(var n=0,o=e.length-1;n<=o;){var r=n+o>>1,s=i(t,e[r]);if(0<s)n=1+r;else{if(!(s<0))return r;o=r-1}}return-(n+1)}(n,{row:t,column:-1},a.comparePoints),r=((o=o<0?-o-1:o)>=n.length?o=0<i?0:n.length-1:0===o&&i<0&&(o=n.length-1),n[o]);if(r&&i){if(r.row===t){for(;(r=n[o+=i])&&r.row===t;);if(!r)return n.slice()}var s=[];for(t=r.row;s[i<0?"unshift":"push"](r),(r=n[o+=i])&&r.row==t;);return s.length&&s}}}t.showErrorMarker=function(e,t){var i,n=e.session,o=(n.widgetManager||(n.widgetManager=new c(n),n.widgetManager.attach(e)),e.getCursorPosition()),r=o.row,s=n.widgetManager.getWidgetsAtRow(r).filter(function(e){return"errorMarker"==e.type})[0],r=(s?s.destroy():r-=t,d(n,r,t));if(r){t=r[0];o.column=(t.pos&&"number"!=typeof t.column?t.pos.sc:t.column)||0,o.row=t.row,i=e.renderer.$gutterLayer.$annotations[o.row]}else{if(s)return;i={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(o.row),e.selection.moveToPosition(o);function a(e,t,i){if(0===t&&("esc"===i||"return"===i))return l.destroy(),{command:"null"}}var l={row:o.row,fixedWidth:!0,coverGutter:!0,el:u.createElement("div"),type:"errorMarker"},r=l.el.appendChild(u.createElement("div")),t=l.el.appendChild(u.createElement("div")),s=(t.className="error_widget_arrow "+i.className,e.renderer.$cursorLayer.getPixelPosition(o).left);t.style.left=s+e.renderer.gutterWidth-5+"px",l.el.className="error_widget_wrapper",r.className="error_widget "+i.className,r.innerHTML=i.text.join("<br>"),r.appendChild(u.createElement("div"));l.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(a),n.widgetManager.removeLineWidget(l),e.off("changeSelection",l.destroy),e.off("changeSession",l.destroy),e.off("mouseup",l.destroy),e.off("change",l.destroy))},e.keyBinding.addKeyboardHandler(a),e.on("changeSelection",l.destroy),e.on("changeSession",l.destroy),e.on("mouseup",l.destroy),e.on("change",l.destroy),e.session.widgetManager.addLineWidget(l),l.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:l.el.offsetHeight})},u.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","error_marker.css",!1)}),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,r,t){"use strict";e("./lib/fixoldbrowsers");var s=e("./lib/dom"),a=e("./lib/event"),i=e("./range").Range,l=e("./editor").Editor,n=e("./edit_session").EditSession,o=e("./undomanager").UndoManager,c=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),r.config=e("./config"),r.require=e,"function"==typeof define&&(r.define=define),r.edit=function(e,t){if("string"==typeof e){var i=e;if(!(e=document.getElementById(i)))throw new Error("ace.edit can't find div #"+i)}if(e&&e.env&&e.env.editor instanceof l)return e.env.editor;var n,i="",i=(e&&/input|textarea/i.test(e.tagName)?(i=(n=e).value,e=s.createElement("pre"),n.parentNode.replaceChild(e,n)):e&&(i=e.textContent,e.innerHTML=""),r.createEditSession(i)),e=new l(new c(e),i,t),o={document:i,editor:e,onResize:e.resize.bind(e,null)};return n&&(o.textarea=n),a.addListener(window,"resize",o.onResize),e.on("destroy",function(){a.removeListener(window,"resize",o.onResize),o.editor.container.env=null}),e.container.env=e.env=o,e},r.createEditSession=function(e,t){e=new n(e,t);return e.setUndoManager(new o),e},r.Range=i,r.Editor=l,r.EditSession=n,r.UndoManager=o,r.VirtualRenderer=c,r.version=r.config.version}),window.require(["ace/ace"],function(e){for(var t in e&&(e.config.init(!0),e.define=window.define),window.ace||(window.ace=e),e)e.hasOwnProperty(t)&&(window.ace[t]=e[t]);window.ace.default=window.ace,"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=window.ace)}),define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(e,s,t){"use strict";var i=e("./lib/dom"),n=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,c=e("./lib/lang"),u=e("./range").Range,d=e("./range_list").RangeList,r=e("./keyboard/hash_handler").HashHandler,a=e("./tokenizer").Tokenizer,l=e("./clipboard"),h={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,i){e=e.session.getTextRange();return i?e.replace(/\n\r?([ \t]*\S)/g,"\n"+i+"$1"):e},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return l.getText&&l.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){e=e.session.$mode||{};return e.blockComment&&e.blockComment.start||""},BLOCK_COMMENT_END:function(e){e=e.session.$mode||{};return e.blockComment&&e.blockComment.end||""},LINE_COMMENT:function(e){return(e.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:p.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:p.bind(null,{year:"2-digit"}),CURRENT_MONTH:p.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:p.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:p.bind(null,{month:"short"}),CURRENT_DATE:p.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:p.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:p.bind(null,{weekday:"short"}),CURRENT_HOUR:p.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:p.bind(null,{minute:"2-digit"}),CURRENT_SECOND:p.bind(null,{second:"2-digit"})};function p(e){e=(new Date).toLocaleString("en-us",e);return 1==e.length?"0"+e:e}h.SELECTED_TEXT=h.SELECTION;function f(){this.snippetMap={},this.snippetNameMap={}}!function(){n.implement(this,o),this.getTokenizer=function(){return f.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function n(e){return e=e.substr(1),/^\d+$/.test(e)?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function e(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var t={regex:"/("+e("/")+"+)/",onMatch:function(e,t,i){i=i[0];return i.fmtString=!0,i.guard=e.slice(1,-1),i.flag=""},next:"formatString"};return f.$tokenizer=new a({start:[{regex:/\\./,onMatch:function(e,t,i){var n=e[1];return[e="}"==n&&i.length||-1!="`$\\".indexOf(n)?n:e]}},{regex:/}/,onMatch:function(e,t,i){return[i.length?i.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:n},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,t,i){e=n(e.substr(1));return i.unshift(e[0]),e},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+e("\\|")+"*\\|",onMatch:function(e,t,i){e=e.slice(1,-1).replace(/\\[,|\\]|,/g,function(e){return 2==e.length?e[1]:"\0"}).split("\0").map(function(e){return{value:e}});return[(i[0].choices=e)[0]]},next:"start"},t,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,i){return i.length&&i[0].expectElse?(i[0].expectElse=!1,i[0].ifEnd={elseEnd:i[0]},[i[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,i){var n=e[1];return"}"==n&&i.length||-1!="`$\\".indexOf(n)?e=n:"n"==n?e="\n":"t"==n?e="\t":-1!="ulULE".indexOf(n)&&(e={changeCase:n,local:"a"<n}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,i){i=i.shift();return i&&(i.flag=e.slice(1,-1)),this.next=i&&i.tabstopId?"start":"",[i||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,i){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,i){e={text:e.slice(2)};return i.unshift(e),[e]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,i){i=i.shift();return this.next=i&&i.tabstopId?"start":"",[i||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,i){return i[0].formatFunction=e.slice(2,-1),[i.shift()]},next:"formatString"},t,{regex:/:[\?\-+]?/,onMatch:function(e,t,i){"+"==e[1]&&(i[0].ifEnd=i[0]),"?"==e[1]&&(i[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]})},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.getVariableValue=function(e,t,i){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var n=this.variables[t];return null==(n="function"==typeof n?this.variables[t](e,t,i):n)?"":n},this.variables=h,this.tmStrFormat=function(e,t,s){if(!t.fmt)return e;var i=t.flag||"",n=t.guard,n=new RegExp(n,i.replace(/[^gim]/g,"")),a="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,l=this;return e.replace(n,function(){for(var e=l.variables.__,t=(l.variables.__=[].slice.call(arguments),l.resolveVariables(a,s)),i="E",n=0;n<t.length;n++){var o,r=t[n];"object"==typeof r?(t[n]="",r.changeCase&&r.local?(o=t[n+1])&&"string"==typeof o&&("u"==r.changeCase?t[n]=o[0].toUpperCase():t[n]=o[0].toLowerCase(),t[n+1]=o.substr(1)):r.changeCase&&(i=r.changeCase)):"U"==i?t[n]=r.toUpperCase():"L"==i&&(t[n]=r.toLowerCase())}return l.variables.__=e,t.join("")})},this.tmFormatFunction=function(e,t,i){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},this.resolveVariables=function(t,e){for(var i=[],n="",o=!0,r=0;r<t.length;r++){var s,a=t[r];"string"==typeof a?(i.push(a),"\n"==a?(o=!0,n=""):o&&(n=/^\t*/.exec(a)[0],o=/\S/.test(a))):a&&(o=!1,a.fmtString&&(-1==(s=t.indexOf(a,r+1))&&(s=t.length),a.fmt=t.slice(r+1,s),r=s),a.text?(s=this.getVariableValue(e,a.text,n)+"",a.fmtString&&(s=this.tmStrFormat(s,a,e)),(s=a.formatFunction?this.tmFormatFunction(s,a,e):s)&&!a.ifEnd?(i.push(s),l(a)):!s&&a.ifEnd&&l(a.ifEnd)):a.elseEnd?l(a.elseEnd):null==a.tabstopId&&null==a.changeCase||i.push(a))}function l(e){e=t.indexOf(e,r+1);-1!=e&&(r=e)}return i},this.insertSnippetForSelection=function(e,t){var i=e.getCursorPosition(),n=e.session.getLine(i.row),o=e.session.getTabString(),r=n.match(/^\s*/)[0],s=(i.column<r.length&&(r=r.slice(0,i.column)),t=t.replace(/\r/g,""),this.tokenizeTmSnippet(t)),a=(s=(s=this.resolveVariables(s,e)).map(function(e){return"\n"==e?e+r:"string"==typeof e?e.replace(/\t/g,o):e}),[]),l=(s.forEach(function(e,t){var i,n;"object"==typeof e&&(n=e.tabstopId,(i=a[n])||((i=a[n]=[]).index=n,i.value="",i.parents={}),-1===i.indexOf(e)&&(e.choices&&!i.choices&&(i.choices=e.choices),i.push(e),-1!==(n=s.indexOf(e,t+1))&&((e=s.slice(t+1,n)).some(function(e){return"object"==typeof e})&&!i.value?i.value=e:!e.length||i.value&&"string"==typeof i.value||(i.value=e.join("")))))}),a.forEach(function(e){e.length=0}),{});for(var c=0;c<s.length;c++){var u,d,h,p=s[c];"object"==typeof p&&(h=p.tabstopId,u=a[h],d=s.indexOf(p,c+1),l[h]?l[h]===p&&(delete l[h],Object.keys(l).forEach(function(e){u.parents[e]=!0})):(l[h]=p,"string"!=typeof(h=u.value)?h=function(e){for(var t=[],i=0;i<e.length;i++){if("object"==typeof(n=e[i])){if(l[n.tabstopId])continue;var n=t[e.lastIndexOf(n,i-1)]||{tabstopId:n.tabstopId}}t[i]=n}return t}(h):p.fmt&&(h=this.tmStrFormat(h,p,e)),s.splice.apply(s,[c+1,Math.max(0,d-c)].concat(h,p)),-1===u.indexOf(p)&&u.push(p)))}var f=0,g=0,m="",n=(s.forEach(function(e){var t;"string"==typeof e?(1<(t=e.split("\n")).length?(g=t[t.length-1].length,f+=t.length-1):g+=e.length,m+=e):e&&(e.start?e.end={row:f,column:g}:e.start={row:f,column:g})}),e.getSelectionRange()),i=e.session.replace(n,m),t=new y(e),v=e.inVirtualSelectionMode&&e.selection.index;t.addTabstops(a,n.start,i,v)},this.insertSnippet=function(e,t){var i=this;if(e.inVirtualSelectionMode)return i.insertSnippetForSelection(e,t);e.forEachSelection(function(){i.insertSnippetForSelection(e,t)},null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},this.$getScope=function(e){var t,i=e.session.$mode.$id||"";return"html"!==(i=i.split("/").pop())&&"php"!==i||("php"!==i||e.session.$mode.inlinePhp||(i="html"),t=e.getCursorPosition(),(e="object"==typeof(e=e.session.getState(t.row))?e[0]:e).substring&&("js-"==e.substring(0,3)?i="javascript":"css-"==e.substring(0,4)?i="css":"php-"==e.substring(0,4)&&(i="php"))),i},this.getActiveScopes=function(e){var e=this.$getScope(e),t=[e],i=this.snippetMap;return i[e]&&i[e].includeScopes&&t.push.apply(t,i[e].includeScopes),t.push("_"),t},this.expandWithTab=function(e,t){var i=this,n=e.forEachSelection(function(){return i.expandSnippetForSelection(e,t)},null,{keepOrder:!0});return n&&e.tabstopManager&&e.tabstopManager.tabNext(),n},this.expandSnippetForSelection=function(e,t){var i,n=e.getCursorPosition(),o=e.session.getLine(n.row),r=o.substring(0,n.column),s=o.substr(n.column),a=this.snippetMap;return this.getActiveScopes(e).some(function(e){e=a[e];return!!(i=e?this.findMatchingSnippet(e,r,s):i)},this),!!i&&(!(!t||!t.dryRun)||(e.session.doc.removeInLine(n.row,n.column-i.replaceBefore.length,n.column+i.replaceAfter.length),this.variables.M__=i.matchBefore,this.variables.T__=i.matchAfter,this.insertSnippetForSelection(e,i.content),!(this.variables.M__=this.variables.T__=null)))},this.findMatchingSnippet=function(e,t,i){for(var n=e.length;n--;){var o=e[n];if((!o.startRe||o.startRe.test(t))&&((!o.endRe||o.endRe.test(i))&&(o.startRe||o.endRe)))return o.matchBefore=o.startRe?o.startRe.exec(t):[""],o.matchAfter=o.endRe?o.endRe.exec(i):[""],o.replaceBefore=o.triggerRe?o.triggerRe.exec(t)[0]:"",o.replaceAfter=o.endTriggerRe?o.endTriggerRe.exec(i)[0]:"",o}},this.snippetMap={},this.snippetNameMap={},this.register=function(t,n){var o=this.snippetMap,r=this.snippetNameMap,s=this;function a(e){return(e=e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)?"(?:"+e+")":e)||""}function l(e,t,i){return e=a(e),t=a(t),i?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function i(e){e.scope||(e.scope=n||"_"),n=e.scope,o[n]||(o[n]=[],r[n]={});var t,i=r[n];e.name&&((t=i[e.name])&&s.unregister(t),i[e.name]=e),o[n].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=c.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=l(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=l(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}t=t||[],Array.isArray(t)?t.forEach(i):Object.keys(t).forEach(function(e){i(t[e])}),this._signal("registerSnippets",{scope:n})},this.unregister=function(e,i){var n=this.snippetMap,o=this.snippetNameMap;function t(e){var t=o[e.scope||i];t&&t[e.name]&&(delete t[e.name],0<=(e=(t=n[e.scope||i])&&t.indexOf(e))&&t.splice(e,1))}e.content?t(e):Array.isArray(e)&&e.forEach(t)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,i,n,o=[],r={},s=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;i=s.exec(e);){if(i[1])try{r=JSON.parse(i[1]),o.push(r)}catch(e){}i[4]?(r.content=i[4].replace(/^\t/gm,""),o.push(r),r={}):(t=i[2],i=i[3],"regex"==t?(r.guard=(n=/\/((?:[^\/\\]|\\.)*)|$/g).exec(i)[1],r.trigger=n.exec(i)[1],r.endTrigger=n.exec(i)[1],r.endGuard=n.exec(i)[1]):"snippet"==t?(r.tabTrigger=i.match(/^\S*/)[0],r.name||(r.name=i)):t&&(r[t]=i))}return o},this.getSnippetByName=function(t,e){var i,n=this.snippetNameMap;return this.getActiveScopes(e).some(function(e){e=n[e];return!!(i=e?e[t]:i)},this),i}}.call(f.prototype);var y=function(e){if(e.tabstopManager)return e.tabstopManager;(e.tabstopManager=this).$onChange=this.onChange.bind(this),this.$onChangeSelection=c.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)},g=(!function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){for(var t="r"==e.action[0],i=this.selectedTabstop||{},n=i.parents||{},o=(this.tabstops||[]).slice(),r=0;r<o.length;r++){var s=o[r],a=s==i||n[s.index];if(s.rangeList.$bias=a?0:1,"remove"==e.action&&s!==i)for(var a=s.parents&&s.parents[i.index],l=(l=s.rangeList.pointIndex(e.start,a))<0?-l-1:l+1,a=(a=s.rangeList.pointIndex(e.end,a))<0?-a-1:a-1,c=s.rangeList.ranges.slice(l,a),u=0;u<c.length;u++)this.removeRange(c[u]);s.rangeList.$onChange(e)}var d=this.editor.session;this.$inChange||!t||1!=d.getLength()||d.getValue()||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges&&e.firstNonLinked){this.$inChange=!0;for(var t=this.editor.session,i=t.getTextRange(e.firstNonLinked),n=0;n<e.length;n++){var o,r=e[n];r.linked&&(o=r.original,o=s.snippetManager.tmStrFormat(i,o,this.editor),t.replace(r,o))}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,i=this.editor.selection.isEmpty(),n=0;n<this.ranges.length;n++)if(!this.ranges[n].linked){var o=this.ranges[n].contains(e.row,e.column),r=i||this.ranges[n].contains(t.row,t.column);if(o&&r)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,e=this.index+(e||1),e=Math.min(Math.max(e,1),t);this.selectTabstop(e=e==t?0:e),0===e&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){e=(this.selectedTabstop=t).firstNonLinked||t;if(t.choices&&(e.cursor=e.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(e);else{var i=this.editor.multiSelect;i.toSingleRange(e);for(var n=0;n<t.length;n++)t.hasLinkedRanges&&t[n].linked||i.addRange(t[n].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(e,s,t){var a=this.useLink||!this.editor.getOption("enableMultiselect");this.$openTabstops||(this.$openTabstops=[]),e[0]||(t=u.fromPoints(t,t),m(t.start,s),m(t.end,s),e[0]=[t],e[0].index=0);var l=[this.index+1,0],c=this.ranges;e.forEach(function(e,t){for(var i=this.$openTabstops[t]||e,n=0;n<e.length;n++){var o=e[n],r=u.fromPoints(o.start,o.end||o.start);g(r.start,s),g(r.end,s),r.original=o,r.tabstop=i,c.push(r),i!=e?i.unshift(r):i[n]=r,o.fmtString||i.firstNonLinked&&a?(r.linked=!0,i.hasLinkedRanges=!0):i.firstNonLinked||(i.firstNonLinked=r)}i.firstNonLinked||(i.hasLinkedRanges=!1),i===e&&(l.push(i),this.$openTabstops[t]=i),this.addTabstopMarkers(i),i.rangeList=i.rangeList||new d,i.rangeList.$bias=0,i.rangeList.addList(i)},this),2<l.length&&(this.tabstops.length&&l.push(l.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,l))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),-1!=(t=this.ranges.indexOf(e))&&this.ranges.splice(t,1),-1!=(t=e.tabstop.rangeList.ranges.indexOf(e))&&e.tabstop.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new r,this.keyboardHandler.bindKeys({Tab:function(e){s.snippetManager&&s.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}})}.call(y.prototype),function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}),m=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row},i=(i.importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}","snippets.css",!1),s.snippetManager=new f,e("./editor").Editor);!function(){this.insertSnippet=function(e,t){return s.snippetManager.insertSnippet(this,e,t)},this.expandSnippet=function(e){return s.snippetManager.expandWithTab(this,e)}}.call(i.prototype)}),define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t,i){"use strict";function a(e){return(e=new n(e)).$maxLines=4,(e=new o(e)).setHighlightActiveLine(!1),e.setShowPrintMargin(!1),e.renderer.setShowGutter(!1),e.renderer.setHighlightGutterLine(!1),e.$mouseHandler.$focusTimeout=0,e.$highlightTagPending=!0,e}var n=e("../virtual_renderer").VirtualRenderer,o=e("../editor").Editor,l=e("../range").Range,u=e("../lib/event"),d=e("../lib/lang"),p=e("../lib/dom");p.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #3a674e;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);    position: absolute;    z-index: 2;}.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid rgba(109, 150, 13, 0.8);    background: rgba(58, 103, 78, 0.62);}.ace_completion-meta {    opacity: 0.5;    margin: 0.9em;}.ace_completion-message {    color: blue;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #2d69c7;}.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #93ca12;}.ace_editor.ace_autocomplete {    width: 300px;    z-index: 200000;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;    background: #fefefe;    color: #111;}.ace_dark.ace_editor.ace_autocomplete {    border: 1px #484747 solid;    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);    line-height: 1.4;    background: #25282c;    color: #c1c1c1;}","autocompletion.css",!1),t.AcePopup=function(e){function t(){}function i(){s(-1)}var c,n=p.createElement("div"),h=new a(n),o=(e&&e.appendChild(n),n.style.display="none",h.renderer.content.style.cursor="default",h.renderer.setStyle("ace_autocomplete"),h.setOption("displayIndentGuides",!1),h.setOption("dragDelay",150),h.focus=t,h.$isFocused=!0,h.renderer.$cursorLayer.restartTimer=t,h.renderer.$cursorLayer.element.style.opacity=0,h.renderer.$maxLines=8,h.renderer.$keepTextAreaAtCursor=!1,h.setHighlightActiveLine(!1),h.session.highlight(""),h.session.$searchHighlight.clazz="ace_highlight-marker",h.on("mousedown",function(e){var t=e.getDocumentPosition();h.selection.moveToPosition(t),r.start.row=r.end.row=t.row,e.stop()}),new l(-1,0,-1,1/0)),r=new l(-1,0,-1,1/0),s=(r.id=h.session.addMarker(r,"ace_active-line","fullLine"),h.setSelectOnHover=function(e){e?o.id&&(h.session.removeMarker(o.id),o.id=null):o.id=h.session.addMarker(o,"ace_line-hover","fullLine")},h.setSelectOnHover(!1),h.on("mousemove",function(e){var t;c?c.x==e.x&&c.y==e.y||((c=e).scrollTop=h.renderer.scrollTop,t=c.getDocumentPosition().row,o.start.row!=t&&(o.id||h.setRow(t),s(t))):c=e}),h.renderer.on("beforeRender",function(){var e;c&&-1!=o.start.row&&(c.$pos=null,e=c.getDocumentPosition().row,o.id||h.setRow(e),s(e,!0))}),h.renderer.on("afterRender",function(){var e=h.getRow(),t=h.renderer.$textLayer,e=t.element.childNodes[e-t.config.firstRow];e!==t.selectedNode&&t.selectedNode&&p.removeCssClass(t.selectedNode,"ace_selected"),(t.selectedNode=e)&&p.addCssClass(e,"ace_selected")}),function(e,t){e!==o.start.row&&(o.start.row=o.end.row=e,t||h.session._emit("changeBackMarker"),h._emit("changeHoverMarker"))}),e=(h.getHoveredRow=function(){return o.start.row},u.addListener(h.container,"mouseout",i),h.on("hide",i),h.on("changeSelection",i),h.session.doc.getLength=function(){return h.data.length},h.session.doc.getLine=function(e){e=h.data[e];return"string"==typeof e?e:e&&e.value||""},h.session.bgTokenizer);return e.$tokenizeRow=function(e){var i=h.data[e],n=[];if(!i)return n;var t=(i="string"==typeof i?{value:i}:i).caption||i.value||i.name;function o(e,t){e&&n.push({type:(i.className||"")+(t||""),value:e})}for(var r,s,a=t.toLowerCase(),l=(h.filterText||"").toLowerCase(),c=0,u=0,d=0;d<=l.length;d++)d!=u&&(i.matchMask&1<<d||d==l.length)&&(r=l.slice(u,d),u=d,-1!=(s=a.indexOf(r,c))&&(o(t.slice(c,s),""),c=s+r.length,o(t.slice(s,c),"completion-highlight")));return o(t.slice(c,t.length),""),i.meta&&n.push({type:"completion-meta",value:i.meta}),i.message&&n.push({type:"completion-message",value:i.message}),n},e.$updateOnChange=t,e.start=t,h.session.$computeWidth=function(){return this.screenWidth=0},h.isOpen=!1,h.isTopdown=!1,h.autoSelect=!0,h.filterText="",h.data=[],h.setData=function(e,t){h.filterText=t||"",h.setValue(d.stringRepeat("\n",e.length),-1),h.data=e||[],h.setRow(0)},h.getData=function(e){return h.data[e]},h.getRow=function(){return r.start.row},h.setRow=function(e){e=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,e)),r.start.row!=e&&(h.selection.clearSelection(),r.start.row=r.end.row=e||0,h.session._emit("changeBackMarker"),h.moveCursorTo(e||0,0),h.isOpen&&h._signal("select"))},h.on("changeSelection",function(){h.isOpen&&h.setRow(h.selection.lead.row),h.renderer.scrollCursorIntoView()}),h.hide=function(){this.container.style.display="none",this._signal("hide"),h.isOpen=!1},h.show=function(e,t,i){var n=this.container,o=window.innerHeight,r=window.innerWidth,s=this.renderer,a=s.$maxLines*t*1.4,l=e.top+this.$borderSize,i=(o/2<l&&!i&&o<l+t+a?(s.$maxPixelHeight=l-2*this.$borderSize,n.style.top="",n.style.bottom=o-l+"px",h.isTopdown=!1):(s.$maxPixelHeight=o-(l+=t)-.2*t,n.style.top=l+"px",n.style.bottom="",h.isTopdown=!0),n.style.display="",e.left);i+n.offsetWidth>r&&(i=r-n.offsetWidth),n.style.left=i+"px",this._signal("show"),c=null,h.isOpen=!0},h.goTo=function(e){var t=this.getRow(),i=this.session.getLength()-1;switch(e){case"up":t=t<=0?i:t-1;break;case"down":t=i<=t?-1:t+1;break;case"start":t=0;break;case"end":t=i}this.setRow(t)},h.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},h.$imageSize=0,h.$borderSize=1,h},t.$singleLineEditor=a}),define("ace/autocomplete/util",["require","exports","module"],function(e,t,i){"use strict";t.parForEach=function(e,t,i){var n=0,o=e.length;0===o&&i();for(var r=0;r<o;r++)t(e[r],function(e,t){++n===o&&i(e,t)})};var r=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,i){i=i||r;for(var n=[],o=t-1;0<=o&&i.test(e[o]);o--)n.push(e[o]);return n.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,i){i=i||r;for(var n=[],o=t;o<e.length&&i.test(e[o]);o++)n.push(e[o]);return n},t.getCompletionPrefix=function(e){var t,i=e.getCursorPosition(),n=e.session.getLine(i.row);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!t&&e&&(t=this.retrievePrecedingIdentifier(n,i.column,e))}.bind(this))}.bind(this)),t||this.retrievePrecedingIdentifier(n,i.column)}}),define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],function(e,t,i){"use strict";function n(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new o,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=s.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=s.delayedCall(this.updateDocTooltip.bind(this),50)}var o=e("./keyboard/hash_handler").HashHandler,r=e("./autocomplete/popup").AcePopup,c=e("./autocomplete/util"),s=e("./lib/lang"),a=e("./lib/dom"),l=e("./snippets").snippetManager,u=e("./config"),d=(!function(){this.$init=function(){return this.popup=new r(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(e,t,i){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),e.keyBinding.addKeyboardHandler(this.keyboardHandler);var n,o=e.renderer;this.popup.setRow(this.autoSelect?0:-1),i?t||this.detach():(this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize()),i=o.layerConfig.lineHeight,(t=o.$cursorLayer.getPixelPosition(this.base,!0)).left-=this.popup.getTextLeftOffset(),n=e.container.getBoundingClientRect(),t.top+=n.top-o.layerConfig.offset,t.left+=n.left-e.renderer.scrollLeft,t.left+=o.gutterWidth,this.popup.show(t,i)),this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(e){var t=document.activeElement,i=this.editor.textInput.getElement(),n=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget),o=this.popup&&this.popup.container;t==i||t.parentNode==o||n||t==this.tooltipNode||e.relatedTarget==i||this.detach()},this.mousedownListener=function(e){this.detach()},this.mousewheelListener=function(e){this.detach()},this.goTo=function(e){this.popup.goTo(e)},this.insertMatch=function(e,t){if(!(e=e||this.popup.getData(this.popup.getRow())))return!1;var i=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor,e);else{if(i.filterText)for(var n,o=this.editor.selection.getAllRanges(),r=0;n=o[r];r++)n.start.column-=i.filterText.length,this.editor.session.remove(n);e.snippet?l.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.completions==i&&this.detach(),this.editor.endOperation()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(i,n){var o=i.getSession(),r=i.getCursorPosition(),s=c.getCompletionPrefix(i),a=(this.base=o.doc.createAnchor(r.row,r.column-s.length),this.base.$insertRight=!0,[]),l=i.completers.length;return i.completers.forEach(function(e,t){e.getCompletions(i,o,r,s,function(e,t){!e&&t&&(a=a.concat(t)),n(null,{prefix:c.getCompletionPrefix(i),matches:a,finished:0==--l})})}),!0},this.showPopup=function(e,t){this.editor&&this.detach(),this.activated=!0,(this.editor=e).completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,t)},this.updateCompletions=function(n,e){var t;if(n&&this.base&&this.completions)return t=this.editor.getCursorPosition(),(i=this.editor.session.getTextRange({start:this.base,end:t}))==this.completions.filterText?void 0:(this.completions.setFilter(i),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=i||this.completions.filtered[0].snippet)?void this.openPopup(this.editor,i,n):this.detach());if(e&&e.matches)return t=this.editor.getSelectionRange().start,this.base=this.editor.session.doc.createAnchor(t.row,t.column),this.base.$insertRight=!0,this.completions=new d(e.matches),this.openPopup(this.editor,"",n);var i,o=this.gatherCompletionsId,r=function(e){if(e.finished)return this.detach()}.bind(this),s=function(e){var t=e.prefix,i=e.matches,i=(this.completions=new d(i),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(t),this.completions.filtered);return i.length&&(1!=i.length||i[0].value!=t||i[0].snippet)?this.autoInsert&&1==i.length&&e.finished?this.insertMatch(i[0]):void this.openPopup(this.editor,t,n):r(e)}.bind(this),a=!0,l=null;this.gatherCompletions(this.editor,function(e,t){var i=t.prefix,n=t&&t.matches;if(!n||!n.length)return r(t);0===i.indexOf(t.prefix)&&o==this.gatherCompletionsId&&(a?l=t:s(t))}.bind(this)),a=!1,l&&(i=l,l=null,s(i))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var e=this.popup,t=e.data,i=t&&(t[e.getHoveredRow()]||t[e.getRow()]),n=null;return i&&this.editor&&this.popup.isOpen?(this.editor.completers.some(function(e){return n=e.getDocTooltip?e.getDocTooltip(i):n}),(n="string"==typeof(n=n||"string"==typeof i?n:i)?{docText:n}:n)&&(n.docHTML||n.docText)?void this.showDocTooltip(n):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=a.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var t=this.tooltipNode,e=(e.docHTML?t.innerHTML=e.docHTML:e.docText&&(t.textContent=e.docText),t.parentNode||document.body.appendChild(t),this.popup),i=e.container.getBoundingClientRect();t.style.top=e.container.style.top,t.style.bottom=e.container.style.bottom,t.style.display="block",window.innerWidth-i.right<320?i.left<320?(e.isTopdown?t.style.top=i.bottom+"px":t.style.top=e.container.offsetTop-t.offsetHeight+"px",t.style.left=i.left+"px",t.style.right="",t.style.bottom=""):(t.style.right=window.innerWidth-i.left+"px",t.style.left=""):(t.style.left=i.right+1+"px",t.style.right="")},this.hideDocTooltip=function(){var e;this.tooltipTimer.cancel(),this.tooltipNode&&(e=this.tooltipNode,this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e))},this.onTooltipClick=function(e){for(var t=e.target;t&&t!=this.tooltipNode;){if("A"==t.nodeName&&t.href){t.rel="noreferrer",t.target="_blank";break}t=t.parentNode}},this.destroy=function(){var e;this.detach(),this.popup&&(this.popup.destroy(),(e=this.popup.container)&&e.parentNode&&e.parentNode.removeChild(e)),this.editor&&this.editor.completer==this&&this.editor.completer,this.popup=null}}.call(n.prototype),n.for=function(e){return e.completer||(u.get("sharedPopups")?(n.$shared||(n.$sharedInstance=new n),e.completer=n.$sharedInstance):(e.completer=new n,e.once("destroy",function(e,t){t.completer.destroy()})),e.completer)},n.startCommand={name:"startAutocomplete",exec:function(e,t){var i=n.for(e);i.autoInsert=!1,i.autoSelect=!0,i.showPopup(e,t),i.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"},function(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1});!function(){this.setFilter=function(e){t=e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0)?this.filtered:this.all,this.filterText=e,t=(t=this.filterCompletions(t,this.filterText)).sort(function(e,t){return t.exactMatch-e.exactMatch||t.$score-e.$score||(e.caption||e.value).localeCompare(t.caption||t.value)});var t,i=null;t=t.filter(function(e){e=e.snippet||e.caption||e.value;return e!==i&&(i=e,!0)}),this.filtered=t},this.filterCompletions=function(e,t){var i=[],n=t.toUpperCase(),o=t.toLowerCase();e:for(var r,s=0;r=e[s];s++){var a=r.caption||r.value||r.snippet;if(a){var l=-1,c=0,u=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue}else{var d=a.toLowerCase().indexOf(o);if(-1<d)u=d;else for(var h=0;h<t.length;h++){var p=a.indexOf(o[h],l+1),f=a.indexOf(n[h],l+1);if((p=0<=p&&(f<0||p<f)?p:f)<0)continue e;0<(f=p-l-1)&&(-1===l&&(u+=10),u+=f,c|=1<<h),l=p}}r.matchMask=c,r.exactMatch=u?0:1,r.$score=(r.score||0)-u,i.push(r)}}return i}}.call(d.prototype),t.Autocomplete=n,t.FilteredList=d}),define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t,i){var s=e("../range").Range,a=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function l(e,t){var i=e.getTextRange(s.fromPoints({row:0,column:0},t)).split(a).length-1,n=e.getValue().split(a),o=Object.create(null),r=n[i];return n.forEach(function(e,t){e&&e!==r&&(t=Math.abs(i-t),t=n.length-t,o[e]?o[e]=Math.max(t,o[e]):o[e]=t)}),o}t.getCompletions=function(e,t,i,n,o){var r=l(t,i);o(null,Object.keys(r).map(function(e){return{caption:e,value:e,score:r[e],meta:"local"}}))}}),define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,t,i){"use strict";function n(e,t){g(t.session.$mode)}function o(e){var t=e.editor,i=t.completer&&t.completer.activated;"backspace"===e.command.name?i&&!c.getCompletionPrefix(t)&&t.completer.detach():"insertstring"===e.command.name&&c.getCompletionPrefix(t)&&!i&&((e=r.for(t)).autoInsert=!1,e.showPopup(t))}var l=e("../snippets").snippetManager,r=e("../autocomplete").Autocomplete,s=e("../config"),a=e("../lib/lang"),c=e("../autocomplete/util"),u=e("../autocomplete/text_completer"),d={getCompletions:function(e,t,i,n,o){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,i,n,o);e=e.session.getState(i.row);o(null,t.$mode.getCompletions(e,t,i,n))}},h={getCompletions:function(e,t,i,n,o){var r=[],t=t.getTokenAt(i.row,i.column),s=(t&&t.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?r.push("html-tag"):r=l.getActiveScopes(e),l.snippetMap),a=[];r.forEach(function(e){for(var t=s[e]||[],i=t.length;i--;){var n=t[i],o=n.name||n.tabTrigger;o&&a.push({caption:o,snippet:n.content,meta:n.tabTrigger&&!n.name?n.tabTrigger+"‚á• ":"snippet",type:"snippet"})}},this),o(null,a)},getDocTooltip:function(e){"snippet"!=e.type||e.docHTML||(e.docHTML=["<b>",a.escapeHTML(e.caption),"</b>","<hr></hr>",a.escapeHTML(e.snippet)].join(""))}},p=[h,u,d],f=(t.setCompleters=function(e){p.length=0,e&&p.push.apply(p,e)},t.addCompleter=function(e){p.push(e)},t.textCompleter=u,t.keyWordCompleter=d,t.snippetCompleter=h,{name:"expandSnippet",exec:function(e){return l.expandWithTab(e)},bindKey:"Tab"}),g=function(e){(e="string"==typeof e?s.$modes[e]:e)&&(l.files||(l.files={}),m(e.$id,e.snippetFileId),e.modes&&e.modes.forEach(g))},m=function(t,e){e&&t&&!l.files[t]&&(l.files[t]={},s.loadModule(e,function(e){e&&(!(l.files[t]=e).snippets&&e.snippetText&&(e.snippets=l.parseSnippetFile(e.snippetText)),l.register(e.snippets||[],e.scope),e.includeScopes&&(l.snippetMap[e.scope].includeScopes=e.includeScopes,e.includeScopes.forEach(function(e){g("ace/mode/"+e)})))}))},u=e("../editor").Editor;e("../config").defineOptions(u.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:p),this.commands.addCommand(r.startCommand)):this.commands.removeCommand(r.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:p),this.commands.on("afterExec",o)):this.commands.removeListener("afterExec",o)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(f),this.on("changeMode",n),n(0,this)):(this.commands.removeCommand(f),this.off("changeMode",n))},value:!1}})}),window.require(["ace/ext/language_tools"],function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}),!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(ne){"use strict";function oe(e){return"string"==typeof e?parseInt(e,10):~~e}var re={wheelSpeed:1,wheelPropagation:!1,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},se=0;ne.fn.perfectScrollbar=function(te,ie){return this.each(function(){var s,a,l,c,r=ne.extend(!0,{},re),u=ne(this),$=function(){return!!u};if("object"==typeof te?ne.extend(!0,r,te):ie=te,"update"===ie)return u.data("perfect-scrollbar-update")&&u.data("perfect-scrollbar-update")(),u;if("destroy"===ie)return u.data("perfect-scrollbar-destroy")&&u.data("perfect-scrollbar-destroy")(),u;if(u.data("perfect-scrollbar"))return u.data("perfect-scrollbar");u.addClass("ps-container");var I,d,h,p,f,g,m,t="rtl"===u.css("direction"),i=(I=se++,function(e){var t=".perfect-scrollbar-"+I;return void 0===e?t:e+t}),v=this.ownerDocument||document,y=ne("<div class='ps-scrollbar-x-rail'>").appendTo(u),b=ne("<div class='ps-scrollbar-x'>").appendTo(y),n=oe(y.css("bottom")),o=n==n,P=o?null:oe(y.css("top")),G=oe(y.css("borderLeftWidth"))+oe(y.css("borderRightWidth")),w=ne("<div class='ps-scrollbar-y-rail'>").appendTo(u),C=ne("<div class='ps-scrollbar-y'>").appendTo(w),_=oe(w.css("right")),A=_==_,E=A?null:oe(w.css("left")),B=oe(w.css("borderTopWidth"))+oe(w.css("borderBottomWidth"));function W(e){return r.minScrollbarLength&&(e=Math.max(e,r.minScrollbarLength)),e=r.maxScrollbarLength?Math.min(e,r.maxScrollbarLength):e}function x(){var e;u.removeClass("ps-active-x"),u.removeClass("ps-active-y"),s=r.includePadding?u.innerWidth():u.width(),a=r.includePadding?u.innerHeight():u.height(),l=u.prop("scrollWidth"),c=u.prop("scrollHeight"),!r.suppressScrollX&&s+r.scrollXMarginOffset<l?(d=!0,h=W(oe(s*s/l)),p=oe(u.scrollLeft()*(s-h)/(l-s))):(d=!1,p=h=0,u.scrollLeft(0)),!r.suppressScrollY&&a+r.scrollYMarginOffset<c?(f=!0,g=W(oe(a*a/c)),m=oe(u.scrollTop()*(a-g)/(c-a))):(f=!1,m=g=0,u.scrollTop(0)),s-h<=p&&(p=s-h),a-g<=m&&(m=a-g),(e={width:s}).left=t?u.scrollLeft()+s-l:u.scrollLeft(),o?e.bottom=n-u.scrollTop():e.top=P+u.scrollTop(),y.css(e),e={top:u.scrollTop(),height:a},A?e.right=t?l-u.scrollLeft()-_-C.outerWidth():_-u.scrollLeft():e.left=t?u.scrollLeft()+2*s-l-E-C.outerWidth():E+u.scrollLeft(),w.css(e),b.css({left:p,width:h-G}),C.css({top:m,height:g-B}),d&&u.addClass("ps-active-x"),f&&u.addClass("ps-active-y")}function H(){var n,o,r=!1;b.bind(i("mousedown"),function(e){o=e.pageX,n=b.position().left,y.addClass("in-scrolling"),r=!0,e.stopPropagation(),e.preventDefault()}),ne(v).bind(i("mousemove"),function(e){var t,i;r&&(t=n,i=e.pageX-o,t+=i,i=s-h,i=oe((p=t<0?0:i<t?i:t)*(l-s)/(s-h)),u.scrollLeft(i),x(),e.stopPropagation(),e.preventDefault())}),ne(v).bind(i("mouseup"),function(e){r&&(r=!1,y.removeClass("in-scrolling"))}),n=o=null}function V(){var n,o,r=!1;C.bind(i("mousedown"),function(e){o=e.pageY,n=C.position().top,r=!0,w.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),ne(v).bind(i("mousemove"),function(e){var t,i;r&&(t=n,i=e.pageY-o,t+=i,i=a-g,i=oe((m=t<0?0:i<t?i:t)*(c-a)/(a-g)),u.scrollTop(i),x(),e.stopPropagation(),e.preventDefault())}),ne(v).bind(i("mouseup"),function(e){r&&(r=!1,w.removeClass("in-scrolling"))}),n=o=null}function j(e,t){var i=u.scrollTop();if(0===e){if(!f)return!1;if(0===i&&0<t||c-a<=i&&t<0)return!r.wheelPropagation}i=u.scrollLeft();if(0===t){if(!d)return!1;if(0===i&&e<0||l-s<=i&&0<e)return!r.wheelPropagation}return!0}function z(){var o=!1;function e(e){i=(t=e).originalEvent.deltaX,n=-1*t.originalEvent.deltaY,void 0!==i&&void 0!==n||(i=-1*t.originalEvent.wheelDeltaX/6,n=t.originalEvent.wheelDeltaY/6),t.originalEvent.deltaMode&&1===t.originalEvent.deltaMode&&(i*=10,n*=10),i!=i&&n!=n&&(i=0,n=t.originalEvent.wheelDelta);var t=[i,n],i=t[0],n=t[1];o=!1,r.useBothWheelAxes?f&&!d?(n?u.scrollTop(u.scrollTop()-n*r.wheelSpeed):u.scrollTop(u.scrollTop()+i*r.wheelSpeed),o=!0):d&&!f&&(i?u.scrollLeft(u.scrollLeft()+i*r.wheelSpeed):u.scrollLeft(u.scrollLeft()-n*r.wheelSpeed),o=!0):(u.scrollTop(u.scrollTop()-n*r.wheelSpeed),u.scrollLeft(u.scrollLeft()+i*r.wheelSpeed)),x(),(o=o||j(i,n))&&(e.stopPropagation(),e.preventDefault())}void 0!==window.onwheel?u.bind(i("wheel"),e):void 0!==window.onmousewheel&&u.bind(i("mousewheel"),e)}function U(){var s=null,a={top:0,left:0};function l(){s&&(clearInterval(s),s=null),y.removeClass("in-scrolling"),w.removeClass("in-scrolling")}var c=!1;ne(v).bind(i("selectionchange"),function(e){var t;ne.contains(u[0],0===(t=window.getSelection?window.getSelection():document.getSlection?document.getSlection():{rangeCount:0}).rangeCount?null:t.getRangeAt(0).commonAncestorContainer)?c=!0:(c=!1,l())}),ne(window).bind(i("mouseup"),function(e){c&&(c=!1,l())}),ne(window).bind(i("mousemove"),function(e){var t,i,n,o,r;c&&(t=e.pageX,e=e.pageY,i=(r=u.offset()).left,n=r.left+u.outerWidth(),o=r.top,r=r.top+u.outerHeight(),t<i+3?(a.left=-5,y.addClass("in-scrolling")):n-3<t?(a.left=5,y.addClass("in-scrolling")):a.left=0,e<o+3?(a.top=o+3-e<5?-5:-20,w.addClass("in-scrolling")):r-3<e?(a.top=e-r+3<5?5:20,w.addClass("in-scrolling")):a.top=0,0===a.top&&0===a.left?l():s=s||setInterval(function(){$()?(u.scrollTop(u.scrollTop()+a.top),u.scrollLeft(u.scrollLeft()+a.left),x()):clearInterval(s)},50))})}function Y(){u.unbind(i()),ne(window).unbind(i()),ne(v).unbind(i()),u.data("perfect-scrollbar",null),u.data("perfect-scrollbar-update",null),u.data("perfect-scrollbar-destroy",null),b.remove(),C.remove(),y.remove(),w.remove(),u=y=w=b=C=d=f=s=a=l=c=h=p=n=o=P=g=m=_=A=E=t=i=null}var S,T,k,D,R,O,F,q="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,e=null!==window.navigator.msMaxTouchPoints;function K(e){e.stopPropagation()}function X(e,t){u.scrollTop(u.scrollTop()-t),u.scrollLeft(u.scrollLeft()-e),x()}function L(e){R=!0}function M(e){R=!1}function Q(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e.originalEvent}function Z(e){e=e.originalEvent;return e.targetTouches&&1===e.targetTouches.length||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function N(e){var t;Z(e)&&(O=!0,t=Q(e),S.pageX=t.pageX,S.pageY=t.pageY,T=(new Date).getTime(),null!==D&&clearInterval(D),e.stopPropagation())}function J(e){var t,i,n,o;!R&&O&&Z(e)&&(X(t=(n={pageX:(n=Q(e)).pageX,pageY:n.pageY}).pageX-S.pageX,i=n.pageY-S.pageY),S=n,0<(o=(n=(new Date).getTime())-T)&&(k.x=t/o,k.y=i/o,T=n),e.stopPropagation(),e.preventDefault())}function ee(e){!R&&O&&(O=!1,clearInterval(D),D=setInterval(function(){!$()||Math.abs(k.x)<.01&&Math.abs(k.y)<.01?clearInterval(D):(X(30*k.x,30*k.y),k.x*=.8,k.y*=.8)},10))}return x(),u.bind(i("scroll"),function(e){x()}),H(),V(),C.bind(i("click"),K),w.bind(i("click"),function(e){var t=oe(g/2),e=(e.pageY-w.offset().top-t)/(a-g);e<0?e=0:1<e&&(e=1),u.scrollTop((c-a)*e)}),b.bind(i("click"),K),y.bind(i("click"),function(e){var t=oe(h/2),e=(e.pageX-y.offset().left-t)/(s-h);e<0?e=0:1<e&&(e=1),u.scrollLeft((l-s)*e)}),U(),z(),(q||e)&&(e=e,S={},T=0,D=null,O=R=!(k={}),q&&(ne(window).bind(i("touchstart"),L),ne(window).bind(i("touchend"),M),u.bind(i("touchstart"),N),u.bind(i("touchmove"),J),u.bind(i("touchend"),ee)),e&&(window.PointerEvent?(ne(window).bind(i("pointerdown"),L),ne(window).bind(i("pointerup"),M),u.bind(i("pointerdown"),N),u.bind(i("pointermove"),J),u.bind(i("pointerup"),ee)):window.MSPointerEvent&&(ne(window).bind(i("MSPointerDown"),L),ne(window).bind(i("MSPointerUp"),M),u.bind(i("MSPointerDown"),N),u.bind(i("MSPointerMove"),J),u.bind(i("MSPointerUp"),ee)))),r.useKeyboard&&(F=!1,u.bind(i("mouseenter"),function(e){F=!0}),u.bind(i("mouseleave"),function(e){F=!1}),ne(v).bind(i("keydown"),function(e){if((!e.isDefaultPrevented||!e.isDefaultPrevented())&&F){for(var t=document.activeElement||v.activeElement;t.shadowRoot;)t=t.shadowRoot.activeElement;if(!ne(t).is(":input,[contenteditable]")){var i=0,n=0;switch(e.which){case 37:i=-30;break;case 38:n=30;break;case 39:i=30;break;case 40:n=-30;break;case 33:n=90;break;case 32:case 34:n=-90;break;case 35:n=e.ctrlKey?-c:-a;break;case 36:n=e.ctrlKey?u.scrollTop():a;break;default:return}u.scrollTop(u.scrollTop()-n),u.scrollLeft(u.scrollLeft()+i),j(i,n)&&e.preventDefault()}}})),u.data("perfect-scrollbar",u),u.data("perfect-scrollbar-update",x),u.data("perfect-scrollbar-destroy",Y),u})}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(a){var l,c,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],u=Array.prototype.slice;if(a.event.fixHooks)for(var i=e.length;i;)a.event.fixHooks[e[--i]]=a.event.mouseHooks;var n=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],o,!1);else this.onmousewheel=o;a.data(this,"mousewheel-line-height",n.getLineHeight(this)),a.data(this,"mousewheel-page-height",n.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],o,!1);else this.onmousewheel=null},getLineHeight:function(e){return parseInt(a(e)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(e){return a(e).height()},settings:{adjustOldDeltas:!0}};function o(e){var t,i=e||window.event,n=u.call(arguments,1),o=0,r=0,s=0;if((e=a.event.fix(i)).type="mousewheel","detail"in i&&(s=-1*i.detail),"wheelDelta"in i&&(s=i.wheelDelta),"wheelDeltaY"in i&&(s=i.wheelDeltaY),"wheelDeltaX"in i&&(r=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(r=-1*s,s=0),o=0===s?r:s,"deltaY"in i&&(o=s=-1*i.deltaY),"deltaX"in i&&(r=i.deltaX,0===s&&(o=-1*r)),0!==s||0!==r)return 1===i.deltaMode?(o*=t=a.data(this,"mousewheel-line-height"),s*=t,r*=t):2===i.deltaMode&&(o*=t=a.data(this,"mousewheel-page-height"),s*=t,r*=t),t=Math.max(Math.abs(s),Math.abs(r)),(!c||t<c)&&h(i,c=t)&&(c/=40),h(i,t)&&(o/=40,r/=40,s/=40),o=Math[1<=o?"floor":"ceil"](o/c),r=Math[1<=r?"floor":"ceil"](r/c),s=Math[1<=s?"floor":"ceil"](s/c),e.deltaX=r,e.deltaY=s,e.deltaFactor=c,e.deltaMode=0,n.unshift(e,o,r,s),l&&clearTimeout(l),l=setTimeout(d,200),(a.event.dispatch||a.event.handle).apply(this,n)}function d(){c=null}function h(e,t){return n.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}a.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),jQuery.fn.doubleScroll=function(e){function n(e,t){var i,n;t.onlyIfScroll&&e.get(0).scrollWidth<=e.width()?e.prev(t.topScrollBarWrapperSelector).remove():(0==(i=e.prev(t.topScrollBarWrapperSelector)).length&&(i=$(t.topScrollBarMarkup),e.before(i),i.css(t.scrollCss),e.css(t.contentCss),i.bind("scroll.doubleScroll",function(){e.scrollLeft(i.scrollLeft())}),e.bind("scroll.doubleScroll",function(){i.scrollLeft(e.scrollLeft())})),n=void 0!==t.contentElement&&0!==e.find(t.contentElement).length?e.find(t.contentElement):e.find(">:first-child"),$(t.topScrollBarInnerSelector,i).width(n.outerWidth()),i.width(e.width()),i.scrollLeft(e.scrollLeft()))}var o={contentElement:void 0,scrollCss:{"overflow-x":"auto","overflow-y":"hidden"},contentCss:{"overflow-x":"auto","overflow-y":"hidden"},onlyIfScroll:!0,resetOnWindowResize:!1,timeToWaitForResize:30};$.extend(!0,o,e),$.extend(o,{topScrollBarMarkup:'<div class="doubleScroll-scroll-wrapper" style="height: 20px;"><div class="doubleScroll-scroll" style="height: 20px;"></div></div>',topScrollBarWrapperSelector:".doubleScroll-scroll-wrapper",topScrollBarInnerSelector:".doubleScroll-scroll"});return this.each(function(){var e,t,i=$(this);n(i,o),o.resetOnWindowResize&&(t=function(e){n(i,o)},$(window).bind("resize.doubleScroll",function(){clearTimeout(e),e=setTimeout(t,o.timeToWaitForResize)}))})},!function(){"use strict";var t,o=0,l=!0,c="message".length,u="[iFrameSizer]",d=u.length,h="",p=null,n=window.requestAnimationFrame,r={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},f={},s={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){}};function a(e,t,i){"addEventListener"in window?e.addEventListener(t,i,!1):"attachEvent"in window&&e.attachEvent("on"+t,i)}function g(e){f.log&&"object"==typeof console&&console.log(u+"[Host page"+h+"]"+e)}function m(){null===p&&g(" Get position: "+(p={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}).x+","+p.y)}function v(){null!==p&&(window.scrollTo(p.x,p.y),g(" Set position: "+p.x+","+p.y),p=null)}function y(e){g(" Size reset requested by "+("init"===e.type?"host page":"iFrame")),m(),w(function(){b(e),C("reset","reset",e.iframe)},e,"init")}function b(t){function e(e){t.iframe.style[e]=t[e]+"px",g(" IFrame ("+t.iframe.id+") "+e+" set to "+t[e]+"px")}f.sizeHeight&&e("height"),f.sizeWidth&&e("width")}function w(e,t,i){i!==t.type&&n?(g(" Requesting animation frame"),n(e)):e()}function C(e,t,i){g("["+e+"] Sending msg to iframe ("+t+")"),i.contentWindow.postMessage(u+t,"*")}function i(){var t,e,i=this;""===(e=i.id)&&(i.id=e="iFrameResizer"+o++,g(" Added missing iframe ID: "+e+" ("+i.src+")"));function n(e){1/0!==f[e]&&0!==f[e]&&(i.style[e]=f[e]+"px",g(" Set "+e+" = "+f[e]+"px"))}g(" IFrame scrolling "+(f.scrolling?"enabled":"disabled")+" for "+e),i.style.overflow=!1===f.scrolling?"hidden":"auto",i.scrolling=!1===f.scrolling?"no":"yes",n("maxHeight"),n("minHeight"),n("maxWidth"),n("minWidth"),"number"!=typeof f.bodyMargin&&"0"!==f.bodyMargin||(f.bodyMarginV1=f.bodyMargin,f.bodyMargin=f.bodyMargin+"px"),t=e+":"+f.bodyMarginV1+":"+f.sizeWidth+":"+f.log+":"+f.interval+":"+f.enablePublicMethods+":"+f.autoResize+":"+f.bodyMargin+":"+f.heightCalculationMethod+":"+f.bodyBackground+":"+f.bodyPadding+":"+f.tolerance,a(i,"load",function(){var e=l;C("iFrame.onload",t,i),!e&&f.heightCalculationMethod in r&&y({iframe:i,height:0,width:0,type:"init"})}),C("init",t,i)}function _(e){if("object"!=typeof e)throw new TypeError("Options is not an object.")}function e(){function o(e){if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">.");i.call(e)}return function(e,t){var i,n=e;for(i in _(n=n||{}),s)s.hasOwnProperty(i)&&(f[i]=(n.hasOwnProperty(i)?n:s)[i]);Array.prototype.forEach.call(document.querySelectorAll(t||"iframe"),o)}}for(var A=["moz","webkit","o","ms"],E=0;E<A.length&&!n;E+=1)n=window[A[E]+"RequestAnimationFrame"];n||g(" RequestAnimationFrame not supported"),a(window,"message",function(i){function n(){e("Height"),e("Width"),w(function(){b(a),v(),f.resizedCallback(a)},a,"resetPage")}function e(e){var t=Number(f["max"+e]),i=Number(f["min"+e]),n=e.toLowerCase(),o=Number(a[n]);if(t<i)throw new Error("Value for min"+e+" can not be greater than max"+e);g(" Checking "+n+" is in range "+i+"-"+t),o<i&&(o=i,g(" Set "+n+" to min value")),t<o&&(o=t,g(" Set "+n+" to max value")),a[n]=""+o}function o(e){e=e?(e=a.iframe.getBoundingClientRect(),m(),{x:Number(e.left)+Number(p.x),y:Number(e.top)+Number(p.y)}):{x:0,y:0};g(" Reposition requested from iFrame (offset x:"+e.x+" y:"+e.y+")"),p={x:Number(a.width)+e.x,y:Number(a.height)+e.y},v()}function t(){switch(a.type){case"close":e=a.iframe,g(" Removing iFrame: "+(t=e.id)),e.parentNode.removeChild(e),f.closedCallback(t),g(" --"),f.resizedCallback(a);break;case"message":e=s.substr(s.indexOf(":")+c+6),g(" MessageCallback passed: {iframe: "+a.iframe.id+", message: "+e+"}"),f.messageCallback({iframe:a.iframe,message:JSON.parse(e)}),g(" --");break;case"scrollTo":o(!1);break;case"scrollToOffset":o(!0);break;case"reset":y(a);break;case"init":n(),f.initCallback(a.iframe);break;default:n()}var e,t}var r,s=i.data,a={};u===(""+s).substr(0,d)&&(g(" Received: "+s),r=s.substr(d).split(":"),a={iframe:document.getElementById(r[0]),id:r[0],height:r[1],width:r[2],type:r[3]},(r=a.type in{true:1,false:1})&&g(" Ignoring init message from meta parent page"),!r&&function(){if(null===a.iframe)throw new Error("iFrame ("+a.id+") does not exist on "+h);return 1}()&&function(){var e=i.origin,t=a.iframe.src.split("/").slice(0,3).join("/");if(f.checkOrigin&&(g(" Checking connection is from: "+t),""+e!="null"&&e!==t))throw new Error("Unexpected message received from: "+e+" for "+a.iframe.id+". Message was: "+i.data+". This error can be disabled by adding the checkOrigin: false option.");return 1}()&&(t(),l=!1))}),window.jQuery&&((t=jQuery).fn.iFrameResize=function(e){return _(e=e||{}),f=t.extend({},s,e),this.filter("iframe").each(i).end()}),"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():window.iFrameResize=e()}(),!function(ie){function ne(e){var t=document.createElement("input"),e="on"+e,i=e in t;return i||(t.setAttribute(e,"return;"),i="function"==typeof t[e]),t=null,i}function s(e,t,i){e=i.aliases[e];return e&&(e.alias&&s(e.alias,void 0,i),ie.extend(!0,i,e),ie.extend(!0,i,t),1)}function a(y,o){function e(e,t){var i,n;if(null!=e&&""!=e)return 1==e.length&&0==y.greedy&&0!=y.repeat&&(y.placeholder=""),(0<y.repeat||"*"==y.repeat||"+"==y.repeat)&&(i="*"==y.repeat?0:"+"==y.repeat?1:y.repeat,e=y.groupmarker.start+e+y.groupmarker.end+y.quantifiermarker.start+i+","+y.repeat+y.quantifiermarker.end),null==ie.inputmask.masksCache[e]||!0===o?(n={mask:e,maskToken:function(e){function t(e,t,i,n){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function i(e,t,i){var n=y.definitions[t],o=0==e.matches.length;if(i=null!=i?i:e.matches.length,n&&!u){n.placeholder=ie.isFunction(n.placeholder)?n.placeholder.call(this,y):n.placeholder;for(var r=n.prevalidator,s=r?r.length:0,a=1;a<n.cardinality;a++){var l=a<=s?r[a-1]:[],c=l.validator,l=l.cardinality;e.matches.splice(i++,0,{fn:c?"string"==typeof c?new RegExp(c):new function(){this.test=c}:new RegExp("."),cardinality:l||1,optionality:e.isOptional,newBlockMarker:o,casing:n.casing,def:n.definitionSymbol||t,placeholder:n.placeholder,mask:t})}e.matches.splice(i++,0,{fn:n.validator?"string"==typeof n.validator?new RegExp(n.validator):new function(){this.test=n.validator}:new RegExp("."),cardinality:n.cardinality,optionality:e.isOptional,newBlockMarker:o,casing:n.casing,def:n.definitionSymbol||t,placeholder:n.placeholder,mask:t})}else e.matches.splice(i++,0,{fn:null,cardinality:0,optionality:e.isOptional,newBlockMarker:o,casing:null,def:t,placeholder:void 0,mask:t}),u=!1}for(var n,o,r=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,u=!1,s=new t,a=[],l=[];p=r.exec(e);)switch(h=p[0],h.charAt(0)){case y.optionalmarker.end:case y.groupmarker.end:if(g=a.pop(),0<a.length){if((n=a[a.length-1]).matches.push(g),n.isAlternator){for(var c=a.pop(),d=0;d<c.matches.length;d++)c.matches[d].isGroup=!1;0<a.length?(n=a[a.length-1]).matches.push(c):s.matches.push(c)}}else s.matches.push(g);break;case y.optionalmarker.start:a.push(new t(!1,!0));break;case y.groupmarker.start:a.push(new t(!0));break;case y.quantifiermarker.start:var h,p,f,g=new t(!1,!1,!0),m=(h=h.replace(/[{}]/g,"")).split(","),v=isNaN(m[0])?m[0]:parseInt(m[0]),m=1==m.length?v:isNaN(m[1])?m[1]:parseInt(m[1]);g.quantifier={min:v="*"!=m&&"+"!=m?v:"*"==m?0:1,max:m},0<a.length?((p=(v=a[a.length-1].matches).pop()).isGroup||((f=new t(!0)).matches.push(p),p=f),v.push(p),v.push(g)):((p=s.matches.pop()).isGroup||((f=new t(!0)).matches.push(p),p=f),s.matches.push(p),s.matches.push(g));break;case y.escapeChar:u=!0;break;case y.alternatormarker:(o=0<a.length?(n=a[a.length-1]).matches.pop():s.matches.pop()).isAlternator?a.push(o):((c=new t(!1,!1,!1,!0)).matches.push(o),a.push(c));break;default:if(0<a.length){if(0<(n=a[a.length-1]).matches.length&&!n.isAlternator&&((o=n.matches[n.matches.length-1]).isGroup&&(o.isGroup=!1,i(o,y.groupmarker.start,0),i(o,y.groupmarker.end))),i(n,h),n.isAlternator){c=a.pop();for(d=0;d<c.matches.length;d++)c.matches[d].isGroup=!1;0<a.length?(n=a[a.length-1]).matches.push(c):s.matches.push(c)}}else 0<s.matches.length&&((o=s.matches[s.matches.length-1]).isGroup&&(o.isGroup=!1,i(o,y.groupmarker.start,0),i(o,y.groupmarker.end))),i(s,h)}return 0<s.matches.length&&((o=s.matches[s.matches.length-1]).isGroup&&(o.isGroup=!1,i(o,y.groupmarker.start,0),i(o,y.groupmarker.end)),l.push(s)),l}(e),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:t},!0!==o&&(ie.inputmask.masksCache[e]=n)):n=ie.extend(!0,{},ie.inputmask.masksCache[e]),n}function i(e){if(e=e.toString(),y.numericInput){e=e.split("").reverse();for(var t=0;t<e.length;t++)e[t]==y.optionalmarker.start?e[t]=y.optionalmarker.end:e[t]==y.optionalmarker.end?e[t]=y.optionalmarker.start:e[t]==y.groupmarker.start?e[t]=y.groupmarker.end:e[t]==y.groupmarker.end&&(e[t]=y.groupmarker.start);e=e.join("")}return e}var n,t=void 0;if(ie.isFunction(y.mask)&&(y.mask=y.mask.call(this,y)),ie.isArray(y.mask)){if(1<y.mask.length)return y.keepStatic=null==y.keepStatic||y.keepStatic,n="(",ie.each(y.mask,function(e,t){1<n.length&&(n+=")|("),n+=i(null==t.mask||ie.isFunction(t.mask)?t:t.mask)}),e(n+=")",y.mask);y.mask=y.mask.pop()}return t=y.mask?null==y.mask.mask||ie.isFunction(y.mask.mask)?e(i(y.mask),y.mask):e(i(y.mask.mask),y.mask):t}function l(e,F,_){function o(e,t,i){t=t||0;var n,o,r,s=[],a=0;do{}while(!0===e&&F.validPositions[a]?(o=(n=F.validPositions[a]).match,r=n.locator.slice(),s.push(!0===i?n.input:k(a,o))):(o=(n=x(a,r,a-1)).match,r=n.locator.slice(),s.push(k(a,o))),a++,(null==O||a-1<O)&&null!=o.fn||null==o.fn&&""!=o.def||a<=t);return s.pop(),s}function A(e){var t=F;t.buffer=void 0,t.tests={},!0!==e&&(t._buffer=void 0,t.validPositions={},t.p=0)}function E(e,t){var i,n=F.validPositions,o=(null==e&&(e=-1),-1),r=-1;for(i in n){var s=parseInt(i);n[s]&&(t||null!=n[s].match.fn)&&(s<=e&&(o=s),e<=s&&(r=s))}return-1!=o&&1<e-o||r<e?o:r}function m(e,t,i){if(_.insertMode&&null!=F.validPositions[e]&&null==i){for(var n=ie.extend(!0,{},F.validPositions),o=E(),r=e;r<=o;r++)delete F.validPositions[r];F.validPositions[e]=t;var s,a=!0,l=F.validPositions;for(r=s=e;r<=o;r++){var c=n[r];if(null!=c)for(var u=s,d=-1;u<g()&&(null==c.match.fn&&l[r]&&(!0===l[r].match.optionalQuantifier||!0===l[r].match.optionality)||null!=c.match.fn);){if(null==c.match.fn||!_.keepStatic&&l[r]&&(null!=l[r+1]&&1<v(r+1,l[r].locator.slice(),r).length||null!=l[r].alternation)?u++:u=w(s),P(u,c.match.def)){a=!1!==S(u,c.input,!0,!0),s=u;break}if(a=null==c.match.fn,d==u)break;d=u}if(!a)break}if(!a)return F.validPositions=ie.extend(!0,{},n),0}else F.validPositions[e]=t;return 1}function I(e,t,i,n){var o,r=e;for(F.p=e,null!=F.validPositions[e]&&F.validPositions[e].input==_.radixPoint&&(t++,r++),o=r;o<t;o++)null==F.validPositions[o]||!0!==i&&0==_.canClearPosition(F,o,E(),n,_)||delete F.validPositions[o];for(A(!0),o=r+1;o<=E();){for(;null!=F.validPositions[r];)r++;var s=F.validPositions[r],a=(o<r&&(o=r+1),F.validPositions[o]);null!=a&&null==s?(P(r,a.match.def)&&!1!==S(r,a.input,!0)&&(delete F.validPositions[o],o++),r++):o++}var l=E(),c=g();for(e<=l&&null!=F.validPositions[l]&&F.validPositions[l].input==_.radixPoint&&delete F.validPositions[l],o=l+1;o<=c;o++)F.validPositions[o]&&delete F.validPositions[o];A(!0)}function x(e,t,i){var n=F.validPositions[e];if(null==n)for(var o=v(e,t,i),e=E(),r=F.validPositions[e]||v(0)[0],s=null!=r.alternation?r.locator[r.alternation].toString().split(","):[],a=0;a<o.length&&!((n=o[a]).match&&(_.greedy&&!0!==n.match.optionalQuantifier||(!1===n.match.optionality||!1===n.match.newBlockMarker)&&!0!==n.match.optionalQuantifier)&&(null==r.alternation||r.alternation!=n.alternation||null!=n.locator[r.alternation]&&p(n.locator[r.alternation].toString().split(","),s)));a++);return n}function r(e){return(F.validPositions[e]||v(e)[0]).match}function P(e,t){for(var i=!1,n=v(e),o=0;o<n.length;o++)if(n[o].match&&n[o].match.def==t){i=!0;break}return i}function v(T,e,t,i){function k(E,x,e,t){for(var S=0<x.length?x.shift():0;S<E.matches.length;S++)if(!0!==E.matches[S].isQuantifier){var i=function e(t,i,n){if(1e4<D)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+F.mask),!0;if(D==T&&null==t.matches)return R.push({match:t,locator:i.reverse()}),!0;if(null!=t.matches){if(t.isGroup&&!0!==n){if(t=e(E.matches[S+1],i))return!0}else if(t.isOptional){var o=t;if(t=k(t,x,i,n)){var r=R[R.length-1].match;if(0!=ie.inArray(r,o.matches))return!0;O=!0,D=T}}else if(t.isAlternator){var s,a=t,l=[],o=R.slice(),c=i.length,u=0<x.length?x.shift():-1;if(-1==u||"string"==typeof u){var d=D,h=x.slice(),p=[];"string"==typeof u&&(p=u.split(","));for(var f,g=0;g<a.matches.length;g++){R=[],!0!==(t=e(a.matches[g],[g].concat(i),n)||t)&&null!=t&&p[p.length-1]<a.matches.length&&(f=E.matches.indexOf(t)+1,E.matches.length>f&&(t=e(E.matches[f],[f].concat(i.slice(1,i.length)),n))&&(p.push(f.toString()),ie.each(R,function(e,t){t.alternation=i.length-1}))),s=R.slice(),D=d,R=[];for(var m=0;m<h.length;m++)x[m]=h[m];for(var v=0;v<s.length;v++){var y=s[v];y.alternation=y.alternation||c;for(var b=0;b<l.length;b++){var w=l[b];if(y.match.mask==w.match.mask&&("string"!=typeof u||-1!=ie.inArray(y.locator[y.alternation].toString(),p))){s.splice(v,1),v--,w.locator[y.alternation]=w.locator[y.alternation]+","+y.locator[y.alternation],w.alternation=y.alternation;break}}}l=l.concat(s)}"string"==typeof u&&(l=ie.map(l,function(e,t){if(isFinite(t)){var i=e.alternation,n=e.locator[i].toString().split(",");e.locator[i]=void 0,e.alternation=void 0;for(var o=0;o<n.length;o++)-1!=ie.inArray(n[o],p)&&(null!=e.locator[i]?(e.locator[i]+=",",e.locator[i]+=n[o]):e.locator[i]=parseInt(n[o]),e.alternation=i);if(null!=e.locator[i])return e}})),R=o.concat(l),D=T,O=0<R.length}else t=!!a.matches[u]&&e(a.matches[u],[u].concat(i),n);if(t)return!0}else if(t.isQuantifier&&!0!==n)for(var C=t,_=0<x.length&&!0!==n?x.shift():0;_<(isNaN(C.quantifier.max)?_+1:C.quantifier.max)&&D<=T;_++){var A=E.matches[ie.inArray(C,E.matches)-1];if(t=e(A,[_].concat(i),!0)){if((r=R[R.length-1].match).optionalQuantifier=_>C.quantifier.min-1,0!=ie.inArray(r,A.matches))return!0;if(_>C.quantifier.min-1){O=!0,D=T;break}return!0}}else if(t=k(t,x,i,n))return!0}else D++}(E.matches[S],[S].concat(e),t);if(i&&D==T)return i;if(T<D)break}}var n=F.maskToken,D=e?t:0,o=e||[0],R=[],O=!1;if(!0===i&&F.tests[T])return F.tests[T];if(null==e){for(var r,s=T-1;null==(r=F.validPositions[s])&&-1<s&&(!F.tests[s]||null==(r=F.tests[s][0]));)s--;null!=r&&-1<s&&(D=s,o=r.locator.slice())}for(var a=o.shift();a<n.length;a++)if(k(n[a],o,[a])&&D==T||T<D)break;return 0!=R.length&&!O||R.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),F.tests[T]=ie.extend(!0,[],R),F.tests[T]}function u(){return null==F._buffer&&(F._buffer=o(!1,1)),F._buffer}function y(){return null==F.buffer&&(F.buffer=o(!0,E(),!0)),F.buffer}function b(e,t,i){if(i=i||y().slice(),!0===e)A(),e=0,t=i.length;else for(var n=e;n<t;n++)delete F.validPositions[n],delete F.tests[n];for(n=e;n<t;n++)i[n]!=_.skipOptionalPartCharacter&&S(n,i[n],!0,!0)}function p(e,t){for(var i=_.greedy?t:t.slice(0,1),n=!1,o=0;o<e.length;o++)if(-1!=ie.inArray(e[o],i)){n=!0;break}return n}function S(e,t,i,n){function o(d,h,p,f){var g=!1;return ie.each(v(d),function(e,t){for(var i,n=t.match,o=h?1:0,r="",s=(y(),n.cardinality);o<s;s--)r+=(i=d-(s-1),null==F.validPositions[i]?k(i):F.validPositions[i].input);if(h&&(r+=h),!1!==(g=null!=n.fn?n.fn.test(r,F,d,p,_):(h==n.def||h==_.skipOptionalPartCharacter)&&""!=n.def&&{c:n.def,pos:d})){var a=(a=null!=g.c?g.c:h)==_.skipOptionalPartCharacter&&null===n.fn?n.def:a,l=d,c=y();if(null!=g.remove&&(ie.isArray(g.remove)||(g.remove=[g.remove]),ie.each(g.remove.sort(function(e,t){return t-e}),function(e,t){I(t,t+1,!0)})),null!=g.insert&&(ie.isArray(g.insert)||(g.insert=[g.insert]),ie.each(g.insert.sort(function(e,t){return e-t}),function(e,t){S(t.pos,t.c,!0)})),g.refreshFromBuffer){var u=g.refreshFromBuffer;if(b((p=!0)===u?u:u.start,u.end,c),null==g.pos&&null==g.c)return g.pos=E(),!1;if((l=null!=g.pos?g.pos:d)!=d)return g=ie.extend(g,S(l,a,!0)),!1}else if(!0!==g&&null!=g.pos&&g.pos!=d&&(l=g.pos,b(d,l),l!=d))return g=ie.extend(g,S(l,a,!0)),!1;return 1!=g&&null==g.pos&&null==g.c||(0<e&&A(!0),m(l,ie.extend({},t,{input:function(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}(a,n)}),f)||(g=!1)),!1}}),g}i=!0===i;for(var r=y(),s=e-1;-1<s&&!F.validPositions[s];s--);for(s++;s<e;s++)null==F.validPositions[s]&&((!f(s)||r[s]!=k(s))&&1<v(s).length||r[s]==_.radixPoint||"0"==r[s]&&ie.inArray(_.radixPoint,r)<s)&&o(s,r[s],!0);var a=e,l=!1,c=ie.extend(!0,{},F.validPositions);if(a<g()&&(l=o(a,t,i,n),(!i||n)&&!1===l)){var u=F.validPositions[a];if(!u||null!=u.match.fn||u.match.def!=t&&t!=_.skipOptionalPartCharacter){if((_.insertMode||null==F.validPositions[w(a)])&&!f(a))for(var d=a+1,h=w(a);d<=h;d++)if(!1!==(l=o(d,t,i,n))){(function(e,t){for(var i,n,o,r=F.validPositions[t].locator,s=r.length,a=e;a<t;a++)f(a)||(i=v(a),n=i[0],o=-1,ie.each(i,function(e,t){for(var i=0;i<s;i++)t.locator[i]&&p(t.locator[i].toString().split(","),r[i].toString().split(","))&&o<i&&(o=i,n=t)}),m(a,ie.extend({},n,{input:n.match.def}),!0))})(a,d),a=d;break}}else l={caret:w(a)}}if((!0===(l=!1===l&&_.keepStatic&&R(r)?function(e,t,i,n){for(var o,r,s,a=ie.extend(!0,{},F.validPositions),l=E();0<=l&&(!(s=F.validPositions[l])||null==s.alternation||(o=l,r=F.validPositions[o].alternation,x(o).locator[s.alternation]==s.locator[s.alternation]));l--);if(null!=r)for(var c in F.validPositions)if(s=F.validPositions[c],parseInt(c)>parseInt(o)&&null!=s.alternation){var u=F.validPositions[o].locator[r].toString().split(","),d=s.locator[r]||u[0];0<d.length&&(d=d.split(",")[0]);for(var h=0;h<u.length;h++)if(d<u[h]){for(var p,f,g=c-1;0<=g;g--)if(null!=(p=F.validPositions[g])){f=p.locator[r],p.locator[r]=parseInt(u[h]);break}if(d!=p.locator[r]){for(var m,v,y=[],b=c;b<E()+1;b++){var w=F.validPositions[b];w&&null!=w.match.fn&&y.push(w.input),delete F.validPositions[b],delete F.tests[b]}for(A(!0),_.keepStatic=!_.keepStatic,v=!0;0<y.length;){var C=y.shift();if(C!=_.skipOptionalPartCharacter&&!(v=S(E()+1,C,!1,!0)))break}if(p.alternation=r,p.locator[r]=f,v=v&&S((m=E(e)+1)<e?m:e,t,i,n),_.keepStatic=!_.keepStatic,v)return v;A(),F.validPositions=ie.extend(!0,{},a)}}break}return!1}(e,t,i,n):l)&&(l={pos:a}),ie.isFunction(_.postValidation)&&0!=l&&!i)&&(A(!0),!_.postValidation(y(),_)))return A(!0),F.validPositions=ie.extend(!0,{},c),!1;return l}function f(e){var t=r(e);if(null!=t.fn)return t.fn;if(!_.keepStatic&&null==F.validPositions[e]){for(var i=v(e),n=!0,o=0;o<i.length;o++)if(""!=i[o].match.def&&(null==i[o].alternation||1<i[o].locator[i[o].alternation].length)){n=!1;break}return n}}function g(){-1==(O=$.prop("maxLength"))&&(O=void 0);for(var e=E(),t=F.validPositions[e],i=null!=t?t.locator.slice():void 0,n=e+1;null==t||null!=t.match.fn||null==t.match.fn&&""!=t.match.def;n++)i=(t=x(n,i,n-1)).locator.slice();e=""!=r(n-1).def?n:n-1;return null==O||e<O?e:O}function w(e){var t=g();if(t<=e)return t;for(var i=e;++i<t&&!f(i)&&(!0!==_.nojumps||_.nojumpsThreshold>i););return i}function C(e){var t=e;if(t<=0)return 0;for(;0<--t&&!f(t););return t}function T(e,t,i,n,o){var r;n&&ie.isFunction(_.onBeforeWrite)&&((n=_.onBeforeWrite.call(e,n,t,i,_))&&(n.refreshFromBuffer&&(b(!0===(r=n.refreshFromBuffer)?r:r.start,r.end,n.buffer),A(!0),t=y()),i=n.caret||i)),e._valueSet(t.join("")),null!=i&&D(e,i),!0===o&&(N=!0,ie(e).trigger("input"))}function k(e,t){if(null!=(t=t||r(e)).placeholder)return t.placeholder;if(null!=t.fn)return _.placeholder.charAt(e%_.placeholder.length);if(!_.keepStatic&&null==F.validPositions[e]){for(var i=v(e),n=!0,o=0;o<i.length;o++)if(""!=i[o].match.def&&(null!==i[o].match.fn||null==i[o].alternation||1<i[o].locator[i[o].alternation].length)){n=!1;break}if(n)return _.placeholder.charAt(e%_.placeholder.length)}return t.def}function s(o,e,r,t){var i,n,t=null!=t?t.slice():o._valueGet().split(""),s="",a=0;A(),F.p=w(-1),e&&o._valueSet(""),r||(i=u().slice(0,w(-1)).join(""),(n=t.join("").match(new RegExp("^"+ie.inputmask.escapeRegex(i),"g")))&&0<n.length&&(t.splice(0,n.length*i.length),a=w(a))),ie.each(t,function(e,t){var i=ie.Event("keypress"),t=(i.which=t.charCodeAt(0),s+=t,E(void 0,!0)),n=F.validPositions[t],n=x(t+1,n?n.locator.slice():void 0,t);!function(){var e=!1,t=u().slice(a,w(a)).join("").indexOf(s);if(-1!=t&&!f(a))for(var e=!0,i=u().slice(a,a+t),n=0;n<i.length;n++)if(" "!=i[n]){e=!1;break}return e}()||r?(e=r?e:null==n.match.fn&&n.match.optionality&&t+1<F.p?t+1:F.p,c.call(o,i,!0,!1,r,e),a=e+1,s=""):c.call(o,i,!0,!1,!0,t+1)}),e&&T(o,y(),ie(o).is(":focus")?w(E(0)):void 0,ie.Event("checkval"))}function G(e){if(!e.data("_inputmask")||e.hasClass("hasDatepicker"))return e[0]._valueGet();var t,i=[],n=F.validPositions;for(t in n)n[t].match&&null!=n[t].match.fn&&i.push(n[t].input);var o=(L?i.reverse():i).join(""),r=(L?y().slice().reverse():y()).join("");return o=ie.isFunction(_.onUnMask)?_.onUnMask.call(e,r,o,_)||o:o}function a(e){return e=!L||"number"!=typeof e||_.greedy&&""==_.placeholder?e:y().length-e}function D(e,t,i){var n,o,e=e.jquery&&0<e.length?e[0]:e;if("number"!=typeof t)return e.setSelectionRange?(t=e.selectionStart,i=e.selectionEnd):window.getSelection?(n=window.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode!=e&&n.commonAncestorContainer!=e||(t=n.startOffset,i=n.endOffset):document.selection&&document.selection.createRange&&(i=(t=0-(n=document.selection.createRange()).duplicate().moveStart("character",-1e5))+n.text.length),{begin:a(t),end:a(i)};t=a(t),i="number"==typeof(i=a(i))?i:t,ie(e).is(":visible")&&(o=ie(e).css("font-size").replace("px","")*i,e.scrollLeft=o>e.scrollWidth?o:0,re||0!=_.insertMode||t!=i||i++,e.setSelectionRange?(e.selectionStart=t,e.selectionEnd=i):window.getSelection?(n=document.createRange(),null==e.firstChild&&(o=document.createTextNode(""),e.appendChild(o)),n.setStart(e.firstChild,t<e._valueGet().length?t:e._valueGet().length),n.setEnd(e.firstChild,i<e._valueGet().length?i:e._valueGet().length),n.collapse(!0),(o=window.getSelection()).removeAllRanges(),o.addRange(n)):e.createTextRange&&((n=e.createTextRange()).collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n.select()))}function l(e){for(var t,i=y(),n=i.length,o=E(),r={},s=F.validPositions[o],a=null!=s?s.locator.slice():void 0,l=o+1;l<i.length;l++)a=(t=x(l,a,l-1)).locator.slice(),r[l]=ie.extend(!0,{},t);var c=s&&null!=s.alternation?s.locator[s.alternation]:void 0;for(l=n-1;o<l&&(((t=r[l]).match.optionality||t.match.optionalQuantifier||c&&(c!=r[l].locator[s.alternation]&&null!=t.match.fn||null==t.match.fn&&t.locator[s.alternation]&&p(t.locator[s.alternation].toString().split(","),c.split(","))&&""!=v(l)[0].def))&&i[l]==k(l,t.match));l--)n--;return e?{l:n,def:r[n]?r[n].match:void 0}:n}function B(e){for(var t=l(),i=e.length-1;t<i&&!f(i);i--);e.splice(t,i+1-t)}function R(e){if(ie.isFunction(_.isComplete))return _.isComplete.call($,e,_);if("*"!=_.repeat){var t=!1,i=l(!0),n=C(i.l);if(E(),null==i.def||i.def.newBlockMarker||i.def.optionality||i.def.optionalQuantifier)for(var t=!0,o=0;o<=n;o++){var r=x(o).match;if(null!=r.fn&&null==F.validPositions[o]&&!0!==r.optionality&&!0!==r.optionalQuantifier||null==r.fn&&e[o]!=k(o,r)){t=!1;break}}return t}}function W(t){function e(){var e=ie(this),t=ie(this).data("_inputmask");return t?t.opts.autoUnmask?e.inputmask("unmaskedvalue"):n.call(this)!=u().join("")?n.call(this):"":n.call(this)}function i(e){var t=ie(this).data("_inputmask");o.call(this,e),t&&ie(this).triggerHandler("setvalue.inputmask")}var n,o,r,s;if(!t._valueGet){if(Object.getOwnPropertyDescriptor&&null==t.value)n=function(){return this.textContent},o=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:e,set:i});else{(a=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"value"))&&a.configurable;if(document.__lookupGetter__&&t.__lookupGetter__("value"))n=t.__lookupGetter__("value"),o=t.__lookupSetter__("value"),t.__defineGetter__("value",e),t.__defineSetter__("value",i);else{n=function(){return t.value},o=function(e){t.value=e},a=t.type,null!=ie.valHooks[a]&&1==ie.valHooks[a].inputmaskpatch||(r=ie.valHooks[a]&&ie.valHooks[a].get?ie.valHooks[a].get:function(e){return e.value},s=ie.valHooks[a]&&ie.valHooks[a].set?ie.valHooks[a].set:function(e,t){return e.value=t,e},ie.valHooks[a]={get:function(e){var t=ie(e);if(t.data("_inputmask")){if(t.data("_inputmask").opts.autoUnmask)return t.inputmask("unmaskedvalue");var i=r(e),t=t.data("_inputmask").maskset._buffer;return i!=(t=t?t.join(""):"")?i:""}return r(e)},set:function(e,t){var i=ie(e),n=i.data("_inputmask"),e=s(e,t);return n&&i.triggerHandler("setvalue.inputmask"),e},inputmaskpatch:!0});{var a=t;ie(a).bind("mouseenter.inputmask",function(e){var t=ie(this),i=this._valueGet();""!=i&&i!=y().join("")&&t.triggerHandler("setvalue.inputmask")});var l=ie._data(a).events.mouseover;if(l){for(var a=l[l.length-1],c=l.length-1;0<c;c--)l[c]=l[c-1];l[0]=a}}}}t._valueGet=function(e){return L&&!0!==e?n.call(this).split("").reverse().join(""):n.call(this)},t._valueSet=function(e){o.call(this,L?e.split("").reverse().join(""):e)}}}function H(e,t,i,n){if((_.numericInput||L)&&(t==ie.inputmask.keyCode.BACKSPACE?t=ie.inputmask.keyCode.DELETE:t==ie.inputmask.keyCode.DELETE&&(t=ie.inputmask.keyCode.BACKSPACE),L)&&(r=i.end,i.end=i.begin,i.begin=r),t==ie.inputmask.keyCode.BACKSPACE&&(i.end-i.begin<1||0==_.insertMode)?i.begin=C(i.begin):t==ie.inputmask.keyCode.DELETE&&i.begin==i.end&&(i.end=f(i.end)?i.end+1:w(i.end)+1),I(i.begin,i.end,!1,n),!0!==n){if(_.keepStatic){A(!0);for(var o=[],r=ie.extend(!0,{},F.validPositions),s=E();0<=s;s--){var a=F.validPositions[s];if(a){if(null!=a.alternation&&a.locator[a.alternation]==x(s).locator[a.alternation])break;null!=a.match.fn&&o.push(a.input),delete F.validPositions[s]}}if(0<s)for(;0<o.length;){F.p=w(E());var l=ie.Event("keypress");l.which=o.pop().charCodeAt(0),c.call(e,l,!0,!1,!1,F.p)}else F.validPositions=ie.extend(!0,{},r)}t=E(i.begin);t<i.begin?(-1==t&&A(),F.p=w(t)):F.p=i.begin}}function V(t){var i=this,e=ie(i),n=t.keyCode,o=D(i);n==ie.inputmask.keyCode.BACKSPACE||n==ie.inputmask.keyCode.DELETE||oe&&127==n||t.ctrlKey&&88==n&&!ne("cut")?(t.preventDefault(),88==n&&(d=y().join("")),H(i,n,o),T(i,y(),F.p,t,d!=y().join("")),i._valueGet()==u().join("")?e.trigger("cleared"):!0===R(y())&&e.trigger("complete"),_.showTooltip&&e.prop("title",F.mask)):n==ie.inputmask.keyCode.END||n==ie.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var e=w(E());_.insertMode||e!=g()||t.shiftKey||e--,D(i,t.shiftKey?o.begin:e,e)},0):n==ie.inputmask.keyCode.HOME&&!t.shiftKey||n==ie.inputmask.keyCode.PAGE_UP?D(i,0,t.shiftKey?o.begin:0):(_.undoOnEscape&&n==ie.inputmask.keyCode.ESCAPE||90==n&&t.ctrlKey)&&!0!==t.altKey?(s(i,!0,!1,d.split("")),e.click()):n!=ie.inputmask.keyCode.INSERT||t.shiftKey||t.ctrlKey?0!=_.insertMode||t.shiftKey||(n==ie.inputmask.keyCode.RIGHT?setTimeout(function(){var e=D(i);D(i,e.begin)},0):n==ie.inputmask.keyCode.LEFT&&setTimeout(function(){var e=D(i);D(i,L?e.begin+1:e.begin-1)},0)):(_.insertMode=!_.insertMode,D(i,_.insertMode||o.begin!=g()?o.begin:o.begin-1)),_.onKeyDown.call(this,t,y(),D(i).begin,_),Q=-1!=ie.inArray(n,_.ignorables)}function c(e,t,i,n,o){var r,s,a,l,c,u,d=ie(this),h=e.which||e.charCode||e.keyCode;if(!(!0===t||e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||Q))return!0;h&&(46==h&&0==e.shiftKey&&","==_.radixPoint&&(h=44),o=t?{begin:o,end:o}:D(this),h=String.fromCharCode(h),c=o.begin,u=o.end,(u=L?1<c-u||c-u==1&&_.insertMode:1<u-c||u-c==1&&_.insertMode)&&(F.undoPositions=ie.extend(!0,{},F.validPositions),H(this,ie.inputmask.keyCode.DELETE,o,!0),o.begin=F.p,_.insertMode||(_.insertMode=!_.insertMode,m(o.begin,n),_.insertMode=!_.insertMode),u=!_.multi),F.writeOutBuffer=!0,c=L&&!u?o.end:o.begin,!1!==(r=S(c,h,n))&&(!0!==r&&(c=null!=r.pos?r.pos:c,h=null!=r.c?r.c:h),A(!0),s=null!=r.caret?r.caret:(o=F.validPositions,!_.keepStatic&&(null!=o[c+1]&&1<v(c+1,o[c].locator.slice(),c).length||null!=o[c].alternation)?c+1:w(c)),F.p=s),!1!==i?(a=this,setTimeout(function(){_.onKeyValidation.call(a,r,_)},0),F.writeOutBuffer&&!1!==r?(T(this,l=y(),t?void 0:_.numericInput?C(s):s,e,!0!==t),!0!==t&&setTimeout(function(){!0===R(l)&&d.trigger("complete")},0)):u&&(F.buffer=void 0,F.validPositions=F.undoPositions)):u&&(F.buffer=void 0,F.validPositions=F.undoPositions),_.showTooltip&&d.prop("title",F.mask),t&&ie.isFunction(_.onBeforeWrite)&&(n=_.onBeforeWrite.call(this,e,y(),s,_))&&n.refreshFromBuffer&&(b(!0===(h=n.refreshFromBuffer)?h:h.start,h.end,n.buffer),A(!0),n.caret&&(F.p=n.caret)),e.preventDefault())}function j(e){var t,i,n=ie(this),o=this._valueGet(!0),r=D(this);if("propertychange"==e.type&&this._valueGet().length<=g())return!0;"paste"==e.type&&(t=o.substr(0,r.begin),i=o.substr(r.end,o.length),t==u().slice(0,r.begin).join("")&&(t=""),i==u().slice(r.end).join("")&&(i=""),window.clipboardData&&window.clipboardData.getData?o=t+window.clipboardData.getData("Text")+i:e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(o=t+e.originalEvent.clipboardData.getData("text/plain")+i));r=o;if(ie.isFunction(_.onBeforePaste)){if(!1===(r=_.onBeforePaste.call(this,o,_)))return e.preventDefault(),!1;r=r||o}return s(this,!0,!1,L?r.split("").reverse():r.split("")),n.click(),!0===R(y())&&n.trigger("complete"),!1}function z(e){s(this,!0,!1),!0===R(y())&&ie(this).trigger("complete"),e.preventDefault()}function U(e){d=y().join(""),""!=h&&0==e.originalEvent.data.indexOf(h)||(X=D(this))}function Y(e){var t=this,i=X||D(t),n=(0==e.originalEvent.data.indexOf(h)&&(A(),i={begin:0,end:0}),e.originalEvent.data);D(t,i.begin,i.end);for(var o=0;o<n.length;o++){var r=ie.Event("keypress");r.which=n.charCodeAt(o),Q=M=!1,c.call(t,r)}setTimeout(function(){var e=F.p;T(t,y(),_.numericInput?C(e):e)},0),h=e.originalEvent.data}function q(e){}function K(e){($=ie(e)).data("_inputmask",{maskset:F,opts:_,isRTL:!1}),_.showTooltip&&$.prop("title",F.mask),"rtl"!=e.dir&&!_.rightAlign||$.css("text-align","right"),"rtl"!=e.dir&&!_.numericInput||(e.dir="ltr",$.removeAttr("dir"),(t=$.data("_inputmask")).isRTL=!0,$.data("_inputmask",t),L=!0),$.unbind(".inputmask"),($.is(":input")&&(t=$.attr("type"),(r="text"==t||"tel"==t||"password"==t)||((o=document.createElement("input")).setAttribute("type",t),r="text"===o.type,o=null),r)||e.isContentEditable)&&($.closest("form").bind("submit",function(e){d!=y().join("")&&$.change(),$[0]._valueGet&&$[0]._valueGet()==u().join("")&&$[0]._valueSet(""),_.removeMaskOnSubmit&&$.inputmask("remove")}).bind("reset",function(){setTimeout(function(){$.triggerHandler("setvalue.inputmask")},0)}),$.bind("mouseenter.inputmask",function(){!ie(this).is(":focus")&&_.showMaskOnHover&&this._valueGet()!=y().join("")&&T(this,y())}).bind("blur.inputmask",function(e){var t,i,n=ie(this);n.data("_inputmask")&&(t=this._valueGet(),i=y().slice(),Z=!0,d!=i.join("")&&setTimeout(function(){n.change(),d=i.join("")},0),""!=t&&(_.clearMaskOnLostFocus&&(t==u().join("")?i=[]:B(i)),!1===R(i)&&(n.trigger("incomplete"),_.clearIncomplete&&(A(),i=_.clearMaskOnLostFocus?[]:u().slice())),T(this,i,void 0,e)))}).bind("focus.inputmask",function(e){ie(this);var t=this._valueGet();_.showMaskOnFocus&&(!_.showMaskOnHover||_.showMaskOnHover&&""==t)&&this._valueGet()!=y().join("")&&T(this,y(),w(E())),d=y().join("")}).bind("mouseleave.inputmask",function(){var e,t,i=ie(this);_.clearMaskOnLostFocus&&(e=y().slice(),t=this._valueGet(),i.is(":focus")||t==i.attr("placeholder")||""==t||(t==u().join("")?e=[]:B(e),T(this,e)))}).bind("click.inputmask",function(){var e,t;ie(this).is(":focus")&&(e=D(this)).begin==e.end&&(_.radixFocus&&""!=_.radixPoint&&-1!=ie.inArray(_.radixPoint,y())&&(Z||y().join("")==u().join(""))?(D(this,ie.inArray(_.radixPoint,y())),Z=!1):D(this,(e=a(e.begin))<(t=w(E(e)))?f(e)?e:w(e):t))}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){D(e,0,w(E()))},0)}).bind(ae+".inputmask dragdrop.inputmask drop.inputmask",j).bind("cut.inputmask",function(e){N=!0;var t=ie(this),i=D(this);H(this,ie.inputmask.keyCode.DELETE,i),T(this,y(),F.p,e,d!=y().join("")),this._valueGet()==u().join("")&&t.trigger("cleared"),_.showTooltip&&t.prop("title",F.mask)}).bind("complete.inputmask",_.oncomplete).bind("incomplete.inputmask",_.onincomplete).bind("cleared.inputmask",_.oncleared),$.bind("keydown.inputmask",V).bind("keypress.inputmask",c),se||$.bind("compositionstart.inputmask",U).bind("compositionupdate.inputmask",Y).bind("compositionend.inputmask",q),"paste"==ae&&$.bind("input.inputmask",z)),$.bind("setvalue.inputmask",function(){var e=this._valueGet();this._valueSet(ie.isFunction(_.onBeforeMask)&&_.onBeforeMask.call(this,e,_)||e),s(this,!0,!1),d=y().join(""),(_.clearMaskOnLostFocus||_.clearIncomplete)&&this._valueGet()==u().join("")&&this._valueSet("")}),W(e);var t,i,n,o=ie.isFunction(_.onBeforeMask)&&_.onBeforeMask.call(e,e._valueGet(),_)||e._valueGet(),r=(s(e,!0,!1,o.split("")),y().slice());d=r.join("");try{i=document.activeElement}catch(e){}!1===R(r)&&_.clearIncomplete&&A(),_.clearMaskOnLostFocus&&(r.join("")==u().join("")?r=[]:B(r)),T(e,r),i===e&&D(e,w(E())),i=e,i=ie._data(e).events,n=!1,ie.each(i,function(e,t){ie.each(t,function(e,t){var i;"inputmask"==t.namespace&&"setvalue"!=t.type&&(i=t.handler,t.handler=function(e){if(!(this.disabled||this.readOnly&&!("keydown"==e.type&&e.ctrlKey&&67==e.keyCode||e.keyCode==ie.inputmask.keyCode.TAB))){switch(e.type){case"input":if(!0===N||!0===n)return N=!1,e.preventDefault();break;case"keydown":n=M=!1;break;case"keypress":if(!0===M)return e.preventDefault();M=!0;break;case"compositionstart":n=!0;break;case"compositionupdate":N=!0;break;case"compositionend":n=!1}return i.apply(this,arguments)}e.preventDefault()})})})}var d,X,h,O,L=!1,M=!1,N=!1,Q=!1,Z=!0;if(null!=e)switch(e.action){case"isComplete":return $=ie(e.el),F=$.data("_inputmask").maskset,_=$.data("_inputmask").opts,R(e.buffer);case"unmaskedvalue":return $=e.$input,F=$.data("_inputmask").maskset,_=$.data("_inputmask").opts,L=e.$input.data("_inputmask").isRTL,G(e.$input);case"mask":d=y().join(""),K(e.el);break;case"format":($=ie({})).data("_inputmask",{maskset:F,opts:_,isRTL:_.numericInput}),_.numericInput&&(L=!0);var t=(ie.isFunction(_.onBeforeMask)&&_.onBeforeMask.call($,e.value,_)||e.value).split("");return s($,!1,!1,L?t.reverse():t),ie.isFunction(_.onBeforeWrite)&&_.onBeforeWrite.call(this,void 0,y(),0,_),e.metadata?{value:(L?y().slice().reverse():y()).join(""),metadata:$.inputmask("getmetadata")}:(L?y().slice().reverse():y()).join("");case"isValid":($=ie({})).data("_inputmask",{maskset:F,opts:_,isRTL:_.numericInput}),_.numericInput&&(L=!0);t=e.value.split("");s($,!1,!0,L?t.reverse():t);for(var t=y(),J=l(),i=t.length-1;J<i&&!f(i);i--);return t.splice(J,i+1-J),R(t)&&e.value==t.join("");case"getemptymask":return $=ie(e.el),F=$.data("_inputmask").maskset,_=$.data("_inputmask").opts,u();case"remove":var ee,t=e.el,$=ie(t);F=$.data("_inputmask").maskset,_=$.data("_inputmask").opts,t._valueSet(G($)),$.unbind(".inputmask"),$.removeData("_inputmask"),(ee=Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,"value"):ee)&&ee.get?t._valueGet&&Object.defineProperty(t,"value",{get:t._valueGet,set:t._valueSet}):document.__lookupGetter__&&t.__lookupGetter__("value")&&t._valueGet&&(t.__defineGetter__("value",t._valueGet),t.__defineSetter__("value",t._valueSet));try{delete t._valueGet,delete t._valueSet}catch(e){t._valueGet=void 0,t._valueSet=void 0}break;case"getmetadata":if($=ie(e.el),F=$.data("_inputmask").maskset,_=$.data("_inputmask").opts,ie.isArray(F.metadata)){for(var te,t=E(),n=t;0<=n;n--)if(F.validPositions[n]&&null!=F.validPositions[n].alternation){te=F.validPositions[n].alternation;break}return null!=te?F.metadata[F.validPositions[t].locator[te]]:F.metadata[0]}return F.metadata}}var e,oe,re,se,ae;void 0===ie.fn.inputmask&&(e=navigator.userAgent,oe=null!==e.match(new RegExp("iphone","i")),e.match(new RegExp("android.*safari.*","i")),re=null!==e.match(new RegExp("android.*chrome.*","i")),se=null!==e.match(new RegExp("android.*firefox.*","i")),/Kindle/i.test(e)||/Silk/i.test(e)||/KFTT/i.test(e)||/KFOT/i.test(e)||/KFJWA/i.test(e)||/KFJWI/i.test(e)||/KFSOWI/i.test(e)||/KFTHWA/i.test(e)||/KFTHWI/i.test(e)||/KFAPWA/i.test(e)||/KFAPWI/i.test(e),ae=ne("paste")?"paste":ne("input")?"input":"propertychange",ie.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:ie.noop,onincomplete:ie.noop,oncleared:ie.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:ie.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:ie.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z–ê-—è–Å—ë√Ä-√ø¬µ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z–ê-—è–Å—ë√Ä-√ø¬µ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:ie.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(e){return e.replace(new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim"),"\\$1")},format:function(e,t,i){var n=ie.extend(!0,{},ie.inputmask.defaults,t);return s(n.alias,t,n),l({action:"format",value:e,metadata:i},a(n,t&&void 0!==t.definitions),n)},isValid:function(e,t){var i=ie.extend(!0,{},ie.inputmask.defaults,t);return s(i.alias,t,i),l({action:"isValid",value:e},a(i,t&&void 0!==t.definitions),i)}},ie.fn.inputmask=function(e,i){function n(e,t,i){var n,o=ie(e);for(n in o.data("inputmask-alias")&&s(o.data("inputmask-alias"),ie.extend(!0,{},t),t),t){var r=o.data("inputmask-"+n.toLowerCase());null!=r&&(r="boolean"==typeof r?r:r.toString(),"mask"==n&&0==r.indexOf("[")?(t[n]=r.replace(/[\s[\]]/g,"").split("','"),t[n][0]=t[n][0].replace("'",""),t[n][t[n].length-1]=t[n][t[n].length-1].replace("'","")):t[n]=r,i&&(i[n]=t[n]))}return t}var t,o=ie.extend(!0,{},ie.inputmask.defaults,i);if("string"!=typeof e)return"object"==typeof e?(s((o=ie.extend(!0,{},ie.inputmask.defaults,e)).alias,e,o),this.each(function(){return n(this,o),null==(t=a(o,e&&void 0!==e.definitions))?this:void l({action:"mask",el:this},t,o)})):null==e?this.each(function(){if((e=ie(this).attr("data-inputmask"))&&""!=e)try{var e=e.replace(new RegExp("'","g"),'"'),t=ie.parseJSON("{"+e+"}");ie.extend(!0,t,i),s((o=n(this,o=ie.extend(!0,{},ie.inputmask.defaults,t))).alias,t,o),o.alias=void 0,ie(this).inputmask("mask",o)}catch(e){}(ie(this).attr("data-inputmask-mask")||ie(this).attr("data-inputmask-alias"))&&(e={},s((o=n(this,o=ie.extend(!0,{},ie.inputmask.defaults,{}),e)).alias,e,o),o.alias=void 0,ie(this).inputmask("mask",o))}):void 0;switch(e){case"mask":return s(o.alias,i,o),this.each(function(){return n(this,o),null==(t=a(o,i&&void 0!==i.definitions))?this:void l({action:"mask",el:this},t,o)});case"unmaskedvalue":var r=ie(this);return r.data("_inputmask")?l({action:"unmaskedvalue",$input:r}):r.val();case"remove":return this.each(function(){ie(this).data("_inputmask")&&l({action:"remove",el:this})});case"getemptymask":return this.data("_inputmask")?l({action:"getemptymask",el:this}):"";case"hasMaskedValue":return!!this.data("_inputmask")&&!this.data("_inputmask").opts.autoUnmask;case"isComplete":return!this.data("_inputmask")||l({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this});case"getmetadata":return this.data("_inputmask")?l({action:"getmetadata",el:this}):void 0;default:return s(o.alias,i,o),s(e,i,o)||(o.mask=e),this.each(function(){return n(this,o),null==(t=a(o,i&&void 0!==i.definitions))?this:void l({action:"mask",el:this},t,o)})}}),ie.fn.inputmask}(jQuery),function(r){r.extend(r.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),r.extend(r.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(e){e=r.inputmask.escapeRegex.call(this,e);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+e+"[01])")},val2:function(e){e=r.inputmask.escapeRegex.call(this,e);return new RegExp("((0[1-9]|[12][0-9])"+e+"(0[1-9]|1[012]))|(30"+e+"(0[13-9]|1[012]))|(31"+e+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,i){if(isNaN(e))return!1;var n=parseInt(e.concat(t.toString().slice(e.length))),e=parseInt(e.concat(i.toString().slice(e.length)));return!isNaN(n)&&(t<=n&&n<=i)||!isNaN(e)&&(t<=e&&e<=i)},determinebaseyear:function(e,t,i){var n=(new Date).getFullYear();if(n<e)return e;if(t<n){for(var o=t.toString().slice(0,2),r=t.toString().slice(2,4);t<o+i;)o--;r=o+r;return r<e?e:r}return n},onKeyDown:function(e,t,i,n){var o=r(this);e.ctrlKey&&e.keyCode==r.inputmask.keyCode.RIGHT&&(e=new Date,o.val(e.getDate().toString()+(e.getMonth()+1).toString()+e.getFullYear().toString()),o.triggerHandler("setvalue.inputmask"))},getFrontValue:function(e,t,i){for(var n=0,o=0,r=0;r<e.length&&"2"!=e.charAt(r);r++){var s=i.definitions[e.charAt(r)];s?(n+=o,o=s.cardinality):o++}return t.join("").substr(n,o)},definitions:{1:{validator:function(e,t,i,n,o){var r=o.regex.val1.test(e);return n||r||e.charAt(1)!=o.separator&&-1=="-./".indexOf(e.charAt(1))||!(r=o.regex.val1.test("0"+e.charAt(0)))?r:(t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){var r=e,r=(isNaN(t.buffer[i+1])||(r+=t.buffer[i+1]),(1==r.length?o.regex.val1pre:o.regex.val1).test(r));if(!n&&!r){if(r=o.regex.val1.test(e+"0"))return t.buffer[i]=e,t.buffer[++i]="0",{pos:i,c:"0"};if(r=o.regex.val1.test("0"+e))return t.buffer[i]="0",{pos:++i}}return r},cardinality:1}]},2:{validator:function(e,t,i,n,o){var r=o.getFrontValue(t.mask,t.buffer,o),s=(-1!=r.indexOf(o.placeholder[0])&&(r="01"+o.separator),o.regex.val2(o.separator).test(r+e));if(!n&&!s&&(e.charAt(1)==o.separator||-1!="-./".indexOf(e.charAt(1)))&&(s=o.regex.val2(o.separator).test(r+"0"+e.charAt(0))))return t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)};if(o.mask.indexOf("2")==o.mask.length-1&&s){if(t.buffer.join("").substr(4,4)+e!=o.leapday)return!0;n=parseInt(t.buffer.join("").substr(0,4),10);return n%4==0&&(n%100!=0||n%400==0)}return s},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){isNaN(t.buffer[i+1])||(e+=t.buffer[i+1]);var r=o.getFrontValue(t.mask,t.buffer,o),s=(-1!=r.indexOf(o.placeholder[0])&&(r="01"+o.separator),(1==e.length?o.regex.val2pre(o.separator):o.regex.val2(o.separator)).test(r+e));return n||s||!(s=o.regex.val2(o.separator).test(r+"0"+e))?s:(t.buffer[i]="0",{pos:++i})},cardinality:1}]},y:{validator:function(e,t,i,n,o){if(o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear)){if(t.buffer.join("").substr(0,6)!=o.leapday)return!0;t=parseInt(e,10);return t%4==0&&(t%100!=0||t%400==0)}return!1},cardinality:4,prevalidator:[{validator:function(e,t,i,n,o){var r=o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear);if(!n&&!r){n=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e+"0").toString().slice(0,1);if(r=o.isInYearRange(n+e,o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[i++]=n.charAt(0),{pos:i};if(n=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e+"0").toString().slice(0,2),r=o.isInYearRange(n+e,o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[i++]=n.charAt(0),t.buffer[i++]=n.charAt(1),{pos:i}}return r},cardinality:1},{validator:function(e,t,i,n,o){var r=o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear);if(!n&&!r){n=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e).toString().slice(0,2);if(r=o.isInYearRange(e[0]+n[1]+e[1],o.yearrange.minyear,o.yearrange.maxyear))return t.buffer[i++]=n.charAt(1),{pos:i};if(n=o.determinebaseyear(o.yearrange.minyear,o.yearrange.maxyear,e).toString().slice(0,2),r=!!o.isInYearRange(n+e,o.yearrange.minyear,o.yearrange.maxyear)&&(t.buffer.join("").substr(0,6)!=o.leapday||(o=parseInt(e,10))%4==0&&(o%100!=0||o%400==0)))return t.buffer[i-1]=n.charAt(0),t.buffer[i++]=n.charAt(1),t.buffer[i++]=e.charAt(0),{refreshFromBuffer:{start:i-3,end:i},pos:i}}return r},cardinality:2},{validator:function(e,t,i,n,o){return o.isInYearRange(e,o.yearrange.minyear,o.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(e){e=r.inputmask.escapeRegex.call(this,e);return new RegExp("((0[13-9]|1[012])"+e+"[0-3])|(02"+e+"[0-2])")},val2:function(e){e=r.inputmask.escapeRegex.call(this,e);return new RegExp("((0[1-9]|1[012])"+e+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+e+"30)|((0[13578]|1[02])"+e+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(e,t,i,n){var o=r(this);e.ctrlKey&&e.keyCode==r.inputmask.keyCode.RIGHT&&(e=new Date,o.val((e.getMonth()+1).toString()+e.getDate().toString()+e.getFullYear().toString()),o.triggerHandler("setvalue.inputmask"))}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(e,t,i,n){var o=r(this);e.ctrlKey&&e.keyCode==r.inputmask.keyCode.RIGHT&&(e=new Date,o.val(e.getFullYear().toString()+(e.getMonth()+1).toString()+e.getDate().toString()),o.triggerHandler("setvalue.inputmask"))}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,i,n,o){if("24"==o.hourFormat&&24==parseInt(e,10))return t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},c:t.buffer[i]="0"};var r=o.regex.hrs.test(e);return n||r||e.charAt(1)!=o.timeseparator&&-1=="-.:".indexOf(e.charAt(1))||!(r=o.regex.hrs.test("0"+e.charAt(0)))?r&&"24"!==o.hourFormat&&o.regex.hrs24.test(e)?(n=parseInt(e,10),t.buffer[i+5]=24==n?"a":"p",t.buffer[i+6]="m",(n-=12)<10?(t.buffer[i]=n.toString(),t.buffer[i-1]="0"):(t.buffer[i]=n.toString().charAt(1),t.buffer[i-1]=n.toString().charAt(0)),{refreshFromBuffer:{start:i-1,end:i+6},c:t.buffer[i]}):r:(t.buffer[i-1]="0",t.buffer[i]=e.charAt(0),{refreshFromBuffer:{start:++i-2,end:i},pos:i,c:o.timeseparator})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){var r=o.regex.hrspre.test(e);return n||r||!(r=o.regex.hrs.test("0"+e))?r:(t.buffer[i]="0",{pos:++i})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){var r=o.regex.mspre.test(e);return n||r||!(r=o.regex.ms.test("0"+e))?r:(t.buffer[i]="0",{pos:++i})},cardinality:1}]},t:{validator:function(e,t,i,n,o){return o.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),r.fn.inputmask}(jQuery),function(e){e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-z–ê-—è–Å—ë√Ä-√ø¬µ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-z–ê-—è–Å—ë√Ä-√ø¬µ]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(e,t,i,n,o){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=0;t<8;t++)e[t]=function(){var a=t;return{validator:function(e,t,i,n,o){if(o.regex["urlpre"+(a+1)]){var r,s=e,e=(0<a+1-e.length&&(s=t.buffer.join("").substring(0,a+1-e.length)+""+s),o.regex["urlpre"+(a+1)].test(s));if(n||e)return e;for(i-=a,r=0;r<o.defaultPrefix.length;r++)t.buffer[i]=o.defaultPrefix[r],i++;for(r=0;r<s.length-1;r++)t.buffer[i]=s[r],i++;return{pos:i}}return!1},cardinality:a}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,i,n,o){return e=-1<i-1&&"."!=t.buffer[i-1]?(e=t.buffer[i-1]+e,-1<i-2&&"."!=t.buffer[i-2]?t.buffer[i-2]+e:"0"+e):"00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e,t){return(e=e.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),e.fn.inputmask}(jQuery),function(h){h.extend(h.inputmask.defaults.aliases,{numeric:{mask:function(n){function e(e){for(var t="",i=0;i<e.length;i++)t+=n.definitions[e[i]]?"\\"+e[i]:e[i];return t}var t;0!==n.repeat&&isNaN(n.integerDigits)&&(n.integerDigits=n.repeat),n.repeat=0,n.groupSeparator==n.radixPoint&&("."==n.radixPoint?n.groupSeparator=",":","==n.radixPoint?n.groupSeparator=".":n.groupSeparator="")," "===n.groupSeparator&&(n.skipOptionalPartCharacter=void 0),n.autoGroup=n.autoGroup&&""!=n.groupSeparator,n.autoGroup&&("string"==typeof n.groupSize&&isFinite(n.groupSize)&&(n.groupSize=parseInt(n.groupSize)),isFinite(n.integerDigits))&&(t=Math.floor(n.integerDigits/n.groupSize),i=n.integerDigits%n.groupSize,n.integerDigits=parseInt(n.integerDigits)+(0==i?t-1:t)),1<n.placeholder.length&&(n.placeholder=n.placeholder.charAt(0)),n.radixFocus=n.radixFocus&&"0"==n.placeholder,n.definitions[";"]=n.definitions["~"];var i=(i=e(n.prefix))+"[+]~{1,"+n.integerDigits+"}";return null!=n.digits&&(isNaN(n.digits)||0<parseInt(n.digits))&&(i+=n.digitsOptional?"["+(n.decimalProtect?":":n.radixPoint)+";{"+n.digits+"}]":(n.decimalProtect?":":n.radixPoint)+";{"+n.digits+"}"),""!=n.negationSymbol.back&&(i+="[-]"),i+=e(n.suffix),n.greedy=!1,i},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(e,t,i,n){var o=!1,r=(e.length>=n.suffix.length&&e.join("").indexOf(n.suffix)==e.length-n.suffix.length&&(e.length=e.length-n.suffix.length,o=!0),!1),s=e[t=t>=e.length?e.length-1:t<n.prefix.length?n.prefix.length:t];if(""==n.groupSeparator||-1!=h.inArray(n.radixPoint,e)&&t>=h.inArray(n.radixPoint,e)||new RegExp("["+h.inputmask.escapeRegex(n.negationSymbol.front)+"+]").test(s)){if(o)for(var a=0,l=n.suffix.length;a<l;a++)e.push(n.suffix.charAt(a));return{pos:t}}var c=e.slice();s==n.groupSeparator&&(c.splice(t--,1),s=c[t]),i?c[t]="?":c.splice(t,0,"?");t=u=c.join("");if(0<u.length&&n.autoGroup||i&&-1!=u.indexOf(n.groupSeparator)){var u,c=h.inputmask.escapeRegex(n.groupSeparator),r=0==u.indexOf(n.groupSeparator),c=(u=u.replace(new RegExp(c,"g"),"")).split(n.radixPoint);if((u=""==n.radixPoint?u:c[0])!=n.prefix+"?0"&&u.length>=n.groupSize+n.prefix.length)for(var d=new RegExp("([-+]?[\\d?]+)([\\d?]{"+n.groupSize+"})");d.test(u);)u=(u=u.replace(d,"$1"+n.groupSeparator+"$2")).replace(n.groupSeparator+n.groupSeparator,n.groupSeparator);""!=n.radixPoint&&1<c.length&&(u+=n.radixPoint+c[1])}r=t!=u,e.length=u.length;for(a=0,l=u.length;a<l;a++)e[a]=u.charAt(a);c=h.inArray("?",e);if(i?e[c]=s:e.splice(c,1),!r&&o)for(a=0,l=n.suffix.length;a<l;a++)e.push(n.suffix.charAt(a));return{pos:c,refreshFromBuffer:r,buffer:e}},onBeforeWrite:function(e,t,i,n){if(e&&"blur"==e.type){e=t.join("").replace(n.prefix,"");if(e=(e=e.replace(n.suffix,"")).replace(new RegExp(h.inputmask.escapeRegex(n.groupSeparator),"g"),""),","===n.radixPoint&&(e=e.replace(h.inputmask.escapeRegex(n.radixPoint),".")),isFinite(e)&&isFinite(n.min)&&parseFloat(e)<parseFloat(n.min))return h.extend(!0,{refreshFromBuffer:!0,buffer:(n.prefix+n.min).split("")},n.postFormat((n.prefix+n.min).split(""),0,!0,n));var e=""!=n.radixPoint?t.join("").split(n.radixPoint):[t.join("")],o=e[0].match(n.regex.integerPart(n)),e=2==e.length?e[1].match(n.regex.integerNPart(n)):void 0,r=(!o||o[0]!=n.negationSymbol.front+"0"&&o[0]!=n.negationSymbol.front&&"+"!=o[0]||null!=e&&!e[0].match(/^0+$/)||t.splice(o.index,1),h.inArray(n.radixPoint,t));if(-1!=r&&isFinite(n.digits)&&!n.digitsOptional){for(var s=1;s<=n.digits;s++)null!=t[r+s]&&t[r+s]!=n.placeholder.charAt(0)||(t[r+s]="0");return{refreshFromBuffer:!0,buffer:t}}}if(n.autoGroup)return(e=n.postFormat(t,i-1,!0,n)).caret=i<=n.prefix.length?e.pos:e.pos+1,e},regex:{integerPart:function(e){return new RegExp("["+h.inputmask.escapeRegex(e.negationSymbol.front)+"+]?\\d+")},integerNPart:function(e){return new RegExp("[\\d"+h.inputmask.escapeRegex(e.groupSeparator)+"]+")}},signHandler:function(e,t,i,n,o){if(!n&&o.allowMinus&&"-"===e||o.allowPlus&&"+"===e){n=t.buffer.join("").match(o.regex.integerPart(o));if(n&&0<n[0].length)return t.buffer[n.index]==("-"===e?"+":o.negationSymbol.front)?"-"==e?""!=o.negationSymbol.back?{pos:n.index,c:o.negationSymbol.front,remove:n.index,caret:i,insert:{pos:t.buffer.length-o.suffix.length-1,c:o.negationSymbol.back}}:{pos:n.index,c:o.negationSymbol.front,remove:n.index,caret:i}:""!=o.negationSymbol.back?{pos:n.index,c:"+",remove:[n.index,t.buffer.length-o.suffix.length-1],caret:i}:{pos:n.index,c:"+",remove:n.index,caret:i}:t.buffer[n.index]==("-"===e?o.negationSymbol.front:"+")?"-"==e&&""!=o.negationSymbol.back?{remove:[n.index,t.buffer.length-o.suffix.length-1],caret:i-1}:{remove:n.index,caret:i-1}:"-"==e?""!=o.negationSymbol.back?{pos:n.index,c:o.negationSymbol.front,caret:i+1,insert:{pos:t.buffer.length-o.suffix.length,c:o.negationSymbol.back}}:{pos:n.index,c:o.negationSymbol.front,caret:i+1}:{pos:n.index,c:e,caret:i+1}}return!1},radixHandler:function(e,t,i,n,o){if(!n&&e===o.radixPoint&&0<o.digits){n=h.inArray(o.radixPoint,t.buffer),e=t.buffer.join("").match(o.regex.integerPart(o));if(-1!=n&&t.validPositions[n])return t.validPositions[n-1]?{caret:n+1}:{pos:e.index,c:e[0],caret:n+1};if(!e||"0"==e[0]&&e.index+1!=i)return t.buffer[e?e.index:i]="0",{pos:(e?e.index:i)+1}}return!1},leadingZeroHandler:function(e,t,i,n,o){var r=t.buffer.join("").match(o.regex.integerNPart(o)),s=h.inArray(o.radixPoint,t.buffer);if(r&&!n&&(-1==s||i<=s))if(0==r[0].indexOf("0")){i<o.prefix.length&&(i=r.index);var n=h.inArray(o.radixPoint,t._buffer),a=t._buffer&&t.buffer.slice(s).join("")==t._buffer.slice(n).join("")||0==parseInt(t.buffer.slice(s+1).join("")),n=t._buffer&&t.buffer.slice(r.index,s).join("")==t._buffer.slice(o.prefix.length,n).join("")||"0"==t.buffer.slice(r.index,s).join("");if(-1==s||a&&n)return t.buffer.splice(r.index,1),{pos:i=i>r.index?i-1:r.index,remove:r.index};if(r.index+1==i||"0"==e)return t.buffer.splice(r.index,1),{pos:i=r.index,remove:r.index}}else if("0"===e&&i<=r.index&&r[0]!=o.groupSeparator)return!1;return!0},postValidation:function(e,t){var i=!0,e=e.join("").replace(t.prefix,"");return e=(e=e.replace(t.suffix,"")).replace(new RegExp(h.inputmask.escapeRegex(t.groupSeparator),"g"),""),e=(e=(e=","===t.radixPoint?e.replace(h.inputmask.escapeRegex(t.radixPoint),"."):e).replace(new RegExp("^"+h.inputmask.escapeRegex(t.negationSymbol.front)),"-")).replace(new RegExp(h.inputmask.escapeRegex(t.negationSymbol.back)+"$"),""),i=isFinite(e)&&isFinite(t.max)?parseFloat(e)<=parseFloat(t.max):i},definitions:{"~":{validator:function(e,t,i,n,o){var r=o.signHandler(e,t,i,n,o);return r||((r=o.radixHandler(e,t,i,n,o))||(!0!==(r=(n?new RegExp("[0-9"+h.inputmask.escapeRegex(o.groupSeparator)+"]"):new RegExp("[0-9]")).test(e))||!0!==(r=o.leadingZeroHandler(e,t,i,n,o))))||(e=h.inArray(o.radixPoint,t.buffer),r=!1===o.digitsOptional&&e<i&&!n?{pos:i,remove:i}:{pos:i}),r},cardinality:1,prevalidator:null},"+":{validator:function(e,t,i,n,o){var r=o.signHandler(e,t,i,n,o);return r=!r&&(n&&o.allowMinus&&e===o.negationSymbol.front||o.allowMinus&&"-"==e||o.allowPlus&&"+"==e)?"-"!=e||(""!=o.negationSymbol.back?{pos:i,c:"-"===e?o.negationSymbol.front:"+",caret:i+1,insert:{pos:t.buffer.length,c:o.negationSymbol.back}}:{pos:i,c:"-"===e?o.negationSymbol.front:"+",caret:i+1}):r},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(e,t,i,n,o){t=o.signHandler(e,t,i,n,o);return t=!t&&n&&o.allowMinus&&e===o.negationSymbol.back?!0:t},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(e,t,i,n,o){var r,n=o.signHandler(e,t,i,n,o);return n||(r="["+h.inputmask.escapeRegex(o.radixPoint)+"]",(n=new RegExp(r).test(e))&&t.validPositions[i]&&t.validPositions[i].match.placeholder==o.radixPoint&&(n={caret:i+1})),n},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,onUnMask:function(e,t,i){e=e.replace(i.prefix,"");return e=(e=e.replace(i.suffix,"")).replace(new RegExp(h.inputmask.escapeRegex(i.groupSeparator),"g"),""),i.unmaskAsNumber?(e=e.replace(h.inputmask.escapeRegex.call(this,i.radixPoint),"."),Number(e)):e},isComplete:function(e,t){var i=e.join(""),e=e.slice();if(t.postFormat(e,0,!0,t),e.join("")!=i)return!1;e=i.replace(t.prefix,"");return e=(e=e.replace(t.suffix,"")).replace(new RegExp(h.inputmask.escapeRegex(t.groupSeparator),"g"),""),","===t.radixPoint&&(e=e.replace(h.inputmask.escapeRegex(t.radixPoint),".")),isFinite(e)},onBeforeMask:function(e,t){var i,n;return e=""!=t.radixPoint&&isFinite(e)?e.toString().replace(".",t.radixPoint):(i=e.match(/,/g),(n=e.match(/\./g))&&i?n.length>i.length?(e=e.replace(/\./g,"")).replace(",",t.radixPoint):i.length>n.length?(e=e.replace(/,/g,"")).replace(".",t.radixPoint):e.indexOf(".")<e.indexOf(",")?e.replace(/\./g,""):e.replace(/,/g,""):e.replace(new RegExp(h.inputmask.escapeRegex(t.groupSeparator),"g"),"")),0==t.digits&&(-1!=e.indexOf(".")?e=e.substring(0,e.indexOf(".")):-1!=e.indexOf(",")&&(e=e.substring(0,e.indexOf(",")))),e},canClearPosition:function(e,t,i,n,o){var r=e.validPositions[t].input,i=r!=o.radixPoint&&isFinite(r)||t==i||r==o.groupSeparator||r==o.negationSymbol.front||r==o.negationSymbol.back;if(i&&isFinite(r)){if(!n&&e.buffer){var s,a=t+1;if(null==(s=e.buffer.join("").substr(0,t).match(o.regex.integerNPart(o)))||0==parseInt(s[0].replace(new RegExp(h.inputmask.escapeRegex(o.groupSeparator),"g"),"")))for(;e.validPositions[a]&&(e.validPositions[a].input==o.groupSeparator||"0"==e.validPositions[a].input);)delete e.validPositions[a],a++}var l,c=[];for(l in e.validPositions)c.push(e.validPositions[l].input);s=c.join("").match(o.regex.integerNPart(o));r=h.inArray(o.radixPoint,e.buffer);s&&(-1==r||t<=r)&&(0==s[0].indexOf("0")?i=s.index!=t||-1==r:(n=parseInt(s[0].replace(new RegExp(h.inputmask.escapeRegex(o.groupSeparator),"g"),"")),-1!=r&&n<10&&"0"==o.placeholder.charAt(0)&&(e.validPositions[t].input="0",e.p=o.prefix.length+1,i=!1)))}return i}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),h.fn.inputmask}(jQuery),function(e){e.extend(e.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",countrycode:"",mask:function(n){n.definitions["#"]=n.definitions[9];var t=[];return e.ajax({url:n.url,async:!1,dataType:"json",success:function(e){t=e},error:function(e,t,i){alert(i+" - "+n.url)}}),t=t.sort(function(e,t){return(e.mask||e)<(t.mask||t)?-1:1})},keepStatic:!1,nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(e,t){e=e.replace(/^0/g,"");return e=1<e.indexOf(t.countrycode)||-1==e.indexOf(t.countrycode)?"+"+t.countrycode+e:e}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),e.fn.inputmask}(jQuery),function(b){b.extend(b.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(e,t,i,n,o){function r(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}if(null==o.regexTokens){var s=new r,a=[];for(o.regexTokens=[];u=o.tokenizer.exec(o.regex);)switch(c=u[0],c.charAt(0)){case"(":a.push(new r(!0));break;case")":var l=a.pop();(0<a.length?a[a.length-1]:s).matches.push(l);break;case"{":case"+":case"*":var c,u,d=new r(!1,!0),h=(c=c.replace(/[{}]/g,"")).split(","),p=isNaN(h[0])?h[0]:parseInt(h[0]),h=1==h.length?p:isNaN(h[1])?h[1]:parseInt(h[1]);d.quantifier={min:p,max:h},0<a.length?((u=(p=a[a.length-1].matches).pop()).isGroup||((l=new r(!0)).matches.push(u),u=l),p.push(u),p.push(d)):((u=s.matches.pop()).isGroup||((l=new r(!0)).matches.push(u),u=l),s.matches.push(u),s.matches.push(d));break;default:(0<a.length?a[a.length-1]:s).matches.push(c)}0<s.matches.length&&o.regexTokens.push(s)}var t=t.buffer.slice(),g="",f=!1,m=0;t.splice(i,0,e);for(var r,v=t.join(""),y=0;y<o.regexTokens.length;y++)if(f=function e(t,i){var n=!1;i&&(g+="(",m++);for(var o=0;o<t.matches.length;o++){var r=t.matches[o];if(1==r.isGroup)n=e(r,!0);else if(1==r.isQuantifier){var s=b.inArray(r,t.matches),a=t.matches[s-1],s=g;if(isNaN(r.quantifier.max)){for(;r.repeaterPart&&r.repeaterPart!=g&&r.repeaterPart.length>g.length&&!(n=e(a,!0)););(n=n||e(a,!0))&&(r.repeaterPart=g),g=s+r.quantifier.max}else{for(var l=0,c=r.quantifier.max-1;l<c&&!(n=e(a,!0));l++);g=s+"{"+r.quantifier.min+","+r.quantifier.max+"}"}}else if(null!=r.matches)for(var u=0;u<r.length&&!(n=e(r[u],i));u++);else{if("["==r.charAt(0)){f=g,f+=r;for(var d=0;d<m;d++)f+=")";n=new RegExp("^("+f+")$").test(v)}else for(var h=0,p=r.length;h<p;h++)if("\\"!=r.charAt(h)){f=g;for(var f=(f+=r.substr(0,h+1)).replace(/\|$/,""),d=0;d<m;d++)f+=")";if(n=new RegExp("^("+f+")$").test(v))break}g+=r}if(n)break}return i&&(g+=")",m--),n}(r=o.regexTokens[y],r.isGroup))break;return f},cardinality:1}}}}),b.fn.inputmask}(jQuery),!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery)}(function(l){"use strict";var i=0;l.ajaxTransport("iframe",function(o){var r,s,a,t;if(o.async)return r=o.initialIframeSrc||"javascript:false;",{send:function(e,n){(s=l('<form style="display:none;"></form>')).attr("accept-charset",o.formAcceptCharset),t=/\?/.test(o.url)?"&":"?","DELETE"===o.type?(o.url=o.url+t+"_method=DELETE",o.type="POST"):"PUT"===o.type?(o.url=o.url+t+"_method=PUT",o.type="POST"):"PATCH"===o.type&&(o.url=o.url+t+"_method=PATCH",o.type="POST"),a=l('<iframe src="'+r+'" name="iframe-transport-'+(i+=1)+'"></iframe>').bind("load",function(){var i,t=l.isArray(o.paramName)?o.paramName:[o.paramName];a.unbind("load").bind("load",function(){var t;try{if(!(t=a.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}n(200,"success",{iframe:t}),l('<iframe src="'+r+'"></iframe>').appendTo(s),window.setTimeout(function(){s.remove()},0)}),s.prop("target",a.prop("name")).prop("action",o.url).prop("method",o.type),o.formData&&l.each(o.formData,function(e,t){l('<input type="hidden"/>').prop("name",t.name).val(t.value).appendTo(s)}),o.fileInput&&o.fileInput.length&&"POST"===o.type&&(i=o.fileInput.clone(),o.fileInput.after(function(e){return i[e]}),o.paramName&&o.fileInput.each(function(e){l(this).prop("name",t[e]||o.paramName)}),s.append(o.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),o.fileInput.removeAttr("form")),s.submit(),i&&i.length&&o.fileInput.each(function(e,t){e=l(i[e]);l(t).prop("name",e.prop("name")).attr("form",e.attr("form")),e.replaceWith(t)})}),s.append(a).appendTo(document.body)},abort:function(){a&&a.unbind("load").prop("src",r),s&&s.remove()}}}),l.ajaxSetup({converters:{"iframe text":function(e){return e&&l(e[0].body).text()},"iframe json":function(e){return e&&l.parseJSON(l(e[0].body).text())},"iframe html":function(e){return e&&l(e[0].body).html()},"iframe xml":function(e){e=e&&e[0];return e&&l.isXMLDoc(e)?e:l.parseXML(e.XMLDocument&&e.XMLDocument.xml||l(e.body).html())},"iframe script":function(e){return e&&l.globalEval(l(e[0].body).text())}}})}),!function(){function t(e,t){return function(){return e.apply(t,arguments)}}var e;function i(e){this.el=e,this.dragleave=t(this.dragleave,this),this.dragenter=t(this.dragenter,this),this.supportsEventConstructors()&&(this.first=!1,this.second=!1,this.el.addEventListener("dragenter",this.dragenter,!1),this.el.addEventListener("dragleave",this.dragleave,!1))}i.prototype.dragenter=function(e){return this.first?this.second=!0:(this.first=!0,this.el.dispatchEvent(new CustomEvent("dragster:enter",{bubbles:!0,cancelable:!0,detail:{dataTransfer:e.dataTransfer}})))},i.prototype.dragleave=function(e){if(this.second?this.second=!1:this.first&&(this.first=!1),!this.first&&!this.second)return this.el.dispatchEvent(new CustomEvent("dragster:leave",{bubbles:!0,cancelable:!0,detail:{dataTransfer:e.dataTransfer}}))},i.prototype.removeListeners=function(){return this.el.removeEventListener("dragenter",this.dragenter,!1),this.el.removeEventListener("dragleave",this.dragleave,!1)},i.prototype.supportsEventConstructors=function(){try{new CustomEvent("z")}catch(e){return!1}return!0},i.prototype.reset=function(){return this.first=!1,this.second=!1},e=i,"undefined"==typeof module?window.Dragster=e:module.exports=e}.call(this),!function(){var e;function t(e,t){var n;null==t&&(t=[]),this.options=$.extend({script:null,ajaxQueue:!1,autoUpload:!1,classDragOver:"is-dragover",onUploadingFiles:function(e,t){},onSelectFiles:function(e,t){},onSuccessFile:function(e,t,i){},onComplete:function(e,t){},onFileError:function(e,t){},onFileFail:function(e,t){}},t),this.files=[],$.each($(e),(n=this,function(e,t){var i=$(t),t=i.find("input[type=file]");return i.data("pos",e),t.on("change",function(e){var t=$(e.currentTarget).prop("files");if(n.options.onSelectFiles(t,i),n.files[i.data("pos")]=e.target.files,n.options.autoUpload)return n.submit(i,e.target.files)}),n.initDrag(i)}))}return t.prototype.initDrag=function(t){var i,n,e,o;if(this.isAdvancedUpload())return t.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",(o=this,function(){t.addClass(o.options.classDragOver)})).on("dragleave dragend drop",(e=this,function(){t.removeClass(e.options.classDragOver)})).on("drop",(n=this,function(e){return i=e.originalEvent.dataTransfer.files,n.options.onSelectFiles(i,t),n.options.autoUpload?n.submit(t,i):n.files[t.data("pos")]=i}))},t.prototype.startUpload=function(e){var t=this.files[e.data("pos")];if(t)return this.submit(e,t)},t.prototype.submit=function(i,t){var e,n,o,r,s,a,l,c,u,d;if(i.hasClass("is-uploading"))return!1;for(i.addClass("is-uploading"),u=t.length,d=1,o=i.find("input[type=file]").attr("name"),this.options.onUploadingFiles(d,u),c=[],s=r=0,a=t.length;r<a;s=++r)n=t[s],(l=new FormData).append(o+"[]",n),l.append("position",s),e=this.options.ajaxQueue?$.ajaxQueue:$.ajax,c.push(e({url:this.options.script,type:"POST",data:l,processData:!1,contentType:!1,cache:!1,complete:function(e){return function(){return u+1<=++d?(e.options.onComplete(t,i),e.removeFiles(i),i.removeClass("is-uploading")):e.options.onUploadingFiles(d,u)}}(this),success:function(t){return function(e){t.options.onSuccessFile(n,e,i)}}(this),fail:function(t){return function(e){t.options.onFileFail(e,i)}}(this),error:function(t){return function(e){t.options.onFileError(e,i)}}(this)}));return c},t.prototype.removeFiles=function(e){return this.files[e.data("pos")]=null},t.prototype.isAdvancedUpload=function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},t.prototype.isFormData=function(){return"FormData"in window},t.prototype.isFileReader=function(){return"FileReader"in window},t.prototype.isDraggable=function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},e=t,"undefined"==typeof module?window.Dropzone=e:module.exports=e,e}.call(this),window="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},document=window.document||{},!function(e,t){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(t.jQuery)}(function(w){"use strict";var g=0,a={},l={},C=window.emojione,n=[];function o(e){C?e():n.push(e)}var _,A,r,E="data:image/gif;base64,R0lGODlhAQABAJH/AP///wAAAMDAwAAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",c=[].slice,x="emojionearea",S=0,T="&#8203;";function k(i,e,n){var o=!0,t=1;if(e){e=e.toLowerCase();do{var r=1==t?"@"+e:e;a[i.id][r]&&a[i.id][r].length&&w.each(a[i.id][r],function(e,t){return o=!1!==t.apply(i,n||[])})}while(o&&t--)}return o}function D(i,n,o,r){r=r||function(e,t){return w(t.currentTarget)},w.each(o,function(e,t){e=w.isArray(o)?t:e,(l[i.id][t]||(l[i.id][t]=[])).push([n,e,r])})}function s(e,t,i){var n=C.imageType,o="svg"==n?C.imagePathSVG:C.imagePathPNG,r="",s=(i&&(r=i.substr(1,i.length-2).replace(/_/g," ").replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})),"");return t.uc_base&&4<S?(s=t.uc_base,t=t.uc_output.toUpperCase()):s=t,e=e.replace("{name}",i||"").replace("{friendlyName}",r).replace("{img}",o+(S<2?s.toUpperCase():s)+"."+n).replace("{uni}",t),e=i?e.replace("{alt}",C.shortnameToUnicode(i)):e.replace("{alt}",C.convert(t))}function R(e,i,n){return e.replace(/:?\+?[\w_\-]+:?/g,function(e){e=":"+e.replace(/:$/,"").replace(/^:/,"")+":";var t=C.emojioneList[e];return t?4<S?s(i,t,e):(3<S&&(t=t.unicode),s(i,t[t.length-1],e)):n?"":e})}function O(e){var t,i;if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(i=t.getRangeAt(0)).deleteContents();for(var n,o,r=document.createElement("div"),s=(r.innerHTML=e,document.createDocumentFragment());n=r.firstChild;)o=s.appendChild(n);i.insertNode(s),o&&((i=i.cloneRange()).setStartAfter(o),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}function u(){return window.emojioneVersion||"3.1.2"}function F(e){return"object"==typeof e}function d(e){var t;return e.cacheBustParam?(t=e.cacheBustParam,F(e.jsEscapeMap)?"?v=1.2.4"===t?"2.0.0":"?v=2.0.1"===t?"2.1.0":"?v=2.1.1"===t?"2.1.1":"?v=2.1.2"===t?"2.1.2":"?v=2.1.3"===t?"2.1.3":"?v=2.1.4"===t?"2.1.4":"2.2.7":"1.5.2"):e.emojiVersion}function h(e){switch(e){case"1.5.2":return 0;case"2.0.0":return 1;case"2.1.0":case"2.1.1":return 2;case"2.1.2":return 3;case"2.1.3":case"2.1.4":case"2.2.7":return 4;case"3.0.1":case"3.0.2":case"3.0.3":case"3.0":return 5;default:return 6}}function i(){if(w.fn.emojioneArea&&w.fn.emojioneArea.defaults)return w.fn.emojioneArea.defaults;var e={attributes:{dir:"ltr",spellcheck:!1,autocomplete:"off",autocorrect:"off",autocapitalize:"off"},search:!0,placeholder:null,emojiPlaceholder:":smiley:",searchPlaceholder:"SEARCH",container:null,hideSource:!0,shortnames:!0,sprite:!0,pickerPosition:"top",filtersPosition:"top",searchPosition:"top",hidePickerOnBlur:!0,buttonTitle:"Use the TAB key to insert emoji faster",tones:!0,tonesStyle:"bullet",inline:null,saveEmojisAs:"unicode",shortcuts:!0,autocomplete:!0,autocompleteTones:!1,standalone:!1,useInternalCDN:!0,imageType:"png",recentEmojis:!0,textcomplete:{maxCount:15,placement:null}},t=h(C?d(C):u());return e.filters=4<t?{tones:{title:"Diversity",emoji:"open_hands raised_hands palms_up_together clap pray thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ear nose baby boy girl man woman blond-haired_woman blond-haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer man_police_officer woman_construction_worker man_construction_worker woman_guard man_guard woman_detective man_detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing man_bowing man_tipping_hand woman_tipping_hand man_gesturing_no woman_gesturing_no man_gesturing_ok woman_gesturing_ok man_raising_hand woman_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging man_pouting woman_pouting man_frowning woman_frowning man_getting_haircut woman_getting_haircut man_getting_face_massage woman_getting_face_massage man_in_business_suit_levitating dancer man_dancing woman_walking man_walking woman_running man_running adult child older_adult bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf snowboarder woman_lifting_weights man_lifting_weights woman_cartwheeling man_cartwheeling woman_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball woman_golfing man_golfing woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo man_playing_water_polo woman_rowing_boat man_rowing_boat horse_racing woman_biking man_biking woman_mountain_biking man_mountain_biking woman_juggling man_juggling woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position bath person_in_bed"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning smiley smile grin laughing sweat_smile joy rofl relaxed blush innocent slight_smile upside_down wink relieved crazy_face star_struck heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes yum stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth hugging nerd sunglasses cowboy smirk unamused disappointed pensive worried face_with_raised_eyebrow face_with_monocle confused slight_frown frowning2 persevere confounded tired_face weary triumph angry rage face_with_symbols_over_mouth no_mouth neutral_face expressionless hushed frowning anguished open_mouth astonished dizzy_face exploding_head flushed scream fearful cold_sweat cry disappointed_relieved drooling_face sob sweat sleepy sleeping rolling_eyes thinking shushing_face face_with_hand_over_mouth lying_face grimacing zipper_mouth face_vomiting nauseated_face sneezing_face mask thermometer_face head_bandage smiling_imp imp japanese_ogre japanese_goblin poop ghost skull skull_crossbones alien space_invader robot jack_o_lantern clown smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat open_hands raised_hands palms_up_together clap pray handshake thumbsup thumbsdown punch fist left_facing_fist right_facing_fist fingers_crossed v metal love_you_gesture ok_hand point_left point_right point_up_2 point_down point_up raised_hand raised_back_of_hand hand_splayed vulcan wave call_me muscle middle_finger writing_hand selfie nail_care ring lipstick kiss lips tongue ear nose footprints eye eyes speaking_head bust_in_silhouette busts_in_silhouette baby boy girl man woman blond-haired_woman blond_haired_man older_man older_woman man_with_chinese_cap woman_wearing_turban man_wearing_turban woman_police_officer police_officer woman_construction_worker construction_worker woman_guard guard woman_detective detective woman_health_worker man_health_worker woman_farmer man_farmer woman_cook man_cook woman_student man_student woman_singer man_singer woman_teacher man_teacher woman_factory_worker man_factory_worker woman_technologist man_technologist woman_office_worker man_office_worker woman_mechanic man_mechanic woman_scientist man_scientist woman_artist man_artist woman_firefighter man_firefighter woman_pilot man_pilot woman_astronaut man_astronaut woman_judge man_judge mrs_claus santa princess prince bride_with_veil man_in_tuxedo angel pregnant_woman breast_feeding woman_bowing man_bowing woman_tipping_hand man_tipping_hand woman_gesturing_no man_gesturing_no woman_gesturing_ok man_gesturing_ok woman_raising_hand man_raising_hand woman_facepalming man_facepalming woman_shrugging man_shrugging woman_pouting man_pouting woman_frowning man_frowning woman_getting_haircut man_getting_haircut woman_getting_face_massage man_getting_face_massage man_in_business_suit_levitating dancer man_dancing women_with_bunny_ears_partying men_with_bunny_ears_partying woman_walking man_walking woman_running man_running couple two_women_holding_hands two_men_holding_hands couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg family_woman_boy family_woman_girl family_woman_girl_boy family_woman_boy_boy family_woman_girl_girl family_man_boy family_man_girl family_man_girl_boy family_man_boy_boy family_man_girl_girl bearded_person woman_with_headscarf woman_mage man_mage woman_fairy man_fairy woman_vampire man_vampire mermaid merman woman_elf man_elf woman_genie man_genie woman_zombie man_zombie womans_clothes shirt jeans necktie dress bikini kimono high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat mortar_board crown helmet_with_cross school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses closed_umbrella umbrella2 brain billed_cap scarf gloves coat socks "},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit fox bear panda_face koala tiger lion_face cow pig pig_nose frog monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick duck eagle owl bat wolf boar horse unicorn bee bug butterfly snail shell beetle ant spider spider_web turtle snake lizard scorpion crab squid octopus shrimp tropical_fish fish blowfish dolphin shark whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 deer dromedary_camel camel elephant rhino gorilla racehorse pig2 goat ram sheep dog2 poodle cat2 rooster turkey dove rabbit2 mouse2 rat chipmunk dragon giraffe zebra hedgehog sauropod t_rex cricket dragon_face feet cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf mushroom ear_of_rice bouquet tulip rose wilted_rose sunflower blossom cherry_blossom hibiscus earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face sun_with_face first_quarter_moon_with_face last_quarter_moon_with_face crescent_moon dizzy star star2 sparkles zap fire boom comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud rainbow cloud cloud_rain thunder_cloud_rain cloud_lightning cloud_snow snowman2 snowman snowflake wind_blowing_face dash cloud_tornado fog ocean droplet sweat_drops umbrella "},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple kiwi avocado tomato eggplant cucumber carrot corn hot_pepper potato sweet_potato chestnut peanuts honey_pot croissant bread french_bread cheese egg cooking bacon pancakes fried_shrimp poultry_leg meat_on_bone pizza hotdog hamburger fries stuffed_flatbread taco burrito salad shallow_pan_of_food spaghetti ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard lollipop candy chocolate_bar popcorn doughnut cookie milk baby_bottle coffee tea sake beer beers champagne_glass wine_glass tumbler_glass cocktail tropical_drink champagne spoon fork_and_knife fork_knife_plate dumpling fortune_cookie takeout_box chopsticks bowl_with_spoon cup_with_straw coconut broccoli pie pretzel cut_of_meat sandwich canned_food"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball ping_pong badminton goal hockey field_hockey cricket_game golf bow_and_arrow fishing_pole_and_fish boxing_glove martial_arts_uniform ice_skate ski skier snowboarder woman_lifting_weights man_lifting_weights person_fencing women_wrestling men_wrestling woman_cartwheeling man_cartwheeling woman_bouncing_ball man_bouncing_ball woman_playing_handball man_playing_handball woman_golfing man_golfing woman_surfing man_surfing woman_swimming man_swimming woman_playing_water_polo man_playing_water_polo woman_rowing_boat man_rowing_boat horse_racing woman_biking man_biking woman_mountain_biking man_mountain_biking woman_in_steamy_room man_in_steamy_room woman_climbing man_climbing woman_in_lotus_position man_in_lotus_position running_shirt_with_sash medal military_medal first_place second_place third_place trophy rosette reminder_ribbon ticket tickets circus_tent woman_juggling man_juggling performing_arts art clapper microphone headphones musical_score musical_keyboard drum saxophone trumpet guitar violin game_die dart bowling video_game slot_machine sled curling_stone "},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor scooter bike motor_scooter motorcycle rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train mountain_railway monorail bullettrain_side bullettrain_front light_rail steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving rocket satellite_orbital seat canoe sailboat motorboat speedboat cruise_ship ferry ship anchor construction fuelpump busstop vertical_traffic_light traffic_light map moyai statue_of_liberty fountain tokyo_tower european_castle japanese_castle stadium ferris_wheel roller_coaster carousel_horse beach_umbrella beach island mountain mountain_snow mount_fuji volcano desert camping tent railway_track motorway construction_site factory house house_with_garden homes house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine japan rice_scene park sunrise sunrise_over_mountains stars sparkler fireworks city_sunset city_dusk cityscape night_with_stars milky_way bridge_at_night foggy flying_saucer"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass hourglass_flowing_sand satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer toilet potable_water shower bathtub bath bellhop key key2 door couch bed sleeping_accommodation frame_photo shopping_bags shopping_cart gift balloon flags ribbon confetti_ball tada dolls izakaya_lantern wind_chime envelope envelope_with_arrow incoming_envelope e-mail love_letter inbox_tray outbox_tray package label mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail postbox postal_horn scroll page_with_curl page_facing_up bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend notepad_spiral calendar_spiral calendar date card_index card_box ballot_box file_cabinet clipboard file_folder open_file_folder dividers newspaper2 newspaper notebook notebook_with_decorative_cover ledger closed_book green_book blue_book orange_book books book bookmark link paperclip paperclips triangular_ruler straight_ruler pushpin round_pushpin scissors pen_ballpoint pen_fountain black_nib paintbrush crayon pencil pencil2 mag mag_right lock_with_ink_pen closed_lock_with_key lock unlock"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart orange_heart yellow_heart green_heart blue_heart purple_heart black_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom accept radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs white_flower ideograph_advantage secret congratulations u5408 u6e80 u5272 u7981 a b ab cl o2 sos x o octagonal_sign no_entry name_badge no_entry_sign 100 anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones no_smoking exclamation grey_exclamation question grey_question bangbang interrobang low_brightness high_brightness part_alternation_mark warning children_crossing trident fleur-de-lis beginner recycle white_check_mark u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark globe_with_meridians diamond_shape_with_a_dot_inside m cyclone zzz atm wc wheelchair parking u7a7a sa passport_control customs baggage_claim left_luggage mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko symbols information_source abc abcd capital_abcd ng ok up cool new free zero one two three four five six seven eight nine keycap_ten 1234 hash asterisk arrow_forward pause_button play_pause stop_button record_button eject track_next track_previous fast_forward rewind arrow_double_up arrow_double_down arrow_backward arrow_up_small arrow_down_small arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down twisted_rightwards_arrows repeat repeat_one arrows_counterclockwise arrows_clockwise musical_note notes heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange tm copyright registered wavy_dash curly_loop loop end back on top soon heavy_check_mark ballot_box_with_check radio_button white_circle black_circle red_circle blue_circle small_red_triangle small_red_triangle_down small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond white_square_button black_square_button black_small_square white_small_square black_medium_small_square white_medium_small_square black_medium_square white_medium_square black_large_square white_large_square speaker mute sound loud_sound bell no_bell mega loudspeaker speech_left eye_in_speech_bubble speech_balloon thought_balloon anger_right spades clubs hearts diamonds black_joker flower_playing_cards mahjong clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230"},flags:{icon:"flag_gb",title:"Flags",emoji:"flag_white flag_black checkered_flag triangular_flag_on_post rainbow_flag flag_af flag_ax flag_al flag_dz flag_as flag_ad flag_ao flag_ai flag_aq flag_ag flag_ar flag_am flag_aw flag_au flag_at flag_az flag_bs flag_bh flag_bd flag_bb flag_by flag_be flag_bz flag_bj flag_bm flag_bt flag_bo flag_ba flag_bw flag_br flag_io flag_vg flag_bn flag_bg flag_bf flag_bi flag_kh flag_cm flag_ca flag_ic flag_cv flag_bq flag_ky flag_cf flag_td flag_cl flag_cn flag_cx flag_cc flag_co flag_km flag_cg flag_cd flag_ck flag_cr flag_ci flag_hr flag_cu flag_cw flag_cy flag_cz flag_dk flag_dj flag_dm flag_do flag_ec flag_eg flag_sv flag_gq flag_er flag_ee flag_et flag_eu flag_fk flag_fo flag_fj flag_fi flag_fr flag_gf flag_pf flag_tf flag_ga flag_gm flag_ge flag_de flag_gh flag_gi flag_gr flag_gl flag_gd flag_gp flag_gu flag_gt flag_gg flag_gn flag_gw flag_gy flag_ht flag_hn flag_hk flag_hu flag_is flag_in flag_id flag_ir flag_iq flag_ie flag_im flag_il flag_it flag_jm flag_jp crossed_flags flag_je flag_jo flag_kz flag_ke flag_ki flag_xk flag_kw flag_kg flag_la flag_lv flag_lb flag_ls flag_lr flag_ly flag_li flag_lt flag_lu flag_mo flag_mk flag_mg flag_mw flag_my flag_mv flag_ml flag_mt flag_mh flag_mq flag_mr flag_mu flag_yt flag_mx flag_fm flag_md flag_mc flag_mn flag_me flag_ms flag_ma flag_mz flag_mm flag_na flag_nr flag_np flag_nl flag_nc flag_nz flag_ni flag_ne flag_ng flag_nu flag_nf flag_kp flag_mp flag_no flag_om flag_pk flag_pw flag_ps flag_pa flag_pg flag_py flag_pe flag_ph flag_pn flag_pl flag_pt flag_pr flag_qa flag_re flag_ro flag_ru flag_rw flag_ws flag_sm flag_st flag_sa flag_sn flag_rs flag_sc flag_sl flag_sg flag_sx flag_sk flag_si flag_gs flag_sb flag_so flag_za flag_kr flag_ss flag_es flag_lk flag_bl flag_sh flag_kn flag_lc flag_pm flag_vc flag_sd flag_sr flag_sz flag_se flag_ch flag_sy flag_tw flag_tj flag_tz flag_th flag_tl flag_tg flag_tk flag_to flag_tt flag_tn flag_tr flag_tm flag_tc flag_tv flag_vi flag_ug flag_ua flag_ae flag_gb flag_us flag_uy flag_uz flag_vu flag_va flag_ve flag_vn flag_wf flag_eh flag_ye flag_zm flag_zw flag_ac flag_ta flag_bv flag_hm flag_sj flag_um flag_ea flag_cp flag_dg flag_mf united_nations england scotland wales"}}:{tones:{title:"Diversity",emoji:"santa runner surfer swimmer lifter ear nose point_up_2 point_down point_left point_right punch wave ok_hand thumbsup thumbsdown clap open_hands boy girl man woman cop bride_with_veil person_with_blond_hair man_with_gua_pi_mao man_with_turban older_man grandma baby construction_worker princess angel information_desk_person guardsman dancer nail_care massage haircut muscle spy hand_splayed middle_finger vulcan no_good ok_woman bow raising_hand raised_hands person_frowning person_with_pouting_face pray rowboat bicyclist mountain_bicyclist walking bath metal point_up basketball_player fist raised_hand v writing_hand"},recent:{icon:"clock3",title:"Recent",emoji:""},smileys_people:{icon:"yum",title:"Smileys & People",emoji:"grinning grimacing grin joy smiley smile sweat_smile laughing innocent wink blush slight_smile upside_down relaxed yum relieved heart_eyes kissing_heart kissing kissing_smiling_eyes kissing_closed_eyes stuck_out_tongue_winking_eye stuck_out_tongue_closed_eyes stuck_out_tongue money_mouth nerd sunglasses hugging smirk no_mouth neutral_face expressionless unamused rolling_eyes thinking flushed disappointed worried angry rage pensive confused slight_frown frowning2 persevere confounded tired_face weary triumph open_mouth scream fearful cold_sweat hushed frowning anguished cry disappointed_relieved sleepy sweat sob dizzy_face astonished zipper_mouth mask thermometer_face head_bandage sleeping zzz poop smiling_imp imp japanese_ogre japanese_goblin skull ghost alien robot smiley_cat smile_cat joy_cat heart_eyes_cat smirk_cat kissing_cat scream_cat crying_cat_face pouting_cat raised_hands clap wave thumbsup thumbsdown punch fist v ok_hand raised_hand open_hands muscle pray point_up point_up_2 point_down point_left point_right middle_finger hand_splayed metal vulcan writing_hand nail_care lips tongue ear nose eye eyes bust_in_silhouette busts_in_silhouette speaking_head baby boy girl man woman person_with_blond_hair older_man older_woman man_with_gua_pi_mao man_with_turban cop construction_worker guardsman spy santa angel princess bride_with_veil walking runner dancer dancers couple two_men_holding_hands two_women_holding_hands bow information_desk_person no_good ok_woman raising_hand person_with_pouting_face person_frowning haircut massage couple_with_heart couple_ww couple_mm couplekiss kiss_ww kiss_mm family family_mwg family_mwgb family_mwbb family_mwgg family_wwb family_wwg family_wwgb family_wwbb family_wwgg family_mmb family_mmg family_mmgb family_mmbb family_mmgg womans_clothes shirt jeans necktie dress bikini kimono lipstick kiss footprints high_heel sandal boot mans_shoe athletic_shoe womans_hat tophat helmet_with_cross mortar_board crown school_satchel pouch purse handbag briefcase eyeglasses dark_sunglasses ring closed_umbrella"},animals_nature:{icon:"hamster",title:"Animals & Nature",emoji:"dog cat mouse hamster rabbit bear panda_face koala tiger lion_face cow pig pig_nose frog octopus monkey_face see_no_evil hear_no_evil speak_no_evil monkey chicken penguin bird baby_chick hatching_chick hatched_chick wolf boar horse unicorn bee bug snail beetle ant spider scorpion crab snake turtle tropical_fish fish blowfish dolphin whale whale2 crocodile leopard tiger2 water_buffalo ox cow2 dromedary_camel camel elephant goat ram sheep racehorse pig2 rat mouse2 rooster turkey dove dog2 poodle cat2 rabbit2 chipmunk feet dragon dragon_face cactus christmas_tree evergreen_tree deciduous_tree palm_tree seedling herb shamrock four_leaf_clover bamboo tanabata_tree leaves fallen_leaf maple_leaf ear_of_rice hibiscus sunflower rose tulip blossom cherry_blossom bouquet mushroom chestnut jack_o_lantern shell spider_web earth_americas earth_africa earth_asia full_moon waning_gibbous_moon last_quarter_moon waning_crescent_moon new_moon waxing_crescent_moon first_quarter_moon waxing_gibbous_moon new_moon_with_face full_moon_with_face first_quarter_moon_with_face last_quarter_moon_with_face sun_with_face crescent_moon star star2 dizzy sparkles comet sunny white_sun_small_cloud partly_sunny white_sun_cloud white_sun_rain_cloud cloud cloud_rain thunder_cloud_rain cloud_lightning zap fire boom snowflake cloud_snow snowman2 snowman wind_blowing_face dash cloud_tornado fog umbrella2 umbrella droplet sweat_drops ocean"},food_drink:{icon:"pizza",title:"Food & Drink",emoji:"green_apple apple pear tangerine lemon banana watermelon grapes strawberry melon cherries peach pineapple tomato eggplant hot_pepper corn sweet_potato honey_pot bread cheese poultry_leg meat_on_bone fried_shrimp egg hamburger fries hotdog pizza spaghetti taco burrito ramen stew fish_cake sushi bento curry rice_ball rice rice_cracker oden dango shaved_ice ice_cream icecream cake birthday custard candy lollipop chocolate_bar popcorn doughnut cookie beer beers wine_glass cocktail tropical_drink champagne sake tea coffee baby_bottle fork_and_knife fork_knife_plate"},activity:{icon:"basketball",title:"Activity",emoji:"soccer basketball football baseball tennis volleyball rugby_football 8ball golf golfer ping_pong badminton hockey field_hockey cricket ski skier snowboarder ice_skate bow_and_arrow fishing_pole_and_fish rowboat swimmer surfer bath basketball_player lifter bicyclist mountain_bicyclist horse_racing levitate trophy running_shirt_with_sash medal military_medal reminder_ribbon rosette ticket tickets performing_arts art circus_tent microphone headphones musical_score musical_keyboard saxophone trumpet guitar violin clapper video_game space_invader dart game_die slot_machine bowling"},travel_places:{icon:"rocket",title:"Travel & Places",emoji:"red_car taxi blue_car bus trolleybus race_car police_car ambulance fire_engine minibus truck articulated_lorry tractor motorcycle bike rotating_light oncoming_police_car oncoming_bus oncoming_automobile oncoming_taxi aerial_tramway mountain_cableway suspension_railway railway_car train monorail bullettrain_side bullettrain_front light_rail mountain_railway steam_locomotive train2 metro tram station helicopter airplane_small airplane airplane_departure airplane_arriving sailboat motorboat speedboat ferry cruise_ship rocket satellite_orbital seat anchor construction fuelpump busstop vertical_traffic_light traffic_light checkered_flag ship ferris_wheel roller_coaster carousel_horse construction_site foggy tokyo_tower factory fountain rice_scene mountain mountain_snow mount_fuji volcano japan camping tent park motorway railway_track sunrise sunrise_over_mountains desert beach island city_sunset city_dusk cityscape night_with_stars bridge_at_night milky_way stars sparkler fireworks rainbow homes european_castle japanese_castle stadium statue_of_liberty house house_with_garden house_abandoned office department_store post_office european_post_office hospital bank hotel convenience_store school love_hotel wedding classical_building church mosque synagogue kaaba shinto_shrine"},objects:{icon:"bulb",title:"Objects",emoji:"watch iphone calling computer keyboard desktop printer mouse_three_button trackball joystick compression minidisc floppy_disk cd dvd vhs camera camera_with_flash video_camera movie_camera projector film_frames telephone_receiver telephone pager fax tv radio microphone2 level_slider control_knobs stopwatch timer alarm_clock clock hourglass_flowing_sand hourglass satellite battery electric_plug bulb flashlight candle wastebasket oil money_with_wings dollar yen euro pound moneybag credit_card gem scales wrench hammer hammer_pick tools pick nut_and_bolt gear chains gun bomb knife dagger crossed_swords shield smoking skull_crossbones coffin urn amphora crystal_ball prayer_beads barber alembic telescope microscope hole pill syringe thermometer label bookmark toilet shower bathtub key key2 couch sleeping_accommodation bed door bellhop frame_photo map beach_umbrella moyai shopping_bags balloon flags ribbon gift confetti_ball tada dolls wind_chime crossed_flags izakaya_lantern envelope envelope_with_arrow incoming_envelope e-mail love_letter postbox mailbox_closed mailbox mailbox_with_mail mailbox_with_no_mail package postal_horn inbox_tray outbox_tray scroll page_with_curl bookmark_tabs bar_chart chart_with_upwards_trend chart_with_downwards_trend page_facing_up date calendar calendar_spiral card_index card_box ballot_box file_cabinet clipboard notepad_spiral file_folder open_file_folder dividers newspaper2 newspaper notebook closed_book green_book blue_book orange_book notebook_with_decorative_cover ledger books book link paperclip paperclips scissors triangular_ruler straight_ruler pushpin round_pushpin triangular_flag_on_post flag_white flag_black closed_lock_with_key lock unlock lock_with_ink_pen pen_ballpoint pen_fountain black_nib pencil pencil2 crayon paintbrush mag mag_right"},symbols:{icon:"heartpulse",title:"Symbols",emoji:"heart yellow_heart green_heart blue_heart purple_heart broken_heart heart_exclamation two_hearts revolving_hearts heartbeat heartpulse sparkling_heart cupid gift_heart heart_decoration peace cross star_and_crescent om_symbol wheel_of_dharma star_of_david six_pointed_star menorah yin_yang orthodox_cross place_of_worship ophiuchus aries taurus gemini cancer leo virgo libra scorpius sagittarius capricorn aquarius pisces id atom u7a7a u5272 radioactive biohazard mobile_phone_off vibration_mode u6709 u7121 u7533 u55b6 u6708 eight_pointed_black_star vs accept white_flower ideograph_advantage secret congratulations u5408 u6e80 u7981 a b ab cl o2 sos no_entry name_badge no_entry_sign x o anger hotsprings no_pedestrians do_not_litter no_bicycles non-potable_water underage no_mobile_phones exclamation grey_exclamation question grey_question bangbang interrobang 100 low_brightness high_brightness trident fleur-de-lis part_alternation_mark warning children_crossing beginner recycle u6307 chart sparkle eight_spoked_asterisk negative_squared_cross_mark white_check_mark diamond_shape_with_a_dot_inside cyclone loop globe_with_meridians m atm sa passport_control customs baggage_claim left_luggage wheelchair no_smoking wc parking potable_water mens womens baby_symbol restroom put_litter_in_its_place cinema signal_strength koko ng ok up cool new free zero one two three four five six seven eight nine ten 1234 arrow_forward pause_button play_pause stop_button record_button track_next track_previous fast_forward rewind twisted_rightwards_arrows repeat repeat_one arrow_backward arrow_up_small arrow_down_small arrow_double_up arrow_double_down arrow_right arrow_left arrow_up arrow_down arrow_upper_right arrow_lower_right arrow_lower_left arrow_upper_left arrow_up_down left_right_arrow arrows_counterclockwise arrow_right_hook leftwards_arrow_with_hook arrow_heading_up arrow_heading_down hash asterisk information_source abc abcd capital_abcd symbols musical_note notes wavy_dash curly_loop heavy_check_mark arrows_clockwise heavy_plus_sign heavy_minus_sign heavy_division_sign heavy_multiplication_x heavy_dollar_sign currency_exchange copyright registered tm end back on top soon ballot_box_with_check radio_button white_circle black_circle red_circle large_blue_circle small_orange_diamond small_blue_diamond large_orange_diamond large_blue_diamond small_red_triangle black_small_square white_small_square black_large_square white_large_square small_red_triangle_down black_medium_square white_medium_square black_medium_small_square white_medium_small_square black_square_button white_square_button speaker sound loud_sound mute mega loudspeaker bell no_bell black_joker mahjong spades clubs hearts diamonds flower_playing_cards thought_balloon anger_right speech_balloon clock1 clock2 clock3 clock4 clock5 clock6 clock7 clock8 clock9 clock10 clock11 clock12 clock130 clock230 clock330 clock430 clock530 clock630 clock730 clock830 clock930 clock1030 clock1130 clock1230 eye_in_speech_bubble"},flags:{icon:"flag_gb",title:"Flags",emoji:"ac af al dz ad ao ai ag ar am aw au at az bs bh bd bb by be bz bj bm bt bo ba bw br bn bg bf bi cv kh cm ca ky cf td flag_cl cn co km cg flag_cd cr hr cu cy cz dk dj dm do ec eg sv gq er ee et fk fo fj fi fr pf ga gm ge de gh gi gr gl gd gu gt gn gw gy ht hn hk hu is in flag_id ir iq ie il it ci jm jp je jo kz ke ki xk kw kg la lv lb ls lr ly li lt lu mo mk mg mw my mv ml mt mh mr mu mx fm md mc mn me ms ma mz mm na nr np nl nc nz ni ne flag_ng nu kp no om pk pw ps pa pg py pe ph pl pt pr qa ro ru rw sh kn lc vc ws sm st flag_sa sn rs sc sl sg sk si sb so za kr es lk sd sr sz se ch sy tw tj tz th tl tg to tt tn tr flag_tm flag_tm ug ua ae gb us vi uy uz vu va ve vn wf eh ye zm zw re ax ta io bq cx cc gg im yt nf pn bl pm gs tk bv hm sj um ic ea cp dg as aq vg ck cw eu gf tf gp mq mp sx ss tc "}},e}function L(e){var n,t=i();return e&&e.filters&&(n=t.filters,w.each(e.filters,function(i,e){!F(e)||w.isEmptyObject(e)?delete n[i]:w.each(e,function(e,t){n[i][e]=t})}),e.filters=n),w.extend({},t,e)}function p(e,i){return e.replace(r,function(e){var t=C[0===S?"jsecapeMap":"jsEscapeMap"];return void 0!==e&&e in t?s(i,t[e],C.toShort(e)):e})}function M(e,t){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/(?:\r\n|\r|\n)/g,"\n").replace(/(\n+)/g,"<div>$1</div>").replace(/\n/g,"<br/>").replace(/<br\/><\/div>/g,"</div>"),p(e=t.shortnames?C.shortnameToUnicode(e):e,t.emojiTemplate).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")}function N(e,t){switch(e=e.replace(/&#10;/g,"\n").replace(/&#09;/g,"\t").replace(/<img[^>]*alt="([^"]+)"[^>]*>/gi,"$1").replace(/\n|\r/g,"").replace(/<br[^>]*>/gi,"\n").replace(/(?:<(?:div|p|ol|ul|li|pre|code|object)[^>]*>)+/gi,"<div>").replace(/(?:<\/(?:div|p|ol|ul|li|pre|code|object)>)+/gi,"</div>").replace(/\n<div><\/div>/gi,"\n").replace(/<div><\/div>\n/gi,"\n").replace(/(?:<div>)+<\/div>/gi,"\n").replace(/([^\n])<\/div><div>/gi,"$1\n").replace(/(?:<\/div>)+/gi,"</div>").replace(/([^\n])<\/div>([^\n])/gi,"$1\n$2").replace(/<\/div>/gi,"").replace(/([^\n])<div>/gi,"$1\n").replace(/\n<div>/gi,"\n").replace(/<div>\n/gi,"\n\n").replace(/<(?:[^>]+)?>/g,"").replace(new RegExp(T,"g"),"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x60;/g,"`").replace(/&#60;/g,"<").replace(/&#62;/g,">").replace(/&amp;/g,"&"),t.saveEmojisAs){case"image":e=p(e,t.emojiTemplate);break;case"shortname":e=C.toShort(e)}return e}function $(){var e=this.editor[0].offsetWidth-this.editor[0].clientWidth,t=parseInt(this.button.css("marginRight"));t!==e&&(this.button.css({marginRight:e}),this.floatingPicker&&this.picker.css({right:parseInt(this.picker.css("right"))-t+e}))}function I(){var i,n;!this.sprite&&this.lasyEmoji[0]&&this.lasyEmoji.eq(0).is(".lazy-emoji")&&(i=this.picker.offset().top,n=i+this.picker.height()+20,this.lasyEmoji.each(function(){var e=w(this),t=e.offset().top;if(i<t&&t<n&&e.attr("src",e.data("src")).removeClass("lazy-emoji"),n<t)return!1}),this.lasyEmoji=this.lasyEmoji.filter(".lazy-emoji"))}function P(e,t){return(t?"":".")+x+(e?"-"+e:"")}function G(e){var i=w("<div/>",F(e)?e:{class:P(e,!0)});return w.each(c.call(arguments).slice(1),function(e,t){(t=w.isFunction(t)?t.call(i):t)&&w(t).appendTo(i)}),i}function B(){return localStorage.getItem("recent_emojis")||""}function W(e,t){var i,n,o,r=B();e.recent&&e.recent===r&&!t||(r.length?((i=e.scrollArea.is(".skinnable"))||(n=e.scrollArea.scrollTop(),t&&e.recentCategory.show(),o=e.recentCategory.is(":visible")?e.recentCategory.height():0),t=R(r,e.emojiBtnTemplate,!0).split("|").join(""),e.recentCategory.children(".emojibtn").remove(),w(t).insertAfter(e.recentCategory.children(".emojionearea-category-title")),e.recentCategory.children(".emojibtn").on("click",function(){e.trigger("emojibtn.click",w(this))}),e.recentFilter.show(),i||(e.recentCategory.show(),o!==(t=e.recentCategory.height())&&e.scrollArea.scrollTop(n+t-o))):(e.recentFilter.hasClass("active")&&e.recentFilter.removeClass("active").next().addClass("active"),e.recentCategory.hide(),e.recentFilter.hide()),e.recent=r)}function m(a,t,r){a.options=r=L(r),a.sprite=r.sprite&&S<3,a.inline=null===r.inline?t.is("INPUT"):r.inline,a.shortnames=r.shortnames,a.saveEmojisAs=r.saveEmojisAs,a.standalone=r.standalone,a.emojiTemplate='<img alt="{alt}" class="emojione'+(a.sprite?'-{uni}" src="'+E+'"/>':'emoji" src="{img}"/>'),a.emojiTemplateAlt=a.sprite?'<i class="emojione-{uni}"/>':'<img class="emojioneemoji" src="{img}"/>',a.emojiBtnTemplate='<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}">'+a.emojiTemplateAlt+"</i>",a.recentEmojis=r.recentEmojis&&function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}();var o,i,s,l,c,u,d,h,p,n,e,f=r.pickerPosition,g=(a.floatingPicker="top"===f||"bottom"===f,((a.source=t).is(":disabled")||t.is(".disabled"))&&a.disable(),t.is("TEXTAREA")||t.is("INPUT")?"val":"text"),m=G("tones",r.tones?function(){this.addClass(P("tones-"+r.tonesStyle,!0));for(var e=0;e<=5;e++)this.append(w("<i/>",{class:"btn-tone btn-tone-"+e+(e?"":" active"),"data-skin":e,role:"button"}))}:null),v=G({class:x+(a.standalone?" "+x+"-standalone ":" ")+(t.attr("class")||""),role:"application"},o=a.editor=G("editor").attr({contenteditable:!a.standalone,placeholder:r.placeholder||t.data("placeholder")||t.attr("placeholder")||"",tabindex:0}),i=a.button=G("button",G("button-open"),G("button-close")).attr("title",r.buttonTitle),s=a.picker=G("picker",G("wrapper",l=G("filters"),r.search?e=G("search-panel",G("search",r.search?function(){a.search=w("<input/>",{placeholder:r.searchPlaceholder||"",type:"text",class:"search"}),this.append(a.search)}:null),m):null,p=G("scroll-area",r.tones&&!r.search?G("tones-panel",m):null,u=G("emojis-list")))).addClass(P("picker-position-"+r.pickerPosition,!0)).addClass(P("filters-position-"+r.filtersPosition,!0)).addClass(P("search-position-"+r.searchPosition,!0)).addClass("hidden")),y=(r.search&&e.addClass(P("with-search",!0)),a.searchSel=null,o.data(t.data()),w.each(r.attributes,function(e,t){o.attr(e,t)}),G("category-block").attr({"data-tone":0}).prependTo(u)),b=(w.each(r.filters,function(e,t){var i=0;if("recent"!==e||a.recentEmojis){if("tones"!==e)w("<i/>",{class:P("filter",!0)+" "+P("filter-"+e,!0),"data-filter":e,title:t.title}).wrapInner(R(t.icon,a.emojiTemplateAlt)).appendTo(l);else{if(!r.tones)return;i=5}do{var n=t.emoji.replace(/[\s,;]+/g,"|"),o=0===i?G("category").attr({name:e,"data-tone":i}).appendTo(y):G("category-block").attr({name:e,"data-tone":i}).appendTo(u)}while(0<i&&(o.hide(),n=n.split("|").join("_tone"+i+"|")+"_tone"+i),n=R(n="recent"===e?B():n,a.sprite?'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><i class="emojione-{uni}"></i></i>':'<i class="emojibtn" role="button" data-name="{name}" title="{friendlyName}"><img class="emojioneemoji lazy-emoji" data-src="{img}"/></i>',!0).split("|").join(""),o.html(n),w('<div class="emojionearea-category-title"/>').text(t.title).prependTo(o),0<--i)}}),r.filters=null,a.sprite||(a.lasyEmoji=u.find(".lazy-emoji")),(c=l.find(P("filter"))).eq(0).addClass("active"),h=u.find(P("category-block")),d=u.find(P("category")),a.recentFilter=c.filter('[data-filter="recent"]'),a.recentCategory=d.filter("[name=recent]"),a.scrollArea=p,r.container?w(r.container).wrapInner(v):v.insertAfter(t),r.hideSource&&t.hide(),a.setText(t[g]()),t[g](a.getText()),$.apply(a),a.standalone&&!a.getText().length&&(f=w(t).data("emoji-placeholder")||r.emojiPlaceholder,a.setText(f),o.addClass("has-placeholder")),D(a,u.find(".emojibtn"),{click:"emojibtn.click"}),D(a,window,{resize:"!resize"}),D(a,m.children(),{click:"tone.click"}),D(a,[s,i],{mousedown:"!mousedown"},o),D(a,i,{click:"button.click"}),D(a,o,{paste:"!paste"},o),D(a,o,["focus","blur"],function(){return!a.stayFocused&&o}),D(a,s,{mousedown:"picker.mousedown",mouseup:"picker.mouseup",click:"picker.click",keyup:"picker.keyup",keydown:"picker.keydown",keypress:"picker.keypress"}),D(a,o,["mousedown","mouseup","click","keyup","keydown","keypress"]),D(a,s.find(".emojionearea-filter"),{click:"filter.click"}),D(a,t,{change:"source.change"}),r.search&&D(a,a.search,{keyup:"search.keypress",focus:"search.focus",blur:"search.blur"}),!1);p.on("scroll",function(){var i,n,e;b||(I.call(a),p.is(":not(.skinnable)")&&(i=d.eq(0),n=p.offset().top,d.each(function(e,t){if(10<=w(t).offset().top-n)return!1;i=w(t)}),(e=c.filter('[data-filter="'+i.attr("name")+'"]'))[0]&&!e.is(".active")&&(c.removeClass("active"),e.addClass("active"))))}),a.on("@filter.click",function(e){var t=e.is(".active");if(p.is(".skinnable")){if(t)return;m.children().eq(0).click()}b=!0,t||(c.filter(".active").removeClass("active"),e.addClass("active"));var t=d.filter('[name="'+e.data("filter")+'"]').offset().top,e=p.scrollTop(),i=p.offset().top;p.stop().animate({scrollTop:t+e-i-2},200,"swing",function(){I.call(a),b=!1})}).on("@picker.show",function(){a.recentEmojis&&W(a),I.call(a)}).on("@tone.click",function(e){m.children().removeClass("active");e=e.addClass("active").data("skin");e?(p.addClass("skinnable"),h.hide().filter("[data-tone="+e+"]").show(),c.removeClass("active")):(p.removeClass("skinnable"),h.hide().filter("[data-tone=0]").show(),c.eq(0).click()),I.call(a),r.search&&a.trigger("search.keypress")}).on("@button.click",function(e){e.is(".active")?a.hidePicker():(a.showPicker(),a.searchSel=null)}).on("@!paste",function(r,e){function t(e){var t="caret-"+(new Date).getTime(),i=M(e,a);O(i),O('<i id="'+t+'"></i>'),r.scrollTop(s);var n=(t=w("#"+t)).offset().top-r.offset().top,o=r.height();(o<=s+n||n<s)&&r.scrollTop(s+n-2*o/3),t.remove(),a.stayFocused=!1,$.apply(a),k(a,"paste",[r,e,i])}var i;if(e.originalEvent.clipboardData)return i=e.originalEvent.clipboardData.getData("text/plain"),t(i),e.preventDefault?e.preventDefault():e.stop(),e.returnValue=!1,e.stopPropagation(),!1;a.stayFocused=!0,O("<span>"+T+"</span>");var n=_(r[0]),s=r.scrollTop(),o=w("<div/>",{contenteditable:!0}).css({position:"fixed",left:"-999px",width:"1px",height:"1px",top:"20px",overflow:"hidden"}).appendTo(w("BODY")).focus();window.setTimeout(function(){r.focus(),A(r[0],n);var e=N(o.html().replace(/\r\n|\n|\r/g,"<br>"),a);o.remove(),t(e)},200)}).on("@emojibtn.click",function(e){var t,i,n;o.removeClass("has-placeholder"),null!==a.searchSel&&(o.focus(),A(o[0],a.searchSel),a.searchSel=null),a.standalone?(o.html(R(e.data("name"),a.emojiTemplate)),a.trigger("blur")):(_(o[0]),O(R(e.data("name"),a.emojiTemplate))),a.recentEmojis&&(t=a,e=e.data("name"),i=B().split("|"),-1!==(n=i.indexOf(e))&&i.splice(n,1),i.unshift(e),9<i.length&&i.pop(),localStorage.setItem("recent_emojis",i.join("|")),W(t)),a.trigger("search.keypress")}).on("@!resize @keyup @emojibtn.click",$).on("@!mousedown",function(e,t){return w(t.target).hasClass("search")?(a.stayFocused=!0,null===a.searchSel&&(a.searchSel=_(e[0]))):(v.is(".focused")||e.trigger("focus"),t.preventDefault()),!1}).on("@change",function(){var e=a.editor.html().replace(/<\/?(?:div|span|p)[^>]*>/gi,"");e.length&&!/^<br[^>]*>$/i.test(e)||a.editor.html(a.content=""),t[g](a.getText())}).on("@source.change",function(){a.setText(t[g]()),k("change")}).on("@focus",function(){v.addClass("focused")}).on("@blur",function(){v.removeClass("focused"),r.hidePickerOnBlur&&a.hidePicker();var e=a.editor.html();a.content!==e?(a.content=e,k(a,"change",[a.editor]),t.trigger("blur").trigger("change")):t.trigger("blur"),r.search&&(a.search.val(""),a.trigger("search.keypress",!0))}),r.search&&a.on("@search.focus",function(){a.stayFocused=!0,a.search.addClass("focused")}).on("@search.keypress",function(e){var n=s.find(".emojionearea-filter"),i=r.tones?m.find("i.active").data("skin"):0,o=a.search.val().replace(/ /g,"_").replace(/"/g,'\\"');o&&o.length?(a.recentFilter.hasClass("active")&&a.recentFilter.removeClass("active").next().addClass("active"),a.recentCategory.hide(),a.recentFilter.hide(),h.each(function(){function e(e,t){var i=e.find('.emojibtn[data-name*="'+o+'"]');0===i.length?(e.data("tone")===t&&e.hide(),n.filter('[data-filter="'+e.attr("name")+'"]').hide()):(e.find('.emojibtn:not([data-name*="'+o+'"])').hide(),i.show(),e.data("tone")===t&&e.show(),n.filter('[data-filter="'+e.attr("name")+'"]').show())}var t=w(this);0===t.data("tone")?d.filter(':not([name="recent"])').each(function(){e(w(this),0)}):e(t,i)}),b?I.call(a):p.trigger("scroll")):(W(a,!0),h.filter('[data-tone="'+m.find("i.active").data("skin")+'"]:not([name="recent"])').show(),w(".emojibtn",h).show(),n.show(),I.call(a))}).on("@search.blur",function(){a.stayFocused=!1,a.search.removeClass("focused"),a.trigger("blur")}),r.shortcuts&&a.on("@keydown",function(e,t){t.ctrlKey||(9==t.which?(t.preventDefault(),i.click()):27==t.which&&(t.preventDefault(),i.is(".active")&&a.hidePicker()))}),F(r.events)&&!w.isEmptyObject(r.events)&&w.each(r.events,function(e,t){a.on(e.replace(/_/g,"."),t)}),r.autocomplete&&(n=function(){var e={maxCount:r.textcomplete.maxCount,placement:r.textcomplete.placement},i=(r.shortcuts&&(e.onKeydown=function(e,t){if(!e.ctrlKey&&13==e.which)return t.KEY_ENTER}),w.map(C.emojioneList,function(e,t){return!r.autocompleteTones&&/_tone[12345]/.test(t)?null:t}));i.sort(),o.textcomplete([{id:x,match:/\B(:[\-+\w]*)$/,search:function(t,e){e(w.map(i,function(e){return 0===e.indexOf(t)?e:null}))},template:function(e){return R(e,a.emojiTemplate)+" "+e.replace(/:/g,"")},replace:function(e){return R(e,a.emojiTemplate)},cache:!0,index:1}],e),r.textcomplete.placement&&"static"==w(o.data("textComplete").option.appendTo).css("position")&&w(o.data("textComplete").option.appendTo).css("position","relative")},e=function(){var e;a.disabled?a.on("enabled",e=function(){a.off("enabled",e),n()}):n()},w.fn.textcomplete?e():w.ajax({url:"https://cdn.rawgit.com/yuku-t/jquery-textcomplete/v1.3.4/dist/jquery.textcomplete.js",dataType:"script",cache:!0,success:e})),a.inline&&(v.addClass(P("inline",!0)),a.on("@keydown",function(e,t){13==t.which&&t.preventDefault()})),/firefox/i.test(navigator.userAgent)&&document.execCommand("enableObjectResizing",!1,!1),a.isReady=!0,a.trigger("onLoad",o),a.trigger("ready",o)}window.getSelection&&document.createRange?(_=function(e){var t=window.getSelection&&window.getSelection();if(t&&0<t.rangeCount)return t.getRangeAt(0)},A=function(e,t){var i=document.createRange();i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset),(t=window.getSelection()).removeAllRanges(),t.addRange(i)}):document.selection&&document.body.createTextRange&&(_=function(e){return document.selection.createRange()},A=function(e,t){var i=document.body.createTextRange();i.moveToElementText(e),i.setStart(t.startContanier,t.startOffset),i.setEnd(t.endContainer,t.endOffset),i.select()});var f={defaultBase:"https://cdnjs.cloudflare.com/ajax/libs/emojione/",defaultBase3:"https://cdn.jsdelivr.net/",base:null,isLoading:!1};function v(t){var e,i=u();t=L(t),f.isLoading||(!C||h(d(C))<2?(f.isLoading=!0,e=5<h(i)?f.defaultBase3+"npm/emojione@"+i:4<h(i)?f.defaultBase3+"emojione/"+i:f.defaultBase+"/"+i,w.ajax({url:e+"/lib/js/emojione.min.js",dataType:"script",cache:!0,success:function(){var e;for(C=window.emojione,i=d(C),e=4<(S=h(i))?(f.base=f.defaultBase3+"emojione/assets/"+i,f.base+"/sprites/emojione-sprite-"+C.emojiSize+".css"):(f.base=f.defaultBase+i+"/assets",f.base+"/sprites/emojione.sprites.css"),t.sprite&&(document.createStyleSheet?document.createStyleSheet(e):w("<link/>",{rel:"stylesheet",href:e}).appendTo("head"));n.length;)n.shift().call();f.isLoading=!1}})):(i=d(C),S=h(i),f.base=4<S?f.defaultBase3+"emojione/assets/"+i:f.defaultBase+i+"/assets")),o(function(){var e="";t.useInternalCDN&&(4<S&&(e=C.emojiSize+"/"),C.imagePathPNG=f.base+"/png/"+e,C.imagePathSVG=f.base+"/svg/"+e,C.imagePathSVGSprites=f.base+"/sprites/emojione.sprites.svg",C.imageType=t.imageType),4<h(i)?(r=C.regUnicode,C.imageType=t.imageType||"png"):r=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+C.unicodeRegexp+")","gi")})}function t(e,t){var i=this;v(t),a[i.id=++g]={},l[i.id]={},o(function(){m(i,e,t)})}t.prototype.on=function(e,r){var s;return e&&w.isFunction(r)&&(s=this,w.each(e.toLowerCase().split(" "),function(e,t){var n,o,i;n=s,o=(o=t).replace(/^@/,""),i=n.id,l[i][o]&&(w.each(l[i][o],function(e,i){w.each(w.isArray(i[0])?i[0]:[i[0]],function(e,t){w(t).on(i[1],function(){var e=c.call(arguments),t=w.isFunction(i[2])?i[2].apply(n,[o].concat(e)):i[2];t&&k(n,o,[t].concat(e))})})}),l[i][o]=null),(a[s.id][t]||(a[s.id][t]=[])).push(r)})),this},t.prototype.off=function(e,n){var o;return e&&(o=this.id,w.each(e.toLowerCase().replace(/_/g,".").split(" "),function(e,i){a[o][i]&&!/^@/.test(i)&&(n?w.each(a[o][i],function(e,t){t===n&&a[o][i].splice(e,1)}):a[o][i]=[])})),this},t.prototype.trigger=function(){var e=c.call(arguments),t=[this].concat(e.slice(0,1));return t.push(e.slice(1)),k.apply(this,t)},t.prototype.setFocus=function(){var e=this;return o(function(){e.editor.focus()}),e},t.prototype.setText=function(e){var t=this;return o(function(){t.editor.html(M(e,t)),t.content=t.editor.html(),k(t,"change",[t.editor]),$.apply(t)}),t},t.prototype.getText=function(){return N(this.editor.html(),this)},t.prototype.showPicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.picker.removeClass("hidden"),e._sh_timer=window.setTimeout(function(){e.button.addClass("active")},50),k(e,"picker.show",[e.picker]),e},t.prototype.hidePicker=function(){var e=this;return e._sh_timer&&window.clearTimeout(e._sh_timer),e.button.removeClass("active"),e._sh_timer=window.setTimeout(function(){e.picker.addClass("hidden")},500),k(e,"picker.hide",[e.picker]),e},t.prototype.enable=function(){function e(){t.disabled=!1,t.editor.prop("contenteditable",!0),t.button.show();var e=t[t.standalone?"button":"editor"];e.parent().removeClass("emojionearea-disable"),k(t,"enabled",[e])}var t=this;return t.isReady?e():t.on("ready",e),t},t.prototype.disable=function(){function e(){t.editor.prop("contenteditable",!1),t.hidePicker(),t.button.hide();var e=t[t.standalone?"button":"editor"];e.parent().addClass("emojionearea-disable"),k(t,"disabled",[e])}var t=this;t.disabled=!0;return t.isReady?e():t.on("ready",e),t},w.fn.emojioneArea=function(e){return this.each(function(){return this.emojioneArea||(w.data(this,"emojioneArea",this.emojioneArea=new t(w(this),e)),this.emojioneArea)})},w.fn.emojioneArea.defaults=i(),w.fn.emojioneAreaText=function(e){e=L(e);var t=this,i={shortnames:!e||void 0===e.shortnames||e.shortnames,emojiTemplate:'<img alt="{alt}" class="emojione'+(e&&e.sprite&&S<3?'-{uni}" src="'+E:'emoji" src="{img}')+'"/>'};return v(e),o(function(){t.each(function(){var e=w(this);return e.hasClass("emojionearea-text")||e.addClass("emojionearea-text").html(M(e.is("TEXTAREA")||e.is("INPUT")?e.val():e.text(),i)),e})}),this}},window),!function(u,d){var a,e="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),h=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],p=u.Color=function(e,t,i,n){return new u.Color.fn.parse(e,t,i,n)},f={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:!0},green:{idx:1,type:"byte",empty:!0},blue:{idx:2,type:"byte",empty:!0},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:!0},saturation:{idx:1,type:"percent",empty:!0},lightness:{idx:2,type:"percent",empty:!0}}}},g={byte:{floor:!0,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:!0}},l=f.rgba.props,s=p.support={},m=u.each;function v(e,t,i){var n=g[t.type]||{};return(t.empty||i)&&null==e?null:t.def&&null==e||null==(e=n.floor?~~e:parseFloat(e))||isNaN(e)?t.def:n.mod?(e%=n.mod)<0?n.mod+e:e:n.min>e?n.min:n.max<e?n.max:e}function c(o){var r=p(),s=r._rgba=[];return o=o.toLowerCase(),m(t,function(e,t){var i=t.re.exec(o),i=i&&t.parse(i),t=t.space||"rgba",n=f[t].cache;if(i)return t=r[t](i),r[n]=t[n],s=r._rgba=t._rgba,!1}),0!==s.length?(0===Math.max.apply(Math,s)&&u.extend(s,a.transparent),r):(o=a[o])?o:void 0}function o(e,t,i){return 6*(i=(i+1)%1)<1?e+6*(t-e)*i:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}f.hsla.props.alpha=l.alpha,(p.fn=p.prototype={constructor:p,parse:function(o,e,t,i){if(o===d)return this._rgba=[null,null,null,null],this;(o instanceof u||o.nodeType)&&(o=(o instanceof u?o:u(o)).css(e),e=d);var r=this,n=u.type(o),s=this._rgba=[];return e!==d&&(o=[o,e,t,i],n="array"),"string"===n?this.parse(c(o)||a._default):"array"===n?(m(l,function(e,t){s[t.idx]=v(o[t.idx],t)}),this):"object"===n?(m(f,o instanceof p?function(e,t){o[t.cache]&&(r[t.cache]=o[t.cache].slice())}:function(e,n){m(n.props,function(e,t){var i=n.cache;if(!r[i]&&n.to){if(null==o[e]||"alpha"===e)return;r[i]=n.to(r._rgba)}r[i][t.idx]=v(o[e],t,!0)})}),this):void 0},is:function(e){var o=p(e),r=!0,s=this;return m(f,function(e,t){var i,n=o[t.cache];return n&&(i=s[t.cache]||t.to&&t.to(s._rgba)||[],m(t.props,function(e,t){if(null!=n[t.idx])return r=n[t.idx]===i[t.idx]})),r}),r},_space:function(){var i=[],n=this;return m(f,function(e,t){n[t.cache]&&i.push(e)}),i.pop()},transition:function(e,s){var e=(c=p(e))._space(),t=f[e],a=this[t.cache]||t.to(this._rgba),l=a.slice(),c=c[t.cache];return m(t.props,function(e,t){var i=t.idx,n=a[i],o=c[i],r=g[t.type]||{};null!==o&&(null===n?l[i]=o:(r.mod&&(o-n>r.mod/2?n+=r.mod:n-o>r.mod/2&&(n-=r.mod)),l[t.idx]=v((o-n)*s+n,t)))}),this[e](l)},blend:function(e){if(1===this._rgba[3])return this;var t=this._rgba.slice(),i=t.pop(),n=p(e)._rgba;return p(u.map(t,function(e,t){return(1-i)*n[t]+i*e}))},toRgbaString:function(){var e="rgba(",t=u.map(this._rgba,function(e,t){return null==e?2<t?1:0:e});return 1===t[3]&&(t.pop(),e="rgb("),e+t.join(",")+")"},toHslaString:function(){var e="hsla(",t=u.map(this.hsla(),function(e,t){return null==e&&(e=2<t?1:0),e=t&&t<3?Math.round(100*e)+"%":e});return 1===t[3]&&(t.pop(),e="hsl("),e+t.join(",")+")"},toHexString:function(e){var t=this._rgba.slice(),i=t.pop();return e&&t.push(~~(255*i)),"#"+u.map(t,function(e,t){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}).parse.prototype=p.fn,f.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/255,i=e[1]/255,n=e[2]/255,e=e[3],o=Math.max(t,i,n),r=Math.min(t,i,n),s=o-r,a=o+r,l=.5*a,r=r===o?0:t===o?60*(i-n)/s+360:i===o?60*(n-t)/s+120:60*(t-i)/s+240,o=0==l||1==l?l:l<=.5?s/a:s/(2-a);return[Math.round(r)%360,o,l,null==e?1:e]},f.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],e=e[3],i=n<=.5?n*(1+i):n+i-n*i,n=2*n-i;return[Math.round(255*o(n,i,t+1/3)),Math.round(255*o(n,i,t)),Math.round(255*o(n,i,t-1/3)),e]},m(f,function(a,e){var r=e.props,s=e.cache,l=e.to,c=e.from;p.fn[a]=function(e){if(l&&!this[s]&&(this[s]=l(this._rgba)),e===d)return this[s].slice();var t,i=u.type(e),n="array"===i||"object"===i?e:arguments,o=this[s].slice();return m(r,function(e,t){e=n["object"===i?e:t.idx];null==e&&(e=o[t.idx]),o[t.idx]=v(e,t)}),c?((t=p(c(o)))[s]=o,t):p(o)},m(r,function(r,s){p.fn[r]||(p.fn[r]=function(e){var t=u.type(e),i="alpha"===r?this._hsla?"hsla":"rgba":a,n=this[i](),o=n[s.idx];return"undefined"===t?o:("function"===t&&(e=e.call(this,o),t=u.type(e)),null==e&&s.empty?this:("string"===t&&(t=h.exec(e))&&(e=o+parseFloat(t[2])*("+"===t[1]?1:-1)),n[s.idx]=e,this[i](n)))})})}),m(e,function(e,r){u.cssHooks[r]={set:function(e,t){var i,n,o;if("string"!==u.type(t)||(i=c(t))){if(t=p(i||t),!s.rgba&&1!==t._rgba[3]){for(o="backgroundColor"===r?e.parentNode:e;(""===(n=u.curCSS(o,"backgroundColor"))||"transparent"===n)&&(o=o.parentNode)&&o.style;);t=t.blend(n&&"transparent"!==n?n:"_default")}t=t.toRgbaString()}e.style[r]=t}},u.fx.step[r]=function(e){e.colorInit||(e.start=p(e.elem,r),e.end=p(e.end),e.colorInit=!0),u.cssHooks[r].set(e.elem,e.start.transition(e.end,e.pos))}}),u(function(){var e=document.createElement("div").style;e.cssText="background-color:rgba(1,1,1,.5)",s.rgba=-1<e.backgroundColor.indexOf("rgba")}),a=u.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),!function(Qe){Qe.Jcrop=function(e,t){var v=Qe.extend({},Qe.Jcrop.defaults),$=navigator.userAgent.toLowerCase(),I=/msie/.test($),$=/msie [1-6]\./.test($);function o(e){return Math.round(e)+"px"}function r(e){return v.baseClass+"-"+e}function l(e){e=Qe(e).offset();return[e.left,e.top]}function i(e){return[e.pageX-w[0],e.pageY-w[1]]}function P(e){v=Qe.extend(v,e="object"!=typeof e?{}:e),Qe.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof v[t]&&(v[t]=function(){})})}function G(e,t,i){if(w=l(c),L.setCursor("move"===e?e:e+"-resize"),"move"===e)return L.activateHandlers((n=t,Ve.watchKeys(),function(e){S.moveOffset([e[0]-n[0],e[1]-n[1]]),n=e,F.update()}),j,i);var n,o,r,t=S.getFixed(),s=B(e),a=S.getCorner(B(s));S.setPressed(S.getCorner(s)),S.setCurrent(a),L.activateHandlers((o=e,r=t,function(e){if(v.aspectRatio)switch(o){case"e":case"w":e[1]=r.y+1;break;case"n":case"s":e[0]=r.x+1}else switch(o){case"e":case"w":e[1]=r.y2;break;case"n":case"s":e[0]=r.x2}S.setCurrent(e),F.update()}),j,i)}function B(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function W(t){return function(e){return v.disabled||"move"===t&&!v.allowMove||(w=l(c),n=!0,G(t,i(e)),e.stopPropagation(),e.preventDefault()),!1}}function H(e,t,i){var n=e.width(),o=e.height();i<(o=t<n&&0<t?(n=t)/e.width()*e.height():o)&&0<i&&(n=(o=i)/e.height()*e.width()),y=e.width()/n,b=e.height()/o,e.width(n).height(o)}function V(e){return{x:e.x*y,y:e.y*b,x2:e.x2*y,y2:e.y2*b,w:e.w*y,h:e.h*b}}function j(e){var t=S.getFixed();t.w>v.minSelect[0]&&t.h>v.minSelect[1]?(F.enableHandles(),F.done()):F.release(),L.setCursor(v.allowSelect?"crosshair":"default")}function z(e){if(v.disabled)return!1;if(!v.allowSelect)return!1;n=!0,w=l(c),F.disableHandles(),L.setCursor("crosshair");var t=i(e);return S.setPressed(t),F.update(),L.activateHandlers(U,j,"touch"===e.type.substring(0,5)),Ve.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function U(e){S.setCurrent(e),F.update()}function Y(){var e=Qe("<div></div>").addClass(r("tracker"));return I&&e.css({opacity:0,backgroundColor:"white"}),e}"object"!=typeof e&&(e=Qe(e)[0]),P(t="object"!=typeof t?{}:t);var c,q,K,X,Q,y,b,n,Z,t={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},s=Qe(e),J=!0,h=("IMG"==e.tagName?(0!=s[0].width&&0!=s[0].height?(s.width(s[0].width),s.height(s[0].height)):((He=new Image).src=s[0].src,s.width(He.width),s.height(He.height)),(c=s.clone().removeAttr("id").css(t).show()).width(s.width()),c.height(s.height()),s.after(c).hide()):(c=s.css(t).show(),J=!1,null===v.shade&&(v.shade=!0)),H(c,v.boxWidth,v.boxHeight),c.width()),p=c.height(),a=Qe("<div />").width(h).height(p).addClass(r("holder")).css({position:"relative",backgroundColor:v.bgColor}).insertAfter(s).append(c),u=(v.addClass&&a.addClass(v.addClass),Qe("<div />")),ee=Qe("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),d=Qe("<div />").width("100%").height("100%").css("zIndex",320),f=Qe("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=S.getFixed();v.onDblClick.call(N,e)}).insertBefore(c).append(ee,d),g=(J&&(u=Qe("<img />").attr("src",c.attr("src")).css(t).width(h).height(p),ee.append(u)),$&&f.css({overflowY:"hidden"}),v.boundary),m=Y().width(h+2*g).height(p+2*g).css({position:"absolute",top:o(-g),left:o(-g),zIndex:290}).mousedown(z),te=v.bgColor,ie=v.bgOpacity,w=l(c),C={createDragger:function(t){return function(e){return v.disabled||"move"===t&&!v.allowMove||(w=l(c),n=!0,G(t,i(C.cfilter(e)),!0),e.stopPropagation(),e.preventDefault()),!1}},newSelection:function(e){return z(C.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:ne,support:!0===v.touchSupport||!1===v.touchSupport?v.touchSupport:ne()};function ne(){var e,t={},i=["touchstart","touchmove","touchend"],n=document.createElement("div");try{for(e=0;e<i.length;e++){var o,r=(o="on"+i[e])in n;r||(n.setAttribute(o,"return;"),r="function"==typeof n[o]),t[i[e]]=r}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}x=E=A=_=0;var oe,re,_,A,E,x,S={flipCoords:le,setPressed:function(e){e=ae(e),E=_=e[0],x=A=e[1]},setCurrent:function(e){e=ae(e),oe=e[0]-E,re=e[1]-x,E=e[0],x=e[1]},getOffset:function(){return[oe,re]},moveOffset:function(e){var t=e[0],e=e[1];_+t<0&&(t-=t+_),A+e<0&&(e-=e+A),p<x+e&&(e+=p-(x+e)),h<E+t&&(t+=h-(E+t)),_+=t,E+=t,A+=e,x+=e},getCorner:function(e){var t=se();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}},getFixed:se};function se(){if(!v.aspectRatio)return r=E-_,o=x-A,q&&Math.abs(r)>q&&(E=0<r?_+q:_-q),K&&Math.abs(o)>K&&(x=0<o?A+K:A-K),Q/b&&Math.abs(o)<Q/b&&(x=0<o?A+Q/b:A-Q/b),X/y&&Math.abs(r)<X/y&&(E=0<r?_+X/y:_-X/y),_<0&&(E-=_,_-=_),A<0&&(x-=A,A-=A),E<0&&(_-=E,E-=E),x<0&&(A-=x,x-=x),h<E&&(_-=s=E-h,E-=s),p<x&&(A-=s=x-p,x-=s),h<_&&(x-=s=_-p,A-=s),p<A&&(x-=s=A-p,A-=s),ce(le(_,A,E,x));var e,t,i,n,o=v.aspectRatio,r=v.minSize[0]/y,s=v.maxSize[0]/y,a=v.maxSize[1]/b,l=E-_,c=x-A,u=Math.abs(l),d=Math.abs(c);return 0===s&&(s=10*h),0==a&&0,u/d<o?(t=x,i=d*o,(e=l<0?_-i:i+_)<0?(e=0,n=Math.abs((e-_)/o),t=c<0?A-n:n+A):h<e&&(e=h,n=Math.abs((e-_)/o),t=c<0?A-n:n+A)):(e=E,n=u/o,(t=c<0?A-n:A+n)<0?(t=0,i=Math.abs((t-A)*o),e=l<0?_-i:i+_):p<t&&(t=p,i=Math.abs(t-A)*o,e=l<0?_-i:i+_)),_<e?(e-_<r?e=_+r:s<e-_&&(e=_+s),t=A<t?A+(e-_)/o:A-(e-_)/o):e<_&&(_-e<r?e=_-r:s<_-e&&(e=_-s),t=A<t?A+(_-e)/o:A-(_-e)/o),e<0?(_-=e,e=0):h<e&&(_-=e-h,e=h),t<0?(A-=t,t=0):p<t&&(A-=t-p,t=p),ce(le(_,A,e,t))}function ae(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>h&&(e[0]=h),e[1]>p&&(e[1]=p),[Math.round(e[0]),Math.round(e[1])]}function le(e,t,i,n){var o=e,r=i,s=t,a=n;return i<e&&(o=i,r=e),n<t&&(s=n,a=t),[o,s,r,a]}function ce(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}T=!1,k=Qe("<div />").css({position:"absolute",zIndex:240,opacity:0}),D={top:he(),left:he().height(p),right:he().height(p),bottom:he()};var T,k,D,R={update:ue,updateRaw:de,getShades:ve,setBgColor:fe,enable:pe,disable:ge,resize:function(e,t){D.left.css({height:o(t)}),D.right.css({height:o(t)})},refresh:function(){(v.shade?pe:ge)(),F.isAwake()&&me(v.bgOpacity)},opacity:me};function ue(){return de(S.getFixed())}function de(e){D.top.css({left:o(e.x),width:o(e.w),height:o(e.y)}),D.bottom.css({top:o(e.y2),left:o(e.x),width:o(e.w),height:o(p-e.y2)}),D.right.css({left:o(e.x2),width:o(h-e.x2)}),D.left.css({width:o(e.x)})}function he(){return Qe("<div />").css({position:"absolute",backgroundColor:v.shadeColor||v.bgColor}).appendTo(k)}function pe(){T||(T=!0,k.insertBefore(c),ue(),F.setBgOpacity(1,0,1),u.hide(),fe(v.shadeColor||v.bgColor,1),F.isAwake()?me(v.bgOpacity,1):me(1,1))}function fe(e,t){Ke(ve(),e,t)}function ge(){T&&(k.remove(),u.show(),T=!1,F.isAwake()?F.setBgOpacity(v.bgOpacity,1,1):(F.setBgOpacity(1,1,1),F.disableHandles()),Ke(a,0,1))}function me(e,t){T&&(v.bgFade&&!t?k.animate({opacity:1-e},{queue:!1,duration:v.fadeTime}):k.css({opacity:1-e}))}function ve(){return k.children()}ye=370,be={},we={},_e=!(Ce={}),v.dragEdges&&Qe.isArray(v.createDragbars)&&xe(v.createDragbars),Qe.isArray(v.createHandles)&&Te(v.createHandles),v.drawBorders&&Qe.isArray(v.createBorders)&&Se(v.createBorders),Qe(document).bind("touchstart.jcrop-ios",function(e){Qe(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()}),Ae=Y().mousedown(W("move")).css({cursor:"move",position:"absolute",zIndex:360}),C.support&&Ae.bind("touchstart.jcrop",C.createDragger("move")),ee.append(Ae),Le();var O,ye,be,we,Ce,_e,Ae,F={updateVisible:De,update:Re,release:function(){Le(),f.hide(),v.shade?R.opacity(1):Oe(1),O=!1,v.onRelease.call(N)},refresh:ke,isAwake:function(){return O},setCursor:function(e){Ae.css("cursor",e)},enableHandles:Fe,enableOnly:function(){_e=!0},showHandles:function(){_e&&d.show()},disableHandles:Le,animMode:Me,setBgOpacity:Oe,done:function(){Me(!1),ke()}};function Ee(e,t){t=Qe("<div />").mousedown(W(e)).css({cursor:e+"-resize",position:"absolute",zIndex:t}).addClass("ord-"+e);return C.support&&t.bind("touchstart.jcrop",C.createDragger(e)),d.append(t),t}function xe(e){for(var t=0;t<e.length;t++)Ce[e[t]]=Ee(e[t],ye++).addClass("jcrop-dragbar")}function Se(e){for(var t,i,n=0;n<e.length;n++){switch(e[n]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}be[e[n]]=(i=t,i=Qe("<div />").css({position:"absolute",opacity:v.borderOpacity}).addClass(r(i)),ee.append(i),i)}}function Te(e){for(var t,i,n=0;n<e.length;n++)we[e[n]]=(t=e[n],i=void 0,i=v.handleSize,t=Ee(t,ye++).css({opacity:v.handleOpacity}).addClass(r("handle")),i&&t.width(i).height(i),t)}function ke(){var e=S.getFixed();S.setPressed([e.x,e.y]),S.setCurrent([e.x2,e.y2]),De()}function De(e){if(O)return Re(e)}function Re(e){var t,i,n=S.getFixed();t=n.w,i=n.h,f.width(Math.round(t)).height(Math.round(i)),t=n.x,i=n.y,v.shade||u.css({top:o(-i),left:o(-t)}),f.css({top:o(i),left:o(t)}),v.shade&&R.updateRaw(n),O||(f.show(),v.shade?R.opacity(ie):Oe(ie,!0),O=!0);(e?v.onSelect:v.onChange).call(N,V(n))}function Oe(e,t,i){(O||t)&&(v.bgFade&&!i?c.animate({opacity:e},{queue:!1,duration:v.fadeTime}):c.css("opacity",e))}function Fe(){if(_e=!0,v.allowResize)return d.show(),!0}function Le(){_e=!1,d.hide()}function Me(e){e?(Z=!0,Le()):(Z=!1,Fe())}Ne=function(){},$e=function(){},(Ie=v.trackDocument)||m.mousemove(Pe).mouseup(Ge).mouseout(Ge),c.before(m);var Ne,$e,Ie,L={activateHandlers:function(e,t,i){return n=!0,Ne=e,$e=t,e=i,m.css({zIndex:450}),e?Qe(document).bind("touchmove.jcrop",Be).bind("touchend.jcrop",We):Ie&&Qe(document).bind("mousemove.jcrop",Pe).bind("mouseup.jcrop",Ge),!1},setCursor:function(e){m.css("cursor",e)}};function Pe(e){return Ne(i(e)),!1}function Ge(e){return e.preventDefault(),e.stopPropagation(),n&&(n=!1,$e(i(e)),F.isAwake()&&v.onSelect.call(N,V(S.getFixed())),m.css({zIndex:290}),Qe(document).unbind(".jcrop"),Ne=function(){},$e=function(){}),!1}function Be(e){return Ne(i(C.cfilter(e))),!1}function We(e){return Ge(C.cfilter(e))}M=Qe('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),He=Qe("<div />").css({position:"absolute",overflow:"hidden"}).append(M),v.keySupport&&(M.keydown(function(e){if(e.ctrlKey||e.metaKey)return!0;var t=!!e.shiftKey?10:1;switch(e.keyCode){case 37:je(e,-t,0);break;case 39:je(e,t,0);break;case 38:je(e,0,-t);break;case 40:je(e,0,t);break;case 27:v.allowSelect&&F.release();break;case 9:return!0}return!1}).blur(function(e){M.hide()}),$||!v.fixedSupport?(M.css({position:"absolute",left:"-20px"}),He.append(M).insertBefore(c)):M.insertBefore(c),M.hide());var M,He,Ve={watchKeys:function(){v.keySupport}};function je(e,t,i){v.allowMove&&(S.moveOffset([t,i]),F.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function ze(e){Ue([e[0]/y,e[1]/b,e[2]/y,e[3]/b]),v.onSelect.call(N,V(S.getFixed())),F.enableHandles()}function Ue(e){S.setPressed([e[0],e[1]]),S.setCurrent([e[2],e[3]]),F.update()}function Ye(){v.disabled=!0,F.disableHandles(),F.setCursor("default"),L.setCursor("default")}function qe(){v.disabled=!1,Xe()}function Ke(e,t,i){t=t||v.bgColor;v.bgFade&&Qe.fx.step.hasOwnProperty("backgroundColor")&&v.fadeTime&&!i?e.animate({backgroundColor:t},{queue:!1,duration:v.fadeTime}):e.css("backgroundColor",t)}function Xe(e){v.allowResize?e?F.enableOnly():F.enableHandles():F.disableHandles(),L.setCursor(v.allowSelect?"crosshair":"default"),F.setCursor(v.allowMove?"move":"default"),v.hasOwnProperty("trueSize")&&(y=v.trueSize[0]/h,b=v.trueSize[1]/p),v.hasOwnProperty("setSelect")&&(ze(v.setSelect),F.done(),delete v.setSelect),R.refresh(),v.bgColor!=te&&(Ke(v.shade?R.getShades():a,v.shade&&v.shadeColor||v.bgColor),te=v.bgColor),ie!=v.bgOpacity&&(ie=v.bgOpacity,v.shade?R.refresh():F.setBgOpacity(ie)),q=v.maxSize[0]||0,K=v.maxSize[1]||0,X=v.minSize[0]||0,Q=v.minSize[1]||0,v.hasOwnProperty("outerImage")&&(c.attr("src",v.outerImage),delete v.outerImage),F.refresh()}C.support&&m.bind("touchstart.jcrop",C.newSelection),d.hide(),Xe(!0);var N={setImage:function(o,r){F.release(),Ye();var s=new Image;s.onload=function(){var e=s.width,t=s.height,i=v.boxWidth,n=v.boxHeight;c.width(e).height(t),c.attr("src",o),u.attr("src",o),H(c,i,n),h=c.width(),p=c.height(),u.width(h).height(p),m.width(h+2*g).height(p+2*g),a.width(h).height(p),R.resize(h,p),qe(),"function"==typeof r&&r.call(N)},s.src=o},animateTo:function(e,t){var i,n,o,r,s,a,l,c,u,d,h=e[0]/y,p=e[1]/b,f=e[2]/y,g=e[3]/b;function m(){window.setTimeout(d,o)}Z||(e=S.flipCoords(h,p,f,g),i=[(i=S.getFixed()).x,i.y,i.x2,i.y2],n=i,o=v.animationDelay,r=e[0]-i[0],s=e[1]-i[1],a=e[2]-i[2],l=e[3]-i[3],c=0,u=v.swingSpeed,h=n[0],p=n[1],f=n[2],g=n[3],F.animMode(!0),d=function(){c+=(100-c)/u,n[0]=Math.round(h+c/100*r),n[1]=Math.round(p+c/100*s),n[2]=Math.round(f+c/100*a),n[3]=Math.round(g+c/100*l),(c=99.8<=c?100:c)<100?(Ue(n),m()):(F.done(),F.animMode(!1),"function"==typeof t&&t.call(N))},m())},setSelect:ze,setOptions:function(e){P(e),Xe()},tellSelect:function(){return V(S.getFixed())},tellScaled:function(){return S.getFixed()},setClass:function(e){a.removeClass().addClass(r("holder")).addClass(e)},disable:Ye,enable:qe,cancel:function(){F.done(),L.activateHandlers(null,null)},release:F.release,destroy:function(){a.remove(),s.show(),s.css("visibility","visible"),Qe(e).removeData("Jcrop")},focus:Ve.watchKeys,getBounds:function(){return[h*y,p*b]},getWidgetSize:function(){return[h,p]},getScaleFactor:function(){return[y,b]},getOptions:function(){return v},ui:{holder:a,selection:f}};return I&&a.bind("selectstart",function(){return!1}),s.data("Jcrop",N),N},Qe.fn.Jcrop=function(e,t){var i;return this.each(function(){if(Qe(this).data("Jcrop")){if("api"===e)return Qe(this).data("Jcrop");Qe(this).data("Jcrop").setOptions(e)}else"IMG"==this.tagName?Qe.Jcrop.Loader(this,function(){Qe(this).css({display:"block",visibility:"hidden"}),i=Qe.Jcrop(this,e),Qe.isFunction(t)&&t.call(i)}):(Qe(this).css({display:"block",visibility:"hidden"}),i=Qe.Jcrop(this,e),Qe.isFunction(t)&&t.call(i))}),this},Qe.Jcrop.Loader=function(e,t,i){var n=Qe(e),o=n[0];n.bind("load.jcloader",function e(){o.complete?(n.unbind(".jcloader"),Qe.isFunction(t)&&t.call(o)):window.setTimeout(e,50)}).bind("error.jcloader",function(e){n.unbind(".jcloader"),Qe.isFunction(i)&&i.call(o)}),o.complete&&Qe.isFunction(t)&&(n.unbind(".jcloader"),t.call(o))},Qe.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(d){"use strict";d.extendext=function(){var e,t,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1,u="default";for("boolean"==typeof s&&(c=s,s=arguments[a++]||{}),"string"==typeof s&&(u=d([s.toLowerCase(),"default"]).filter(["default","concat","replace","extend"])[0],s=arguments[a++]||{}),"object"==typeof s||d.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!==(e=arguments[a]))if(d.isArray(e)&&"default"!==u)switch(r=s&&d.isArray(s)?s:[],u){case"concat":s=r.concat(d.extend(c,[],e));break;case"replace":s=d.extend(c,[],e);break;case"extend":e.forEach(function(e,t){var i;"object"==typeof e?(i=d.isArray(e)?[]:{},r[t]=d.extendext(c,u,r[t]||i,e)):-1===r.indexOf(e)&&r.push(e)}),s=r}else for(t in e)i=s[t],s!==(n=e[t])&&(c&&n&&(d.isPlainObject(n)||(o=d.isArray(n)))?(r=o?(o=!1,i&&d.isArray(i)?i:[]):i&&d.isPlainObject(i)?i:{},s[t]=d.extendext(c,u,r,n)):void 0!==n&&(s[t]=n));return s}}),!function(){"use strict";var a={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,encodeHTMLSource:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(i,function(e){return t[e]||e}):""}}},l=function(){return this||(0,eval)("this")}(),c=("undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):l.doT=a,{append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}}),u=/$^/;function d(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}a.template=function(e,t,i){var n,o,r=(t=t||a.templateSettings).append?c.append:c.split,s=0,i=t.use||t.define?function i(o,e,r){return("string"==typeof e?e:e.toString()).replace(o.define||u,function(e,n,t,i){return(n=0===n.indexOf("def.")?n.substring(4):n)in r||(":"===t?(o.defineParams&&i.replace(o.defineParams,function(e,t,i){r[n]={arg:t,text:i}}),n in r||(r[n]=i)):new Function("def","def['"+n+"']="+i)(r)),""}).replace(o.use||u,function(e,t){return o.useParams&&(t=t.replace(o.useParams,function(e,t,i,n){var o;if(r[i]&&r[i].arg&&n)return o=(i+":"+n).replace(/'|\\/g,"_"),r.__exp=r.__exp||{},r.__exp[o]=r[i].text.replace(new RegExp("(^|[^\\w$])"+r[i].arg+"([^\\w$])","g"),"$1"+n+"$2"),t+"def.__exp['"+o+"']"})),(t=new Function("def","return "+t)(r))&&i(o,t,r)})}(t,e,i||{}):e,i=("var out='"+(t.strip?i.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):i).replace(/'|\\/g,"\\$&").replace(t.interpolate||u,function(e,t){return r.start+d(t)+r.end}).replace(t.encode||u,function(e,t){return n=!0,r.startencode+d(t)+r.end}).replace(t.conditional||u,function(e,t,i){return t?i?"';}else if("+d(i)+"){out+='":"';}else{out+='":i?"';if("+d(i)+"){out+='":"';}out+='"}).replace(t.iterate||u,function(e,t,i,n){return t?(s+=1,o=n||"i"+s,t=d(t),"';var arr"+s+"="+t+";if(arr"+s+"){var "+i+","+o+"=-1,l"+s+"=arr"+s+".length-1;while("+o+"<l"+s+"){"+i+"=arr"+s+"["+o+"+=1];out+='"):"';} } out+='"}).replace(t.evaluate||u,function(e,t){return"';"+d(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"");n&&(t.selfcontained||!l||l._encodeHTML||(l._encodeHTML=a.encodeHTMLSource(t.doNotSkipEncoded)),i="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+a.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+i);try{return new Function(t.varname,i)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+i),e}},a.compile=function(e,t){return a.template(e,null,t)}}(),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.agGrid=t():e.agGrid=t()}(this,function(){return i=[function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1);function n(e,t){this.beans={},this.componentsMappedByName={},this.destroyed=!1,e&&e.beans&&(this.contextParams=e,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.setupComponents(),this.createBeans(),e=r.Utils.mapObject(this.beans,function(e){return e.beanInstance}),this.wireBeans(e),this.logger.log(">> ag-Application Context ready - component is alive"))}function o(e,t,i,n,o,r){null===t?console.error("ag-Grid: Autowired name should not be null"):"number"==typeof r?console.error("ag-Grid: Autowired should be on an attribute"):((r=s(e.constructor)).agClassAttributes||(r.agClassAttributes=[]),r.agClassAttributes.push({attributeName:o,beanName:t,optional:i}))}function s(e){return e.hasOwnProperty("__agBeanMetaData")||(e.__agBeanMetaData={}),e.__agBeanMetaData}n.prototype.setupComponents=function(){var t=this;this.contextParams.components&&this.contextParams.components.forEach(function(e){return t.addComponent(e)})},n.prototype.addComponent=function(e){var t=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[t]=e.theClass},n.prototype.createComponent=function(e,t){var e=e.nodeName;return this.componentsMappedByName&&this.componentsMappedByName[e]?(e=new this.componentsMappedByName[e],this.wireBean(e,t),e):null},n.prototype.wireBean=function(e,t){if(!e)throw Error("Can't wire to bean since it is null");this.wireBeans([e],t)},n.prototype.wireBeans=function(e,t){this.autoWireBeans(e),this.methodWireBeans(e),this.preConstruct(e),r.Utils.exists(t)&&e.forEach(t),this.postConstruct(e)},n.prototype.createBeans=function(){var n=this;this.contextParams.beans.forEach(this.createBeanEntry.bind(this)),this.contextParams.overrideBeans&&this.contextParams.overrideBeans.forEach(this.createBeanEntry.bind(this)),r.Utils.iterateObject(this.beans,function(e,t){t.bean.__agBeanMetaData&&t.bean.__agBeanMetaData.autowireMethods&&t.bean.__agBeanMetaData.autowireMethods.agConstructor&&(i=t.bean.__agBeanMetaData.autowireMethods.agConstructor);var i=n.getBeansForParameters(i,t.bean.name),i=function(e,t){t=[null].concat(t);return new(e.bind.apply(e,t))}(t.bean,i);t.beanInstance=i,n.logger.log("bean "+n.getBeanName(i)+" created")})},n.prototype.createBeanEntry=function(e){var t=e.__agBeanMetaData;if(!t)return i=void 0,i=e.prototype.constructor?e.prototype.constructor.name:""+e,void console.error("context item "+i+" is not a bean");var i={bean:e,beanInstance:null,beanName:t.beanName};this.beans[t.beanName]=i},n.prototype.autoWireBeans=function(e){var t=this;e.forEach(function(e){return t.autoWireBean(e)})},n.prototype.methodWireBeans=function(e){var t=this;e.forEach(function(e){if(e)return t.methodWireBean(e);throw Error("Can't wire to bean since it is null")})},n.prototype.autoWireBean=function(n){for(var o=this,r=n,s=this;null!=r;){var e=function(){var e=r.constructor;if(e.__agBeanMetaData&&e.__agBeanMetaData.agClassAttributes){var t=e.__agBeanMetaData.agClassAttributes;if(!t)return{value:void 0};var i=s.getBeanName(e);t.forEach(function(e){var t=o.lookupBeanInstance(i,e.beanName,e.optional);n[e.attributeName]=t})}r=Object.getPrototypeOf(r)?Object.getPrototypeOf(r):null}();if("object"==typeof e)return e.value}},n.prototype.getBeanName=function(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;e=e.toString();return e.substring(9,e.indexOf("("))},n.prototype.methodWireBean=function(n){var e,o=this;n.constructor.__agBeanMetaData&&n.constructor.__agBeanMetaData.autowireMethods&&(e=n.constructor.__agBeanMetaData.autowireMethods),r.Utils.iterateObject(e,function(e,t){var i;"agConstructor"!==e&&(i=o.getBeanName(n.constructor),t=o.getBeansForParameters(t,i),n[e].apply(n,t))})},n.prototype.getBeansForParameters=function(e,i){var n=this,o=[];return e&&r.Utils.iterateObject(e,function(e,t){t=n.lookupBeanInstance(i,t);o[Number(e)]=t}),o},n.prototype.lookupBeanInstance=function(e,t,i){var n;return void 0===i&&(i=!1),"context"===t?this:this.contextParams.seed&&this.contextParams.seed.hasOwnProperty(t)?this.contextParams.seed[t]:(n=this.beans[t])?n.beanInstance:(i||console.error("ag-Grid: unable to find bean reference "+t+" while initialising "+e),null)},n.prototype.postConstruct=function(e){e.forEach(function(t){t.constructor.__agBeanMetaData&&t.constructor.__agBeanMetaData.postConstructMethods&&t.constructor.__agBeanMetaData&&t.constructor.__agBeanMetaData.postConstructMethods.forEach(function(e){return t[e]()})})},n.prototype.preConstruct=function(e){e.forEach(function(t){t.constructor.__agBeanMetaData&&t.constructor.__agBeanMetaData.preConstructMethods&&t.constructor.__agBeanMetaData.preConstructMethods.forEach(function(e){return t[e]()})})},n.prototype.getBean=function(e){return this.lookupBeanInstance("getBean",e,!0)},n.prototype.destroy=function(){this.destroyed||(this.logger.log(">> Shutting down ag-Application Context"),r.Utils.iterateObject(this.beans,function(e,t){var i=t.beanInstance;i.constructor.__agBeanMetaData&&i.constructor.__agBeanMetaData.preDestroyMethods&&i.constructor.__agBeanMetaData.preDestroyMethods.forEach(function(e){return i[e]()})}),this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead"))},t.Context=n,t.PreConstruct=function(e,t,i){(e=s(e.constructor)).postConstructMethods||(e.preConstructMethods=[]),e.preConstructMethods.push(t)},t.PostConstruct=function(e,t,i){(e=s(e.constructor)).postConstructMethods||(e.postConstructMethods=[]),e.postConstructMethods.push(t)},t.PreDestroy=function(e,t,i){(e=s(e.constructor)).preDestroyMethods||(e.preDestroyMethods=[]),e.preDestroyMethods.push(t)},t.Bean=function(t){return function(e){s(e).beanName=t}},t.Autowired=function(n){return function(e,t,i){o(e,n,!1,0,t,null)}},t.Optional=function(n){return function(e,t,i){o(e,n,!0,0,t,null)}},t.Qualifier=function(r){return function(e,t,i){var n,o,e="function"==typeof e?e:e.constructor;"number"==typeof i&&(o=void 0,o=t?(n=s(e),t):(n=s(e),"agConstructor"),n.autowireMethods||(n.autowireMethods={}),n.autowireMethods[o]||(n.autowireMethods[o]={}),n.autowireMethods[o][i]=r)}}},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t(9),i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,r=/([^\s,]+)/g,s="__ag_Grid_Stop_Propagation";function a(){this.timestamp=(new Date).getTime()}a.prototype.print=function(e){var t=(new Date).getTime()-this.timestamp;console.log(e+" = "+t),this.timestamp=(new Date).getTime()},o.Timer=a;var l,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u=/[&<>"']/g,t=(d.doOnce=function(e,t){this.doOnceFlags[t]||(e(),this.doOnceFlags[t]=!0)},d.areEventsNear=function(e,t,i){if(0===i)return!1;var n=Math.abs(e.clientX-t.clientX),e=Math.abs(e.clientY-t.clientY);return Math.max(n,e)<=i},d.shallowCompare=function(e,t){if(this.missing(e)&&this.missing(t))return!0;if(this.missing(e)||this.missing(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},d.getNameOfClass=function(e){e=e.toString(),e=/function (.{1,})\(/.exec(e);return e&&1<e.length?e[1]:""},d.values=function(e){var i=[];return this.iterateObject(e,function(e,t){i.push(t)}),i},d.getValueUsingField=function(e,t,i){if(t&&e){if(i){for(var n=t.split("."),o=e,r=0;r<n.length;r++)if(o=o[n[r]],this.missing(o))return null;return o}return e[t]}},d.getScrollLeft=function(e,t){var i=e.scrollLeft;return t&&(i=Math.abs(i),(this.isBrowserSafari()||this.isBrowserChrome())&&(i=e.scrollWidth-e.clientWidth-i)),i},d.cleanNumber=function(e){return e="number"==typeof(e="string"==typeof e?parseInt(e):e)?Math.floor(e):null},d.setScrollLeft=function(e,t,i){i&&((this.isBrowserSafari()||this.isBrowserChrome())&&(t=e.scrollWidth-e.clientWidth-t),this.isBrowserFirefox()&&(t*=-1)),e.scrollLeft=t},d.iterateNamedNodeMap=function(e,t){if(e)for(var i=0;i<e.length;i++){var n=e[i];t(n.name,n.value)}},d.iterateObject=function(e,i){if(!this.missing(e))if(Array.isArray(e))e.forEach(function(e,t){i(t+"",e)});else for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n],r=e[o];i(o,r)}},d.cloneObject=function(e){for(var t={},i=Object.keys(e),n=0;n<i.length;n++){var o=i[n],r=e[o];t[o]=r}return t},d.map=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=t(e[n]);i.push(o)}return i},d.mapObject=function(e,i){var n=[];return d.iterateObject(e,function(e,t){n.push(i(t))}),n},d.forEach=function(e,t){if(e)for(var i=0;i<e.length;i++)t(e[i],i)},d.filter=function(e,t){var i=[];return e.forEach(function(e){t(e)&&i.push(e)}),i},d.getAllKeysInObjects=function(e){var t={};return e.forEach(function(e){e&&Object.keys(e).forEach(function(e){return t[e]=null})}),Object.keys(t)},d.mergeDeep=function(n,e){this.exists(e)&&this.iterateObject(e,function(e,t){var i=n[e];i!==t&&("object"==typeof i&&"object"==typeof t?d.mergeDeep(i,t):n[e]=t)})},d.assign=function(i){for(var t=this,e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach(function(e){t.exists(e)&&t.iterateObject(e,function(e,t){i[e]=t})}),i},d.parseYyyyMmDdToDate=function(e,t){try{if(!e)return null;if(-1===e.indexOf(t))return null;var i=e.split(t);return 3!=i.length?null:new Date(Number(i[0]),Number(i[1])-1,Number(i[2]))}catch(e){return null}},d.serializeDateToYyyyMmDd=function(e,t){return e?e.getFullYear()+t+d.pad(e.getMonth()+1,2)+t+d.pad(e.getDate(),2):null},d.pad=function(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i},d.pushAll=function(t,e){this.missing(e)||this.missing(t)||e.forEach(function(e){return t.push(e)})},d.createArrayOfNumbers=function(e,t){for(var i=[],n=e;n<=t;n++)i.push(n);return i},d.getFunctionParameters=function(e){e=e.toString().replace(i,""),e=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(r);return null===e?[]:e},d.find=function(e,t,i){if(null==e)return null;var n;if(!Array.isArray(e))return n=this.values(e),this.find(n,t,i);for(var o,r=e,s=0;s<r.length;s++){var a=r[s];if("string"==typeof t){if(a[t]===i){o=a;break}}else if(t(a)){o=a;break}}return o},d.toStrings=function(e){return this.map(e,function(e){return null!=e&&e.toString?e.toString():null})},d.iterateArray=function(e,t){for(var i=0;i<e.length;i++)t(e[i],i)},d.isNode=function(e){return"function"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},d.isElement=function(e){return"function"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},d.isNodeOrElement=function(e){return this.isNode(e)||this.isElement(e)},d.copyNodeList=function(e){for(var t=e?e.length:0,i=[],n=0;n<t;n++)i.push(e[n]);return i},d.isEventFromPrintableCharacter=function(e){var t,i=String.fromCharCode(e.charCode);return!this.isKeyPressed(e,n.Constants.KEY_NEW_LINE)&&(o._.exists(e.key)?(t=1===e.key.length,e=d.isNumpadDelWithNumlockOnForEdgeOrIe(e),t||e):0<=d.PRINTABLE_CHARACTERS.indexOf(i))},d.addChangeListener=function(e,t){e.addEventListener("changed",t),e.addEventListener("paste",t),e.addEventListener("input",t),e.addEventListener("keydown",t),e.addEventListener("keyup",t)},d.makeNull=function(e){return null==e||""===e?null:e},d.missing=function(e){return!this.exists(e)},d.missingOrEmpty=function(e){return this.missing(e)||0===e.length},d.missingOrEmptyObject=function(e){return this.missing(e)||0===Object.keys(e).length},d.exists=function(e){return null!=e&&""!==e},d.firstExistingValue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<e.length;i++){var n=e[i];if(o._.exists(n))return n}return null},d.anyExists=function(e){if(e)for(var t=0;t<e.length;t++)if(this.exists(e[t]))return!0;return!1},d.existsAndNotEmpty=function(e){return this.exists(e)&&0<e.length},d.removeAllChildren=function(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.lastChild)},d.removeElement=function(e,t){this.removeFromParent(e.querySelector(t))},d.removeFromParent=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},d.isVisible=function(e){return null!==e.offsetParent},d.loadTemplate=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},d.appendHtml=function(e,t){e.lastChild?e.insertAdjacentHTML("afterbegin",t):e.innerHTML=t},d.addOrRemoveCssClass=function(e,t,i){i?this.addCssClass(e,t):this.removeCssClass(e,t)},d.callIfPresent=function(e){e&&e()},d.addCssClass=function(t,e){var i,n=this;e&&0!==e.length&&(0<=e.indexOf(" ")?e.split(" ").forEach(function(e){return n.addCssClass(t,e)}):t.classList?t.classList.contains(e)||t.classList.add(e):t.className&&0<t.className.length?(i=t.className.split(" ")).indexOf(e)<0&&(i.push(e),t.className=i.join(" ")):t.className=e)},d.containsClass=function(e,t){var i,n,o;return e.classList?e.classList.contains(t):!!e.className&&(i=e.className===t,n=0<=e.className.indexOf(" "+t+" "),o=0===e.className.indexOf(t+" "),e=e.className.lastIndexOf(" "+t)===e.className.length-t.length-1,i||n||o||e)},d.getElementAttribute=function(e,t){return e.attributes&&e.attributes[t]?e.attributes[t].value:null},d.offsetHeight=function(e){return e&&e.clientHeight?e.clientHeight:0},d.offsetWidth=function(e){return e&&e.clientWidth?e.clientWidth:0},d.sortNumberArray=function(e){e.sort(function(e,t){return e-t})},d.removeCssClass=function(e,t){if(e.classList)e.classList.contains(t)&&e.classList.remove(t);else if(e.className&&0<e.className.length){var i=e.className.split(" ");if(0<=i.indexOf(t)){for(;0<=i.indexOf(t);)i.splice(i.indexOf(t),1);e.className=i.join(" ")}}},d.removeRepeatsFromArray=function(e,t){if(e)for(var i=e.length-2;0<=i;i--){var n=e[i]===t,o=e[i+1]===t;n&&o&&e.splice(i+1,1)}},d.removeFromArray=function(e,t){0<=e.indexOf(t)&&e.splice(e.indexOf(t),1)},d.removeAllFromArray=function(t,e){e.forEach(function(e){0<=t.indexOf(e)&&t.splice(t.indexOf(e),1)})},d.insertIntoArray=function(e,t,i){e.splice(i,0,t)},d.insertArrayIntoArray=function(e,t,i){if(!this.missing(e)&&!this.missing(t))for(var n=t.length-1;0<=n;n--){var o=t[n];this.insertIntoArray(e,o,i)}},d.moveInArray=function(t,e,i){var n=this;e.forEach(function(e){n.removeFromArray(t,e)}),e.slice().reverse().forEach(function(e){n.insertIntoArray(t,e,i)})},d.defaultComparator=function(t,i,e){void 0===e&&(e=!1);var n=null==t,o=null==i;if(t&&t.toNumber&&(t=t.toNumber()),i&&i.toNumber&&(i=i.toNumber()),n&&o)return 0;if(n)return-1;if(o)return 1;if("string"==typeof t){if(!e)return r(t,i);try{return t.localeCompare(i)}catch(e){return r(t,i)}}return t<i?-1:i<t?1:0;function r(e,t){return t<e?1:e<t?-1:0}},d.compareArrays=function(e,t){if(this.missing(e)&&this.missing(t))return!0;if(this.missing(e)||this.missing(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},d.ensureDomOrder=function(e,t,i){i&&i.nextSibling===t||(i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.insertBefore(t,e.firstChild))},d.insertWithDomOrder=function(e,t,i){i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},d.insertTemplateWithDomOrder=function(e,t,i){i=i?(i.insertAdjacentHTML("afterend",t),i.nextSibling):(e.firstChild?e.insertAdjacentHTML("afterbegin",t):e.innerHTML=t,e.firstChild);return i},d.every=function(e,t){if(!e||0===e.length)return!0;for(var i=0;i<e.length;i++)if(!t(e[i]))return!1;return!0},d.toStringOrNull=function(e){return this.exists(e)&&e.toString?e.toString():null},d.formatWidth=function(e){return"number"==typeof e?e+"px":e},d.formatNumberTwoDecimalPlacesAndCommas=function(e){return"number"!=typeof e?"":(Math.round(100*e)/100).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},d.formatNumberCommas=function(e){return"number"!=typeof e?"":e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},d.prependDC=function(e,t){this.exists(e.firstChild)?e.insertBefore(t,e.firstChild):e.appendChild(t)},d.createIcon=function(e,t,i){e=this.createIconNoSpan(e,t,i);return-1<e.className.indexOf("ag-icon")?e:((t=document.createElement("span")).appendChild(e),t)},d.createIconNoSpan=function(e,t,i){if(n=!(n=i&&i.getColDef().icons?i.getColDef().icons[e]:n)&&t.getIcons()?t.getIcons()[e]:n){i=void 0;if("function"==typeof n)i=n();else{if("string"!=typeof n)throw"icon from grid options needs to be a string or a function";i=n}if("string"==typeof i)return this.loadTemplate(i);if(this.isNodeOrElement(i))return i;throw"iconRenderer should return back a string or a dom object"}var t=document.createElement("span"),n=this.iconNameClassMap[e];if(n)return t.setAttribute("class","ag-icon ag-icon-"+n),t;throw new Error(e+" did not find class")},d.addStylesToElement=function(i,n){var o=this;n&&Object.keys(n).forEach(function(e){var t=o.hyphenToCamelCase(e);i.style[t]=n[e]})},d.isHorizontalScrollShowing=function(e){return e.clientWidth<e.scrollWidth},d.isVerticalScrollShowing=function(e){return e.clientHeight<e.scrollHeight},d.getMaxDivHeight=function(){if(!document.body)return-1;var e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=this.loadTemplate("<div/>");for(document.body.appendChild(i);;){var n=2*e;if(i.style.height=n+"px",t<n||i.clientHeight!==n)break;e=n}return document.body.removeChild(i),e},d.getScrollbarWidth=function(){var e=document.createElement("div"),t=(e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e),e.offsetWidth),i=(e.style.overflow="scroll",document.createElement("div")),i=(i.style.width="100%",e.appendChild(i),i.offsetWidth);return e.parentNode.removeChild(e),t-i},d.isKeyPressed=function(e,t){return(e.which||e.keyCode)===t},d.setVisible=function(e,t){this.addOrRemoveCssClass(e,"ag-hidden",!t)},d.setHidden=function(e,t){this.addOrRemoveCssClass(e,"ag-visibility-hidden",t)},d.isBrowserIE=function(){return void 0===this.isIE&&(this.isIE=!!document.documentMode),this.isIE},d.isBrowserEdge=function(){return void 0===this.isEdge&&(this.isEdge=!this.isBrowserIE()&&!!window.StyleMedia),this.isEdge},d.isBrowserSafari=function(){var e;return void 0===this.isSafari&&(e=window,this.isSafari=0<Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")||"[object SafariRemoteNotification]"===(!e.safari||e.safari.pushNotification).toString()),this.isSafari},d.isBrowserChrome=function(){var e;return void 0===this.isChrome&&(e=window,this.isChrome=!!e.chrome&&!!e.chrome.webstore),this.isChrome},d.isBrowserFirefox=function(){var e;return void 0===this.isFirefox&&(e=window,this.isFirefox=void 0!==e.InstallTrigger),this.isFirefox},d.isUserAgentIPad=function(){return void 0===this.isIPad&&(this.isIPad=null!=navigator.userAgent.match(/iPad|iPhone/i)),this.isIPad},d.getTarget=function(e){return e.target||e.srcElement},d.isElementInEventPath=function(e,t){return!(!t||!e)&&0<=o._.getEventPath(t).indexOf(e)},d.createEventPath=function(e){for(var t=[],i=o._.getTarget(e);i;)t.push(i),i=i.parentElement;return t},d.addAgGridEventPath=function(e){e.__agGridEventPath=this.getEventPath(e)},d.getEventPath=function(e){var t=e;return e.deepPath?e.deepPath():t.path||(t.composedPath?t.composedPath():t.__agGridEventPath||this.createEventPath(e))},d.forEachSnapshotFirst=function(e,t){e&&e.slice(0).forEach(t)},d.getBodyWidth=function(){return document.body?document.body.clientWidth:window.innerHeight?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:-1},d.getBodyHeight=function(){return document.body?document.body.clientHeight:window.innerHeight||(document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:-1)},d.setCheckboxState=function(e,t){"boolean"==typeof t?(e.checked=t,e.indeterminate=!1):e.indeterminate=!0},d.traverseNodesWithKey=function(e,n){var o=[];!function i(e){e.forEach(function(e){var t;(e.group||e.hasChildren())&&(o.push(e.key),t=o.join("|"),n(e,t),i(e.childrenAfterGroup),o.pop())})}(e)},d.camelCaseToHyphen=function(e){return null==e?null:e.replace(/([A-Z])/g,function(e){return"-"+e[0].toLowerCase()})},d.hyphenToCamelCase=function(e){return null==e?null:e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},d.cssStyleObjectToMarkup=function(e){var i=this;if(!e)return"";var n=[];return this.iterateObject(e,function(e,t){e=i.camelCaseToHyphen(e);n.push(e+": "+t+";")}),n.join(" ")},d.isNumeric=function(e){return""!==e&&(!isNaN(parseFloat(e))&&isFinite(e))},d.escape=function(e){return null!=e&&e.replace?e.replace(u,function(e){return c[e]}):e},d.normalizeWheel=function(e){var t=0,i=0,n=0,o=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=10*t,o=10*i,"deltaY"in e&&(o=e.deltaY),((n="deltaX"in e?e.deltaX:n)||o)&&e.deltaMode&&(1==e.deltaMode?(n*=40,o*=40):(n*=800,o*=800)),{spinX:t=n&&!t?n<1?-1:1:t,spinY:i=o&&!i?o<1?-1:1:i,pixelX:n,pixelY:o}},d.debounce=function(n,o,r){var s;return void 0===r&&(r=!1),function(){var e=this,t=arguments,i=r&&!s;clearTimeout(s),s=setTimeout(function(){s=null,r||n.apply(e,t)},o),i&&n.apply(e,t)}},d.stopPropagationForAgGrid=function(e){e[s]=!0},d.isStopPropagationForAgGrid=function(e){return!0===e[s]},d.executeInAWhile=function(e){this.executeAfter(e,400)},d.executeNextVMTurn=function(e){this.executeAfter(e,0)},d.executeAfter=function(e,t){0<e.length&&setTimeout(function(){e.forEach(function(e){return e()})},t)},d.referenceCompare=function(e,t){return null==e&&null==t||(null!=e||!t)&&((!e||null!=t)&&e===t)},d.get=function(e,t,i){return null==e?i:-1<t.indexOf(".")?null!=(o=e[(n=t.split("."))[0]])?d.get(o,n.slice(1,n.length).join("."),i):i:null!=(o=e[t])?o:i;var n,o},d.addSafePassiveEventListener=function(e,t,i){e.addEventListener(t,i,-1<d.passiveEvents.indexOf(t)?{passive:!0}:void 0)},d.camelCaseToHumanText=function(e){if(null==e)return null;return e.replace(/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,"$1$4 $2$3$5").replace("."," ").split(" ").map(function(e){return e.substring(0,1).toUpperCase()+(1<e.length?e.substring(1,e.length):"")}).join(" ")},d.message=function(e){var t=document.createElement("div"),e=(t.innerHTML=e,document.querySelector("#__ag__message"));e||(e=this.loadTemplate('<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>'),document.body&&document.body.appendChild(e)),e.appendChild(t)},d.sortRowNodesByOrder=function(e,s){e&&e.sort(function(e,t){var i=s[e.id],n=s[t.id],o=void 0!==i,r=void 0!==n;return o&&r?i-n:!o&&!r?e.id>t.id?1:-1:o?1:-1})},d.fuzzyCheckStrings=function(e,i,t){var n=this,o={},e=e.filter(function(t){return!i.some(function(e){return e===t})});return 0<e.length&&e.forEach(function(e){return o[e]=n.fuzzySuggestions(e,i,t)}),o},d.fuzzySuggestions=function(i,e,t){t=t.slice(0);return t.sort(function(e,t){e=o._.string_similarity(e.toLowerCase(),i.toLowerCase()),t=o._.string_similarity(t.toLowerCase(),i.toLowerCase());return t<e?-1:e===t?0:1}),t},d.get_bigrams=function(e){for(var t,i=e.toLowerCase(),n=new Array(i.length-1),o=t=0,r=n.length;t<=r;o=t+=1)n[o]=i.slice(o,o+2);return n},d.isNumpadDelWithNumlockOnForEdgeOrIe=function(e){return!(!d.isBrowserEdge()&&!d.isBrowserIE())&&(e.key===d.NUMPAD_DEL_NUMLOCK_ON_KEY&&e.charCode===d.NUMPAD_DEL_NUMLOCK_ON_CHARCODE)},d.PRINTABLE_CHARACTERS="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890!\"¬£$%^&*()_+-=[];'#,./\\|<>?:@~{}",d.NUMPAD_DEL_NUMLOCK_ON_KEY="Del",d.NUMPAD_DEL_NUMLOCK_ON_CHARCODE=46,d.doOnceFlags={},d.iconNameClassMap={columnMovePin:"pin",columnMoveAdd:"plus",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"expanded",groupExpanded:"contracted",checkboxChecked:"checkbox-checked",checkboxUnchecked:"checkbox-unchecked",checkboxIndeterminate:"checkbox-indeterminate",checkboxCheckedReadOnly:"checkbox-checked-readonly",checkboxUncheckedReadOnly:"checkbox-unchecked-readonly",checkboxIndeterminateReadOnly:"checkbox-indeterminate-readonly",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"},d.passiveEvents=["touchstart","touchend","touchmove","touchcancel"],d.string_similarity=function(e,t){var i,n,o,r,s,a,l,c;if(0<e.length&&0<t.length){for(a=d.get_bigrams(e),l=d.get_bigrams(t),e=a.length+l.length,n=i=0,r=a.length;n<r;n++)for(c=a[n],o=0,s=l.length;o<s;o++)c===l[o]&&i++;if(0<i)return 2*i/e}return 0},d);function d(){}function h(e,t){void 0===t&&(t=1),this.nextValue=e=void 0===e?0:e,this.step=t}function p(e){this.status=l.IN_PROGRESS,this.resolution=null,this.listOfWaiters=[],e(this.onDone.bind(this),this.onReject.bind(this))}o.Utils=t,h.prototype.next=function(){var e=this.nextValue;return this.nextValue+=this.step,e},h.prototype.peek=function(){return this.nextValue},h.prototype.skip=function(e){this.nextValue+=e},o.NumberSequence=h,o._=t,(t=l=o.PromiseStatus||(o.PromiseStatus={}))[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.RESOLVED=1]="RESOLVED",p.all=function(e){return new p(function(i){var n=[],o=e.length;e.forEach(function(e,t){e.then(function(e){o--,n[t]=e,0==o&&i(n)}),n.push(null)})})},p.resolve=function(t){return new p(function(e){e(t)})},p.external=function(){var t;return{promise:new p(function(e){t=e}),resolve:function(e){t(e)}}},p.prototype.then=function(e){this.status===l.IN_PROGRESS?this.listOfWaiters.push(e):e(this.resolution)},p.prototype.firstOneOnly=function(e){this.status===l.IN_PROGRESS?0===this.listOfWaiters.length&&this.listOfWaiters.push(e):e(this.resolution)},p.prototype.map=function(i){var e=this;return new p(function(t){e.then(function(e){t(i(e))})})},p.prototype.resolveNow=function(e,t){return this.status==l.IN_PROGRESS?e:t(this.resolution)},p.prototype.onDone=function(t){this.status=l.RESOLVED,this.resolution=t,this.listOfWaiters.forEach(function(e){return e(t)})},p.prototype.onReject=function(e){console.warn("TBI")},o.Promise=p},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(3)),a=i(9),l=i(62),c=i(6),u=i(0),d=i(7),h=i(4),p=i(1),f=i(41),g=i(90),m=i(106),v=i(25),i=i(79);function y(e){return!0===e||"true"===e}(b=w).prototype.agWire=function(e,t){this.gridOptions.api=e,this.gridOptions.columnApi=t,this.checkForDeprecated()},w.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null},w.prototype.init=function(){!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties());var e=this.useAsyncEvents();this.eventService.addGlobalListener(this.globalEventHandler.bind(this),e),this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()&&console.warn("ag-Grid: groupSelectsChildren does not work wth suppressParentsInRowNodes, this selection method needs the part in rowNode to work"),this.isGroupSelectsChildren()&&(this.isRowSelectionMulti()||console.warn("ag-Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.isRowModelServerSide()&&console.warn("ag-Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()&&console.warn("ag-Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!")},w.prototype.checkColumnDefProperties=function(){var i=this;null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(e){var e=Object.getOwnPropertyNames(e),t=m.ColDefUtil.ALL_PROPERTIES;i.checkProperties(e,t,t,"colDef","https://www.ag-grid.com/javascript-grid-column-properties/")})},w.prototype.checkGridOptionsProperties=function(){var e=Object.getOwnPropertyNames(this.gridOptions),t=g.PropertyKeys.ALL_PROPERTIES,i=(Object.keys(v.Events).forEach(function(e){return t.push(l.ComponentUtil.getCallbackForEvent(v.Events[e]))}),t.concat("api","columnApi"));this.checkProperties(e,i,t,"gridOptions","https://www.ag-grid.com/javascript-grid-properties/")},w.prototype.checkProperties=function(e,t,i,n,o){var r=p.Utils.fuzzyCheckStrings(e,t,i),e=Object.keys(r);e.forEach(function(e){var t=r[e];console.warn("ag-grid: invalid "+n+" property '"+e+"' did you mean any of these: "+t.slice(0,8).join(","))}),0<e.length&&console.warn("ag-grid: to see all the valid "+n+" properties please check: "+o)},w.prototype.getDomData=function(e,t){e=e[this.domDataKey];if(e)return e[t]},w.prototype.setDomData=function(e,t,i){var n=e[this.domDataKey];p.Utils.missing(n)&&(e[this.domDataKey]=n={}),n[t]=i},w.prototype.isEnterprise=function(){return this.enterprise},w.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},w.prototype.isRowDeselection=function(){return y(this.gridOptions.rowDeselection)},w.prototype.isRowSelectionMulti=function(){return"multiple"===this.gridOptions.rowSelection},w.prototype.isRowMultiSelectWithClick=function(){return y(this.gridOptions.rowMultiSelectWithClick)},w.prototype.getContext=function(){return this.gridOptions.context},w.prototype.isPivotMode=function(){return y(this.gridOptions.pivotMode)},w.prototype.isPivotTotals=function(){return y(this.gridOptions.pivotTotals)},w.prototype.getPivotColumnGroupTotals=function(){return this.gridOptions.pivotColumnGroupTotals},w.prototype.getPivotRowTotals=function(){return this.gridOptions.pivotRowTotals},w.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===a.Constants.ROW_MODEL_TYPE_INFINITE},w.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===a.Constants.ROW_MODEL_TYPE_VIEWPORT},w.prototype.isRowModelServerSide=function(){return this.gridOptions.rowModelType===a.Constants.ROW_MODEL_TYPE_SERVER_SIDE},w.prototype.isRowModelDefault=function(){return p.Utils.missing(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===a.Constants.ROW_MODEL_TYPE_CLIENT_SIDE||this.gridOptions.rowModelType===a.Constants.DEPRECATED_ROW_MODEL_TYPE_NORMAL},w.prototype.isFullRowEdit=function(){return"fullRow"===this.gridOptions.editType},w.prototype.isSuppressFocusAfterRefresh=function(){return y(this.gridOptions.suppressFocusAfterRefresh)},w.prototype.isShowToolPanel=function(){return y(this.gridOptions.showToolPanel)},w.prototype.isToolPanelSuppressValues=function(){return y(this.gridOptions.toolPanelSuppressValues)},w.prototype.isToolPanelSuppressPivots=function(){return y(this.gridOptions.toolPanelSuppressPivots)||this.isTreeData()},w.prototype.isToolPanelSuppressRowGroups=function(){return y(this.gridOptions.toolPanelSuppressRowGroups)||this.isTreeData()},w.prototype.isToolPanelSuppressSideButtons=function(){return y(this.gridOptions.toolPanelSuppressSideButtons)},w.prototype.isToolPanelSuppressPivotMode=function(){return y(this.gridOptions.toolPanelSuppressPivotMode)||this.isTreeData()},w.prototype.isContractColumnSelection=function(){return y(this.gridOptions.contractColumnSelection)},w.prototype.isToolPanelSuppressColumnFilter=function(){return y(this.gridOptions.toolPanelSuppressColumnFilter)},w.prototype.isToolPanelSuppressColumnSelectAll=function(){return y(this.gridOptions.toolPanelSuppressColumnSelectAll)},w.prototype.isToolPanelSuppressColumnExpandAll=function(){return y(this.gridOptions.toolPanelSuppressColumnExpandAll)},w.prototype.isSuppressTouch=function(){return y(this.gridOptions.suppressTouch)},w.prototype.isSuppressRowTransform=function(){return y(this.gridOptions.suppressRowTransform)},w.prototype.useAsyncEvents=function(){return!y(this.gridOptions.suppressAsyncEvents)},w.prototype.isEnableCellChangeFlash=function(){return y(this.gridOptions.enableCellChangeFlash)},w.prototype.isGroupSelectsChildren=function(){var e=y(this.gridOptions.groupSelectsChildren);return e&&this.isTreeData()?(console.warn("ag-Grid: groupSelectsChildren does not work with tree data"),!1):e},w.prototype.isSuppressRowHoverHighlight=function(){return y(this.gridOptions.suppressRowHoverHighlight)},w.prototype.isGroupSelectsFiltered=function(){return y(this.gridOptions.groupSelectsFiltered)},w.prototype.isGroupHideOpenParents=function(){return y(this.gridOptions.groupHideOpenParents)},w.prototype.isGroupMultiAutoColumn=function(){return y(this.gridOptions.groupMultiAutoColumn)||y(this.gridOptions.groupHideOpenParents)},w.prototype.isGroupRemoveSingleChildren=function(){return y(this.gridOptions.groupRemoveSingleChildren)},w.prototype.isGroupRemoveLowestSingleChildren=function(){return y(this.gridOptions.groupRemoveLowestSingleChildren)},w.prototype.isGroupIncludeFooter=function(){return y(this.gridOptions.groupIncludeFooter)},w.prototype.isGroupIncludeTotalFooter=function(){return y(this.gridOptions.groupIncludeTotalFooter)},w.prototype.isGroupSuppressBlankHeader=function(){return y(this.gridOptions.groupSuppressBlankHeader)},w.prototype.isSuppressRowClickSelection=function(){return y(this.gridOptions.suppressRowClickSelection)},w.prototype.isSuppressCellSelection=function(){return y(this.gridOptions.suppressCellSelection)},w.prototype.isSuppressMultiSort=function(){return y(this.gridOptions.suppressMultiSort)},w.prototype.isMultiSortKeyCtrl=function(){return"ctrl"===this.gridOptions.multiSortKey},w.prototype.isGroupSuppressAutoColumn=function(){return y(this.gridOptions.groupSuppressAutoColumn)},w.prototype.isSuppressDragLeaveHidesColumns=function(){return y(this.gridOptions.suppressDragLeaveHidesColumns)},w.prototype.isSuppressScrollOnNewData=function(){return y(this.gridOptions.suppressScrollOnNewData)},w.prototype.isRowDragManaged=function(){return y(this.gridOptions.rowDragManaged)},w.prototype.isSuppressRowDrag=function(){return y(this.gridOptions.suppressRowDrag)},w.prototype.isGridAutoHeight=function(){return y(this.gridOptions.gridAutoHeight)},w.prototype.isSuppressHorizontalScroll=function(){return y(this.gridOptions.suppressHorizontalScroll)},w.prototype.isSuppressLoadingOverlay=function(){return y(this.gridOptions.suppressLoadingOverlay)},w.prototype.isSuppressNoRowsOverlay=function(){return y(this.gridOptions.suppressNoRowsOverlay)},w.prototype.isSuppressFieldDotNotation=function(){return y(this.gridOptions.suppressFieldDotNotation)},w.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData},w.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData},w.prototype.isFunctionsPassive=function(){return y(this.gridOptions.functionsPassive)},w.prototype.isSuppressTabbing=function(){return y(this.gridOptions.suppressTabbing)},w.prototype.isSuppressChangeDetection=function(){return y(this.gridOptions.suppressChangeDetection)},w.prototype.isSuppressAnimationFrame=function(){return y(this.gridOptions.suppressAnimationFrame)},w.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText},w.prototype.isCacheQuickFilter=function(){return y(this.gridOptions.cacheQuickFilter)},w.prototype.isUnSortIcon=function(){return y(this.gridOptions.unSortIcon)},w.prototype.isSuppressMenuHide=function(){return y(this.gridOptions.suppressMenuHide)},w.prototype.isEnterMovesDownAfterEdit=function(){return y(this.gridOptions.enterMovesDownAfterEdit)},w.prototype.isEnterMovesDown=function(){return y(this.gridOptions.enterMovesDown)},w.prototype.getRowStyle=function(){return this.gridOptions.rowStyle},w.prototype.getRowClass=function(){return this.gridOptions.rowClass},w.prototype.getRowStyleFunc=function(){return this.gridOptions.getRowStyle},w.prototype.getRowClassFunc=function(){return this.gridOptions.getRowClass},w.prototype.rowClassRules=function(){return this.gridOptions.rowClassRules},w.prototype.getPopupParent=function(){return this.gridOptions.popupParent},w.prototype.getPostProcessPopupFunc=function(){return this.gridOptions.postProcessPopup},w.prototype.getDoesDataFlowerFunc=function(){return this.gridOptions.doesDataFlower},w.prototype.getPaginationNumberFormatterFunc=function(){return this.gridOptions.paginationNumberFormatter},w.prototype.getChildCountFunc=function(){return this.gridOptions.getChildCount},w.prototype.getDefaultGroupSortComparator=function(){return this.gridOptions.defaultGroupSortComparator},w.prototype.getIsFullWidthCellFunc=function(){return this.gridOptions.isFullWidthCell},w.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams},w.prototype.isEmbedFullWidthRows=function(){return y(this.gridOptions.embedFullWidthRows)},w.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode},w.prototype.getApi=function(){return this.gridOptions.api},w.prototype.getColumnApi=function(){return this.gridOptions.columnApi},w.prototype.isDeltaRowDataMode=function(){return y(this.gridOptions.deltaRowDataMode)},w.prototype.isEnsureDomOrder=function(){return y(this.gridOptions.ensureDomOrder)},w.prototype.isEnableColResize=function(){return y(this.gridOptions.enableColResize)},w.prototype.isSingleClickEdit=function(){return y(this.gridOptions.singleClickEdit)},w.prototype.isSuppressClickEdit=function(){return y(this.gridOptions.suppressClickEdit)},w.prototype.isStopEditingWhenGridLosesFocus=function(){return y(this.gridOptions.stopEditingWhenGridLosesFocus)},w.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded},w.prototype.getMaxConcurrentDatasourceRequests=function(){return this.gridOptions.maxConcurrentDatasourceRequests},w.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache},w.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize},w.prototype.getPaginationPageSize=function(){return this.gridOptions.paginationPageSize},w.prototype.getCacheBlockSize=function(){return this.gridOptions.cacheBlockSize},w.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount},w.prototype.isPurgeClosedRowNodes=function(){return y(this.gridOptions.purgeClosedRowNodes)},w.prototype.isSuppressPaginationPanel=function(){return y(this.gridOptions.suppressPaginationPanel)},w.prototype.getRowData=function(){return this.gridOptions.rowData},w.prototype.isGroupUseEntireRow=function(){return y(this.gridOptions.groupUseEntireRow)},w.prototype.isEnableRtl=function(){return y(this.gridOptions.enableRtl)},w.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef},w.prototype.isGroupSuppressRow=function(){return y(this.gridOptions.groupSuppressRow)},w.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow},w.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow},w.prototype.isAngularCompileRows=function(){return y(this.gridOptions.angularCompileRows)},w.prototype.isAngularCompileFilters=function(){return y(this.gridOptions.angularCompileFilters)},w.prototype.isAngularCompileHeaders=function(){return y(this.gridOptions.angularCompileHeaders)},w.prototype.isDebug=function(){return y(this.gridOptions.debug)},w.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs},w.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes},w.prototype.getDatasource=function(){return this.gridOptions.datasource},w.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource},w.prototype.getServerSideDatasource=function(){return this.gridOptions.serverSideDatasource},w.prototype.isEnableSorting=function(){return y(this.gridOptions.enableSorting)||y(this.gridOptions.enableServerSideSorting)},w.prototype.isAccentedSort=function(){return y(this.gridOptions.accentedSort)},w.prototype.isEnableCellExpressions=function(){return y(this.gridOptions.enableCellExpressions)},w.prototype.isEnableGroupEdit=function(){return y(this.gridOptions.enableGroupEdit)},w.prototype.isSuppressMiddleClickScrolls=function(){return y(this.gridOptions.suppressMiddleClickScrolls)},w.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return y(this.gridOptions.suppressPreventDefaultOnMouseWheel)},w.prototype.isSuppressColumnVirtualisation=function(){return y(this.gridOptions.suppressColumnVirtualisation)},w.prototype.isSuppressContextMenu=function(){return y(this.gridOptions.suppressContextMenu)},w.prototype.isAllowContextMenuWithControlKey=function(){return y(this.gridOptions.allowContextMenuWithControlKey)},w.prototype.isSuppressCopyRowsToClipboard=function(){return y(this.gridOptions.suppressCopyRowsToClipboard)},w.prototype.isSuppressClipboardPaste=function(){return y(this.gridOptions.suppressClipboardPaste)},w.prototype.isEnableFilter=function(){return y(this.gridOptions.enableFilter)||y(this.gridOptions.enableServerSideFilter)},w.prototype.isPagination=function(){return y(this.gridOptions.pagination)},w.prototype.isSuppressEnterpriseResetOnNewColumns=function(){return y(this.gridOptions.suppressEnterpriseResetOnNewColumns)},w.prototype.getProcessDataFromClipboardFunc=function(){return this.gridOptions.processDataFromClipboard},w.prototype.getBatchUpdateWaitMillis=function(){return p.Utils.exists(this.gridOptions.batchUpdateWaitMillis)?this.gridOptions.batchUpdateWaitMillis:a.Constants.BATCH_WAIT_MILLIS},w.prototype.isEnableServerSideFilter=function(){return this.gridOptions.enableServerSideFilter},w.prototype.isEnableServerSideSorting=function(){return y(this.gridOptions.enableServerSideSorting)},w.prototype.isSuppressMovableColumns=function(){return y(this.gridOptions.suppressMovableColumns)},w.prototype.isAnimateRows=function(){return!this.isEnsureDomOrder()&&y(this.gridOptions.animateRows)},w.prototype.isSuppressColumnMoveAnimation=function(){return y(this.gridOptions.suppressColumnMoveAnimation)},w.prototype.isSuppressAggFuncInHeader=function(){return y(this.gridOptions.suppressAggFuncInHeader)},w.prototype.isSuppressAggAtRootLevel=function(){return y(this.gridOptions.suppressAggAtRootLevel)},w.prototype.isEnableRangeSelection=function(){return y(this.gridOptions.enableRangeSelection)},w.prototype.isSuppressMultiRangeSelection=function(){return y(this.gridOptions.suppressMultiRangeSelection)},w.prototype.isPaginationAutoPageSize=function(){return y(this.gridOptions.paginationAutoPageSize)},w.prototype.isRememberGroupStateWhenNewData=function(){return y(this.gridOptions.rememberGroupStateWhenNewData)},w.prototype.getIcons=function(){return this.gridOptions.icons},w.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs},w.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder},w.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids},w.prototype.isMasterDetail=function(){var e=this,t=y(this.gridOptions.masterDetail);return p.Utils.doOnce(function(){t&&!e.enterprise&&console.warn("ag-grid: Master Detail is an Enterprise feature of ag-Grid.")},"MasterDetailEnterpriseCheck"),t&&this.enterprise},w.prototype.getIsRowMasterFunc=function(){return this.gridOptions.isRowMaster},w.prototype.getIsRowSelectableFunc=function(){return this.gridOptions.isRowSelectable},w.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams},w.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate},w.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate},w.prototype.isSuppressAutoSize=function(){return y(this.gridOptions.suppressAutoSize)},w.prototype.isSuppressParentsInRowNodes=function(){return y(this.gridOptions.suppressParentsInRowNodes)},w.prototype.isEnableStatusBar=function(){return y(this.gridOptions.enableStatusBar)},w.prototype.isAlwaysShowStatusBar=function(){return y(this.gridOptions.alwaysShowStatusBar)},w.prototype.isFunctionsReadOnly=function(){return y(this.gridOptions.functionsReadOnly)},w.prototype.isFloatingFilter=function(){return this.gridOptions.floatingFilter},w.prototype.isEnableOldSetFilterModel=function(){return y(this.gridOptions.enableOldSetFilterModel)},w.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef},w.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef},w.prototype.getDefaultExportParams=function(){return this.gridOptions.defaultExportParams},w.prototype.isSuppressCsvExport=function(){return y(this.gridOptions.suppressCsvExport)},w.prototype.isSuppressExcelExport=function(){return y(this.gridOptions.suppressExcelExport)},w.prototype.isSuppressMakeColumnVisibleAfterUnGroup=function(){return y(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup)},w.prototype.getNodeChildDetailsFunc=function(){return this.gridOptions.getNodeChildDetails},w.prototype.getDataPathFunc=function(){return this.gridOptions.getDataPath},w.prototype.getGroupRowAggNodesFunc=function(){return this.gridOptions.groupRowAggNodes},w.prototype.getContextMenuItemsFunc=function(){return this.gridOptions.getContextMenuItems},w.prototype.getMainMenuItemsFunc=function(){return this.gridOptions.getMainMenuItems},w.prototype.getRowNodeIdFunc=function(){return this.gridOptions.getRowNodeId},w.prototype.getNavigateToNextCellFunc=function(){return this.gridOptions.navigateToNextCell},w.prototype.getTabToNextCellFunc=function(){return this.gridOptions.tabToNextCell},w.prototype.isTreeData=function(){return y(this.gridOptions.treeData)},w.prototype.isValueCache=function(){return y(this.gridOptions.valueCache)},w.prototype.isValueCacheNeverExpires=function(){return y(this.gridOptions.valueCacheNeverExpires)},w.prototype.isAggregateOnlyChangedColumns=function(){return y(this.gridOptions.aggregateOnlyChangedColumns)},w.prototype.getProcessSecondaryColDefFunc=function(){return this.gridOptions.processSecondaryColDef},w.prototype.getProcessSecondaryColGroupDefFunc=function(){return this.gridOptions.processSecondaryColGroupDef},w.prototype.getSendToClipboardFunc=function(){return this.gridOptions.sendToClipboard},w.prototype.getProcessRowPostCreateFunc=function(){return this.gridOptions.processRowPostCreate},w.prototype.getProcessCellForClipboardFunc=function(){return this.gridOptions.processCellForClipboard},w.prototype.getProcessHeaderForClipboardFunc=function(){return this.gridOptions.processHeaderForClipboard},w.prototype.getProcessCellFromClipboardFunc=function(){return this.gridOptions.processCellFromClipboard},w.prototype.getViewportRowModelPageSize=function(){return e=this.gridOptions.viewportRowModelPageSize,t=5,0<e?e:t;var e,t},w.prototype.getViewportRowModelBufferSize=function(){return e=this.gridOptions.viewportRowModelBufferSize,t=5,0<=e?e:t;var e,t},w.prototype.getPostSortFunc=function(){return this.gridOptions.postSort},w.prototype.getClipboardDeliminator=function(){return p.Utils.exists(this.gridOptions.clipboardDeliminator)?this.gridOptions.clipboardDeliminator:"\t"},w.prototype.setProperty=function(e,t){var i=this.gridOptions,n=i[e];n!==t&&(i[e]=t,this.propertyEventService.dispatchEvent({type:e,currentValue:t,previousValue:n}))},w.prototype.addEventListener=function(e,t){b.checkEventDeprecation(e),this.propertyEventService.addEventListener(e,t)},w.checkEventDeprecation=function(e){e===v.Events.DEPRECATED_EVENT_GRID_SIZE_CHANGED&&console.warn("ag-Grid: Since ag-Grid v18 event "+v.Events.DEPRECATED_EVENT_GRID_SIZE_CHANGED+" no longer exists."),"floatingRowDataChanged"===e&&console.warn("ag-Grid: floatingRowDataChanged is now called pinnedRowDataChanged")},w.prototype.removeEventListener=function(e,t){this.propertyEventService.removeEventListener(e,t)},w.prototype.getAutoSizePadding=function(){return 0<this.gridOptions.autoSizePadding?this.gridOptions.autoSizePadding:20},w.prototype.getHeaderHeight=function(){return"number"==typeof this.gridOptions.headerHeight?this.gridOptions.headerHeight:this.specialForNewMaterial(25,"headerHeight")},w.prototype.getFloatingFiltersHeight=function(){return"number"==typeof this.gridOptions.floatingFiltersHeight?this.gridOptions.floatingFiltersHeight:this.specialForNewMaterial(25,"headerHeight")},w.prototype.getGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.groupHeaderHeight?this.gridOptions.groupHeaderHeight:this.getHeaderHeight()},w.prototype.getPivotHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotHeaderHeight?this.gridOptions.pivotHeaderHeight:this.getHeaderHeight()},w.prototype.getPivotGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotGroupHeaderHeight?this.gridOptions.pivotGroupHeaderHeight:this.getGroupHeaderHeight()},w.prototype.isExternalFilterPresent=function(){return"function"==typeof this.gridOptions.isExternalFilterPresent&&this.gridOptions.isExternalFilterPresent()},w.prototype.doesExternalFilterPass=function(e){return"function"==typeof this.gridOptions.doesExternalFilterPass&&this.gridOptions.doesExternalFilterPass(e)},w.prototype.getDocument=function(){var e;return p.Utils.exists(this.gridOptions.getDocument)&&(e=this.gridOptions.getDocument()),p.Utils.exists(e)?e:document},w.prototype.getLayoutInterval=function(){return"number"==typeof this.gridOptions.layoutInterval?this.gridOptions.layoutInterval:a.Constants.LAYOUT_INTERVAL},w.prototype.getMinColWidth=function(){return this.gridOptions.minColWidth>b.MIN_COL_WIDTH?this.gridOptions.minColWidth:b.MIN_COL_WIDTH},w.prototype.getMaxColWidth=function(){return this.gridOptions.maxColWidth>b.MIN_COL_WIDTH?this.gridOptions.maxColWidth:null},w.prototype.getColWidth=function(){return"number"!=typeof this.gridOptions.colWidth||this.gridOptions.colWidth<b.MIN_COL_WIDTH?200:this.gridOptions.colWidth},w.prototype.getRowBuffer=function(){return"number"==typeof this.gridOptions.rowBuffer?(this.gridOptions.rowBuffer<0&&console.warn("ag-Grid: rowBuffer should not be negative"),this.gridOptions.rowBuffer):a.Constants.ROW_BUFFER_SIZE},w.prototype.getScrollbarWidth=function(){var e=this.gridOptions.scrollbarWidth;return e="number"!=typeof e||e<0?p.Utils.getScrollbarWidth():e},w.prototype.checkForDeprecated=function(){var e=this.gridOptions;e.suppressUnSort&&console.warn("ag-grid: as of v1.12.4 suppressUnSort is not used. Please use sortingOrder instead."),e.suppressDescSort&&console.warn("ag-grid: as of v1.12.4 suppressDescSort is not used. Please use sortingOrder instead."),e.groupAggFields&&console.warn("ag-grid: as of v3 groupAggFields is not used. Please add appropriate agg fields to your columns."),e.groupHidePivotColumns&&console.warn("ag-grid: as of v3 groupHidePivotColumns is not used as pivot columns are now called rowGroup columns. Please refer to the documentation"),e.groupKeys&&console.warn("ag-grid: as of v3 groupKeys is not used. You need to set rowGroupIndex on the columns to group. Please refer to the documentation"),"boolean"==typeof e.groupDefaultExpanded&&console.warn("ag-grid: groupDefaultExpanded can no longer be boolean. for groupDefaultExpanded=true, use groupDefaultExpanded=9999 instead, to expand all the groups"),(e.onRowDeselected||e.rowDeselected)&&console.warn("ag-grid: since version 3.4 event rowDeselected no longer exists, please check the docs"),e.rowsAlreadyGrouped&&console.warn("ag-grid: since version 3.4 rowsAlreadyGrouped no longer exists, please use getNodeChildDetails() instead"),e.groupAggFunction&&console.warn("ag-grid: since version 4.3.x groupAggFunction is now called groupRowAggNodes"),e.checkboxSelection&&console.warn("ag-grid: since version 8.0.x checkboxSelection is not supported as a grid option. If you want this on all columns, use defaultColDef instead and set it there"),e.paginationInitialRowCount&&console.warn("ag-grid: since version 9.0.x paginationInitialRowCount is now called infiniteInitialRowCount"),e.infinitePageSize&&console.warn("ag-grid: since version 9.0.x infinitePageSize is now called cacheBlockSize"),e.infiniteBlockSize&&console.warn("ag-grid: since version 10.0.x infiniteBlockSize is now called cacheBlockSize"),e.maxPagesInCache&&console.warn("ag-grid: since version 10.0.x maxPagesInCache is now called maxBlocksInCache"),e.paginationOverflowSize&&console.warn("ag-grid: since version 10.0.x paginationOverflowSize is now called cacheOverflowSize"),e.forPrint&&console.warn('ag-grid: since version 10.1.x, use property domLayout="forPrint" instead of forPrint=true'),e.suppressMenuFilterPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['generalMenuTab','columnsMenuTab'] instead of suppressMenuFilterPanel=true"),e.suppressMenuMainPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['filterMenuTab','columnsMenuTab'] instead of suppressMenuMainPanel=true"),e.suppressMenuColumnPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['generalMenuTab','filterMenuTab'] instead of suppressMenuColumnPanel=true"),e.suppressUseColIdForGroups&&console.warn("ag-grid: since version 11.0.x, this is not in use anymore. You should be able to remove it from your definition"),e.groupColumnDef&&console.warn("ag-grid: since version 11.0.x, groupColumnDef has been renamed, this property is now called autoGroupColumnDef. Please change your configuration accordingly"),e.slaveGrids&&console.warn("ag-grid: since version 12.x, slaveGrids has been renamed, this property is now called alignedGrids. Please change your configuration accordingly"),e.floatingTopRowData&&console.warn("ag-grid: since version 12.x, floatingTopRowData is now called pinnedTopRowData"),e.floatingBottomRowData&&console.warn("ag-grid: since version 12.x, floatingBottomRowData is now called pinnedBottomRowData"),e.paginationStartPage&&console.warn("ag-grid: since version 12.x, paginationStartPage is gone, please call api.paginationGoToPage("+e.paginationStartPage+") instead."),e.getHeaderCellTemplate&&console.warn("ag-grid: since version 15.x, getHeaderCellTemplate is gone, please check the header documentation on how to set header templates."),e.headerCellTemplate&&console.warn("ag-grid: since version 15.x, headerCellTemplate is gone, please check the header documentation on how to set header templates."),e.headerCellRenderer&&console.warn("ag-grid: since version 15.x, headerCellRenderer is gone, please check the header documentation on how to set header templates."),e.angularCompileHeaders&&console.warn("ag-grid: since version 15.x, angularCompileHeaders is gone, please see the getting started for Angular 1 docs to see how to do headers in Angular 1.x."),"forPrint"===e.domLayout&&console.warn("ag-grid: since version 18.x, forPrint is no longer supported, as same can be achieved using autoHeight (and set the grid width accordingly). please use autoHeight instead."),"autoHeight"===e.domLayout&&(console.warn("ag-grid: since version 18.x, domLayout is gone, instead if doing auto-height, set gridAutoHeight=true."),e.gridAutoHeight=!0),e.pivotTotals&&(console.warn("ag-grid: since version 18.x, pivotTotals has been removed, instead if using pivotTotals, set pivotColumnGroupTotals='before'|'after'."),e.pivotColumnGroupTotals="before"),"inMemory"===e.rowModelType&&(console.warn("ag-grid: since version 18.x, The In Memory Row Model has been renamed to the Client Side Row Model, set rowModelType='clientSide' instead."),e.rowModelType="clientSide"),"enterprise"===e.rowModelType&&(console.warn("ag-grid: since version 18.x, The Enterprise Row Model has been renamed to the Server Side Row Model, set rowModelType='serverSide' instead."),e.rowModelType="serverSide")},w.prototype.getLocaleTextFunc=function(){if(this.gridOptions.localeTextFunc)return this.gridOptions.localeTextFunc;var n=this;return function(e,t){var i=n.gridOptions.localeText;return i&&i[e]?i[e]:t}},w.prototype.globalEventHandler=function(e,t){e=l.ComponentUtil.getCallbackForEvent(e);"function"==typeof this.gridOptions[e]&&this.gridOptions[e](t)},w.prototype.getRowHeightAsNumber=function(){var e=this.gridOptions.rowHeight;return p.Utils.missing(e)?this.getDefaultRowHeight():this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:(console.warn("ag-Grid row height must be a number if not using standard row model"),this.getDefaultRowHeight())},w.prototype.getRowHeightForNode=function(e){var t;return"function"==typeof this.gridOptions.getRowHeight?(t={node:e,data:e.data,api:this.gridOptions.api,context:this.gridOptions.context},this.gridOptions.getRowHeight(t)):e.detail&&this.isMasterDetail()?this.isNumeric(this.gridOptions.detailRowHeight)?this.gridOptions.detailRowHeight:300:(t=this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:this.getDefaultRowHeight(),this.columnController.isAutoRowHeightActive()&&t<(e=this.autoHeightCalculator.getPreferredHeightForRow(e))?e:t)},w.prototype.isDynamicRowHeight=function(){return"function"==typeof this.gridOptions.getRowHeight},w.prototype.getVirtualItemHeight=function(){return this.specialForNewMaterial(20,"virtualItemHeight")},w.prototype.isNumeric=function(e){return!isNaN(e)&&"number"==typeof e},w.prototype.specialForNewMaterial=function(e,t){var i=this.environment.getTheme();return 0===i.indexOf("ag-theme")?this.environment.getSassVariable(i,t):e},w.prototype.getDefaultRowHeight=function(){return this.specialForNewMaterial(25,"rowHeight")},w.MIN_COL_WIDTH=10,w.PROP_HEADER_HEIGHT="headerHeight",w.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren",w.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN="groupRemoveLowestSingleChildren",w.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight",w.PROP_SUPPRESS_CLIPBOARD_PASTE="suppressClipboardPaste",w.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight",w.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight",w.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight",w.PROP_SUPPRESS_ROW_DRAG="suppressRowDrag",w.PROP_POPUP_PARENT="popupParent",w.PROP_GRID_AUTO_HEIGHT="gridAutoHeight",n([u.Autowired("gridOptions"),o("design:type",Object)],w.prototype,"gridOptions",void 0),n([u.Autowired("columnController"),o("design:type",h.ColumnController)],w.prototype,"columnController",void 0),n([u.Autowired("eventService"),o("design:type",s.EventService)],w.prototype,"eventService",void 0),n([u.Autowired("enterprise"),o("design:type",Boolean)],w.prototype,"enterprise",void 0),n([u.Autowired("frameworkFactory"),o("design:type",Object)],w.prototype,"frameworkFactory",void 0),n([u.Autowired("gridApi"),o("design:type",c.GridApi)],w.prototype,"gridApi",void 0),n([u.Autowired("columnApi"),o("design:type",d.ColumnApi)],w.prototype,"columnApi",void 0),n([u.Autowired("environment"),o("design:type",f.Environment)],w.prototype,"environment",void 0),n([u.Autowired("autoHeightCalculator"),o("design:type",i.AutoHeightCalculator)],w.prototype,"autoHeightCalculator",void 0),n([r(0,u.Qualifier("gridApi")),r(1,u.Qualifier("columnApi")),o("design:type",Function),o("design:paramtypes",[c.GridApi,d.ColumnApi]),o("design:returntype",void 0)],w.prototype,"agWire",null),n([u.PreDestroy,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],w.prototype,"destroy",null),n([u.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],w.prototype,"init",null);var b,h=b=n([u.Bean("gridOptionsWrapper")],w);function w(){this.propertyEventService=new s.EventService,this.domDataKey="__AG_"+Math.random().toString()}t.GridOptionsWrapper=h},function(e,t,i){"use strict";var s,n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},a=(Object.defineProperty(t,"__esModule",{value:!0}),i(12)),l=i(1),c=i(0),u=i(0),i=i(2),r=((s=d).prototype.setBeans=function(e,t,i){void 0===i&&(i=null),this.logger=e.create("EventService"),i&&(e=t.useAsyncEvents(),this.addGlobalListener(i,e))},d.prototype.getListenerList=function(e,t){var t=t?this.allAsyncListeners:this.allSyncListeners,i=t[e];return i||(t[e]=i=[]),i},d.prototype.addEventListener=function(e,t,i){e=this.getListenerList(e,i=void 0===i?!1:i);e.indexOf(t)<0&&e.push(t)},d.prototype.addModalPriorityEventListener=function(e,t,i){this.addEventListener(e+s.PRIORITY,t,i=void 0===i?!1:i)},d.prototype.addGlobalListener=function(e,t){((t=void 0===t?!1:t)?this.globalAsyncListeners:this.globalSyncListeners).push(e)},d.prototype.removeEventListener=function(e,t,i){e=this.getListenerList(e,i=void 0===i?!1:i);l.Utils.removeFromArray(e,t)},d.prototype.removeGlobalListener=function(e,t){(t=void 0===t?!1:t)?l.Utils.removeFromArray(this.globalAsyncListeners,e):l.Utils.removeFromArray(this.globalSyncListeners,e)},d.prototype.dispatchEvent=function(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1)},d.prototype.dispatchToListeners=function(t,i){var n=this,e=i?this.globalAsyncListeners:this.globalSyncListeners,o=t.type,r=this.getListenerList(o+s.PRIORITY,i),r=(l.Utils.forEachSnapshotFirst(r,function(e){i?n.dispatchAsync(function(){return e(t)}):e(t)}),this.getListenerList(o,i));l.Utils.forEachSnapshotFirst(r,function(e){i?n.dispatchAsync(function(){return e(t)}):e(t)}),l.Utils.forEachSnapshotFirst(e,function(e){i?n.dispatchAsync(function(){return e(o,t)}):e(o,t)})},d.prototype.dispatchAsync=function(e){this.asyncFunctionsQueue.push(e),this.scheduled||(setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},d.prototype.flushAsyncQueue=function(){this.scheduled=!1;var e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(function(e){return e()})},d.PRIORITY="-P1",n([r(0,u.Qualifier("loggerFactory")),r(1,u.Qualifier("gridOptionsWrapper")),r(2,u.Qualifier("globalEventListener")),o("design:type",Function),o("design:paramtypes",[a.LoggerFactory,i.GridOptionsWrapper,Function]),o("design:returntype",void 0)],d.prototype,"setBeans",null),s=n([c.Bean("eventService")],d));function d(){this.allSyncListeners={},this.allAsyncListeners={},this.globalSyncListeners=[],this.globalAsyncListeners=[],this.asyncFunctionsQueue=[],this.scheduled=!1}t.EventService=r},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},f=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),s=i(26),l=i(10),a=i(2),c=i(19),u=i(38),d=i(48),h=i(39),p=i(3),g=i(31),m=i(12),v=i(5),y=i(32),b=i(83),w=i(0),C=i(53),_=i(104),A=i(33),E=i(6),i=i(7),a=(x.prototype.init=function(){var e=this.gridOptionsWrapper.isPivotMode();this.suppressColumnVirtualisation=this.gridOptionsWrapper.isSuppressColumnVirtualisation(),this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.usingTreeData=this.gridOptionsWrapper.isTreeData()},x.prototype.isAutoRowHeightActive=function(){return this.autoRowHeightColumns&&0<this.autoRowHeightColumns.length},x.prototype.getAllAutoRowHeightCols=function(){return this.autoRowHeightColumns},x.prototype.setVirtualViewportLeftAndRight=function(){this.gridOptionsWrapper.isEnableRtl()?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},x.prototype.getDisplayedColumnsStartingAt=function(e){for(var t=e,i=[];f.Utils.exists(t);)i.push(t),t=this.getDisplayedColAfter(t);return i},x.prototype.checkDisplayedVirtualColumns=function(){var e;f.Utils.exists(this.displayedCenterColumns)&&(e=this.allDisplayedVirtualColumns.map(function(e){return e.getId()}).join("#"),this.updateVirtualSets(),e!==this.allDisplayedVirtualColumns.map(function(e){return e.getId()}).join("#")&&(e={type:v.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi},this.eventService.dispatchEvent(e)))},x.prototype.setVirtualViewportPosition=function(e,t){e===this.scrollWidth&&t===this.scrollPosition&&!this.bodyWidthDirty||(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setVirtualViewportLeftAndRight(),this.ready&&this.checkDisplayedVirtualColumns())},x.prototype.isPivotMode=function(){return this.pivotMode},x.prototype.isPivotSettingAllowed=function(e){return!e||(!this.gridOptionsWrapper.isTreeData()||(console.warn("ag-Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1))},x.prototype.setPivotMode=function(e,t){void 0===t&&(t="api"),e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.updateDisplayedColumns(t),e={type:v.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,api:this.gridApi,columnApi:this.columnApi},this.eventService.dispatchEvent(e))},x.prototype.getSecondaryPivotColumn=function(n,e){if(!this.secondaryColumnsPresent)return null;var o=this.getPrimaryColumn(e),r=null;return this.secondaryColumns.forEach(function(e){var t=e.getColDef().pivotKeys,i=e.getColDef().pivotValueColumn;f.Utils.compareArrays(t,n)&&i===o&&(r=e)}),r},x.prototype.setBeans=function(e){this.logger=e.create("ColumnController")},x.prototype.setFirstRightAndLastLeftPinned=function(t){var i,n=this.gridOptionsWrapper.isEnableRtl()?(i=this.displayedLeftColumns?this.displayedLeftColumns[0]:null,this.displayedRightColumns?this.displayedRightColumns[this.displayedRightColumns.length-1]:null):(i=this.displayedLeftColumns?this.displayedLeftColumns[this.displayedLeftColumns.length-1]:null,this.displayedRightColumns?this.displayedRightColumns[0]:null);this.gridColumns.forEach(function(e){e.setLastLeftPinned(e===i,t),e.setFirstRightPinned(e===n,t)})},x.prototype.autoSizeColumns=function(e,i){for(var t,n=this,o=(void 0===i&&(i="api"),[]),r=-1;0!==r;)r=0,this.actionOnGridColumns(e,function(e){var t;if(!(0<=o.indexOf(e)))return t=n.autoWidthCalculator.getPreferredWidthForColumn(e),0<t&&(t=n.normaliseColumnWidth(e,t),e.setActualWidth(t,i),o.push(e),r++),!0},i);0<o.length&&(t={type:v.Events.EVENT_COLUMN_RESIZED,columns:o,column:1===o.length?o[0]:null,finished:!0,api:this.gridApi,columnApi:this.columnApi,source:"autosizeColumns"},this.eventService.dispatchEvent(t))},x.prototype.autoSizeColumn=function(e,t){this.autoSizeColumns([e],t=void 0===t?"api":t)},x.prototype.autoSizeAllColumns=function(e){void 0===e&&(e="api");var t=this.getAllDisplayedColumns();this.autoSizeColumns(t,e)},x.prototype.getColumnsFromTree=function(e){var o=[];return function e(t){for(var i=0;i<t.length;i++){var n=t[i];n instanceof l.Column?o.push(n):n instanceof y.OriginalColumnGroup&&e(n.getChildren())}}(e),o},x.prototype.getAllDisplayedColumnGroups=function(){return this.displayedLeftColumnTree&&this.displayedRightColumnTree&&this.displayedCentreColumnTree?this.displayedLeftColumnTree.concat(this.displayedCentreColumnTree).concat(this.displayedRightColumnTree):null},x.prototype.getPrimaryColumnTree=function(){return this.primaryBalancedTree},x.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},x.prototype.getLeftDisplayedColumnGroups=function(){return this.displayedLeftColumnTree},x.prototype.getRightDisplayedColumnGroups=function(){return this.displayedRightColumnTree},x.prototype.getCenterDisplayedColumnGroups=function(){return this.displayedCentreColumnTree},x.prototype.getDisplayedColumnGroups=function(e){switch(e){case l.Column.PINNED_LEFT:return this.getLeftDisplayedColumnGroups();case l.Column.PINNED_RIGHT:return this.getRightDisplayedColumnGroups();default:return this.getCenterDisplayedColumnGroups()}},x.prototype.isColumnDisplayed=function(e){return 0<=this.getAllDisplayedColumns().indexOf(e)},x.prototype.getAllDisplayedColumns=function(){return this.allDisplayedColumns},x.prototype.getAllDisplayedVirtualColumns=function(){return this.allDisplayedVirtualColumns},x.prototype.getDisplayedLeftColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedLeftColumns):this.displayedLeftColumns},x.prototype.getDisplayedRightColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedRightColumns):this.displayedRightColumns},x.prototype.getDisplayedColumnsForRow=function(a,l,c,u){for(var d,h=[],p=null,e=0;e<l.length;e++)!function(e){var t,i=l[e],n=i.getColSpan(a),o=[i];if(1<n){for(var r=n-1,s=1;s<=r;s++)o.push(l[e+s]);e+=r}c?(t=!1,o.forEach(function(e){c(e)&&(t=!0)})):t=!0,t&&(0===h.length&&p&&!!u&&u(i)&&h.push(p),h.push(i)),p=i,d=e}(e),e=d;return h},x.prototype.getAllDisplayedCenterVirtualColumnsForRow=function(e){var t=this;if(!this.colSpanActive)return this.allDisplayedCenterVirtualColumns;var i=this.suppressColumnVirtualisation?null:this.isColumnInViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedCenterColumns,i,function(e){return e.getLeft()>t.viewportLeft})},x.prototype.isColumnInViewport=function(e){var t=e.getLeft(),e=e.getLeft()+e.getActualWidth(),i=t<this.viewportLeft&&e<this.viewportLeft,t=t>this.viewportRight&&e>this.viewportRight;return!i&&!t},x.prototype.getPinnedLeftContainerWidth=function(){return this.getWidthOfColsInList(this.displayedLeftColumns)},x.prototype.getPinnedRightContainerWidth=function(){return this.getWidthOfColsInList(this.displayedRightColumns)},x.prototype.updatePrimaryColumnList=function(e,t,i,n,o,r){var s,a=this;void 0===r&&(r="api"),f.Utils.missingOrEmpty(e)||(s=!1,e.forEach(function(e){e=a.getPrimaryColumn(e);if(e){if(i){if(0<=t.indexOf(e))return;t.push(e)}else{if(t.indexOf(e)<0)return;f.Utils.removeFromArray(t,e)}n(e),s=!0}}),s&&(this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(r),e={type:o,columns:t,column:1===t.length?t[0]:null,api:this.gridApi,columnApi:this.columnApi,source:r},this.eventService.dispatchEvent(e)))},x.prototype.setRowGroupColumns=function(e,t){void 0===t&&(t="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,v.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),t)},x.prototype.setRowGroupActive=function(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e||this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()||t.setVisible(!0,i))},x.prototype.addRowGroupColumn=function(e,t){this.addRowGroupColumns([e],t=void 0===t?"api":t)},x.prototype.addRowGroupColumns=function(e,t){void 0===t&&(t="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),v.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t)},x.prototype.removeRowGroupColumns=function(e,t){void 0===t&&(t="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),v.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t)},x.prototype.removeRowGroupColumn=function(e,t){this.removeRowGroupColumns([e],t=void 0===t?"api":t)},x.prototype.addPivotColumns=function(e,t){void 0===t&&(t="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!0,function(e){return e.setPivotActive(!0,t)},v.Events.EVENT_COLUMN_PIVOT_CHANGED,t)},x.prototype.setPivotColumns=function(e,i){void 0===i&&(i="api"),this.setPrimaryColumnList(e,this.pivotColumns,v.Events.EVENT_COLUMN_PIVOT_CHANGED,function(e,t){t.setPivotActive(e,i)},i)},x.prototype.addPivotColumn=function(e,t){this.addPivotColumns([e],t=void 0===t?"api":t)},x.prototype.removePivotColumns=function(e,t){void 0===t&&(t="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!1,function(e){return e.setPivotActive(!1,t)},v.Events.EVENT_COLUMN_PIVOT_CHANGED,t)},x.prototype.removePivotColumn=function(e,t){this.removePivotColumns([e],t=void 0===t?"api":t)},x.prototype.setPrimaryColumnList=function(e,i,t,n,o){var r=this,e=(i.length=0,f.Utils.exists(e)&&e.forEach(function(e){e=r.getPrimaryColumn(e);i.push(e)}),this.primaryColumns.forEach(function(e){var t=0<=i.indexOf(e);n(t,e)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o),{type:t,columns:i,column:1===i.length?i[0]:null,api:this.gridApi,columnApi:this.columnApi,source:o});this.eventService.dispatchEvent(e)},x.prototype.setValueColumns=function(e,t){void 0===t&&(t="api"),this.setPrimaryColumnList(e,this.valueColumns,v.Events.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),t)},x.prototype.setValueActive=function(e,t,i){e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&(i=this.aggFuncService.getDefaultAggFunc(t),t.setAggFunc(i)))},x.prototype.addValueColumns=function(e,t){void 0===t&&(t="api"),this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),v.Events.EVENT_COLUMN_VALUE_CHANGED,t)},x.prototype.addValueColumn=function(e,t){this.addValueColumns([e],t=void 0===t?"api":t)},x.prototype.removeValueColumn=function(e,t){this.removeValueColumns([e],t=void 0===t?"api":t)},x.prototype.removeValueColumns=function(e,t){void 0===t&&(t="api"),this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),v.Events.EVENT_COLUMN_VALUE_CHANGED,t)},x.prototype.normaliseColumnWidth=function(e,t){return t<e.getMinWidth()&&(t=e.getMinWidth()),t=e.isGreaterThanMax(t)?e.getMaxWidth():t},x.prototype.getPrimaryOrGridColumn=function(e){var t=this.getPrimaryColumn(e);return t||this.getGridColumn(e)},x.prototype.setColumnWidth=function(e,t,i,n,o){void 0===o&&(o="api");e=this.getPrimaryOrGridColumn(e);if(e){var r=[];if(r.push({width:t,ratios:[1],columns:[e]}),i){i=this.getDisplayedColAfter(e);if(!i)return;e=e.getActualWidth()-t,t=i.getActualWidth()+e;r.push({width:t,ratios:[1],columns:[i]})}this.resizeColumnSets(r,n,o)}},x.prototype.checkMinAndMaxWidthsForSet=function(e){var t=e.columns,e=e.width,i=0,n=0,o=!0;return t.forEach(function(e){i+=e.getMinWidth(),0<e.getMaxWidth()?n+=e.getMaxWidth():o=!1}),i<=e&&(!o||e<=n)},x.prototype.resizeColumnSets=function(e,t,i){var n,o;f.Utils.every(e,this.checkMinAndMaxWidthsForSet.bind(this))&&(n=[],o=[],e.forEach(function(e){for(var a=e.width,t=e.columns,l=e.ratios,c={},u={},d=(t.forEach(function(e){return o.push(e)}),!0),h=0;d&&"break"!==function(){if(1e3<++h)return console.error("ag-Grid: infinite loop in resizeColumnSets"),"break";d=!1;var n=[],i=[],o=0,r=a,s=(t.forEach(function(e,t){u[e.getId()]?r-=c[e.getId()]:(n.push(e),e=l[t],o+=e,i.push(e))}),1/o);n.forEach(function(e,t){var i;t===n.length-1?i=r:(i=Math.round(l[t]*a*s),r-=i),i<e.getMinWidth()?(i=e.getMinWidth(),u[e.getId()]=!0,d=!0):0<e.getMaxWidth()&&i>e.getMaxWidth()&&(i=e.getMaxWidth(),u[e.getId()]=!0,d=!0),c[e.getId()]=i})}(););t.forEach(function(e){var t=c[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t),n.push(e))})}),(e=0<n.length)&&(this.setLeftValues(i),this.updateBodyWidths(),this.checkDisplayedVirtualColumns()),(e||t)&&(e={type:v.Events.EVENT_COLUMN_RESIZED,columns:o,column:1===o.length?o[0]:null,finished:t,api:this.gridApi,columnApi:this.columnApi,source:i},this.eventService.dispatchEvent(e)))},x.prototype.setColumnAggFunc=function(e,t,i){void 0===i&&(i="api"),e.setAggFunc(t);t={type:v.Events.EVENT_COLUMN_VALUE_CHANGED,columns:[e],column:e,api:this.gridApi,columnApi:this.columnApi,source:i};this.eventService.dispatchEvent(t)},x.prototype.moveRowGroupColumn=function(e,t,i){void 0===i&&(i="api");var n=this.rowGroupColumns[e],e=(this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,n),{type:v.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:1===this.rowGroupColumns.length?this.rowGroupColumns[0]:null,api:this.gridApi,columnApi:this.columnApi,source:i});this.eventService.dispatchEvent(e)},x.prototype.moveColumns=function(e,t,i){if(void 0===i&&(i="api"),this.columnAnimationService.start(),t>this.gridColumns.length-e.length)return console.warn("ag-Grid: tried to insert columns in invalid location, toIndex = "+t),void console.warn("ag-Grid: remember that you should not count the moving columns when calculating the new index");var e=this.getGridColumns(e);this.doesMovePassRules(e,t)&&(f.Utils.moveInArray(this.gridColumns,e,t),this.updateDisplayedColumns(i),e={type:v.Events.EVENT_COLUMN_MOVED,columns:e,column:1===e.length?e[0]:null,toIndex:t,api:this.gridApi,columnApi:this.columnApi,source:i},this.eventService.dispatchEvent(e),this.columnAnimationService.finish())},x.prototype.doesMovePassRules=function(e,t){var i=this.gridColumns.slice();return f.Utils.moveInArray(i,e,t),!!this.doesMovePassMarryChildren(i)&&!!this.doesMovePassLockedPositions(i)},x.prototype.doesMovePassLockedPositions=function(e){var t=!1,i=!0;return e.forEach(function(e){e.isLockPosition()?t&&(i=!1):t=!0}),i},x.prototype.doesMovePassMarryChildren=function(n){var o=!0;return this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,function(e){var t,i;e instanceof y.OriginalColumnGroup&&((e=e).getColGroupDef()&&e.getColGroupDef().marryChildren&&(t=[],e.getLeafColumns().forEach(function(e){e=n.indexOf(e);t.push(e)}),i=Math.max.apply(Math,t)-Math.min.apply(Math,t),e.getLeafColumns().length-1<i&&(o=!1)))}),o},x.prototype.moveColumn=function(e,t,i){this.moveColumns([e],t,i=void 0===i?"api":i)},x.prototype.moveColumnByIndex=function(e,t,i){e=this.gridColumns[e];this.moveColumn(e,t,i=void 0===i?"api":i)},x.prototype.getBodyContainerWidth=function(){return this.bodyWidth},x.prototype.getContainerWidth=function(e){switch(e){case l.Column.PINNED_LEFT:return this.leftWidth;case l.Column.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}},x.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedCenterColumns),t=this.getWidthOfColsInList(this.displayedLeftColumns),i=this.getWidthOfColsInList(this.displayedRightColumns);this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth===e&&this.leftWidth===t&&this.rightWidth===i||(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,e={type:v.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,api:this.gridApi,columnApi:this.columnApi},this.eventService.dispatchEvent(e))},x.prototype.getValueColumns=function(){return this.valueColumns||[]},x.prototype.getPivotColumns=function(){return this.pivotColumns||[]},x.prototype.isPivotActive=function(){return this.pivotColumns&&0<this.pivotColumns.length&&this.pivotMode},x.prototype.getRowGroupColumns=function(){return this.rowGroupColumns||[]},x.prototype.getDisplayedCenterColumns=function(){return this.displayedCenterColumns},x.prototype.getDisplayedLeftColumns=function(){return this.displayedLeftColumns},x.prototype.getDisplayedRightColumns=function(){return this.displayedRightColumns},x.prototype.getDisplayedColumns=function(e){switch(e){case l.Column.PINNED_LEFT:return this.getDisplayedLeftColumns();case l.Column.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},x.prototype.getAllPrimaryColumns=function(){return this.primaryColumns},x.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},x.prototype.getAllGridColumns=function(){return this.gridColumns},x.prototype.isEmpty=function(){return f.Utils.missingOrEmpty(this.gridColumns)},x.prototype.isRowGroupEmpty=function(){return f.Utils.missingOrEmpty(this.rowGroupColumns)},x.prototype.setColumnVisible=function(e,t,i){this.setColumnsVisible([e],t,i=void 0===i?"api":i)},x.prototype.setColumnsVisible=function(e,t,i){var n=this;void 0===i&&(i="api"),this.columnAnimationService.start(),this.actionOnGridColumns(e,function(e){return e.isVisible()!==t&&(e.setVisible(t,i),!0)},i,function(){return{type:v.Events.EVENT_COLUMN_VISIBLE,visible:t,column:null,columns:null,api:n.gridApi,columnApi:n.columnApi,source:i}}),this.columnAnimationService.finish()},x.prototype.setColumnPinned=function(e,t,i){this.setColumnsPinned([e],t,i=void 0===i?"api":i)},x.prototype.setColumnsPinned=function(e,t,i){var n,o=this;void 0===i&&(i="api"),this.columnAnimationService.start(),n=!0===t||t===l.Column.PINNED_LEFT?l.Column.PINNED_LEFT:t===l.Column.PINNED_RIGHT?l.Column.PINNED_RIGHT:null,this.actionOnGridColumns(e,function(e){return e.getPinned()!==n&&(e.setPinned(n),!0)},i,function(){return{type:v.Events.EVENT_COLUMN_PINNED,pinned:n,column:null,columns:null,api:o.gridApi,columnApi:o.columnApi,source:i}}),this.columnAnimationService.finish()},x.prototype.actionOnGridColumns=function(e,t,i,n){var o,r=this;f.Utils.missingOrEmpty(e)||(o=[],e.forEach(function(e){e=r.getGridColumn(e);e&&!1!==t(e)&&o.push(e)}),0!==o.length&&(this.updateDisplayedColumns(i),f.Utils.exists(n)&&((e=n()).columns=o,e.column=1===o.length?o[0]:null,this.eventService.dispatchEvent(e))))},x.prototype.getDisplayedColBefore=function(e){var t=this.getAllDisplayedColumns(),e=t.indexOf(e);return 0<e?t[e-1]:null},x.prototype.getDisplayedColAfter=function(e){var t=this.getAllDisplayedColumns(),e=t.indexOf(e);return e<t.length-1?t[e+1]:null},x.prototype.getDisplayedGroupAfter=function(e){for(var t=e.getDisplayedLeafColumns()[0],i=e.getOriginalColumnGroup().getLevel();;){if(!(t=this.getDisplayedColAfter(t)))return null;for(var n=t.getParent();n.getOriginalColumnGroup().getLevel()!==i;)n=n.getParent();if(n!==e)return n}},x.prototype.isPinningLeft=function(){return 0<this.displayedLeftColumns.length},x.prototype.isPinningRight=function(){return 0<this.displayedRightColumns.length},x.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var t=this.primaryColumns?this.primaryColumns.slice(0):[];return f.Utils.exists(this.groupAutoColumns)&&this.groupAutoColumns.forEach(function(e){return t.push(e)}),this.secondaryColumnsPresent&&this.secondaryColumns.forEach(function(e){return t.push(e)}),t},x.prototype.createStateItemFromColumn=function(e){var t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,i=e.isPivotActive()?this.pivotColumns.indexOf(e):null,n=e.isValueActive()?e.getAggFunc():null;return{colId:e.getColId(),hide:!e.isVisible(),aggFunc:n,width:e.getActualWidth(),pivotIndex:i,pinned:e.getPinned(),rowGroupIndex:t}},x.prototype.getColumnState=function(){if(f.Utils.missing(this.primaryColumns))return[];var e=this.primaryColumns.map(this.createStateItemFromColumn.bind(this));return this.pivotMode||this.orderColumnStateList(e),e},x.prototype.orderColumnStateList=function(e){var i=this.gridColumns.map(function(e){return e.getColId()});e.sort(function(e,t){return i.indexOf(e.colId)-i.indexOf(t.colId)})},x.prototype.resetColumnState=function(e){void 0===e&&(e="api");var t=this.getColumnsFromTree(this.primaryBalancedTree),i=[];t&&t.forEach(function(e){i.push({colId:e.getColId(),aggFunc:e.getColDef().aggFunc,hide:e.getColDef().hide,pinned:e.getColDef().pinned,rowGroupIndex:e.getColDef().rowGroupIndex,pivotIndex:e.getColDef().pivotIndex,width:e.getColDef().width})}),this.setColumnState(i,e)},x.prototype.setColumnState=function(e,i){var n=this;if(void 0===i&&(i="api"),f.Utils.missingOrEmpty(this.primaryColumns))return!1;this.autoGroupsNeedBuilding=!0;var o,r=this.primaryColumns.slice(),s=(this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],!0),a={},l={},e=(e&&e.forEach(function(e){var t=n.getPrimaryColumn(e.colId);t?(n.syncColumnWithStateItem(t,e,a,l,i),f.Utils.removeFromArray(r,t)):(console.warn("ag-grid: column "+e.colId+" not found"),s=!1)}),r.forEach(this.syncColumnWithNoState.bind(this)),this.rowGroupColumns.sort(this.sortColumnListUsingIndexes.bind(this,a)),this.pivotColumns.sort(this.sortColumnListUsingIndexes.bind(this,l)),this.updateGridColumns(),e&&(o=e.map(function(e){return e.colId}),this.gridColumns.sort(function(e,t){return o.indexOf(e.getId())-o.indexOf(t.getId())})),this.updateDisplayedColumns(i),{type:v.Events.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:i});return this.eventService.dispatchEvent(e),s},x.prototype.sortColumnListUsingIndexes=function(e,t,i){return e[t.getId()]-e[i.getId()]},x.prototype.syncColumnWithNoState=function(e,t){e.setVisible(!1,t),e.setAggFunc(null),e.setPinned(null),e.setRowGroupActive(!1,t),e.setPivotActive(!1,t),e.setValueActive(!1,t)},x.prototype.syncColumnWithStateItem=function(e,t,i,n,o){e.setVisible(!t.hide,o),e.setPinned(t.pinned),t.width>=this.gridOptionsWrapper.getMinColWidth()&&e.setActualWidth(t.width,o),"string"==typeof t.aggFunc?(e.setAggFunc(t.aggFunc),e.setValueActive(!0,o),this.valueColumns.push(e)):(f.Utils.exists(t.aggFunc)&&console.warn("ag-Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it isintended for the column state to be stored and retrieved as simple JSON."),e.setAggFunc(null),e.setValueActive(!1,o)),"number"==typeof t.rowGroupIndex?(this.rowGroupColumns.push(e),e.setRowGroupActive(!0,o),i[e.getId()]=t.rowGroupIndex):e.setRowGroupActive(!1,o),"number"==typeof t.pivotIndex?(this.pivotColumns.push(e),e.setPivotActive(!0,o),n[e.getId()]=t.pivotIndex):e.setPivotActive(!1,o)},x.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))},x.prototype.getColumns=function(e,t){var i=[];return e&&e.forEach(function(e){e=t(e);e&&i.push(e)}),i},x.prototype.getColumnWithValidation=function(e){e=this.getPrimaryColumn(e);return e||console.warn("ag-Grid: could not find column "+e),e},x.prototype.getPrimaryColumn=function(e){return this.getColumn(e,this.primaryColumns)},x.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns)},x.prototype.getColumn=function(e,t){if(!e)return null;for(var i=0;i<t.length;i++)if(this.columnsMatch(t[i],e))return t[i];return this.getAutoColumn(e)},x.prototype.getAutoColumn=function(t){var i=this;return!f.Utils.exists(this.groupAutoColumns)||f.Utils.missing(this.groupAutoColumns)?null:f.Utils.find(this.groupAutoColumns,function(e){return i.columnsMatch(e,t)})},x.prototype.columnsMatch=function(e,t){var i=e===t,n=e.getColDef()===t,e=e.getColId()==t;return i||n||e},x.prototype.getDisplayNameForColumn=function(e,t,i){void 0===i&&(i=!1);t=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,t):t},x.prototype.getDisplayNameForOriginalColumnGroup=function(e,t,i){var n=t.getColGroupDef();return n?this.getHeaderName(n,null,e,t,i):null},x.prototype.getDisplayNameForColumnGroup=function(e,t){return this.getDisplayNameForOriginalColumnGroup(e,e.getOriginalColumnGroup(),t)},x.prototype.getHeaderName=function(e,t,i,n,o){var r=e.headerValueGetter;return r?(t={colDef:e,column:t,columnGroup:i,originalColumnGroup:n,location:o,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()},"function"==typeof r?r(t):"string"==typeof r?this.expressionService.evaluate(r,t):(console.warn("ag-grid: headerValueGetter must be a function or a string"),"")):null!=e.headerName?e.headerName:e.field?f.Utils.camelCaseToHumanText(e.field):""},x.prototype.wrapHeaderNameWithAggFunc=function(e,t){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader())return t;var i,n=e.getColDef().pivotValueColumn,o=null;return(f.Utils.exists(n)?(o=n.getAggFunc(),!0):(n=e.isValueActive(),i=this.pivotMode||!this.isRowGroupEmpty(),!(!n||!i)&&(o=e.getAggFunc(),!0)))?(n="string"==typeof o?o:"func",this.gridOptionsWrapper.getLocaleTextFunc()(n,n)+"("+t+")"):t},x.prototype.getColumnGroup=function(t,i){if(!t)return null;if(t instanceof s.ColumnGroup)return t;var e=this.getAllDisplayedColumnGroups(),n="number"==typeof i,o=null;return this.columnUtils.depthFirstAllColumnTreeSearch(e,function(e){e instanceof s.ColumnGroup&&(e=e,(n?t===e.getGroupId()&&i===e.getInstanceId():t===e.getGroupId())&&(o=e))}),o},x.prototype.setColumnDefs=function(e,t){void 0===t&&(t="api"),this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;e=this.balancedColumnTreeBuilder.createBalancedColumnGroups(e,!0),this.primaryBalancedTree=e.balancedTree,this.primaryHeaderRowCount=e.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryBalancedTree),this.autoRowHeightColumns=this.primaryColumns.filter(function(e){return e.getColDef().autoHeight}),this.extractRowGroupColumns(t),this.extractPivotColumns(t),this.createValueColumns(t),this.updateGridColumns(),this.updateDisplayedColumns(t),this.checkDisplayedVirtualColumns(),this.ready=!0,e={type:v.Events.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:t},this.eventService.dispatchEvent(e),t={type:v.Events.EVENT_NEW_COLUMNS_LOADED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(t)},x.prototype.isReady=function(){return this.ready},x.prototype.extractRowGroupColumns=function(t){var i=this;this.rowGroupColumns.forEach(function(e){return e.setRowGroupActive(!1,t)}),this.rowGroupColumns=[],this.primaryColumns.forEach(function(e){"number"==typeof e.getColDef().rowGroupIndex&&(i.rowGroupColumns.push(e),e.setRowGroupActive(!0,t))}),this.rowGroupColumns.sort(function(e,t){return e.getColDef().rowGroupIndex-t.getColDef().rowGroupIndex}),this.primaryColumns.forEach(function(e){!e.getColDef().rowGroup||0<=i.rowGroupColumns.indexOf(e)||(i.rowGroupColumns.push(e),e.setRowGroupActive(!0,t))})},x.prototype.extractPivotColumns=function(t){var i=this;this.pivotColumns.forEach(function(e){return e.setPivotActive(!1,t)}),this.pivotColumns=[],this.primaryColumns.forEach(function(e){"number"==typeof e.getColDef().pivotIndex&&(i.pivotColumns.push(e),e.setPivotActive(!0,t))}),this.pivotColumns.sort(function(e,t){return e.getColDef().pivotIndex-t.getColDef().pivotIndex}),this.primaryColumns.forEach(function(e){!e.getColDef().pivot||0<=i.pivotColumns.indexOf(e)||(i.pivotColumns.push(e),e.setPivotActive(!0,t))})},x.prototype.resetColumnGroupState=function(e){void 0===e&&(e="api");var t=[];this.columnUtils.depthFirstOriginalTreeSearch(this.primaryBalancedTree,function(e){e instanceof y.OriginalColumnGroup&&(e={groupId:e.getGroupId(),open:e.getColGroupDef().openByDefault},t.push(e))}),this.setColumnGroupState(t,e)},x.prototype.getColumnGroupState=function(){var t=[];return this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,function(e){e instanceof y.OriginalColumnGroup&&t.push({groupId:(e=e).getGroupId(),open:e.isExpanded()})}),t},x.prototype.setColumnGroupState=function(e,t){var i=this,n=(void 0===t&&(t="api"),this.columnAnimationService.start(),[]);e.forEach(function(e){var t=e.groupId,e=e.open,t=i.getOriginalColumnGroup(t);t&&t.isExpanded()!==e&&(i.logger.log("columnGroupOpened("+t.getGroupId()+","+e+")"),t.setExpanded(e),n.push(t))}),this.updateGroupsAndDisplayedColumns(t),n.forEach(function(e){e={type:v.Events.EVENT_COLUMN_GROUP_OPENED,columnGroup:e,api:i.gridApi,columnApi:i.columnApi};i.eventService.dispatchEvent(e)}),this.columnAnimationService.finish()},x.prototype.setColumnGroupOpened=function(e,t,i){void 0===i&&(i="api"),e=e instanceof y.OriginalColumnGroup?e.getId():e,this.setColumnGroupState([{groupId:e,open:t}],i)},x.prototype.getOriginalColumnGroup=function(t){if(t instanceof y.OriginalColumnGroup)return t;"string"!=typeof t&&console.error("ag-Grid: group key must be a string");var i=null;return this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,function(e){e instanceof y.OriginalColumnGroup&&((e=e).getId()===t&&(i=e))}),i},x.prototype.calculateColumnsForDisplay=function(){var i=this,e=this.pivotMode&&!this.secondaryColumnsPresent?f.Utils.filter(this.gridColumns,function(e){var t=i.groupAutoColumns&&0<=i.groupAutoColumns.indexOf(e),e=i.valueColumns&&0<=i.valueColumns.indexOf(e);return t||e}):f.Utils.filter(this.gridColumns,function(e){return i.groupAutoColumns&&0<=i.groupAutoColumns.indexOf(e)||e.isVisible()});return e},x.prototype.checkColSpanActiveInCols=function(e){var t=!1;return e.forEach(function(e){f.Utils.exists(e.getColDef().colSpan)&&(t=!0)}),t},x.prototype.calculateColumnsForGroupDisplay=function(){function e(e){var t=e.getColDef();t&&f.Utils.exists(t.showRowGroup)&&i.groupDisplayColumns.push(e)}var i=this;this.groupDisplayColumns=[];this.gridColumns.forEach(e),this.groupAutoColumns&&this.groupAutoColumns.forEach(e)},x.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},x.prototype.updateDisplayedColumns=function(e){var t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)},x.prototype.isSecondaryColumnsPresent=function(){return this.secondaryColumnsPresent},x.prototype.setSecondaryColumns=function(e,t){void 0===t&&(t="api");var i=e&&0<e.length;(i||this.secondaryColumnsPresent)&&(i?(this.processSecondaryColumnDefinitions(e),i=this.balancedColumnTreeBuilder.createBalancedColumnGroups(e,!1),this.secondaryBalancedTree=i.balancedTree,this.secondaryHeaderRowCount=i.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsPresent=!0):(this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsPresent=!1),this.updateGridColumns(),this.updateDisplayedColumns(t))},x.prototype.processSecondaryColumnDefinitions=function(e){var n=this.gridOptionsWrapper.getProcessSecondaryColDefFunc(),o=this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();(n||o)&&!function i(e){e.forEach(function(e){var t=f.Utils.exists(e.children);t?(t=e,o&&o(t),i(t.children)):(t=e,n&&n(t))})}(e)},x.prototype.updateGridColumns=function(){this.gridColsArePrimary&&(this.lastPrimaryOrder=this.gridColumns),this.secondaryColumns?(this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1):(this.gridBalancedTree=this.primaryBalancedTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,this.orderGridColsLikeLastPrimary()),this.putFixedColumnsFirst(),this.addAutoGroupToGridColumns(),this.setupQuickFilterColumns(),this.clearDisplayedColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns);var e={type:v.Events.EVENT_GRID_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},x.prototype.orderGridColsLikeLastPrimary=function(){var t,i=this;f.Utils.missing(this.lastPrimaryOrder)||(t=!1,this.gridColumns.forEach(function(e){i.lastPrimaryOrder.indexOf(e)<0&&(t=!0)}),t||this.gridColumns.sort(function(e,t){return i.lastPrimaryOrder.indexOf(e)-i.lastPrimaryOrder.indexOf(t)}))},x.prototype.isPrimaryColumnGroupsPresent=function(){return 1<this.primaryHeaderRowCount},x.prototype.setupQuickFilterColumns=function(){this.groupAutoColumns?this.columnsForQuickFilter=this.primaryColumns.concat(this.groupAutoColumns):this.columnsForQuickFilter=this.primaryColumns},x.prototype.putFixedColumnsFirst=function(){var e=this.gridColumns.filter(function(e){return e.isLockPosition()}),t=this.gridColumns.filter(function(e){return!e.isLockPosition()});this.gridColumns=e.concat(t)},x.prototype.addAutoGroupToGridColumns=function(){var e;this.createGroupAutoColumnsIfNeeded(),f.Utils.missing(this.groupAutoColumns)||(this.gridColumns=this.groupAutoColumns.concat(this.gridColumns),e=this.balancedColumnTreeBuilder.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree),this.gridBalancedTree=e.concat(this.gridBalancedTree))},x.prototype.clearDisplayedColumns=function(){this.displayedLeftColumnTree=[],this.displayedRightColumnTree=[],this.displayedCentreColumnTree=[],this.displayedLeftHeaderRows={},this.displayedRightHeaderRows={},this.displayedCentreHeaderRows={},this.displayedLeftColumns=[],this.displayedRightColumns=[],this.displayedCenterColumns=[],this.allDisplayedColumns=[],this.allDisplayedVirtualColumns=[]},x.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups(),this.updateDisplayedColumnsFromTrees(e),this.updateVirtualSets(),this.updateBodyWidths();e={type:v.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},x.prototype.updateDisplayedColumnsFromTrees=function(e){this.addToDisplayedColumns(this.displayedLeftColumnTree,this.displayedLeftColumns),this.addToDisplayedColumns(this.displayedCentreColumnTree,this.displayedCenterColumns),this.addToDisplayedColumns(this.displayedRightColumnTree,this.displayedRightColumns),this.setupAllDisplayedColumns(),this.setLeftValues(e)},x.prototype.setupAllDisplayedColumns=function(){this.gridOptionsWrapper.isEnableRtl()?this.allDisplayedColumns=this.displayedRightColumns.concat(this.displayedCenterColumns).concat(this.displayedLeftColumns):this.allDisplayedColumns=this.displayedLeftColumns.concat(this.displayedCenterColumns).concat(this.displayedRightColumns)},x.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()},x.prototype.setLeftValuesOfColumns=function(n){var o=this,r=this.primaryColumns.slice(0),s=this.gridOptionsWrapper.isEnableRtl();[this.displayedLeftColumns,this.displayedRightColumns,this.displayedCenterColumns].forEach(function(e){var t,i;s?(t=o.getWidthOfColsInList(e),e.forEach(function(e){t-=e.getActualWidth(),e.setLeft(t,n)})):(i=0,e.forEach(function(e){e.setLeft(i,n),i+=e.getActualWidth()})),f.Utils.removeAllFromArray(r,e)}),r.forEach(function(e){e.setLeft(null,n)})},x.prototype.setLeftValuesOfGroups=function(){[this.displayedLeftColumnTree,this.displayedRightColumnTree,this.displayedCentreColumnTree].forEach(function(e){e.forEach(function(e){e instanceof s.ColumnGroup&&e.checkLeft()})})},x.prototype.addToDisplayedColumns=function(e,t){t.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,function(e){e instanceof l.Column&&t.push(e)})},x.prototype.updateDisplayedCenterVirtualColumns=function(){this.suppressColumnVirtualisation?this.allDisplayedCenterVirtualColumns=this.displayedCenterColumns:this.allDisplayedCenterVirtualColumns=this.filterOutColumnsWithinViewport(),this.allDisplayedVirtualColumns=this.allDisplayedCenterVirtualColumns.concat(this.displayedLeftColumns).concat(this.displayedRightColumns);var t={};return this.allDisplayedVirtualColumns.forEach(function(e){t[e.getId()]=!0}),t},x.prototype.getVirtualHeaderGroupRow=function(e,t){var i;switch(e){case l.Column.PINNED_LEFT:i=this.displayedLeftHeaderRows[t];break;case l.Column.PINNED_RIGHT:i=this.displayedRightHeaderRows[t];break;default:i=this.displayedCentreHeaderRows[t]}return i=f.Utils.missing(i)?[]:i},x.prototype.updateDisplayedVirtualGroups=function(s){function a(e,t,i){for(var n=!1,o=0;o<e.length;o++){var r=e[o];(r instanceof l.Column?!0===s[r.getId()]:a(r.getDisplayedChildren(),t,i+1))&&(n=!0,t[i]||(t[i]=[]),t[i].push(r))}return n}this.displayedLeftHeaderRows={},this.displayedRightHeaderRows={},this.displayedCentreHeaderRows={},a(this.displayedLeftColumnTree,this.displayedLeftHeaderRows,0),a(this.displayedRightColumnTree,this.displayedRightHeaderRows,0),a(this.displayedCentreColumnTree,this.displayedCentreHeaderRows,0)},x.prototype.updateVirtualSets=function(){var e=this.updateDisplayedCenterVirtualColumns();this.updateDisplayedVirtualGroups(e)},x.prototype.filterOutColumnsWithinViewport=function(){return f.Utils.filter(this.displayedCenterColumns,this.isColumnInViewport.bind(this))},x.prototype.sizeColumnsToFit=function(e,t){var i=this,n=(void 0===t&&(t="api"),this.getAllDisplayedColumns());if(!(e<=0||0===n.length)){for(var o=f.Utils.filter(n,function(e){return!0===e.getColDef().suppressSizeToFit}),r=f.Utils.filter(n,function(e){return!0!==e.getColDef().suppressSizeToFit}),n=r.slice(0),s=!1;!s;){var s=!0,a=e-this.getWidthOfColsInList(o);if(a<=0)r.forEach(function(e){e.setMinimum(t)});else for(var l=a/this.getWidthOfColsInList(r),c=a,u=r.length-1;0<=u;u--){var d=r[u],h=Math.round(d.getActualWidth()*l);h<d.getMinWidth()?(d.setMinimum(t),p(d),s=!1):d.isGreaterThanMax(h)?(d.setActualWidth(d.getMaxWidth(),t),p(d),s=!1):0===u?d.setActualWidth(c,t):d.setActualWidth(h,t),c-=h}}this.setLeftValues(t),this.updateBodyWidths(),n.forEach(function(e){e={type:v.Events.EVENT_COLUMN_RESIZED,column:e,columns:[e],finished:!0,api:i.gridApi,columnApi:i.columnApi,source:"sizeColumnsToFit"};i.eventService.dispatchEvent(e)})}function p(e){f.Utils.removeFromArray(r,e),o.push(e)}},x.prototype.buildDisplayedTrees=function(e){var t=f.Utils.filter(e,function(e){return"left"===e.getPinned()}),i=f.Utils.filter(e,function(e){return"right"===e.getPinned()}),e=f.Utils.filter(e,function(e){return"left"!==e.getPinned()&&"right"!==e.getPinned()}),n=new b.GroupInstanceIdCreator;this.displayedLeftColumnTree=this.displayedGroupCreator.createDisplayedGroups(t,this.gridBalancedTree,n,this.displayedLeftColumnTree),this.displayedRightColumnTree=this.displayedGroupCreator.createDisplayedGroups(i,this.gridBalancedTree,n,this.displayedRightColumnTree),this.displayedCentreColumnTree=this.displayedGroupCreator.createDisplayedGroups(e,this.gridBalancedTree,n,this.displayedCentreColumnTree)},x.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedColumnGroups();this.columnUtils.depthFirstAllColumnTreeSearch(e,function(e){e instanceof s.ColumnGroup&&e.calculateDisplayedColumns()})},x.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},x.prototype.createGroupAutoColumnsIfNeeded=function(){var e;this.autoGroupsNeedBuilding&&(this.autoGroupsNeedBuilding=!1,e=(0<this.rowGroupColumns.length||this.usingTreeData)&&!this.gridOptionsWrapper.isGroupSuppressAutoColumn()&&!this.gridOptionsWrapper.isGroupUseEntireRow()&&!this.gridOptionsWrapper.isGroupSuppressRow(),this.groupAutoColumns=e?this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns):null)},x.prototype.createValueColumns=function(t){this.valueColumns.forEach(function(e){return e.setValueActive(!1,t)}),this.valueColumns=[];for(var e=0;e<this.primaryColumns.length;e++){var i=this.primaryColumns[e];i.getColDef().aggFunc&&(i.setAggFunc(i.getColDef().aggFunc),this.valueColumns.push(i),i.setValueActive(!0,t))}},x.prototype.getWidthOfColsInList=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].getActualWidth();return t},x.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},n([w.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],x.prototype,"gridOptionsWrapper",void 0),n([w.Autowired("expressionService"),o("design:type",c.ExpressionService)],x.prototype,"expressionService",void 0),n([w.Autowired("balancedColumnTreeBuilder"),o("design:type",u.BalancedColumnTreeBuilder)],x.prototype,"balancedColumnTreeBuilder",void 0),n([w.Autowired("displayedGroupCreator"),o("design:type",d.DisplayedGroupCreator)],x.prototype,"displayedGroupCreator",void 0),n([w.Autowired("autoWidthCalculator"),o("design:type",h.AutoWidthCalculator)],x.prototype,"autoWidthCalculator",void 0),n([w.Autowired("eventService"),o("design:type",p.EventService)],x.prototype,"eventService",void 0),n([w.Autowired("columnUtils"),o("design:type",g.ColumnUtils)],x.prototype,"columnUtils",void 0),n([w.Autowired("context"),o("design:type",w.Context)],x.prototype,"context",void 0),n([w.Autowired("columnAnimationService"),o("design:type",C.ColumnAnimationService)],x.prototype,"columnAnimationService",void 0),n([w.Autowired("autoGroupColService"),o("design:type",_.AutoGroupColService)],x.prototype,"autoGroupColService",void 0),n([w.Optional("aggFuncService"),o("design:type",Object)],x.prototype,"aggFuncService",void 0),n([w.Optional("valueCache"),o("design:type",A.ValueCache)],x.prototype,"valueCache",void 0),n([w.Autowired("columnApi"),o("design:type",i.ColumnApi)],x.prototype,"columnApi",void 0),n([w.Autowired("gridApi"),o("design:type",E.GridApi)],x.prototype,"gridApi",void 0),n([w.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],x.prototype,"init",null),n([r(0,w.Qualifier("loggerFactory")),o("design:type",Function),o("design:paramtypes",[m.LoggerFactory]),o("design:returntype",void 0)],x.prototype,"setBeans",null),n([w.Bean("columnController")],x));function x(){this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.secondaryColumnsPresent=!1,this.gridHeaderRowCount=0,this.displayedLeftColumns=[],this.displayedRightColumns=[],this.displayedCenterColumns=[],this.allDisplayedColumns=[],this.allDisplayedVirtualColumns=[],this.allDisplayedCenterVirtualColumns=[],this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.autoGroupsNeedBuilding=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}t.ColumnController=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i=i(25);t.Events=i.Events},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(47)),s=i(20),a=i(18),l=i(4),c=i(17),u=i(2),d=i(16),h=i(3),p=i(9),f=i(0),g=i(42),m=i(24),v=i(22),y=i(23),b=i(1),w=i(55),C=i(54),_=i(29),A=i(105),E=i(33),x=i(58),S=i(30),i=i(37),A=(T.prototype.registerGridComp=function(e){this.gridPanel=e},T.prototype.registerHeaderRootComp=function(e){this.headerRootComp=e},T.prototype.init=function(){switch(this.rowModel.getType()){case p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE:this.clientSideRowModel=this.rowModel;break;case p.Constants.ROW_MODEL_TYPE_INFINITE:this.infinitePageRowModel=this.rowModel;break;case p.Constants.ROW_MODEL_TYPE_SERVER_SIDE:this.serverSideRowModel=this.rowModel}},T.prototype.__getAlignedGridService=function(){return this.alignedGridsService},T.prototype.addDetailGridInfo=function(e,t){this.detailGridInfoMap[e]=t},T.prototype.removeDetailGridInfo=function(e){this.detailGridInfoMap[e]=void 0},T.prototype.getDetailGridInfo=function(e){return this.detailGridInfoMap[e]},T.prototype.forEachDetailGridInfo=function(i){var n=0;b.Utils.iterateObject(this.detailGridInfoMap,function(e,t){b.Utils.exists(t)&&(i(t,n),n++)})},T.prototype.getDataAsCsv=function(e){return this.csvCreator.getDataAsCsv(e)},T.prototype.exportDataAsCsv=function(e){this.csvCreator.exportDataAsCsv(e)},T.prototype.getDataAsExcel=function(e){return this.excelCreator||console.warn("ag-Grid: Excel export is only available in ag-Grid Enterprise"),this.excelCreator.getDataAsExcelXml(e)},T.prototype.exportDataAsExcel=function(e){this.excelCreator||console.warn("ag-Grid: Excel export is only available in ag-Grid Enterprise"),this.excelCreator.exportDataAsExcel(e)},T.prototype.setEnterpriseDatasource=function(e){console.warn("ag-grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()"),this.setServerSideDatasource(e)},T.prototype.setServerSideDatasource=function(e){this.gridOptionsWrapper.isRowModelServerSide()?this.rowModel.setDatasource(e):console.warn("ag-Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_SERVER_SIDE+"'")},T.prototype.setDatasource=function(e){this.gridOptionsWrapper.isRowModelInfinite()?this.rowModel.setDatasource(e):console.warn("ag-Grid: you can only use a datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_INFINITE+"'")},T.prototype.setViewportDatasource=function(e){this.gridOptionsWrapper.isRowModelViewport()?this.rowModel.setViewportDatasource(e):console.warn("ag-Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_VIEWPORT+"'")},T.prototype.setRowData=function(e){var t,i;this.gridOptionsWrapper.isRowModelDefault()?this.gridOptionsWrapper.isDeltaRowDataMode()?(t=(i=this.immutableService.createTransactionForRowData(e))[0],i=i[1],this.clientSideRowModel.updateRowData(t,i)):(this.selectionController.reset(),this.clientSideRowModel.setRowData(e)):console.log("cannot call setRowData unless using normal row model")},T.prototype.setFloatingTopRowData=function(e){console.warn("ag-Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()"),this.setPinnedTopRowData(e)},T.prototype.setFloatingBottomRowData=function(e){console.warn("ag-Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()"),this.setPinnedBottomRowData(e)},T.prototype.getFloatingTopRowCount=function(){return console.warn("ag-Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()"),this.getPinnedTopRowCount()},T.prototype.getFloatingBottomRowCount=function(){return console.warn("ag-Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()"),this.getPinnedBottomRowCount()},T.prototype.getFloatingTopRow=function(e){return console.warn("ag-Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()"),this.getPinnedTopRow(e)},T.prototype.getFloatingBottomRow=function(e){return console.warn("ag-Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()"),this.getPinnedBottomRow(e)},T.prototype.setPinnedTopRowData=function(e){this.pinnedRowModel.setPinnedTopRowData(e)},T.prototype.setPinnedBottomRowData=function(e){this.pinnedRowModel.setPinnedBottomRowData(e)},T.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},T.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},T.prototype.getPinnedTopRow=function(e){return this.pinnedRowModel.getPinnedTopRow(e)},T.prototype.getPinnedBottomRow=function(e){return this.pinnedRowModel.getPinnedBottomRow(e)},T.prototype.setColumnDefs=function(e,t){this.columnController.setColumnDefs(e,t=void 0===t?"api":t)},T.prototype.expireValueCache=function(){this.valueCache.expire()},T.prototype.getVerticalPixelRange=function(){return this.gridPanel.getVScrollPosition()},T.prototype.refreshToolPanel=function(){this.toolPanelComp&&this.toolPanelComp.refresh()},T.prototype.refreshCells=function(e){void 0===e&&(e={}),Array.isArray(e)?console.warn("since ag-Grid v11.1, refreshCells() now takes parameters, please see the documentation."):this.rowRenderer.refreshCells(e)},T.prototype.flashCells=function(e){this.rowRenderer.flashCells(e=void 0===e?{}:e)},T.prototype.redrawRows=function(e){(e=void 0===e?{}:e)&&e.rowNodes?this.rowRenderer.redrawRows(e.rowNodes):this.rowRenderer.redrawAfterModelUpdate()},T.prototype.timeFullRedraw=function(r){void 0===r&&(r=1);var s=0,a=0,l=0,e=this;function c(){console.log("tests complete. iteration count = "+s),console.log("average processing = "+a/s+"ms"),console.log("average reflow = "+l/s+"ms")}!function i(){var n=(new Date).getTime();e.rowRenderer.redrawAfterModelUpdate();var o=(new Date).getTime();setTimeout(function(){var e=(new Date).getTime(),t=o-n,e=e-o;console.log("duration:  processing = "+t+"ms, reflow = "+e+"ms"),a+=t,l+=e,++s<r?setTimeout(i,1e3):c()},0)}()},T.prototype.refreshView=function(){console.warn("ag-Grid: since v11.1, refreshView() is deprecated, please call refreshCells() or redrawRows() instead"),this.redrawRows()},T.prototype.refreshRows=function(e){console.warn("since ag-Grid v11.1, refreshRows() is deprecated, please use refreshCells({rowNodes: rows}) or redrawRows({rowNodes: rows}) instead"),this.refreshCells({rowNodes:e})},T.prototype.rowDataChanged=function(e){console.log("ag-Grid: rowDataChanged is deprecated, either call refreshView() to refresh everything, or call rowNode.setRowData(newData) to set value on a particular node"),this.redrawRows()},T.prototype.softRefreshView=function(){console.error("ag-Grid: since v16, softRefreshView() is no longer supported. Please check the documentation on how to refresh.")},T.prototype.refreshGroupRows=function(){console.warn("ag-Grid: since v11.1, refreshGroupRows() is no longer supported, call refreshCells() instead. Because refreshCells() now does dirty checking, it will only refresh cells that have changed, so it should not be necessary to only refresh the group rows."),this.refreshCells()},T.prototype.setFunctionsReadOnly=function(e){this.gridOptionsWrapper.setProperty("functionsReadOnly",e)},T.prototype.refreshHeader=function(){this.headerRootComp.refreshHeader(),this.gridPanel.setBodyAndHeaderHeights()},T.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},T.prototype.isAdvancedFilterPresent=function(){return this.filterManager.isAdvancedFilterPresent()},T.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},T.prototype.getModel=function(){return this.rowModel},T.prototype.onGroupExpandedOrCollapsed=function(e){b.Utils.missing(this.clientSideRowModel)&&console.log("ag-Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model"),b.Utils.exists(e)&&console.log("ag-Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows"),this.clientSideRowModel.refreshModel({step:p.Constants.STEP_MAP})},T.prototype.refreshInMemoryRowModel=function(e){console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()"),this.refreshClientSideRowModel(e)},T.prototype.refreshClientSideRowModel=function(e){b.Utils.missing(this.clientSideRowModel)&&console.log("cannot call refreshClientSideRowModel unless using normal row model");var t=p.Constants.STEP_EVERYTHING,i={group:p.Constants.STEP_EVERYTHING,filter:p.Constants.STEP_FILTER,map:p.Constants.STEP_MAP,aggregate:p.Constants.STEP_AGGREGATE,sort:p.Constants.STEP_SORT,pivot:p.Constants.STEP_PIVOT};b.Utils.exists(e)&&(t=i[e]),b.Utils.missing(t)?console.error("ag-Grid: invalid step "+e+", available steps are "+Object.keys(i).join(", ")):this.clientSideRowModel.refreshModel({step:t,keepRenderedRows:!0,animate:!0,keepEditingRows:!0})},T.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},T.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},T.prototype.expandAll=function(){b.Utils.missing(this.clientSideRowModel)?console.warn("ag-Grid: cannot call expandAll unless using normal row model"):this.clientSideRowModel.expandOrCollapseAll(!0)},T.prototype.collapseAll=function(){b.Utils.missing(this.clientSideRowModel)?console.warn("ag-Grid: cannot call collapseAll unless using normal row model"):this.clientSideRowModel.expandOrCollapseAll(!1)},T.prototype.addVirtualRowListener=function(e,t,i){"string"!=typeof e&&console.log("ag-Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener."),this.addRenderedRowListener(e,t,i)},T.prototype.addRenderedRowListener=function(e,t,i){"virtualRowSelected"===e&&console.log("ag-Grid: event virtualRowSelected is deprecated, to register for individual row selection events, add a listener directly to the row node."),this.rowRenderer.addRenderedRowListener(e,t,i)},T.prototype.setQuickFilter=function(e){this.filterManager.setQuickFilter(e)},T.prototype.selectIndex=function(e,t,i){console.log("ag-Grid: do not use api for selection, call node.setSelected(value) instead"),i&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionController.selectIndex(e,t)},T.prototype.deselectIndex=function(e,t){void 0===t&&(t=!1),console.log("ag-Grid: do not use api for selection, call node.setSelected(value) instead"),t&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionController.deselectIndex(e)},T.prototype.selectNode=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),console.log("ag-Grid: API for selection is deprecated, call node.setSelected(value) instead"),i&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),e.setSelectedParams({newValue:!0,clearSelection:!t})},T.prototype.deselectNode=function(e,t){void 0===t&&(t=!1),console.log("ag-Grid: API for selection is deprecated, call node.setSelected(value) instead"),t&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),e.setSelectedParams({newValue:!1})},T.prototype.selectAll=function(){this.selectionController.selectAllRowNodes()},T.prototype.deselectAll=function(){this.selectionController.deselectAllRowNodes()},T.prototype.selectAllFiltered=function(){this.selectionController.selectAllRowNodes(!0)},T.prototype.deselectAllFiltered=function(){this.selectionController.deselectAllRowNodes(!0)},T.prototype.recomputeAggregates=function(){b.Utils.missing(this.clientSideRowModel)&&console.warn("cannot call recomputeAggregates unless using normal row model"),console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead"),this.clientSideRowModel.refreshModel({step:p.Constants.STEP_AGGREGATE})},T.prototype.sizeColumnsToFit=function(){this.gridPanel.sizeColumnsToFit()},T.prototype.showLoadingOverlay=function(){this.gridPanel.showLoadingOverlay()},T.prototype.showNoRowsOverlay=function(){this.gridPanel.showNoRowsOverlay()},T.prototype.hideOverlay=function(){this.gridPanel.hideOverlay()},T.prototype.isNodeSelected=function(e){return console.log("ag-Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead"),e.isSelected()},T.prototype.getSelectedNodesById=function(){return console.error("ag-Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead"),null},T.prototype.getSelectedNodes=function(){return this.selectionController.getSelectedNodes()},T.prototype.getSelectedRows=function(){return this.selectionController.getSelectedRows()},T.prototype.getBestCostNodeSelection=function(){return this.selectionController.getBestCostNodeSelection()},T.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},T.prototype.ensureColIndexVisible=function(e){console.warn("ag-Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")},T.prototype.ensureColumnVisible=function(e){this.gridPanel.ensureColumnVisible(e)},T.prototype.ensureIndexVisible=function(e,t){this.gridPanel.ensureIndexVisible(e,t)},T.prototype.ensureNodeVisible=function(e,t){this.gridCore.ensureNodeVisible(e,t)},T.prototype.forEachLeafNode=function(e){b.Utils.missing(this.clientSideRowModel)&&console.log("cannot call forEachNode unless using normal row model"),this.clientSideRowModel.forEachLeafNode(e)},T.prototype.forEachNode=function(e){this.rowModel.forEachNode(e)},T.prototype.forEachNodeAfterFilter=function(e){b.Utils.missing(this.clientSideRowModel)&&console.log("cannot call forEachNodeAfterFilter unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilter(e)},T.prototype.forEachNodeAfterFilterAndSort=function(e){b.Utils.missing(this.clientSideRowModel)&&console.log("cannot call forEachNodeAfterFilterAndSort unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)},T.prototype.getFilterApiForColDef=function(e){return console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterApi instead"),this.getFilterInstance(e)},T.prototype.getFilterInstance=function(e){e=this.columnController.getPrimaryColumn(e);if(e)return this.filterManager.getFilterComponent(e).resolveNow(null,function(e){return e})},T.prototype.getFilterApi=function(e){return console.warn("ag-Grid: getFilterApi is deprecated, use getFilterInstance instead"),this.getFilterInstance(e)},T.prototype.destroyFilter=function(e){e=this.columnController.getPrimaryColumn(e);if(e)return this.filterManager.destroyFilter(e,"filterDestroyed")},T.prototype.getColumnDef=function(e){e=this.columnController.getPrimaryColumn(e);return e?e.getColDef():null},T.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},T.prototype.onSortChanged=function(){this.sortController.onSortChanged()},T.prototype.setSortModel=function(e,t){this.sortController.setSortModel(e,t=void 0===t?"api":t)},T.prototype.getSortModel=function(){return this.sortController.getSortModel()},T.prototype.setFilterModel=function(e){this.filterManager.setFilterModel(e)},T.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},T.prototype.getFocusedCell=function(){return this.focusedCellController.getFocusedCell()},T.prototype.clearFocusedCell=function(){return this.focusedCellController.clearFocusedCell()},T.prototype.setFocusedCell=function(e,t,i){this.focusedCellController.setFocusedCell(e,t,i,!0)},T.prototype.setSuppressRowDrag=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_SUPPRESS_ROW_DRAG,e)},T.prototype.setHeaderHeight=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_HEADER_HEIGHT,e),this.doLayout()},T.prototype.setGridAutoHeight=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_GRID_AUTO_HEIGHT,e)},T.prototype.getPreferredWidth=function(){return this.gridCore.getPreferredWidth()},T.prototype.setGroupHeaderHeight=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,e),this.doLayout()},T.prototype.setFloatingFiltersHeight=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,e),this.doLayout()},T.prototype.setPivotGroupHeaderHeight=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,e),this.doLayout()},T.prototype.setPivotHeaderHeight=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,e),this.doLayout()},T.prototype.showToolPanel=function(e){this.gridCore.showToolPanel(e)},T.prototype.setSuppressClipboardPaste=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_SUPPRESS_CLIPBOARD_PASTE,e)},T.prototype.isToolPanelShowing=function(){return this.gridCore.isToolPanelShowing()},T.prototype.doLayout=function(){this.gridPanel.checkViewportAndScrolls()},T.prototype.resetRowHeights=function(){b.Utils.exists(this.clientSideRowModel)&&this.clientSideRowModel.resetRowHeights()},T.prototype.setGroupRemoveSingleChildren=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,e)},T.prototype.setGroupRemoveLowestSingleChildren=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,e)},T.prototype.onRowHeightChanged=function(){b.Utils.exists(this.clientSideRowModel)&&this.clientSideRowModel.onRowHeightChanged()},T.prototype.getValue=function(e,t){var i=this.columnController.getPrimaryColumn(e);return b.Utils.missing(i)&&(i=this.columnController.getGridColumn(e)),b.Utils.missing(i)?null:this.valueService.getValue(i,t)},T.prototype.addEventListener=function(e,t){var i=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(e,t,i)},T.prototype.addGlobalListener=function(e){var t=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(e,t)},T.prototype.removeEventListener=function(e,t){var i=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeEventListener(e,t,i)},T.prototype.removeGlobalListener=function(e){var t=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeGlobalListener(e,t)},T.prototype.dispatchEvent=function(e){this.eventService.dispatchEvent(e)},T.prototype.destroy=function(){this.context.destroy()},T.prototype.resetQuickFilter=function(){this.rowModel.forEachNode(function(e){return e.quickFilterAggregateText=null})},T.prototype.getRangeSelections=function(){return this.rangeController?this.rangeController.getCellRanges():(console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),null)},T.prototype.camelCaseToHumanReadable=function(e){return b.Utils.camelCaseToHumanText(e)},T.prototype.addRangeSelection=function(e){this.rangeController||console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),this.rangeController.addRange(e)},T.prototype.clearRangeSelection=function(){this.rangeController||console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),this.rangeController.clearSelection()},T.prototype.copySelectedRowsToClipboard=function(e,t){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copySelectedRowsToClipboard(e,t)},T.prototype.copySelectedRangeToClipboard=function(e){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copySelectedRangeToClipboard(e)},T.prototype.copySelectedRangeDown=function(){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copyRangeDown()},T.prototype.showColumnMenuAfterButtonClick=function(e,t){e=this.columnController.getPrimaryColumn(e);this.menuFactory.showMenuAfterButtonClick(e,t)},T.prototype.showColumnMenuAfterMouseClick=function(e,t){e=this.columnController.getPrimaryColumn(e);this.menuFactory.showMenuAfterMouseEvent(e,t)},T.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},T.prototype.setPopupParent=function(e){this.gridOptionsWrapper.setProperty(u.GridOptionsWrapper.PROP_POPUP_PARENT,e)},T.prototype.tabToNextCell=function(){return this.rowRenderer.tabToNextCell(!1)},T.prototype.tabToPreviousCell=function(){return this.rowRenderer.tabToNextCell(!0)},T.prototype.getCellRendererInstances=function(e){return this.rowRenderer.getCellRendererInstances(e=void 0===e?{}:e)},T.prototype.getCellEditorInstances=function(e){return this.rowRenderer.getCellEditorInstances(e=void 0===e?{}:e)},T.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},T.prototype.stopEditing=function(e){this.rowRenderer.stopEditing(e=void 0===e?!1:e)},T.prototype.startEditingCell=function(e){var t=this.columnController.getGridColumn(e.colKey);t?(t={rowIndex:e.rowIndex,floating:e.rowPinned,column:t},t=new y.GridCell(t),b.Utils.missing(e.rowPinned)&&this.gridPanel.ensureIndexVisible(e.rowIndex),this.rowRenderer.startEditingCell(t,e.keyPress,e.charPress)):console.warn("ag-Grid: no column found for "+e.colKey)},T.prototype.addAggFunc=function(e,t){this.aggFuncService&&this.aggFuncService.addAggFunc(e,t)},T.prototype.addAggFuncs=function(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)},T.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},T.prototype.updateRowData=function(e){var t=null;return this.clientSideRowModel?t=this.clientSideRowModel.updateRowData(e):this.infinitePageRowModel?this.infinitePageRowModel.updateRowData(e):console.error("ag-Grid: updateRowData() only works with ClientSideRowModel and InfiniteRowModel."),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells(),t},T.prototype.batchUpdateRowData=function(e,t){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(e,t):console.error("ag-Grid: api.batchUpdateRowData() only works with ClientSideRowModel.")},T.prototype.insertItemsAtIndex=function(e,t,i){void 0===i&&(i=!1),console.warn("ag-Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:t,addIndex:e,update:null,remove:null})},T.prototype.removeItems=function(e,t){void 0===t&&(t=!1),console.warn("ag-Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");t=e.map(function(e){return e.data});this.updateRowData({add:null,addIndex:null,update:null,remove:t})},T.prototype.addItems=function(e,t){void 0===t&&(t=!1),console.warn("ag-Grid: addItems() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:e,addIndex:null,update:null,remove:null})},T.prototype.refreshVirtualPageCache=function(){console.warn("ag-Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},T.prototype.refreshInfinitePageCache=function(){console.warn("ag-Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},T.prototype.refreshInfiniteCache=function(){this.infinitePageRowModel?this.infinitePageRowModel.refreshCache():console.warn("ag-Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")},T.prototype.purgeVirtualPageCache=function(){console.warn("ag-Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfinitePageCache()},T.prototype.purgeInfinitePageCache=function(){console.warn("ag-Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfiniteCache()},T.prototype.purgeInfiniteCache=function(){this.infinitePageRowModel?this.infinitePageRowModel.purgeCache():console.warn("ag-Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")},T.prototype.purgeEnterpriseCache=function(e){console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()"),this.purgeServerSideCache(e)},T.prototype.purgeServerSideCache=function(e){this.serverSideRowModel?this.serverSideRowModel.purgeCache(e):console.warn("ag-Grid: api.purgeServerSideCache is only available when rowModelType='enterprise'.")},T.prototype.getVirtualRowCount=function(){return console.warn("ag-Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead"),this.getInfiniteRowCount()},T.prototype.getInfiniteRowCount=function(){if(this.infinitePageRowModel)return this.infinitePageRowModel.getVirtualRowCount();console.warn("ag-Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")},T.prototype.isMaxRowFound=function(){if(this.infinitePageRowModel)return this.infinitePageRowModel.isMaxRowFound();console.warn("ag-Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")},T.prototype.setVirtualRowCount=function(e,t){console.warn("ag-Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead"),this.setInfiniteRowCount(e,t)},T.prototype.setInfiniteRowCount=function(e,t){this.infinitePageRowModel?this.infinitePageRowModel.setVirtualRowCount(e,t):console.warn("ag-Grid: api.setVirtualRowCount is only available when rowModelType='virtual'.")},T.prototype.getVirtualPageState=function(){return console.warn("ag-Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},T.prototype.getInfinitePageState=function(){return console.warn("ag-Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},T.prototype.getCacheBlockState=function(){return this.infinitePageRowModel?this.infinitePageRowModel.getBlockState():this.serverSideRowModel?this.serverSideRowModel.getBlockState():void console.warn("ag-Grid: api.getCacheBlockState() is only available when rowModelType='infinite' or rowModelType='serverSide'.")},T.prototype.checkGridSize=function(){this.gridPanel.setBodyAndHeaderHeights()},T.prototype.getFirstRenderedRow=function(){return console.log("in ag-Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()"),this.getFirstDisplayedRow()},T.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},T.prototype.getLastRenderedRow=function(){return console.log("in ag-Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()"),this.getLastDisplayedRow()},T.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},T.prototype.getDisplayedRowAtIndex=function(e){return this.rowModel.getRow(e)},T.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},T.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},T.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},T.prototype.paginationSetPageSize=function(e){this.gridOptionsWrapper.setProperty("paginationPageSize",e)},T.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},T.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},T.prototype.paginationGetRowCount=function(){return this.paginationProxy.getTotalRowCount()},T.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},T.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},T.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},T.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},T.prototype.paginationGoToPage=function(e){this.paginationProxy.goToPage(e)},n([f.Autowired("immutableService"),o("design:type",A.ImmutableService)],T.prototype,"immutableService",void 0),n([f.Autowired("csvCreator"),o("design:type",r.CsvCreator)],T.prototype,"csvCreator",void 0),n([f.Optional("excelCreator"),o("design:type",Object)],T.prototype,"excelCreator",void 0),n([f.Autowired("gridCore"),o("design:type",g.GridCore)],T.prototype,"gridCore",void 0),n([f.Autowired("rowRenderer"),o("design:type",s.RowRenderer)],T.prototype,"rowRenderer",void 0),n([f.Autowired("filterManager"),o("design:type",a.FilterManager)],T.prototype,"filterManager",void 0),n([f.Autowired("columnController"),o("design:type",l.ColumnController)],T.prototype,"columnController",void 0),n([f.Autowired("selectionController"),o("design:type",c.SelectionController)],T.prototype,"selectionController",void 0),n([f.Autowired("gridOptionsWrapper"),o("design:type",u.GridOptionsWrapper)],T.prototype,"gridOptionsWrapper",void 0),n([f.Autowired("valueService"),o("design:type",d.ValueService)],T.prototype,"valueService",void 0),n([f.Autowired("alignedGridsService"),o("design:type",x.AlignedGridsService)],T.prototype,"alignedGridsService",void 0),n([f.Autowired("eventService"),o("design:type",h.EventService)],T.prototype,"eventService",void 0),n([f.Autowired("pinnedRowModel"),o("design:type",S.PinnedRowModel)],T.prototype,"pinnedRowModel",void 0),n([f.Autowired("context"),o("design:type",f.Context)],T.prototype,"context",void 0),n([f.Autowired("rowModel"),o("design:type",Object)],T.prototype,"rowModel",void 0),n([f.Autowired("sortController"),o("design:type",m.SortController)],T.prototype,"sortController",void 0),n([f.Autowired("paginationProxy"),o("design:type",_.PaginationProxy)],T.prototype,"paginationProxy",void 0),n([f.Autowired("focusedCellController"),o("design:type",v.FocusedCellController)],T.prototype,"focusedCellController",void 0),n([f.Optional("rangeController"),o("design:type",Object)],T.prototype,"rangeController",void 0),n([f.Optional("clipboardService"),o("design:type",Object)],T.prototype,"clipboardService",void 0),n([f.Optional("aggFuncService"),o("design:type",Object)],T.prototype,"aggFuncService",void 0),n([f.Autowired("menuFactory"),o("design:type",Object)],T.prototype,"menuFactory",void 0),n([f.Optional("contextMenuFactory"),o("design:type",Object)],T.prototype,"contextMenuFactory",void 0),n([f.Autowired("cellRendererFactory"),o("design:type",w.CellRendererFactory)],T.prototype,"cellRendererFactory",void 0),n([f.Autowired("cellEditorFactory"),o("design:type",C.CellEditorFactory)],T.prototype,"cellEditorFactory",void 0),n([f.Autowired("valueCache"),o("design:type",E.ValueCache)],T.prototype,"valueCache",void 0),n([f.Optional("toolPanelComp"),o("design:type",Object)],T.prototype,"toolPanelComp",void 0),n([f.Autowired("animationFrameService"),o("design:type",i.AnimationFrameService)],T.prototype,"animationFrameService",void 0),n([f.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],T.prototype,"init",null),n([f.Bean("gridApi")],T));function T(){this.detailGridInfoMap={}}t.GridApi=A},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(4)),i=i(0),o=(s.prototype.sizeColumnsToFit=function(e){this.columnController.sizeColumnsToFit(e,"api")},s.prototype.setColumnGroupOpened=function(e,t){this.columnController.setColumnGroupOpened(e,t,"api")},s.prototype.getColumnGroup=function(e,t){return this.columnController.getColumnGroup(e,t)},s.prototype.getOriginalColumnGroup=function(e){return this.columnController.getOriginalColumnGroup(e)},s.prototype.getDisplayNameForColumn=function(e,t){return this.columnController.getDisplayNameForColumn(e,t)},s.prototype.getDisplayNameForColumnGroup=function(e,t){return this.columnController.getDisplayNameForColumnGroup(e,t)},s.prototype.getColumn=function(e){return this.columnController.getPrimaryColumn(e)},s.prototype.setColumnState=function(e){return this.columnController.setColumnState(e,"api")},s.prototype.getColumnState=function(){return this.columnController.getColumnState()},s.prototype.resetColumnState=function(){this.columnController.resetColumnState("api")},s.prototype.getColumnGroupState=function(){return this.columnController.getColumnGroupState()},s.prototype.setColumnGroupState=function(e){this.columnController.setColumnGroupState(e,"api")},s.prototype.resetColumnGroupState=function(){this.columnController.resetColumnGroupState("api")},s.prototype.isPinning=function(){return this.columnController.isPinningLeft()||this.columnController.isPinningRight()},s.prototype.isPinningLeft=function(){return this.columnController.isPinningLeft()},s.prototype.isPinningRight=function(){return this.columnController.isPinningRight()},s.prototype.getDisplayedColAfter=function(e){return this.columnController.getDisplayedColAfter(e)},s.prototype.getDisplayedColBefore=function(e){return this.columnController.getDisplayedColBefore(e)},s.prototype.setColumnVisible=function(e,t){this.columnController.setColumnVisible(e,t,"api")},s.prototype.setColumnsVisible=function(e,t){this.columnController.setColumnsVisible(e,t,"api")},s.prototype.setColumnPinned=function(e,t){this.columnController.setColumnPinned(e,t,"api")},s.prototype.setColumnsPinned=function(e,t){this.columnController.setColumnsPinned(e,t,"api")},s.prototype.getAllColumns=function(){return this.columnController.getAllPrimaryColumns()},s.prototype.getAllGridColumns=function(){return this.columnController.getAllGridColumns()},s.prototype.getDisplayedLeftColumns=function(){return this.columnController.getDisplayedLeftColumns()},s.prototype.getDisplayedCenterColumns=function(){return this.columnController.getDisplayedCenterColumns()},s.prototype.getDisplayedRightColumns=function(){return this.columnController.getDisplayedRightColumns()},s.prototype.getAllDisplayedColumns=function(){return this.columnController.getAllDisplayedColumns()},s.prototype.getAllDisplayedVirtualColumns=function(){return this.columnController.getAllDisplayedVirtualColumns()},s.prototype.moveColumn=function(e,t){"number"==typeof e?(console.log("ag-Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead"),this.columnController.moveColumnByIndex(e,t,"api")):this.columnController.moveColumn(e,t,"api")},s.prototype.moveColumnByIndex=function(e,t){this.columnController.moveColumnByIndex(e,t,"api")},s.prototype.moveColumns=function(e,t){this.columnController.moveColumns(e,t,"api")},s.prototype.moveRowGroupColumn=function(e,t){this.columnController.moveRowGroupColumn(e,t)},s.prototype.setColumnAggFunc=function(e,t){this.columnController.setColumnAggFunc(e,t)},s.prototype.setColumnWidth=function(e,t,i){this.columnController.setColumnWidth(e,t,!1,i=void 0===i?!0:i)},s.prototype.setPivotMode=function(e){this.columnController.setPivotMode(e)},s.prototype.isPivotMode=function(){return this.columnController.isPivotMode()},s.prototype.getSecondaryPivotColumn=function(e,t){return this.columnController.getSecondaryPivotColumn(e,t)},s.prototype.setValueColumns=function(e){this.columnController.setValueColumns(e,"api")},s.prototype.getValueColumns=function(){return this.columnController.getValueColumns()},s.prototype.removeValueColumn=function(e){this.columnController.removeValueColumn(e,"api")},s.prototype.removeValueColumns=function(e){this.columnController.removeValueColumns(e,"api")},s.prototype.addValueColumn=function(e){this.columnController.addValueColumn(e,"api")},s.prototype.addValueColumns=function(e){this.columnController.addValueColumns(e,"api")},s.prototype.setRowGroupColumns=function(e){this.columnController.setRowGroupColumns(e,"api")},s.prototype.removeRowGroupColumn=function(e){this.columnController.removeRowGroupColumn(e,"api")},s.prototype.removeRowGroupColumns=function(e){this.columnController.removeRowGroupColumns(e,"api")},s.prototype.addRowGroupColumn=function(e){this.columnController.addRowGroupColumn(e,"api")},s.prototype.addRowGroupColumns=function(e){this.columnController.addRowGroupColumns(e,"api")},s.prototype.getRowGroupColumns=function(){return this.columnController.getRowGroupColumns()},s.prototype.setPivotColumns=function(e){this.columnController.setPivotColumns(e,"api")},s.prototype.removePivotColumn=function(e){this.columnController.removePivotColumn(e,"api")},s.prototype.removePivotColumns=function(e){this.columnController.removePivotColumns(e,"api")},s.prototype.addPivotColumn=function(e){this.columnController.addPivotColumn(e,"api")},s.prototype.addPivotColumns=function(e){this.columnController.addPivotColumns(e,"api")},s.prototype.getPivotColumns=function(){return this.columnController.getPivotColumns()},s.prototype.getLeftDisplayedColumnGroups=function(){return this.columnController.getLeftDisplayedColumnGroups()},s.prototype.getCenterDisplayedColumnGroups=function(){return this.columnController.getCenterDisplayedColumnGroups()},s.prototype.getRightDisplayedColumnGroups=function(){return this.columnController.getRightDisplayedColumnGroups()},s.prototype.getAllDisplayedColumnGroups=function(){return this.columnController.getAllDisplayedColumnGroups()},s.prototype.autoSizeColumn=function(e){return this.columnController.autoSizeColumn(e,"api")},s.prototype.autoSizeColumns=function(e){return this.columnController.autoSizeColumns(e,"api")},s.prototype.autoSizeAllColumns=function(){this.columnController.autoSizeAllColumns("api")},s.prototype.setSecondaryColumns=function(e){this.columnController.setSecondaryColumns(e,"api")},s.prototype.columnGroupOpened=function(e,t){console.error("ag-Grid: columnGroupOpened no longer exists, use setColumnGroupOpened"),this.setColumnGroupOpened(e,t)},s.prototype.hideColumns=function(e,t){console.error("ag-Grid: hideColumns is deprecated, use setColumnsVisible"),this.columnController.setColumnsVisible(e,!t,"api")},s.prototype.hideColumn=function(e,t){console.error("ag-Grid: hideColumn is deprecated, use setColumnVisible"),this.columnController.setColumnVisible(e,!t,"api")},s.prototype.setState=function(e){return console.error("ag-Grid: setState is deprecated, use setColumnState"),this.setColumnState(e)},s.prototype.getState=function(){return console.error("ag-Grid: getState is deprecated, use getColumnState"),this.getColumnState()},s.prototype.resetState=function(){console.error("ag-Grid: resetState is deprecated, use resetColumnState"),this.resetColumnState()},s.prototype.getAggregationColumns=function(){return console.error("ag-Grid: getAggregationColumns is deprecated, use getValueColumns"),this.columnController.getValueColumns()},s.prototype.removeAggregationColumn=function(e){console.error("ag-Grid: removeAggregationColumn is deprecated, use removeValueColumn"),this.columnController.removeValueColumn(e,"api")},s.prototype.removeAggregationColumns=function(e){console.error("ag-Grid: removeAggregationColumns is deprecated, use removeValueColumns"),this.columnController.removeValueColumns(e,"api")},s.prototype.addAggregationColumn=function(e){console.error("ag-Grid: addAggregationColumn is deprecated, use addValueColumn"),this.columnController.addValueColumn(e,"api")},s.prototype.addAggregationColumns=function(e){console.error("ag-Grid: addAggregationColumns is deprecated, use addValueColumns"),this.columnController.addValueColumns(e,"api")},s.prototype.setColumnAggFunction=function(e,t){console.error("ag-Grid: setColumnAggFunction is deprecated, use setColumnAggFunc"),this.columnController.setColumnAggFunc(e,t,"api")},s.prototype.getDisplayNameForCol=function(e){return console.error("ag-Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn"),this.getDisplayNameForColumn(e,null)},n([i.Autowired("columnController"),o("design:type",r.ColumnController)],s.prototype,"columnController",void 0),n([i.Bean("columnApi")],s));function s(){}t.ColumnApi=o},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),i=i(13),a=new s.NumberSequence,i=(o=i.BeanStub,r(l,o),l.prototype.getCompId=function(){return this.compId},l.prototype.instantiate=function(e){this.instantiateRecurse(this.getGui(),e)},l.prototype.instantiateRecurse=function(t,n){var o=this;s.Utils.copyNodeList(t.childNodes).forEach(function(i){var e=n.createComponent(i,function(e){var t=o.getAttrLists(i);o.copyAttributesFromNode(t,e.getGui()),o.createChildAttributes(t,e),o.addEventListenersToComponent(t,e)});e?o.swapComponentForNode(e,t,i):(i.childNodes&&o.instantiateRecurse(i,n),i instanceof HTMLElement&&(e=o.getAttrLists(i),o.addEventListenersToElement(e,i)))})},l.prototype.getAttrLists=function(e){var o={bindings:[],events:[],normal:[]};return s.Utils.iterateNamedNodeMap(e.attributes,function(e,t){var i,n=e.substr(0,1);"("===n?(i=e.replace("(","").replace(")",""),o.events.push({name:i,value:t})):"["===n?(i=e.replace("[","").replace("]",""),o.bindings.push({name:i,value:t})):o.normal.push({name:e,value:t})}),o},l.prototype.addEventListenersToElement=function(e,i){var n=this;this.addEventListenerCommon(e,function(e,t){n.addDestroyableEventListener(i,e,t)})},l.prototype.addEventListenersToComponent=function(e,i){var n=this;this.addEventListenerCommon(e,function(e,t){n.addDestroyableEventListener(i,e,t)})},l.prototype.addEventListenerCommon=function(e,n){var o=this,r=this.getAgComponentMetaData("methods");e.events.forEach(function(e){var t=e.value,i=s.Utils.find(r,"alias",t),i=s.Utils.exists(i)?i.methodName:t,i=o[i];"function"!=typeof i?console.warn("ag-Grid: count not find callback "+t):(t=s.Utils.hyphenToCamelCase(e.name),n(t,i.bind(o)))})},l.prototype.createChildAttributes=function(e,t){var i=this,n={};e.normal.forEach(function(e){var t=s.Utils.hyphenToCamelCase(e.name);n[t]=e.value}),e.bindings.forEach(function(e){var t=s.Utils.hyphenToCamelCase(e.name);n[t]=i[e.value]}),t.props=n},l.prototype.copyAttributesFromNode=function(e,t){e.normal.forEach(function(e){t.setAttribute(e.name,e.value)})},l.prototype.swapComponentForNode=function(e,t,i){var n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.childComponents.push(e),this.swapInComponentForQuerySelectors(e,i)},l.prototype.swapInComponentForQuerySelectors=function(t,i){for(var e=Object.getPrototypeOf(this),n=this;null!=e;){var o=e.__agComponentMetaData,r=e.constructor.name;o&&o[r]&&o[r].querySelectors&&o[r].querySelectors.forEach(function(e){n[e.attributeName]===i&&(n[e.attributeName]=t)}),e=Object.getPrototypeOf(e)}},l.prototype.setTemplate=function(e){e=s.Utils.loadTemplate(e);this.setTemplateFromElement(e)},l.prototype.setTemplateFromElement=function(e){this.eGui=e,(this.eGui.__agComponent=this).addAnnotatedEventListeners(),this.wireQuerySelectors()},l.prototype.wireQuerySelectors=function(){var o=this;if(this.eGui)for(var i=Object.getPrototypeOf(this),r=this;null!=i;)!function(){var n,e=i.__agComponentMetaData,t=i.constructor.name;e&&e[t]&&e[t].querySelectors&&(n=r,e[t].querySelectors.forEach(function(e){var t,i=o.eGui.querySelector(e.querySelector);i&&(t=i.__agComponent,n[e.attributeName]=t||i)})),i=Object.getPrototypeOf(i)}()},l.prototype.addAnnotatedEventListeners=function(){var e,i=this;this.removeAnnotatedEventListeners(),this.eGui&&(e=this.getAgComponentMetaData("listenerMethods"),s.Utils.missingOrEmpty(e)||(this.annotatedEventListeners||(this.annotatedEventListeners=[]),e.forEach(function(e){var t=i[e.methodName].bind(i);i.eGui.addEventListener(e.eventName,t),i.annotatedEventListeners.push({eventName:e.eventName,listener:t})})))},l.prototype.getAgComponentMetaData=function(e){for(var t=[],i=Object.getPrototypeOf(this);null!=i;){var n=i.__agComponentMetaData,o=i.constructor.name;n&&n[o]&&n[o][e]&&(t=t.concat(n[o][e])),i=Object.getPrototypeOf(i)}return t},l.prototype.removeAnnotatedEventListeners=function(){var t=this;this.annotatedEventListeners&&this.eGui&&(this.annotatedEventListeners.forEach(function(e){t.eGui.removeEventListener(e.eventName,e.listener)}),this.annotatedEventListeners=null)},l.prototype.getGui=function(){return this.eGui},l.prototype.setGui=function(e){this.eGui=e},l.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)},l.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)},l.prototype.appendChild=function(e){s.Utils.isNodeOrElement(e)?this.eGui.appendChild(e):(this.eGui.appendChild((e=e).getGui()),this.childComponents.push(e))},l.prototype.addFeature=function(e,t){e.wireBean(t),t.destroy&&this.addDestroyFunc(t.destroy.bind(t))},l.prototype.isVisible=function(){return this.visible},l.prototype.setVisible=function(e){e!==this.visible&&(this.visible=e,s.Utils.addOrRemoveCssClass(this.eGui,"ag-hidden",!e),e={type:l.EVENT_VISIBLE_CHANGED,visible:this.visible},this.dispatchEvent(e))},l.prototype.addOrRemoveCssClass=function(e,t){s.Utils.addOrRemoveCssClass(this.eGui,e,t)},l.prototype.destroy=function(){o.prototype.destroy.call(this),this.childComponents.forEach(function(e){return e.destroy()}),this.childComponents.length=0,this.removeAnnotatedEventListeners()},l.prototype.addGuiEventListener=function(e,t){var i=this;this.getGui().addEventListener(e,t),this.addDestroyFunc(function(){return i.getGui().removeEventListener(e,t)})},l.prototype.addCssClass=function(e){s.Utils.addCssClass(this.getGui(),e)},l.prototype.removeCssClass=function(e){s.Utils.removeCssClass(this.getGui(),e)},l.prototype.getAttribute=function(e){var t=this.getGui();return t?t.getAttribute(e):null},l.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'+e+'"]')},l.EVENT_VISIBLE_CHANGED="visibleChanged",l);function l(e){var t=o.call(this)||this;return t.childComponents=[],t.annotatedEventListeners=[],t.visible=!0,t.compId=a.next(),e&&t.setTemplate(e),t}t.Component=i},function(e,t,i){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.STEP_EVERYTHING=0,n.STEP_FILTER=1,n.STEP_SORT=2,n.STEP_MAP=3,n.STEP_AGGREGATE=4,n.STEP_PIVOT=5,n.ROW_BUFFER_SIZE=10,n.LAYOUT_INTERVAL=500,n.BATCH_WAIT_MILLIS=50,n.EXPORT_TYPE_DRAG_COPY="dragCopy",n.EXPORT_TYPE_CLIPBOARD="clipboard",n.EXPORT_TYPE_EXCEL="excel",n.EXPORT_TYPE_CSV="csv",n.KEY_BACKSPACE=8,n.KEY_TAB=9,n.KEY_NEW_LINE=10,n.KEY_ENTER=13,n.KEY_SHIFT=16,n.KEY_ESCAPE=27,n.KEY_SPACE=32,n.KEY_LEFT=37,n.KEY_UP=38,n.KEY_RIGHT=39,n.KEY_DOWN=40,n.KEY_DELETE=46,n.KEY_A=65,n.KEY_C=67,n.KEY_V=86,n.KEY_D=68,n.KEY_F2=113,n.KEY_PAGE_UP=33,n.KEY_PAGE_DOWN=34,n.KEY_PAGE_HOME=36,n.KEY_PAGE_END=35,n.ROW_MODEL_TYPE_INFINITE="infinite",n.ROW_MODEL_TYPE_VIEWPORT="viewport",n.ROW_MODEL_TYPE_CLIENT_SIDE="clientSide",n.ROW_MODEL_TYPE_SERVER_SIDE="serverSide",n.DEPRECATED_ROW_MODEL_TYPE_NORMAL="normal",n.ALWAYS="always",n.ONLY_WHEN_GROUPING="onlyWhenGrouping",n.PINNED_TOP="top",n.PINNED_BOTTOM="bottom",t.Constants=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(3)),s=i(1),a=i(0),l=i(2),c=i(31),u=i(7),i=i(6);function d(e,t,i){this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new r.EventService,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.visible=!e.hide,this.sort=e.sort,this.sortedAt=e.sortedAt,this.colId=t,this.primary=i,this.lockPosition=!0===e.lockPosition,this.lockPinned=!0===e.lockPinned,this.lockVisible=!0===e.lockVisible}d.prototype.isLockPosition=function(){return this.lockPosition},d.prototype.isLockVisible=function(){return this.lockVisible},d.prototype.isLockPinned=function(){return this.lockPinned},d.prototype.setParent=function(e){this.parent=e},d.prototype.getParent=function(){return this.parent},d.prototype.initialise=function(){this.setPinned(this.colDef.pinned);var e=this.gridOptionsWrapper.getMinColWidth(),t=this.gridOptionsWrapper.getMaxColWidth(),e=(this.colDef.minWidth?this.minWidth=this.colDef.minWidth:this.minWidth=e,this.colDef.maxWidth?this.maxWidth=this.colDef.maxWidth:this.maxWidth=t,this.actualWidth=this.columnUtils.calculateColInitialWidth(this.colDef),this.gridOptionsWrapper.isSuppressFieldDotNotation());this.fieldContainsDots=s.Utils.exists(this.colDef.field)&&0<=this.colDef.field.indexOf(".")&&!e,this.tooltipFieldContainsDots=s.Utils.exists(this.colDef.tooltipField)&&0<=this.colDef.tooltipField.indexOf(".")&&!e,this.validate()},d.prototype.isEmptyGroup=function(){return!1},d.prototype.isRowGroupDisplayed=function(e){if(s.Utils.missing(this.colDef)||s.Utils.missing(this.colDef.showRowGroup))return!1;var t=!0===this.colDef.showRowGroup,e=this.colDef.showRowGroup===e;return t||e},d.prototype.getUniqueId=function(){return this.getId()},d.prototype.isPrimary=function(){return this.primary},d.prototype.isFilterAllowed=function(){return this.primary&&!this.colDef.suppressFilter},d.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},d.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},d.prototype.validate=function(){var t=this.colDef;this.gridOptionsWrapper.isEnterprise()||["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","pivot","pivotIndex","aggFunc"].forEach(function(e){s.Utils.exists(t[e])&&console.warn("ag-Grid: "+e+" is only valid in ag-Grid-Enterprise, your column definition should not have "+e)}),this.gridOptionsWrapper.isTreeData()&&["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","pivot","pivotIndex"].forEach(function(e){s.Utils.exists(t[e])&&console.warn("ag-Grid: "+e+" is not possible when doing tree data, your column definition should not have "+e)}),s.Utils.exists(this.colDef.width)&&"number"!=typeof this.colDef.width&&console.warn("ag-Grid: colDef.width should be a number, not "+typeof this.colDef.width),s.Utils.get(this,"colDef.cellRendererParams.restrictToOneGroup",null)&&console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.restrictToOneGroup is deprecated. You should use showRowGroup"),s.Utils.get(this,"colDef.cellRendererParams.keyMap",null)&&console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.keyMap is deprecated. You should use colDef.keyCreator"),s.Utils.get(this,"colDef.cellRendererParams.keyMap",null)&&console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.keyMap is deprecated. You should use colDef.keyCreator"),t.floatingCellRenderer&&(console.warn("ag-Grid: since v11, floatingCellRenderer is now pinnedRowCellRenderer"),this.colDef.pinnedRowCellRenderer=t.floatingCellRenderer),t.floatingRendererFramework&&(console.warn("ag-Grid: since v11, floatingRendererFramework is now pinnedRowCellRendererFramework"),this.colDef.pinnedRowCellRendererFramework=t.floatingRendererFramework),t.floatingRendererParams&&(console.warn("ag-Grid: since v11, floatingRendererParams is now pinnedRowCellRendererParams"),this.colDef.pinnedRowCellRendererParams=t.floatingRendererParams),t.floatingValueFormatter&&(console.warn("ag-Grid: since v11, floatingValueFormatter is now pinnedRowValueFormatter"),this.colDef.pinnedRowValueFormatter=t.floatingValueFormatter),t.cellFormatter&&(console.warn("ag-Grid: since v12, cellFormatter is now valueFormatter"),s.Utils.missing(this.colDef.valueFormatter)&&(this.colDef.valueFormatter=t.cellFormatter)),t.headerCellTemplate&&console.warn("ag-Grid: since v15, headerCellTemplate is gone, use header component instead."),t.headerCellRenderer&&console.warn("ag-Grid: since v15, headerCellRenderer is gone, use header component instead."),t.volatile&&console.warn("ag-Grid: since v16, colDef.volatile is gone, please check refresh docs on how to refresh specific cells.")},d.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)},d.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)},d.prototype.createIsColumnFuncParams=function(e){return{node:e,data:e.data,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},d.prototype.isSuppressNavigable=function(e){return"boolean"==typeof this.colDef.suppressNavigable?this.colDef.suppressNavigable:"function"==typeof this.colDef.suppressNavigable&&(e=this.createIsColumnFuncParams(e),(0,this.colDef.suppressNavigable)(e))},d.prototype.isCellEditable=function(e){return!(e.group&&!this.gridOptionsWrapper.isEnableGroupEdit())&&this.isColumnFunc(e,this.colDef.editable)},d.prototype.isRowDrag=function(e){return this.isColumnFunc(e,this.colDef.rowDrag)},d.prototype.isCellCheckboxSelection=function(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)},d.prototype.isSuppressPaste=function(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)},d.prototype.isResizable=function(){var e=this.gridOptionsWrapper.isEnableColResize(),t=this.colDef&&this.colDef.suppressResize;return e&&!t},d.prototype.isColumnFunc=function(e,t){return"boolean"==typeof t?t:"function"==typeof t&&t(this.createIsColumnFuncParams(e))},d.prototype.setMoving=function(e,t){void 0===t&&(t="api"),this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_MOVING_CHANGED,t))},d.prototype.createColumnEvent=function(e,t){return{api:this.gridApi,columnApi:this.columnApi,type:e,column:this,columns:[this],source:t}},d.prototype.isMoving=function(){return this.moving},d.prototype.getSort=function(){return this.sort},d.prototype.setSort=function(e,t){void 0===t&&(t="api"),this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_SORT_CHANGED,t)))},d.prototype.setMenuVisible=function(e,t){void 0===t&&(t="api"),this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_MENU_VISIBLE_CHANGED,t)))},d.prototype.isMenuVisible=function(){return this.menuVisible},d.prototype.isSortAscending=function(){return this.sort===d.SORT_ASC},d.prototype.isSortDescending=function(){return this.sort===d.SORT_DESC},d.prototype.isSortNone=function(){return s.Utils.missing(this.sort)},d.prototype.isSorting=function(){return s.Utils.exists(this.sort)},d.prototype.getSortedAt=function(){return this.sortedAt},d.prototype.setSortedAt=function(e){this.sortedAt=e},d.prototype.setAggFunc=function(e){this.aggFunc=e},d.prototype.getAggFunc=function(){return this.aggFunc},d.prototype.getLeft=function(){return this.left},d.prototype.getOldLeft=function(){return this.oldLeft},d.prototype.getRight=function(){return this.left+this.actualWidth},d.prototype.setLeft=function(e,t){void 0===t&&(t="api"),this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_LEFT_CHANGED,t)))},d.prototype.isFilterActive=function(){return this.filterActive},d.prototype.setFilterActive=function(e,t){void 0===t&&(t="api"),this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FILTER_ACTIVE_CHANGED,t))),this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FILTER_CHANGED,t))},d.prototype.setPinned=function(e){this.pinned=!0===e||e===d.PINNED_LEFT?d.PINNED_LEFT:e===d.PINNED_RIGHT?d.PINNED_RIGHT:null},d.prototype.setFirstRightPinned=function(e,t){void 0===t&&(t="api"),this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FIRST_RIGHT_PINNED_CHANGED,t)))},d.prototype.setLastLeftPinned=function(e,t){void 0===t&&(t="api"),this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_LAST_LEFT_PINNED_CHANGED,t)))},d.prototype.isFirstRightPinned=function(){return this.firstRightPinned},d.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},d.prototype.isPinned=function(){return this.pinned===d.PINNED_LEFT||this.pinned===d.PINNED_RIGHT},d.prototype.isPinnedLeft=function(){return this.pinned===d.PINNED_LEFT},d.prototype.isPinnedRight=function(){return this.pinned===d.PINNED_RIGHT},d.prototype.getPinned=function(){return this.pinned},d.prototype.setVisible=function(e,t){void 0===t&&(t="api");e=!0===e;this.visible!==e&&(this.visible=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_VISIBLE_CHANGED,t)))},d.prototype.isVisible=function(){return this.visible},d.prototype.getColDef=function(){return this.colDef},d.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},d.prototype.getColId=function(){return this.colId},d.prototype.getId=function(){return this.getColId()},d.prototype.getDefinition=function(){return this.colDef},d.prototype.getActualWidth=function(){return this.actualWidth},d.prototype.createBaseColDefParams=function(e){return{node:e,data:e.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}},d.prototype.getColSpan=function(e){return s.Utils.missing(this.colDef.colSpan)?1:(e=this.createBaseColDefParams(e),1<(e=this.colDef.colSpan(e))?e:1)},d.prototype.getRowSpan=function(e){return s.Utils.missing(this.colDef.rowSpan)?1:(e=this.createBaseColDefParams(e),1<(e=this.colDef.rowSpan(e))?e:1)},d.prototype.setActualWidth=function(e,t){void 0===t&&(t="api"),this.actualWidth!==e&&(this.actualWidth=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_WIDTH_CHANGED,t)))},d.prototype.isGreaterThanMax=function(e){return!!this.maxWidth&&e>this.maxWidth},d.prototype.getMinWidth=function(){return this.minWidth},d.prototype.getMaxWidth=function(){return this.maxWidth},d.prototype.setMinimum=function(e){this.setActualWidth(this.minWidth,e=void 0===e?"api":e)},d.prototype.setRowGroupActive=function(e,t){void 0===t&&(t="api"),this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_ROW_GROUP_CHANGED,t)))},d.prototype.isRowGroupActive=function(){return this.rowGroupActive},d.prototype.setPivotActive=function(e,t){void 0===t&&(t="api"),this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_PIVOT_CHANGED,t)))},d.prototype.isPivotActive=function(){return this.pivotActive},d.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},d.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},d.prototype.setValueActive=function(e,t){void 0===t&&(t="api"),this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_VALUE_CHANGED,t)))},d.prototype.isValueActive=function(){return this.aggregationActive},d.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},d.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},d.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},d.prototype.getMenuTabs=function(e){var t=this.getColDef().menuTabs;return t=null==t?e:t},d.EVENT_MOVING_CHANGED="movingChanged",d.EVENT_LEFT_CHANGED="leftChanged",d.EVENT_WIDTH_CHANGED="widthChanged",d.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",d.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",d.EVENT_VISIBLE_CHANGED="visibleChanged",d.EVENT_FILTER_CHANGED="filterChanged",d.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",d.EVENT_SORT_CHANGED="sortChanged",d.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",d.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",d.EVENT_PIVOT_CHANGED="columnPivotChanged",d.EVENT_VALUE_CHANGED="columnValueChanged",d.PINNED_RIGHT="right",d.PINNED_LEFT="left",d.SORT_ASC="asc",d.SORT_DESC="desc",n([a.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],d.prototype,"gridOptionsWrapper",void 0),n([a.Autowired("columnUtils"),o("design:type",c.ColumnUtils)],d.prototype,"columnUtils",void 0),n([a.Autowired("frameworkFactory"),o("design:type",Object)],d.prototype,"frameworkFactory",void 0),n([a.Autowired("columnApi"),o("design:type",u.ColumnApi)],d.prototype,"columnApi",void 0),n([a.Autowired("gridApi"),o("design:type",i.GridApi)],d.prototype,"gridApi",void 0),n([a.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],d.prototype,"initialise",null),t.Column=d},function(e,t,i){"use strict";function n(e,t,i,n){null===e?console.error("ag-Grid: QuerySelector selector should not be null"):"number"==typeof n?console.error("ag-Grid: QuerySelector should be on an attribute"):o(t,"querySelectors",{attributeName:i,querySelector:e})}function o(e,t,i){e=function(e,t){e.__agComponentMetaData||(e.__agComponentMetaData={});e.__agComponentMetaData[t]||(e.__agComponentMetaData[t]={});return e.__agComponentMetaData[t]}(e,e.constructor.name);e[t]||(e[t]=[]),e[t].push(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.QuerySelector=function(e){return n.bind(this,e)},t.RefSelector=function(e){return n.bind(this,"[ref="+e+"]")},t.Listener=function(e){return function(e,t,i){null===e?console.error("ag-Grid: EventListener eventName should not be null"):o(t,"listenerMethods",{methodName:i,eventName:e})}.bind(this,e)},t.Method=function(e){return function(e,t,i){null===e?console.error("ag-Grid: EventListener eventName should not be null"):o(t,"methods",{methodName:i,alias:e})}.bind(this,e)}},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),a=i(0),i=i(0),r=(l.prototype.setBeans=function(e){this.logging=e.isDebug()},l.prototype.create=function(e){return new c(e,this.isLogging.bind(this))},l.prototype.isLogging=function(){return this.logging},n([r(0,i.Qualifier("gridOptionsWrapper")),o("design:type",Function),o("design:paramtypes",[s.GridOptionsWrapper]),o("design:returntype",void 0)],l.prototype,"setBeans",null),n([a.Bean("loggerFactory")],l));function l(){}t.LoggerFactory=r;u.prototype.isLogging=function(){return this.isLoggingFunc()},u.prototype.log=function(e){this.isLoggingFunc()&&console.log("ag-Grid."+this.name+": "+e)};var c=u;function u(e,t){this.name=e,this.isLoggingFunc=t}t.Logger=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),o=i(2),r=i(1);function s(){this.destroyFunctions=[],this.destroyed=!1}s.prototype.destroy=function(){this.destroyFunctions.forEach(function(e){return e()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:s.EVENT_DESTROYED})},s.prototype.addEventListener=function(e,t){this.localEventService||(this.localEventService=new n.EventService),this.localEventService.addEventListener(e,t)},s.prototype.removeEventListener=function(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)},s.prototype.dispatchEventAsync=function(e){var t=this;setTimeout(function(){return t.dispatchEvent(e)},0)},s.prototype.dispatchEvent=function(e){this.localEventService&&this.localEventService.dispatchEvent(e)},s.prototype.addDestroyableEventListener=function(e,t,i){this.destroyed||(e instanceof HTMLElement?r._.addSafePassiveEventListener(e,t,i):(e instanceof Window||o.GridOptionsWrapper,e.addEventListener(t,i)),this.destroyFunctions.push(function(){e instanceof HTMLElement||e instanceof Window||o.GridOptionsWrapper,e.removeEventListener(t,i)}))},s.prototype.isAlive=function(){return!this.destroyed},s.prototype.addDestroyFunc=function(e){this.isAlive()?this.destroyFunctions.push(e):e()},s.EVENT_DESTROYED="destroyed",t.BeanStub=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(3)),a=i(5),s=i(2),l=i(17),c=i(16),u=i(4),d=i(7),h=i(0),p=i(9),f=i(1),g=i(33),i=i(6),s=(m.prototype.setData=function(e){var t=this.data,e=(this.data=e,this.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.createDataChangedEvent(e,t,!1));this.dispatchLocalEvent(e)},m.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},m.prototype.createDataChangedEvent=function(e,t,i){return{type:m.EVENT_DATA_CHANGED,node:this,oldData:t,newData:e,update:i}},m.prototype.createLocalRowEvent=function(e){return{type:e,node:this}},m.prototype.updateData=function(e){var t=this.data,e=(this.data=e,this.updateDataOnDetailNode(),this.checkRowSelectable(),this.updateDataOnDetailNode(),this.createDataChangedEvent(e,t,!0));this.dispatchLocalEvent(e)},m.prototype.getRowIndexString=function(){return this.rowPinned===p.Constants.PINNED_TOP?"t-"+this.rowIndex:this.rowPinned===p.Constants.PINNED_BOTTOM?"b-"+this.rowIndex:this.rowIndex.toString()},m.prototype.createDaemonNode=function(){var e=new m;return this.context.wireBean(e),e.id=this.id,e.data=this.data,e.daemon=!0,e.selected=this.selected,e.level=this.level,e},m.prototype.setDataAndId=function(e,t){var i=f.Utils.exists(this.id)?this.createDaemonNode():null,n=this.data,t=(this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.selectionController.syncInRowNode(this,i),this.checkRowSelectable(),this.createDataChangedEvent(e,n,!1));this.dispatchLocalEvent(t)},m.prototype.checkRowSelectable=function(){var e=this.gridOptionsWrapper.getIsRowSelectableFunc(),t=e&&f.Utils.exists(this);this.setRowSelectable(!t||e(this))},m.prototype.setRowSelectable=function(e){this.selectable!==e&&(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_SELECTABLE_CHANGED)))},m.prototype.setId=function(e){var t=this.gridOptionsWrapper.getRowNodeIdFunc();t?this.data?this.id=t(this.data):this.id=void 0:this.id=e},m.prototype.isPixelInRange=function(e){return e>=this.rowTop&&e<this.rowTop+this.rowHeight},m.prototype.clearRowTop=function(){this.oldRowTop=this.rowTop,this.setRowTop(null)},m.prototype.setFirstChild=function(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_FIRST_CHILD_CHANGED)))},m.prototype.setLastChild=function(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_LAST_CHILD_CHANGED)))},m.prototype.setChildIndex=function(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_CHILD_INDEX_CHANGED)))},m.prototype.setRowTop=function(e){this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_TOP_CHANGED)))},m.prototype.setDragging=function(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_DRAGGING_CHANGED)))},m.prototype.setAllChildrenCount=function(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},m.prototype.setRowHeight=function(e){this.rowHeight=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_HEIGHT_CHANGED))},m.prototype.setRowIndex=function(e){this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_ROW_INDEX_CHANGED))},m.prototype.setUiLevel=function(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_UI_LEVEL_CHANGED)))},m.prototype.setExpanded=function(e){this.expanded!==e&&(this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(m.EVENT_EXPANDED_CHANGED)),e=this.createGlobalRowEvent(a.Events.EVENT_ROW_GROUP_OPENED),this.mainEventService.dispatchEvent(e))},m.prototype.createGlobalRowEvent=function(e){return{type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},m.prototype.dispatchLocalEvent=function(e){this.eventService&&this.eventService.dispatchEvent(e)},m.prototype.setDataValue=function(e,t){e=this.columnController.getPrimaryColumn(e);this.valueService.setValue(this,e,t),this.dispatchCellChangedEvent(e,t)},m.prototype.setGroupValue=function(e,t){e=this.columnController.getGridColumn(e);f.Utils.missing(this.groupData)&&(this.groupData={}),this.groupData[e.getColId()]=t,this.dispatchCellChangedEvent(e,t)},m.prototype.setAggData=function(e){var i=this,t=f.Utils.getAllKeysInObjects([this.aggData,e]);this.aggData=e,this.eventService&&t.forEach(function(e){var t=i.columnController.getGridColumn(e),e=i.aggData?i.aggData[e]:void 0;i.dispatchCellChangedEvent(t,e)})},m.prototype.hasChildren=function(){return this.group||this.childrenAfterGroup&&0<this.childrenAfterGroup.length},m.prototype.isEmptyFillerNode=function(){return this.group&&f.Utils.missingOrEmpty(this.childrenAfterGroup)},m.prototype.dispatchCellChangedEvent=function(e,t){this.dispatchLocalEvent({type:m.EVENT_CELL_CHANGED,node:this,column:e,newValue:t})},m.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},m.prototype.isExpandable=function(){return this.hasChildren()||this.master},m.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},m.prototype.depthFirstSearch=function(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(t)}),t(this)},m.prototype.calculateSelectedFromChildren=function(){var e=!1,t=!1,i=!1;if(this.childrenAfterGroup)for(var n=0;n<this.childrenAfterGroup.length;n++){var o=this.childrenAfterGroup[n];if(o.selectable)switch(o.isSelected()){case!0:e=!0;break;case!1:t=!0;break;default:i=!0}}this.selectThisNode(i?void 0:!(!e||t)||!(!e&&t)&&void 0)},m.prototype.calculateSelectedFromChildrenBubbleUp=function(){this.calculateSelectedFromChildren(),this.parent&&this.parent.calculateSelectedFromChildrenBubbleUp()},m.prototype.setSelectedInitialValue=function(e){this.selected=e},m.prototype.setSelected=function(e,t,i){this.setSelectedParams({newValue:e,clearSelection:t=void 0===t?!1:t,tailingNodeInSequence:i=void 0===i?!1:i,rangeSelect:!1})},m.prototype.isRowPinned=function(){return this.rowPinned===p.Constants.PINNED_TOP||this.rowPinned===p.Constants.PINNED_BOTTOM},m.prototype.setSelectedParams=function(e){var t=this.gridOptionsWrapper.isGroupSelectsChildren(),i=!0===e.newValue,n=!0===e.clearSelection,o=!0===e.tailingNodeInSequence,r=!0===e.rangeSelect,s=t&&!0===e.groupSelectsFiltered;if(void 0===this.id)return console.warn("ag-Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.log("ag-Grid: cannot select pinned rows"),0;if(this.footer)return this.sibling.setSelectedParams(e);if(r){e=this.selectionController.getLastSelectedNode()!==this,r=this.gridOptionsWrapper.isRowSelectionMulti();if(e&&r)return this.doRowRangeSelection()}e=0;return s&&this.group||this.selectThisNode(i)&&e++,t&&this.group&&(e+=this.selectChildNodes(i,s)),o||(!i||!n&&this.gridOptionsWrapper.isRowSelectionMulti()||(e+=this.selectionController.clearOtherNodes(this)),0<e&&(s?this.calculatedSelectedForAllGroupNodes():t&&this.parent&&this.parent.calculateSelectedFromChildrenBubbleUp(),r={type:a.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi},this.mainEventService.dispatchEvent(r)),i&&this.selectionController.setLastSelectedNode(this)),e},m.prototype.doRowRangeSelection=function(){var t=0,i=this.gridOptionsWrapper.isGroupSelectsChildren(),e=this.selectionController.getLastSelectedNode(),e=(this.rowModel.getNodesInRangeForSelection(e,this).forEach(function(e){e.group&&i||e.selectThisNode(!0)&&t++}),i&&this.calculatedSelectedForAllGroupNodes(),{type:a.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi});return this.mainEventService.dispatchEvent(e),t},m.prototype.isParentOfNode=function(e){for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},m.prototype.calculatedSelectedForAllGroupNodes=function(){this.rowModel.getTopLevelNodes().forEach(function(e){e.group&&(e.depthFirstSearch(function(e){e.group&&e.calculateSelectedFromChildren()}),e.calculateSelectedFromChildren())})},m.prototype.selectThisNode=function(e){if(!this.selectable||this.selected===e)return!1;this.selected=e,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(m.EVENT_ROW_SELECTED));e=this.createGlobalRowEvent(a.Events.EVENT_ROW_SELECTED);return this.mainEventService.dispatchEvent(e),!0},m.prototype.selectChildNodes=function(e,t){var i=t?this.childrenAfterFilter:this.childrenAfterGroup,n=0;if(!f.Utils.missing(i)){for(var o=0;o<i.length;o++)n+=i[o].setSelectedParams({newValue:e,clearSelection:!1,tailingNodeInSequence:!0,groupSelectsFiltered:t});return n}},m.prototype.addEventListener=function(e,t){this.eventService||(this.eventService=new r.EventService),this.eventService.addEventListener(e,t)},m.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)},m.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(m.EVENT_MOUSE_ENTER))},m.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(m.EVENT_MOUSE_LEAVE))},m.prototype.getFirstChildOfFirstChild=function(e){for(var t,i=this,n=!0,o=!1;n&&!o;){var r=i.parent;f.Utils.exists(r)&&i.firstChild?r.rowGroupColumn===e&&(o=!0,t=r):n=!1,i=r}return o?t:null},m.EVENT_ROW_SELECTED="rowSelected",m.EVENT_DATA_CHANGED="dataChanged",m.EVENT_CELL_CHANGED="cellChanged",m.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",m.EVENT_MOUSE_ENTER="mouseEnter",m.EVENT_MOUSE_LEAVE="mouseLeave",m.EVENT_HEIGHT_CHANGED="heightChanged",m.EVENT_TOP_CHANGED="topChanged",m.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",m.EVENT_LAST_CHILD_CHANGED="lastChildChanged",m.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",m.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",m.EVENT_EXPANDED_CHANGED="expandedChanged",m.EVENT_SELECTABLE_CHANGED="selectableChanged",m.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",m.EVENT_DRAGGING_CHANGED="draggingChanged",n([h.Autowired("eventService"),o("design:type",r.EventService)],m.prototype,"mainEventService",void 0),n([h.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],m.prototype,"gridOptionsWrapper",void 0),n([h.Autowired("selectionController"),o("design:type",l.SelectionController)],m.prototype,"selectionController",void 0),n([h.Autowired("columnController"),o("design:type",u.ColumnController)],m.prototype,"columnController",void 0),n([h.Autowired("valueService"),o("design:type",c.ValueService)],m.prototype,"valueService",void 0),n([h.Autowired("rowModel"),o("design:type",Object)],m.prototype,"rowModel",void 0),n([h.Autowired("context"),o("design:type",h.Context)],m.prototype,"context",void 0),n([h.Autowired("valueCache"),o("design:type",g.ValueCache)],m.prototype,"valueCache",void 0),n([h.Autowired("columnApi"),o("design:type",d.ColumnApi)],m.prototype,"columnApi",void 0),n([h.Autowired("gridApi"),o("design:type",i.GridApi)],m.prototype,"gridApi",void 0),m);function m(){this.childrenMapped={},this.selectable=!0,this.selected=!1}t.RowNode=s},function(e,t,i){"use strict";var n,o,r,s,a=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},u=(Object.defineProperty(t,"__esModule",{value:!0}),i(12)),d=i(0),h=i(1),p=i(2),f=i(40),g=i(4),i=i(41),m=((m=n=t.DragSourceType||(t.DragSourceType={}))[m.ToolPanel=0]="ToolPanel",m[m.HeaderCell=1]="HeaderCell",m[m.RowDrag=2]="RowDrag",(m=o=t.VDirection||(t.VDirection={}))[m.Up=0]="Up",m[m.Down=1]="Down",(m=r=t.HDirection||(t.HDirection={}))[m.Left=0]="Left",m[m.Right=1]="Right",(s=v).prototype.init=function(){this.ePinnedIcon=h.Utils.createIcon("columnMovePin",this.gridOptionsWrapper,null),this.ePlusIcon=h.Utils.createIcon("columnMoveAdd",this.gridOptionsWrapper,null),this.eHiddenIcon=h.Utils.createIcon("columnMoveHide",this.gridOptionsWrapper,null),this.eMoveIcon=h.Utils.createIcon("columnMoveMove",this.gridOptionsWrapper,null),this.eLeftIcon=h.Utils.createIcon("columnMoveLeft",this.gridOptionsWrapper,null),this.eRightIcon=h.Utils.createIcon("columnMoveRight",this.gridOptionsWrapper,null),this.eGroupIcon=h.Utils.createIcon("columnMoveGroup",this.gridOptionsWrapper,null),this.eAggregateIcon=h.Utils.createIcon("columnMoveValue",this.gridOptionsWrapper,null),this.ePivotIcon=h.Utils.createIcon("columnMovePivot",this.gridOptionsWrapper,null),this.eDropNotAllowedIcon=h.Utils.createIcon("dropNotAllowed",this.gridOptionsWrapper,null)},v.prototype.setBeans=function(e){this.logger=e.create("OldToolPanelDragAndDropService")},v.prototype.getStringType=function(e){switch(e){case n.RowDrag:return"row";case n.HeaderCell:return"headerCell";case n.ToolPanel:return"toolPanel";default:return console.warn("ag-Grid: bug - unknown drag type "+e),null}},v.prototype.addDragSource=function(e,t){void 0===t&&(t=!1);var i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i,t)},v.prototype.removeDragSource=function(t){var e=h.Utils.find(this.dragSourceAndParamsList,function(e){return e.dragSource===t});e&&(this.dragService.removeDragSource(e.params),h.Utils.removeFromArray(this.dragSourceAndParamsList,e))},v.prototype.destroy=function(){var t=this;this.dragSourceAndParamsList.forEach(function(e){t.dragService.removeDragSource(e.params)}),this.dragSourceAndParamsList.length=0},v.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},v.prototype.onDragStart=function(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.dragItemCallback(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.dragStarted&&this.dragSource.dragStarted(),this.createGhost()},v.prototype.onDragStop=function(e){this.eventLastTime=null,this.dragging=!1,this.dragSource.dragStopped&&this.dragSource.dragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop&&(e=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1),this.lastDropTarget.onDragStop(e)),this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},v.prototype.onDragging=function(e,t){var i=this.workOutHDirection(e),n=this.workOutVDirection(e),o=(this.eventLastTime=e,this.positionGhost(e),h.Utils.find(this.dropTargets,this.isMouseOnDropTarget.bind(this,e)));o!==this.lastDropTarget?(this.leaveLastTargetIfExists(e,i,n,t),this.enterDragTargetIfExists(o,e,i,n,t),this.lastDropTarget=o):o&&(e=this.createDropTargetEvent(o,e,i,n,t),o.onDragging(e))},v.prototype.enterDragTargetIfExists=function(e,t,i,n,o){e&&(t=this.createDropTargetEvent(e,t,i,n,o),e.onDragEnter(t),this.setGhostIcon(e.getIconName?e.getIconName():null))},v.prototype.leaveLastTargetIfExists=function(e,t,i,n){this.lastDropTarget&&(e=this.createDropTargetEvent(this.lastDropTarget,e,t,i,n),this.lastDropTarget.onDragLeave(e),this.setGhostIcon(null))},v.prototype.getAllContainersFromDropTarget=function(e){var t=[e.getContainer()],e=e.getSecondaryContainers?e.getSecondaryContainers():null;return t=e?t.concat(e):t},v.prototype.isMouseOnDropTarget=function(i,e){var t=this.getAllContainersFromDropTarget(e),n=!1;return t.forEach(function(e){var t;!e||0!==(e=e.getBoundingClientRect()).width&&0!==e.height&&(t=i.clientX>=e.left&&i.clientX<=e.right,e=i.clientY>=e.top&&i.clientY<=e.bottom,t&&e&&(n=!0))}),!!n&&e.isInterestedIn(this.dragSource.type)},v.prototype.addDropTarget=function(e){this.dropTargets.push(e)},v.prototype.workOutHDirection=function(e){return this.eventLastTime.clientX>e.clientX?r.Left:this.eventLastTime.clientX<e.clientX?r.Right:null},v.prototype.workOutVDirection=function(e){return this.eventLastTime.clientY>e.clientY?o.Up:this.eventLastTime.clientY<e.clientY?o.Down:null},v.prototype.createDropTargetEvent=function(e,t,i,n,o){e=e.getContainer().getBoundingClientRect();return{event:t,x:t.clientX-e.left,y:t.clientY-e.top,vDirection:n,hDirection:i,dragSource:this.dragSource,fromNudge:o,dragItem:this.dragItem}},v.prototype.positionGhost=function(e){var t=this.eGhost.getBoundingClientRect().height,i=h.Utils.getBodyWidth()-2,n=h.Utils.getBodyHeight()-2,t=e.pageY-t/2,e=e.pageX-30,o=this.gridOptionsWrapper.getDocument(),r=window.pageYOffset||o.documentElement.scrollTop,o=window.pageXOffset||o.documentElement.scrollLeft;0<i&&e+this.eGhost.clientWidth>i+o&&(e=i+o-this.eGhost.clientWidth),(t=0<n&&t+this.eGhost.clientHeight>n+r?n+r-this.eGhost.clientHeight:t)<0&&(t=0),this.eGhost.style.left=(e=e<0?0:e)+"px",this.eGhost.style.top=t+"px"},v.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},v.prototype.createGhost=function(){this.eGhost=h.Utils.loadTemplate(s.GHOST_TEMPLATE),h.Utils.addCssClass(this.eGhost,this.environment.getTheme()),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);this.eGhost.querySelector(".ag-dnd-ghost-label").innerHTML=this.dragSource.dragItemName,this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var e=this.gridOptionsWrapper.getDocument();this.eGhostParent=e.querySelector("body"),this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("ag-Grid: could not find document body, it is needed for dragging columns")},v.prototype.setGhostIcon=function(e,t){var i;switch(void 0===t&&(t=!1),h.Utils.removeAllChildren(this.eGhostIcon),e){case s.ICON_ADD:i=this.ePlusIcon;break;case s.ICON_PINNED:i=this.ePinnedIcon;break;case s.ICON_MOVE:i=this.eMoveIcon;break;case s.ICON_LEFT:i=this.eLeftIcon;break;case s.ICON_RIGHT:i=this.eRightIcon;break;case s.ICON_GROUP:i=this.eGroupIcon;break;case s.ICON_AGGREGATE:i=this.eAggregateIcon;break;case s.ICON_PIVOT:i=this.ePivotIcon;break;case s.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;default:i=this.eHiddenIcon}this.eGhostIcon.appendChild(i),h.Utils.addOrRemoveCssClass(this.eGhostIcon,"ag-shake-left-to-right",t)},v.ICON_PINNED="pinned",v.ICON_ADD="add",v.ICON_MOVE="move",v.ICON_LEFT="left",v.ICON_RIGHT="right",v.ICON_GROUP="group",v.ICON_AGGREGATE="aggregate",v.ICON_PIVOT="pivot",v.ICON_NOT_ALLOWED="notAllowed",v.GHOST_TEMPLATE='<div class="ag-dnd-ghost">  <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>  <div class="ag-dnd-ghost-label">  </div></div>',a([d.Autowired("gridOptionsWrapper"),l("design:type",p.GridOptionsWrapper)],v.prototype,"gridOptionsWrapper",void 0),a([d.Autowired("dragService"),l("design:type",f.DragService)],v.prototype,"dragService",void 0),a([d.Autowired("environment"),l("design:type",i.Environment)],v.prototype,"environment",void 0),a([d.Autowired("columnController"),l("design:type",g.ColumnController)],v.prototype,"columnController",void 0),a([d.PostConstruct,l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],v.prototype,"init",null),a([c(0,d.Qualifier("loggerFactory")),l("design:type",Function),l("design:paramtypes",[u.LoggerFactory]),l("design:returntype",void 0)],v.prototype,"setBeans",null),a([d.PreDestroy,l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],v.prototype,"destroy",null),s=a([d.Bean("dragAndDropService")],v));function v(){this.dragSourceAndParamsList=[],this.dropTargets=[]}t.DragAndDropService=m},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),s=i(19),a=i(4),l=i(0),c=i(1),u=i(5),d=i(3),i=i(33),r=(h.prototype.init=function(){this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions(),this.initialised=!0},h.prototype.getValue=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.initialised||this.init();var o=e.getColDef(),r=o.field,s=e.getId(),a=t.data,l=t.groupData&&void 0!==t.groupData[s],n=!n&&t.aggData&&void 0!==t.aggData[s];return i=i&&o.filterValueGetter?this.executeValueGetter(o.filterValueGetter,a,e,t):l?t.groupData[s]:n?t.aggData[s]:o.valueGetter?this.executeValueGetter(o.valueGetter,a,e,t):r&&a?c._.getValueUsingField(a,r,e.isFieldContainsDots()):void 0,this.cellExpressions&&"string"==typeof i&&0===i.indexOf("=")&&(l=i.substring(1),i=this.executeValueGetter(l,a,e,t)),i},h.prototype.setValue=function(e,t,i){var n,o,r,s,a=this.columnController.getPrimaryColumn(t);e&&a&&(t=e.data,c._.missing(t)&&(e.data={}),n=(s=a.getColDef()).field,r=s.newValueHandler,s=s.valueSetter,c._.missing(n)&&c._.missing(r)&&c._.missing(s)?console.warn("ag-Grid: you need either field or valueSetter set on colDef for editing to work"):((o={node:e,data:e.data,oldValue:this.getValue(a,e),newValue:i,colDef:a.getColDef(),column:a,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}).newValue=i,(r=void 0===(r=c._.exists(r)?r(o):c._.exists(s)?this.expressionService.evaluate(s,o):this.setValueUsingField(t,n,i,a.isFieldContainsDots()))?!0:r)&&(e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),o.newValue=this.getValue(a,e),"function"==typeof a.getColDef().onCellValueChanged&&setTimeout(function(){return a.getColDef().onCellValueChanged(o)},0),s={type:u.Events.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:o.column,api:o.api,colDef:o.colDef,columnApi:o.columnApi,context:o.context,data:e.data,node:e,oldValue:o.oldValue,newValue:o.newValue,value:o.newValue},this.eventService.dispatchEvent(s))))},h.prototype.setValueUsingField=function(e,t,i,n){if(n)for(var o=t.split("."),r=e;0<o.length&&r;){var s=o.shift();0===o.length?r[s]=i:r=r[s]}else e[t]=i;return!0},h.prototype.executeValueGetter=function(e,t,i,n){var o=i.getId(),r=this.valueCache.getValue(n,o);if(void 0!==r)return r;r={data:t,node:n,column:i,colDef:i.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,n)},t=this.expressionService.evaluate(e,r);return this.valueCache.setValue(n,o,t),t},h.prototype.getValueCallback=function(e,t){t=this.columnController.getPrimaryColumn(t);return t?this.getValue(t,e):null},h.prototype.getKeyForNode=function(e,t){t=this.getValue(e,t),e=e.getColDef().keyCreator,e=e?e({value:t}):t;return"string"==typeof e||null==e||"[object Object]"===(e=String(e))&&c._.doOnce(function(){console.warn("ag-Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se ag-Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]"),e},n([l.Autowired("gridOptionsWrapper"),o("design:type",r.GridOptionsWrapper)],h.prototype,"gridOptionsWrapper",void 0),n([l.Autowired("expressionService"),o("design:type",s.ExpressionService)],h.prototype,"expressionService",void 0),n([l.Autowired("columnController"),o("design:type",a.ColumnController)],h.prototype,"columnController",void 0),n([l.Autowired("eventService"),o("design:type",d.EventService)],h.prototype,"eventService",void 0),n([l.Autowired("valueCache"),o("design:type",i.ValueCache)],h.prototype,"valueCache",void 0),n([l.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],h.prototype,"init",null),n([l.Bean("valueService")],h));function h(){this.initialised=!1}t.ValueService=r},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},a=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),s=i(0),l=i(0),c=i(12),u=i(3),d=i(5),h=i(0),p=i(2),f=i(0),g=i(9),m=i(7),i=i(6),u=(v.prototype.setBeans=function(e){this.logger=e.create("SelectionController"),this.reset(),this.gridOptionsWrapper.isRowModelDefault()?this.eventService.addEventListener(d.Events.EVENT_ROW_DATA_CHANGED,this.reset.bind(this)):this.logger.log("dont know what to do here")},v.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.eventService.addEventListener(d.Events.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},v.prototype.setLastSelectedNode=function(e){this.lastSelectedNode=e},v.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},v.prototype.getSelectedNodes=function(){var i=[];return a.Utils.iterateObject(this.selectedNodes,function(e,t){t&&i.push(t)}),i},v.prototype.getSelectedRows=function(){var i=[];return a.Utils.iterateObject(this.selectedNodes,function(e,t){t&&t.data&&i.push(t.data)}),i},v.prototype.removeGroupsFromSelection=function(){var i=this;a.Utils.iterateObject(this.selectedNodes,function(e,t){t&&t.group&&(i.selectedNodes[t.id]=void 0)})},v.prototype.updateGroupsFromChildrenSelections=function(){this.rowModel.getType()!==g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&console.warn("updateGroupsFromChildrenSelections not available when rowModel is not normal"),this.rowModel.getTopLevelNodes().forEach(function(e){e.depthFirstSearch(function(e){e.group&&e.calculateSelectedFromChildren()})})},v.prototype.getNodeForIdIfSelected=function(e){return this.selectedNodes[e]},v.prototype.clearOtherNodes=function(n){var o=this,r={},s=0;return a.Utils.iterateObject(this.selectedNodes,function(e,t){var i;t&&t.id!==n.id&&(i=o.selectedNodes[t.id],s+=i.setSelectedParams({newValue:!1,clearSelection:!1,tailingNodeInSequence:!0}),o.groupSelectsChildren&&t.parent&&(r[t.parent.id]=t.parent))}),a.Utils.iterateObject(r,function(e,t){t.calculateSelectedFromChildren()}),s},v.prototype.onRowSelected=function(e){e=e.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes[e.id]=e:this.selectedNodes[e.id]=void 0)},v.prototype.syncInRowNode=function(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)},v.prototype.syncInOldRowNode=function(e,t){a.Utils.exists(t)&&e.id!==t.id&&a.Utils.exists(this.selectedNodes[t.id])&&(this.selectedNodes[t.id]=t)},v.prototype.syncInNewRowNode=function(e){a.Utils.exists(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)},v.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},v.prototype.getBestCostNodeSelection=function(){this.rowModel.getType()!==g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&console.warn("getBestCostNodeSelection is only avilable when using normal row model");var r,e=this.rowModel.getTopLevelNodes();{if(null!==e)return r=[],function e(t){for(var i=0,n=t.length;i<n;i++){var o=t[i];o.isSelected()?r.push(o):o.group&&o.children&&e(o.children)}}(e),r;console.warn("selectAll not available doing rowModel=virtual")}},v.prototype.setRowModel=function(e){this.rowModel=e},v.prototype.isEmpty=function(){var i=0;return a.Utils.iterateObject(this.selectedNodes,function(e,t){t&&i++}),0===i},v.prototype.deselectAllRowNodes=function(e){void 0===e&&(e=!1);function i(e){return e.selectThisNode(!1)}var t=this.rowModel.getType()===g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE;if(e){if(!t)return void console.error("ag-Grid: selecting just filtered only works with In Memory Row Model");this.rowModel.forEachNodeAfterFilter(i)}else a.Utils.iterateObject(this.selectedNodes,function(e,t){t&&i(t)}),this.reset();t&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections();e={type:d.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},v.prototype.selectAllRowNodes=function(e){if(void 0===e&&(e=!1),this.rowModel.getType()!==g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE)throw"selectAll only available with normal row model, ie not "+this.rowModel.getType();function t(e){return e.selectThisNode(!0)}var i=this.rowModel,e=(e?i.forEachNodeAfterFilter(t):i.forEachNode(t),this.rowModel.getType()===g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),{type:d.Events.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(e)},v.prototype.selectNode=function(e,t){e.setSelectedParams({newValue:!0,clearSelection:!t})},v.prototype.deselectIndex=function(e){e=this.rowModel.getRow(e);this.deselectNode(e)},v.prototype.deselectNode=function(e){e.setSelectedParams({newValue:!1,clearSelection:!1})},v.prototype.selectIndex=function(e,t){e=this.rowModel.getRow(e);this.selectNode(e,t)},n([h.Autowired("eventService"),o("design:type",u.EventService)],v.prototype,"eventService",void 0),n([h.Autowired("rowModel"),o("design:type",Object)],v.prototype,"rowModel",void 0),n([h.Autowired("gridOptionsWrapper"),o("design:type",p.GridOptionsWrapper)],v.prototype,"gridOptionsWrapper",void 0),n([h.Autowired("columnApi"),o("design:type",m.ColumnApi)],v.prototype,"columnApi",void 0),n([h.Autowired("gridApi"),o("design:type",i.GridApi)],v.prototype,"gridApi",void 0),n([r(0,l.Qualifier("loggerFactory")),o("design:type",Function),o("design:paramtypes",[c.LoggerFactory]),o("design:returntype",void 0)],v.prototype,"setBeans",null),n([f.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],v.prototype,"init",null),n([s.Bean("selectionController")],v));function v(){}t.SelectionController=u},function(e,t,i){"use strict";var o,n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),s=i(2),l=i(35),c=i(16),u=i(4),d=i(7),h=i(0),p=i(3),f=i(5),g=i(6),i=i(27),s=((o=m).prototype.init=function(){this.eventService.addEventListener(f.Events.EVENT_ROW_DATA_CHANGED,this.onNewRowsLoaded.bind(this)),this.eventService.addEventListener(f.Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText()),this.setQuickFilterParts(),this.checkExternalFilter()},m.prototype.setQuickFilterParts=function(){this.quickFilter?this.quickFilterParts=this.quickFilter.split(" "):this.quickFilterParts=null},m.prototype.setFilterModel=function(i){var n,o=this,r=[];i?(n=Object.keys(i),a.Utils.iterateObject(this.allFilters,function(e,t){a.Utils.removeFromArray(n,e);e=i[e];o.setModelOnFilterWrapper(t.filterPromise,e),r.push(t.filterPromise)}),a.Utils.iterateArray(n,function(e){var t=o.columnController.getPrimaryColumn(e);t?(t=o.getOrCreateFilterWrapper(t),o.setModelOnFilterWrapper(t.filterPromise,i[e]),r.push(t.filterPromise)):console.warn("Warning ag-grid setFilterModel - no column found for colId "+e)})):a.Utils.iterateObject(this.allFilters,function(e,t){o.setModelOnFilterWrapper(t.filterPromise,null),r.push(t.filterPromise)}),a.Promise.all(r).then(function(e){o.onFilterChanged()})},m.prototype.setModelOnFilterWrapper=function(e,t){e.then(function(e){"function"!=typeof e.setModel?console.warn("Warning ag-grid - filter missing setModel method, which is needed for setFilterModel"):e.setModel(t)})},m.prototype.getFilterModel=function(){var i={};return a.Utils.iterateObject(this.allFilters,function(e,t){var t=t.filterPromise.resolveNow(null,function(e){return e});if(null==t)return null;"function"!=typeof t.getModel?console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel"):(t=t.getModel(),a.Utils.exists(t)&&(i[e]=t))}),i},m.prototype.isAdvancedFilterPresent=function(){return this.advancedFilterPresent},m.prototype.setAdvancedFilterPresent=function(){var i=!1;a.Utils.iterateObject(this.allFilters,function(e,t){t.filterPromise.resolveNow(!1,function(e){return e.isFilterActive()})&&(i=!0)}),this.advancedFilterPresent=i},m.prototype.updateFilterFlagInColumns=function(n){a.Utils.iterateObject(this.allFilters,function(e,t){var i=t.filterPromise.resolveNow(!1,function(e){return e.isFilterActive()});t.column.setFilterActive(i,n)})},m.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.advancedFilterPresent||this.externalFilterPresent},m.prototype.doesFilterPass=function(e,t){for(var i=e.data,n=Object.keys(this.allFilters),o=0,r=n.length;o<r;o++){var s=n[o],s=this.allFilters[s];if(void 0!==s){s=s.filterPromise.resolveNow(void 0,function(e){return e});if(void 0!==s)if(s!==t)if(s.isFilterActive())if(s.doesFilterPass||console.error("Filter is missing method doesFilterPass"),!s.doesFilterPass({node:e,data:i}))return!1}}return!0},m.prototype.parseQuickFilter=function(e){return a.Utils.missing(e)||""===e?null:this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("ag-grid: cannot do quick filtering when doing virtual paging"),null):e.toUpperCase()},m.prototype.setQuickFilter=function(e){e=this.parseQuickFilter(e);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.onFilterChanged())},m.prototype.checkExternalFilter=function(){this.externalFilterPresent=this.gridOptionsWrapper.isExternalFilterPresent()},m.prototype.onFilterChanged=function(){this.setAdvancedFilterPresent(),this.updateFilterFlagInColumns("filterChanged"),this.checkExternalFilter(),a.Utils.iterateObject(this.allFilters,function(e,t){t.filterPromise.then(function(e){e.onAnyFilterChanged&&e.onAnyFilterChanged()})});var e={type:f.Events.EVENT_FILTER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},m.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},m.prototype.doesRowPassOtherFilters=function(e,t){return this.doesRowPassFilter(t,e)},m.prototype.doesRowPassQuickFilterNoCache=function(t,i){var n=this,e=this.columnController.getAllColumnsForQuickFilter(),o=!1;return e.forEach(function(e){o||(e=n.getQuickFilterTextForColumn(e,t),a.Utils.exists(e)&&0<=e.indexOf(i)&&(o=!0))}),o},m.prototype.doesRowPassQuickFilterCache=function(e,t){return e.quickFilterAggregateText||this.aggregateRowForQuickFilter(e),0<=e.quickFilterAggregateText.indexOf(t)},m.prototype.doesRowPassQuickFilter=function(t){var i=this,n=!0,o=this.gridOptionsWrapper.isCacheQuickFilter();return this.quickFilterParts.forEach(function(e){(o?i.doesRowPassQuickFilterCache(t,e):i.doesRowPassQuickFilterNoCache(t,e))||(n=!1)}),n},m.prototype.doesRowPassFilter=function(e,t){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(e))&&(!(this.externalFilterPresent&&!this.gridOptionsWrapper.doesExternalFilterPass(e))&&!(this.advancedFilterPresent&&!this.doesFilterPass(e,t)))},m.prototype.getQuickFilterTextForColumn=function(e,t){var i=this.valueService.getValue(e,t,!0),n=e.getColDef();return(n=e.getColDef().getQuickFilterText?(t={value:i,node:t,data:t.data,column:e,colDef:n},e.getColDef().getQuickFilterText(t)):i)&&""!==n?n.toString().toUpperCase():null},m.prototype.aggregateRowForQuickFilter=function(t){var i=this,n=[];this.columnController.getAllColumnsForQuickFilter().forEach(function(e){e=i.getQuickFilterTextForColumn(e,t);a.Utils.exists(e)&&n.push(e)}),t.quickFilterAggregateText=n.join(o.QUICK_FILTER_SEPARATOR)},m.prototype.onNewRowsLoaded=function(e){a.Utils.iterateObject(this.allFilters,function(e,t){t.filterPromise.then(function(e){e.onNewRowsLoaded&&e.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e),this.setAdvancedFilterPresent()},m.prototype.createValueGetter=function(t){var i=this;return function(e){return i.valueService.getValue(t,e,!0)}},m.prototype.getFilterComponent=function(e){return this.getOrCreateFilterWrapper(e).filterPromise},m.prototype.getOrCreateFilterWrapper=function(e){var t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.allFilters[e.getColId()]=t),t},m.prototype.cachedFilter=function(e){return this.allFilters[e.getColId()]},m.prototype.createFilterInstance=function(e,t){var i=this,n="agTextColumnFilter",o=(this.gridOptionsWrapper.isEnterprise()&&(n="agSetColumnFilter"),a.Utils.cloneObject(e.getColDef())),r={type:f.Events.EVENT_FILTER_MODIFIED,api:this.gridApi,columnApi:this.columnApi},s=this.onFilterChanged.bind(this),s={column:e,colDef:o,rowModel:this.rowModel,filterChangedCallback:s,filterModifiedCallback:function(){return i.eventService.dispatchEvent(r)},valueGetter:this.createValueGetter(e),context:this.gridOptionsWrapper.getContext(),doesRowPassOtherFilter:null,$scope:t};return this.componentResolver.createAgGridComponent(o,s,"filter",{api:this.gridApi,columnApi:this.columnApi,column:e,colDef:o},n,!0,function(e,t){return a.Utils.assign(e,{doesRowPassOtherFilter:i.doesRowPassOtherFilters.bind(i,t)})})},m.prototype.createFilterWrapper=function(e){var t={column:e,filterPromise:null,scope:null,compiledElement:null,guiPromise:a.Promise.external()};return t.scope=this.gridOptionsWrapper.isAngularCompileFilters()?this.$scope.$new():null,t.filterPromise=this.createFilterInstance(e,t.scope),this.putIntoGui(t),t},m.prototype.putIntoGui=function(t){var i=this,n=document.createElement("div");n.className="ag-filter",t.filterPromise.then(function(e){var e=e.getGui();a.Utils.missing(e)&&console.warn("getGui method from filter returned "+e+", it should be a DOM element or an HTML template string."),"string"==typeof e&&(e=a.Utils.loadTemplate(e)),n.appendChild(e),t.scope&&(e=i.$compile(n)(t.scope),t.compiledElement=e,setTimeout(function(){return t.scope.$apply()},0)),t.guiPromise.resolve(n)})},m.prototype.onNewColumnsLoaded=function(){this.destroy()},m.prototype.destroyFilter=function(e,t){void 0===t&&(t="api");e=this.allFilters[e.getColId()];e&&(this.disposeFilterWrapper(e,t),this.onFilterChanged())},m.prototype.disposeFilterWrapper=function(t,i){var n=this;t.filterPromise.then(function(e){e.setModel(null),e.destroy&&e.destroy(),t.column.setFilterActive(!1,i),t.scope&&(t.compiledElement&&t.compiledElement.remove(),t.scope.$destroy()),delete n.allFilters[t.column.getColId()]})},m.prototype.destroy=function(){var i=this;a.Utils.iterateObject(this.allFilters,function(e,t){i.disposeFilterWrapper(t,"filterDestroyed")})},m.QUICK_FILTER_SEPARATOR="\n",n([h.Autowired("$compile"),r("design:type",Object)],m.prototype,"$compile",void 0),n([h.Autowired("$scope"),r("design:type",Object)],m.prototype,"$scope",void 0),n([h.Autowired("gridOptionsWrapper"),r("design:type",s.GridOptionsWrapper)],m.prototype,"gridOptionsWrapper",void 0),n([h.Autowired("gridCore"),r("design:type",Object)],m.prototype,"gridCore",void 0),n([h.Autowired("popupService"),r("design:type",l.PopupService)],m.prototype,"popupService",void 0),n([h.Autowired("valueService"),r("design:type",c.ValueService)],m.prototype,"valueService",void 0),n([h.Autowired("columnController"),r("design:type",u.ColumnController)],m.prototype,"columnController",void 0),n([h.Autowired("rowModel"),r("design:type",Object)],m.prototype,"rowModel",void 0),n([h.Autowired("eventService"),r("design:type",p.EventService)],m.prototype,"eventService",void 0),n([h.Autowired("enterprise"),r("design:type",Boolean)],m.prototype,"enterprise",void 0),n([h.Autowired("context"),r("design:type",h.Context)],m.prototype,"context",void 0),n([h.Autowired("columnApi"),r("design:type",d.ColumnApi)],m.prototype,"columnApi",void 0),n([h.Autowired("gridApi"),r("design:type",g.GridApi)],m.prototype,"gridApi",void 0),n([h.Autowired("componentResolver"),r("design:type",i.ComponentResolver)],m.prototype,"componentResolver",void 0),n([h.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],m.prototype,"init",null),n([h.PreDestroy,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],m.prototype,"destroy",null),o=n([h.Bean("filterManager")],m));function m(){this.allFilters={},this.quickFilter=null,this.quickFilterParts=null}t.FilterManager=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(12)),a=i(0),i=i(0),r=(l.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},l.prototype.evaluate=function(e,t){return"function"==typeof e?e(t):"string"==typeof e?this.evaluateExpression(e,t):void console.error("ag-Grid: value should be either a string or a function",e)},l.prototype.evaluateExpression=function(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup)}catch(e){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Exception = "+e),null}},l.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var t=this.createFunctionBody(e),t=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=t},l.prototype.createFunctionBody=function(e){return 0<=e.indexOf("return")?e:"return "+e+";"},n([r(0,i.Qualifier("loggerFactory")),o("design:type",Function),o("design:paramtypes",[s.LoggerFactory]),o("design:returntype",void 0)],l.prototype,"setBeans",null),n([a.Bean("expressionService")],l));function l(){this.expressionToFunctionCache={}}t.ExpressionService=r},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},c=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),u=i(2),d=i(19),h=i(49),p=i(16),f=i(3),g=i(50),m=i(5),v=i(9),y=i(34),b=i(0),w=i(42),C=i(7),_=i(4),A=i(12),E=i(22),x=i(82),S=i(23),T=i(13),k=i(29),D=i(6),R=i(30),O=i(28),F=i(37),i=i(57),T=(o=T.BeanStub,r(L,o),L.prototype.agWire=function(e){this.logger=e.create("RowRenderer")},L.prototype.registerGridComp=function(e){this.gridPanel=e,this.rowContainers=this.gridPanel.getRowContainers(),this.addDestroyableEventListener(this.eventService,m.Events.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addDestroyableEventListener(this.eventService,m.Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,m.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,m.Events.EVENT_BODY_SCROLL,this.redrawAfterScroll.bind(this)),this.addDestroyableEventListener(this.eventService,m.Events.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.redrawAfterModelUpdate()},L.prototype.onPageLoaded=function(e){c.Utils.missing(e)&&(e={type:m.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1}),this.onModelUpdated(e)},L.prototype.getAllCellsForColumn=function(i){var n=[];function e(e,t){t=t.getCellForCol(i);t&&n.push(t)}return c.Utils.iterateObject(this.rowCompsByIndex,e),c.Utils.iterateObject(this.floatingBottomRowComps,e),c.Utils.iterateObject(this.floatingTopRowComps,e),n},L.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.floatingTopRowComps,this.pinnedRowModel.getPinnedTopRowData(),this.rowContainers.floatingTopPinnedLeft,this.rowContainers.floatingTopPinnedRight,this.rowContainers.floatingTop,this.rowContainers.floatingTopFullWidth),this.refreshFloatingRows(this.floatingBottomRowComps,this.pinnedRowModel.getPinnedBottomRowData(),this.rowContainers.floatingBottomPinnedLeft,this.rowContainers.floatingBottomPinnedRight,this.rowContainers.floatingBottom,this.rowContainers.floatingBottomFullWith)},L.prototype.refreshFloatingRows=function(t,e,i,n,o,r){var s=this;t.forEach(function(e){e.destroy()}),t.length=0,e&&e.forEach(function(e){e=new g.RowComp(s.$scope,o,i,n,r,e,s.beans,!1,!1);e.init(),t.push(e)}),this.flushContainers(t)},L.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate()},L.prototype.onModelUpdated=function(e){e={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)},L.prototype.getRenderedIndexesForRowNodes=function(i){var n=[];return c.Utils.missing(i)||c.Utils.iterateObject(this.rowCompsByIndex,function(e,t){t=t.getRowNode();0<=i.indexOf(t)&&n.push(e)}),n},L.prototype.redrawRows=function(e){e&&0!=e.length&&(e=this.getRenderedIndexesForRowNodes(e),this.removeRowComps(e),this.redrawAfterModelUpdate({recycleRows:!0}))},L.prototype.getCellToRestoreFocusToAfterRefresh=function(e){e=e.suppressKeepFocus?null:this.focusedCellController.getFocusCellToUseAfterRefresh();if(c.Utils.missing(e))return null;var t=document.activeElement,t=this.gridOptionsWrapper.getDomData(t,y.CellComp.DOM_DATA_KEY_CELL_COMP);return c.Utils.missing(t)?null:e},L.prototype.redrawAfterModelUpdate=function(e){void 0===e&&(e={}),this.getLockOnRefresh();var t=this.getCellToRestoreFocusToAfterRefresh(e),i=(this.sizeContainerToPageHeight(),this.scrollToTopIfNewData(e),e.recycleRows),n=e.animate&&this.gridOptionsWrapper.isAnimateRows(),i=this.binRowComps(i);this.redraw(i,n),e.onlyBody||this.refreshFloatingRowComps(),this.restoreFocusedCell(t),this.releaseLockOnRefresh()},L.prototype.scrollToTopIfNewData=function(e){var e=e.newData||e.newPage,t=this.gridOptionsWrapper.isSuppressScrollOnNewData();e&&!t&&this.gridPanel.scrollToTop()},L.prototype.sizeContainerToPageHeight=function(){var e=this.paginationProxy.getCurrentPageHeight(),e=(this.heightScaler.setModelHeight(e=0===e?1:e),this.heightScaler.getUiContainerHeight());this.rowContainers.body.setHeight(e),this.rowContainers.fullWidth.setHeight(e),this.rowContainers.pinnedLeft.setHeight(e),this.rowContainers.pinnedRight.setHeight(e)},L.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("ag-Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, eg instead of api.refreshView(), call setTimeout(function(){api.refreshView(),0}). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},L.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},L.prototype.restoreFocusedCell=function(e){e&&this.focusedCellController.setFocusedCell(e.rowIndex,e.column,e.floating,!0)},L.prototype.stopEditing=function(i){void 0===i&&(i=!1),this.forEachRowComp(function(e,t){t.stopEditing(i)})},L.prototype.forEachCellComp=function(i){this.forEachRowComp(function(e,t){return t.forEachCellComp(i)})},L.prototype.forEachRowComp=function(e){c.Utils.iterateObject(this.rowCompsByIndex,e),c.Utils.iterateObject(this.floatingTopRowComps,e),c.Utils.iterateObject(this.floatingBottomRowComps,e)},L.prototype.addRenderedRowListener=function(e,t,i){t=this.rowCompsByIndex[t];t&&t.addEventListener(e,i)},L.prototype.flashCells=function(e){this.forEachCellCompFiltered((e=void 0===e?{}:e).rowNodes,e.columns,function(e){return e.flashCell()})},L.prototype.refreshCells=function(e){var t={forceRefresh:(e=void 0===e?{}:e).force,newData:!1};this.forEachCellCompFiltered(e.rowNodes,e.columns,function(e){return e.refreshCell(t)})},L.prototype.getCellRendererInstances=function(e){var t=[];return this.forEachCellCompFiltered(e.rowNodes,e.columns,function(e){e=e.getCellRenderer();e&&t.push(e)}),t},L.prototype.getCellEditorInstances=function(e){var t=[];return this.forEachCellCompFiltered(e.rowNodes,e.columns,function(e){e=e.getCellEditor();e&&t.push(e)}),t},L.prototype.getEditingCells=function(){var t=[];return this.forEachCellComp(function(e){e.isEditing()&&(e=e.getGridCell().getGridCellDef(),t.push(e))}),t},L.prototype.forEachCellCompFiltered=function(e,t,n){function i(e){var t=(i=e.getRowNode()).id,i=i.rowPinned;if(c.Utils.exists(o))if(i===v.Constants.PINNED_BOTTOM){if(!o.bottom[t])return}else if(i===v.Constants.PINNED_TOP){if(!o.top[t])return}else if(!o.normal[t])return;e.forEachCellComp(function(e){var t=e.getColumn().getId();r&&!r[t]||n(e)})}var o,r,s=this;c.Utils.exists(e)&&(o={top:{},bottom:{},normal:{}},e.forEach(function(e){e.rowPinned===v.Constants.PINNED_TOP?o.top[e.id]=!0:e.rowPinned===v.Constants.PINNED_BOTTOM?o.bottom[e.id]=!0:o.normal[e.id]=!0})),c.Utils.exists(t)&&(r={},t.forEach(function(e){e=s.columnController.getGridColumn(e);c.Utils.exists(e)&&(r[e.getId()]=!0)}));c.Utils.iterateObject(this.rowCompsByIndex,function(e,t){i(t)}),this.floatingTopRowComps&&this.floatingTopRowComps.forEach(i),this.floatingBottomRowComps&&this.floatingBottomRowComps.forEach(i)},L.prototype.destroy=function(){o.prototype.destroy.call(this);var e=Object.keys(this.rowCompsByIndex);this.removeRowComps(e)},L.prototype.binRowComps=function(e){var n,o=this,r={};return e?(n=[],c.Utils.iterateObject(this.rowCompsByIndex,function(e,t){var i=t.getRowNode();c.Utils.exists(i.id)?(r[i.id]=t,delete o.rowCompsByIndex[e]):n.push(e)})):n=Object.keys(this.rowCompsByIndex),this.removeRowComps(n),r},L.prototype.removeRowComps=function(e){var t=this;e.forEach(function(e){t.rowCompsByIndex[e].destroy(),delete t.rowCompsByIndex[e]})},L.prototype.redrawAfterScroll=function(){this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh()},L.prototype.removeRowCompsNotToDraw=function(e){var t={},e=(e.forEach(function(e){return t[e]=!0}),Object.keys(this.rowCompsByIndex)),e=c.Utils.filter(e,function(e){return!t[e]});this.removeRowComps(e)},L.prototype.calculateIndexesToDraw=function(){var i=this,n=c.Utils.createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow);return c.Utils.iterateObject(this.rowCompsByIndex,function(e,t){e=Number(e);(e<i.firstRenderedRow||e>i.lastRenderedRow)&&i.keepRowBecauseEditing(t)&&n.push(e)}),n.sort(function(e,t){return e-t}),n},L.prototype.redraw=function(t,i,n){var o=this,e=(void 0===i&&(i=!1),void 0===n&&(n=!1),this.heightScaler.update(),this.workOutFirstAndLastRowsToRender(),this.calculateIndexesToDraw()),r=(this.removeRowCompsNotToDraw(e),[]),s=[];e.forEach(function(e){e=o.createOrUpdateRowComp(e,t,i,n);c.Utils.exists(e)&&(s.push(e),c.Utils.pushAll(r,e.getAndClearNextVMTurnFunctions()))}),this.flushContainers(s),c.Utils.executeNextVMTurn(r),n&&!this.gridOptionsWrapper.isSuppressAnimationFrame()?this.beans.taskQueue.addP2Task(this.destroyRowComps.bind(this,t,i)):this.destroyRowComps(t,i),this.checkAngularCompile()},L.prototype.flushContainers=function(e){c.Utils.iterateObject(this.rowContainers,function(e,t){t&&t.flushRowTemplates()}),e.forEach(function(e){return e.afterFlush()})},L.prototype.onDisplayedColumnsChanged=function(){var e=this.columnController.isPinningLeft(),t=this.columnController.isPinningRight();this.pinningLeft===e&&t===this.pinningRight||(this.pinningLeft=e,this.pinningRight=t,this.gridOptionsWrapper.isEmbedFullWidthRows()&&this.redrawFullWidthEmbeddedRows())},L.prototype.redrawFullWidthEmbeddedRows=function(){var i=[];c.Utils.iterateObject(this.rowCompsByIndex,function(e,t){t.isFullWidth()&&(t=t.getRowNode().rowIndex,i.push(t.toString()))}),this.refreshFloatingRowComps(),this.removeRowComps(i),this.redrawAfterScroll()},L.prototype.createOrUpdateRowComp=function(e,t,i,n){var o,r=this.rowCompsByIndex[e];if(r||(o=this.paginationProxy.getRow(e),c.Utils.exists(o)&&c.Utils.exists(t)&&t[o.id]&&(r=t[o.id],t[o.id]=null)),!r){if(o=o||this.paginationProxy.getRow(e),!c.Utils.exists(o))return;r=this.createRowComp(o,i,n)}else r.ensureDomOrder();return this.rowCompsByIndex[e]=r},L.prototype.destroyRowComps=function(e,i){var n=[];c.Utils.iterateObject(e,function(e,t){t&&(t.destroy(i),c.Utils.pushAll(n,t.getAndClearDelayedDestroyFunctions()))}),c.Utils.executeInAWhile(n)},L.prototype.checkAngularCompile=function(){var e=this;this.gridOptionsWrapper.isAngularCompileRows()&&setTimeout(function(){e.$scope.$apply()},0)},L.prototype.workOutFirstAndLastRowsToRender=function(){i=this.paginationProxy.isRowsToRender()?(i=this.paginationProxy.getPageFirstRow(),n=this.paginationProxy.getPageLastRow(),e=this.paginationProxy?this.paginationProxy.getPixelOffset():0,r=this.heightScaler.getOffset(),o=(t=this.gridPanel.getVScrollPosition()).top,t=t.bottom+e+r,o=this.paginationProxy.getRowIndexAtPixel(o+e+r),e=this.paginationProxy.getRowIndexAtPixel(t),t=o=(o-=r=this.gridOptionsWrapper.getRowBuffer())<i?i:o,e=n<(e+=r)?n:e):(t=0,-1);var e,t,i,n,o=t!==this.firstRenderedRow,r=i!==this.lastRenderedRow;(o||r)&&(this.firstRenderedRow=t,this.lastRenderedRow=i,n={type:m.Events.EVENT_VIEWPORT_CHANGED,firstRow:t,lastRow:i,api:this.gridApi,columnApi:this.columnApi},this.eventService.dispatchEvent(n))},L.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},L.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},L.prototype.keepRowBecauseEditing=function(e){var t=e.getRowNode(),i=this.focusedCellController.isRowNodeFocused(t),e=e.isEditing();return!(!i&&!e)&&!!this.paginationProxy.isRowPresent(t)},L.prototype.createRowComp=function(e,t,i){i=i&&!this.gridOptionsWrapper.isSuppressAnimationFrame(),e=new g.RowComp(this.$scope,this.rowContainers.body,this.rowContainers.pinnedLeft,this.rowContainers.pinnedRight,this.rowContainers.fullWidth,e,this.beans,t,i);return e.init(),e},L.prototype.getRenderedNodes=function(){var t=this.rowCompsByIndex;return Object.keys(t).map(function(e){return t[e].getRowNode()})},L.prototype.navigateToNextCell=function(e,t,i,n){for(var o=i;(o=this.cellNavigationService.getNextCellToFocus(t,o),!c.Utils.missing(o))&&this.gridOptionsWrapper.isGroupUseEntireRow()&&this.paginationProxy.getRow(o.rowIndex).group;);n&&(n=this.gridOptionsWrapper.getNavigateToNextCellFunc(),c.Utils.exists(n)&&(n=n({key:t,previousCellDef:i,nextCellDef:o?o.getGridCellDef():null,event:e}),o=c.Utils.exists(n)?new S.GridCell(n):null)),o&&(this.ensureCellVisible(o),this.focusedCellController.setFocusedCell(o.rowIndex,o.column,o.floating,!0),this.rangeController&&(i=new S.GridCell({rowIndex:o.rowIndex,floating:o.floating,column:o.column}),this.rangeController.setRangeToCell(i)))},L.prototype.ensureCellVisible=function(e){c.Utils.missing(e.floating)&&this.gridPanel.ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridPanel.ensureColumnVisible(e.column),this.gridPanel.horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()},L.prototype.startEditingCell=function(e,t,i){e=this.getComponentForCell(e);e&&e.startRowOrCellEdit(t,i)},L.prototype.getComponentForCell=function(e){var t;switch(e.floating){case v.Constants.PINNED_TOP:t=this.floatingTopRowComps[e.rowIndex];break;case v.Constants.PINNED_BOTTOM:t=this.floatingBottomRowComps[e.rowIndex];break;default:t=this.rowCompsByIndex[e.rowIndex]}return t?t.getRenderedCellForColumn(e.column):null},L.prototype.onTabKeyDown=function(e,t){var i=t.shiftKey;this.moveToCellAfter(e,i)&&t.preventDefault()},L.prototype.tabToNextCell=function(e){var t=this.focusedCellController.getFocusedCell();if(c.Utils.missing(t))return!1;t=this.getComponentForCell(t);return!c.Utils.missing(t)&&this.moveToCellAfter(t,e)},L.prototype.moveToCellAfter=function(e,t){e=e.isEditing()?this.gridOptionsWrapper.isFullRowEdit()?this.moveToNextEditingRow(e,t):this.moveToNextEditingCell(e,t):this.moveToNextCellNotEditing(e,t);return e},L.prototype.moveToNextEditingCell=function(e,t){var i=e.getGridCell(),e=(e.stopEditing(),this.findNextCellToFocusOn(i,t,!0)),i=c.Utils.exists(e);return i&&(e.startEditingIfEnabled(null,null,!0),e.focusCell(!1)),i},L.prototype.moveToNextEditingRow=function(e,t){var i=e.getGridCell(),i=this.findNextCellToFocusOn(i,t,!0),t=c.Utils.exists(i);return t&&this.moveEditToNextCellOrRow(e,i),t},L.prototype.moveToNextCellNotEditing=function(e,t){e=e.getGridCell(),e=this.findNextCellToFocusOn(e,t,!1),t=c.Utils.exists(e);return t&&e.focusCell(!0),t},L.prototype.moveEditToNextCellOrRow=function(e,t){var i=e.getGridCell(),n=t.getGridCell();i.rowIndex===n.rowIndex&&i.floating===n.floating?e.setFocusOutOnEditor():(i=e.getRenderedRow(),n=t.getRenderedRow(),e.setFocusOutOnEditor(),i.stopEditing(),n.startRowEditing()),t.setFocusInOnEditor(),t.focusCell()},L.prototype.findNextCellToFocusOn=function(e,t,i){for(var n=e;;){n=this.cellNavigationService.getNextTabbedCell(n,t);var o=this.gridOptionsWrapper.getTabToNextCellFunc();if(c.Utils.exists(o)&&(o=o({backwards:t,editing:i,previousCellDef:e.getGridCellDef(),nextCellDef:n?n.getGridCellDef():null}),n=c.Utils.exists(o)?new S.GridCell(o):null),!n)return null;if(i){o=this.paginationProxy.getRow(n.rowIndex);if(!n.column.isCellEditable(o))continue}c.Utils.missing(n.floating)&&this.gridPanel.ensureIndexVisible(n.rowIndex),n.column.isPinned()||this.gridPanel.ensureColumnVisible(n.column),this.gridPanel.horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames();var r,o=this.getComponentForCell(n);if(!c.Utils.missing(o))if(!o.isSuppressNavigable())return this.rangeController&&(r=new S.GridCell({rowIndex:n.rowIndex,floating:n.floating,column:n.column}),this.rangeController.setRangeToCell(r)),o}},s([b.Autowired("paginationProxy"),a("design:type",k.PaginationProxy)],L.prototype,"paginationProxy",void 0),s([b.Autowired("columnController"),a("design:type",_.ColumnController)],L.prototype,"columnController",void 0),s([b.Autowired("gridOptionsWrapper"),a("design:type",u.GridOptionsWrapper)],L.prototype,"gridOptionsWrapper",void 0),s([b.Autowired("gridCore"),a("design:type",w.GridCore)],L.prototype,"gridCore",void 0),s([b.Autowired("$scope"),a("design:type",Object)],L.prototype,"$scope",void 0),s([b.Autowired("expressionService"),a("design:type",d.ExpressionService)],L.prototype,"expressionService",void 0),s([b.Autowired("templateService"),a("design:type",h.TemplateService)],L.prototype,"templateService",void 0),s([b.Autowired("valueService"),a("design:type",p.ValueService)],L.prototype,"valueService",void 0),s([b.Autowired("eventService"),a("design:type",f.EventService)],L.prototype,"eventService",void 0),s([b.Autowired("pinnedRowModel"),a("design:type",R.PinnedRowModel)],L.prototype,"pinnedRowModel",void 0),s([b.Autowired("context"),a("design:type",b.Context)],L.prototype,"context",void 0),s([b.Autowired("loggerFactory"),a("design:type",A.LoggerFactory)],L.prototype,"loggerFactory",void 0),s([b.Autowired("focusedCellController"),a("design:type",E.FocusedCellController)],L.prototype,"focusedCellController",void 0),s([b.Autowired("cellNavigationService"),a("design:type",x.CellNavigationService)],L.prototype,"cellNavigationService",void 0),s([b.Autowired("columnApi"),a("design:type",C.ColumnApi)],L.prototype,"columnApi",void 0),s([b.Autowired("gridApi"),a("design:type",D.GridApi)],L.prototype,"gridApi",void 0),s([b.Autowired("beans"),a("design:type",O.Beans)],L.prototype,"beans",void 0),s([b.Autowired("heightScaler"),a("design:type",i.HeightScaler)],L.prototype,"heightScaler",void 0),s([b.Autowired("animationFrameService"),a("design:type",F.AnimationFrameService)],L.prototype,"animationFrameService",void 0),s([b.Optional("rangeController"),a("design:type",Object)],L.prototype,"rangeController",void 0),s([l(0,b.Qualifier("loggerFactory")),a("design:type",Function),a("design:paramtypes",[A.LoggerFactory]),a("design:returntype",void 0)],L.prototype,"agWire",null),s([b.PreDestroy,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],L.prototype,"destroy",null),s([b.Bean("rowRenderer")],L));function L(){var e=null!==o&&o.apply(this,arguments)||this;return e.rowCompsByIndex={},e.floatingTopRowComps=[],e.floatingBottomRowComps=[],e.refreshInProgress=!1,e}t.RowRenderer=T},function(e,t,i){"use strict";var a,n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),l=i(91),s=i(2),c=i(122),u=i(18),d=i(27),h=i(1),p=i(124),f=i(6),i=i(7),d=(0,(a=g).prototype.newDateComponent=function(e){return this.componentResolver.createAgGridComponent(this.gridOptions,e,"dateComponent",{api:this.gridApi,columnApi:this.columnApi},"agDateInput")},g.prototype.newHeaderComponent=function(e){return this.componentResolver.createAgGridComponent(e.column.getColDef(),e,"headerComponent",{api:this.gridApi,columnApi:this.columnApi,column:e.column,colDef:e.column.getColDef()},"agColumnHeader")},g.prototype.newHeaderGroupComponent=function(e){return this.componentResolver.createAgGridComponent(e.columnGroup.getColGroupDef(),e,"headerGroupComponent",{api:this.gridApi,columnApi:this.columnApi},"agColumnGroupHeader")},g.prototype.newFloatingFilterWrapperComponent=function(e,t){var i=this,n=e.getColDef();if(n.suppressFilter)return this.newEmptyFloatingFilterWrapperComponent(e);n.filter?"string"==typeof n.filter&&-1<Object.keys(a.filterToFloatingFilterNames).indexOf(n.filter)&&(r=a.filterToFloatingFilterNames[n.filter]):r=this.gridOptionsWrapper.isEnterprise()?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter";var o={column:e,colDef:n,api:this.gridApi,columnApi:this.columnApi},r=this.componentResolver.createAgGridComponent(n,t,"floatingFilterComponent",o,r,!1),o={column:e,floatingFilterComp:r,suppressFilterButton:this.componentResolver.mergeParams(n,"floatingFilterComponent",o,t).suppressFilterButton};if(!r){r=this.getFilterComponentPrototype(n);if(r&&!r.component.prototype.getModelAsString)return this.newEmptyFloatingFilterWrapperComponent(e);var s=t.currentParentModel;t.currentParentModel=function(){return i.filterManager.getFilterComponent(e).resolveNow(null,function(e){return e.getModelAsString?e.getModelAsString(s()):null})},o.floatingFilterComp=h.Promise.resolve(this.componentResolver.createInternalAgGridComponent(l.ReadModelAsStringFloatingFilterComp,t))}return this.componentResolver.createInternalAgGridComponent(c.FloatingFilterWrapperComp,o)},g.prototype.newFullWidthGroupRowInnerCellRenderer=function(e){return this.componentResolver.createAgGridComponent(this.gridOptions,e,"groupRowInnerRenderer",e,null,!1)},g.prototype.newCellRenderer=function(e,t){return this.componentResolver.createAgGridComponent(e,t,"cellRenderer",t,null,!1)},g.prototype.newInnerCellRenderer=function(e,t){return this.componentResolver.createAgGridComponent(e,t,"innerRenderer",t,null)},g.prototype.newFullRowGroupRenderer=function(e){return this.componentResolver.createAgGridComponent(this.gridOptionsWrapper,e,"fullWidthCellRenderer",e,null)},g.prototype.newOverlayWrapperComponent=function(){return this.componentResolver.createInternalAgGridComponent(p.OverlayWrapperComponent,null)},g.prototype.newLoadingOverlayComponent=function(){return this.componentResolver.createAgGridComponent(this.gridOptions,null,"loadingOverlayComponent",{api:this.gridApi,columnApi:this.columnApi},"agLoadingOverlay")},g.prototype.newNoRowsOverlayComponent=function(){return this.componentResolver.createAgGridComponent(this.gridOptions,null,"noRowsOverlayComponent",{api:this.gridApi,columnApi:this.columnApi},"agNoRowsOverlay")},g.prototype.getFilterComponentPrototype=function(e){return this.componentResolver.getComponentToUse(e,"filter",{api:this.gridApi,columnApi:this.columnApi,colDef:e})},g.prototype.newEmptyFloatingFilterWrapperComponent=function(e){return this.componentResolver.createInternalAgGridComponent(c.EmptyFloatingFilterWrapperComp,{column:e,floatingFilterComp:null})},g.filterToFloatingFilterNames={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},n([r.Autowired("componentResolver"),o("design:type",d.ComponentResolver)],g.prototype,"componentResolver",void 0),n([r.Autowired("gridOptions"),o("design:type",Object)],g.prototype,"gridOptions",void 0),n([r.Autowired("gridApi"),o("design:type",f.GridApi)],g.prototype,"gridApi",void 0),n([r.Autowired("columnApi"),o("design:type",i.ColumnApi)],g.prototype,"columnApi",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],g.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("filterManager"),o("design:type",u.FilterManager)],g.prototype,"filterManager",void 0),a=n([r.Bean("componentRecipes")],g));function g(){}t.ComponentRecipes=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(3),a=i(5),l=i(2),c=i(7),u=i(4),d=i(1),h=i(23),p=i(6),f=i(34),i=(g.prototype.init=function(){this.eventService.addEventListener(a.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(a.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(a.Events.EVENT_COLUMN_GROUP_OPENED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(a.Events.EVENT_COLUMN_MOVED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(a.Events.EVENT_COLUMN_PINNED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(a.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(a.Events.EVENT_COLUMN_VISIBLE,this.clearFocusedCell.bind(this))},g.prototype.clearFocusedCell=function(){this.focusedCell=null,this.onCellFocused(!1)},g.prototype.getFocusedCell=function(){return this.focusedCell},g.prototype.getFocusCellToUseAfterRefresh=function(){return!this.gridOptionsWrapper.isSuppressFocusAfterRefresh()&&this.focusedCell&&this.getGridCellForDomElement(document.activeElement)?this.focusedCell:null},g.prototype.getGridCellForDomElement=function(e){for(var t=e;t;){var i=this.gridOptionsWrapper.getDomData(t,f.CellComp.DOM_DATA_KEY_CELL_COMP);if(i)return i.getGridCell();t=t.parentNode}return null},g.prototype.setFocusedCell=function(e,t,i,n){void 0===n&&(n=!1);t=d.Utils.makeNull(this.columnController.getGridColumn(t));this.focusedCell=new h.GridCell({rowIndex:e,floating:d.Utils.makeNull(i),column:t}),this.onCellFocused(n)},g.prototype.isCellFocused=function(e){return!d.Utils.missing(this.focusedCell)&&(this.focusedCell.column===e.column&&this.isRowFocused(e.rowIndex,e.floating))},g.prototype.isRowNodeFocused=function(e){return this.isRowFocused(e.rowIndex,e.rowPinned)},g.prototype.isAnyCellFocused=function(){return!!this.focusedCell},g.prototype.isRowFocused=function(e,t){if(d.Utils.missing(this.focusedCell))return!1;t=d.Utils.makeNull(t);return this.focusedCell.rowIndex===e&&this.focusedCell.floating===t},g.prototype.onCellFocused=function(e){e={type:a.Events.EVENT_CELL_FOCUSED,forceBrowserFocus:e,rowIndex:null,column:null,floating:null,api:this.gridApi,columnApi:this.columnApi,rowPinned:null};this.focusedCell&&(e.rowIndex=this.focusedCell.rowIndex,e.column=this.focusedCell.column,e.rowPinned=this.focusedCell.floating),this.eventService.dispatchEvent(e)},n([r.Autowired("eventService"),o("design:type",s.EventService)],g.prototype,"eventService",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],g.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("columnController"),o("design:type",u.ColumnController)],g.prototype,"columnController",void 0),n([r.Autowired("columnApi"),o("design:type",c.ColumnApi)],g.prototype,"columnApi",void 0),n([r.Autowired("gridApi"),o("design:type",p.GridApi)],g.prototype,"gridApi",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],g.prototype,"init",null),n([r.Bean("focusedCellController")],g));function g(){}t.FocusedCellController=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(64);function r(e){this.rowIndex=e.rowIndex,this.column=e.column,this.floating=n.Utils.makeNull(e.floating)}r.prototype.getGridCellDef=function(){return{rowIndex:this.rowIndex,column:this.column,floating:this.floating}},r.prototype.getGridRow=function(){return new o.GridRow(this.rowIndex,this.floating)},r.prototype.toString=function(){return"rowIndex = "+this.rowIndex+", floating = "+this.floating+", column = "+(this.column?this.column.getId():null)},r.prototype.createId=function(){return this.rowIndex+"."+this.floating+"."+this.column.getId()},r.prototype.equals=function(e){var t=this.column===e.column,i=this.floating===e.floating,e=this.rowIndex===e.rowIndex;return t&&i&&e},t.GridCell=r},function(e,t,i){"use strict";var n,o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(10)),a=i(0),l=i(2),c=i(7),u=i(4),d=i(3),h=i(5),p=i(0),f=i(1),i=i(6),l=((n=g).prototype.progressSort=function(e,t,i){void 0===i&&(i="api");var n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)},g.prototype.setSortForColumn=function(e,t,i,n){t!==s.Column.SORT_ASC&&t!==s.Column.SORT_DESC&&(t=null),e.setSort(t,n=void 0===n?"api":n),e.getSort()?(t=Number((new Date).valueOf()),e.setSortedAt(t)):e.setSortedAt(null),i&&!this.gridOptionsWrapper.isSuppressMultiSort()||this.clearSortBarThisColumn(e,n),this.dispatchSortChangedEvents()},g.prototype.onSortChanged=function(){this.dispatchSortChangedEvents()},g.prototype.dispatchSortChangedEvents=function(){var e={type:h.Events.EVENT_SORT_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},g.prototype.clearSortBarThisColumn=function(t,i){this.columnController.getPrimaryAndSecondaryAndAutoColumns().forEach(function(e){e!==t&&e.setSort(null,i)})},g.prototype.getNextSortDirection=function(e){var t,i=e.getColDef().sortingOrder?e.getColDef().sortingOrder:this.gridOptionsWrapper.getSortingOrder()?this.gridOptionsWrapper.getSortingOrder():n.DEFAULT_SORTING_ORDER;{if(Array.isArray(i)&&!(i.length<=0))return t=(e=i.indexOf(e.getSort()))==i.length-1,t=e<0||t?i[0]:i[e+1],n.DEFAULT_SORTING_ORDER.indexOf(t)<0?(console.warn("ag-grid: invalid sort type "+t),null):t;console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's "+i)}},g.prototype.getSortModel=function(){var e=this.getColumnsWithSortingOrdered();return f.Utils.map(e,function(e){return{colId:e.getColId(),sort:e.getSort()}})},g.prototype.setSortModel=function(r,s){var a,l=this;void 0===s&&(s="api"),this.gridOptionsWrapper.isEnableSorting()?(a=r&&0<r.length,this.columnController.getPrimaryAndSecondaryAndAutoColumns().forEach(function(e){var t=null,i=-1;if(a&&!e.getColDef().suppressSorting)for(var n=0;n<r.length;n++){var o=r[n];"string"==typeof o.colId&&"string"==typeof e.getColId()&&l.compareColIds(o,e)&&(t=o.sort,i=n)}t?(e.setSort(t,s),e.setSortedAt(i)):(e.setSort(null,s),e.setSortedAt(null))}),this.dispatchSortChangedEvents()):console.warn("ag-grid: You are setting the sort model on a grid that does not have sorting enabled")},g.prototype.compareColIds=function(e,t){return e.colId===t.getColId()},g.prototype.getColumnsWithSortingOrdered=function(){var e=this.columnController.getPrimaryAndSecondaryAndAutoColumns(),e=f.Utils.filter(e,function(e){return!!e.getSort()});return e.sort(function(e,t){return e.sortedAt-t.sortedAt}),e},g.prototype.getSortForRowController=function(){var e=this.getColumnsWithSortingOrdered();return f.Utils.map(e,function(e){return{inverter:e.getSort()===s.Column.SORT_ASC?1:-1,column:e}})},g.DEFAULT_SORTING_ORDER=[s.Column.SORT_ASC,s.Column.SORT_DESC,null],o([a.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],g.prototype,"gridOptionsWrapper",void 0),o([a.Autowired("columnController"),r("design:type",u.ColumnController)],g.prototype,"columnController",void 0),o([a.Autowired("eventService"),r("design:type",d.EventService)],g.prototype,"eventService",void 0),o([a.Autowired("columnApi"),r("design:type",c.ColumnApi)],g.prototype,"columnApi",void 0),o([a.Autowired("gridApi"),r("design:type",i.GridApi)],g.prototype,"gridApi",void 0),n=o([p.Bean("sortController")],g));function g(){}t.SortController=l},function(e,t,i){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",n.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",n.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",n.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",n.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",n.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",n.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",n.EVENT_COLUMN_MOVED="columnMoved",n.EVENT_COLUMN_VISIBLE="columnVisible",n.EVENT_COLUMN_PINNED="columnPinned",n.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",n.EVENT_COLUMN_RESIZED="columnResized",n.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",n.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",n.EVENT_ROW_GROUP_OPENED="rowGroupOpened",n.EVENT_ROW_DATA_CHANGED="rowDataChanged",n.EVENT_ROW_DATA_UPDATED="rowDataUpdated",n.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",n.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",n.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",n.EVENT_MODEL_UPDATED="modelUpdated",n.EVENT_PASTE_START="pasteStart",n.EVENT_PASTE_END="pasteEnd",n.EVENT_CELL_CLICKED="cellClicked",n.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",n.EVENT_CELL_MOUSE_DOWN="cellMouseDown",n.EVENT_CELL_CONTEXT_MENU="cellContextMenu",n.EVENT_CELL_VALUE_CHANGED="cellValueChanged",n.EVENT_ROW_VALUE_CHANGED="rowValueChanged",n.EVENT_CELL_FOCUSED="cellFocused",n.EVENT_ROW_SELECTED="rowSelected",n.EVENT_SELECTION_CHANGED="selectionChanged",n.EVENT_CELL_MOUSE_OVER="cellMouseOver",n.EVENT_CELL_MOUSE_OUT="cellMouseOut",n.EVENT_FILTER_CHANGED="filterChanged",n.EVENT_FILTER_MODIFIED="filterModified",n.EVENT_SORT_CHANGED="sortChanged",n.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",n.EVENT_ROW_CLICKED="rowClicked",n.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",n.EVENT_GRID_READY="gridReady",n.DEPRECATED_EVENT_GRID_SIZE_CHANGED="gridSizeChanged",n.EVENT_VIEWPORT_CHANGED="viewportChanged",n.EVENT_DRAG_STARTED="dragStarted",n.EVENT_DRAG_STOPPED="dragStopped",n.EVENT_ROW_EDITING_STARTED="rowEditingStarted",n.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",n.EVENT_CELL_EDITING_STARTED="cellEditingStarted",n.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",n.EVENT_BODY_SCROLL="bodyScroll",n.EVENT_ANIMATION_QUEUE_EMPTY="animationQueueEmpty",n.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",n.EVENT_PAGINATION_CHANGED="paginationChanged",n.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",n.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",n.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",n.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",n.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",n.EVENT_FLASH_CELLS="flashCells",n.EVENT_ROW_DRAG_ENTER="rowDragEnter",n.EVENT_ROW_DRAG_MOVE="rowDragMove",n.EVENT_ROW_DRAG_LEAVE="rowDragLeave",n.EVENT_ROW_DRAG_END="rowDragEnd",n.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",n.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",n.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",n.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",t.Events=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(10)),s=i(3),a=i(0),l=i(2),c=i(7),i=i(6);function u(e,t,i){this.displayedChildren=[],this.localEventService=new s.EventService,this.groupId=t,this.instanceId=i,this.originalColumnGroup=e}u.createUniqueId=function(e,t){return e+"_"+t},u.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},u.prototype.getParent=function(){return this.parent},u.prototype.setParent=function(e){this.parent=e},u.prototype.getUniqueId=function(){return u.createUniqueId(this.groupId,this.instanceId)},u.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},u.prototype.isMoving=function(){var e=this.getOriginalColumnGroup().getLeafColumns();if(!e||0===e.length)return!1;var t=!0;return e.forEach(function(e){e.isMoving()||(t=!1)}),t},u.prototype.checkLeft=function(){var e;this.displayedChildren.forEach(function(e){e instanceof u&&e.checkLeft()}),0<this.displayedChildren.length?this.gridOptionsWrapper.isEnableRtl()?(e=this.displayedChildren[this.displayedChildren.length-1].getLeft(),this.setLeft(e)):(e=this.displayedChildren[0].getLeft(),this.setLeft(e)):this.setLeft(null)},u.prototype.getLeft=function(){return this.left},u.prototype.getOldLeft=function(){return this.oldLeft},u.prototype.setLeft=function(e){this.oldLeft=e,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(u.EVENT_LEFT_CHANGED)))},u.prototype.createAgEvent=function(e){return{type:e}},u.prototype.addEventListener=function(e,t){this.localEventService.addEventListener(e,t)},u.prototype.removeEventListener=function(e,t){this.localEventService.removeEventListener(e,t)},u.prototype.getGroupId=function(){return this.groupId},u.prototype.getInstanceId=function(){return this.instanceId},u.prototype.isChildInThisGroupDeepSearch=function(t){var i=!1;return this.children.forEach(function(e){t===e&&(i=!0),e instanceof u&&e.isChildInThisGroupDeepSearch(t)&&(i=!0)}),i},u.prototype.getActualWidth=function(){var t=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){t+=e.getActualWidth()}),t},u.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var t=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(t=!0)}),t},u.prototype.getMinWidth=function(){var t=0;return this.displayedChildren.forEach(function(e){t+=e.getMinWidth()}),t},u.prototype.addChild=function(e){this.children||(this.children=[]),this.children.push(e)},u.prototype.getDisplayedChildren=function(){return this.displayedChildren},u.prototype.getLeafColumns=function(){var e=[];return this.addLeafColumns(e),e},u.prototype.getDisplayedLeafColumns=function(){var e=[];return this.addDisplayedLeafColumns(e),e},u.prototype.getDefinition=function(){return this.originalColumnGroup.getColGroupDef()},u.prototype.getColGroupDef=function(){return this.originalColumnGroup.getColGroupDef()},u.prototype.isPadding=function(){return this.originalColumnGroup.isPadding()},u.prototype.isExpandable=function(){return this.originalColumnGroup.isExpandable()},u.prototype.isExpanded=function(){return this.originalColumnGroup.isExpanded()},u.prototype.setExpanded=function(e){this.originalColumnGroup.setExpanded(e)},u.prototype.addDisplayedLeafColumns=function(t){this.displayedChildren.forEach(function(e){e instanceof r.Column?t.push(e):e instanceof u&&e.addDisplayedLeafColumns(t)})},u.prototype.addLeafColumns=function(t){this.children.forEach(function(e){e instanceof r.Column?t.push(e):e instanceof u&&e.addLeafColumns(t)})},u.prototype.getChildren=function(){return this.children},u.prototype.getColumnGroupShow=function(){return this.originalColumnGroup.getColumnGroupShow()},u.prototype.getOriginalColumnGroup=function(){return this.originalColumnGroup},u.prototype.calculateDisplayedColumns=function(){var t=this;this.displayedChildren=[],this.originalColumnGroup.isExpandable()?this.children.forEach(function(e){switch(e.getColumnGroupShow()){case u.HEADER_GROUP_SHOW_OPEN:t.originalColumnGroup.isExpanded()&&t.displayedChildren.push(e);break;case u.HEADER_GROUP_SHOW_CLOSED:t.originalColumnGroup.isExpanded()||t.displayedChildren.push(e);break;default:t.displayedChildren.push(e)}}):this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(u.EVENT_DISPLAYED_CHILDREN_CHANGED))},u.HEADER_GROUP_SHOW_OPEN="open",u.HEADER_GROUP_SHOW_CLOSED="closed",u.EVENT_LEFT_CHANGED="leftChanged",u.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",n([a.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],u.prototype,"gridOptionsWrapper",void 0),n([a.Autowired("columnApi"),o("design:type",c.ColumnApi)],u.prototype,"columnApi",void 0),n([a.Autowired("gridApi"),o("design:type",i.GridApi)],u.prototype,"gridApi",void 0),t.ColumnGroup=u},function(e,t,i){"use strict";var c,u,n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(2),d=i(1),a=i(66),l=i(76),i=i(77),h=((h=c=t.ComponentType||(t.ComponentType={}))[h.AG_GRID=0]="AG_GRID",h[h.FRAMEWORK=1]="FRAMEWORK",(h=u=t.ComponentSource||(t.ComponentSource={}))[h.DEFAULT=0]="DEFAULT",h[h.REGISTERED_BY_NAME=1]="REGISTERED_BY_NAME",h[h.HARDCODED=2]="HARDCODED",p.prototype.getComponentToUse=function(e,t,i,n){var o,r=null,s=null,a=null,l=null;if(null!=e&&(null!=(o=e[t])&&("string"==typeof o?r=o:this.agComponentUtils.doesImplementIComponent(o)?s=o:a=o),l=e[t+"Framework"],o=e[t+"Selector"]),s&&l||r&&l||a&&l)throw Error("ag-grid: you are trying to specify: "+t+" twice as a component.");if(l&&!this.frameworkComponentWrapper)throw Error("ag-grid: you are specifying a framework component but you are not using a framework version of ag-grid for : "+t);if(o&&(r||s||a||l))throw Error("ag-grid: you can't specify both, the selector and the component of ag-grid for : "+t);if(l)return{type:c.FRAMEWORK,component:l,source:u.HARDCODED,dynamicParams:null};if(s)return{type:c.AG_GRID,component:s,source:u.HARDCODED,dynamicParams:null};if(a)return this.agComponentUtils.adaptFunction(t,a,c.AG_GRID,u.HARDCODED);if(o){e=o(i);if(null!=e)return null==e.component&&(e.component=n),l=this.resolveByName(t,e.component),d._.assign(l,{dynamicParams:e.params})}return null==(s=r||n)?null:this.resolveByName(t,s)},p.prototype.resolveByName=function(e,t){t=this.componentProvider.retrieve(null!=t?t:e);return null==t?null:t.type==c.FRAMEWORK?{component:t.component,type:c.FRAMEWORK,source:u.REGISTERED_BY_NAME,dynamicParams:null}:this.agComponentUtils.doesImplementIComponent(t.component)?{component:t.component,type:c.AG_GRID,source:t.source==a.RegisteredComponentSource.REGISTERED?u.REGISTERED_BY_NAME:u.DEFAULT,dynamicParams:null}:this.agComponentUtils.adaptFunction(e,t.component,t.type,t.source==a.RegisteredComponentSource.REGISTERED?u.REGISTERED_BY_NAME:u.DEFAULT)},p.prototype.mergeParams=function(e,t,i,n,o){void 0===o&&(o=null);e=e?e[t+"Params"]:null,t={};return d._.mergeDeep(t,i),null!=e&&(i=null,i="function"==typeof e?e(n):e,d._.mergeDeep(t,i)),d._.mergeDeep(t,o),t.api||(t.api=this.gridOptions.api),t},p.prototype.createAgGridComponent=function(e,t,i,n,o,r,s){var e=null==e?this.gridOptions:e,a=this.newAgGridComponent(e,i,n,o,r=void 0===r?!0:r);if(!a)return null;o=this.mergeParams(e,i,t,n,a[1]),o.agGridReact=this.context.getBean("agGridReact")?d._.cloneObject(this.context.getBean("agGridReact")):{},o.frameworkComponentWrapper=this.context.getBean("frameworkComponentWrapper")?this.context.getBean("frameworkComponentWrapper"):{},r=this.initialiseComponent(a[0],o,s);return null==r?d.Promise.resolve(a[0]):r.map(function(e){return a[0]})},p.prototype.createInternalAgGridComponent=function(e,t,i){e=new e;return this.initialiseComponent(e,t,i),e},p.prototype.newAgGridComponent=function(e,t,i,n,o){void 0===o&&(o=!0);e=this.getComponentToUse(e,t,i,n);if(!e||!e.component)return o&&console.error("Error creating component "+t+"=>"+n),null;if(e.type===c.AG_GRID)return[new e.component,e.dynamicParams];i=e.component,o=this.componentMetadataProvider.retrieve(t);return[this.frameworkComponentWrapper.wrap(i,o.mandatoryMethodList,o.optionalMethodList,n),e.dynamicParams]},p.prototype.initialiseComponent=function(e,t,i){return this.context.wireBean(e),null==i?e.init(t):e.init(i(t,e))},n([r.Autowired("gridOptions"),o("design:type",Object)],p.prototype,"gridOptions",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],p.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("context"),o("design:type",r.Context)],p.prototype,"context",void 0),n([r.Autowired("agComponentUtils"),o("design:type",l.AgComponentUtils)],p.prototype,"agComponentUtils",void 0),n([r.Autowired("componentMetadataProvider"),o("design:type",i.ComponentMetadataProvider)],p.prototype,"componentMetadataProvider",void 0),n([r.Autowired("componentProvider"),o("design:type",a.ComponentProvider)],p.prototype,"componentProvider",void 0),n([r.Optional("frameworkComponentWrapper"),o("design:type",Object)],p.prototype,"frameworkComponentWrapper",void 0),n([r.Bean("componentResolver")],p));function p(){}t.ComponentResolver=h},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(7),a=i(4),l=i(6),c=i(2),u=i(19),d=i(20),h=i(49),p=i(16),f=i(3),g=i(53),m=i(22),v=i(54),y=i(55),b=i(35),w=i(56),C=i(43),_=i(73),A=i(45),E=i(29),x=i(37),S=i(27),T=i(15),k=i(24),D=i(18),i=i(57),E=(R.prototype.registerGridComp=function(e){this.gridPanel=e},R.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},n([r.Autowired("paginationProxy"),o("design:type",E.PaginationProxy)],R.prototype,"paginationProxy",void 0),n([r.Autowired("context"),o("design:type",r.Context)],R.prototype,"context",void 0),n([r.Autowired("columnApi"),o("design:type",s.ColumnApi)],R.prototype,"columnApi",void 0),n([r.Autowired("gridApi"),o("design:type",l.GridApi)],R.prototype,"gridApi",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",c.GridOptionsWrapper)],R.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("expressionService"),o("design:type",u.ExpressionService)],R.prototype,"expressionService",void 0),n([r.Autowired("rowRenderer"),o("design:type",d.RowRenderer)],R.prototype,"rowRenderer",void 0),n([r.Autowired("$compile"),o("design:type",Object)],R.prototype,"$compile",void 0),n([r.Autowired("templateService"),o("design:type",h.TemplateService)],R.prototype,"templateService",void 0),n([r.Autowired("valueService"),o("design:type",p.ValueService)],R.prototype,"valueService",void 0),n([r.Autowired("eventService"),o("design:type",f.EventService)],R.prototype,"eventService",void 0),n([r.Autowired("columnController"),o("design:type",a.ColumnController)],R.prototype,"columnController",void 0),n([r.Autowired("columnAnimationService"),o("design:type",g.ColumnAnimationService)],R.prototype,"columnAnimationService",void 0),n([r.Optional("rangeController"),o("design:type",Object)],R.prototype,"rangeController",void 0),n([r.Autowired("focusedCellController"),o("design:type",m.FocusedCellController)],R.prototype,"focusedCellController",void 0),n([r.Optional("contextMenuFactory"),o("design:type",Object)],R.prototype,"contextMenuFactory",void 0),n([r.Autowired("cellEditorFactory"),o("design:type",v.CellEditorFactory)],R.prototype,"cellEditorFactory",void 0),n([r.Autowired("cellRendererFactory"),o("design:type",y.CellRendererFactory)],R.prototype,"cellRendererFactory",void 0),n([r.Autowired("popupService"),o("design:type",b.PopupService)],R.prototype,"popupService",void 0),n([r.Autowired("cellRendererService"),o("design:type",w.CellRendererService)],R.prototype,"cellRendererService",void 0),n([r.Autowired("valueFormatterService"),o("design:type",C.ValueFormatterService)],R.prototype,"valueFormatterService",void 0),n([r.Autowired("stylingService"),o("design:type",_.StylingService)],R.prototype,"stylingService",void 0),n([r.Autowired("columnHoverService"),o("design:type",A.ColumnHoverService)],R.prototype,"columnHoverService",void 0),n([r.Autowired("enterprise"),o("design:type",Boolean)],R.prototype,"enterprise",void 0),n([r.Autowired("componentResolver"),o("design:type",S.ComponentResolver)],R.prototype,"componentResolver",void 0),n([r.Autowired("animationFrameService"),o("design:type",x.AnimationFrameService)],R.prototype,"taskQueue",void 0),n([r.Autowired("dragAndDropService"),o("design:type",T.DragAndDropService)],R.prototype,"dragAndDropService",void 0),n([r.Autowired("sortController"),o("design:type",k.SortController)],R.prototype,"sortController",void 0),n([r.Autowired("filterManager"),o("design:type",D.FilterManager)],R.prototype,"filterManager",void 0),n([r.Autowired("heightScaler"),o("design:type",i.HeightScaler)],R.prototype,"heightScaler",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],R.prototype,"postConstruct",null),n([r.Bean("beans")],R));function R(){}t.Beans=E},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(13)),c=i(3),u=i(5),d=i(1),h=i(0),p=i(2),f=i(36),g=i(17),m=i(7),i=i(6),f=(o=l.BeanStub,r(v,o),v.prototype.registerGridComp=function(e){this.gridPanel=e,this.addDestroyableEventListener(this.eventService,u.Events.EVENT_BODY_HEIGHT_CHANGED,this.onBodyHeightChanged.bind(this)),this.addDestroyableEventListener(this.eventService,u.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.checkPageSize()},v.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},v.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},v.prototype.onBodyHeightChanged=function(){this.checkPageSize()},v.prototype.checkPageSize=function(){var e,t;this.notActive()||(e=this.gridOptionsWrapper.getRowHeightAsNumber(),t=this.gridPanel.getBodyHeight(),this.scrollVisibleService.isBodyHorizontalScrollShowing()&&(t-=this.gridOptionsWrapper.getScrollbarWidth()),0<t&&(t=Math.floor(t/e),this.gridOptionsWrapper.setProperty("paginationPageSize",t)))},s([h.Autowired("eventService"),a("design:type",c.EventService)],v.prototype,"eventService",void 0),s([h.Autowired("gridOptionsWrapper"),a("design:type",p.GridOptionsWrapper)],v.prototype,"gridOptionsWrapper",void 0),s([h.Autowired("scrollVisibleService"),a("design:type",f.ScrollVisibleService)],v.prototype,"scrollVisibleService",void 0),s([h.Bean("paginationAutoPageSizeService")],v));function v(){return null!==o&&o.apply(this,arguments)||this}t.PaginationAutoPageSizeService=f;y=l.BeanStub,r(b,y),b.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination(),this.addDestroyableEventListener(this.eventService,u.Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,"paginationPageSize",this.onModelUpdated.bind(this)),this.onModelUpdated()},b.prototype.isLastRowFound=function(){return this.rowModel.isLastRowFound()},b.prototype.onModelUpdated=function(e){this.setIndexesAndBounds();e={type:u.Events.EVENT_PAGINATION_CHANGED,animate:!!e&&e.animate,newData:!!e&&e.newData,newPage:!!e&&e.newPage,keepRenderedRows:!!e&&e.keepRenderedRows,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},b.prototype.goToPage=function(e){this.active&&this.currentPage!==e&&(this.currentPage=e,e={type:u.Events.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,api:this.gridApi,columnApi:this.columnApi},this.onModelUpdated(e))},b.prototype.getPixelOffset=function(){return this.pixelOffset},b.prototype.getRow=function(e){return this.rowModel.getRow(e)},b.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},b.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)},b.prototype.getCurrentPageHeight=function(){return d._.missing(this.topRowBounds)||d._.missing(this.bottomRowBounds)?0:this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop},b.prototype.isRowPresent=function(e){return!!this.rowModel.isRowPresent(e)&&(e.rowIndex>=this.topRowIndex&&e.rowIndex<=this.bottomRowIndex)},b.prototype.isEmpty=function(){return this.rowModel.isEmpty()},b.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},b.prototype.getNodesInRangeForSelection=function(e,t){return this.rowModel.getNodesInRangeForSelection(e,t)},b.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)},b.prototype.getType=function(){return this.rowModel.getType()},b.prototype.getRowBounds=function(e){return this.rowModel.getRowBounds(e)},b.prototype.getPageFirstRow=function(){return this.pageSize*this.currentPage},b.prototype.getPageLastRow=function(){var e=this.pageSize*(this.currentPage+1)-1,t=this.rowModel.getPageLastRow();return e<t?e:t},b.prototype.getRowCount=function(){return this.rowModel.getRowCount()},b.prototype.goToPageWithIndex=function(e){this.active&&(e=Math.floor(e/this.pageSize),this.goToPage(e))},b.prototype.getTotalRowCount=function(){return this.rowModel.getPageLastRow()+1},b.prototype.isLastPageFound=function(){return this.rowModel.isLastRowFound()},b.prototype.getCurrentPage=function(){return this.currentPage},b.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},b.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},b.prototype.goToFirstPage=function(){this.goToPage(0)},b.prototype.goToLastPage=function(){var e=this.rowModel.getPageLastRow()+1,e=Math.floor(e/this.pageSize);this.goToPage(e)},b.prototype.getPageSize=function(){return this.pageSize},b.prototype.getTotalPages=function(){return this.totalPages},b.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize(),1<=this.pageSize||(this.pageSize=100)},b.prototype.setIndexesAndBounds=function(){var e;this.active?(this.setPageSize(),e=this.getTotalRowCount(),this.totalPages=Math.floor((e-1)/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!d._.isNumeric(this.currentPage)||this.currentPage<0)&&(this.currentPage=0),this.topRowIndex=this.pageSize*this.currentPage,this.bottomRowIndex=this.pageSize*(this.currentPage+1)-1,e=this.rowModel.getPageLastRow(),this.bottomRowIndex>e&&(this.bottomRowIndex=e)):(this.pageSize=this.rowModel.getPageLastRow()+1,this.totalPages=1,this.currentPage=0,this.topRowIndex=0,this.bottomRowIndex=this.rowModel.getPageLastRow()),this.topRowBounds=this.rowModel.getRowBounds(this.topRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomRowIndex),this.pixelOffset=d._.exists(this.topRowBounds)?this.topRowBounds.rowTop:0},s([h.Autowired("rowModel"),a("design:type",Object)],b.prototype,"rowModel",void 0),s([h.Autowired("eventService"),a("design:type",c.EventService)],b.prototype,"eventService",void 0),s([h.Autowired("gridOptionsWrapper"),a("design:type",p.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),s([h.Autowired("selectionController"),a("design:type",g.SelectionController)],b.prototype,"selectionController",void 0),s([h.Autowired("columnApi"),a("design:type",m.ColumnApi)],b.prototype,"columnApi",void 0),s([h.Autowired("gridApi"),a("design:type",i.GridApi)],b.prototype,"gridApi",void 0),s([h.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],b.prototype,"postConstruct",null);var y,f=s([h.Bean("paginationProxy")],b);function b(){var e=null!==y&&y.apply(this,arguments)||this;return e.currentPage=0,e.topRowIndex=0,e.bottomRowIndex=0,e.pixelOffset=0,e}t.PaginationProxy=f},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),a=i(14),s=i(0),l=i(3),c=i(0),u=i(5),d=i(0),h=i(9),p=i(1),f=i(7),i=i(6),r=(g.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData()),this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())},g.prototype.isEmpty=function(e){e=e===h.Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;return p.Utils.missingOrEmpty(e)},g.prototype.isRowsToRender=function(e){return!this.isEmpty(e)},g.prototype.getRowAtPixel=function(e,t){var i=t===h.Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(p.Utils.missingOrEmpty(i))return 0;for(var n=0;n<i.length;n++){var o=i[n];if(e<=o.rowTop+o.rowHeight-1)return n}return i.length-1},g.prototype.setPinnedTopRowData=function(e){this.pinnedTopRows=this.createNodesFromData(e,!0);e={type:u.Events.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},g.prototype.setPinnedBottomRowData=function(e){this.pinnedBottomRows=this.createNodesFromData(e,!1);e={type:u.Events.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},g.prototype.createNodesFromData=function(e,n){var o,r=this,s=[];return e&&(o=0,e.forEach(function(e,t){var i=new a.RowNode;r.context.wireBean(i),i.data=e,i.rowPinned=n?h.Constants.PINNED_TOP:h.Constants.PINNED_BOTTOM,i.setRowTop(o),i.setRowHeight(r.gridOptionsWrapper.getRowHeightForNode(i)),i.setRowIndex(t),o+=i.rowHeight,s.push(i)})),s},g.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},g.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},g.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},g.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},g.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},g.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]},g.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]},g.prototype.forEachPinnedTopRow=function(e){p.Utils.missingOrEmpty(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)},g.prototype.forEachPinnedBottomRow=function(e){p.Utils.missingOrEmpty(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)},g.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},g.prototype.getTotalHeight=function(e){return e&&0!==e.length?(e=e[e.length-1]).rowTop+e.rowHeight:0},n([c.Autowired("gridOptionsWrapper"),o("design:type",r.GridOptionsWrapper)],g.prototype,"gridOptionsWrapper",void 0),n([c.Autowired("eventService"),o("design:type",l.EventService)],g.prototype,"eventService",void 0),n([c.Autowired("context"),o("design:type",s.Context)],g.prototype,"context",void 0),n([c.Autowired("columnApi"),o("design:type",f.ColumnApi)],g.prototype,"columnApi",void 0),n([c.Autowired("gridApi"),o("design:type",i.GridApi)],g.prototype,"gridApi",void 0),n([d.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],g.prototype,"init",null),n([s.Bean("pinnedRowModel")],g));function g(){}t.PinnedRowModel=r},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),s=i(26),l=i(32),a=i(0),i=i(0),i=(c.prototype.calculateColInitialWidth=function(e){return e.width?e.width<this.gridOptionsWrapper.getMinColWidth()?this.gridOptionsWrapper.getMinColWidth():e.width:this.gridOptionsWrapper.getColWidth()},c.prototype.getOriginalPathForColumn=function(r,e){var s=[],a=!1;return function e(t,i){for(var n=0;n<t.length;n++){if(a)return;var o=t[n];o instanceof l.OriginalColumnGroup?(e(o.getChildren(),i+1),s[i]=o):o===r&&(a=!0)}}(e,0),a?s:null},c.prototype.depthFirstOriginalTreeSearch=function(e,t){var i=this;e&&e.forEach(function(e){e instanceof l.OriginalColumnGroup&&i.depthFirstOriginalTreeSearch(e.getChildren(),t),t(e)})},c.prototype.depthFirstAllColumnTreeSearch=function(e,t){var i=this;e&&e.forEach(function(e){e instanceof s.ColumnGroup&&i.depthFirstAllColumnTreeSearch(e.getChildren(),t),t(e)})},c.prototype.depthFirstDisplayedColumnTreeSearch=function(e,t){var i=this;e&&e.forEach(function(e){e instanceof s.ColumnGroup&&i.depthFirstDisplayedColumnTreeSearch(e.getDisplayedChildren(),t),t(e)})},n([i.Autowired("gridOptionsWrapper"),o("design:type",r.GridOptionsWrapper)],c.prototype,"gridOptionsWrapper",void 0),n([a.Bean("columnUtils")],c));function c(){}t.ColumnUtils=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=(Object.defineProperty(t,"__esModule",{value:!0}),i(26)),r=i(10),s=i(3),l=i(0),c=i(7),i=i(6);function u(e,t,i,n){this.localEventService=new s.EventService,this.expandable=!1,this.colGroupDef=e,this.groupId=t,this.expanded=e&&!!e.openByDefault,this.padding=i,this.level=n}u.prototype.getLevel=function(){return this.level},u.prototype.isVisible=function(){return!!this.children&&this.children.some(function(e){return e.isVisible()})},u.prototype.isPadding=function(){return this.padding},u.prototype.setExpanded=function(e){this.expanded=e,this.localEventService.dispatchEvent({type:u.EVENT_EXPANDED_CHANGED})},u.prototype.isExpandable=function(){return this.expandable},u.prototype.isExpanded=function(){return this.expanded},u.prototype.getGroupId=function(){return this.groupId},u.prototype.getId=function(){return this.getGroupId()},u.prototype.setChildren=function(e){this.children=e},u.prototype.getChildren=function(){return this.children},u.prototype.getColGroupDef=function(){return this.colGroupDef},u.prototype.getLeafColumns=function(){var e=[];return this.addLeafColumns(e),e},u.prototype.addLeafColumns=function(t){this.children&&this.children.forEach(function(e){e instanceof r.Column?t.push(e):e instanceof u&&e.addLeafColumns(t)})},u.prototype.getColumnGroupShow=function(){return this.padding?this.children[0].getColumnGroupShow():this.colGroupDef.columnGroupShow},u.prototype.setupExpandable=function(){var t=this;this.setExpandable(),this.getLeafColumns().forEach(function(e){return e.addEventListener(r.Column.EVENT_VISIBLE_CHANGED,t.onColumnVisibilityChanged.bind(t))})},u.prototype.setExpandable=function(){for(var e=!1,t=!1,i=!1,n=0,o=this.children.length;n<o;n++){var r=this.children[n];r.isVisible()&&((r=r.getColumnGroupShow())===a.ColumnGroup.HEADER_GROUP_SHOW_OPEN?i=e=!0:r===a.ColumnGroup.HEADER_GROUP_SHOW_CLOSED?i=t=!0:t=e=!0)}var s=e&&t&&i;this.expandable!==s&&(this.expandable=s,this.localEventService.dispatchEvent({type:u.EVENT_EXPANDABLE_CHANGED}))},u.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},u.prototype.addEventListener=function(e,t){this.localEventService.addEventListener(e,t)},u.prototype.removeEventListener=function(e,t){this.localEventService.removeEventListener(e,t)},u.EVENT_EXPANDED_CHANGED="expandedChanged",u.EVENT_EXPANDABLE_CHANGED="expandableChanged",n([l.Autowired("columnApi"),o("design:type",c.ColumnApi)],u.prototype,"columnApi",void 0),n([l.Autowired("gridApi"),o("design:type",i.GridApi)],u.prototype,"gridApi",void 0),t.OriginalColumnGroup=u},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),i=i(2),i=(s.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache(),this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()},s.prototype.onDataChanged=function(){this.neverExpires||this.expire()},s.prototype.expire=function(){this.cacheVersion++},s.prototype.setValue=function(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)},s.prototype.getValue=function(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion&&void 0!==e.__cacheData[t])return e.__cacheData[t]},n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],s.prototype,"gridOptionsWrapper",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],s.prototype,"init",null),n([r.Bean("valueCache")],s));function s(){this.cacheVersion=0}t.ValueCache=i},function(e,t,i){"use strict";var n,a,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),r=i(10),s=i(14),l=i(9),c=i(5),u=i(23),h=i(8),p=i(65),f=i(121),i=(a=h.Component,o(g,a),g.prototype.getCreateTemplate=function(){var e,t,i=[],n=this.column,o=this.getCellWidth(),r=n.getLeft(),s=this.getInitialValueToRender(),s=d._.get(this.column,"colDef.template",null)?s:d._.escape(s),a=(this.tooltip=this.getToolTip(),d._.escape(this.tooltip)),n=d._.escape(n.getId()),l=this.preProcessStylesFromColDef(),c=this.getInitialCssClasses(),u=this.getStylesForRowSpanning();return this.usingWrapper&&(e='<span ref="eCellWrapper" class="ag-cell-wrapper"><span ref="eCellValue" class="ag-cell-value">',t="</span></span>"),i.push("<div"),i.push(' tabindex="-1"'),i.push(' role="gridcell"'),i.push(' comp-id="'+this.getCompId()+'" '),i.push(' col-id="'+n+'"'),i.push(' class="'+c.join(" ")+'"'),i.push(a?' title="'+a+'"':""),i.push(' style="width: '+o+"px; left: "+r+"px; "+l+" "+u+'" >'),i.push(e),i.push(s),i.push(t),i.push("</div>"),i.join("")},g.prototype.getStylesForRowSpanning=function(){return 1===this.rowSpan?"":"height: "+this.beans.gridOptionsWrapper.getRowHeightAsNumber()*this.rowSpan+"px; z-index: 1;"},g.prototype.afterAttached=function(){var e='[comp-id="'+this.getCompId()+'"]',e=this.eParentRow.querySelector(e);this.setGui(e),this.addDomData(),this.populateTemplate(),this.attachCellRenderer(),this.angular1Compile(),this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_FLASH_CELLS,this.onFlashCells.bind(this)),this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this)),this.addDestroyableEventListener(this.rowNode,s.RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,s.RowNode.EVENT_CELL_CHANGED,this.onCellChanged.bind(this)),this.addDestroyableEventListener(this.column,r.Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.addDestroyableEventListener(this.column,r.Column.EVENT_WIDTH_CHANGED,this.onWidthChanged.bind(this)),this.addDestroyableEventListener(this.column,r.Column.EVENT_FIRST_RIGHT_PINNED_CHANGED,this.onFirstRightPinnedChanged.bind(this)),this.addDestroyableEventListener(this.column,r.Column.EVENT_LAST_LEFT_PINNED_CHANGED,this.onLastLeftPinnedChanged.bind(this)),this.rangeSelectionEnabled&&this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this))},g.prototype.onColumnHover=function(){var e=this.beans.columnHoverService.isHovered(this.column);d._.addOrRemoveCssClass(this.getGui(),"ag-column-hover",e)},g.prototype.onCellChanged=function(e){e.column===this.column&&this.refreshCell({})},g.prototype.getCellLeft=function(){var e=this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?this.colsSpanning[this.colsSpanning.length-1]:this.column;return e.getLeft()},g.prototype.getCellWidth=function(){var t;return this.colsSpanning?(t=0,this.colsSpanning.forEach(function(e){return t+=e.getActualWidth()}),t):this.column.getActualWidth()},g.prototype.onFlashCells=function(e){var t=this.gridCell.createId();e.cells[t]&&this.animateCell("highlight")},g.prototype.setupColSpan=function(){d._.missing(this.column.getColDef().colSpan)||(this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addDestroyableEventListener(this.beans.eventService,c.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)),this.colsSpanning=this.getColSpanningList())},g.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode),t=[];if(1===e)t.push(this.column);else for(var i=this.column,n=this.column.getPinned(),o=0;o<e&&(t.push(i),i=this.beans.columnController.getDisplayedColAfter(i),!d._.missing(i))&&n===i.getPinned();o++);return t},g.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();d._.compareArrays(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())},g.prototype.getInitialCssClasses=function(){var e=["ag-cell","ag-cell-not-inline-editing"];return this.autoHeightCell||e.push("ag-cell-with-height"),!this.beans.gridOptionsWrapper.isSuppressCellSelection()?e.push(this.cellFocused?"ag-cell-focus":"ag-cell-no-focus"):e.push("ag-cell-no-focus"),this.firstRightPinned&&e.push("ag-cell-first-right-pinned"),this.lastLeftPinned&&e.push("ag-cell-last-left-pinned"),this.beans.columnHoverService.isHovered(this.column)&&e.push("ag-column-hover"),d._.pushAll(e,this.preProcessClassesFromColDef()),d._.pushAll(e,this.preProcessCellClassRules()),d._.pushAll(e,this.getRangeClasses()),this.usingWrapper||e.push("ag-cell-value"),e},g.prototype.getInitialValueToRender=function(){if(this.usingCellRenderer)return"string"==typeof this.cellRendererGui?this.cellRendererGui:"";var e=this.column.getColDef();return e.template||(e.templateUrl?this.beans.templateService.getTemplate(e.templateUrl,this.refreshCell.bind(this,!0))||"":this.getValueToUse())},g.prototype.getRenderedRow=function(){return this.rowComp},g.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},g.prototype.getCellRenderer=function(){return this.cellRenderer},g.prototype.getCellEditor=function(){return this.cellEditor},g.prototype.refreshCell=function(e){var t,i,n;this.editingCell||(t=e&&e.newData,i=e&&e.suppressFlash||this.column.getColDef().suppressCellFlash,e=e&&e.forceRefresh,n=this.value,this.getValueAndFormat(),n=!this.valuesAreEqual(n,this.value),(e||n)&&(!t&&!i&&this.attemptCellRendererRefresh()||this.replaceContentsAfterRefresh(),i||(this.beans.gridOptionsWrapper.isEnableCellChangeFlash()||this.column.getColDef().enableCellChangeFlash)&&this.flashCell(),this.postProcessStylesFromColDef(),this.postProcessClassesFromColDef()),this.refreshToolTip(),this.postProcessCellClassRules())},g.prototype.flashCell=function(){this.animateCell("data-changed")},g.prototype.animateCell=function(e){var t="ag-cell-"+e,i="ag-cell-"+e+"-animation",n=this.getGui();d._.addCssClass(n,t),d._.removeCssClass(n,i),setTimeout(function(){d._.removeCssClass(n,t),d._.addCssClass(n,i),setTimeout(function(){d._.removeCssClass(n,i)},1e3)},500)},g.prototype.replaceContentsAfterRefresh=function(){d._.removeAllChildren(this.eParentOfValue),this.cellRenderer&&this.cellRenderer.destroy&&this.cellRenderer.destroy(),this.cellRenderer=null,this.cellRendererGui=null,this.putDataIntoCellAfterRefresh(),this.angular1Compile()},g.prototype.angular1Compile=function(){var e,t;this.beans.gridOptionsWrapper.isAngularCompileRows()&&(e=this.getGui(),t=this.beans.$compile(e)(this.scope),this.addDestroyFunc(function(){t.remove()}))},g.prototype.postProcessStylesFromColDef=function(){var e=this.processStylesFromColDef();e&&d._.addStylesToElement(this.getGui(),e)},g.prototype.preProcessStylesFromColDef=function(){var e=this.processStylesFromColDef();return d._.cssStyleObjectToMarkup(e)},g.prototype.processStylesFromColDef=function(){var e,t=this.column.getColDef();if(t.cellStyle)return"function"==typeof t.cellStyle?(e={value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:t,column:this.column,$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi()},(0,t.cellStyle)(e)):t.cellStyle},g.prototype.postProcessClassesFromColDef=function(){var t=this;this.processClassesFromColDef(function(e){return d._.addCssClass(t.getGui(),e)})},g.prototype.preProcessClassesFromColDef=function(){var t=[];return this.processClassesFromColDef(function(e){return t.push(e)}),t},g.prototype.processClassesFromColDef=function(e){this.beans.stylingService.processStaticCellClasses(this.column.getColDef(),{value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),context:this.beans.gridOptionsWrapper.getContext()},e)},g.prototype.putDataIntoCellAfterRefresh=function(){var e=this.column.getColDef();e.template?this.eParentOfValue.innerHTML=e.template:e.templateUrl?(e=this.beans.templateService.getTemplate(e.templateUrl,this.refreshCell.bind(this,!0)))&&(this.eParentOfValue.innerHTML=e):this.usingCellRenderer?this.attachCellRenderer():null!=(e=this.getValueToUse())&&(this.eParentOfValue.innerText=e)},g.prototype.attemptCellRendererRefresh=function(){if(d._.missing(this.cellRenderer)||d._.missing(this.cellRenderer.refresh))return!1;var e=this.createCellRendererParams(),e=this.cellRenderer.refresh(e);return!0===e||void 0===e},g.prototype.refreshToolTip=function(){var e=this.getToolTip();this.tooltip!==e&&(this.tooltip=e,d._.exists(e)?(e=d._.escape(this.tooltip),this.eParentOfValue.setAttribute("title",e)):this.eParentOfValue.removeAttribute("title"))},g.prototype.valuesAreEqual=function(e,t){var i=this.column.getColDef(),i=i?i.equals:null;return i?i(e,t):e===t},g.prototype.getToolTip=function(){var e=this.column.getColDef(),t=this.rowNode.data;return e.tooltipField&&d._.exists(t)?d._.getValueUsingField(t,e.tooltipField,this.column.isTooltipFieldContainsDots()):e.tooltip?e.tooltip({value:this.value,valueFormatted:this.valueFormatted,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext(),rowIndex:this.gridCell.rowIndex}):null},g.prototype.processCellClassRules=function(e,t){this.beans.stylingService.processClassRules(this.column.getColDef().cellClassRules,{value:this.value,data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),rowIndex:this.gridCell.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()},e,t)},g.prototype.postProcessCellClassRules=function(){var t=this;this.processCellClassRules(function(e){d._.addCssClass(t.getGui(),e)},function(e){d._.removeCssClass(t.getGui(),e)})},g.prototype.preProcessCellClassRules=function(){var t=[];return this.processCellClassRules(function(e){t.push(e)},function(e){}),t},g.prototype.setUsingWrapper=function(){var e=this.column.getColDef();if(this.rowNode.rowPinned)return this.usingWrapper=!1,this.includeSelectionComponent=!1,void(this.includeRowDraggingComponent=!1);var t="function"==typeof e.checkboxSelection,i="function"==typeof e.rowDrag;this.includeSelectionComponent=t||!0===e.checkboxSelection,this.includeRowDraggingComponent=i||!0===e.rowDrag,this.usingWrapper=this.includeRowDraggingComponent||this.includeSelectionComponent},g.prototype.chooseCellRenderer=function(){var e,t,i=this.column.getColDef();i.template||i.templateUrl?this.usingCellRenderer=!1:(e=this.createCellRendererParams(),t=this.beans.componentResolver.getComponentToUse(i,"cellRenderer",e,null),this.beans.componentResolver.getComponentToUse(i,"pinnedRowCellRenderer",e,null)&&this.rowNode.rowPinned?(this.cellRendererType="pinnedRowCellRenderer",this.usingCellRenderer=!0):t?(this.cellRendererType="cellRenderer",this.usingCellRenderer=!0):this.usingCellRenderer=!1)},g.prototype.createCellRendererInstance=function(){var e=this.createCellRendererParams(),t=(this.cellRendererVersion++,this.afterCellRendererCreated.bind(this,this.cellRendererVersion));this.beans.componentResolver.createAgGridComponent(this.column.getColDef(),e,this.cellRendererType,e,null).then(t)},g.prototype.afterCellRendererCreated=function(e,t){e!==this.cellRendererVersion?t.destroy&&t.destroy():(this.cellRenderer=t,this.cellRendererGui=this.cellRenderer.getGui(),d._.missing(this.cellRendererGui)||this.editingCell||this.eParentOfValue.appendChild(this.cellRendererGui))},g.prototype.attachCellRenderer=function(){this.usingCellRenderer&&this.createCellRendererInstance()},g.prototype.createCellRendererParams=function(){var i=this;return{value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValue.bind(this),setValue:function(e){i.beans.valueService.setValue(i.rowNode,i.column,e)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),column:this.column,$scope:this.scope,rowIndex:this.gridCell.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.eParentOfValue,addRowCompListener:this.rowComp?this.rowComp.addEventListener.bind(this.rowComp):null,addRenderedRowListener:function(e,t){console.warn("ag-Grid: since ag-Grid .v11, params.addRenderedRowListener() is now params.addRowCompListener()"),i.rowComp&&i.rowComp.addEventListener(e,t)}}},g.prototype.formatValue=function(e){var t=this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,e);return null!=t?t:e},g.prototype.getValueToUse=function(){return null!==this.valueFormatted&&void 0!==this.valueFormatted?this.valueFormatted:this.value},g.prototype.getValueAndFormat=function(){this.value=this.getValue(),this.valueFormatted=this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,this.value)},g.prototype.getValue=function(){var e=this.rowNode.leafGroup&&this.beans.columnController.isPivotMode();return this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!e&&this.beans.gridOptionsWrapper.isGroupIncludeFooter()?this.beans.valueService.getValue(this.column,this.rowNode,!1,!0):this.beans.valueService.getValue(this.column,this.rowNode)},g.prototype.onMouseEvent=function(e,t){if(!d._.isStopPropagationForAgGrid(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}},g.prototype.dispatchCellContextMenuEvent=function(e){var t=this.column.getColDef(),i=this.createEvent(e,c.Events.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(i),t.onCellContextMenu&&setTimeout(function(){return t.onCellContextMenu(i)},0)},g.prototype.createEvent=function(e,t){e={node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,type:t,rowIndex:this.rowNode.rowIndex};return this.scope&&(e.$scope=this.scope),e},g.prototype.onMouseOut=function(e){e=this.createEvent(e,c.Events.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()},g.prototype.onMouseOver=function(e){e=this.createEvent(e,c.Events.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])},g.prototype.onCellDoubleClicked=function(e){var t=this.column.getColDef(),i=this.createEvent(e,c.Events.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),"function"==typeof t.onCellDoubleClicked&&setTimeout(function(){return t.onCellDoubleClicked(i)},0),this.beans.gridOptionsWrapper.isSingleClickEdit()||this.beans.gridOptionsWrapper.isSuppressClickEdit()||this.startRowOrCellEdit()},g.prototype.startRowOrCellEdit=function(e,t){this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowComp.startRowEditing(e,t,this):this.startEditingIfEnabled(e,t,!0)},g.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},g.prototype.startEditingIfEnabled=function(e,t,i){var n;void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=!1),this.isCellEditable()&&!this.editingCell&&(this.editingCell=!0,this.cellEditorVersion++,n=this.afterCellEditorCreated.bind(this,this.cellEditorVersion),e=this.createCellEditorParams(e,t,i),this.beans.cellEditorFactory.createCellEditor(this.column.getColDef(),e).then(n),d._.missing(this.cellEditor)&&i&&this.focusCell(!0))},g.prototype.afterCellEditorCreated=function(e,t){if(e!==this.cellEditorVersion||!this.editingCell)t.destroy&&t.destroy();else{if(t.isCancelBeforeStart&&t.isCancelBeforeStart())return t.destroy&&t.destroy(),void(this.editingCell=!1);if(!t.getGui)return console.warn("ag-Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),t.render&&console.warn("ag-Grid: we found 'render' on the component, are you trying to set a React renderer but added it as colDef.cellEditor instead of colDef.cellEditorFmk?"),t.destroy&&t.destroy(),void(this.editingCell=!1);this.cellEditor=t,this.cellEditorInPopup=t.isPopup&&t.isPopup(),this.setInlineEditingClass(),this.cellEditorInPopup?this.addPopupCellEditor():this.addInCellEditor(),t.afterGuiAttached&&t.afterGuiAttached();e=this.createEvent(null,c.Events.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(e)}},g.prototype.addInCellEditor=function(){d._.removeAllChildren(this.getGui()),this.getGui().appendChild(this.cellEditor.getGui()),this.angular1Compile()},g.prototype.addPopupCellEditor=function(){var e=this,t=this.cellEditor.getGui();this.hideEditorPopup=this.beans.popupService.addAsModalPopup(t,!0,function(){e.onPopupEditorClosed()}),this.beans.popupService.positionPopupOverComponent({column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),ePopup:t,keepWithinBounds:!0}),this.angular1Compile()},g.prototype.onPopupEditorClosed=function(){this.editingCell&&(this.stopRowOrCellEdit(),this.beans.focusedCellController.isCellFocused(this.gridCell)&&this.focusCell(!0))},g.prototype.setInlineEditingClass=function(){var e=this.editingCell&&!this.cellEditorInPopup,t=this.editingCell&&this.cellEditorInPopup;d._.addOrRemoveCssClass(this.getGui(),"ag-cell-inline-editing",e),d._.addOrRemoveCssClass(this.getGui(),"ag-cell-not-inline-editing",!e),d._.addOrRemoveCssClass(this.getGui(),"ag-cell-popup-editing",t),d._.addOrRemoveCssClass(this.getGui().parentNode,"ag-row-inline-editing",e),d._.addOrRemoveCssClass(this.getGui().parentNode,"ag-row-not-inline-editing",!e)},g.prototype.createCellEditorParams=function(e,t,i){return{value:this.getValue(),keyPress:e,charPress:t,column:this.column,rowIndex:this.gridCell.rowIndex,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),cellStartedEdit:i,columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),$scope:this.scope,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},g.prototype.stopEditingAndFocus=function(e){void 0===e&&(e=!1),this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit()},g.prototype.parseValue=function(e){var t={node:this.rowNode,data:this.rowNode.data,oldValue:this.value,newValue:e,colDef:this.column.getColDef(),column:this.column,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()},i=this.column.getColDef().valueParser;return d._.exists(i)?this.beans.expressionService.evaluate(i,t):e},g.prototype.focusCell=function(e){this.beans.focusedCellController.setFocusedCell(this.gridCell.rowIndex,this.column,this.rowNode.rowPinned,e=void 0===e?!1:e)},g.prototype.setFocusInOnEditor=function(){this.editingCell&&(this.cellEditor&&this.cellEditor.focusIn?this.cellEditor.focusIn():this.focusCell(!0))},g.prototype.isEditing=function(){return this.editingCell},g.prototype.onKeyDown=function(e){var t=e.which||e.keyCode;if(!this.doesUserWantToCancelKeyboardEvent(e))switch(t){case l.Constants.KEY_ENTER:this.onEnterKeyDown();break;case l.Constants.KEY_F2:this.onF2KeyDown();break;case l.Constants.KEY_ESCAPE:this.onEscapeKeyDown();break;case l.Constants.KEY_TAB:this.onTabKeyDown(e);break;case l.Constants.KEY_BACKSPACE:case l.Constants.KEY_DELETE:this.onBackspaceOrDeleteKeyPressed(t);break;case l.Constants.KEY_DOWN:case l.Constants.KEY_UP:case l.Constants.KEY_RIGHT:case l.Constants.KEY_LEFT:this.onNavigationKeyPressed(e,t)}},g.prototype.doesUserWantToCancelKeyboardEvent=function(e){var t=this.column.getColDef().suppressKeyboardEvent;return!d._.missing(t)&&t({event:e,editing:this.editingCell,column:this.column,api:this.beans.gridOptionsWrapper.getApi(),node:this.rowNode,data:this.rowNode.data,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),columnApi:this.beans.gridOptionsWrapper.getColumnApi()})},g.prototype.setFocusOutOnEditor=function(){this.editingCell&&this.cellEditor&&this.cellEditor.focusOut&&this.cellEditor.focusOut()},g.prototype.onNavigationKeyPressed=function(e,t){this.editingCell&&this.stopRowOrCellEdit(),e.shiftKey&&this.rangeSelectionEnabled?this.onShiftRangeSelect(t):this.beans.rowRenderer.navigateToNextCell(e,t,this.gridCell,!0),e.preventDefault()},g.prototype.onShiftRangeSelect=function(e){this.beans.rangeController.extendRangeInDirection(this.gridCell,e)&&(e=this.beans.rangeController.getCellRanges(),d._.missing(e)||1!==e.length||(e=e[0].end,this.beans.rowRenderer.ensureCellVisible(e)))},g.prototype.onTabKeyDown=function(e){this.beans.gridOptionsWrapper.isSuppressTabbing()||this.beans.rowRenderer.onTabKeyDown(this,e)},g.prototype.onBackspaceOrDeleteKeyPressed=function(e){this.editingCell||this.startRowOrCellEdit(e)},g.prototype.onEnterKeyDown=function(){this.editingCell||this.rowComp.isEditing()?this.stopEditingAndFocus():this.beans.gridOptionsWrapper.isEnterMovesDown()?this.beans.rowRenderer.navigateToNextCell(null,l.Constants.KEY_DOWN,this.gridCell,!1):this.startRowOrCellEdit(l.Constants.KEY_ENTER)},g.prototype.navigateAfterEdit=function(){this.beans.gridOptionsWrapper.isFullRowEdit()||this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit()&&this.beans.rowRenderer.navigateToNextCell(null,l.Constants.KEY_DOWN,this.gridCell,!1)},g.prototype.onF2KeyDown=function(){this.editingCell||this.startRowOrCellEdit(l.Constants.KEY_F2)},g.prototype.onEscapeKeyDown=function(){this.editingCell&&(this.stopRowOrCellEdit(!0),this.focusCell(!0))},g.prototype.onKeyPress=function(e){var t;d._.getTarget(e)!==this.getGui()||this.editingCell||(" "===(t=String.fromCharCode(e.charCode))?this.onSpaceKeyPressed(e):d._.isEventFromPrintableCharacter(e)&&(this.startRowOrCellEdit(null,t),e.preventDefault()))},g.prototype.onSpaceKeyPressed=function(e){var t;!this.editingCell&&this.beans.gridOptionsWrapper.isRowSelection()&&(t=this.rowNode.isSelected(),this.rowNode.setSelected(!t)),e.preventDefault()},g.prototype.onMouseDown=function(e){this.focusCell(!1),this.beans.rangeController&&(i=this.gridCell,e.shiftKey?this.beans.rangeController.extendRangeToCell(i):this.beans.rangeController.isCellInAnyRange(i)||(t=e.ctrlKey||e.metaKey,this.beans.rangeController.setRangeToCell(i,t)));var t,i=this.createEvent(e,c.Events.EVENT_CELL_MOUSE_DOWN);this.beans.eventService.dispatchEvent(i)},g.prototype.isDoubleClickOnIPad=function(){if(!d._.isUserAgentIPad())return!1;var e=(new Date).getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t},g.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();var t=this.createEvent(e,c.Events.EVENT_CELL_CLICKED),i=(this.beans.eventService.dispatchEvent(t),this.column.getColDef());i.onCellClicked&&setTimeout(function(){return i.onCellClicked(t)},0),this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit()&&this.startRowOrCellEdit(),this.doIeFocusHack()},g.prototype.doIeFocusHack=function(){!d._.isBrowserIE()&&!d._.isBrowserEdge()||!d._.missing(document.activeElement)&&document.activeElement!==document.body||this.getGui().focus()},g.prototype.createGridCellVo=function(){var e={rowIndex:this.rowNode.rowIndex,floating:this.rowNode.rowPinned,column:this.column};this.gridCell=new u.GridCell(e)},g.prototype.getGridCell=function(){return this.gridCell},g.prototype.getParentRow=function(){return this.eParentRow},g.prototype.setParentRow=function(e){this.eParentRow=e},g.prototype.getColumn=function(){return this.column},g.prototype.detach=function(){this.eParentRow.removeChild(this.getGui())},g.prototype.destroy=function(){a.prototype.destroy.call(this),this.cellEditor&&this.cellEditor.destroy&&(this.cellEditor.destroy(),this.cellEditor=null),this.cellRenderer&&this.cellRenderer.destroy&&(this.cellRenderer.destroy(),this.cellRenderer=null)},g.prototype.onLeftChanged=function(){var e=this.getCellLeft();this.getGui().style.left=e+"px"},g.prototype.onWidthChanged=function(){var e=this.getCellWidth();this.getGui().style.width=e+"px"},g.prototype.getRangeClasses=function(){var e=[];return this.rangeSelectionEnabled&&(0!==this.rangeCount&&e.push("ag-cell-range-selected"),1===this.rangeCount&&e.push("ag-cell-range-selected-1"),2===this.rangeCount&&e.push("ag-cell-range-selected-2"),3===this.rangeCount&&e.push("ag-cell-range-selected-3"),4<=this.rangeCount&&e.push("ag-cell-range-selected-4")),e},g.prototype.onRowIndexChanged=function(){this.createGridCellVo(),this.onCellFocused(),this.onRangeSelectionChanged()},g.prototype.onRangeSelectionChanged=function(){var e,t;this.beans.enterprise&&(e=this.beans.rangeController.getCellRangeCount(this.gridCell),t=this.getGui(),this.rangeCount!==e&&(d._.addOrRemoveCssClass(t,"ag-cell-range-selected",0!==e),d._.addOrRemoveCssClass(t,"ag-cell-range-selected-1",1===e),d._.addOrRemoveCssClass(t,"ag-cell-range-selected-2",2===e),d._.addOrRemoveCssClass(t,"ag-cell-range-selected-3",3===e),d._.addOrRemoveCssClass(t,"ag-cell-range-selected-4",4<=e),this.rangeCount=e))},g.prototype.onFirstRightPinnedChanged=function(){var e=this.column.isFirstRightPinned();this.firstRightPinned!==e&&(this.firstRightPinned=e,d._.addOrRemoveCssClass(this.getGui(),"ag-cell-first-right-pinned",e))},g.prototype.onLastLeftPinnedChanged=function(){var e=this.column.isLastLeftPinned();this.lastLeftPinned!==e&&(this.lastLeftPinned=e,d._.addOrRemoveCssClass(this.getGui(),"ag-cell-last-left-pinned",e))},g.prototype.populateTemplate=function(){this.usingWrapper?(this.eParentOfValue=this.getRefElement("eCellValue"),this.eCellWrapper=this.getRefElement("eCellWrapper"),this.includeRowDraggingComponent&&this.addRowDragging(),this.includeSelectionComponent&&this.addSelectionCheckbox()):this.eParentOfValue=this.getGui()},g.prototype.addRowDragging=function(){var e;this.beans.gridOptionsWrapper.isRowModelDefault()?this.beans.gridOptionsWrapper.isPagination()?d._.doOnce(function(){return console.warn("ag-Grid: row dragging is not possible when doing pagination")},"CellComp.addRowDragging"):(e=new f.RowDragComp(this.rowNode,this.column,this.getValueToUse(),this.beans),this.addFeature(this.beans.context,e),this.eCellWrapper.insertBefore(e.getGui(),this.eParentOfValue)):d._.doOnce(function(){return console.warn("ag-Grid: row dragging is only allowed in the In Memory Row Model")},"CellComp.addRowDragging")},g.prototype.addSelectionCheckbox=function(){var e=new p.CheckboxSelectionComponent;this.beans.context.wireBean(e);var t="function"==typeof(t=this.column.getColDef().checkboxSelection)?t:null;e.init({rowNode:this.rowNode,column:this.column,visibleFunc:t}),this.addDestroyFunc(function(){return e.destroy()}),this.eCellWrapper.insertBefore(e.getGui(),this.eParentOfValue)},g.prototype.addDomData=function(){var e=this,t=this.getGui();this.beans.gridOptionsWrapper.setDomData(t,g.DOM_DATA_KEY_CELL_COMP,this),this.addDestroyFunc(function(){return e.beans.gridOptionsWrapper.setDomData(t,g.DOM_DATA_KEY_CELL_COMP,null)})},g.prototype.onCellFocused=function(e){var t=this.beans.focusedCellController.isCellFocused(this.gridCell),e=(t!==this.cellFocused&&(this.beans.gridOptionsWrapper.isSuppressCellSelection()||(d._.addOrRemoveCssClass(this.getGui(),"ag-cell-focus",t),d._.addOrRemoveCssClass(this.getGui(),"ag-cell-no-focus",!t)),this.cellFocused=t),t&&e&&e.forceBrowserFocus&&this.getGui().focus(),this.beans.gridOptionsWrapper.isFullRowEdit());t||e||!this.editingCell||this.stopRowOrCellEdit()},g.prototype.stopRowOrCellEdit=function(e){void 0===e&&(e=!1),this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowComp.stopRowEditing(e):this.stopEditing(e)},g.prototype.stopEditing=function(e){var t,i;void 0===e&&(e=!1),this.editingCell&&(this.cellEditor?(t=!1,e||this.cellEditor.isCancelAfterEnd&&this.cellEditor.isCancelAfterEnd()||(i=this.cellEditor.getValue(),t=!0),this.editingCell=!1,this.cellEditor.destroy&&this.cellEditor.destroy(),this.cellEditor=null,this.cellEditorInPopup?(this.hideEditorPopup(),this.hideEditorPopup=null):(d._.removeAllChildren(this.getGui()),this.usingWrapper?this.getGui().appendChild(this.eCellWrapper):this.cellRenderer&&(e=this.cellRendererGui)&&this.getGui().appendChild(e)),this.setInlineEditingClass(),t&&(this.rowNode.setDataValue(this.column,i),this.getValueAndFormat()),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),e=this.createEvent(null,c.Events.EVENT_CELL_EDITING_STOPPED),this.beans.eventService.dispatchEvent(e)):this.editingCell=!1)},g.DOM_DATA_KEY_CELL_COMP="cellComp",g);function g(e,t,i,n,o,r){var s=a.call(this)||this;return s.editingCell=!1,s.cellEditorVersion=0,s.cellRendererVersion=0,s.scope=e,s.beans=t,s.column=i,s.rowNode=n,s.rowComp=o,s.autoHeightCell=r,s.createGridCellVo(),s.rangeSelectionEnabled=t.enterprise&&t.gridOptionsWrapper.isEnableRangeSelection(),s.cellFocused=s.beans.focusedCellController.isCellFocused(s.gridCell),s.firstRightPinned=s.column.isFirstRightPinned(),s.lastLeftPinned=s.column.isLastLeftPinned(),s.rangeSelectionEnabled&&(s.rangeCount=s.beans.rangeController.getCellRangeCount(s.gridCell)),s.getValueAndFormat(),s.setUsingWrapper(),s.chooseCellRenderer(),s.setupColSpan(),s.rowSpan=s.column.getRowSpan(s.rowNode),s}t.CellComp=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),g=i(9),r=i(0),s=i(42),a=i(2),i=i(41),s=(l.prototype.getPopupParent=function(){var e=this.gridOptionsWrapper.getPopupParent();return e||this.gridCore.getRootGui()},l.prototype.positionPopupForMenu=function(e){var t,i=e.eventSource.getBoundingClientRect(),n=this.getPopupParent().getBoundingClientRect(),o=i.top-n.top,o=this.keepYWithinBounds(e,o),r=0<e.ePopup.clientWidth?e.ePopup.clientWidth:200,s=n.right-n.left-r;function a(){return i.right-n.left-2}function l(){return i.left-n.left-r}this.gridOptionsWrapper.isEnableRtl()?s<(t=(t=l())<0?a():t)&&(t=0):(t=s<(t=a())?l():t)<0&&(t=0),e.ePopup.style.left=t+"px",e.ePopup.style.top=o+"px"},l.prototype.positionPopupUnderMouseEvent=function(e){var t=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:e.ePopup,x:e.mouseEvent.clientX-t.left,y:e.mouseEvent.clientY-t.top,keepWithinBounds:!0}),this.callPostProcessPopup(e.ePopup,null,e.mouseEvent,e.type,e.column,e.rowNode)},l.prototype.positionPopupUnderComponent=function(e){var t=e.eventSource.getBoundingClientRect(),i=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:e.ePopup,minWidth:e.minWidth,nudgeX:e.nudgeX,nudgeY:e.nudgeY,x:t.left-i.left,y:t.top-i.top+t.height,keepWithinBounds:e.keepWithinBounds}),this.callPostProcessPopup(e.ePopup,e.eventSource,null,e.type,e.column,e.rowNode)},l.prototype.callPostProcessPopup=function(e,t,i,n,o,r){var s=this.gridOptionsWrapper.getPostProcessPopupFunc();s&&s({column:o,rowNode:r,ePopup:e,type:n,eventSource:t,mouseEvent:i})},l.prototype.positionPopupOverComponent=function(e){var t=e.eventSource.getBoundingClientRect(),i=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:e.ePopup,minWidth:e.minWidth,nudgeX:e.nudgeX,nudgeY:e.nudgeY,x:t.left-i.left,y:t.top-i.top,keepWithinBounds:e.keepWithinBounds}),this.callPostProcessPopup(e.ePopup,e.eventSource,null,e.type,e.column,e.rowNode)},l.prototype.positionPopup=function(e){var t=e.x,i=e.y;e.nudgeX&&(t+=e.nudgeX),e.nudgeY&&(i+=e.nudgeY),e.keepWithinBounds&&(t=this.keepXWithinBounds(e,t),i=this.keepYWithinBounds(e,i)),e.ePopup.style.left=t+"px",e.ePopup.style.top=i+"px"},l.prototype.keepYWithinBounds=function(e,t){var i=this.getPopupParent().getBoundingClientRect(),e=0<e.ePopup.clientHeight?e.ePopup.clientHeight:200,i=i.bottom-i.top-e-5;return i<t?i:t<0?0:t},l.prototype.keepXWithinBounds=function(e,t){var i=this.getPopupParent().getBoundingClientRect(),e=0<e.minWidth?e.minWidth:0<e.ePopup.clientWidth?e.ePopup.clientWidth:200,i=i.right-i.left-e-5;return i<t?i:t<0?0:t},l.prototype.addAsModalPopup=function(i,e,n,o){var r=this,s=this.gridOptionsWrapper.getDocument();if(s){i.style.top="0px",i.style.left="0px";var a,l,c,u,d,h,t,p=f.Utils.isVisible(i);if(!p)return a=this.getPopupParent(),l=document.createElement("div"),f.Utils.addCssClass(l,this.environment.getTheme()),l.appendChild(i),a.appendChild(l),this.activePopupElements.push(i),c=!1,u=function(e){(e.which||e.keyCode)===g.Constants.KEY_ESCAPE&&t(null)},d=function(e){t(e)},h=function(e){t(null,e)},t=function(e,t){r.isEventFromCurrentPopup(e,t,i)||r.isEventSameChainAsOriginalEvent(o,e,t)||c||(c=!0,a.removeChild(l),f.Utils.removeFromArray(r.activePopupElements,i),s.removeEventListener("keydown",u),s.removeEventListener("click",d),s.removeEventListener("touchstart",h),s.removeEventListener("contextmenu",d),n&&n())},setTimeout(function(){e&&s.addEventListener("keydown",u),s.addEventListener("click",d),s.addEventListener("touchstart",h),s.addEventListener("contextmenu",d)},0),t}else console.warn("ag-grid: could not find the body of the document, document.body is empty")},l.prototype.isEventFromCurrentPopup=function(e,t,i){var n=e||t;if(n)for(var o=this.activePopupElements.indexOf(i);o<this.activePopupElements.length;o++){var r=this.activePopupElements[o];if(f.Utils.isElementInEventPath(r,n))return!0}return!1},l.prototype.isEventSameChainAsOriginalEvent=function(e,t,i){if(t?n=t:i&&(n=i.touches[0]),n&&e){var i=Math.abs(e.screenX-t.screenX)<5,n=Math.abs(e.screenY-t.screenY)<5;if(i&&n)return!0}return!1},n([r.Autowired("gridCore"),o("design:type",s.GridCore)],l.prototype,"gridCore",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],l.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("environment"),o("design:type",i.Environment)],l.prototype,"environment",void 0),n([r.Bean("popupService")],l));function l(){this.activePopupElements=[]}t.PopupService=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(3),a=i(5),l=i(4),c=i(7),u=i(6),i=i(2),s=(d.prototype.setScrollsVisible=function(e){this.bodyHorizontalScrollShowing===e.bodyHorizontalScrollShowing&&this.leftVerticalScrollShowing===e.leftVerticalScrollShowing&&this.rightVerticalScrollShowing===e.rightVerticalScrollShowing||(this.bodyHorizontalScrollShowing=e.bodyHorizontalScrollShowing,this.leftVerticalScrollShowing=e.leftVerticalScrollShowing,this.rightVerticalScrollShowing=e.rightVerticalScrollShowing,e={type:a.Events.EVENT_SCROLL_VISIBILITY_CHANGED,api:this.gridApi,columnApi:this.columnApi},this.eventService.dispatchEvent(e))},d.prototype.isBodyHorizontalScrollShowing=function(){return this.bodyHorizontalScrollShowing},d.prototype.isLeftVerticalScrollShowing=function(){return this.leftVerticalScrollShowing},d.prototype.isRightVerticalScrollShowing=function(){return this.rightVerticalScrollShowing},n([r.Autowired("eventService"),o("design:type",s.EventService)],d.prototype,"eventService",void 0),n([r.Autowired("columnController"),o("design:type",l.ColumnController)],d.prototype,"columnController",void 0),n([r.Autowired("columnApi"),o("design:type",c.ColumnApi)],d.prototype,"columnApi",void 0),n([r.Autowired("gridApi"),o("design:type",u.GridApi)],d.prototype,"gridApi",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],d.prototype,"gridOptionsWrapper",void 0),n([r.Bean("scrollVisibleService")],d));function d(){}t.ScrollVisibleService=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(123),a=i(2),l=i(25),i=i(3),a=(c.prototype.registerGridComp=function(e){this.gridPanel=e},c.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame()},c.prototype.verifyAnimationFrameOn=function(e){!1===this.useAnimationFrame&&console.warn("ag-Grid: AnimationFrameService."+e+" called but animation frames are off")},c.prototype.addP1Task=function(e){this.verifyAnimationFrameOn("addP1Task"),this.p1Tasks.add(e),this.schedule()},c.prototype.addP2Task=function(e){this.verifyAnimationFrameOn("addP2Task"),this.p2Tasks.add(e),this.schedule()},c.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");for(var t=(new Date).getTime(),i=(new Date).getTime()-t,n=!0,o=e<=0;o||i<e;){if(n)n=this.gridPanel.executeFrame();else if(this.p1Tasks.isEmpty()){if(this.p2Tasks.isEmpty())break;this.p2Tasks.remove()()}else this.p1Tasks.remove()();i=(new Date).getTime()-t}!n&&this.p1Tasks.isEmpty()&&this.p2Tasks.isEmpty()?this.stopTicking():this.requestFrame()},c.prototype.stopTicking=function(){this.ticking=!1;var e={type:l.Events.EVENT_ANIMATION_QUEUE_EMPTY,columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi()};this.eventService.dispatchEvent(e)},c.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},c.prototype.schedule=function(){!this.useAnimationFrame||this.ticking||(this.ticking=!0,this.requestFrame())},c.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60);window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):setTimeout(e,0)},c.prototype.isQueueEmpty=function(){return this.ticking},n([r.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],c.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("eventService"),o("design:type",i.EventService)],c.prototype,"eventService",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],c.prototype,"init",null),n([r.Bean("animationFrameService")],c));function c(){this.p1Tasks=new s.LinkedList,this.p2Tasks=new s.LinkedList,this.ticking=!1}t.AnimationFrameService=a},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),a=i(12),l=i(31),c=i(107),h=i(32),u=i(10),d=i(0),p=i(1),f=i(134),i=(g.prototype.setBeans=function(e){this.logger=e.create("BalancedColumnTreeBuilder")},g.prototype.createForAutoGroups=function(e,t){var i=this,n=[];return e.forEach(function(e){e=i.createAutoGroupTreeItem(t,e);n.push(e)}),n},g.prototype.createAutoGroupTreeItem=function(e,t){for(var i=t,n=this.findDept(e)-1;0<=n;n--){var o=new h.OriginalColumnGroup(null,"FAKE_PATH_"+t.getId()+"}_"+n,!0,n);this.context.wireBean(o),o.setChildren([i]),i=o}return i},g.prototype.findDept=function(e){for(var t=0,i=e;i&&i[0]&&i[0]instanceof h.OriginalColumnGroup;)t++,i=i[0].getChildren();return t},g.prototype.createBalancedColumnGroups=function(e,t){var i=new c.ColumnKeyCreator,e=this.recursivelyCreateColumns(e,0,i,t),t=this.findMaxDept(e,0),e=(this.logger.log("Number of levels for grouped columns is "+t),this.balanceColumnTree(e,0,t,i));return this.columnUtils.depthFirstOriginalTreeSearch(e,function(e){e instanceof h.OriginalColumnGroup&&e.setupExpandable()}),{balancedTree:e,treeDept:t}},g.prototype.balanceColumnTree=function(e,a,l,c){var u=this,d=[];return e.forEach(function(e){if(e instanceof h.OriginalColumnGroup){var t=e,i=u.balanceColumnTree(t.getChildren(),a+1,l,c);t.setChildren(i),d.push(t)}else{for(var n=e,o=l-1;a<=o;o--){var r=c.getUniqueKey(null,null),s=u.createMergedColGroupDef(null),s=new h.OriginalColumnGroup(s,r,!0,a);u.context.wireBean(s),s.setChildren([n]),n=s}d.push(n)}}),d},g.prototype.findMaxDept=function(e,t){for(var i=t,n=0;n<e.length;n++){var o=e[n];o instanceof h.OriginalColumnGroup&&(i<(o=this.findMaxDept(o.getChildren(),t+1))&&(i=o))}return i},g.prototype.recursivelyCreateColumns=function(e,t,i,n){var o=this,r=[];return e&&e.forEach(function(e){e=o.isColumnGroup(e)?o.createColumnGroup(i,n,e,t):o.createColumn(i,n,e);r.push(e)}),r},g.prototype.createColumnGroup=function(e,t,i,n){var i=this.createMergedColGroupDef(i),o=e.getUniqueKey(i.groupId,null),o=new h.OriginalColumnGroup(i,o,!1,n),i=(this.context.wireBean(o),this.recursivelyCreateColumns(i.children,n+1,e,t));return o.setChildren(i),o},g.prototype.createMergedColGroupDef=function(e){var t={};return p.Utils.assign(t,this.gridOptionsWrapper.getDefaultColGroupDef()),p.Utils.assign(t,e),this.checkForDeprecatedItems(t),t},g.prototype.createColumn=function(e,t,i){i=this.mergeColDefs(i),this.checkForDeprecatedItems(i),e=e.getUniqueKey(i.colId,i.field),i=new u.Column(i,e,t);return this.context.wireBean(i),i},g.prototype.mergeColDefs=function(e){var t={};return p.Utils.assign(t,this.gridOptionsWrapper.getDefaultColDef()),e.type&&this.assignColumnTypes(e,t),p.Utils.assign(t,e),t},g.prototype.assignColumnTypes=function(e,i){var t;if(e.type instanceof Array)e.type.some(function(e){return"string"!=typeof e})?console.warn("ag-grid: if colDef.type is supplied an array it should be of type 'string[]'"):t=e.type;else{if("string"!=typeof e.type)return void console.warn("ag-grid: colDef.type should be of type 'string' | 'string[]'");t=e.type.split(",")}var n=p.Utils.assign({},this.gridOptionsWrapper.getColumnTypes(),f.DefaultColumnTypes);t.forEach(function(e){var t=n[e.trim()];t?p.Utils.assign(i,t):console.warn("ag-grid: colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes")})},g.prototype.checkForDeprecatedItems=function(e){e&&(void 0!==(e=e).group&&console.warn("ag-grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==e.headerGroup&&console.warn("ag-grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==e.headerGroupShow&&console.warn("ag-grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3"),void 0!==e.suppressRowGroup&&console.warn("ag-grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead"),void 0!==e.suppressAggregation&&console.warn("ag-grid: colDef.suppressAggregation is deprecated, please use colDef.type instead"),(e.suppressRowGroup||e.suppressAggregation)&&console.warn("ag-grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead"),e.displayName&&(console.warn("ag-grid: Found displayName "+e.displayName+", please use headerName instead, displayName is deprecated."),e.headerName=e.displayName))},g.prototype.isColumnGroup=function(e){return void 0!==e.children},n([d.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],g.prototype,"gridOptionsWrapper",void 0),n([d.Autowired("columnUtils"),o("design:type",l.ColumnUtils)],g.prototype,"columnUtils",void 0),n([d.Autowired("context"),o("design:type",d.Context)],g.prototype,"context",void 0),n([r(0,d.Qualifier("loggerFactory")),o("design:type",Function),o("design:paramtypes",[a.LoggerFactory]),o("design:returntype",void 0)],g.prototype,"setBeans",null),n([d.Bean("balancedColumnTreeBuilder")],g));function g(){}t.BalancedColumnTreeBuilder=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(20)),s=i(0),a=i(2),l=i(100),i=(c.prototype.registerGridComp=function(e){this.gridPanel=e},c.prototype.registerHeaderRootComp=function(e){this.headerRootComp=e},c.prototype.getPreferredWidthForColumn=function(e){var t=this.getHeaderCellForColumn(e);if(!t)return-1;var i=document.createElement("span"),n=(i.style.position="fixed",this.gridPanel.getBodyContainer()),e=(n.appendChild(i),this.putRowCellsIntoDummyContainer(e,i),this.cloneItemIntoDummy(t,i),i.offsetWidth);return n.removeChild(i),e+this.gridOptionsWrapper.getAutoSizePadding()},c.prototype.getHeaderCellForColumn=function(t){var i=null;return this.headerRootComp.forEachHeaderElement(function(e){e instanceof l.HeaderWrapperComp&&((e=e).getColumn()===t&&(i=e))}),i?i.getGui():null},c.prototype.putRowCellsIntoDummyContainer=function(e,t){var i=this;this.rowRenderer.getAllCellsForColumn(e).forEach(function(e){return i.cloneItemIntoDummy(e,t)})},c.prototype.cloneItemIntoDummy=function(e,t){var e=e.cloneNode(!0),i=(e.style.width="",e.style.position="static",e.style.left="",document.createElement("div"));i.style.display="table-row",i.appendChild(e),t.appendChild(i)},n([s.Autowired("rowRenderer"),o("design:type",r.RowRenderer)],c.prototype,"rowRenderer",void 0),n([s.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],c.prototype,"gridOptionsWrapper",void 0),n([s.Bean("autoWidthCalculator")],c));function c(){}t.AutoWidthCalculator=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(12),a=i(1),l=i(3),c=i(5),u=i(2),d=i(7),i=i(6),s=(h.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},h.prototype.destroy=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},h.prototype.removeListener=function(e){var t=e.dragSource.eElement,i=e.mouseDownListener;t.removeEventListener("mousedown",i),e.touchEnabled&&(i=e.touchStartListener,t.removeEventListener("touchstart",i,{passive:!0}))},h.prototype.removeDragSource=function(t){var e=a.Utils.find(this.dragSources,function(e){return e.dragSource===t});e&&(this.removeListener(e),a.Utils.removeFromArray(this.dragSources,e))},h.prototype.setNoSelectToBody=function(e){var t=this.gridOptionsWrapper.getDocument().querySelector("body");a.Utils.exists(t)&&a.Utils.addOrRemoveCssClass(t,"ag-body-no-select",e)},h.prototype.addDragSource=function(e,t){void 0===t&&(t=!1);var i=this.onMouseDown.bind(this,e),n=(e.eElement.addEventListener("mousedown",i),null),o=this.gridOptionsWrapper.isSuppressTouch();t&&!o&&(n=this.onTouchStart.bind(this,e),e.eElement.addEventListener("touchstart",n,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:i,touchStartListener:n,touchEnabled:t})},h.prototype.onTouchStart=function(e,t){var i=this,n=(this.currentDragParams=e,this.dragging=!1,t.touches[0]);this.touchLastTime=n,this.touchStart=n,t.preventDefault(),e.eElement.addEventListener("touchmove",this.onTouchMoveListener,{passive:!0}),e.eElement.addEventListener("touchend",this.onTouchEndListener,{passive:!0}),e.eElement.addEventListener("touchcancel",this.onTouchEndListener,{passive:!0}),this.dragEndFunctions.push(function(){e.eElement.removeEventListener("touchmove",i.onTouchMoveListener,{passive:!0}),e.eElement.removeEventListener("touchend",i.onTouchEndListener,{passive:!0}),e.eElement.removeEventListener("touchcancel",i.onTouchEndListener,{passive:!0})}),0===e.dragStartPixels&&this.onCommonMove(n,this.touchStart)},h.prototype.onMouseDown=function(e,t){var i,n=this;e.skipMouseEvent&&e.skipMouseEvent(t)||t._alreadyProcessedByDragService||(t._alreadyProcessedByDragService=!0,0===t.button&&(this.currentDragParams=e,this.dragging=!1,this.mouseEventLastTime=t,this.mouseStartEvent=t,(i=this.gridOptionsWrapper.getDocument()).addEventListener("mousemove",this.onMouseMoveListener),i.addEventListener("mouseup",this.onMouseUpListener),this.dragEndFunctions.push(function(){i.removeEventListener("mousemove",n.onMouseMoveListener),i.removeEventListener("mouseup",n.onMouseUpListener)}),0===e.dragStartPixels&&this.onMouseMove(t)))},h.prototype.isEventNearStartEvent=function(e,t){var i=a.Utils.exists(this.currentDragParams.dragStartPixels)?this.currentDragParams.dragStartPixels:4;return a.Utils.areEventsNear(e,t,i)},h.prototype.getFirstActiveTouch=function(e){for(var t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null},h.prototype.onCommonMove=function(e,t){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;var i={type:c.Events.EVENT_DRAG_STARTED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(i),this.currentDragParams.onDragStart(t),this.setNoSelectToBody(!0)}this.currentDragParams.onDragging(e)},h.prototype.onTouchMove=function(e){e=this.getFirstActiveTouch(e.touches);e&&this.onCommonMove(e,this.touchStart)},h.prototype.onMouseMove=function(e){this.onCommonMove(e,this.mouseStartEvent)},h.prototype.onTouchUp=function(e){e=(e=this.getFirstActiveTouch(e.changedTouches))||this.touchLastTime;this.onUpCommon(e)},h.prototype.onMouseUp=function(e){this.onUpCommon(e)},h.prototype.onUpCommon=function(e){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),e={type:c.Events.EVENT_DRAG_STOPPED,api:this.gridApi,columnApi:this.columnApi},this.eventService.dispatchEvent(e)),this.setNoSelectToBody(!1),this.mouseStartEvent=null,this.mouseEventLastTime=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(e){return e()}),this.dragEndFunctions.length=0},n([r.Autowired("loggerFactory"),o("design:type",s.LoggerFactory)],h.prototype,"loggerFactory",void 0),n([r.Autowired("eventService"),o("design:type",l.EventService)],h.prototype,"eventService",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",u.GridOptionsWrapper)],h.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("columnApi"),o("design:type",d.ColumnApi)],h.prototype,"columnApi",void 0),n([r.Autowired("gridApi"),o("design:type",i.GridApi)],h.prototype,"gridApi",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],h.prototype,"init",null),n([r.PreDestroy,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],h.prototype,"destroy",null),n([r.Bean("dragService")],h));function h(){this.onMouseUpListener=this.onMouseUp.bind(this),this.onMouseMoveListener=this.onMouseMove.bind(this),this.onTouchEndListener=this.onTouchUp.bind(this),this.onTouchMoveListener=this.onTouchMove.bind(this),this.dragEndFunctions=[],this.dragSources=[]}t.DragService=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),r=["fresh","dark","blue","bootstrap","material","balham-dark","balham"],r=r.concat(r.map(function(e){return"theme-"+e})),s=new RegExp("ag-("+r.join("|")+")"),a={"ag-theme-material":{headerHeight:56,virtualItemHeight:40,rowHeight:48},"ag-theme-classic":{headerHeight:25,virtualItemHeight:20,rowHeight:25},"ag-theme-balham":{headerHeight:32,virtualItemHeight:28,rowHeight:28}},r=(l.prototype.loadSassVariables=function(){},l.prototype.getSassVariable=function(e,t){return("ag-theme-material"==e?a["ag-theme-material"]:"ag-theme-balham"==e||"ag-theme-balham-dark"==e?a["ag-theme-balham"]:a["ag-theme-classic"])[t]},l.prototype.getTheme=function(){for(var e,t=this.eGridDiv;t!=document.documentElement&&null==e&&(e=t.className.match(s),null!=(t=t.parentElement)););return e?e[0]:"ag-fresh"},n([i.Autowired("eGridDiv"),o("design:type",HTMLElement)],l.prototype,"eGridDiv",void 0),n([i.Bean("environment")],l));function l(){this.sassVariables={}}t.Environment=r},function(e,t,i){"use strict";var n,o,r,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),u=i(7),d=i(4),h=i(20),p=i(18),f=i(3),g=i(78),m=i(12),v=i(35),y=i(1),b=i(0),w=i(22),C=i(8),_=i(6),i=i(11),C=(o=C.Component,s(A,o),(r=A).prototype.init=function(){var t=this,e=(this.logger=this.loggerFactory.create("GridCore"),this.enterprise?r.TEMPLATE_ENTERPRISE:r.TEMPLATE_NORMAL);this.setTemplate(e),this.instantiate(this.context),this.enterprise&&(this.toolPanelComp.registerGridComp(this.gridPanel),this.statusBar.registerGridPanel(this.gridPanel)),this.gridOptionsWrapper.addEventListener(c.GridOptionsWrapper.PROP_GRID_AUTO_HEIGHT,this.addLayoutClass.bind(this)),this.addLayoutClass(),this.showToolPanel(this.gridOptionsWrapper.isShowToolPanel()),this.eGridDiv.appendChild(this.getGui()),this.addDestroyFunc(function(){t.eGridDiv.removeChild(t.getGui())}),this.$scope&&(e=this.$scope.$watch(this.quickFilterOnScope,function(e){return t.filterManager.setQuickFilter(e)}),this.addDestroyFunc(e)),this.addRtlSupport(),this.finished=!1,this.addDestroyFunc(function(){return t.finished=!0}),this.logger.log("ready")},A.prototype.addLayoutClass=function(){var e=this.gridOptionsWrapper.isGridAutoHeight();this.addOrRemoveCssClass("ag-layout-auto-height",e),this.addOrRemoveCssClass("ag-layout-normal",!e),this.addOrRemoveCssClass("ag-scrolls",!e)},A.prototype.getPreferredWidth=function(){return this.columnController.getBodyContainerWidth()+this.columnController.getPinnedLeftContainerWidth()+this.columnController.getPinnedRightContainerWidth()+(this.toolPanelComp?this.toolPanelComp.getPreferredWidth():0)},A.prototype.addRtlSupport=function(){var e=this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr";y.Utils.addCssClass(this.getGui(),e)},A.prototype.getRootGui=function(){return this.getGui()},A.prototype.showToolPanel=function(e){this.toolPanelComp?this.toolPanelComp.showToolPanel(e):e&&console.warn("ag-Grid: toolPanel is only available in ag-Grid Enterprise")},A.prototype.isToolPanelShowing=function(){return this.toolPanelComp.isToolPanelShowing()},A.prototype.destroy=function(){o.prototype.destroy.call(this),this.logger.log("Grid DOM removed")},A.prototype.ensureNodeVisible=function(e,t){if(void 0===t&&(t="top"),this.doingVirtualPaging)throw"Cannot use ensureNodeVisible when doing virtual paging, as we cannot check rows that are not in memory";for(var i=this.rowModel.getPageLastRow()+1,n="function"==typeof e,o=-1,r=0;r<i;r++){var s=this.rowModel.getRow(r);if(n){if(e(s)){o=r;break}}else if(e===s||e===s.data){o=r;break}}0<=o&&this.gridPanel.ensureIndexVisible(o,t)},A.TEMPLATE_NORMAL='<div class="ag-root-wrapper">\n            <div class="ag-root-wrapper-body">\n                <ag-grid-comp ref="gridPanel"></ag-grid-comp>\n            </div>\n            <ag-pagination></ag-pagination>\n        </div>',A.TEMPLATE_ENTERPRISE='<div class="ag-root-wrapper">\n            <ag-header-column-drop></ag-header-column-drop>\n            <div class="ag-root-wrapper-body">\n                <ag-grid-comp ref="gridPanel"></ag-grid-comp>\n                <ag-tool-panel ref="toolPanel"></ag-tool-panel>\n            </div>\n            <ag-status-bar ref="statusBar"></ag-status-bar>\n            <ag-pagination></ag-pagination>\n        </div>',a([b.Autowired("enterprise"),l("design:type",Boolean)],A.prototype,"enterprise",void 0),a([b.Autowired("gridOptions"),l("design:type",Object)],A.prototype,"gridOptions",void 0),a([b.Autowired("gridOptionsWrapper"),l("design:type",c.GridOptionsWrapper)],A.prototype,"gridOptionsWrapper",void 0),a([b.Autowired("rowModel"),l("design:type",Object)],A.prototype,"rowModel",void 0),a([b.Autowired("frameworkFactory"),l("design:type",Object)],A.prototype,"frameworkFactory",void 0),a([b.Autowired("columnController"),l("design:type",d.ColumnController)],A.prototype,"columnController",void 0),a([b.Autowired("rowRenderer"),l("design:type",h.RowRenderer)],A.prototype,"rowRenderer",void 0),a([b.Autowired("filterManager"),l("design:type",p.FilterManager)],A.prototype,"filterManager",void 0),a([b.Autowired("eventService"),l("design:type",f.EventService)],A.prototype,"eventService",void 0),a([b.Autowired("eGridDiv"),l("design:type",HTMLElement)],A.prototype,"eGridDiv",void 0),a([b.Autowired("$scope"),l("design:type",Object)],A.prototype,"$scope",void 0),a([b.Autowired("quickFilterOnScope"),l("design:type",String)],A.prototype,"quickFilterOnScope",void 0),a([b.Autowired("popupService"),l("design:type",v.PopupService)],A.prototype,"popupService",void 0),a([b.Autowired("focusedCellController"),l("design:type",w.FocusedCellController)],A.prototype,"focusedCellController",void 0),a([b.Autowired("context"),l("design:type",b.Context)],A.prototype,"context",void 0),a([b.Autowired("loggerFactory"),l("design:type",m.LoggerFactory)],A.prototype,"loggerFactory",void 0),a([b.Autowired("columnApi"),l("design:type",u.ColumnApi)],A.prototype,"columnApi",void 0),a([b.Autowired("gridApi"),l("design:type",_.GridApi)],A.prototype,"gridApi",void 0),a([b.Optional("rowGroupCompFactory"),l("design:type",Object)],A.prototype,"rowGroupCompFactory",void 0),a([b.Optional("pivotCompFactory"),l("design:type",Object)],A.prototype,"pivotCompFactory",void 0),a([i.RefSelector("statusBar"),l("design:type",Object)],A.prototype,"statusBar",void 0),a([i.RefSelector("gridPanel"),l("design:type",g.GridPanel)],A.prototype,"gridPanel",void 0),a([i.RefSelector("toolPanel"),l("design:type",Object)],A.prototype,"toolPanelComp",void 0),a([b.PostConstruct,l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],A.prototype,"init",null),a([b.PreDestroy,l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],A.prototype,"destroy",null),r=a([b.Bean("gridCore"),l("design:paramtypes",[])],A));function A(){return o.call(this)||this}t.GridCore=C},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(2),i=i(19),s=(a.prototype.formatValue=function(e,t,i,n){var o=e.getColDef(),r=t&&t.rowPinned&&o.pinnedRowValueFormatter||o.valueFormatter,s=null;if(r){t={value:n,node:t,data:t?t.data:null,colDef:e.getColDef(),column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};t.$scope=i,s=this.expressionService.evaluate(r,t)}else if(o.refData)return o.refData[n];return s=null==s&&Array.isArray(n)?n.join(", "):s},n([r.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("expressionService"),o("design:type",i.ExpressionService)],a.prototype,"expressionService",void 0),n([r.Bean("valueFormatterService")],a));function a(){}t.ValueFormatterService=s},function(e,t,i){"use strict";var o,n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),a=i(0),l=i(1),c=i(2),u=i(34),i=((o=d).prototype.init=function(){this.stampDomElementWithGridInstance()},d.prototype.stampDomElementWithGridInstance=function(){this.eGridDiv[o.GRID_DOM_KEY]=this.gridInstanceId},d.prototype.getRenderedCellForEvent=function(e){for(var t=l.Utils.getTarget(e);t;){var i=this.gridOptionsWrapper.getDomData(t,u.CellComp.DOM_DATA_KEY_CELL_COMP);if(i)return i;t=t.parentElement}return null},d.prototype.isEventFromThisGrid=function(e){for(var t=l.Utils.getEventPath(e),i=0;i<t.length;i++){var n=t[i][o.GRID_DOM_KEY];if(l.Utils.exists(n))return n===this.gridInstanceId}return!1},d.prototype.getGridCellForEvent=function(e){e=this.getRenderedCellForEvent(e);return e?e.getGridCell():null},d.gridInstanceSequence=new l.NumberSequence,d.GRID_DOM_KEY="__ag_grid_instance",n([a.Autowired("gridOptionsWrapper"),r("design:type",c.GridOptionsWrapper)],d.prototype,"gridOptionsWrapper",void 0),n([a.Autowired("eGridDiv"),r("design:type",HTMLElement)],d.prototype,"eGridDiv",void 0),n([s.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],d.prototype,"init",null),o=n([s.Bean("mouseEventService")],d));function d(){this.gridInstanceId=o.gridInstanceSequence.next()}t.MouseEventService=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(3)),c=i(0),u=i(5),d=i(13),h=i(7),i=i(6),d=(o=d.BeanStub,r(p,o),p.prototype.setMouseOver=function(e){this.selectedColumns=e;e={type:u.Events.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},p.prototype.clearMouseOver=function(){this.selectedColumns=null;var e={type:u.Events.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},p.prototype.isHovered=function(e){return this.selectedColumns&&0<=this.selectedColumns.indexOf(e)},s([c.Autowired("eventService"),a("design:type",l.EventService)],p.prototype,"eventService",void 0),s([c.Autowired("columnApi"),a("design:type",h.ColumnApi)],p.prototype,"columnApi",void 0),s([c.Autowired("gridApi"),a("design:type",i.GridApi)],p.prototype,"gridApi",void 0),s([c.Bean("columnHoverService")],p));function p(){return null!==o&&o.apply(this,arguments)||this}t.ColumnHoverService=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(3),n=i(1);function o(e,t){void 0===t&&(t=!1);var i=this,n=(this.destroyFuncs=[],this.touching=!1,this.eventService=new s.EventService,this.eElement=e,this.preventMouseClick=t,this.onTouchStart.bind(this)),o=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",o,{passive:!0}),this.eElement.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push(function(){i.eElement.addEventListener("touchstart",n,{passive:!0}),i.eElement.addEventListener("touchmove",o,{passive:!0}),i.eElement.addEventListener("touchend",r,{passive:!1})})}o.prototype.getActiveTouch=function(e){for(var t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null},o.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)},o.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)},o.prototype.onTouchStart=function(t){var i,n=this;this.touching||(this.touchStart=t.touches[0],this.touching=!0,this.moved=!1,i=this.touchStart,setTimeout(function(){var e=n.touchStart===i;n.touching&&e&&!n.moved&&(n.moved=!0,e={type:o.EVENT_LONG_TAP,touchStart:n.touchStart,touchEvent:t},n.eventService.dispatchEvent(e))},500))},o.prototype.onTouchMove=function(e){!this.touching||(e=this.getActiveTouch(e.touches))&&!n.Utils.areEventsNear(e,this.touchStart,4)&&(this.moved=!0)},o.prototype.onTouchEnd=function(e){var t;this.touching&&(this.moved||(t={type:o.EVENT_TAP,touchStart:this.touchStart},this.eventService.dispatchEvent(t),this.checkForDoubleTap(),this.preventMouseClick&&e.preventDefault()),this.touching=!1)},o.prototype.checkForDoubleTap=function(){var e,t=(new Date).getTime();0<this.lastTapTime?(e=t-this.lastTapTime,o.DOUBLE_TAP_MILLIS<e?(e={type:o.EVENT_DOUBLE_TAP,touchStart:this.touchStart},this.eventService.dispatchEvent(e),this.lastTapTime=null):this.lastTapTime=t):this.lastTapTime=t},o.prototype.destroy=function(){this.destroyFuncs.forEach(function(e){return e()})},o.EVENT_TAP="tap",o.EVENT_DOUBLE_TAP="doubleTap",o.EVENT_LONG_TAP="longTap",o.DOUBLE_TAP_MILLIS=500,t.TouchListener=o},function(e,t,i){"use strict";var n,a,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),c=i(63),u=i(84),d=i(4),h=i(16),p=i(2),f=i(9),g=i(1),m="\r\n",v=(a=c.BaseGridSerializingSession,o(y,a),y.prototype.prepare=function(e){},y.prototype.addCustomHeader=function(e){e&&(this.result+=e+m)},y.prototype.addCustomFooter=function(e){e&&(this.result+=e+m)},y.prototype.onNewHeaderGroupingRow=function(){return this.lineOpened&&(this.result+=m),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},y.prototype.onNewHeaderGroupingRowColumn=function(e,t,i){0!=t&&(this.result+=this.columnSeparator),this.result+=e;for(var n=1;n<=i;n++)this.result+=this.columnSeparator+this.putInQuotes("",this.suppressQuotes);this.lineOpened=!0},y.prototype.onNewHeaderRow=function(){return this.lineOpened&&(this.result+=m),{onColumn:this.onNewHeaderRowColumn.bind(this)}},y.prototype.onNewHeaderRowColumn=function(e,t,i){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e),this.suppressQuotes),this.lineOpened=!0},y.prototype.onNewBodyRow=function(){return this.lineOpened&&(this.result+=m),{onColumn:this.onNewBodyRowColumn.bind(this)}},y.prototype.onNewBodyRowColumn=function(e,t,i){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(e,t,f.Constants.EXPORT_TYPE_CSV,i),this.suppressQuotes),this.lineOpened=!0},y.prototype.putInQuotes=function(e,t){if(t)return e;if(null==e)return'""';t="string"==typeof e?e:"function"==typeof e.toString?e.toString():(console.warn("unknown value type during csv conversion"),"");return'"'+t.replace(/"/g,'""')+'"'},y.prototype.parse=function(){return this.result},y);function y(e,t,i,n,o,r,s){e=a.call(this,e,t,i,n,o)||this;return e.suppressQuotes=r,e.columnSeparator=s,e.result="",e.lineOpened=!1,e}t.CsvSerializingSession=v;b.prototype.setBeans=function(e){this.beans=e},b.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("ag-grid: Export canceled. Export is not allowed as per your configuration."),"";var e=this.getMergedParamsAndData(e),t=e.mergedParams,e=e.data,t=t&&t.fileName&&0!==t.fileName.length?t.fileName:this.getDefaultFileName();return-1===t.indexOf(".")&&(t=t+"."+this.getDefaultFileExtension()),this.beans.downloader.download(t,e,this.getMimeType()),e},b.prototype.getData=function(e){return this.getMergedParamsAndData(e).data},b.prototype.getMergedParamsAndData=function(e){e=this.mergeDefaultParams(e);return{mergedParams:e,data:this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}},b.prototype.mergeDefaultParams=function(e){var t=this.beans.gridOptionsWrapper.getDefaultExportParams(),i={};return g._.assign(i,t),g._.assign(i,e),i};i=b;function b(){}t.BaseCreator=i;o(C,w=i),C.prototype.postConstruct=function(){this.setBeans({downloader:this.downloader,gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},C.prototype.exportDataAsCsv=function(e){return this.export(e)},C.prototype.getDataAsCsv=function(e){return this.getData(e)},C.prototype.getMimeType=function(){return"text/csv;charset=utf-8;"},C.prototype.getDefaultFileName=function(){return"export.csv"},C.prototype.getDefaultFileExtension=function(){return"csv"},C.prototype.createSerializingSession=function(e){return new v(this.columnController,this.valueService,this.gridOptionsWrapper,e?e.processCellCallback:null,e?e.processHeaderCallback:null,e&&e.suppressQuotes,e&&e.columnSeparator||",")},C.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},r([l.Autowired("columnController"),s("design:type",d.ColumnController)],C.prototype,"columnController",void 0),r([l.Autowired("valueService"),s("design:type",h.ValueService)],C.prototype,"valueService",void 0),r([l.Autowired("downloader"),s("design:type",u.Downloader)],C.prototype,"downloader",void 0),r([l.Autowired("gridSerializer"),s("design:type",c.GridSerializer)],C.prototype,"gridSerializer",void 0),r([l.Autowired("gridOptionsWrapper"),s("design:type",p.GridOptionsWrapper)],C.prototype,"gridOptionsWrapper",void 0),r([l.PostConstruct,s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],C.prototype,"postConstruct",null);var w,o=r([l.Bean("csvCreator")],C);function C(){return null!==w&&w.apply(this,arguments)||this}t.CsvCreator=o},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(31)),s=i(26),l=i(32),a=i(0),c=i(1),i=i(0),r=(u.prototype.createDisplayedGroups=function(e,s,a,t){var l,c,u=this,d=[],h=this.mapOldGroupsById(t);return e.forEach(function(e){for(var t,i=u.getOriginalPathForColumn(s,e),n=[],o=!c,r=0;r<i.length;r++)o||i[r]!==c[r]?(t=u.createColumnGroup(i[r],a,h),n[r]=t,0==r?d.push(t):n[r-1].addChild(t)):n[r]=l[r];0===n.length?d.push(e):n[n.length-1].addChild(e),l=n,c=i}),this.setupParentsIntoColumns(d,null),d},u.prototype.createColumnGroup=function(e,t,i){var n=e.getGroupId(),t=t.getInstanceIdForKey(n),i=i[s.ColumnGroup.createUniqueId(n,t)];return i&&i.getOriginalColumnGroup()!==e&&(i=null),c.Utils.exists(i)?i.reset():(i=new s.ColumnGroup(e,n,t),this.context.wireBean(i)),i},u.prototype.mapOldGroupsById=function(e){function t(e){e.forEach(function(e){e instanceof s.ColumnGroup&&(i[(e=e).getUniqueId()]=e,t(e.getChildren()))})}var i={};return e&&t(e),i},u.prototype.setupParentsIntoColumns=function(e,t){var i=this;e.forEach(function(e){e.setParent(t),e instanceof s.ColumnGroup&&i.setupParentsIntoColumns((e=e).getChildren(),e)})},u.prototype.getOriginalPathForColumn=function(e,r){var s=[],a=!1;return function e(t,i){for(var n=0;n<t.length;n++){if(a)return;var o=t[n];o instanceof l.OriginalColumnGroup?(e(o.getChildren(),i+1),s[i]=o):o===r&&(a=!0)}}(e,0),a?s:(console.log("could not get path"),null)},n([i.Autowired("columnUtils"),o("design:type",r.ColumnUtils)],u.prototype,"columnUtils",void 0),n([i.Autowired("context"),o("design:type",a.Context)],u.prototype,"context",void 0),n([a.Bean("displayedGroupCreator")],u));function u(){}t.DisplayedGroupCreator=r},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),i=i(0),i=(s.prototype.getTemplate=function(e,t){var i=this.templateCache[e];if(i)return i;var n,i=this.waitingCallbacks[e],o=this;return i||(this.waitingCallbacks[e]=i=[],(n=new XMLHttpRequest).onload=function(){o.handleHttpResult(this,e)},n.open("GET",e),n.send()),t&&i.push(t),null},s.prototype.handleHttpResult=function(e,t){if(200!==e.status||null===e.response)console.warn("Unable to get template error "+e.status+" - "+t);else{this.templateCache[t]=e.response||e.responseText;for(var i,n=this.waitingCallbacks[t],o=0;o<n.length;o++)(0,n[o])();this.$scope&&(i=this,setTimeout(function(){i.$scope.$apply()},0))}},n([i.Autowired("$scope"),o("design:type",Object)],s.prototype,"$scope",void 0),n([r.Bean("templateService")],s));function s(){this.templateCache={},this.waitingCallbacks={}}t.TemplateService=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),l=i(34),u=i(14),d=i(2),h=i(10),p=i(5),f=i(0),g=i(8),i=i(11),f=(o=g.Component,r(m,o),m.prototype.init=function(e){var t=c._.createIconNoSpan("groupLoading",this.gridOptionsWrapper,null),t=(this.eLoadingIcon.appendChild(t),this.gridOptionsWrapper.getLocaleTextFunc());this.eLoadingText.innerText=t("loadingOoo","Loading")},m.prototype.refresh=function(e){return!1},m.TEMPLATE='<div class="ag-stub-cell">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',s([f.Autowired("gridOptionsWrapper"),a("design:type",d.GridOptionsWrapper)],m.prototype,"gridOptionsWrapper",void 0),s([i.RefSelector("eLoadingIcon"),a("design:type",HTMLElement)],m.prototype,"eLoadingIcon",void 0),s([i.RefSelector("eLoadingText"),a("design:type",HTMLElement)],m.prototype,"eLoadingText",void 0),m);function m(){return o.call(this,m.TEMPLATE)||this}t.LoadingCellRenderer=f;v=g.Component,r(y,v),y.prototype.init=function(){var e=this;this.rowFocused=this.beans.focusedCellController.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.scope=this.createChildScopeOrNull(this.rowNode.data),this.setupRowContainers(),this.addListeners(),this.slideRowIn&&this.createSecondPassFuncs.push(function(){e.onTopChanged()}),this.fadeRowIn&&this.createSecondPassFuncs.push(function(){e.eAllRowContainers.forEach(function(e){return c._.removeCssClass(e,"ag-opacity-zero")})})},y.prototype.createTemplate=function(e,t){var i=[],n=this.rowNode.rowHeight,t=this.getInitialRowClasses(t=void 0===t?null:t).join(" "),o=c._.escape(this.rowNode.id),r=this.preProcessStylesFromGridOptions(),s=this.getRowBusinessKey(),a=c._.escape(s),l=this.getInitialRowTopStyle();return i.push("<div"),i.push(' role="row"'),i.push(' row-index="'+this.rowNode.getRowIndexString()+'"'),i.push(o?' row-id="'+o+'"':""),i.push(s?' row-business-key="'+a+'"':""),i.push(' comp-id="'+this.getCompId()+'"'),i.push(' class="'+t+'"'),i.push(' style="height: '+n+"px; "+l+" "+r+'">'),i.push(e),i.push("</div>"),i.join("")},y.prototype.getCellForCol=function(e){e=this.cellComps[e.getColId()];return e?e.getGui():null},y.prototype.afterFlush=function(){this.initialised||(this.initialised=!0,this.executeProcessRowPostCreateFunc())},y.prototype.executeProcessRowPostCreateFunc=function(){var e=this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();e&&e({eRow:this.eBodyRow,ePinnedLeftRow:this.ePinnedLeftRow,ePinnedRightRow:this.ePinnedRightRow,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()})},y.prototype.getInitialRowTopStyle=function(){var e=this.slideRowIn?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,e=this.applyPaginationOffset(e),e=this.beans.heightScaler.getRealPixelPosition(e);return this.beans.gridOptionsWrapper.isSuppressRowTransform()?"top: "+e+"px; ":"transform: translateY("+e+"px); "},y.prototype.getRowBusinessKey=function(){if("function"==typeof this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc())return this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc()(this.rowNode)},y.prototype.lazyCreateCells=function(e,t){this.active&&(e=this.createCells(e),t.innerHTML=e.template,this.callAfterRowAttachedOnCells(e.cellComps,t))},y.prototype.createRowContainer=function(t,i,n){var o=this,r=this.useAnimationFrameForCreate?{cellComps:[],template:""}:this.createCells(i),e=this.createTemplate(r.template);t.appendRowTemplate(e,function(){var e=t.getRowElement(o.getCompId());o.afterRowAttached(t,e),n(e),o.useAnimationFrameForCreate?o.beans.taskQueue.addP1Task(o.lazyCreateCells.bind(o,i,e)):o.callAfterRowAttachedOnCells(r.cellComps,e)})},y.prototype.createChildScopeOrNull=function(e){var t;return this.beans.gridOptionsWrapper.isAngularCompileRows()?((t=this.parentScope.$new()).data=e,t.rowNode=this.rowNode,t.context=this.beans.gridOptionsWrapper.getContext(),this.addDestroyFunc(function(){t.$destroy(),t.data=null,t.rowNode=null,t.context=null}),t):null},y.prototype.setupRowContainers=function(){var e=this.beans.gridOptionsWrapper.getIsFullWidthCellFunc(),e=!!e&&e(this.rowNode),t=this.beans.doingMasterDetail&&this.rowNode.detail,i=this.rowNode.group&&this.beans.gridOptionsWrapper.isGroupUseEntireRow();this.rowNode.stub?this.createFullWidthRows(y.LOADING_CELL_RENDERER,y.LOADING_CELL_RENDERER_COMP_NAME):t?this.createFullWidthRows(y.DETAIL_CELL_RENDERER,y.DETAIL_CELL_RENDERER_COMP_NAME):e?this.createFullWidthRows(y.FULL_WIDTH_CELL_RENDERER,null):i?this.createFullWidthRows(y.GROUP_ROW_RENDERER,y.GROUP_ROW_RENDERER_COMP_NAME):this.setupNormalRowContainers()},y.prototype.setupNormalRowContainers=function(){var t=this,e=this.beans.columnController.getAllDisplayedCenterVirtualColumnsForRow(this.rowNode),e=(this.createRowContainer(this.bodyContainerComp,e,function(e){return t.eBodyRow=e}),this.beans.columnController.getDisplayedLeftColumnsForRow(this.rowNode)),i=this.beans.columnController.getDisplayedRightColumnsForRow(this.rowNode);this.createRowContainer(this.pinnedRightContainerComp,i,function(e){return t.ePinnedRightRow=e}),this.createRowContainer(this.pinnedLeftContainerComp,e,function(e){return t.ePinnedLeftRow=e})},y.prototype.createFullWidthRows=function(e,t){var i=this;this.fullWidthRow=!0,this.fullWidthRowEmbedded=this.beans.gridOptionsWrapper.isEmbedFullWidthRows(),this.fullWidthRowEmbedded?(this.createFullWidthRowContainer(this.bodyContainerComp,null,null,e,t,function(e){i.eFullWidthRowBody=e},function(e){i.fullWidthRowComponentBody=e}),this.createFullWidthRowContainer(this.pinnedLeftContainerComp,h.Column.PINNED_LEFT,"ag-cell-last-left-pinned",e,t,function(e){i.eFullWidthRowLeft=e},function(e){i.fullWidthRowComponentLeft=e}),this.createFullWidthRowContainer(this.pinnedRightContainerComp,h.Column.PINNED_RIGHT,"ag-cell-first-right-pinned",e,t,function(e){i.eFullWidthRowRight=e},function(e){i.fullWidthRowComponentRight=e})):this.createFullWidthRowContainer(this.fullWidthContainerComp,null,null,e,t,function(e){i.eFullWidthRow=e},function(e){i.fullWidthRowComponent=e})},y.prototype.setAnimateFlags=function(e){e?(e=c._.exists(this.rowNode.oldRowTop),this.slideRowIn=e,this.fadeRowIn=!e):(this.slideRowIn=!1,this.fadeRowIn=!1)},y.prototype.isEditing=function(){return this.editingRow},y.prototype.stopRowEditing=function(e){this.stopEditing(e)},y.prototype.isFullWidth=function(){return this.fullWidthRow},y.prototype.addListeners=function(){this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_ROW_SELECTED,this.onRowSelected.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_EXPANDED_CHANGED,this.onExpandedChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this));var e=this.beans.eventService;this.addDestroyableEventListener(e,p.Events.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addDestroyableEventListener(e,p.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(e,p.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addDestroyableEventListener(e,p.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addDestroyableEventListener(e,p.Events.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addDestroyableEventListener(e,p.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addDestroyableEventListener(e,p.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this))},y.prototype.onGridColumnsChanged=function(){var e=Object.keys(this.cellComps);this.removeRenderedCells(e)},y.prototype.onRowNodeDataChanged=function(t){this.forEachCellComp(function(e){return e.refreshCell({suppressFlash:!t.update,newData:!t.update})}),this.onRowSelected(),this.postProcessCss()},y.prototype.onRowNodeCellChanged=function(e){this.postProcessCss()},y.prototype.postProcessCss=function(){this.postProcessStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},y.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},y.prototype.postProcessRowDragging=function(){var t=this.rowNode.dragging;this.eAllRowContainers.forEach(function(e){return c._.addOrRemoveCssClass(e,"ag-row-dragging",t)})},y.prototype.onExpandedChanged=function(){var t;this.rowNode.group&&!this.rowNode.footer&&(t=this.rowNode.expanded,this.eAllRowContainers.forEach(function(e){return c._.addOrRemoveCssClass(e,"ag-row-group-expanded",t)}),this.eAllRowContainers.forEach(function(e){return c._.addOrRemoveCssClass(e,"ag-row-group-contracted",!t)}))},y.prototype.onDisplayedColumnsChanged=function(){this.fullWidthRow||this.refreshCells()},y.prototype.destroyFullWidthComponents=function(){this.fullWidthRowComponent&&(this.fullWidthRowComponent.destroy&&this.fullWidthRowComponent.destroy(),this.fullWidthRowComponent=null),this.fullWidthRowComponentBody&&(this.fullWidthRowComponentBody.destroy&&this.fullWidthRowComponentBody.destroy(),this.fullWidthRowComponent=null),this.fullWidthRowComponentLeft&&(this.fullWidthRowComponentLeft.destroy&&this.fullWidthRowComponentLeft.destroy(),this.fullWidthRowComponentLeft=null),this.fullWidthRowComponentRight&&(this.fullWidthRowComponentRight.destroy&&this.fullWidthRowComponentRight.destroy(),this.fullWidthRowComponent=null)},y.prototype.getContainerForCell=function(e){switch(e){case h.Column.PINNED_LEFT:return this.ePinnedLeftRow;case h.Column.PINNED_RIGHT:return this.ePinnedRightRow;default:return this.eBodyRow}},y.prototype.onVirtualColumnsChanged=function(){this.fullWidthRow||this.refreshCells()},y.prototype.onColumnResized=function(){this.fullWidthRow||this.refreshCells()},y.prototype.refreshCells=function(){this.beans.gridOptionsWrapper.isSuppressAnimationFrame()?this.refreshCellsInAnimationFrame():this.columnRefreshPending||this.beans.taskQueue.addP1Task(this.refreshCellsInAnimationFrame.bind(this))},y.prototype.refreshCellsInAnimationFrame=function(){var e,t,i,n;this.active&&(this.columnRefreshPending=!1,e=this.beans.columnController.getAllDisplayedCenterVirtualColumnsForRow(this.rowNode),t=this.beans.columnController.getDisplayedLeftColumnsForRow(this.rowNode),i=this.beans.columnController.getDisplayedRightColumnsForRow(this.rowNode),this.insertCellsIntoContainer(this.eBodyRow,e),this.insertCellsIntoContainer(this.ePinnedLeftRow,t),this.insertCellsIntoContainer(this.ePinnedRightRow,i),n=Object.keys(this.cellComps),e.forEach(function(e){return c._.removeFromArray(n,e.getId())}),t.forEach(function(e){return c._.removeFromArray(n,e.getId())}),i.forEach(function(e){return c._.removeFromArray(n,e.getId())}),n=c._.filter(n,this.isCellEligibleToBeRemoved.bind(this)),this.removeRenderedCells(n))},y.prototype.removeRenderedCells=function(e){var i=this;e.forEach(function(e){var t=i.cellComps[e];c._.missing(t)||(t.detach(),t.destroy(),i.cellComps[e]=null)})},y.prototype.isCellEligibleToBeRemoved=function(e){var t=this.beans.columnController.getAllDisplayedColumns(),e=this.cellComps[e];if(!e)return!0;if(this.isCellInWrongRow(e))return!0;var i=e.isEditing(),n=this.beans.focusedCellController.isCellFocused(e.getGridCell());return!(i||n)||(i=e.getColumn(),!(0<=t.indexOf(i)))},y.prototype.ensureCellInCorrectContainer=function(e){var t=e.getGui(),i=e.getColumn().getPinned(),i=this.getContainerForCell(i),n=e.getParentRow();n!==i&&(n&&n.removeChild(t),i.appendChild(t),e.setParentRow(i))},y.prototype.isCellInWrongRow=function(e){var t=e.getColumn(),t=this.getContainerForCell(t.getPinned());return e.getParentRow()!==t},y.prototype.insertCellsIntoContainer=function(i,e){var n,o,r=this;i&&(n=[],o=[],e.forEach(function(e){var t=e.getId(),t=r.cellComps[t];t?r.ensureCellInCorrectContainer(t):r.createNewCell(e,i,n,o)}),0<n.length&&(c._.appendHtml(i,n.join("")),this.callAfterRowAttachedOnCells(o,i)))},y.prototype.addDomData=function(e){var t=this.beans.gridOptionsWrapper;t.setDomData(e,y.DOM_DATA_KEY_RENDERED_ROW,this),this.addDestroyFunc(function(){t.setDomData(e,y.DOM_DATA_KEY_RENDERED_ROW,null)})},y.prototype.createNewCell=function(e,t,i,n){var o=new l.CellComp(this.scope,this.beans,e,this.rowNode,this,!1),r=o.getCreateTemplate();i.push(r),n.push(o),(this.cellComps[e.getId()]=o).setParentRow(t)},y.prototype.onMouseEvent=function(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t)}},y.prototype.createRowEvent=function(e,t){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),event:t}},y.prototype.createRowEventWithSource=function(e,t){e=this.createRowEvent(e,t);return e.source=this,e},y.prototype.onRowDblClick=function(e){c._.isStopPropagationForAgGrid(e)||(e=this.createRowEventWithSource(p.Events.EVENT_ROW_DOUBLE_CLICKED,e),this.beans.eventService.dispatchEvent(e))},y.prototype.onRowClick=function(e){var t,i,n;c._.isStopPropagationForAgGrid(e)||(t=this.createRowEventWithSource(p.Events.EVENT_ROW_CLICKED,e),this.beans.eventService.dispatchEvent(t),t=e.ctrlKey||e.metaKey,e=e.shiftKey,this.rowNode.group||this.rowNode.rowPinned||this.beans.gridOptionsWrapper.isRowSelection()&&!this.beans.gridOptionsWrapper.isSuppressRowClickSelection()&&(i=this.beans.gridOptionsWrapper.isRowMultiSelectWithClick(),n=this.beans.gridOptionsWrapper.isRowDeselection(),this.rowNode.isSelected()?i?this.rowNode.setSelectedParams({newValue:!1}):t?n&&this.rowNode.setSelectedParams({newValue:!1}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!0}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!i&&!t,rangeSelect:e})))},y.prototype.createFullWidthRowContainer=function(t,n,e,o,r,s,a){var l=this,e=this.createTemplate("",e);t.appendRowTemplate(e,function(){var i=t.getRowElement(l.getCompId()),e=l.createFullWidthParams(i,n);l.beans.componentResolver.createAgGridComponent(null,e,o,e,r).then(function(e){var t;l.isAlive()?(t=e.getGui(),i.appendChild(t),a(e)):e.destroy&&e.destroy()}),l.afterRowAttached(t,i),s(i),l.angular1Compile(i)})},y.prototype.angular1Compile=function(e){this.scope&&this.beans.$compile(e)(this.scope)},y.prototype.createFullWidthParams=function(e,t){return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,$scope:this.scope,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this)}},y.prototype.getInitialRowClasses=function(e){var t=[];return c._.exists(e)&&t.push(e),t.push("ag-row"),t.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeRowIn&&t.push("ag-opacity-zero"),this.rowIsEven?t.push("ag-row-even"):t.push("ag-row-odd"),this.rowNode.isSelected()&&t.push("ag-row-selected"),this.rowNode.group?(t.push("ag-row-group"),t.push("ag-row-level-"+this.rowNode.level),this.rowNode.footer&&t.push("ag-row-footer")):this.rowNode.parent?t.push("ag-row-level-"+(this.rowNode.parent.level+1)):t.push("ag-row-level-0"),this.rowNode.stub&&t.push("ag-row-stub"),this.fullWidthRow&&t.push("ag-full-width-row"),this.rowNode.group&&!this.rowNode.footer&&t.push(this.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted"),this.rowNode.dragging&&t.push("ag-row-dragging"),c._.pushAll(t,this.processClassesFromGridOptions()),c._.pushAll(t,this.preProcessRowClassRules()),t},y.prototype.preProcessRowClassRules=function(){var t=[];return this.processRowClassRules(function(e){t.push(e)},function(e){}),t},y.prototype.processRowClassRules=function(e,t){this.beans.stylingService.processClassRules(this.beans.gridOptionsWrapper.rowClassRules(),{value:void 0,colDef:void 0,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()},e,t)},y.prototype.stopEditing=function(t){var e;void 0===t&&(t=!1),this.forEachCellComp(function(e){e.stopEditing(t)}),this.editingRow&&(t||(e=this.createRowEvent(p.Events.EVENT_ROW_VALUE_CHANGED),this.beans.eventService.dispatchEvent(e)),this.setEditingRow(!1))},y.prototype.setEditingRow=function(t){this.editingRow=t,this.eAllRowContainers.forEach(function(e){return c._.addOrRemoveCssClass(e,"ag-row-editing",t)});var e=t?this.createRowEvent(p.Events.EVENT_ROW_EDITING_STARTED):this.createRowEvent(p.Events.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(e)},y.prototype.startRowEditing=function(i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),this.editingRow||(this.forEachCellComp(function(e){var t=e===o;t?e.startEditingIfEnabled(i,n,t):e.startEditingIfEnabled(null,null,t)}),this.setEditingRow(!0))},y.prototype.forEachCellComp=function(i){c._.iterateObject(this.cellComps,function(e,t){t&&i(t)})},y.prototype.postProcessClassesFromGridOptions=function(){var e=this,t=this.processClassesFromGridOptions();t&&t.forEach(function(t){e.eAllRowContainers.forEach(function(e){return c._.addCssClass(e,t)})})},y.prototype.postProcessRowClassRules=function(){var e=this;this.processRowClassRules(function(t){e.eAllRowContainers.forEach(function(e){return c._.addCssClass(e,t)})},function(t){e.eAllRowContainers.forEach(function(e){return c._.removeCssClass(e,t)})})},y.prototype.processClassesFromGridOptions=function(){function e(e){"string"==typeof e?t.push(e):Array.isArray(e)&&e.forEach(function(e){return t.push(e)})}var t=[],i=this.beans.gridOptionsWrapper.getRowClass();if(i){if("function"==typeof i)return void console.warn("ag-Grid: rowClass should not be a function, please use getRowClass instead");e(i)}i=this.beans.gridOptionsWrapper.getRowClassFunc();return i&&e(i({node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi()})),t},y.prototype.preProcessStylesFromGridOptions=function(){var e=this.processStylesFromGridOptions();return c._.cssStyleObjectToMarkup(e)},y.prototype.postProcessStylesFromGridOptions=function(){var t=this.processStylesFromGridOptions();this.eAllRowContainers.forEach(function(e){return c._.addStylesToElement(e,t)})},y.prototype.processStylesFromGridOptions=function(){var e,t,i=this.beans.gridOptionsWrapper.getRowStyle();{if(!i||"function"!=typeof i)return(e=this.beans.gridOptionsWrapper.getRowStyleFunc())&&(t=e({data:this.rowNode.data,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),context:this.beans.gridOptionsWrapper.getContext(),$scope:this.scope})),c._.assign({},i,t);console.log("ag-Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")}},y.prototype.createCells=function(e){var n=this,o=[],r=[];return e.forEach(function(e){var t=new l.CellComp(n.scope,n.beans,e,n.rowNode,n,!1),i=t.getCreateTemplate();o.push(i),r.push(t),n.cellComps[e.getId()]=t}),{template:o.join(""),cellComps:r}},y.prototype.onRowSelected=function(){var t=this.rowNode.isSelected();this.eAllRowContainers.forEach(function(e){return c._.addOrRemoveCssClass(e,"ag-row-selected",t)})},y.prototype.callAfterRowAttachedOnCells=function(e,t){var i=this;e.forEach(function(e){e.setParentRow(t),e.afterAttached(),i.editingRow&&e.startEditingIfEnabled()})},y.prototype.afterRowAttached=function(e,t){var i=this;this.addDomData(t),this.removeSecondPassFuncs.push(function(){e.removeRowElement(t)}),this.removeFirstPassFuncs.push(function(){var e;c._.exists(i.rowNode.rowTop)?(e=i.roundRowTopToBounds(i.rowNode.rowTop),i.setRowTop(e)):c._.addCssClass(t,"ag-opacity-zero")}),this.eAllRowContainers.push(t),this.useAnimationFrameForCreate?this.beans.taskQueue.addP1Task(this.addHoverFunctionality.bind(this,t)):this.addHoverFunctionality(t)},y.prototype.addHoverFunctionality=function(e){var t=this;this.active&&(this.addDestroyableEventListener(e,"mouseenter",function(){return t.rowNode.onMouseEnter()}),this.addDestroyableEventListener(e,"mouseleave",function(){return t.rowNode.onMouseLeave()}),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_MOUSE_ENTER,function(){t.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()||c._.addCssClass(e,"ag-row-hover")}),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_MOUSE_LEAVE,function(){c._.removeCssClass(e,"ag-row-hover")}))},y.prototype.roundRowTopToBounds=function(e){var t=this.beans.gridPanel.getVScrollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,t=this.applyPaginationOffset(t.bottom,!0)+100;return e<i?i:t<e?t:e},y.prototype.onRowHeightChanged=function(){var t;c._.exists(this.rowNode.rowHeight)&&(t=this.rowNode.rowHeight+"px",this.eAllRowContainers.forEach(function(e){return e.style.height=t}))},y.prototype.addEventListener=function(e,t){"renderedRowRemoved"!==e&&"rowRemoved"!==e||(e=p.Events.EVENT_VIRTUAL_ROW_REMOVED,console.warn("ag-Grid: Since version 11, event renderedRowRemoved is now called "+p.Events.EVENT_VIRTUAL_ROW_REMOVED)),v.prototype.addEventListener.call(this,e,t)},y.prototype.removeEventListener=function(e,t){"renderedRowRemoved"!==e&&"rowRemoved"!==e||(e=p.Events.EVENT_VIRTUAL_ROW_REMOVED,console.warn("ag-Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called "+p.Events.EVENT_VIRTUAL_ROW_REMOVED)),v.prototype.removeEventListener.call(this,e,t)},y.prototype.destroy=function(e){void 0===e&&(e=!1),v.prototype.destroy.call(this),this.active=!1,this.destroyFullWidthComponents(),e?(this.removeFirstPassFuncs.forEach(function(e){return e()}),this.removeSecondPassFuncs.push(this.destroyContainingCells.bind(this))):(this.destroyContainingCells(),this.getAndClearDelayedDestroyFunctions().forEach(function(e){return e()}));e=this.createRowEvent(p.Events.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e)},y.prototype.destroyContainingCells=function(){this.forEachCellComp(function(e){return e.destroy()}),this.destroyFullWidthComponents()},y.prototype.getAndClearDelayedDestroyFunctions=function(){var e=this.removeSecondPassFuncs;return this.removeSecondPassFuncs=[],e},y.prototype.onCellFocusChanged=function(){var t=this.beans.focusedCellController.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.eAllRowContainers.forEach(function(e){return c._.addOrRemoveCssClass(e,"ag-row-focus",t)}),this.eAllRowContainers.forEach(function(e){return c._.addOrRemoveCssClass(e,"ag-row-no-focus",!t)}),this.rowFocused=t),!t&&this.editingRow&&this.stopEditing(!1)},y.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged())},y.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},y.prototype.applyPaginationOffset=function(e,t){var i;return void 0===t&&(t=!1),this.rowNode.isRowPinned()?e:(i=this.beans.paginationProxy.getPixelOffset(),t?e+i:e-i)},y.prototype.setRowTop=function(e){var t;c._.exists(e)&&(e=this.applyPaginationOffset(e),t=this.beans.heightScaler.getRealPixelPosition(e)+"px",this.beans.gridOptionsWrapper.isSuppressRowTransform()?this.eAllRowContainers.forEach(function(e){return e.style.top=t}):this.eAllRowContainers.forEach(function(e){return e.style.transform="translateY("+t+")"}))},y.prototype.getAndClearNextVMTurnFunctions=function(){var e=this.createSecondPassFuncs;return this.createSecondPassFuncs=[],e},y.prototype.getRowNode=function(){return this.rowNode},y.prototype.getRenderedCellForColumn=function(e){return this.cellComps[e.getColId()]},y.prototype.onRowIndexChanged=function(){this.onCellFocusChanged(),this.updateRowIndexes()},y.prototype.updateRowIndexes=function(){var t=this.rowNode.getRowIndexString(),i=this.rowNode.rowIndex%2==0,n=this.rowIsEven!==i;n&&(this.rowIsEven=i),this.eAllRowContainers.forEach(function(e){e.setAttribute("row-index",t),n&&(c._.addOrRemoveCssClass(e,"ag-row-even",i),c._.addOrRemoveCssClass(e,"ag-row-odd",!i))})},y.prototype.ensureDomOrder=function(){var e=this.getBodyRowElement(),e=(e&&this.bodyContainerComp.ensureDomOrder(e),this.getPinnedLeftRowElement()),e=(e&&this.pinnedLeftContainerComp.ensureDomOrder(e),this.getPinnedRightRowElement()),e=(e&&this.pinnedRightContainerComp.ensureDomOrder(e),this.getFullWidthRowElement());e&&this.fullWidthContainerComp.ensureDomOrder(e)},y.prototype.getPinnedLeftRowElement=function(){return this.ePinnedLeftRow||this.eFullWidthRowLeft},y.prototype.getPinnedRightRowElement=function(){return this.ePinnedRightRow||this.eFullWidthRowRight},y.prototype.getBodyRowElement=function(){return this.eBodyRow||this.eFullWidthRowBody},y.prototype.getFullWidthRowElement=function(){return this.eFullWidthRow},y.DOM_DATA_KEY_RENDERED_ROW="renderedRow",y.FULL_WIDTH_CELL_RENDERER="fullWidthCellRenderer",y.GROUP_ROW_RENDERER="groupRowRenderer",y.GROUP_ROW_RENDERER_COMP_NAME="agGroupRowRenderer",y.LOADING_CELL_RENDERER="loadingCellRenderer",y.LOADING_CELL_RENDERER_COMP_NAME="agLoadingCellRenderer",y.DETAIL_CELL_RENDERER="detailCellRenderer",y.DETAIL_CELL_RENDERER_COMP_NAME="agDetailCellRenderer";var v,d=y;function y(e,t,i,n,o,r,s,a,l){var c=v.call(this)||this;return c.eAllRowContainers=[],c.active=!0,c.columnRefreshPending=!1,c.cellComps={},c.createSecondPassFuncs=[],c.removeFirstPassFuncs=[],c.removeSecondPassFuncs=[],c.initialised=!1,c.parentScope=e,c.beans=s,c.bodyContainerComp=t,c.pinnedLeftContainerComp=i,c.pinnedRightContainerComp=n,c.fullWidthContainerComp=o,c.rowNode=r,c.rowIsEven=c.rowNode.rowIndex%2==0,c.paginationPage=c.beans.paginationProxy.getCurrentPage(),c.useAnimationFrameForCreate=l,c.setAnimateFlags(a),c}t.RowComp=d},function(e,t,i){"use strict";var n,s,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),u=i(11),d=i(0),h=i(2),p=i(1),f=((i=s=t.FilterConditionType||(t.FilterConditionType={}))[i.MAIN=0]="MAIN",i[i.CONDITION=1]="CONDITION",{loadingOoo:"Loading...",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",filterOoo:"Filter...",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",searchOoo:"Search...",selectAll:"Select All",applyFilter:"Apply Filter",clearFilter:"Clear Filter"}),g=(o=c.Component,r(m,o),m.prototype.init=function(e){this.filterParams=e,this.defaultFilter=this.filterParams.defaultOption,this.filterParams.filterOptions&&!this.defaultFilter&&this.filterParams.filterOptions.lastIndexOf(m.EQUALS)<0&&(this.defaultFilter=this.filterParams.filterOptions[0]),this.customInit(),this.filter=this.defaultFilter,this.filterCondition=this.defaultFilter,this.clearActive=!0===e.clearButton,this.applyActive=!0===e.applyButton||!0===e.apply,this.newRowsActionKeep="keep"===e.newRowsAction,this.setTemplate(this.generateTemplate()),p._.setVisible(this.eApplyButton,this.applyActive),this.applyActive&&this.addDestroyableEventListener(this.eApplyButton,"click",this.filterParams.filterChangedCallback),p._.setVisible(this.eClearButton,this.clearActive),this.clearActive&&this.addDestroyableEventListener(this.eClearButton,"click",this.onClearButton.bind(this));e=this.applyActive||this.clearActive;p._.setVisible(this.eButtonsPanel,e),this.instantiate(this.context),this.initialiseFilterBodyUi(s.MAIN),this.refreshFilterBodyUi(s.MAIN)},m.prototype.onClearButton=function(){this.setModel(null),this.onFilterChanged()},m.prototype.floatingFilter=function(e){""!==e?(e=this.modelFromFloatingFilter(e),this.setModel(e)):this.resetState(),this.onFilterChanged()},m.prototype.onNewRowsLoaded=function(){this.newRowsActionKeep||this.resetState()},m.prototype.getModel=function(){return this.isFilterActive()?this.isFilterConditionActive(s.CONDITION)?{condition1:this.serialize(s.MAIN),condition2:this.serialize(s.CONDITION),operator:this.conditionValue}:this.serialize(s.MAIN):null},m.prototype.getNullableModel=function(){return this.isFilterConditionActive(s.CONDITION)?{condition1:this.serialize(s.MAIN),condition2:this.serialize(s.CONDITION),operator:this.conditionValue}:this.serialize(s.MAIN)},m.prototype.setModel=function(e){var t;e?e.operator?(this.parse((t=e).condition1,s.MAIN),this.parse(t.condition2,s.CONDITION),this.conditionValue=t.operator):(this.resetState(),this.parse(e,s.MAIN)):this.resetState(),this.redrawCondition(),this.refreshFilterBodyUi(s.MAIN),this.refreshFilterBodyUi(s.CONDITION)},m.prototype.doOnFilterChanged=function(e){void 0===e&&(e=!1),this.filterParams.filterModifiedCallback();e=this.applyActive&&e,e=!this.applyActive||e;return e&&this.filterParams.filterChangedCallback(),this.refreshFilterBodyUi(s.MAIN),this.refreshFilterBodyUi(s.CONDITION),e},m.prototype.onFilterChanged=function(e){this.doOnFilterChanged(e=void 0===e?!1:e),this.redrawCondition(),this.refreshFilterBodyUi(s.MAIN),this.refreshFilterBodyUi(s.CONDITION)},m.prototype.redrawCondition=function(){var e,t,i=this,n=this.eFilterBodyWrapper.querySelector(".ag-filter-condition");!n&&this.isFilterActive()&&this.acceptsBooleanLogic()?(this.eConditionWrapper=p._.loadTemplate(this.createConditionTemplate(s.CONDITION)),this.eFilterBodyWrapper.appendChild(this.eConditionWrapper),this.wireQuerySelectors(),e=(t=this.refreshOperatorUi()).andButton,t=t.orButton,this.addDestroyableEventListener(e,"change",function(){i.conditionValue="AND",i.onFilterChanged()}),this.addDestroyableEventListener(t,"change",function(){i.conditionValue="OR",i.onFilterChanged()}),this.initialiseFilterBodyUi(s.CONDITION)):n&&!this.isFilterActive()?(this.eFilterBodyWrapper.removeChild(this.eConditionWrapper),this.eConditionWrapper=null):(this.refreshFilterBodyUi(s.CONDITION),this.eConditionWrapper&&this.refreshOperatorUi())},m.prototype.refreshOperatorUi=function(){var e=this.eConditionWrapper.querySelector(".and"),t=this.eConditionWrapper.querySelector(".or");return this.conditionValue=null==this.conditionValue?"AND":this.conditionValue,e.checked="AND"===this.conditionValue,t.checked="OR"===this.conditionValue,{andButton:e,orButton:t}},m.prototype.onFloatingFilterChanged=function(e){var t;return null==e?this.setModel(null):this.isFilterConditionActive(s.CONDITION)?(t={condition1:e.model,condition2:this.serialize(s.CONDITION),operator:this.conditionValue},this.setModel(t)):this.setModel(e?e.model:null),this.doOnFilterChanged(!!e&&e.apply)},m.prototype.generateFilterHeader=function(e){return""},m.prototype.generateTemplate=function(){var e=this.translate.bind(this),t=this.createConditionBody(s.MAIN);return"<div>\n                    <div class='ag-filter-body-wrapper'>"+(this.acceptsBooleanLogic()?this.wrapCondition(t):t)+'</div>\n                    <div class="ag-filter-apply-panel" id="applyPanel">\n                        <button type="button" id="clearButton">'+e("clearFilter")+'</button>\n                        <button type="button" id="applyButton">'+e("applyFilter")+"</button>\n                    </div>\n                </div>"},m.prototype.acceptsBooleanLogic=function(){return!1},m.prototype.wrapCondition=function(e){return this.isFilterActive()?""+e+this.createConditionTemplate(s.CONDITION):e},m.prototype.createConditionTemplate=function(e){return'<div class="ag-filter-condition">\n            <input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /><label style="display: inline" for="andId">AND</label>\n            <input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /><label style="display: inline" for="orId">OR</label>\n            <div>'+this.createConditionBody(e)+"</div>\n        </div>"},m.prototype.createConditionBody=function(e){var t=this.bodyTemplate(e);return this.generateFilterHeader(e)+t},m.prototype.translate=function(e){return this.gridOptionsWrapper.getLocaleTextFunc()(e,f[e])},m.prototype.getDebounceMs=function(e){return e.applyButton&&e.debounceMs?(console.warn("ag-Grid: debounceMs is ignored when applyButton = true"),0):null!=e.debounceMs?e.debounceMs:500},m.EQUALS="equals",m.NOT_EQUAL="notEqual",m.LESS_THAN="lessThan",m.LESS_THAN_OR_EQUAL="lessThanOrEqual",m.GREATER_THAN="greaterThan",m.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",m.IN_RANGE="inRange",m.CONTAINS="contains",m.NOT_CONTAINS="notContains",m.STARTS_WITH="startsWith",m.ENDS_WITH="endsWith",a([u.QuerySelector("#applyPanel"),l("design:type",HTMLElement)],m.prototype,"eButtonsPanel",void 0),a([u.QuerySelector(".ag-filter-body-wrapper"),l("design:type",HTMLElement)],m.prototype,"eFilterBodyWrapper",void 0),a([u.QuerySelector("#applyButton"),l("design:type",HTMLElement)],m.prototype,"eApplyButton",void 0),a([u.QuerySelector("#clearButton"),l("design:type",HTMLElement)],m.prototype,"eClearButton",void 0),a([d.Autowired("context"),l("design:type",d.Context)],m.prototype,"context",void 0),a([d.Autowired("gridOptionsWrapper"),l("design:type",h.GridOptionsWrapper)],m.prototype,"gridOptionsWrapper",void 0),m);function m(){return null!==o&&o.apply(this,arguments)||this}t.BaseFilter=g;r(y,v=g),y.prototype.doesFilterPass=function(e){var t=this.individualFilterPasses(e,s.MAIN);if(null==this.eTypeConditionSelector)return t;e=this.individualFilterPasses(e,s.CONDITION);return"AND"===this.conditionValue?t&&e:t||e},y.prototype.init=function(e){v.prototype.init.call(this,e),this.suppressAndOrCondition=e.suppressAndOrCondition},y.prototype.customInit=function(){this.defaultFilter||(this.defaultFilter=this.getDefaultType())},y.prototype.acceptsBooleanLogic=function(){return!0!==this.suppressAndOrCondition},y.prototype.generateFilterHeader=function(e){var t=this,i=this.getApplicableFilterTypes(),n=this.filterParams.filterOptions,n=(n||i).map(function(e){return'<option value="'+e+'">'+t.translate(e)+"</option>"}),i=1==n.length?"disabled":"",e=e==s.MAIN?"filterType":"filterConditionType";return n.length<=0?"":'<div>\n                <select class="ag-filter-select" id="'+e+'" '+i+">\n                    "+n.join("")+"\n                </select>\n            </div>"},y.prototype.initialiseFilterBodyUi=function(e){var t=this;e===s.MAIN?(this.setFilterType(this.filter,e),this.addDestroyableEventListener(this.eTypeSelector,"change",function(){return t.onFilterTypeChanged(e)})):(this.setFilterType(this.filterCondition,e),this.addDestroyableEventListener(this.eTypeConditionSelector,"change",function(){return t.onFilterTypeChanged(e)}))},y.prototype.onFilterTypeChanged=function(e){e===s.MAIN?this.filter=this.eTypeSelector.value:this.filterCondition=this.eTypeConditionSelector.value,this.refreshFilterBodyUi(e),this.isFilterActive()&&this.onFilterChanged()},y.prototype.isFilterActive=function(){var e=this.filterValues(s.MAIN);return this.filter===g.IN_RANGE?null!=e[0]&&null!=e[1]:null!=e},y.prototype.setFilterType=function(e,t){t===s.MAIN?(this.filter=e,this.eTypeSelector&&(this.eTypeSelector.value=e)):(this.filterCondition=e,this.eTypeConditionSelector&&(this.eTypeConditionSelector.value=e))},y.prototype.isFilterConditionActive=function(e){return null!=this.filterValues(e)},a([u.QuerySelector("#filterType"),l("design:type",HTMLSelectElement)],y.prototype,"eTypeSelector",void 0),a([u.QuerySelector("#filterConditionType"),l("design:type",HTMLSelectElement)],y.prototype,"eTypeConditionSelector",void 0);var v,i=y;function y(){return null!==v&&v.apply(this,arguments)||this}t.ComparableBaseFilter=i;r(w,b=i),w.prototype.nullComparator=function(n){var o=this;return function(e,t){if(null==t){var i=o.translateNull(n);if(o.filter===g.EQUALS)return i?0:1;if(o.filter===g.GREATER_THAN)return i?1:-1;if(o.filter===g.GREATER_THAN_OR_EQUAL)return i?1:-1;if(o.filter===g.LESS_THAN_OR_EQUAL)return i?-1:1;if(o.filter===g.LESS_THAN)return i?-1:1;if(o.filter===g.NOT_EQUAL)return i?1:0}return o.comparator()(e,t)}},w.prototype.getDefaultType=function(){return g.EQUALS},w.prototype.translateNull=function(e){e=-1<e.indexOf("greater")?"greaterThan":-1<e.indexOf("lessThan")?"lessThan":"equals";return(this.filterParams.nullComparator&&this.filterParams.nullComparator[e]?this.filterParams.nullComparator:w.DEFAULT_NULL_COMPARATOR)[e]},w.prototype.individualFilterPasses=function(e,t){return this.doIndividualFilterPasses(e,t,t===s.MAIN?this.filter:this.filterCondition)},w.prototype.doIndividualFilterPasses=function(e,t,i){var e=this.filterParams.valueGetter(e.node),n=this.nullComparator(i),o=this.filterValues(t),r=Array.isArray(o)?o[0]:o;if(null==r)return t===s.MAIN||"AND"===this.conditionValue;t=n(r,e);if(i===g.EQUALS)return 0===t;if(i===g.GREATER_THAN)return 0<t;if(i===g.GREATER_THAN_OR_EQUAL)return 0<=t;if(i===g.LESS_THAN_OR_EQUAL)return t<=0;if(i===g.LESS_THAN)return t<0;if(i===g.NOT_EQUAL)return 0!=t;r=n(o[1],e);if(i===g.IN_RANGE)return this.filterParams.inRangeInclusive?0<=t&&r<=0:0<t&&r<0;throw new Error("Unexpected type of filter!: "+i)},w.DEFAULT_NULL_COMPARATOR={equals:!1,lessThan:!1,greaterThan:!1};var b,c=w;function w(){return null!==b&&b.apply(this,arguments)||this}t.ScalarBaseFilter=c},function(e,t,i){"use strict";var n,r,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),a=i(10),i=i(13),i=(r=i.BeanStub,o(l,r),l.prototype.setColsSpanning=function(e){this.colsSpanning=e,this.onLeftChanged()},l.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?this.colsSpanning[this.colsSpanning.length-1]:this.columnOrGroup},l.prototype.init=function(){this.addDestroyableEventListener(this.columnOrGroup,a.Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime()},l.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation(),t=s.Utils.exists(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()},l.prototype.animateInLeft=function(){var e=this,t=this.getColumnOrGroup().getLeft(),i=this.getColumnOrGroup().getOldLeft();this.setLeft(i),this.actualLeft=t,this.beans.columnAnimationService.executeNextVMTurn(function(){e.actualLeft===t&&e.setLeft(t)})},l.prototype.onLeftChanged=function(){this.actualLeft=this.getColumnOrGroup().getLeft(),this.setLeft(this.actualLeft)},l.prototype.setLeft=function(e){s.Utils.exists(e)&&(this.eCell.style.left=e+"px")},l);function l(e,t,i,n){var o=r.call(this)||this;return o.columnOrGroup=e,o.eCell=t,o.colsSpanning=n,o.beans=i,o}t.SetLeftFeature=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),i=i(2),o=(s.prototype.registerGridComp=function(e){this.gridPanel=e},s.prototype.isActive=function(){return this.active},s.prototype.start=function(){this.active||this.gridOptionsWrapper.isSuppressColumnMoveAnimation()||this.gridOptionsWrapper.isEnableRtl()||(this.ensureAnimationCssClassPresent(),this.active=!0)},s.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},s.prototype.executeNextVMTurn=function(e){this.active?this.executeNextFuncs.push(e):e()},s.prototype.executeLaterVMTurn=function(e){this.active?this.executeLaterFuncs.push(e):e()},s.prototype.ensureAnimationCssClassPresent=function(){var e=this,t=(this.animationThreadCount++,this.animationThreadCount);this.gridPanel.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){e.animationThreadCount===t&&e.gridPanel.setColumnMovingCss(!1)})},s.prototype.flush=function(){var e=this.executeNextFuncs,t=(this.executeNextFuncs=[],this.executeLaterFuncs);this.executeLaterFuncs=[],0===e.length&&0===t.length||(setTimeout(function(){return e.forEach(function(e){return e()})},0),setTimeout(function(){return t.forEach(function(e){return e()})},300))},n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],s.prototype,"gridOptionsWrapper",void 0),n([r.Bean("columnAnimationService")],s));function s(){this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.animationThreadCount=0}t.ColumnAnimationService=o},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(69),a=i(2),i=i(27),i=(l.prototype.init=function(){},l.prototype.addCellEditor=function(e,t){console.warn("ag-grid: since v13.3.1 this method is not supported anymore. If you want to register your own editor check the docs: https://www.ag-grid.com/javascript-grid-cell-editor/")},l.prototype.createCellEditor=function(e,t){var i=this;return this.componentResolver.createAgGridComponent(e,t,"cellEditor",{api:t.api,columnApi:t.columnApi,node:t.node,data:t.node.data,rowIndex:t.rowIndex,column:t.column,colDef:t.column.getColDef()},"agCellEditor").map(function(e){if(!(e.isPopup&&e.isPopup()))return e;i.gridOptionsWrapper.isFullRowEdit()&&console.warn("ag-Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");e=new s.PopupEditorWrapper(e);return i.context.wireBean(e),e.init(t),e})},n([r.Autowired("context"),o("design:type",r.Context)],l.prototype,"context",void 0),n([r.Autowired("componentResolver"),o("design:type",i.ComponentResolver)],l.prototype,"componentResolver",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],l.prototype,"gridOptionsWrapper",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],l.prototype,"init",null),n([r.Bean("cellEditorFactory")],l));function l(){}t.CellEditorFactory=i},function(e,t,i){"use strict";var n,o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),a=i(1),l=i(2),c=i(3),u=i(19),d=i(70),h=i(71),p=i(72),i=((n=f).prototype.init=function(){this.cellRendererMap[n.ANIMATE_SLIDE]=d.AnimateSlideCellRenderer,this.cellRendererMap[n.ANIMATE_SHOW_CHANGE]=h.AnimateShowChangeCellRenderer,this.cellRendererMap[n.GROUP]=p.GroupCellRenderer},f.prototype.addCellRenderer=function(e,t){this.cellRendererMap[e]=t},f.prototype.getCellRenderer=function(e){var t=this.cellRendererMap[e];return a.Utils.missing(t)?(console.warn("ag-Grid: unable to find cellRenderer for key "+e),null):t},f.ANIMATE_SLIDE="animateSlide",f.ANIMATE_SHOW_CHANGE="animateShowChange",f.GROUP="group",o([s.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],f.prototype,"gridOptionsWrapper",void 0),o([s.Autowired("expressionService"),r("design:type",u.ExpressionService)],f.prototype,"expressionService",void 0),o([s.Autowired("eventService"),r("design:type",c.EventService)],f.prototype,"eventService",void 0),o([s.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],f.prototype,"init",null),n=o([s.Bean("cellRendererFactory")],f));function f(){this.cellRendererMap={}}t.CellRendererFactory=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(21),a=i(27),l=i(1),i=i(2),s=(c.prototype.useCellRenderer=function(e,t,i){var n=this,o=this.componentRecipes.newCellRenderer(e,i);return null!=o?o.then(function(e){null==e?t.innerText=null!=i.valueFormatted?i.valueFormatted:i.value:n.bindToHtml(o,t)}):t.innerText=null!=i.valueFormatted?i.valueFormatted:i.value,o},c.prototype.useFilterCellRenderer=function(e,t,i){var n,e=this.componentRecipes.newCellRenderer(e.filterParams,i);return null!=e?this.bindToHtml(e,t):null==i.valueFormatted&&null==i.value?(n=this.gridOptionsWrapper.getLocaleTextFunc(),t.innerText="("+n("blanks","Blanks")+")"):t.innerText=null!=i.valueFormatted?i.valueFormatted:i.value,e},c.prototype.useRichSelectCellRenderer=function(e,t,i){e=this.componentRecipes.newCellRenderer(e.cellEditorParams,i);return null!=e?this.bindToHtml(e,t):t.innerText=null!=i.valueFormatted?i.valueFormatted:i.value,e},c.prototype.useInnerCellRenderer=function(e,t,i,n){var o=this,r=null,s=this.componentResolver.getComponentToUse(e,"innerRenderer",null);return null!=(r=s&&null!=s.component&&s.source!=a.ComponentSource.DEFAULT?this.componentRecipes.newInnerCellRenderer(e,n):(s=this.componentResolver.getComponentToUse(t,"cellRenderer",null))&&s.source!=a.ComponentSource.DEFAULT?this.componentRecipes.newCellRenderer(t,n):s&&s.source==a.ComponentSource.DEFAULT&&l._.get(t,"cellRendererParams.innerRenderer",null)?this.componentRecipes.newInnerCellRenderer(t.cellRendererParams,n):this.componentRecipes.newCellRenderer({},n))?r.then(function(e){null==e?i.innerText=null!=n.valueFormatted?n.valueFormatted:n.value:o.bindToHtml(r,i)}):i.innerText=null!=n.valueFormatted?n.valueFormatted:n.value,r},c.prototype.useFullWidthGroupRowInnerCellRenderer=function(e,t){var i=this.componentRecipes.newFullWidthGroupRowInnerCellRenderer(t);return null!=i?this.bindToHtml(i,e):e.innerText=null!=t.valueFormatted?t.valueFormatted:t.value,i},c.prototype.bindToHtml=function(e,t){return e.then(function(e){e=e.getGui();null!=e&&("object"==typeof e?t.appendChild(e):t.innerHTML=e)}),e},n([r.Autowired("componentRecipes"),o("design:type",s.ComponentRecipes)],c.prototype,"componentRecipes",void 0),n([r.Autowired("componentResolver"),o("design:type",a.ComponentResolver)],c.prototype,"componentResolver",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],c.prototype,"gridOptionsWrapper",void 0),n([r.Bean("cellRendererService")],c));function c(){}t.CellRendererService=s},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(13)),c=i(0),u=i(3),d=i(25),h=i(1),i=(o=l.BeanStub,r(p,o),p.prototype.postConstruct=function(){this.addDestroyableEventListener(this.eventService,d.Events.EVENT_BODY_HEIGHT_CHANGED,this.update.bind(this)),this.scrollBarWidth=h._.getScrollbarWidth(),this.maxDivHeight=h._.getMaxDivHeight()},p.prototype.registerGridComp=function(e){this.gridPanel=e},p.prototype.isScaling=function(){return this.scaling},p.prototype.getOffset=function(){return this.offset},p.prototype.update=function(){var e,t;this.scaling&&(e=this.gridPanel.getVScrollPosition().top,t=this.getUiBodyHeight(),e===this.scrollY&&t===this.uiBodyHeight||(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset()))},p.prototype.calculateOffset=function(){this.uiContainerHeight=this.maxDivHeight,this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY;this.setOffset(e*this.pixelsToShave)},p.prototype.clearOffset=function(){this.uiContainerHeight=this.modelHeight,this.pixelsToShave=0,this.setOffset(0)},p.prototype.setOffset=function(e){e="number"==typeof e?Math.floor(e):null;this.offset!==e&&(this.offset=e,this.eventService.dispatchEvent({type:d.Events.EVENT_HEIGHT_SCALE_CHANGED}))},p.prototype.setModelHeight=function(e){this.modelHeight=e,this.scaling=0<this.maxDivHeight&&e>this.maxDivHeight,this.scaling?this.calculateOffset():this.clearOffset()},p.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},p.prototype.getRealPixelPosition=function(e){return e-this.offset},p.prototype.getUiBodyHeight=function(){var e=this.gridPanel.getVScrollPosition(),e=e.bottom-e.top;return this.gridPanel.isHorizontalScrollShowing()&&(e-=this.scrollBarWidth),e},p.prototype.getScrollPositionForPixel=function(e){var t;return this.pixelsToShave<=0?e:(t=this.modelHeight-this.getUiBodyHeight(),this.maxScrollY*(e/t))},s([c.Autowired("eventService"),a("design:type",u.EventService)],p.prototype,"eventService",void 0),s([c.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],p.prototype,"postConstruct",null),s([c.Bean("heightScaler")],p));function p(){var e=null!==o&&o.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}t.HeightScaler=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),a=i(4),l=i(3),c=i(12),u=i(5),d=i(0),h=i(0),p=i(0),i=i(0),s=(f.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")},f.prototype.registerGridComp=function(e){this.gridPanel=e},f.prototype.init=function(){this.eventService.addEventListener(u.Events.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(u.Events.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(u.Events.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(u.Events.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(u.Events.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(u.Events.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},f.prototype.fireEvent=function(t){var e;this.consuming||(e=this.gridOptionsWrapper.getAlignedGrids())&&e.forEach(function(e){e.api&&(e=e.api.__getAlignedGridService(),t(e))})},f.prototype.onEvent=function(e){this.consuming=!0,e(),this.consuming=!1},f.prototype.fireColumnEvent=function(t){this.fireEvent(function(e){e.onColumnEvent(t)})},f.prototype.fireScrollEvent=function(t){"horizontal"===t.direction&&this.fireEvent(function(e){e.onScrollEvent(t)})},f.prototype.onScrollEvent=function(e){var t=this;this.onEvent(function(){t.gridPanel.setHorizontalScrollPosition(e.left)})},f.prototype.getMasterColumns=function(e){var t=[];return e.columns?e.columns.forEach(function(e){t.push(e)}):e.column&&t.push(e.column),t},f.prototype.getColumnIds=function(e){var t=[];return e.columns?e.columns.forEach(function(e){t.push(e.getColId())}):e.columns&&t.push(e.column.getColId()),t},f.prototype.onColumnEvent=function(e){var t=this;this.onEvent(function(){switch(e.type){case u.Events.EVENT_COLUMN_MOVED:case u.Events.EVENT_COLUMN_VISIBLE:case u.Events.EVENT_COLUMN_PINNED:case u.Events.EVENT_COLUMN_RESIZED:t.processColumnEvent(e);break;case u.Events.EVENT_COLUMN_GROUP_OPENED:t.processGroupOpenedEvent(e);break;case u.Events.EVENT_COLUMN_PIVOT_CHANGED:console.warn("ag-Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},f.prototype.processGroupOpenedEvent=function(e){var t,e=e.columnGroup;e&&(t=e.getGroupId(),t=this.columnController.getOriginalColumnGroup(t)),e&&!t||(this.logger.log("onColumnEvent-> processing "+event+" expanded = "+e.isExpanded()),this.columnController.setColumnGroupOpened(t,e.isExpanded(),"alignedGridChanged"))},f.prototype.processColumnEvent=function(t){var e,i=this,n=t.column;if(n&&(e=this.columnController.getPrimaryColumn(n.getColId())),!n||e){var o=this.getColumnIds(t),r=this.getMasterColumns(t);switch(t.type){case u.Events.EVENT_COLUMN_MOVED:var s=t;this.logger.log("onColumnEvent-> processing "+t.type+" toIndex = "+s.toIndex),this.columnController.moveColumns(o,s.toIndex,"alignedGridChanged");break;case u.Events.EVENT_COLUMN_VISIBLE:s=t;this.logger.log("onColumnEvent-> processing "+t.type+" visible = "+s.visible),this.columnController.setColumnsVisible(o,s.visible,"alignedGridChanged");break;case u.Events.EVENT_COLUMN_PINNED:s=t;this.logger.log("onColumnEvent-> processing "+t.type+" pinned = "+s.pinned),this.columnController.setColumnsPinned(o,s.pinned,"alignedGridChanged");break;case u.Events.EVENT_COLUMN_RESIZED:var a=t;r.forEach(function(e){i.logger.log("onColumnEvent-> processing "+t.type+" actualWidth = "+e.getActualWidth()),i.columnController.setColumnWidth(e.getColId(),e.getActualWidth(),!1,a.finished,"alignedGridChanged")})}}},n([p.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],f.prototype,"gridOptionsWrapper",void 0),n([p.Autowired("columnController"),o("design:type",a.ColumnController)],f.prototype,"columnController",void 0),n([p.Autowired("eventService"),o("design:type",l.EventService)],f.prototype,"eventService",void 0),n([r(0,h.Qualifier("loggerFactory")),o("design:type",Function),o("design:paramtypes",[c.LoggerFactory]),o("design:returntype",void 0)],f.prototype,"setBeans",null),n([i.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],f.prototype,"init",null),n([d.Bean("alignedGridsService")],f));function f(){this.consuming=!1}t.AlignedGridsService=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),s=i(0),i=i(40),r=(a.prototype.addResizeBar=function(e){var t=this,i={dragStartPixels:0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e)};this.dragService.addDragSource(i,!0);return function(){return t.dragService.removeDragSource(i)}},a.prototype.onDragStart=function(e,t){this.draggingStarted=!0,this.dragStartX=t.clientX,this.setResizeIcons();t=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(t)},a.prototype.setResizeIcons=function(){this.oldBodyCursor=this.eGridDiv.style.cursor,this.oldMsUserSelect=this.eGridDiv.style.msUserSelect,this.oldWebkitUserSelect=this.eGridDiv.style.webkitUserSelect,this.eGridDiv.style.cursor="col-resize",this.eGridDiv.style.msUserSelect="none",this.eGridDiv.style.webkitUserSelect="none"},a.prototype.onDragStop=function(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()},a.prototype.resetIcons=function(){this.eGridDiv.style.cursor=this.oldBodyCursor,this.eGridDiv.style.msUserSelect=this.oldMsUserSelect,this.eGridDiv.style.webkitUserSelect=this.oldWebkitUserSelect},a.prototype.onDragging=function(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)},n([s.Autowired("gridOptionsWrapper"),o("design:type",r.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),n([s.Autowired("dragService"),o("design:type",i.DragService)],a.prototype,"dragService",void 0),n([s.Autowired("eGridDiv"),o("design:type",HTMLElement)],a.prototype,"eGridDiv",void 0),n([s.Bean("horizontalResizeService")],a));function a(){}t.HorizontalResizeService=r},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(11),u=i(1),d=i(0),i=i(2),l=(o=l.Component,r(h,o),h.prototype.preConstruct=function(){this.setTemplate(h.TEMPLATE)},h.prototype.postConstruct=function(){this.loadIcons(),this.updateIcons(),this.props.label&&(this.eLabel.innerText=this.props.label)},h.prototype.loadIcons=function(){u.Utils.removeAllChildren(this.eChecked),u.Utils.removeAllChildren(this.eUnchecked),u.Utils.removeAllChildren(this.eIndeterminate),this.readOnly?(this.eChecked.appendChild(u.Utils.createIconNoSpan("checkboxCheckedReadOnly",this.gridOptionsWrapper,null)),this.eUnchecked.appendChild(u.Utils.createIconNoSpan("checkboxUncheckedReadOnly",this.gridOptionsWrapper,null)),this.eIndeterminate.appendChild(u.Utils.createIconNoSpan("checkboxIndeterminateReadOnly",this.gridOptionsWrapper,null))):(this.eChecked.appendChild(u.Utils.createIconNoSpan("checkboxChecked",this.gridOptionsWrapper,null)),this.eUnchecked.appendChild(u.Utils.createIconNoSpan("checkboxUnchecked",this.gridOptionsWrapper,null)),this.eIndeterminate.appendChild(u.Utils.createIconNoSpan("checkboxIndeterminate",this.gridOptionsWrapper,null)))},h.prototype.onClick=function(e){u.Utils.addAgGridEventPath(e),this.readOnly||this.toggle()},h.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},h.prototype.setPassive=function(e){this.passive=e},h.prototype.setReadOnly=function(e){this.readOnly=e,this.loadIcons()},h.prototype.isReadOnly=function(){return this.readOnly},h.prototype.isSelected=function(){return this.selected},h.prototype.toggle=function(){var e=this.getNextValue();this.passive?this.dispatchEvent({type:h.EVENT_CHANGED,selected:e}):this.setSelected(e)},h.prototype.setSelected=function(e){this.selected!==e&&(this.selected=!0===e||!1!==e&&void 0,this.updateIcons(),e={type:h.EVENT_CHANGED,selected:this.selected},this.dispatchEvent(e))},h.prototype.updateIcons=function(){u.Utils.setVisible(this.eChecked,!0===this.selected),u.Utils.setVisible(this.eUnchecked,!1===this.selected),u.Utils.setVisible(this.eIndeterminate,void 0===this.selected)},h.EVENT_CHANGED="change",h.TEMPLATE='<span class="ag-checkbox" role="presentation">  <span class="ag-checkbox-checked" role="presentation"></span>  <span class="ag-checkbox-unchecked" role="presentation"></span>  <span class="ag-checkbox-indeterminate" role="presentation"></span>  <span class="ag-checkbox-label" role="presentation"></span></span>',s([d.Autowired("gridOptionsWrapper"),a("design:type",i.GridOptionsWrapper)],h.prototype,"gridOptionsWrapper",void 0),s([c.QuerySelector(".ag-checkbox-checked"),a("design:type",HTMLElement)],h.prototype,"eChecked",void 0),s([c.QuerySelector(".ag-checkbox-unchecked"),a("design:type",HTMLElement)],h.prototype,"eUnchecked",void 0),s([c.QuerySelector(".ag-checkbox-indeterminate"),a("design:type",HTMLElement)],h.prototype,"eIndeterminate",void 0),s([c.QuerySelector(".ag-checkbox-label"),a("design:type",HTMLElement)],h.prototype,"eLabel",void 0),s([d.PreConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],h.prototype,"preConstruct",null),s([d.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],h.prototype,"postConstruct",null),s([c.Listener("click"),a("design:type",Function),a("design:paramtypes",[MouseEvent]),a("design:returntype",void 0)],h.prototype,"onClick",null),h);function h(){var e=o.call(this)||this;return e.selected=!1,e.readOnly=!1,e.passive=!1,e}t.AgCheckbox=l},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),a=i(14),i=i(13),i=(o=i.BeanStub,r(l,o),l.prototype.isAnyNodeOpen=function(e){var t=!1;return this.forEachNodeCallback(function(e){e.expanded&&(t=!0)},e),t},l.prototype.forEachNodeCallback=function(e,t){for(var i=this.startRow;i<this.endRow;i++)i<t&&e(this.getRowUsingLocalIndex(i),i)},l.prototype.forEachNode=function(t,i,e,n){this.forEachNodeCallback(function(e){t(e,i.next()),n&&e.childrenCache&&e.childrenCache.forEachNodeDeep(t,i)},e)},l.prototype.forEachNodeDeep=function(e,t,i){this.forEachNode(e,t,i,!0)},l.prototype.forEachNodeShallow=function(e,t,i){this.forEachNode(e,t,i,!1)},l.prototype.getVersion=function(){return this.version},l.prototype.getLastAccessed=function(){return this.lastAccessed},l.prototype.getRowUsingLocalIndex=function(e,t){(t=void 0===t?!1:t)||(this.lastAccessed=this.rowNodeCacheParams.lastAccessedSequence.next());t=e-this.startRow;return this.rowNodes[t]},l.prototype.init=function(e){this.beans=e,this.createRowNodes()},l.prototype.getStartRow=function(){return this.startRow},l.prototype.getEndRow=function(){return this.endRow},l.prototype.getBlockNumber=function(){return this.blockNumber},l.prototype.setDirty=function(){this.version++,this.state=l.STATE_DIRTY},l.prototype.setDirtyAndPurge=function(){this.setDirty(),this.rowNodes.forEach(function(e){e.setData(null)})},l.prototype.getState=function(){return this.state},l.prototype.setRowNode=function(e,t){e-=this.startRow;this.rowNodes[e]=t},l.prototype.setBlankRowNode=function(e){var t=e-this.startRow,e=this.createBlankRowNode(e);return this.rowNodes[t]=e},l.prototype.setNewData=function(e,t){var i=this.setBlankRowNode(e);return this.setDataAndId(i,t,this.startRow+e),i},l.prototype.createBlankRowNode=function(e){var t=new a.RowNode;return this.beans.context.wireBean(t),t.setRowHeight(this.rowNodeCacheParams.rowHeight),t},l.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.rowNodeCacheParams.blockSize;e++){var t=this.startRow+e,t=this.createBlankRowNode(t);this.rowNodes.push(t)}},l.prototype.load=function(){this.state=l.STATE_LOADING,this.loadFromDatasource()},l.prototype.pageLoadFailed=function(){this.state=l.STATE_FAILED,this.dispatchEvent({type:l.EVENT_LOAD_COMPLETE,success:!1,page:this,lastRow:null})},l.prototype.populateWithRowData=function(n){var o=this,r=[];this.rowNodes.forEach(function(e,t){var i=n[t];e.stub&&r.push(e),o.setDataAndId(e,i,o.startRow+t)}),0<r.length&&this.beans.rowRenderer.redrawRows(r)},l.prototype.destroy=function(){o.prototype.destroy.call(this),this.rowNodes.forEach(function(e){e.childrenCache&&(e.childrenCache.destroy(),e.childrenCache=null),e.clearRowTop()})},l.prototype.pageLoaded=function(e,t,i){e===this.version&&(this.state=l.STATE_LOADED,this.populateWithRowData(t)),i=s.Utils.cleanNumber(i),this.dispatchEvent({type:l.EVENT_LOAD_COMPLETE,success:!0,page:this,lastRow:i})},l.EVENT_LOAD_COMPLETE="loadComplete",l.STATE_DIRTY="dirty",l.STATE_LOADING="loading",l.STATE_LOADED="loaded",l.STATE_FAILED="failed",l);function l(e,t){var i=o.call(this)||this;return i.version=0,i.state=l.STATE_DIRTY,i.rowNodeCacheParams=t,i.blockNumber=e,i.startRow=e*t.blockSize,i.endRow=i.startRow+t.blockSize,i}t.RowNodeBlock=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(5),n=i(90),a=i(1),o=i(2),r=(l.getEventCallbacks=function(){return l.EVENT_CALLBACKS||(l.EVENT_CALLBACKS=[],l.EVENT_CALLBACKS_NO_PREFIX=[],l.EVENTS.forEach(function(e){l.EVENT_CALLBACKS.push(l.getCallbackForEvent(e)),l.EVENT_CALLBACKS_NO_PREFIX.push(e)})),l.EVENT_CALLBACKS},l.copyAttributesToGridOptions=function(e,i,t){void 0===t&&(t=!1),c(i);var n=e="object"!=typeof e?{}:e;return l.ARRAY_PROPERTIES.concat(l.STRING_PROPERTIES).concat(l.OBJECT_PROPERTIES).concat(l.FUNCTION_PROPERTIES).forEach(function(e){void 0!==i[e]&&(n[e]=i[e])}),l.BOOLEAN_PROPERTIES.forEach(function(e){void 0!==i[e]&&(n[e]=l.toBoolean(i[e]))}),l.NUMBER_PROPERTIES.forEach(function(e){void 0!==i[e]&&(n[e]=l.toNumber(i[e]))}),l.getEventCallbacks().forEach(function(e){void 0!==i[e]&&(n[e]=i[e])}),t||l.EVENT_CALLBACKS_NO_PREFIX.forEach(function(e){var t=l.getCallbackForEvent(e);void 0===i[e]&&void 0===i[t]||o.GridOptionsWrapper.checkEventDeprecation(e)}),e},l.getCallbackForEvent=function(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substr(1)},l.processOnChange=function(t,e,i,n){var o,r;t&&(c(t),o=e,l.ARRAY_PROPERTIES.concat(l.OBJECT_PROPERTIES).concat(l.STRING_PROPERTIES).forEach(function(e){t[e]&&(o[e]=t[e].currentValue)}),l.BOOLEAN_PROPERTIES.forEach(function(e){t[e]&&(o[e]=l.toBoolean(t[e].currentValue))}),l.NUMBER_PROPERTIES.forEach(function(e){t[e]&&(o[e]=l.toNumber(t[e].currentValue))}),l.getEventCallbacks().forEach(function(e){t[e]&&(o[e]=t[e].currentValue)}),t.showToolPanel&&i.showToolPanel(l.toBoolean(t.showToolPanel.currentValue)),t.quickFilterText&&i.setQuickFilter(t.quickFilterText.currentValue),t.rowData&&i.setRowData(t.rowData.currentValue),t.pinnedTopRowData&&i.setPinnedTopRowData(t.pinnedTopRowData.currentValue),t.pinnedBottomRowData&&i.setPinnedBottomRowData(t.pinnedBottomRowData.currentValue),t.columnDefs&&i.setColumnDefs(t.columnDefs.currentValue,"gridOptionsChanged"),t.datasource&&i.setDatasource(t.datasource.currentValue),t.headerHeight&&i.setHeaderHeight(l.toNumber(t.headerHeight.currentValue)),t.paginationPageSize&&i.paginationSetPageSize(l.toNumber(t.paginationPageSize.currentValue)),t.pivotMode&&n.setPivotMode(l.toBoolean(t.pivotMode.currentValue)),t.groupRemoveSingleChildren&&i.setGroupRemoveSingleChildren(l.toBoolean(t.groupRemoveSingleChildren.currentValue)),t.suppressRowDrag&&i.setSuppressRowDrag(l.toBoolean(t.suppressRowDrag.currentValue)),t.gridAutoHeight&&i.setGridAutoHeight(l.toBoolean(t.gridAutoHeight.currentValue)),t.suppressClipboardPaste&&i.setSuppressClipboardPaste(l.toBoolean(t.suppressClipboardPaste.currentValue)),r={type:s.Events.EVENT_COMPONENT_STATE_CHANGED,api:e.api,columnApi:e.columnApi},a.Utils.iterateObject(t,function(e,t){r[e]=t}),i.dispatchEvent(r))},l.toBoolean=function(e){return"boolean"==typeof e?e:"string"==typeof e&&("TRUE"===e.toUpperCase()||""==e)},l.toNumber=function(e){return"number"==typeof e?e:"string"==typeof e?Number(e):void 0},l.EVENTS=[],l.STRING_PROPERTIES=n.PropertyKeys.STRING_PROPERTIES,l.OBJECT_PROPERTIES=n.PropertyKeys.OBJECT_PROPERTIES,l.ARRAY_PROPERTIES=n.PropertyKeys.ARRAY_PROPERTIES,l.NUMBER_PROPERTIES=n.PropertyKeys.NUMBER_PROPERTIES,l.BOOLEAN_PROPERTIES=n.PropertyKeys.BOOLEAN_PROPERTIES,l.FUNCTION_PROPERTIES=n.PropertyKeys.FUNCTION_PROPERTIES,l.ALL_PROPERTIES=n.PropertyKeys.ALL_PROPERTIES,l);function l(){}function c(e){(e.rowDeselected||e.onRowDeselected)&&console.warn("ag-grid: as of v3.4 rowDeselected no longer exists. Please check the docs.")}t.ComponentUtil=r,a.Utils.iterateObject(s.Events,function(e,t){r.EVENTS.push(t)})},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(4),A=i(9),E=i(1),a=i(17),l=i(2),c=i(48),u=i(38),x=i(83),d=i(26),i=i(30);function h(e,t,i,n,o,r){this.columnController=e,this.valueService=t,this.gridOptionsWrapper=i,this.processCellCallback=n,this.processHeaderCallback=o,this.cellAndHeaderEscaper=r}h.prototype.extractHeaderValue=function(e){e=this.getHeaderName(this.processHeaderCallback,e);return null==e&&(e=""),this.cellAndHeaderEscaper?this.cellAndHeaderEscaper(e):e},h.prototype.extractRowCellValue=function(e,t,i,n){var o=0<this.columnController.getRowGroupColumns().length,o=n.group&&o&&0===t?this.createValueForGroupNode(n):this.valueService.getValue(e,n);return null==(o=this.processCell(n,e,o,this.processCellCallback,i))&&(o=""),this.cellAndHeaderEscaper?this.cellAndHeaderEscaper(o):o},h.prototype.getHeaderName=function(e,t){return e?e({column:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnController.getDisplayNameForColumn(t,"csv",!0)},h.prototype.createValueForGroupNode=function(e){for(var t=[e.key];e.parent;)e=e.parent,t.push(e.key);return t.reverse().join(" -> ")},h.prototype.processCell=function(e,t,i,n,o){return n?n({column:t,node:e,value:i,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:o}):i},t.BaseGridSerializingSession=h;p.prototype.serialize=function(e,t){var i,o=t&&t.skipGroups,n=t&&t.skipHeader,r=t&&t.columnGroups,s=t&&t.skipFooters,a=t&&t.skipPinnedTop,l=t&&t.skipPinnedBottom,c=t&&t.customHeader,u=t&&t.customFooter,d=t&&t.allColumns,h=t&&t.onlySelected,p=t&&t.columnKeys,f=t&&t.onlySelectedAllPages,g=t&&t.shouldRowBeSkipped||function(){return!1},m=this.gridOptionsWrapper.getApi(),v=this.gridOptionsWrapper.getContext(),y=this.columnController.isPivotMode(),b=this.rowModel.getType()===A.Constants.ROW_MODEL_TYPE_CLIENT_SIDE,w=!b&&h,C=E.Utils.existsAndNotEmpty(p)?this.columnController.getGridColumns(p):d&&!y?this.columnController.getAllPrimaryColumns():this.columnController.getAllDisplayedColumns();return C&&0!==C.length?(e.prepare(C),c&&e.addCustomHeader(t.customHeader),r&&(p=new x.GroupInstanceIdCreator,d=this.displayedGroupCreator.createDisplayedGroups(C,this.columnController.getGridBalancedTree(),p),this.recursivelyAddHeaderGroups(d,e)),n||(i=e.onNewHeaderRow(),C.forEach(function(e,t){i.onColumn(e,t,null)})),this.pinnedRowModel.forEachPinnedTopRow(_),y?this.rowModel.forEachPivotNode?this.rowModel.forEachPivotNode(_):this.rowModel.forEachNode(_):f||w?this.selectionController.getSelectedNodes().forEach(function(e){_(e)}):b?this.rowModel.forEachNodeAfterFilterAndSort(_):this.rowModel.forEachNode(_),this.pinnedRowModel.forEachPinnedBottomRow(_),u&&e.addCustomFooter(t.customFooter),e.parse()):"";function _(i){var n;o&&i.group||s&&i.footer||h&&!i.isSelected()||a&&"top"===i.rowPinned||l&&"bottom"===i.rowPinned||-1===i.level&&!i.leafGroup||g({node:i,api:m,context:v})||(n=e.onNewBodyRow(),C.forEach(function(e,t){n.onColumn(e,t,i)}))}},p.prototype.recursivelyAddHeaderGroups=function(e,t){var i=[];e.forEach(function(e){e.getChildren&&e.getChildren().forEach(function(e){return i.push(e)})}),0<e.length&&e[0]instanceof d.ColumnGroup&&this.doAddHeaderHeader(t,e),i&&0<i.length&&this.recursivelyAddHeaderGroups(i,t)},p.prototype.doAddHeaderHeader=function(e,t){var i=this,n=e.onNewHeaderGroupingRow(),o=0;t.forEach(function(e){e.getDefinition();var t=i.columnController.getDisplayNameForColumnGroup(e,"header");n.onColumn(t,o++,e.getLeafColumns().length-1)})},n([r.Autowired("displayedGroupCreator"),o("design:type",c.DisplayedGroupCreator)],p.prototype,"displayedGroupCreator",void 0),n([r.Autowired("columnController"),o("design:type",s.ColumnController)],p.prototype,"columnController",void 0),n([r.Autowired("rowModel"),o("design:type",Object)],p.prototype,"rowModel",void 0),n([r.Autowired("pinnedRowModel"),o("design:type",i.PinnedRowModel)],p.prototype,"pinnedRowModel",void 0),n([r.Autowired("selectionController"),o("design:type",a.SelectionController)],p.prototype,"selectionController",void 0),n([r.Autowired("balancedColumnTreeBuilder"),o("design:type",u.BalancedColumnTreeBuilder)],p.prototype,"balancedColumnTreeBuilder",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],p.prototype,"gridOptionsWrapper",void 0);c=n([r.Bean("gridSerializer")],p);function p(){}t.GridSerializer=c,(s=t.RowType||(t.RowType={}))[s.HEADER_GROUPING=0]="HEADER_GROUPING",s[s.HEADER=1]="HEADER",s[s.BODY=2]="BODY"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=i(1),r=i(23);function s(e,t){this.rowIndex=e,this.floating=o.Utils.makeNull(t)}s.prototype.isFloatingTop=function(){return this.floating===n.Constants.PINNED_TOP},s.prototype.isFloatingBottom=function(){return this.floating===n.Constants.PINNED_BOTTOM},s.prototype.isNotFloating=function(){return!this.isFloatingBottom()&&!this.isFloatingTop()},s.prototype.equals=function(e){return this.rowIndex===e.rowIndex&&this.floating===e.floating},s.prototype.toString=function(){return"rowIndex = "+this.rowIndex+", floating = "+this.floating},s.prototype.getGridCell=function(e){e={rowIndex:this.rowIndex,floating:this.floating,column:e};return new r.GridCell(e)},s.prototype.before=function(e){var t=e.floating;switch(this.floating){case n.Constants.PINNED_TOP:if(t!==n.Constants.PINNED_TOP)return!0;break;case n.Constants.PINNED_BOTTOM:if(t!==n.Constants.PINNED_BOTTOM)return!1;break;default:if(o.Utils.exists(t))return t!==n.Constants.PINNED_TOP}return this.rowIndex<e.rowIndex},t.GridRow=s},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(14),u=i(1),d=i(0),h=i(2),p=i(5),f=i(3),g=i(6),i=i(7),l=(o=l.Component,r(m,o),m.prototype.createAndAddIcons=function(){this.eCheckedIcon=u.Utils.createIconNoSpan("checkboxChecked",this.gridOptionsWrapper,this.column),this.eUncheckedIcon=u.Utils.createIconNoSpan("checkboxUnchecked",this.gridOptionsWrapper,this.column),this.eIndeterminateIcon=u.Utils.createIconNoSpan("checkboxIndeterminate",this.gridOptionsWrapper,this.column);var e=this.getGui();e.appendChild(this.eCheckedIcon),e.appendChild(this.eUncheckedIcon),e.appendChild(this.eIndeterminateIcon)},m.prototype.onDataChanged=function(){this.onSelectionChanged()},m.prototype.onSelectableChanged=function(){this.showOrHideSelect()},m.prototype.onSelectionChanged=function(){var e=this.rowNode.isSelected();u.Utils.setVisible(this.eCheckedIcon,!0===e),u.Utils.setVisible(this.eUncheckedIcon,!1===e),u.Utils.setVisible(this.eIndeterminateIcon,"boolean"!=typeof e)},m.prototype.onCheckedClicked=function(){var e=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!1,groupSelectsFiltered:e})},m.prototype.onUncheckedClicked=function(e){var t=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:e.shiftKey,groupSelectsFiltered:t})},m.prototype.onIndeterminateClicked=function(e){0===this.onUncheckedClicked(e)&&this.onCheckedClicked()},m.prototype.init=function(e){this.rowNode=e.rowNode,this.column=e.column,this.createAndAddIcons(),this.onSelectionChanged(),this.addGuiEventListener("click",function(e){return u.Utils.stopPropagationForAgGrid(e)}),this.addGuiEventListener("dblclick",function(e){return u.Utils.stopPropagationForAgGrid(e)}),this.addDestroyableEventListener(this.eCheckedIcon,"click",this.onCheckedClicked.bind(this)),this.addDestroyableEventListener(this.eUncheckedIcon,"click",this.onUncheckedClicked.bind(this)),this.addDestroyableEventListener(this.eIndeterminateIcon,"click",this.onIndeterminateClicked.bind(this)),this.addDestroyableEventListener(this.rowNode,c.RowNode.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,c.RowNode.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,c.RowNode.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc(),(this.isRowSelectableFunc||this.checkboxCallbackExists())&&(this.addDestroyableEventListener(this.eventService,p.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelect.bind(this)),this.showOrHideSelect())},m.prototype.showOrHideSelect=function(){var e=this.rowNode.selectable;e&&this.checkboxCallbackExists()&&(e=this.column.isCellCheckboxSelection(this.rowNode)),this.setVisible(e)},m.prototype.checkboxCallbackExists=function(){var e=this.column?this.column.getColDef():null;return e&&"function"==typeof e.checkboxSelection},s([d.Autowired("gridOptionsWrapper"),a("design:type",h.GridOptionsWrapper)],m.prototype,"gridOptionsWrapper",void 0),s([d.Autowired("eventService"),a("design:type",f.EventService)],m.prototype,"eventService",void 0),s([d.Autowired("gridApi"),a("design:type",g.GridApi)],m.prototype,"gridApi",void 0),s([d.Autowired("columnApi"),a("design:type",i.ColumnApi)],m.prototype,"columnApi",void 0),m);function m(){return o.call(this,'<span class="ag-selection-checkbox"/>')||this}t.CheckboxSelectionComponent=l},function(e,t,i){"use strict";var n,o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(67)),a=i(0),l=i(68),c=i(125),u=i(126),d=i(91),h=i(27),p=i(72),f=i(71),g=i(70),m=i(50),v=i(75),y=i(92),b=i(93),w=i(94),C=i(95),_=i(96),A=i(127),E=i(128),x=i(1),i=((i=n=t.RegisteredComponentSource||(t.RegisteredComponentSource={}))[i.DEFAULT=0]="DEFAULT",i[i.REGISTERED=1]="REGISTERED",S.prototype.init=function(){var t=this;null!=this.gridOptions.components&&Object.keys(this.gridOptions.components).forEach(function(e){t.registerComponent(e,t.gridOptions.components[e])}),null!=this.gridOptions.frameworkComponents&&Object.keys(this.gridOptions.frameworkComponents).forEach(function(e){t.registerFwComponent(e,t.gridOptions.frameworkComponents[e])})},S.prototype.registerDefaultComponent=function(e,t,i){void 0===i&&(i=!0);i=this.translateIfDeprecated(e);this.agGridDefaults[i]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[i]=t},S.prototype.registerComponent=function(e,t){e=this.translateIfDeprecated(e);this.frameworkComponents[e]?console.error("Trying to register a component that you have already registered for frameworks: "+e):this.jsComponents[e]=t},S.prototype.registerFwComponent=function(e,t){e=this.translateIfDeprecated(e);this.jsComponents[e]?console.error("Trying to register a component that you have already registered for plain javascript: "+e):this.frameworkComponents[e]=t},S.prototype.retrieve=function(e){e=this.translateIfDeprecated(e);return this.frameworkComponents[e]?{type:h.ComponentType.FRAMEWORK,component:this.frameworkComponents[e],source:n.REGISTERED}:this.jsComponents[e]?{type:h.ComponentType.AG_GRID,component:this.jsComponents[e],source:n.REGISTERED}:this.agGridDefaults[e]?this.agGridDefaults[e]?{type:h.ComponentType.AG_GRID,component:this.agGridDefaults[e],source:n.DEFAULT}:null:(Object.keys(this.agGridDefaults).indexOf(e)<0&&console.warn("ag-grid: Looking for component ["+e+"] but it wasn't found."),null)},S.prototype.translateIfDeprecated=function(e){var t=this.agDeprecatedNames[e];return null!=t?(x._.doOnce(function(){console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename "+t.propertyHolder+":"+e+" to "+t.propertyHolder+":"+t.newComponentName)},"DEPREACTE_COMPONENT_"+e),t.newComponentName):e},o([a.Autowired("gridOptions"),r("design:type",Object)],S.prototype,"gridOptions",void 0),o([a.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],S.prototype,"init",null),o([a.Bean("componentProvider")],S));function S(){this.agGridDefaults={agDateInput:l.DefaultDateComponent,agColumnHeader:c.HeaderComp,agColumnGroupHeader:u.HeaderGroupComp,agSetColumnFloatingFilter:d.SetFloatingFilterComp,agTextColumnFloatingFilter:d.TextFloatingFilterComp,agNumberColumnFloatingFilter:d.NumberFloatingFilterComp,agDateColumnFloatingFilter:d.DateFloatingFilterComp,agAnimateShowChangeCellRenderer:f.AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:g.AnimateSlideCellRenderer,agGroupCellRenderer:p.GroupCellRenderer,agGroupRowRenderer:p.GroupCellRenderer,agLoadingCellRenderer:m.LoadingCellRenderer,agCellEditor:s.TextCellEditor,agTextCellEditor:s.TextCellEditor,agSelectCellEditor:v.SelectCellEditor,agPopupTextCellEditor:y.PopupTextCellEditor,agPopupSelectCellEditor:b.PopupSelectCellEditor,agLargeTextCellEditor:w.LargeTextCellEditor,agTextColumnFilter:C.TextFilter,agNumberColumnFilter:_.NumberFilter,agDateColumnFilter:l.DateFilter,agLoadingOverlay:A.LoadingOverlayComponent,agNoRowsOverlay:E.NoRowsOverlayComponent},this.agDeprecatedNames={set:{newComponentName:"agSetColumnFilter",propertyHolder:"filter"},text:{newComponentName:"agTextColumnFilter",propertyHolder:"filter"},number:{newComponentName:"agNumberColumnFilter",propertyHolder:"filter"},date:{newComponentName:"agDateColumnFilter",propertyHolder:"filter"},group:{newComponentName:"agGroupCellRenderer",propertyHolder:"cellRenderer"},animateShowChange:{newComponentName:"agAnimateShowChangeCellRenderer",propertyHolder:"cellRenderer"},animateSlide:{newComponentName:"agAnimateSlideCellRenderer",propertyHolder:"cellRenderer"},select:{newComponentName:"agSelectCellEditor",propertyHolder:"cellEditor"},largeText:{newComponentName:"agLargeTextCellEditor",propertyHolder:"cellEditor"},popupSelect:{newComponentName:"agPopupSelectCellEditor",propertyHolder:"cellEditor"},popupText:{newComponentName:"agPopupTextCellEditor",propertyHolder:"cellEditor"},richSelect:{newComponentName:"agRichSelectCellEditor",propertyHolder:"cellEditor"},headerComponent:{newComponentName:"agColumnHeader",propertyHolder:"headerComponent"}},this.jsComponents={},this.frameworkComponents={}}t.ComponentProvider=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),i(9)),a=i(8),l=i(1),i=(o=a.Component,r(c,o),c.prototype.init=function(e){this.params=e;var t,i=this.getGui();e.cellStartedEdit?(this.focusAfterAttached=!0,e.keyPress===s.Constants.KEY_BACKSPACE||e.keyPress===s.Constants.KEY_DELETE?t="":e.charPress?t=e.charPress:(t=this.getStartValue(e),e.keyPress!==s.Constants.KEY_F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,t=this.getStartValue(e)),l.Utils.exists(t)&&(i.value=t),this.addDestroyableEventListener(i,"keydown",function(e){var t,i;e.keyCode!==s.Constants.KEY_LEFT&&e.keyCode!==s.Constants.KEY_RIGHT&&e.keyCode!==s.Constants.KEY_UP&&e.keyCode!==s.Constants.KEY_DOWN&&e.keyCode!==s.Constants.KEY_PAGE_DOWN&&e.keyCode!==s.Constants.KEY_PAGE_UP&&e.keyCode!==s.Constants.KEY_PAGE_HOME&&e.keyCode!==s.Constants.KEY_PAGE_END||(e.stopPropagation(),t=e.keyCode===s.Constants.KEY_PAGE_UP,i=e.keyCode===s.Constants.KEY_PAGE_DOWN,(t||i)&&e.preventDefault())})},c.prototype.afterGuiAttached=function(){var e,t;this.focusAfterAttached&&((e=this.getGui()).focus(),this.highlightAllOnFocus?e.select():0<(t=e.value?e.value.length:0)&&e.setSelectionRange(t,t))},c.prototype.focusIn=function(){var e=this.getGui();e.focus(),e.select()},c.prototype.getValue=function(){var e=this.getGui();return this.params.parseValue(e.value)},c.prototype.getStartValue=function(e){return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value},c.TEMPLATE='<input class="ag-cell-edit-input" type="text"/>',c);function c(){return o.call(this,c.TEMPLATE)||this}t.TextCellEditor=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(11),u=i(1),d=i(51),h=i(0),i=i(21),h=(o=d.ScalarBaseFilter,r(p,o),p.prototype.modelFromFloatingFilter=function(e){return{dateFrom:e,dateTo:this.getDateTo(),type:this.filter,filterType:"date"}},p.prototype.getApplicableFilterTypes=function(){return[d.BaseFilter.EQUALS,d.BaseFilter.GREATER_THAN,d.BaseFilter.LESS_THAN,d.BaseFilter.NOT_EQUAL,d.BaseFilter.IN_RANGE]},p.prototype.bodyTemplate=function(e){return'<div class="ag-filter-body">\n                    <div class="ag-filter-date-from" id="'+(e==d.FilterConditionType.MAIN?"filterDateFromPanel":"filterDateFromConditionPanel")+'">\n                    </div>\n                    <div class="ag-filter-date-to" id="'+(e==d.FilterConditionType.MAIN?"filterDateToPanel":"filterDateToConditionPanel")+'">\n                    </div>\n                </div>'},p.prototype.initialiseFilterBodyUi=function(e){o.prototype.initialiseFilterBodyUi.call(this,e),this.createComponents(e),e===d.FilterConditionType.MAIN?(this.setDateFrom_date(this.dateFrom,d.FilterConditionType.MAIN),this.setDateTo_date(this.dateTo,d.FilterConditionType.MAIN),this.setFilterType(this.filterCondition,d.FilterConditionType.MAIN)):(this.setDateFrom_date(this.dateFromCondition,d.FilterConditionType.CONDITION),this.setDateTo_date(this.dateToCondition,d.FilterConditionType.CONDITION),this.setFilterType(this.filterCondition,d.FilterConditionType.CONDITION))},p.prototype.createComponents=function(t){var i=this,e={onDateChanged:function(){i.onDateChanged(t)},filterParams:this.filterParams};this.componentRecipes.newDateComponent(e).then(function(e){t===d.FilterConditionType.MAIN?i.dateToComponent=e:i.dateToConditionComponent=e;e=e.getGui();t===d.FilterConditionType.MAIN?(i.eDateToPanel.appendChild(e),i.dateToComponent.afterGuiAttached&&i.dateToComponent.afterGuiAttached()):(i.eDateToConditionPanel.appendChild(e),i.dateToConditionComponent.afterGuiAttached&&i.dateToConditionComponent.afterGuiAttached())}),this.componentRecipes.newDateComponent(e).then(function(e){t===d.FilterConditionType.MAIN?i.dateFromComponent=e:i.dateFromConditionComponent=e;e=e.getGui();t===d.FilterConditionType.MAIN?(i.eDateFromPanel.appendChild(e),i.dateFromComponent.afterGuiAttached&&i.dateFromComponent.afterGuiAttached()):(i.eDateFromConditionPanel.appendChild(e),i.dateFromConditionComponent.afterGuiAttached&&i.dateFromConditionComponent.afterGuiAttached())})},p.prototype.onDateChanged=function(e){e===d.FilterConditionType.MAIN?(this.dateFrom=p.removeTimezone(this.dateFromComponent.getDate()),this.dateTo=p.removeTimezone(this.dateToComponent.getDate())):(this.dateFromCondition=p.removeTimezone(this.dateFromComponent.getDate()),this.dateToCondition=p.removeTimezone(this.dateToComponent.getDate())),this.onFilterChanged()},p.prototype.refreshFilterBodyUi=function(e){var t,e=e===d.FilterConditionType.MAIN?(t=this.eDateToPanel,this.filter):(t=this.eDateToConditionPanel,this.filterCondition);t&&(e=e===d.BaseFilter.IN_RANGE,u.Utils.setVisible(t,e))},p.prototype.comparator=function(){return this.filterParams.comparator||this.defaultComparator.bind(this)},p.prototype.defaultComparator=function(e,t){return t<e?-1:e<t?1:null!=t?0:-1},p.prototype.serialize=function(e){var t=e===d.FilterConditionType.MAIN?this.dateToComponent:this.dateToConditionComponent,i=e===d.FilterConditionType.MAIN?this.dateFromComponent:this.dateFromConditionComponent,e=e===d.FilterConditionType.MAIN?this.filter:this.filterCondition;return{dateTo:u.Utils.serializeDateToYyyyMmDd(t.getDate(),"-"),dateFrom:u.Utils.serializeDateToYyyyMmDd(i.getDate(),"-"),type:e||this.defaultFilter,filterType:"date"}},p.prototype.filterValues=function(e){return e===d.FilterConditionType.MAIN?this.dateFromComponent?this.filter!==d.BaseFilter.IN_RANGE?this.dateFromComponent.getDate():[this.dateFromComponent.getDate(),this.dateToComponent.getDate()]:null:this.dateFromConditionComponent?this.filterCondition!==d.BaseFilter.IN_RANGE?this.dateFromConditionComponent.getDate():[this.dateFromConditionComponent.getDate(),this.dateToConditionComponent.getDate()]:null},p.prototype.getDateFrom=function(){return u.Utils.serializeDateToYyyyMmDd(this.dateFromComponent.getDate(),"-")},p.prototype.getDateTo=function(){return u.Utils.serializeDateToYyyyMmDd(this.dateToComponent.getDate(),"-")},p.prototype.getFilterType=function(){return this.filter},p.prototype.setDateFrom=function(e,t){e=u.Utils.parseYyyyMmDdToDate(e,"-");this.setDateFrom_date(e,t)},p.prototype.setDateFrom_date=function(e,t){t===d.FilterConditionType.MAIN?(this.dateFrom=e,this.dateFromComponent&&this.dateFromComponent.setDate(this.dateFrom)):(this.dateFromCondition=e,this.dateFromConditionComponent&&this.dateFromConditionComponent.setDate(this.dateFromCondition))},p.prototype.setDateTo=function(e,t){e=u.Utils.parseYyyyMmDdToDate(e,"-");this.setDateTo_date(e,t)},p.prototype.setDateTo_date=function(e,t){t===d.FilterConditionType.MAIN?(this.dateTo=e,this.dateToComponent&&this.dateToComponent.setDate(this.dateTo)):(this.dateToCondition=e,this.dateToConditionComponent&&this.dateToConditionComponent.setDate(this.dateToCondition))},p.prototype.resetState=function(){this.setDateFrom(null,d.FilterConditionType.MAIN),this.setDateTo(null,d.FilterConditionType.MAIN),this.setFilterType(this.defaultFilter,d.FilterConditionType.MAIN),this.setDateFrom(null,d.FilterConditionType.CONDITION),this.setDateTo(null,d.FilterConditionType.CONDITION),this.setFilterType(this.defaultFilter,d.FilterConditionType.MAIN)},p.prototype.parse=function(e,t){this.setDateFrom(e.dateFrom,t),this.setDateTo(e.dateTo,t),this.setFilterType(e.type,t)},p.prototype.setType=function(e,t){this.setFilterType(e,t)},p.removeTimezone=function(e){return e?new Date(e.getFullYear(),e.getMonth(),e.getDate()):null},s([h.Autowired("componentRecipes"),a("design:type",i.ComponentRecipes)],p.prototype,"componentRecipes",void 0),s([c.QuerySelector("#filterDateFromPanel"),a("design:type",HTMLElement)],p.prototype,"eDateFromPanel",void 0),s([c.QuerySelector("#filterDateFromConditionPanel"),a("design:type",HTMLElement)],p.prototype,"eDateFromConditionPanel",void 0),s([c.QuerySelector("#filterDateToPanel"),a("design:type",HTMLElement)],p.prototype,"eDateToPanel",void 0),s([c.QuerySelector("#filterDateToConditionPanel"),a("design:type",HTMLElement)],p.prototype,"eDateToConditionPanel",void 0),p);function p(){return null!==o&&o.apply(this,arguments)||this}t.DateFilter=h;f=l.Component,r(g,f),g.prototype.init=function(e){this.eDateInput=this.getGui(),(u.Utils.isBrowserChrome()||e.filterParams.browserDatePicker)&&(u.Utils.isBrowserIE()?console.warn("ag-grid: browserDatePicker is specified to true, but it is not supported in IE 11, reverting to plain text date picker"):this.eDateInput.type="date"),this.listener=e.onDateChanged,this.addGuiEventListener("input",this.listener)},g.prototype.getDate=function(){return u.Utils.parseYyyyMmDdToDate(this.eDateInput.value,"-")},g.prototype.setDate=function(e){this.eDateInput.value=u.Utils.serializeDateToYyyyMmDd(e,"-")};var f,i=g;function g(){return f.call(this,'<input class="ag-filter-filter" type="text" placeholder="yyyy-mm-dd">')||this}t.DefaultDateComponent=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(0),i=i(2),l=(o=l.Component,r(u,o),u.prototype.onKeyDown=function(e){this.params.onKeyDown(e)},u.prototype.getGui=function(){return this.getGuiCalledOnChild||(this.appendChild(this.cellEditor.getGui()),this.getGuiCalledOnChild=!0),o.prototype.getGui.call(this)},u.prototype.init=function(e){var t=this;this.params=e,this.gridOptionsWrapper.setDomData(this.getGui(),u.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addDestroyFunc(function(){t.cellEditor.destroy&&t.cellEditor.destroy()}),this.addDestroyableEventListener(o.prototype.getGui.call(this),"keydown",this.onKeyDown.bind(this))},u.prototype.afterGuiAttached=function(){this.cellEditor.afterGuiAttached&&this.cellEditor.afterGuiAttached()},u.prototype.getValue=function(){return this.cellEditor.getValue()},u.prototype.isPopup=function(){return!0},u.prototype.isCancelBeforeStart=function(){if(this.cellEditor.isCancelBeforeStart)return this.cellEditor.isCancelBeforeStart()},u.prototype.isCancelAfterEnd=function(){if(this.cellEditor.isCancelAfterEnd)return this.cellEditor.isCancelAfterEnd()},u.prototype.focusIn=function(){this.cellEditor.focusIn&&this.cellEditor.focusIn()},u.prototype.focusOut=function(){this.cellEditor.focusOut&&this.cellEditor.focusOut()},u.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",s([c.Autowired("gridOptionsWrapper"),a("design:type",i.GridOptionsWrapper)],u.prototype,"gridOptionsWrapper",void 0),u);function u(e){var t=o.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return t.getGuiCalledOnChild=!1,t.cellEditor=e,t}t.PopupEditorWrapper=l},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),i=i(8),i=(o=i.Component,r(a,o),a.prototype.init=function(e){this.params=e,this.refresh(e)},a.prototype.addSlideAnimation=function(){var e=this,t=(this.refreshCount++,this.refreshCount);this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=s.Utils.loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),setTimeout(function(){t===e.refreshCount&&s.Utils.addCssClass(e.ePrevious,"ag-value-slide-out-end")},50),setTimeout(function(){t===e.refreshCount&&(e.getGui().removeChild(e.ePrevious),e.ePrevious=null)},3e3)},a.prototype.refresh=function(e){var t=e.value;if((t=s.Utils.missing(t)?"":t)!==this.lastValue)return this.addSlideAnimation(),this.lastValue=t,s.Utils.exists(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:s.Utils.exists(e.value)?this.eCurrent.innerHTML=t:this.eCurrent.innerHTML="",!0},a.TEMPLATE='<span><span class="ag-value-slide-current"></span></span>',a);function a(){var e=o.call(this,a.TEMPLATE)||this;return e.refreshCount=0,e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}t.AnimateSlideCellRenderer=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),i=i(8),i=(o=i.Component,r(a,o),a.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)},a.prototype.showDelta=function(e,t){var i=Math.abs(t),e=e.formatValue(i),e=s.Utils.exists(e)?e:i,i=0<=t;this.eDelta.innerHTML=i?"&#65514;"+e:"&#65516;"+e,s.Utils.addOrRemoveCssClass(this.eDelta,"ag-value-change-delta-up",i),s.Utils.addOrRemoveCssClass(this.eDelta,"ag-value-change-delta-down",!i)},a.prototype.setTimerToRemoveDelta=function(){var e=this,t=(this.refreshCount++,this.refreshCount);setTimeout(function(){t===e.refreshCount&&e.hideDeltaValue()},2e3)},a.prototype.hideDeltaValue=function(){s.Utils.removeCssClass(this.eValue,"ag-value-change-value-highlight"),this.eDelta.innerHTML=""},a.prototype.refresh=function(e){var t,i=e.value;if(i!==this.lastValue)return s.Utils.exists(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:s.Utils.exists(e.value)?this.eValue.innerHTML=i:this.eValue.innerHTML="","number"==typeof i&&"number"==typeof this.lastValue&&(t=i-this.lastValue,this.showDelta(e,t)),this.lastValue&&s.Utils.addCssClass(this.eValue,"ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=i,!0},a.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',a);function a(){var e=o.call(this,a.TEMPLATE)||this;return e.refreshCount=0,e}t.AnimateShowChangeCellRenderer=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),c=i(19),u=i(3),d=i(9),h=i(1),p=i(0),f=i(8),g=i(14),m=i(56),v=i(43),y=i(65),b=i(4),w=i(10),C=i(11),i=i(44),f=(o=f.Component,r(_,o),_.prototype.init=function(e){this.params=e,this.gridOptionsWrapper.isGroupIncludeTotalFooter()&&this.assignBlankValueToGroupFooterCell(e);var t=this.isEmbeddedRowMismatch(),e=null==e.value;this.cellIsBlank=t||e,this.cellIsBlank||(this.setupDragOpenParents(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent())},_.prototype.assignBlankValueToGroupFooterCell=function(e){e.value||-1!=e.node.level||(e.value="")},_.prototype.isEmbeddedRowMismatch=function(){var e,t,i;return!(!this.params.fullWidth||!this.gridOptionsWrapper.isEmbedFullWidthRows())&&(e=this.params.pinned===w.Column.PINNED_LEFT,t=this.params.pinned===w.Column.PINNED_RIGHT,i=!e&&!t,this.gridOptionsWrapper.isEnableRtl()?this.columnController.isPinningLeft()?!t:!i:this.columnController.isPinningLeft()?!e:!i)},_.prototype.setIndent=function(){var e,t;this.gridOptionsWrapper.isGroupHideOpenParents()||(t=(e=this.params).node.uiLevel,0<=e.padding?this.setPaddingDeprecatedWay(t,e.padding):(this.indentClass&&this.removeCssClass(this.indentClass),this.indentClass="ag-row-group-indent-"+t,this.addCssClass(this.indentClass)))},_.prototype.setPaddingDeprecatedWay=function(e,t){h.Utils.doOnce(function(){return console.warn("ag-Grid: since v14.2, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the ag-Grid documentation page for Themes, in particular the property $row-group-indent-size.")},"groupCellRenderer->doDeprecatedWay");e*=t;this.gridOptionsWrapper.isEnableRtl()?this.getGui().style.paddingRight=e+"px":this.getGui().style.paddingLeft=e+"px"},_.prototype.setupIndent=function(){var e=this.params.node;this.params.suppressPadding||(this.addDestroyableEventListener(e,g.RowNode.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},_.prototype.addValueElement=function(){var e=this.params,t=this.displayedGroup;t.footer?this.createFooterCell():t.hasChildren()||h.Utils.get(e.colDef,"cellRendererParams.innerRenderer",null)||h.Utils.get(e.colDef,"cellRendererParams.innerRendererFramework",null)?(this.createGroupCell(),t.hasChildren()&&this.addChildCount()):this.createLeafCell()},_.prototype.createFooterCell=function(){var e,t,i=this.params.footerValueGetter;i?((t=h.Utils.cloneObject(this.params)).value=this.params.value,"function"==typeof i?e=i(t):"string"==typeof i?e=this.expressionService.evaluate(i,t):console.warn("ag-Grid: footerValueGetter should be either a function or a string (expression)")):e="Total "+this.params.value,this.eValue.innerHTML=e},_.prototype.createGroupCell=function(){var t=this,e=this.params,i=this.displayedGroup.rowGroupColumn,i=i||e.column,n=this.params.value,n=i?this.valueFormatterService.formatValue(i,e.node,e.scope,n):null;e.valueFormatted=n,(n=1==e.fullWidth?this.cellRendererService.useFullWidthGroupRowInnerCellRenderer(this.eValue,e):this.cellRendererService.useInnerCellRenderer(this.params.colDef.cellRendererParams,i.getColDef(),this.eValue,e))&&n.then(function(e){t.innerCellRenderer=e})},_.prototype.addChildCount=function(){this.params.suppressCount||(this.addDestroyableEventListener(this.displayedGroup,g.RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},_.prototype.updateChildCount=function(){var e=this.displayedGroup.allChildrenCount;this.eChildCount.innerHTML=0<=e?"("+e+")":""},_.prototype.createLeafCell=function(){h.Utils.exists(this.params.value)&&(this.eValue.innerHTML=this.params.valueFormatted||this.params.value)},_.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;return"function"==typeof e?e(this.params):!0===e},_.prototype.addCheckboxIfNeeded=function(){var e,t=this.displayedGroup;!this.isUserWantsSelected()||t.footer||t.rowPinned||t.detail||(e=new y.CheckboxSelectionComponent,this.context.wireBean(e),e.init({rowNode:t,column:this.params.column}),this.eCheckbox.appendChild(e.getGui()),this.addDestroyFunc(function(){return e.destroy()}))},_.prototype.addExpandAndContract=function(){var e=this.params,t=e.eGridCell,i=h.Utils.createIconNoSpan("groupExpanded",this.gridOptionsWrapper,null),n=h.Utils.createIconNoSpan("groupContracted",this.gridOptionsWrapper,null);this.eExpanded.appendChild(i),this.eContracted.appendChild(n),this.addDestroyableEventListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addDestroyableEventListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addDestroyableEventListener(t,"keydown",this.onKeyDown.bind(this)),this.addDestroyableEventListener(e.node,g.RowNode.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons(),this.addDestroyableEventListener(this.displayedGroup,g.RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.onAllChildrenCountChanged.bind(this)),this.gridOptionsWrapper.isEnableGroupEdit()||!this.isExpandable()||e.suppressDoubleClickExpand||this.addDestroyableEventListener(t,"dblclick",this.onCellDblClicked.bind(this))},_.prototype.onAllChildrenCountChanged=function(){this.showExpandAndContractIcons(),this.setIndent()},_.prototype.onKeyDown=function(e){h.Utils.isKeyPressed(e,d.Constants.KEY_ENTER)&&!this.params.column.isCellEditable(this.params.node)&&(e.preventDefault(),this.onExpandOrContract())},_.prototype.setupDragOpenParents=function(){var e,t=this.params.column,i=this.params.node;if(this.gridOptionsWrapper.isGroupHideOpenParents()?i.hasChildren()?(e=i.rowGroupColumn,this.draggedFromHideOpenParents=!t.isRowGroupDisplayed(e.getId())):this.draggedFromHideOpenParents=!0:this.draggedFromHideOpenParents=!1,this.draggedFromHideOpenParents)for(var n=i.parent;;){if(h.Utils.missing(n))break;if(n.rowGroupColumn&&t.isRowGroupDisplayed(n.rowGroupColumn.getId())){this.displayedGroup=n;break}n=n.parent}h.Utils.missing(this.displayedGroup)&&(this.displayedGroup=i)},_.prototype.onExpandClicked=function(e){h.Utils.isStopPropagationForAgGrid(e)||(h.Utils.stopPropagationForAgGrid(e),this.onExpandOrContract())},_.prototype.onCellDblClicked=function(e){h.Utils.isStopPropagationForAgGrid(e)||h.Utils.isElementInEventPath(this.eExpanded,e)||h.Utils.isElementInEventPath(this.eContracted,e)||this.onExpandOrContract()},_.prototype.onExpandOrContract=function(){var e=this.displayedGroup;e.setExpanded(!e.expanded),this.gridOptionsWrapper.isGroupIncludeFooter()&&this.params.api.redrawRows({rowNodes:[e]})},_.prototype.isExpandable=function(){var e=this.params.node,t=this.columnController.isPivotMode()&&e.leafGroup;return this.draggedFromHideOpenParents||e.isExpandable()&&!e.footer&&!t},_.prototype.showExpandAndContractIcons=function(){var e=this.params.node,e=(this.isExpandable()?(e=!!this.draggedFromHideOpenParents||e.expanded,h.Utils.setVisible(this.eContracted,!e),h.Utils.setVisible(this.eExpanded,e)):(h.Utils.setVisible(this.eExpanded,!1),h.Utils.setVisible(this.eContracted,!1)),this.displayedGroup),t=this.columnController.isPivotMode()&&e.leafGroup,i=!e.isExpandable(),e=e.footer||i||t;this.addOrRemoveCssClass("ag-row-group-leaf-indent",e)},_.prototype.destroy=function(){o.prototype.destroy.call(this),this.innerCellRenderer&&this.innerCellRenderer.destroy&&this.innerCellRenderer.destroy()},_.prototype.refresh=function(){return!1},_.TEMPLATE='<span><span class="ag-group-expanded" ref="eExpanded"></span><span class="ag-group-contracted" ref="eContracted"></span><span class="ag-group-checkbox" ref="eCheckbox"></span><span class="ag-group-value" ref="eValue"></span><span class="ag-group-child-count" ref="eChildCount"></span></span>',s([p.Autowired("gridOptionsWrapper"),a("design:type",l.GridOptionsWrapper)],_.prototype,"gridOptionsWrapper",void 0),s([p.Autowired("expressionService"),a("design:type",c.ExpressionService)],_.prototype,"expressionService",void 0),s([p.Autowired("eventService"),a("design:type",u.EventService)],_.prototype,"eventService",void 0),s([p.Autowired("cellRendererService"),a("design:type",m.CellRendererService)],_.prototype,"cellRendererService",void 0),s([p.Autowired("valueFormatterService"),a("design:type",v.ValueFormatterService)],_.prototype,"valueFormatterService",void 0),s([p.Autowired("context"),a("design:type",p.Context)],_.prototype,"context",void 0),s([p.Autowired("columnController"),a("design:type",b.ColumnController)],_.prototype,"columnController",void 0),s([p.Autowired("mouseEventService"),a("design:type",i.MouseEventService)],_.prototype,"mouseEventService",void 0),s([C.RefSelector("eExpanded"),a("design:type",HTMLElement)],_.prototype,"eExpanded",void 0),s([C.RefSelector("eContracted"),a("design:type",HTMLElement)],_.prototype,"eContracted",void 0),s([C.RefSelector("eCheckbox"),a("design:type",HTMLElement)],_.prototype,"eCheckbox",void 0),s([C.RefSelector("eValue"),a("design:type",HTMLElement)],_.prototype,"eValue",void 0),s([C.RefSelector("eChildCount"),a("design:type",HTMLElement)],_.prototype,"eChildCount",void 0),_);function _(){return o.call(this,_.TEMPLATE)||this}t.GroupCellRenderer=f},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),i=i(19),o=(s.prototype.processAllCellClasses=function(e,t,i,n){this.processClassRules(e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)},s.prototype.processClassRules=function(e,t,i,n){if("object"==typeof e&&null!==e)for(var o=Object.keys(e),r=0;r<o.length;r++){var s=o[r],a=e[s],l=void 0;"string"==typeof a?l=this.expressionService.evaluate(a,t):"function"==typeof a&&(l=a(t)),l?i(s):n&&n(s)}},s.prototype.processStaticCellClasses=function(e,t,i){var n;e.cellClass&&(n=void 0,"string"==typeof(n="function"==typeof e.cellClass?(0,e.cellClass)(t):e.cellClass)?i(n):Array.isArray(n)&&n.forEach(function(e){i(e)}))},n([r.Autowired("expressionService"),o("design:type",i.ExpressionService)],s.prototype,"expressionService",void 0),n([r.Bean("stylingService")],s));function s(){}t.StylingService=o},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(13)),c=i(0),i=i(45),l=(o=l.BeanStub,r(u,o),u.prototype.addMouseHoverListeners=function(e){this.addDestroyableEventListener(e,"mouseout",this.onMouseOut.bind(this)),this.addDestroyableEventListener(e,"mouseover",this.onMouseOver.bind(this))},u.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},u.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},s([c.Autowired("columnHoverService"),a("design:type",i.ColumnHoverService)],u.prototype,"columnHoverService",void 0),u);function u(e,t){var i=o.call(this)||this;return i.columns=e,i.addMouseHoverListeners(t),i}t.HoverFeature=l},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(1),u=i(9),d=i(0),h=i(2),i=i(43),l=(o=l.Component,r(p,o),p.prototype.init=function(n){var o=this;this.focusAfterAttached=n.cellStartedEdit,c.Utils.missing(n.values)?console.log("ag-Grid: no values found for select cellEditor"):(n.values.forEach(function(e){var t=document.createElement("option"),i=(t.value=e,o.valueFormatterService.formatValue(n.column,null,null,e));t.text=null!=i?i:e,n.value===e&&(t.selected=!0),o.eSelect.appendChild(t)}),this.gridOptionsWrapper.isFullRowEdit()||this.addDestroyableEventListener(this.eSelect,"change",function(){return n.stopEditing()}),this.addDestroyableEventListener(this.eSelect,"keydown",function(e){e.keyCode!==u.Constants.KEY_UP&&e.keyCode!==u.Constants.KEY_DOWN||e.stopPropagation()}),this.addDestroyableEventListener(this.eSelect,"mousedown",function(e){e.stopPropagation()}))},p.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.focus()},p.prototype.focusIn=function(){this.eSelect.focus()},p.prototype.getValue=function(){return this.eSelect.value},s([d.Autowired("gridOptionsWrapper"),a("design:type",h.GridOptionsWrapper)],p.prototype,"gridOptionsWrapper",void 0),s([d.Autowired("valueFormatterService"),a("design:type",i.ValueFormatterService)],p.prototype,"valueFormatterService",void 0),p);function p(){var e=o.call(this,'<div class="ag-cell-edit-input"><select class="ag-cell-edit-input"/></div>')||this;return e.eSelect=e.getGui().querySelector("select"),e}t.SelectCellEditor=l},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(77),a=i(1),i=(l.prototype.adaptFunction=function(e,t,i,n){if(null==t)return{component:null,type:i,source:n,dynamicParams:null};e=this.componentMetadataProvider.retrieve(e);return e&&e.functionAdapter?{type:i,component:e.functionAdapter(t),source:n,dynamicParams:null}:null},l.prototype.adaptCellRendererFunction=function(i){function e(){}return e.prototype.refresh=function(e){return!1},e.prototype.getGui=function(){var e=i(this.params),t=typeof e;return"string"==t||"number"==t||"boolean"==t?a._.loadTemplate("<span>"+e+"</span>"):e},e.prototype.init=function(e){this.params=e},e},l.prototype.doesImplementIComponent=function(e){return!!e&&(e.prototype&&"getGui"in e.prototype)},n([r.Autowired("componentMetadataProvider"),o("design:type",s.ComponentMetadataProvider)],l.prototype,"componentMetadataProvider",void 0),n([r.Bean("agComponentUtils")],l));function l(){}t.AgComponentUtils=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),i=i(76),i=(s.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:[]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},pinnedRowCellRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowInnerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","afterGuiAttached"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","afterGuiAttached"]}}},s.prototype.retrieve=function(e){return this.componentMetaData[e]},n([r.Autowired("agComponentUtils"),o("design:type",i.AgComponentUtils)],s.prototype,"agComponentUtils",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],s.prototype,"postConstruct",null),n([r.Bean("componentMetadataProvider")],s));function s(){}t.ComponentMetadataProvider=i},function($,e,t){"use strict";var n,i,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=(Object.defineProperty(e,"__esModule",{value:!0}),t(1)),l=t(129),c=t(2),u=t(4),d=t(7),h=t(20),p=t(0),f=t(3),g=t(5),m=t(40),v=t(9),y=t(17),b=t(47),w=t(44),C=t(22),_=t(36),A=t(130),E=t(29),x=t(69),S=t(58),T=t(30),k=t(6),D=t(37),R=t(50),O=t(97),I=t(16),F=t(46),P=t(21),G=t(15),B=t(131),W=t(57),L=t(8),H=t(79),V=t(53),j=t(39),z=t(28),M=t(11),t=t(80),L=(i=L.Component,o(N,i),N.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},N.prototype.getHScrollPosition=function(){return{left:this.eBodyViewport.scrollLeft,right:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetWidth}},N.prototype.destroy=function(){i.prototype.destroy.call(this)},N.prototype.onRowDataChanged=function(){this.showOrHideOverlay()},N.prototype.showOrHideOverlay=function(){this.paginationProxy.isEmpty()&&!this.gridOptionsWrapper.isSuppressNoRowsOverlay()?this.showNoRowsOverlay():this.hideOverlay()},N.prototype.onNewColumnsLoaded=function(){this.columnController.isReady()&&!this.paginationProxy.isEmpty()&&this.hideOverlay()},N.prototype.init=function(){this.instantiate(this.context),this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth(),this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame(),this.scrollClipWidth=0<this.scrollWidth?this.scrollWidth:20,this.suppressScrollOnFloatingRow(),this.setupRowAnimationCssClass(),this.buildRowContainerComponents(),this.addEventListeners(),this.addDragListeners(),this.addScrollListener(),this.gridOptionsWrapper.isSuppressHorizontalScroll()&&(this.eBodyViewport.style.overflowX="hidden"),this.setupOverlay(),this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()&&this.showLoadingOverlay(),this.setPinnedContainersVisible(),this.setBodyAndHeaderHeights(),this.disableBrowserDragging(),this.addShortcutKeyListeners(),this.addMouseListeners(),this.addKeyboardEvents(),this.addBodyViewportListener(),this.addStopEditingWhenGridLosesFocus(),this.mockContextMenuForIPad(),this.addRowDragListener(),this.$scope&&this.addAngularApplyCheck(),this.onDisplayedColumnsWidthChanged(),this.gridApi.registerGridComp(this),this.alignedGridsService.registerGridComp(this),this.headerRootComp.registerGridComp(this),this.animationFrameService.registerGridComp(this),this.navigationService.registerGridComp(this),this.heightScaler.registerGridComp(this),this.autoHeightCalculator.registerGridComp(this),this.columnAnimationService.registerGridComp(this),this.autoWidthCalculator.registerGridComp(this),this.paginationAutoPageSizeService.registerGridComp(this),this.beans.registerGridComp(this),this.rowRenderer.registerGridComp(this),this.rangeController&&this.rangeController.registerGridComp(this);var e=l.observeResize(this.eBodyViewport,this.checkViewportAndScrolls.bind(this));this.addDestroyFunc(function(){return e()})},N.prototype.setColumnMovingCss=function(e){this.addOrRemoveCssClass("ag-column-moving",e)},N.prototype.setupOverlay=function(){this.overlayWrapper=this.componentRecipes.newOverlayWrapperComponent(),this.eOverlay=this.queryForHtmlElement('[ref="eOverlay"]'),this.overlayWrapper.hideOverlay(this.eOverlay)},N.prototype.addRowDragListener=function(){var e=new B.RowDragFeature(this.eBody,this);this.context.wireBean(e),this.dragAndDropService.addDropTarget(e)},N.prototype.addStopEditingWhenGridLosesFocus=function(){var r=this;this.gridOptionsWrapper.isStopEditingWhenGridLosesFocus()&&this.addDestroyableEventListener(this.eBody,"focusout",function(e){for(var t=!1,i=e.relatedTarget;a.Utils.exists(i)&&!t;)var n=!!r.gridOptionsWrapper.getDomData(i,x.PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER),o=r.eBody==i,t=n||o,i=i.parentNode;t||r.rowRenderer.stopEditing()})},N.prototype.addAngularApplyCheck=function(){function e(){i||(i=!0,setTimeout(function(){i=!1,t.$scope.$apply()},0))}var t=this,i=!1;this.addDestroyableEventListener(this.eventService,g.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,e)},N.prototype.disableBrowserDragging=function(){this.getGui().addEventListener("dragstart",function(e){if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})},N.prototype.addEventListeners=function(){this.addDestroyableEventListener(this.eventService,g.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_PINNED_ROW_DATA_CHANGED,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_ROW_DATA_CHANGED,this.onRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_ROW_DATA_UPDATED,this.onRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,c.GridOptionsWrapper.PROP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,c.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,c.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,c.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,c.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.setBodyAndHeaderHeights.bind(this))},N.prototype.addDragListeners=function(){var i=this;this.gridOptionsWrapper.isEnableRangeSelection()&&!a.Utils.missing(this.rangeController)&&[this.eLeftContainer,this.eRightContainer,this.eBodyContainer,this.eTop,this.eBottom].forEach(function(e){var t={eElement:e,onDragStart:i.rangeController.onDragStart.bind(i.rangeController),onDragStop:i.rangeController.onDragStop.bind(i.rangeController),onDragging:i.rangeController.onDragging.bind(i.rangeController),skipMouseEvent:function(e){return e.shiftKey}};i.dragService.addDragSource(t),i.addDestroyFunc(function(){return i.dragService.removeDragSource(t)})})},N.prototype.addMouseListeners=function(){var n=this;["click","mousedown","dblclick","contextmenu","mouseover","mouseout"].forEach(function(t){var i=n.processMouseEvent.bind(n,t);n.eAllCellContainers.forEach(function(e){return n.addDestroyableEventListener(e,t,i)})})},N.prototype.addKeyboardEvents=function(){var n=this;["keydown","keypress"].forEach(function(t){var i=n.processKeyboardEvent.bind(n,t);n.eAllCellContainers.forEach(function(e){n.addDestroyableEventListener(e,t,i)})})},N.prototype.addBodyViewportListener=function(){function e(e){var t=a.Utils.getTarget(e);t!==i.eBodyViewport&&t!==i.eLeftViewport&&t!==i.eRightViewport||(i.onContextMenu(e,null,null,null,null),i.preventDefaultOnContextMenu(e))}var i=this;this.addDestroyableEventListener(this.eBodyViewport,"contextmenu",e),this.addDestroyableEventListener(this.eRightViewport,"contextmenu",e),this.addDestroyableEventListener(this.eLeftViewport,"contextmenu",e)},N.prototype.getBodyClientRect=function(){if(this.eBody)return this.eBody.getBoundingClientRect()},N.prototype.getRowForEvent=function(e){for(var t=a.Utils.getTarget(e);t;){var i=this.gridOptionsWrapper.getDomData(t,R.RowComp.DOM_DATA_KEY_RENDERED_ROW);if(i)return i;t=t.parentElement}return null},N.prototype.processKeyboardEvent=function(e,t){var i=this.mouseEventService.getRenderedCellForEvent(t);if(i)switch(e){case"keydown":this.navigationService.handlePageScrollingKey(t)||i.onKeyDown(t);break;case"keypress":i.onKeyPress(t)}},N.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},N.prototype.processMouseEvent=function(e,t){var i,n;this.mouseEventService.isEventFromThisGrid(t)&&!a.Utils.isStopPropagationForAgGrid(t)&&(i=this.getRowForEvent(t),n=this.mouseEventService.getRenderedCellForEvent(t),"contextmenu"===e?this.handleContextMenuMouseEvent(t,null,i,n):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t)),this.preventDefaultOnContextMenu(t))},N.prototype.mockContextMenuForIPad=function(){var n=this;a.Utils.isUserAgentIPad()&&this.eAllCellContainers.forEach(function(e){var t=new F.TouchListener(e);n.addDestroyableEventListener(t,F.TouchListener.EVENT_LONG_TAP,function(e){var t=n.getRowForEvent(e.touchEvent),i=n.mouseEventService.getRenderedCellForEvent(e.touchEvent);n.handleContextMenuMouseEvent(null,e.touchEvent,t,i)}),n.addDestroyFunc(function(){return t.destroy()})})},N.prototype.handleContextMenuMouseEvent=function(e,t,i,n){var i=i?i.getRowNode():null,o=n?n.getColumn():null,r=null;o&&(n.dispatchCellContextMenuEvent(e||t),r=this.valueService.getValue(o,i)),this.onContextMenu(e,t,i,o,r)},N.prototype.onContextMenu=function(e,t,i,n,o){var r;!this.gridOptionsWrapper.isAllowContextMenuWithControlKey()&&e&&(e.ctrlKey||e.metaKey)||this.contextMenuFactory&&!this.gridOptionsWrapper.isSuppressContextMenu()&&(r=e||t.touches[0],this.contextMenuFactory.showMenu(i,n,o,r),(e||t).preventDefault())},N.prototype.preventDefaultOnContextMenu=function(e){this.gridOptionsWrapper.isSuppressMiddleClickScrolls()&&2===e.which&&e.preventDefault()},N.prototype.addShortcutKeyListeners=function(){var i=this;this.eAllCellContainers.forEach(function(e){e.addEventListener("keydown",function(e){var t=i.mouseEventService.getRenderedCellForEvent(e);if((!t||!t.isEditing())&&i.mouseEventService.isEventFromThisGrid(e)&&(e.ctrlKey||e.metaKey))switch(e.which){case v.Constants.KEY_A:return i.onCtrlAndA(e);case v.Constants.KEY_C:return i.onCtrlAndC(e);case v.Constants.KEY_V:return i.onCtrlAndV(e);case v.Constants.KEY_D:return i.onCtrlAndD(e)}})})},N.prototype.onCtrlAndA=function(e){if(this.rangeController&&this.paginationProxy.isRowsToRender()){var t=void 0,i=void 0,n=void 0,i=this.pinnedRowModel.isEmpty(v.Constants.PINNED_TOP)?null:v.Constants.PINNED_TOP,t=this.pinnedRowModel.isEmpty(v.Constants.PINNED_BOTTOM)?(n=null,this.paginationProxy.getTotalRowCount()-1):(n=v.Constants.PINNED_BOTTOM,this.pinnedRowModel.getPinnedBottomRowData().length-1),o=this.columnController.getAllDisplayedColumns();if(a.Utils.missingOrEmpty(o))return;this.rangeController.setRange({rowStart:0,floatingStart:i,rowEnd:t,floatingEnd:n,columnStart:o[0],columnEnd:o[o.length-1]})}return e.preventDefault(),!1},N.prototype.onCtrlAndC=function(e){var t;if(this.clipboardService)return t=this.focusedCellController.getFocusedCell(),this.clipboardService.copyToClipboard(),e.preventDefault(),t&&this.focusedCellController.setFocusedCell(t.rowIndex,t.column,t.floating,!0),!1},N.prototype.onCtrlAndV=function(e){if(this.enterprise&&!this.gridOptionsWrapper.isSuppressClipboardPaste())return this.clipboardService.pasteFromClipboard(),!1},N.prototype.onCtrlAndD=function(e){if(this.enterprise)return this.clipboardService.copyRangeDown(),e.preventDefault(),!1},N.prototype.ensureIndexVisible=function(e,t){var i,n,o,r,s,a,l;this.gridOptionsWrapper.isGridAutoHeight()||(i=this.paginationProxy.getTotalRowCount(),"number"!=typeof e||e<0||i<=e?console.warn("invalid row index for ensureIndexVisible: "+e):(this.paginationProxy.goToPageWithIndex(e),i=this.paginationProxy.getRow(e),e=this.paginationProxy.getPixelOffset(),i=(e=i.rowTop-e)+i.rowHeight,o=this.getVScrollPosition(),a=this.heightScaler.getOffset(),n=o.top+a,o=o.bottom+a,this.isHorizontalScrollShowing()&&(o-=this.scrollWidth),a=o-n,r=null,e<(l=((s=this.heightScaler.getScrollPositionForPixel(e))+(a=this.heightScaler.getScrollPositionForPixel(i-a)))/2)&&(l=e),"top"===t?r=s:"bottom"===t?r=a:"middle"===t?r=l:e<n?r=s:o<i&&(r=a),null!==r&&(this.eBodyViewport.scrollTop=r,this.rowRenderer.redrawAfterScroll())))},N.prototype.getCenterWidth=function(){return this.eBodyViewport.clientWidth},N.prototype.isHorizontalScrollShowing=function(){return a.Utils.isHorizontalScrollShowing(this.eBodyViewport)},N.prototype.isVerticalScrollShowing=function(){return a.Utils.isVerticalScrollShowing(this.eBodyViewport)},N.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.setPinnedLeftWidth(),this.setPinnedRightWidth(),this.setBottomPaddingOnPinned(),this.hideVerticalScrollOnCenter(),this.hideFullWidthViewportScrollbars()},N.prototype.updateScrollVisibleService=function(){var e={bodyHorizontalScrollShowing:!1,leftVerticalScrollShowing:!1,rightVerticalScrollShowing:!1};this.enableRtl&&this.columnController.isPinningLeft()&&(e.leftVerticalScrollShowing=a.Utils.isVerticalScrollShowing(this.eLeftViewport)),!this.enableRtl&&this.columnController.isPinningRight()&&(e.rightVerticalScrollShowing=a.Utils.isVerticalScrollShowing(this.eRightViewport)),e.bodyHorizontalScrollShowing=this.isHorizontalScrollShowing(),this.scrollVisibleService.setScrollsVisible(e)},N.prototype.setBottomPaddingOnPinned=function(){this.scrollWidth<=0||(this.isHorizontalScrollShowing()?(this.eRightContainer.style.marginBottom=this.scrollWidth+"px",this.eLeftContainer.style.marginBottom=this.scrollWidth+"px"):(this.eRightContainer.style.marginBottom="",this.eLeftContainer.style.marginBottom=""))},N.prototype.hideFullWidthViewportScrollbars=function(){var e=0<this.scrollClipWidth?this.scrollWidth+"px":"",t=(this.eFullWidthViewportWrapper.style.paddingBottom=this.isHorizontalScrollShowing()?e:"",this.isVerticalScrollShowing());this.enableRtl?(this.eFullWidthViewportWrapper.style.marginLeft=t?e:"",this.eFullWidthViewport.style.marginLeft=t?"-"+e:""):(this.eFullWidthViewportWrapper.style.width=t?"calc(100% - "+e+")":"",this.eFullWidthViewport.style.width=t?"calc(100% + "+e+")":"")},N.prototype.ensureColumnVisible=function(e){var t,i,n,o,r,s,e=this.columnController.getGridColumn(e);e&&(e.isPinned()?console.warn("calling ensureIndexVisible on a "+e.getPinned()+" pinned column doesn't make sense for column "+e.getColId()):this.columnController.isColumnDisplayed(e)?(i=(t=e.getLeft())+e.getActualWidth(),n=this.eBodyViewport.clientWidth,s=this.getBodyViewportScrollLeft(),o=this.columnController.getBodyContainerWidth(),s=this.enableRtl?(r=o-s-n,o-s):n+(r=s),r=t<r,s=s<i,e=n<e.getActualWidth(),s=s,r||e?this.enableRtl?this.setBodyViewportScrollLeft(o-n-t):this.setBodyViewportScrollLeft(t):s&&(this.enableRtl?this.setBodyViewportScrollLeft(o-i):this.setBodyViewportScrollLeft(i-n)),this.onHorizontalViewportChanged()):console.warn("column is not currently visible"))},N.prototype.showLoadingOverlay=function(){this.overlayWrapper.showLoadingOverlay(this.eOverlay)},N.prototype.showNoRowsOverlay=function(){this.overlayWrapper.showNoRowsOverlay(this.eOverlay)},N.prototype.hideOverlay=function(){this.overlayWrapper.hideOverlay(this.eOverlay)},N.prototype.getWidthForSizeColsToFit=function(){var e=this.eBody.clientWidth;return this.isVerticalScrollShowing()&&(e-=this.scrollWidth),e},N.prototype.sizeColumnsToFit=function(e){var t=this,i=this.getWidthForSizeColsToFit();0<i?this.columnController.sizeColumnsToFit(i,"sizeColumnsToFit"):void 0===e?setTimeout(function(){t.sizeColumnsToFit(100)},0):100===e?setTimeout(function(){t.sizeColumnsToFit(500)},100):500===e?setTimeout(function(){t.sizeColumnsToFit(-1)},500):console.log("ag-Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},N.prototype.getBodyContainer=function(){return this.eBodyContainer},N.prototype.getDropTargetBodyContainers=function(){return[this.eBodyViewport,this.eTopViewport,this.eBottomViewport]},N.prototype.getDropTargetLeftContainers=function(){return[this.eLeftViewport,this.eLeftBottom,this.eLeftTop]},N.prototype.getDropTargetRightContainers=function(){return[this.eRightViewport,this.eRightBottom,this.eRightTop]},N.prototype.buildRowContainerComponents=function(){var i=this;this.eAllCellContainers=[this.eLeftContainer,this.eRightContainer,this.eBodyContainer,this.eTop,this.eBottom,this.eFullWidthContainer],this.rowContainerComponents={body:new A.RowContainerComponent({eContainer:this.eBodyContainer,eViewport:this.eBodyViewport}),fullWidth:new A.RowContainerComponent({eContainer:this.eFullWidthContainer,hideWhenNoChildren:!0,eViewport:this.eFullWidthViewport}),pinnedLeft:new A.RowContainerComponent({eContainer:this.eLeftContainer,eViewport:this.eLeftViewport}),pinnedRight:new A.RowContainerComponent({eContainer:this.eRightContainer,eViewport:this.eRightViewport}),floatingTop:new A.RowContainerComponent({eContainer:this.eTopContainer}),floatingTopPinnedLeft:new A.RowContainerComponent({eContainer:this.eLeftTop}),floatingTopPinnedRight:new A.RowContainerComponent({eContainer:this.eRightTop}),floatingTopFullWidth:new A.RowContainerComponent({eContainer:this.eTopFullWidthContainer,hideWhenNoChildren:!0}),floatingBottom:new A.RowContainerComponent({eContainer:this.eBottomContainer}),floatingBottomPinnedLeft:new A.RowContainerComponent({eContainer:this.eLeftBottom}),floatingBottomPinnedRight:new A.RowContainerComponent({eContainer:this.eRightBottom}),floatingBottomFullWith:new A.RowContainerComponent({eContainer:this.eBottomFullWidthContainer,hideWhenNoChildren:!0})},a.Utils.iterateObject(this.rowContainerComponents,function(e,t){t&&i.context.wireBean(t)})},N.prototype.setupRowAnimationCssClass=function(){function e(){var e=t.gridOptionsWrapper.isAnimateRows()&&!t.heightScaler.isScaling();a.Utils.addOrRemoveCssClass(t.eBody,"ag-row-animation",e),a.Utils.addOrRemoveCssClass(t.eBody,"ag-row-no-animation",!e)}var t=this;e(),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_HEIGHT_SCALE_CHANGED,e)},N.prototype.suppressScrollOnFloatingRow=function(){var e=this;this.addDestroyableEventListener(this.eTopViewport,"scroll",function(){return e.eTopViewport.scrollLeft=0}),this.addDestroyableEventListener(this.eBottomViewport,"scroll",function(){return e.eTopViewport.scrollLeft=0})},N.prototype.getRowContainers=function(){return this.rowContainerComponents},N.prototype.onDisplayedColumnsChanged=function(){this.setPinnedContainersVisible(),this.setBodyAndHeaderHeights(),this.onHorizontalViewportChanged()},N.prototype.onDisplayedColumnsWidthChanged=function(){this.setWidthsOfContainers(),this.onHorizontalViewportChanged(),this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},N.prototype.setWidthsOfContainers=function(){this.setCenterWidth(),this.setPinnedLeftWidth(),this.setPinnedRightWidth()},N.prototype.setCenterWidth=function(){var e=this.columnController.getBodyContainerWidth()+"px";this.eBodyContainer.style.width=e,this.eBottomContainer.style.width=e,this.eTopContainer.style.width=e},N.prototype.setPinnedLeftWidth=function(){var e,t=this.columnController.getPinnedLeftContainerWidth(),i=t+this.scrollWidth,n=t+this.scrollClipWidth,i=a.Utils.isVerticalScrollShowing(this.eLeftViewport)?this.enableRtl?e=i:(e=n,t):e=t;this.setElementWidth(this.eLeftViewportWrapper,i),this.setElementWidth(this.eLeftViewport,e),this.setElementWidth(this.eLeftContainer,t),this.setElementWidth(this.eLeftBottom,i),this.setElementWidth(this.eLeftTop,i)},N.prototype.setPinnedRightWidth=function(){var e,t=this.columnController.getPinnedRightContainerWidth(),i=t+this.scrollWidth,n=t+this.scrollClipWidth,n=a.Utils.isVerticalScrollShowing(this.eRightViewport)?this.enableRtl?(e=n,t):e=i:e=t;this.setElementWidth(this.eRightViewportWrapper,n),this.setElementWidth(this.eRightViewport,e),this.setElementWidth(this.eRightContainer,t),this.setElementWidth(this.eRightBottom,n),this.setElementWidth(this.eRightTop,n)},N.prototype.setElementWidth=function(e,t){e.style.width=t+"px",e.style.minWidth=t+"px"},N.prototype.setPinnedContainersVisible=function(){var e=!1,t=this.columnController.isPinningLeft(),t=(t!==this.pinningLeft&&(this.pinningLeft=t,this.headerRootComp.setLeftVisible(t),a.Utils.setVisible(this.eLeftViewportWrapper,t),e=!0,t&&(this.eLeftViewport.scrollTop=this.eBodyViewport.scrollTop)),this.columnController.isPinningRight());t!==this.pinningRight&&(this.pinningRight=t,this.headerRootComp.setRightVisible(t),a.Utils.setVisible(this.eRightViewportWrapper,t),t&&(this.eRightViewport.scrollTop=this.eBodyViewport.scrollTop),e=!0),e&&(this.hideVerticalScrollOnCenter(),this.setPinnedLeftWidth(),this.setPinnedRightWidth())},N.prototype.hideVerticalScrollOnCenter=function(){var e=this.enableRtl?this.columnController.isPinningLeft():this.columnController.isPinningRight(),t=a.Utils.isVerticalScrollShowing(this.eBodyViewport),e=e&&t?"-"+this.scrollClipWidth+"px":"";this.enableRtl?this.eBodyViewport.style.marginLeft=e:this.eBodyViewport.style.marginRight=e},N.prototype.checkBodyHeight=function(){var e=this.eBody.clientHeight;this.bodyHeight!==e&&(this.bodyHeight=e,e={type:g.Events.EVENT_BODY_HEIGHT_CHANGED,api:this.gridApi,columnApi:this.columnApi},this.eventService.dispatchEvent(e))},N.prototype.setBodyAndHeaderHeights=function(){var e,t=this.columnController.getHeaderRowCount(),i=0,n=this.columnController.isPivotMode()?(i=0,e=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),this.gridOptionsWrapper.getPivotHeaderHeight()):(this.gridOptionsWrapper.isFloatingFilter()&&t++,i=this.gridOptionsWrapper.isFloatingFilter()?1:0,e=this.gridOptionsWrapper.getGroupHeaderHeight(),this.gridOptionsWrapper.getHeaderHeight()),t=t-(1+i),i=i*this.gridOptionsWrapper.getFloatingFiltersHeight(),i=(this.headerRootComp.setHeight(i+t*e+n),this.pinnedRowModel.getPinnedTopTotalHeight()),t=this.pinnedRowModel.getPinnedBottomTotalHeight();this.eTop.style.minHeight=i+"px",this.eTop.style.height=i+"px",this.eBottom.style.minHeight=t+"px",this.eBottom.style.height=t+"px",this.checkBodyHeight()},N.prototype.getBodyHeight=function(){return this.bodyHeight},N.prototype.setHorizontalScrollPosition=function(e){this.eBodyViewport.scrollLeft=e,this.nextScrollLeft!==e&&(this.nextScrollLeft=e,this.doHorizontalScroll())},N.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e},N.prototype.scrollHorizontally=function(e){var t=this.eBodyViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.eBodyViewport.scrollLeft-t},N.prototype.scrollVertically=function(e){var t=this.eBodyViewport.scrollTop;return this.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t},N.prototype.addScrollListener=function(){var e=this;this.addDestroyableEventListener(this.eBodyViewport,"scroll",function(){e.onBodyHorizontalScroll(),e.onAnyBodyScroll(e.eBodyViewport)}),this.addDestroyableEventListener(this.eRightViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eRightViewport)),this.addDestroyableEventListener(this.eLeftViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eLeftViewport)),this.addDestroyableEventListener(this.eFullWidthViewport,"scroll",this.onAnyBodyScroll.bind(this,this.eFullWidthViewport))},N.prototype.onAnyBodyScroll=function(e){var t=(new Date).getTime(),i=t-this.lastVScrollTime;e!==this.lastVScrollElement&&i<500||(this.lastVScrollElement=e,this.lastVScrollTime=t,i=e.scrollTop,this.useAnimationFrame?this.nextScrollTop!==i&&(this.nextScrollTop=i,this.animationFrameService.schedule()):i!==this.scrollTop&&(this.scrollTop=i,this.synchroniseVerticalScrollPositions(i),this.redrawRowsAfterScroll()))},N.prototype.onBodyHorizontalScroll=function(){var e=this.eBodyViewport.scrollLeft;this.nextScrollLeft!==e&&(this.nextScrollLeft=e,this.useAnimationFrame?this.animationFrameService.schedule():this.doHorizontalScroll())},N.prototype.doHorizontalScroll=function(){this.scrollLeft=this.nextScrollLeft;var e={type:g.Events.EVENT_BODY_SCROLL,api:this.gridApi,columnApi:this.columnApi,direction:"horizontal",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e),this.horizontallyScrollHeaderCenterAndFloatingCenter(),this.onHorizontalViewportChanged()},N.prototype.executeFrame=function(){return this.scrollLeft!==this.nextScrollLeft?(this.doHorizontalScroll(),!0):this.scrollTop!==this.nextScrollTop?(this.scrollTop=this.nextScrollTop,this.synchroniseVerticalScrollPositions(this.scrollTop),this.verticalRedrawNeeded=!0):!!this.verticalRedrawNeeded&&(this.redrawRowsAfterScroll(),!(this.verticalRedrawNeeded=!1))},N.prototype.redrawRowsAfterScroll=function(){var e={type:g.Events.EVENT_BODY_SCROLL,direction:"vertical",api:this.gridApi,columnApi:this.columnApi,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e)},N.prototype.onHorizontalViewportChanged=function(){var e=this.eBodyViewport.clientWidth,t=this.getBodyViewportScrollLeft();this.columnController.setVirtualViewportPosition(e,t)},N.prototype.getBodyViewportScrollLeft=function(){return a.Utils.getScrollLeft(this.eBodyViewport,this.enableRtl)},N.prototype.setBodyViewportScrollLeft=function(e){a.Utils.setScrollLeft(this.eBodyViewport,e,this.enableRtl)},N.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(){var e=this.getBodyViewportScrollLeft(),e=this.enableRtl?e:-e;this.headerRootComp.setHorizontalScroll(e),this.eBottomContainer.style.left=e+"px",this.eTopContainer.style.left=e+"px"},N.prototype.synchroniseVerticalScrollPositions=function(e){this.lastVScrollElement!==this.eBodyViewport&&(this.eBodyViewport.scrollTop=e),this.lastVScrollElement!==this.eLeftViewport&&this.pinningLeft&&(this.eLeftViewport.scrollTop=e),this.lastVScrollElement!==this.eRightViewport&&this.pinningRight&&(this.eRightViewport.scrollTop=e),this.lastVScrollElement!==this.eFullWidthViewport&&(this.eFullWidthViewport.scrollTop=e),this.rowContainerComponents.body.setVerticalScrollPosition(e),this.rowContainerComponents.pinnedLeft.setVerticalScrollPosition(e),this.rowContainerComponents.pinnedRight.setVerticalScrollPosition(e),this.rowContainerComponents.fullWidth.setVerticalScrollPosition(e),this.redrawRowsAfterScroll()},N.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e)},N.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)},r([p.Autowired("alignedGridsService"),s("design:type",S.AlignedGridsService)],N.prototype,"alignedGridsService",void 0),r([p.Autowired("gridOptionsWrapper"),s("design:type",c.GridOptionsWrapper)],N.prototype,"gridOptionsWrapper",void 0),r([p.Autowired("columnController"),s("design:type",u.ColumnController)],N.prototype,"columnController",void 0),r([p.Autowired("rowRenderer"),s("design:type",h.RowRenderer)],N.prototype,"rowRenderer",void 0),r([p.Autowired("pinnedRowModel"),s("design:type",T.PinnedRowModel)],N.prototype,"pinnedRowModel",void 0),r([p.Autowired("eventService"),s("design:type",f.EventService)],N.prototype,"eventService",void 0),r([p.Autowired("context"),s("design:type",p.Context)],N.prototype,"context",void 0),r([p.Autowired("animationFrameService"),s("design:type",D.AnimationFrameService)],N.prototype,"animationFrameService",void 0),r([p.Autowired("navigationService"),s("design:type",O.NavigationService)],N.prototype,"navigationService",void 0),r([p.Autowired("autoHeightCalculator"),s("design:type",H.AutoHeightCalculator)],N.prototype,"autoHeightCalculator",void 0),r([p.Autowired("columnAnimationService"),s("design:type",V.ColumnAnimationService)],N.prototype,"columnAnimationService",void 0),r([p.Autowired("autoWidthCalculator"),s("design:type",j.AutoWidthCalculator)],N.prototype,"autoWidthCalculator",void 0),r([p.Autowired("paginationAutoPageSizeService"),s("design:type",E.PaginationAutoPageSizeService)],N.prototype,"paginationAutoPageSizeService",void 0),r([p.Autowired("beans"),s("design:type",z.Beans)],N.prototype,"beans",void 0),r([p.Autowired("paginationProxy"),s("design:type",E.PaginationProxy)],N.prototype,"paginationProxy",void 0),r([p.Autowired("columnApi"),s("design:type",d.ColumnApi)],N.prototype,"columnApi",void 0),r([p.Autowired("gridApi"),s("design:type",k.GridApi)],N.prototype,"gridApi",void 0),r([p.Autowired("dragService"),s("design:type",m.DragService)],N.prototype,"dragService",void 0),r([p.Autowired("selectionController"),s("design:type",y.SelectionController)],N.prototype,"selectionController",void 0),r([p.Autowired("csvCreator"),s("design:type",b.CsvCreator)],N.prototype,"csvCreator",void 0),r([p.Autowired("mouseEventService"),s("design:type",w.MouseEventService)],N.prototype,"mouseEventService",void 0),r([p.Autowired("focusedCellController"),s("design:type",C.FocusedCellController)],N.prototype,"focusedCellController",void 0),r([p.Autowired("$scope"),s("design:type",Object)],N.prototype,"$scope",void 0),r([p.Autowired("scrollVisibleService"),s("design:type",_.ScrollVisibleService)],N.prototype,"scrollVisibleService",void 0),r([p.Autowired("frameworkFactory"),s("design:type",Object)],N.prototype,"frameworkFactory",void 0),r([p.Autowired("valueService"),s("design:type",I.ValueService)],N.prototype,"valueService",void 0),r([p.Autowired("componentRecipes"),s("design:type",P.ComponentRecipes)],N.prototype,"componentRecipes",void 0),r([p.Autowired("dragAndDropService"),s("design:type",G.DragAndDropService)],N.prototype,"dragAndDropService",void 0),r([p.Autowired("heightScaler"),s("design:type",W.HeightScaler)],N.prototype,"heightScaler",void 0),r([p.Autowired("enterprise"),s("design:type",Boolean)],N.prototype,"enterprise",void 0),r([p.Optional("rangeController"),s("design:type",Object)],N.prototype,"rangeController",void 0),r([p.Optional("contextMenuFactory"),s("design:type",Object)],N.prototype,"contextMenuFactory",void 0),r([p.Optional("clipboardService"),s("design:type",Object)],N.prototype,"clipboardService",void 0),r([M.RefSelector("eBody"),s("design:type",HTMLElement)],N.prototype,"eBody",void 0),r([M.RefSelector("eBodyViewport"),s("design:type",HTMLElement)],N.prototype,"eBodyViewport",void 0),r([M.RefSelector("eBodyContainer"),s("design:type",HTMLElement)],N.prototype,"eBodyContainer",void 0),r([M.RefSelector("eLeftContainer"),s("design:type",HTMLElement)],N.prototype,"eLeftContainer",void 0),r([M.RefSelector("eRightContainer"),s("design:type",HTMLElement)],N.prototype,"eRightContainer",void 0),r([M.RefSelector("eFullWidthViewportWrapper"),s("design:type",HTMLElement)],N.prototype,"eFullWidthViewportWrapper",void 0),r([M.RefSelector("eFullWidthViewport"),s("design:type",HTMLElement)],N.prototype,"eFullWidthViewport",void 0),r([M.RefSelector("eFullWidthContainer"),s("design:type",HTMLElement)],N.prototype,"eFullWidthContainer",void 0),r([M.RefSelector("eLeftViewport"),s("design:type",HTMLElement)],N.prototype,"eLeftViewport",void 0),r([M.RefSelector("eLeftViewportWrapper"),s("design:type",HTMLElement)],N.prototype,"eLeftViewportWrapper",void 0),r([M.RefSelector("eRightViewport"),s("design:type",HTMLElement)],N.prototype,"eRightViewport",void 0),r([M.RefSelector("eRightViewportWrapper"),s("design:type",HTMLElement)],N.prototype,"eRightViewportWrapper",void 0),r([M.RefSelector("eTop"),s("design:type",HTMLElement)],N.prototype,"eTop",void 0),r([M.RefSelector("eLeftTop"),s("design:type",HTMLElement)],N.prototype,"eLeftTop",void 0),r([M.RefSelector("eRightTop"),s("design:type",HTMLElement)],N.prototype,"eRightTop",void 0),r([M.RefSelector("eTopContainer"),s("design:type",HTMLElement)],N.prototype,"eTopContainer",void 0),r([M.RefSelector("eTopViewport"),s("design:type",HTMLElement)],N.prototype,"eTopViewport",void 0),r([M.RefSelector("eTopFullWidthContainer"),s("design:type",HTMLElement)],N.prototype,"eTopFullWidthContainer",void 0),r([M.RefSelector("eBottom"),s("design:type",HTMLElement)],N.prototype,"eBottom",void 0),r([M.RefSelector("eLeftBottom"),s("design:type",HTMLElement)],N.prototype,"eLeftBottom",void 0),r([M.RefSelector("eRightBottom"),s("design:type",HTMLElement)],N.prototype,"eRightBottom",void 0),r([M.RefSelector("eBottomContainer"),s("design:type",HTMLElement)],N.prototype,"eBottomContainer",void 0),r([M.RefSelector("eBottomViewport"),s("design:type",HTMLElement)],N.prototype,"eBottomViewport",void 0),r([M.RefSelector("eBottomFullWidthContainer"),s("design:type",HTMLElement)],N.prototype,"eBottomFullWidthContainer",void 0),r([M.RefSelector("headerRoot"),s("design:type",t.HeaderRootComp)],N.prototype,"headerRootComp",void 0),r([p.PreDestroy,s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],N.prototype,"destroy",null),r([p.PostConstruct,s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],N.prototype,"init",null),N);function N(){var e=i.call(this,'<div class="ag-root ag-font-style" role="grid">\n        <ag-header-root ref="headerRoot"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <div class="ag-pinned-left-floating-top" ref="eLeftTop" role="presentation"></div>\n            <div class="ag-floating-top-viewport" ref="eTopViewport" role="presentation">\n                <div class="ag-floating-top-container" ref="eTopContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-floating-top" ref="eRightTop" role="presentation"></div>\n            <div class="ag-floating-top-full-width-container" ref="eTopFullWidthContainer" role="presentation"></div>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-pinned-left-cols-viewport-wrapper" ref="eLeftViewportWrapper" role="presentation">\n                <div class="ag-pinned-left-cols-viewport" ref="eLeftViewport" role="presentation">\n                    <div class="ag-pinned-left-cols-container" ref="eLeftContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-body-viewport-wrapper" role="presentation">\n                <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                    <div class="ag-body-container" ref="eBodyContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-pinned-right-cols-viewport-wrapper" ref="eRightViewportWrapper" role="presentation">\n                <div class="ag-pinned-right-cols-viewport" ref="eRightViewport" role="presentation">\n                    <div class="ag-pinned-right-cols-container" ref="eRightContainer" role="presentation"></div>\n                </div>\n            </div>\n            <div class="ag-full-width-viewport-wrapper" ref="eFullWidthViewportWrapper" role="presentation">\n                <div class="ag-full-width-viewport" ref="eFullWidthViewport" role="presentation">\n                    <div class="ag-full-width-container" ref="eFullWidthContainer" role="presentation"></div>\n                </div>\n            </div>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <div class="ag-pinned-left-floating-bottom" ref="eLeftBottom" role="presentation"></div>\n            <div class="ag-floating-bottom-viewport" ref="eBottomViewport" role="presentation">\n                <div class="ag-floating-bottom-container" ref="eBottomContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-floating-bottom" ref="eRightBottom" role="presentation"></div>\n            <div class="ag-floating-bottom-full-width-container" ref="eBottomFullWidthContainer" role="presentation"></div>\n        </div>\n        <div class="ag-overlay" ref="eOverlay"></div>\n    </div>')||this;return e.scrollLeft=-1,e.nextScrollLeft=-1,e.scrollTop=-1,e.nextScrollTop=-1,e.verticalRedrawNeeded=!1,e}e.GridPanel=L},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(28),l=i(34),a=i(4),c=i(1),i=(u.prototype.registerGridComp=function(e){this.gridPanel=e},u.prototype.getPreferredHeightForRow=function(t){for(var i=this,e=(this.eDummyContainer||(this.eDummyContainer=document.createElement("div"),c._.addCssClass(this.eDummyContainer,"ag-row ag-row-no-focus")),this.gridPanel.getBodyContainer()),n=(e.appendChild(this.eDummyContainer),[]),o=this.columnController.getAllAutoRowHeightCols(),o=(console.log(),o.forEach(function(e){e=new l.CellComp(i.$scope,i.beans,e,t,null,!0);e.setParentRow(i.eDummyContainer),n.push(e)}),n.map(function(e){return e.getCreateTemplate()}).join(" ")),r=(this.eDummyContainer.innerHTML=o,n.forEach(function(e){return e.afterAttached()}),0),s=0;s<this.eDummyContainer.children.length;s++){var a=this.eDummyContainer.children[s];a.offsetHeight>r&&(r=a.offsetHeight)}return e.removeChild(this.eDummyContainer),n.forEach(function(e){e.detach(),e.destroy()}),c._.removeAllChildren(this.eDummyContainer),r},n([r.Autowired("beans"),o("design:type",s.Beans)],u.prototype,"beans",void 0),n([r.Autowired("$scope"),o("design:type",Object)],u.prototype,"$scope",void 0),n([r.Autowired("columnController"),o("design:type",a.ColumnController)],u.prototype,"columnController",void 0),n([r.Bean("autoHeightCalculator")],u));function u(){}t.AutoHeightCalculator=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),c=i(4),u=i(10),d=i(0),h=i(98),p=i(3),f=i(5),g=i(36),m=i(8),v=i(11),y=i(1),b=i(6),i=i(39),m=(o=m.Component,r(w,o),w.prototype.registerGridComp=function(e){this.gridPanel=e,this.centerContainer.registerGridComp(e),this.pinnedLeftContainer.registerGridComp(e),this.pinnedRightContainer.registerGridComp(e)},w.prototype.postConstruct=function(){var t=this;this.gridApi.registerHeaderRootComp(this),this.autoWidthCalculator.registerHeaderRootComp(this),this.centerContainer=new h.HeaderContainer(this.eHeaderContainer,this.eHeaderViewport,null),this.childContainers=[this.centerContainer],this.pinnedLeftContainer=new h.HeaderContainer(this.ePinnedLeftHeader,null,u.Column.PINNED_LEFT),this.pinnedRightContainer=new h.HeaderContainer(this.ePinnedRightHeader,null,u.Column.PINNED_RIGHT),this.childContainers.push(this.pinnedLeftContainer),this.childContainers.push(this.pinnedRightContainer),this.childContainers.forEach(function(e){return t.context.wireBean(e)}),this.eventService.addEventListener(f.Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshHeader.bind(this)),this.eventService.addEventListener(f.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addPreventHeaderScroll(),this.columnController.isReady()&&this.refreshHeader()},w.prototype.setHorizontalScroll=function(e){this.eHeaderContainer.style.left=e+"px"},w.prototype.forEachHeaderElement=function(t){this.childContainers.forEach(function(e){return e.forEachHeaderElement(t)})},w.prototype.destroy=function(){this.childContainers.forEach(function(e){return e.destroy()})},w.prototype.refreshHeader=function(){this.childContainers.forEach(function(e){return e.refresh()})},w.prototype.onPivotModeChanged=function(){var e=this.columnController.isPivotMode();y.Utils.addOrRemoveCssClass(this.getGui(),"ag-pivot-on",e),y.Utils.addOrRemoveCssClass(this.getGui(),"ag-pivot-off",!e)},w.prototype.setHeight=function(e){this.getGui().style.height=e+"px",this.getGui().style.minHeight=e+"px"},w.prototype.addPreventHeaderScroll=function(){var t=this;this.addDestroyableEventListener(this.eHeaderViewport,"scroll",function(){var e=t.eHeaderViewport.scrollLeft;0!==e&&(t.gridPanel.scrollHorizontally(e),t.eHeaderViewport.scrollLeft=0)})},w.prototype.setLeftVisible=function(e){y.Utils.setVisible(this.ePinnedLeftHeader,e)},w.prototype.setRightVisible=function(e){y.Utils.setVisible(this.ePinnedRightHeader,e)},w.TEMPLATE='<div class="ag-header" role="row">\n            <div class="ag-pinned-left-header" ref="ePinnedLeftHeader" role="presentation"></div>\n            <div class="ag-header-viewport" ref="eHeaderViewport" role="presentation">\n                <div class="ag-header-container" ref="eHeaderContainer" role="presentation"></div>\n            </div>\n            <div class="ag-pinned-right-header" ref="ePinnedRightHeader" role="presentation"></div>\n        </div>',s([v.RefSelector("ePinnedLeftHeader"),a("design:type",HTMLElement)],w.prototype,"ePinnedLeftHeader",void 0),s([v.RefSelector("ePinnedRightHeader"),a("design:type",HTMLElement)],w.prototype,"ePinnedRightHeader",void 0),s([v.RefSelector("eHeaderContainer"),a("design:type",HTMLElement)],w.prototype,"eHeaderContainer",void 0),s([v.RefSelector("eHeaderViewport"),a("design:type",HTMLElement)],w.prototype,"eHeaderViewport",void 0),s([d.Autowired("gridOptionsWrapper"),a("design:type",l.GridOptionsWrapper)],w.prototype,"gridOptionsWrapper",void 0),s([d.Autowired("columnController"),a("design:type",c.ColumnController)],w.prototype,"columnController",void 0),s([d.Autowired("context"),a("design:type",d.Context)],w.prototype,"context",void 0),s([d.Autowired("eventService"),a("design:type",p.EventService)],w.prototype,"eventService",void 0),s([d.Autowired("scrollVisibleService"),a("design:type",g.ScrollVisibleService)],w.prototype,"scrollVisibleService",void 0),s([d.Autowired("gridApi"),a("design:type",b.GridApi)],w.prototype,"gridApi",void 0),s([d.Autowired("autoWidthCalculator"),a("design:type",i.AutoWidthCalculator)],w.prototype,"autoWidthCalculator",void 0),s([d.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],w.prototype,"postConstruct",null),s([d.PreDestroy,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],w.prototype,"destroy",null),w);function w(){return o.call(this,w.TEMPLATE)||this}t.HeaderRootComp=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1);function n(){}n.addHeaderClassesFromColDef=function(e,t,i,n,o){s.Utils.missing(e)||this.addColumnClassesFromCollDef(e.headerClass,e,t,i,n,o)},n.addToolPanelClassesFromColDef=function(e,t,i,n,o){s.Utils.missing(e)||this.addColumnClassesFromCollDef(e.toolPanelClass,e,t,i,n,o)},n.addColumnClassesFromCollDef=function(e,t,i,n,o,r){s.Utils.missing(e)||("string"==typeof(t="function"==typeof e?e({colDef:t,column:o,columnGroup:r,context:n.getContext(),api:n.getApi()}):e)?s.Utils.addCssClass(i,t):Array.isArray(t)&&t.forEach(function(e){s.Utils.addCssClass(i,e)}))},t.CssClassApplier=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(9),a=i(4),l=i(1),c=i(64),u=i(23),d=i(2),i=i(30),a=(h.prototype.getNextCellToFocus=function(e,t){for(var i=t,n=!1;!n;){switch(e){case s.Constants.KEY_UP:i=this.getCellAbove(i);break;case s.Constants.KEY_DOWN:i=this.getCellBelow(i);break;case s.Constants.KEY_RIGHT:i=this.gridOptionsWrapper.isEnableRtl()?this.getCellToLeft(i):this.getCellToRight(i);break;case s.Constants.KEY_LEFT:i=this.gridOptionsWrapper.isEnableRtl()?this.getCellToRight(i):this.getCellToLeft(i);break;default:console.log("ag-Grid: unknown key for navigation "+e),i=null}n=!i||this.isCellGoodToFocusOn(i)}return i},h.prototype.isCellGoodToFocusOn=function(e){var t,i=e.column;switch(e.floating){case s.Constants.PINNED_TOP:t=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case s.Constants.PINNED_BOTTOM:t=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:t=this.rowModel.getRow(e.rowIndex)}return!i.isSuppressNavigable(t)},h.prototype.getCellToLeft=function(e){var t=this.columnController.getDisplayedColBefore(e.column);return t?(t={rowIndex:e.rowIndex,column:t,floating:e.floating},new u.GridCell(t)):null},h.prototype.getCellToRight=function(e){var t=this.columnController.getDisplayedColAfter(e.column);return t?(t={rowIndex:e.rowIndex,column:t,floating:e.floating},new u.GridCell(t)):null},h.prototype.getRowBelow=function(e){return this.isLastRowInContainer(e)?e.isFloatingBottom()?null:!e.isNotFloating()&&this.rowModel.isRowsToRender()?new c.GridRow(0,null):this.pinnedRowModel.isRowsToRender(s.Constants.PINNED_BOTTOM)?new c.GridRow(0,s.Constants.PINNED_BOTTOM):null:new c.GridRow(e.rowIndex+1,e.floating)},h.prototype.getCellBelow=function(e){var t=this.getRowBelow(e.getGridRow());return t?(e={rowIndex:t.rowIndex,column:e.column,floating:t.floating},new u.GridCell(e)):null},h.prototype.isLastRowInContainer=function(e){return e.isFloatingTop()?this.pinnedRowModel.getPinnedTopRowData().length-1<=e.rowIndex:e.isFloatingBottom()?this.pinnedRowModel.getPinnedBottomRowData().length-1<=e.rowIndex:this.rowModel.getPageLastRow()<=e.rowIndex},h.prototype.getRowAbove=function(e){return 0===e.rowIndex?e.isFloatingTop()?null:!e.isNotFloating()&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender(s.Constants.PINNED_TOP)?this.getLastFloatingTopRow():null:new c.GridRow(e.rowIndex-1,e.floating)},h.prototype.getCellAbove=function(e){var t=this.getRowAbove(e.getGridRow());return t?(e={rowIndex:t.rowIndex,column:e.column,floating:t.floating},new u.GridCell(e)):null},h.prototype.getLastBodyCell=function(){var e=this.rowModel.getPageLastRow();return new c.GridRow(e,null)},h.prototype.getLastFloatingTopRow=function(){var e=this.pinnedRowModel.getPinnedTopRowData().length-1;return new c.GridRow(e,s.Constants.PINNED_TOP)},h.prototype.getNextTabbedCell=function(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)},h.prototype.getNextTabbedCellForwards=function(e){var t=this.columnController.getAllDisplayedColumns(),i=e.rowIndex,n=e.floating;if(!(o=this.columnController.getDisplayedColAfter(e.column))){var o=t[0],t=this.getRowBelow(e.getGridRow());if(l.Utils.missing(t))return;i=t.rowIndex,n=t.floating}return new u.GridCell({rowIndex:i,column:o,floating:n})},h.prototype.getNextTabbedCellBackwards=function(e){var t=this.columnController.getAllDisplayedColumns(),i=e.rowIndex,n=e.floating;if(!(o=this.columnController.getDisplayedColBefore(e.column))){var o=t[t.length-1],t=this.getRowAbove(e.getGridRow());if(l.Utils.missing(t))return;i=t.rowIndex,n=t.floating}return new u.GridCell({rowIndex:i,column:o,floating:n})},n([r.Autowired("columnController"),o("design:type",a.ColumnController)],h.prototype,"columnController",void 0),n([r.Autowired("rowModel"),o("design:type",Object)],h.prototype,"rowModel",void 0),n([r.Autowired("pinnedRowModel"),o("design:type",i.PinnedRowModel)],h.prototype,"pinnedRowModel",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",d.GridOptionsWrapper)],h.prototype,"gridOptionsWrapper",void 0),n([r.Bean("cellNavigationService")],h));function h(){}t.CellNavigationService=a},function(e,t,i){"use strict";function n(){this.existingIds={}}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.getInstanceIdForKey=function(e){var t=this.existingIds[e],t="number"!=typeof t?0:t+1;return this.existingIds[e]=t},t.GroupInstanceIdCreator=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},i=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),n=(o.prototype.download=function(e,t,i){t=new Blob(["\ufeff",t],{type:i});window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(t,e):((i=document.createElement("a")).href=window.URL.createObjectURL(t),i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i))},n([i.Bean("downloader")],o));function o(){}t.Downloader=n},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=t(2),c=t(17),u=t(7),d=t(4),h=t(20),p=t(80),f=t(18),g=t(16),m=t(3),v=t(78),y=t(6),b=t(38),w=t(48),C=t(19),_=t(49),A=t(35),E=t(12),x=t(31),S=t(39),T=t(59),k=t(0),D=t(47),R=t(42),O=t(108),F=t(15),L=t(40),M=t(24),N=t(22),B=t(44),W=t(82),$=t(1),H=t(109),V=t(111),j=t(113),z=t(54),r=t(5),s=t(114),i=t(116),U=t(55),Y=t(56),q=t(43),K=t(60),X=t(117),Q=t(36),Z=t(84),J=t(118),ee=t(63),te=t(73),ie=t(45),ne=t(53),oe=t(112),re=t(110),se=t(138),ae=t(104),I=t(29),le=t(105),o=t(9),ce=t(33),ue=t(139),de=t(58),he=t(30),pe=t(27),fe=t(21),P=t(66),ge=t(76),me=t(77),ve=t(28),ye=t(41),be=t(37),we=t(97),Ce=t(57),_e=t(86),Ae=t(79),Ee=t(140);function G(e,t,i){e||console.error("ag-Grid: no div element provided to the grid"),t||console.error("ag-Grid: no gridOptions provided to the grid");var n=this.getRowModelClass(t),o=$.Utils.exists(G.enterpriseBeans),r=i?i.frameworkFactory:null,s=($.Utils.missing(r)&&(r=new X.BaseFrameworkFactory),[]),e=(G.enterpriseBeans&&(s=s.concat(G.enterpriseBeans)),G.frameworkBeans&&(s=s.concat(G.frameworkBeans)),{enterprise:o,gridOptions:t,eGridDiv:e,$scope:i?i.$scope:null,$compile:i?i.$compile:null,quickFilterOnScope:i?i.quickFilterOnScope:null,globalEventListener:i?i.globalEventListener:null,frameworkFactory:r}),r=(i&&i.seedBeanInstances&&$.Utils.assign(e,i.seedBeanInstances),[{componentName:"AgCheckbox",theClass:K.AgCheckbox},{componentName:"AgGridComp",theClass:v.GridPanel},{componentName:"AgHeaderRoot",theClass:p.HeaderRootComp},{componentName:"AgPagination",theClass:Ee.PaginationComp}]),a=(G.enterpriseComponents&&(r=r.concat(G.enterpriseComponents)),{overrideBeans:s,seed:e,beans:[n,ve.Beans,I.PaginationAutoPageSizeService,y.GridApi,P.ComponentProvider,ge.AgComponentUtils,me.ComponentMetadataProvider,P.ComponentProvider,pe.ComponentResolver,fe.ComponentRecipes,Ce.HeightScaler,Ae.AutoHeightCalculator,U.CellRendererFactory,T.HorizontalResizeService,he.PinnedRowModel,L.DragService,w.DisplayedGroupCreator,m.EventService,l.GridOptionsWrapper,c.SelectionController,f.FilterManager,d.ColumnController,I.PaginationProxy,h.RowRenderer,C.ExpressionService,b.BalancedColumnTreeBuilder,D.CsvCreator,Z.Downloader,J.XmlFactory,ee.GridSerializer,_.TemplateService,we.NavigationService,A.PopupService,ce.ValueCache,g.ValueService,de.AlignedGridsService,E.LoggerFactory,x.ColumnUtils,S.AutoWidthCalculator,A.PopupService,R.GridCore,O.StandardMenuFactory,F.DragAndDropService,u.ColumnApi,N.FocusedCellController,B.MouseEventService,W.CellNavigationService,H.FilterStage,V.SortStage,j.FlattenStage,re.FilterService,se.RowNodeFactory,z.CellEditorFactory,Y.CellRendererService,q.ValueFormatterService,te.StylingService,Q.ScrollVisibleService,ie.ColumnHoverService,ne.ColumnAnimationService,oe.SortService,_e.SelectableService,ae.AutoGroupColService,le.ImmutableService,ue.ChangeDetectionService,ye.Environment,be.AnimationFrameService,M.SortController],components:r,debug:!!t.debug});this.context=new k.Context(a,new E.Logger("Context",function(){return a.debug})),this.setColumnsAndData(),this.dispatchGridReadyEvent(t),t.debug&&console.log("ag-Grid -> initialised successfully, enterprise = "+o)}G.setEnterpriseBeans=function(e,t){this.enterpriseBeans=e,$.Utils.iterateObject(t,function(e,t){return G.RowModelClasses[e]=t})},G.setEnterpriseComponents=function(e){this.enterpriseComponents=e},G.setFrameworkBeans=function(e){this.frameworkBeans=e},G.prototype.setColumnsAndData=function(){var e=this.context.getBean("gridOptionsWrapper"),t=this.context.getBean("columnController"),i=this.context.getBean("rowModel"),n=e.getColumnDefs(),e=e.getRowData();$.Utils.missing(n)&&$.Utils.missing(e)||($.Utils.exists(n)&&t.setColumnDefs(n,"gridInitializing"),$.Utils.exists(e)&&i.getType()===o.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&i.setRowData(e))},G.prototype.dispatchGridReadyEvent=function(e){var t=this.context.getBean("eventService"),e={type:r.Events.EVENT_GRID_READY,api:e.api,columnApi:e.columnApi};t.dispatchEvent(e)},G.prototype.getRowModelClass=function(e){e="enterprise"===(e=e.rowModelType)?o.Constants.ROW_MODEL_TYPE_SERVER_SIDE:e;if($.Utils.exists(e)){var t=G.RowModelClasses[e];if($.Utils.exists(t))return t;if("normal"===e)return console.warn("ag-Grid: normal rowModel deprecated. Should now be called client side row model instead."),i.ClientSideRowModel;console.error("ag-Grid: could not find matching row model for rowModelType "+e),e===o.Constants.ROW_MODEL_TYPE_VIEWPORT&&console.error("ag-Grid: rowModelType viewport is only available in ag-Grid Enterprise"),e===o.Constants.ROW_MODEL_TYPE_SERVER_SIDE&&console.error("ag-Grid: rowModelType server side is only available in ag-Grid Enterprise")}return i.ClientSideRowModel},G.prototype.destroy=function(){this.context.destroy()},G.RowModelClasses={infinite:s.InfiniteRowModel,clientSide:i.ClientSideRowModel},e.Grid=G},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(1),i=i(2),i=(a.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()},a.prototype.updateSelectableAfterGrouping=function(e){this.isRowSelectableFunc&&this.recurseDown(e.childrenAfterGroup,function(e){return e.childrenAfterGroup})},a.prototype.updateSelectableAfterFiltering=function(e){this.isRowSelectableFunc&&this.recurseDown(e.childrenAfterGroup,function(e){return e.childrenAfterFilter})},a.prototype.recurseDown=function(e,i){var n=this;e.forEach(function(e){var t;e.group&&(e.hasChildren()&&n.recurseDown(i(e),i),t=n.groupSelectsChildren?(t=s._.find(i(e),"selectable",!0),s._.exists(t)):n.isRowSelectableFunc(e),e.setRowSelectable(t))})},n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],a.prototype,"init",null),n([r.Bean("selectableService")],a));function a(){}t.SelectableService=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),s=i(13),a=i(61),i=(o=s.BeanStub,r(l,o),l.prototype.destroy=function(){var t=this;o.prototype.destroy.call(this),this.forEachBlockInOrder(function(e){return t.destroyBlock(e)})},l.prototype.init=function(){var e=this;this.active=!0,this.addDestroyFunc(function(){return e.active=!1})},l.prototype.isActive=function(){return this.active},l.prototype.getVirtualRowCount=function(){return this.virtualRowCount},l.prototype.hack_setVirtualRowCount=function(e){this.virtualRowCount=e},l.prototype.isMaxRowFound=function(){return this.maxRowFound},l.prototype.onPageLoaded=function(e){this.cacheParams.rowNodeBlockLoader.loadComplete(),this.checkBlockToLoad(),this.isActive()&&(this.logger.log("onPageLoaded: page = "+e.page.getBlockNumber()+", lastRow = "+e.lastRow),e.success&&this.checkVirtualRowCount(e.page,e.lastRow))},l.prototype.purgeBlocksIfNeeded=function(t){var i,e,n=this;u.Utils.missing(this.cacheParams.maxBlocksInCache)||this.blockCount<=this.cacheParams.maxBlocksInCache||(i=[],this.forEachBlockInOrder(function(e){e!==t&&i.push(e)}),i.sort(function(e,t){return t.getLastAccessed()-e.getLastAccessed()}),e=this.cacheParams.maxBlocksInCache-1,i.splice(0,e),i.forEach(function(e){e.isAnyNodeOpen(n.virtualRowCount)||n.removeBlockFromCache(e)}))},l.prototype.postCreateBlock=function(e){e.addEventListener(a.RowNodeBlock.EVENT_LOAD_COMPLETE,this.onPageLoaded.bind(this)),this.setBlock(e.getBlockNumber(),e),this.purgeBlocksIfNeeded(e),this.checkBlockToLoad()},l.prototype.removeBlockFromCache=function(e){e&&this.destroyBlock(e)},l.prototype.checkBlockToLoad=function(){this.cacheParams.rowNodeBlockLoader.checkBlockToLoad()},l.prototype.checkVirtualRowCount=function(e,t){"number"==typeof t&&0<=t?(this.virtualRowCount=t,this.maxRowFound=!0,this.onCacheUpdated()):this.maxRowFound||(t=(e.getBlockNumber()+1)*this.cacheParams.blockSize+this.cacheParams.overflowSize,this.virtualRowCount<t?(this.virtualRowCount=t,this.onCacheUpdated()):this.cacheParams.dynamicRowHeight&&this.onCacheUpdated())},l.prototype.setVirtualRowCount=function(e,t){this.virtualRowCount=e,u.Utils.exists(t)&&(this.maxRowFound=t),this.maxRowFound||this.virtualRowCount%this.cacheParams.blockSize==0&&this.virtualRowCount++,this.onCacheUpdated()},l.prototype.forEachNodeDeep=function(t,i){var n=this;this.forEachBlockInOrder(function(e){e.forEachNodeDeep(t,i,n.virtualRowCount)})},l.prototype.forEachBlockInOrder=function(e){var t=this.getBlockIdsSorted();this.forEachBlockId(t,e)},l.prototype.forEachBlockInReverseOrder=function(e){var t=this.getBlockIdsSorted().reverse();this.forEachBlockId(t,e)},l.prototype.forEachBlockId=function(e,i){var n=this;e.forEach(function(e){var t=n.blocks[e];i(t,e)})},l.prototype.getBlockIdsSorted=function(){return Object.keys(this.blocks).map(function(e){return parseInt(e)}).sort(function(e,t){return e-t})},l.prototype.getBlock=function(e){return this.blocks[e]},l.prototype.setBlock=function(e,t){this.blocks[e]=t,this.blockCount++,this.cacheParams.rowNodeBlockLoader.addBlock(t)},l.prototype.destroyBlock=function(e){delete this.blocks[e.getBlockNumber()],e.destroy(),this.blockCount--,this.cacheParams.rowNodeBlockLoader.removeBlock(e)},l.prototype.onCacheUpdated=function(){this.isActive()&&this.dispatchEvent({type:l.EVENT_CACHE_UPDATED})},l.prototype.purgeCache=function(){var t=this;this.forEachBlockInOrder(function(e){return t.removeBlockFromCache(e)}),this.onCacheUpdated()},l.prototype.getRowNodesInRange=function(i,n){var o=this,r=[],s=-1,a=!1,l=new u.NumberSequence,c=(u.Utils.missing(i)&&(a=!0),!1);return this.forEachBlockInOrder(function(e,t){c||(a&&s+1!==t?c=!0:(s=t,e.forEachNodeShallow(function(e){var t=e===i||e===n;(a||t)&&r.push(e),t&&(a=!a)},l,o.virtualRowCount)))}),c||a?[]:r},l.EVENT_CACHE_UPDATED="cacheUpdated",l);function l(e){var t=o.call(this)||this;return t.maxRowFound=!1,t.blocks={},t.blockCount=0,t.virtualRowCount=e.initialRowCount,t.cacheParams=e,t}t.RowNodeCache=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(14),a=i(1);function l(e,t,i,n,o){this.nextId=0,this.allNodesMap={},this.rootNode=e,this.gridOptionsWrapper=t,this.context=i,this.eventService=n,this.columnController=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=l.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}l.prototype.postConstruct=function(){this.getNodeChildDetails=this.gridOptionsWrapper.getNodeChildDetailsFunc(),this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.doesDataFlower=this.gridOptionsWrapper.getDoesDataFlowerFunc(),this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc(),this.doingLegacyTreeData=a.Utils.exists(this.getNodeChildDetails),this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},l.prototype.getCopyOfNodesMap=function(){return a.Utils.cloneObject(this.allNodesMap)},l.prototype.getRowNode=function(e){return this.allNodesMap[e]},l.prototype.setRowData=function(e){if(this.rootNode.childrenAfterFilter=null,this.rootNode.childrenAfterGroup=null,this.rootNode.childrenAfterSort=null,this.rootNode.childrenMapped=null,this.nextId=0,this.allNodesMap={},!e)return this.rootNode.allLeafChildren=[],void(this.rootNode.childrenAfterGroup=[]);e=this.recursiveFunction(e,null,l.TOP_LEVEL);this.doingLegacyTreeData?(this.rootNode.childrenAfterGroup=e,this.setLeafChildren(this.rootNode)):this.rootNode.allLeafChildren=e},l.prototype.updateRowData=function(e,t){var i=this;if(this.isLegacyTreeData())return null;var n=e.add,o=e.addIndex,r=e.remove,e=e.update,s={remove:[],update:[],add:[]};return a.Utils.exists(n)&&("number"==typeof o&&0<=o?n.reverse().forEach(function(e){e=i.addRowNode(e,o);s.add.push(e)}):n.forEach(function(e){e=i.addRowNode(e);s.add.push(e)})),a.Utils.exists(r)&&r.forEach(function(e){e=i.updatedRowNode(e,!1);e&&s.remove.push(e)}),a.Utils.exists(e)&&e.forEach(function(e){e=i.updatedRowNode(e,!0);e&&s.update.push(e)}),t&&a.Utils.sortRowNodesByOrder(this.rootNode.allLeafChildren,t),s},l.prototype.addRowNode=function(e,t){e=this.createNode(e,null,l.TOP_LEVEL);return a.Utils.exists(t)?a.Utils.insertIntoArray(this.rootNode.allLeafChildren,e,t):this.rootNode.allLeafChildren.push(e),e},l.prototype.updatedRowNode=function(t,e){var i=this.gridOptionsWrapper.getRowNodeIdFunc();if(a.Utils.exists(i)){var n,i=i(t);if(!(n=this.allNodesMap[i]))return console.error("ag-Grid: could not find row id="+i+", data item was not found for this id"),null}else if(!(n=a.Utils.find(this.rootNode.allLeafChildren,function(e){return e.data===t})))return console.error("ag-Grid: could not find data item as object was not found",t),null;return e?n.updateData(t):(n.setSelected(!1),n.clearRowTop(),a.Utils.removeFromArray(this.rootNode.allLeafChildren,n),this.allNodesMap[n.id]=void 0),n},l.prototype.recursiveFunction=function(e,t,i){var n,o=this;{if("string"!=typeof e)return n=[],e.forEach(function(e){e=o.createNode(e,t,i);n.push(e)}),n;console.warn("ag-Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")}},l.prototype.createNode=function(e,t,i){var n=new s.RowNode,o=(this.context.wireBean(n),this.gridOptionsWrapper.isTreeData()),r=!o&&a.Utils.exists(this.getNodeChildDetails)?this.getNodeChildDetails(e):null;return r&&r.group?(n.group=!0,n.childrenAfterGroup=this.recursiveFunction(r.children,n,i+1),n.expanded=!0===r.expanded,n.field=r.field,n.key=r.key,n.canFlower=n.master,this.setLeafChildren(n)):(n.group=!1,o?(n.master=!1,n.expanded=!1):(this.doesDataFlower?n.master=this.doesDataFlower(e):this.doingMasterDetail?this.isRowMasterFunc?n.master=this.isRowMasterFunc(e):n.master=!0:n.master=!1,o=(r=this.columnController.getRowGroupColumns())?r.length:0,n.expanded=!!n.master&&this.isExpanded(i+o))),n.canFlower=n.master,t&&!this.suppressParentsInRowNodes&&(n.parent=t),n.level=i,n.setDataAndId(e,this.nextId.toString()),this.allNodesMap[n.id]=n,this.nextId++,n},l.prototype.isExpanded=function(e){var t=this.gridOptionsWrapper.getGroupDefaultExpanded();return-1===t||e<t},l.prototype.setLeafChildren=function(t){t.allLeafChildren=[],t.childrenAfterGroup&&t.childrenAfterGroup.forEach(function(e){e.group?e.allLeafChildren&&e.allLeafChildren.forEach(function(e){return t.allLeafChildren.push(e)}):t.allLeafChildren.push(e)})},l.prototype.insertItemsAtIndex=function(e,t){if(this.isLegacyTreeData())return null;var i=this.rootNode.allLeafChildren;if(!(e>i.length)){for(var n=[],o=t.length-1;0<=o;o--){var r=t[o],r=this.createNode(r,null,l.TOP_LEVEL);a.Utils.insertIntoArray(i,r,e),n.push(r)}return 0<n.length?n:null}console.warn("ag-Grid: invalid index "+e+", max index is "+i.length)},l.prototype.addItems=function(e){var t=this.rootNode.allLeafChildren;return this.insertItemsAtIndex(t.length,e)},l.prototype.isLegacyTreeData=function(){return!!a.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc())&&(console.warn("ag-Grid: adding and removing rows is not supported when using nodeChildDetailsFunc, ie it is not supported for legacy tree data. Please see the docs on the new preferred way of providing tree data that works with delta updates."),!0)},l.TOP_LEVEL=0,l.ROOT_NODE_ID="ROOT_NODE_ID",t.ClientSideNodeManager=l},function(e,t,i){"use strict";function n(e){this.active=!0,this.nodeIdsToBoolean={},this.nodeIdsToColumns={},this.keepingColumns=e}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.setInactive=function(){this.active=!1},n.prototype.isActive=function(){return this.active},n.prototype.addParentNode=function(e,t){for(var i=this,n=(this.validateActive(),e);n;)this.nodeIdsToBoolean[n.id]=!0,this.keepingColumns&&t&&(this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(function(e){return i.nodeIdsToColumns[n.id][e.getId()]=!0})),n=n.parent},n.prototype.isInPath=function(e){return this.validateActive(),this.nodeIdsToBoolean[e.id]},n.prototype.getValueColumnsForNode=function(e,t){if(this.validateActive(),!this.keepingColumns)return t;var i=this.nodeIdsToColumns[e.id];return t.filter(function(e){return i[e.getId()]})},n.prototype.getNotValueColumnsForNode=function(e,t){if(this.validateActive(),!this.keepingColumns)return null;var i=this.nodeIdsToColumns[e.id];return t.filter(function(e){return!i[e.getId()]})},n.prototype.validateActive=function(){if(!this.active)throw"ag-Grid: tried to work on an invalid changed path"},t.ChangedPath=n},function(e,t,i){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.STRING_PROPERTIES=["sortingOrder","rowClass","rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDeliminator","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals"],n.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","groupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","columnTypes","rowClassRules","detailGridOptions","detailCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent"],n.ARRAY_PROPERTIES=["slaveGrids","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData"],n.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","layoutInterval","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","scrollbarWidth","paginationStartPage","infiniteBlockSize","batchUpdateWaitMillis"],n.BOOLEAN_PROPERTIES=["toolPanelSuppressRowGroups","toolPanelSuppressValues","toolPanelSuppressPivots","toolPanelSuppressPivotMode","toolPanelSuppressSideButtons","toolPanelSuppressColumnFilter","toolPanelSuppressColumnSelectAll","toolPanelSuppressColumnExpandAll","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressHorizontalScroll","debug","enableColResize","enableCellExpressions","enableSorting","enableServerSideSorting","enableFilter","enableServerSideFilter","angularCompileRows","angularCompileFilters","angularCompileHeaders","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupUseEntireRow","groupSuppressRow","groupSuppressBlankHeader","forPrint","suppressMenuHide","rowDeselection","unSortIcon","suppressMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","suppressParentsInRowNodes","showToolPanel","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","pivotPanelShow","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","suppressMenuFilterPanel","suppressMenuMainPanel","suppressMenuColumnPanel","enableStatusBar","alwaysShowStatusBar","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressUseColIdForGroups","suppressCopyRowsToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragManaged","suppressRowDrag","enableGroupEdit","embedFullWidthRows","suppressTabbing","suppressPaginationPanel","floatingFilter","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","pivotTotals","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","contractColumnSelection","suppressEnterpriseResetOnNewColumns","enableOldSetFilterModel","suppressRowHoverHighlight","gridAutoHeight","suppressRowTransform","suppressClipboardPaste"],n.FUNCTION_PROPERTIES=["localeTextFunc","groupRowInnerRenderer","groupRowInnerRendererFramework","dateComponent","dateComponentFramework","groupRowRenderer","groupRowRendererFramework","isExternalFilterPresent","getRowHeight","doesExternalFilterPass","getRowClass","getRowStyle","getRowClassRules","traverseNode","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getNodeChildDetails","groupRowAggNodes","getRowNodeId","isFullWidthCell","fullWidthCellRenderer","fullWidthCellRendererFramework","doesDataFlower","processSecondaryColDef","processSecondaryColGroupDef","getBusinessKeyForNode","sendToClipboard","navigateToNextCell","tabToNextCell","getDetailRowData","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework","onGridReady","defaultGroupSortComparator","isRowMaster","isRowSelectable","postSort","processHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard"],n.ALL_PROPERTIES=n.ARRAY_PROPERTIES.concat(n.OBJECT_PROPERTIES).concat(n.STRING_PROPERTIES).concat(n.NUMBER_PROPERTIES).concat(n.FUNCTION_PROPERTIES).concat(n.BOOLEAN_PROPERTIES),t.PropertyKeys=n},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),c=i(68),u=i(11),d=i(1),h=i(21),p=i(8),f=i(9),i=(o=p.Component,r(g,o),g.prototype.init=function(e){this.onFloatingFilterChanged=e.onFloatingFilterChanged,this.currentParentModel=e.currentParentModel;var t=null!=e.debounceMs?e.debounceMs:500,t=d._.debounce(this.syncUpWithParentFilter.bind(this),t),t=(this.addDestroyableEventListener(this.eColumnFloatingFilter,"input",t),this.addDestroyableEventListener(this.eColumnFloatingFilter,"keypress",t),this.addDestroyableEventListener(this.eColumnFloatingFilter,"keydown",t),e.column.getDefinition());t.filterParams&&t.filterParams.filterOptions&&1===t.filterParams.filterOptions.length&&"inRange"===t.filterParams.filterOptions[0]&&(this.eColumnFloatingFilter.readOnly=!0)},g.prototype.onParentModelChanged=function(e,t){if(null!=t)return this.eColumnFloatingFilter.value=this.parseAsText(t.condition1)+" "+t.operator+" "+this.parseAsText(t.condition2),this.eColumnFloatingFilter.readOnly=!0,this.lastKnownModel=null,this.eColumnFloatingFilter.title=this.eColumnFloatingFilter.value,void(this.eColumnFloatingFilter.style.cursor="default");this.eColumnFloatingFilter.readOnly=!1,this.equalModels(this.lastKnownModel,e)?this.lastKnownModel||e||(this.eColumnFloatingFilter.value=""):(this.lastKnownModel=e,(t=this.asFloatingFilterText(e))!==this.eColumnFloatingFilter.value&&(this.eColumnFloatingFilter.value=t,this.eColumnFloatingFilter.title=""))},g.prototype.syncUpWithParentFilter=function(e){var t=this.asParentModel();this.equalModels(this.lastKnownModel,t)||(d._.isKeyPressed(e,f.Constants.KEY_ENTER)?this.onFloatingFilterChanged({model:t,apply:!0}):this.onFloatingFilterChanged({model:t,apply:!1}))&&(this.lastKnownModel=t)},g.prototype.equalModels=function(e,t){return!!d._.referenceCompare(e,t)||!(!e||!t)&&(!Array.isArray(e)&&!Array.isArray(t)&&(d._.referenceCompare(e.type,t.type)&&d._.referenceCompare(e.filter,t.filter)&&d._.referenceCompare(e.filterTo,t.filterTo)&&d._.referenceCompare(e.filterType,t.filterType)))},s([u.RefSelector("eColumnFloatingFilter"),a("design:type",HTMLInputElement)],g.prototype,"eColumnFloatingFilter",void 0),g);function g(){var e=o.call(this,'<div><input  ref="eColumnFloatingFilter" class="ag-floating-filter-input"></div>')||this;return e.lastKnownModel=null,e}t.InputTextFloatingFilterComp=i;r(v,m=i),v.prototype.asFloatingFilterText=function(e){return e?e.filter:""},v.prototype.asParentModel=function(){return{type:this.currentParentModel().type,filter:this.eColumnFloatingFilter.value,filterType:"text"}},v.prototype.parseAsText=function(e){return this.asFloatingFilterText(e)};var m,u=v;function v(){return null!==m&&m.apply(this,arguments)||this}t.TextFloatingFilterComp=u;y=p.Component,r(b,y),b.prototype.init=function(e){this.onFloatingFilterChanged=e.onFloatingFilterChanged,this.currentParentModel=e.currentParentModel;var t=null!=e.debounceMs?e.debounceMs:500,t={onDateChanged:d._.debounce(this.onDateChanged.bind(this),t),filterParams:e.column.getColDef().filterParams},i=(this.dateComponentPromise=this.componentRecipes.newDateComponent(t),d._.loadTemplate("<div></div>"));this.dateComponentPromise.then(function(e){i.appendChild(e.getGui())}),this.setTemplateFromElement(i)},b.prototype.onDateChanged=function(){var e=this.currentParentModel(),t=this.asParentModel();this.equalModels(e,t)||(this.onFloatingFilterChanged({model:t,apply:!0}),this.lastKnownModel=t)},b.prototype.equalModels=function(e,t){return!!d._.referenceCompare(e,t)||!(!e||!t)&&(!Array.isArray(e)&&!Array.isArray(t)&&(d._.referenceCompare(e.type,t.type)&&d._.referenceCompare(e.dateFrom,t.dateFrom)&&d._.referenceCompare(e.dateTo,t.dateTo)&&d._.referenceCompare(e.filterType,t.filterType)))},b.prototype.asParentModel=function(){var e=this.currentParentModel(),t=this.dateComponentPromise.resolveNow(null,function(e){return e.getDate()}),t=d._.serializeDateToYyyyMmDd(c.DateFilter.removeTimezone(t),"-");return{type:e.type,dateFrom:t,dateTo:e?e.dateTo:null,filterType:"date"}},b.prototype.onParentModelChanged=function(t){this.lastKnownModel=t,this.dateComponentPromise.then(function(e){t&&t.dateFrom?e.setDate(d._.parseYyyyMmDdToDate(t.dateFrom,"-")):e.setDate(null)})},s([l.Autowired("componentRecipes"),a("design:type",h.ComponentRecipes)],b.prototype,"componentRecipes",void 0);var y,u=b;function b(){var e=null!==y&&y.apply(this,arguments)||this;return e.lastKnownModel=null,e}t.DateFloatingFilterComp=u;r(C,w=i),C.prototype.asFloatingFilterText=function(e){var t=this.currentParentModel();return null==e&&null==t?"":null==e&&null!=t&&"inRange"!==t.type?(this.eColumnFloatingFilter.readOnly=!1,""):null!=t&&"inRange"===t.type?(this.eColumnFloatingFilter.readOnly=!0,this.parseAsText(t)):(this.eColumnFloatingFilter.readOnly=!1,this.parseAsText(e))},C.prototype.parseAsText=function(e){if(e.type&&"inRange"===e.type)return((t=this.asNumber(e.filter))?t+"":"")+"-"+((t=this.asNumber(e.filterTo))?t+"":"");var t=this.asNumber(e.filter);return null!=t?t+"":""},C.prototype.asParentModel=function(){var e=this.currentParentModel(),t=this.asNumber(this.eColumnFloatingFilter.value),i=this.eColumnFloatingFilter.value,n=null,n=null==t&&""===i?null:null==t?e.filter:t;return{type:e.type,filter:n,filterTo:e?e.filterTo:null,filterType:"number"}},C.prototype.asNumber=function(e){if(null==e)return null;if(""===e)return null;e=Number(e);return!d._.isNumeric(e)?null:e};var w,p=C;function C(){return null!==w&&w.apply(this,arguments)||this}t.NumberFloatingFilterComp=p;r(A,_=i),A.prototype.init=function(e){_.prototype.init.call(this,e),this.eColumnFloatingFilter.readOnly=!0},A.prototype.asFloatingFilterText=function(e){if(this.eColumnFloatingFilter.readOnly=!0,!e)return"";e=e instanceof Array?e:e.values;if(0===e.length)return"";var t=10<e.length?e.slice(0,10).concat("..."):e;return"("+e.length+") "+t.join(",")},A.prototype.parseAsText=function(e){return this.asFloatingFilterText(e)},A.prototype.asParentModel=function(){return null==this.eColumnFloatingFilter.value||""===this.eColumnFloatingFilter.value?{values:[],filterType:"set"}:{values:this.eColumnFloatingFilter.value.split(","),filterType:"set"}},A.prototype.equalModels=function(e,t){return!1};var _,s=A;function A(){return null!==_&&_.apply(this,arguments)||this}t.SetFloatingFilterComp=s;r(x,E=i),x.prototype.init=function(e){E.prototype.init.call(this,e),this.eColumnFloatingFilter.readOnly=!0},x.prototype.onParentModelChanged=function(e){this.eColumnFloatingFilter.value=this.asFloatingFilterText(this.currentParentModel())},x.prototype.asFloatingFilterText=function(e){return e},x.prototype.parseAsText=function(e){return e},x.prototype.asParentModel=function(){return null};var E,l=x;function x(){return null!==E&&E.apply(this,arguments)||this}t.ReadModelAsStringFloatingFilterComp=l},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),i=(Object.defineProperty(t,"__esModule",{value:!0}),i(67)),i=(o=i.TextCellEditor,r(s,o),s.prototype.isPopup=function(){return!0},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.PopupTextCellEditor=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),i=(Object.defineProperty(t,"__esModule",{value:!0}),i(75)),i=(o=i.SelectCellEditor,r(s,o),s.prototype.isPopup=function(){return!0},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.PopupSelectCellEditor=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),a=i(9),l=i(1),i=(o=s.Component,r(c,o),c.prototype.init=function(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.textarea=document.createElement("textarea"),this.textarea.maxLength=e.maxLength||"200",this.textarea.cols=e.cols||"60",this.textarea.rows=e.rows||"10",l.Utils.exists(e.value)&&(this.textarea.value=e.value.toString()),this.getGui().querySelector(".ag-large-textarea").appendChild(this.textarea),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},c.prototype.onKeyDown=function(e){var t=e.which||e.keyCode;(t==a.Constants.KEY_LEFT||t==a.Constants.KEY_UP||t==a.Constants.KEY_RIGHT||t==a.Constants.KEY_DOWN||e.shiftKey&&t==a.Constants.KEY_ENTER)&&e.stopPropagation()},c.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.textarea.focus()},c.prototype.getValue=function(){return this.textarea.value},c.prototype.isPopup=function(){return!0},c.TEMPLATE='<div class="ag-large-text" tabindex="0"><div class="ag-large-textarea"></div></div>',c);function c(){return o.call(this,c.TEMPLATE)||this}t.LargeTextCellEditor=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),c=i(51),i=i(11),r=(o=c.ComparableBaseFilter,r(u,o),u.prototype.getDefaultType=function(){return c.BaseFilter.CONTAINS},u.prototype.customInit=function(){this.comparator=this.filterParams.textCustomComparator||u.DEFAULT_COMPARATOR,this.formatter=this.filterParams.textFormatter||(1==this.filterParams.caseSensitive?u.DEFAULT_FORMATTER:u.DEFAULT_LOWERCASE_FORMATTER),o.prototype.customInit.call(this)},u.prototype.modelFromFloatingFilter=function(e){return{type:this.filter,filter:e,filterType:"text"}},u.prototype.getApplicableFilterTypes=function(){return[c.BaseFilter.EQUALS,c.BaseFilter.NOT_EQUAL,c.BaseFilter.STARTS_WITH,c.BaseFilter.ENDS_WITH,c.BaseFilter.CONTAINS,c.BaseFilter.NOT_CONTAINS]},u.prototype.bodyTemplate=function(e){var t=this.translate.bind(this);return'<div class="ag-filter-body">\n            <input class="ag-filter-filter" id='+(e==c.FilterConditionType.MAIN?"filterText":"filterConditionText")+' type="text" placeholder="'+t("filterOoo","Filter...")+'"/>\n        </div>'},u.prototype.initialiseFilterBodyUi=function(e){o.prototype.initialiseFilterBodyUi.call(this,e),this.addFilterChangedListener(e),this.setFilter(this.filterConditionText,c.FilterConditionType.CONDITION),this.setFilterType(this.filterCondition,c.FilterConditionType.CONDITION)},u.prototype.addFilterChangedListener=function(e){var t=this,i=e===c.FilterConditionType.MAIN?this.eFilterTextField:this.eFilterConditionTextField,n=this.getDebounceMs(this.filterParams),n=l.Utils.debounce(function(){return t.onFilterTextFieldChanged(e)},n);this.addDestroyableEventListener(i,"input",n)},u.prototype.refreshFilterBodyUi=function(e){this.eFilterConditionTextField&&this.addFilterChangedListener(c.FilterConditionType.CONDITION)},u.prototype.afterGuiAttached=function(){this.eFilterTextField.focus()},u.prototype.filterValues=function(e){return e===c.FilterConditionType.MAIN?this.filterText:this.filterConditionText},u.prototype.individualFilterPasses=function(e,t){var i=t==c.FilterConditionType.MAIN?this.filterText:this.filterConditionText,n=t==c.FilterConditionType.MAIN?this.filter:this.filterCondition;return i?this.checkIndividualFilter(e,n,i):t===c.FilterConditionType.MAIN||"AND"===this.conditionValue},u.prototype.checkIndividualFilter=function(e,t,i){e=this.filterParams.valueGetter(e.node);if(!e)return t===c.BaseFilter.NOT_EQUAL||t===c.BaseFilter.NOT_CONTAINS;e=this.formatter(e);return this.comparator(t,e,i)},u.prototype.onFilterTextFieldChanged=function(e){var t,i=(e===c.FilterConditionType.MAIN?this.eFilterTextField:this.eFilterConditionTextField).value,n=e===c.FilterConditionType.MAIN?this.filterText:this.filterConditionText,i=l.Utils.makeNull(i);n!==(i=i&&""===i.trim()?null:i)&&(t=i&&1!=this.filterParams.caseSensitive?i.toLowerCase():i,n=n&&1!=this.filterParams.caseSensitive?n.toLowerCase():n,e===c.FilterConditionType.MAIN?this.filterText=this.formatter(i):this.filterConditionText=this.formatter(i),n!==t&&this.onFilterChanged())},u.prototype.setFilter=function(e,t){e=l.Utils.makeNull(e),t===c.FilterConditionType.MAIN?e?(this.filterText=this.formatter(e),this.eFilterTextField&&(this.eFilterTextField.value=e)):(this.filterText=null,this.eFilterTextField&&(this.eFilterTextField.value=null)):e?(this.filterConditionText=this.formatter(e),this.eFilterConditionTextField&&(this.eFilterConditionTextField.value=e)):(this.filterConditionText=null,this.eFilterConditionTextField&&(this.eFilterConditionTextField.value=null))},u.prototype.getFilter=function(){return this.filterText},u.prototype.resetState=function(){this.setFilter(null,c.FilterConditionType.MAIN),this.setFilterType(this.defaultFilter,c.FilterConditionType.MAIN),this.setFilter(null,c.FilterConditionType.CONDITION),this.setFilterType(this.defaultFilter,c.FilterConditionType.CONDITION)},u.prototype.serialize=function(e){var t=e===c.FilterConditionType.MAIN?this.filter:this.filterCondition,e=e===c.FilterConditionType.MAIN?this.filterText:this.filterConditionText;return{type:t||this.defaultFilter,filter:e,filterType:"text"}},u.prototype.parse=function(e,t){this.setFilterType(e.type,t),this.setFilter(e.filter,t)},u.prototype.setType=function(e,t){this.setFilterType(e,t)},u.DEFAULT_FORMATTER=function(e){return e},u.DEFAULT_LOWERCASE_FORMATTER=function(e){return null==e?null:e.toString().toLowerCase()},u.DEFAULT_COMPARATOR=function(e,t,i){switch(e){case u.CONTAINS:return 0<=t.indexOf(i);case u.NOT_CONTAINS:return-1===t.indexOf(i);case u.EQUALS:return t===i;case u.NOT_EQUAL:return t!=i;case u.STARTS_WITH:return 0===t.indexOf(i);case u.ENDS_WITH:var n=t.lastIndexOf(i);return 0<=n&&n===t.length-i.length;default:return console.warn("invalid filter type "+e),!1}},s([i.QuerySelector("#filterText"),a("design:type",HTMLInputElement)],u.prototype,"eFilterTextField",void 0),s([i.QuerySelector("#filterConditionText"),a("design:type",HTMLInputElement)],u.prototype,"eFilterConditionTextField",void 0),u);function u(){return null!==o&&o.apply(this,arguments)||this}t.TextFilter=r},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),c=i(11),u=i(51),i=(o=u.ScalarBaseFilter,r(d,o),d.prototype.modelFromFloatingFilter=function(e){return{type:this.filter,filter:Number(e),filterTo:this.filterNumberTo,filterType:"number"}},d.prototype.getApplicableFilterTypes=function(){return[u.BaseFilter.EQUALS,u.BaseFilter.NOT_EQUAL,u.BaseFilter.LESS_THAN,u.BaseFilter.LESS_THAN_OR_EQUAL,u.BaseFilter.GREATER_THAN,u.BaseFilter.GREATER_THAN_OR_EQUAL,u.BaseFilter.IN_RANGE]},d.prototype.bodyTemplate=function(e){var t=this.translate.bind(this),i=e==u.FilterConditionType.MAIN?"filterText":"filterConditionText",n=e==u.FilterConditionType.MAIN?"filterNumberToPanel":"filterNumberToPanelCondition",e=e==u.FilterConditionType.MAIN?"filterToText":"filterToConditionText";return'<div class="ag-filter-body">\n            <div>\n                <input class="ag-filter-filter" id="'+i+'" type="text" placeholder="'+t("filterOoo")+'"/>\n            </div>\n             <div class="ag-filter-number-to" id="'+n+'">\n                <input class="ag-filter-filter" id="'+e+'" type="text" placeholder="'+t("filterOoo")+'"/>\n            </div>\n        </div>'},d.prototype.initialiseFilterBodyUi=function(e){o.prototype.initialiseFilterBodyUi.call(this,e),e===u.FilterConditionType.MAIN?(this.eFilterTextField=this.queryForHtmlInputElement("#filterText"),this.addFilterChangedEventListeners(e,this.eFilterTextField,this.eFilterToTextField)):(this.eFilterTextConditionField=this.queryForHtmlInputElement("#filterConditionText"),this.addFilterChangedEventListeners(e,this.eFilterTextConditionField,this.eFilterToConditionText),this.setFilter(this.filterNumberCondition,u.FilterConditionType.CONDITION),this.setFilterTo(this.filterNumberConditionTo,u.FilterConditionType.CONDITION),this.setFilterType(this.filterCondition,u.FilterConditionType.CONDITION))},d.prototype.addFilterChangedEventListeners=function(e,t,i){var n=this,o=this.getDebounceMs(this.filterParams),o=l.Utils.debounce(function(){return n.onTextFieldsChanged(e,t,i)},o);this.addDestroyableEventListener(t,"input",o),this.addDestroyableEventListener(i,"input",o)},d.prototype.afterGuiAttached=function(){this.eFilterTextField.focus()},d.prototype.comparator=function(){return function(e,t){return e===t?0:e<t?1:t<e?-1:void 0}},d.prototype.onTextFieldsChanged=function(e,t,i){t=this.stringToFloat(t.value),i=this.stringToFloat(i.value);e===u.FilterConditionType.MAIN?this.filterNumber===t&&this.filterNumberTo===i||(this.filterNumber=t,this.filterNumberTo=i,this.onFilterChanged()):this.filterNumberCondition===t&&this.filterNumberConditionTo===i||(this.filterNumberCondition=t,this.filterNumberConditionTo=i,this.onFilterChanged())},d.prototype.filterValues=function(e){return e===u.FilterConditionType.MAIN?this.filter!==u.BaseFilter.IN_RANGE?this.asNumber(this.filterNumber):[this.asNumber(this.filterNumber),this.asNumber(this.filterNumberTo)]:this.filterCondition!==u.BaseFilter.IN_RANGE?this.asNumber(this.filterNumberCondition):[this.asNumber(this.filterNumberCondition),this.asNumber(this.filterNumberConditionTo)]},d.prototype.asNumber=function(e){return l.Utils.isNumeric(e)?e:null},d.prototype.stringToFloat=function(e){e=l.Utils.makeNull(e);return null!=(e=e&&""===e.trim()?null:e)?parseFloat(e):null},d.prototype.setFilter=function(e,t){null!==(e=l.Utils.makeNull(e))&&"number"!=typeof e&&(e=parseFloat(e)),t===u.FilterConditionType.MAIN?(this.filterNumber=e,this.eFilterTextField&&(this.eFilterTextField.value=e)):(this.filterNumberCondition=e,this.eFilterTextConditionField&&(this.eFilterTextConditionField.value=e))},d.prototype.setFilterTo=function(e,t){null!==(e=l.Utils.makeNull(e))&&"number"!=typeof e&&(e=parseFloat(e)),t===u.FilterConditionType.MAIN?(this.filterNumberTo=e,this.eFilterToTextField&&(this.eFilterToTextField.value=e)):(this.filterNumberConditionTo=e,this.eFilterToConditionText&&(this.eFilterToConditionText.value=e))},d.prototype.getFilter=function(e){return e===u.FilterConditionType.MAIN?this.filterNumber:this.filterNumberCondition},d.prototype.serialize=function(e){var t=e===u.FilterConditionType.MAIN?this.filter:this.filterCondition,i=e===u.FilterConditionType.MAIN?this.filterNumber:this.filterNumberCondition,e=e===u.FilterConditionType.MAIN?this.filterNumberTo:this.filterNumberConditionTo;return{type:t||this.defaultFilter,filter:i,filterTo:e,filterType:"number"}},d.prototype.parse=function(e,t){this.setFilterType(e.type,t),this.setFilter(e.filter,t),this.setFilterTo(e.filterTo,t)},d.prototype.refreshFilterBodyUi=function(e){var t=e===u.FilterConditionType.MAIN?this.filter:this.filterCondition,e=e===u.FilterConditionType.MAIN?this.eNumberToPanel:this.eNumberToConditionPanel;e&&l.Utils.setVisible(e,t===d.IN_RANGE)},d.prototype.resetState=function(){this.setFilterType(this.defaultFilter,u.FilterConditionType.MAIN),this.setFilter(null,u.FilterConditionType.MAIN),this.setFilterTo(null,u.FilterConditionType.MAIN),this.setFilterType(this.defaultFilter,u.FilterConditionType.CONDITION),this.setFilter(null,u.FilterConditionType.CONDITION),this.setFilterTo(null,u.FilterConditionType.CONDITION)},d.prototype.setType=function(e,t){this.setFilterType(e,t)},d.LESS_THAN="lessThan",s([c.QuerySelector("#filterNumberToPanel"),a("design:type",HTMLElement)],d.prototype,"eNumberToPanel",void 0),s([c.QuerySelector("#filterNumberToPanelCondition"),a("design:type",HTMLElement)],d.prototype,"eNumberToConditionPanel",void 0),s([c.QuerySelector("#filterToText"),a("design:type",HTMLInputElement)],d.prototype,"eFilterToTextField",void 0),s([c.QuerySelector("#filterToConditionText"),a("design:type",HTMLInputElement)],d.prototype,"eFilterToConditionText",void 0),d);function d(){return null!==o&&o.apply(this,arguments)||this}t.NumberFilter=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(23),a=i(9),l=i(44),c=i(29),u=i(22),d=i(1),h=i(37),p=i(4),i=i(2),l=(f.prototype.init=function(){this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth()},f.prototype.registerGridComp=function(e){this.gridPanel=e},f.prototype.handlePageScrollingKey=function(e){var t=e.which||e.keyCode,i=e.altKey,n=e.ctrlKey,o=this.mouseEventService.getGridCellForEvent(e).getGridCellDef();if(!o)return!1;var r=!1;switch(t){case a.Constants.KEY_PAGE_HOME:case a.Constants.KEY_PAGE_END:n||i||(this.onHomeOrEndKey(t),r=!0);break;case a.Constants.KEY_LEFT:case a.Constants.KEY_RIGHT:n&&!i&&(this.onCtrlLeftOrRight(t,o),r=!0);break;case a.Constants.KEY_UP:case a.Constants.KEY_DOWN:n&&!i&&(this.onCtrlUpOrDown(t,o),r=!0);break;case a.Constants.KEY_PAGE_DOWN:n||i||(this.onPageDown(o),r=!0);break;case a.Constants.KEY_PAGE_UP:n||i||(this.onPageUp(o),r=!0)}return r&&e.preventDefault(),r},f.prototype.onPageDown=function(e){var t=this.gridPanel.getVScrollPosition(),i=t.bottom-t.top,n=(this.gridPanel.isHorizontalScrollShowing()&&(i-=this.scrollWidth),this.paginationProxy.getPixelOffset()),t=t.top+i,t=this.paginationProxy.getRowIndexAtPixel(t+n),o=this.paginationProxy.getRow(e.rowIndex).rowTop,o=this.paginationProxy.getRowIndexAtPixel(o+i-n+n),i=this.paginationProxy.getPageLastRow();this.navigateTo(t=i<t?i:t,"top",null,o=i<o?i:o,e.column)},f.prototype.onPageUp=function(e){var t=this.gridPanel.getVScrollPosition(),i=t.bottom-t.top,n=(this.gridPanel.isHorizontalScrollShowing()&&(i-=this.scrollWidth),this.paginationProxy.getPixelOffset()),t=t.top,t=this.paginationProxy.getRowIndexAtPixel(t+n),o=this.paginationProxy.getRow(e.rowIndex),o=o.rowTop+o.rowHeight-i-n,i=this.paginationProxy.getRowIndexAtPixel(o+n),o=this.paginationProxy.getPageFirstRow();this.navigateTo(t=t<o?o:t,"bottom",null,i=i<o?o:i,e.column)},f.prototype.navigateTo=function(e,t,i,n,o){d._.exists(i)&&this.gridPanel.ensureColumnVisible(i),d._.exists(e)&&this.gridPanel.ensureIndexVisible(e,t),this.animationFrameService.flushAllFrames(),this.focusedCellController.setFocusedCell(n,o,null,!0),this.rangeController&&(i=new s.GridCell({rowIndex:n,floating:null,column:o}),this.rangeController.setRangeToCell(i))},f.prototype.onCtrlUpOrDown=function(e,t){e=e===a.Constants.KEY_UP?0:this.paginationProxy.getPageLastRow();this.navigateTo(e,null,t.column,e,t.column)},f.prototype.onCtrlLeftOrRight=function(e,t){var e=e===a.Constants.KEY_LEFT,i=this.columnController.getAllDisplayedColumns(),e=e?i[0]:i[i.length-1];this.navigateTo(t.rowIndex,null,e,t.rowIndex,e)},f.prototype.onHomeOrEndKey=function(e){var e=e===a.Constants.KEY_PAGE_HOME,t=this.columnController.getAllDisplayedColumns(),t=e?t[0]:t[t.length-1],e=e?0:this.paginationProxy.getPageLastRow();this.navigateTo(e,null,t,e,t)},n([r.Autowired("mouseEventService"),o("design:type",l.MouseEventService)],f.prototype,"mouseEventService",void 0),n([r.Autowired("paginationProxy"),o("design:type",c.PaginationProxy)],f.prototype,"paginationProxy",void 0),n([r.Autowired("focusedCellController"),o("design:type",u.FocusedCellController)],f.prototype,"focusedCellController",void 0),n([r.Autowired("animationFrameService"),o("design:type",h.AnimationFrameService)],f.prototype,"animationFrameService",void 0),n([r.Optional("rangeController"),o("design:type",Object)],f.prototype,"rangeController",void 0),n([r.Autowired("columnController"),o("design:type",p.ColumnController)],f.prototype,"columnController",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],f.prototype,"gridOptionsWrapper",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],f.prototype,"init",null),n([r.Bean("navigationService")],f));function f(){}t.NavigationService=l},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),s=i(2),a=i(0),l=i(15),c=i(4),u=i(3),d=i(5),h=i(99),p=i(101),f=i(10),i=i(36);function g(e,t,i){this.headerRowComps=[],this.eContainer=e,this.pinned=i,this.eViewport=t}g.prototype.registerGridComp=function(e){this.setupDragAndDrop(e)},g.prototype.forEachHeaderElement=function(t){this.headerRowComps.forEach(function(e){return e.forEachHeaderElement(t)})},g.prototype.init=function(){this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth(),this.eventService.addEventListener(d.Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.eventService.addEventListener(d.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.eventService.addEventListener(d.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.eventService.addEventListener(d.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.eventService.addEventListener(d.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.eventService.addEventListener(d.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this))},g.prototype.onColumnRowGroupChanged=function(){this.onGridColumnsChanged()},g.prototype.onColumnValueChanged=function(){this.onGridColumnsChanged()},g.prototype.onColumnResized=function(){this.setWidthOfPinnedContainer()},g.prototype.onDisplayedColumnsChanged=function(){this.setWidthOfPinnedContainer()},g.prototype.onScrollVisibilityChanged=function(){this.setWidthOfPinnedContainer()},g.prototype.setWidthOfPinnedContainer=function(){var e=this.pinned===f.Column.PINNED_LEFT,t=this.pinned===f.Column.PINNED_RIGHT;(e||t)&&(t=e?this.columnController.getPinnedLeftContainerWidth():this.columnController.getPinnedRightContainerWidth(),(e?this.scrollVisibleService.isLeftVerticalScrollShowing():this.scrollVisibleService.isRightVerticalScrollShowing())&&(t+=this.scrollWidth),this.eContainer.style.width=t+"px")},g.prototype.destroy=function(){this.removeHeaderRowComps()},g.prototype.onGridColumnsChanged=function(){this.removeHeaderRowComps(),this.createHeaderRowComps()},g.prototype.refresh=function(){this.onGridColumnsChanged()},g.prototype.setupDragAndDrop=function(e){var t=this.eViewport||this.eContainer,t=new p.BodyDropTarget(this.pinned,t);this.context.wireBean(t),t.registerGridComp(e)},g.prototype.removeHeaderRowComps=function(){this.headerRowComps.forEach(function(e){e.destroy()}),this.headerRowComps.length=0,r.Utils.removeAllChildren(this.eContainer)},g.prototype.createHeaderRowComps=function(){for(var e=this.columnController.getHeaderRowCount(),t=0;t<e;t++){var i=t!==e-1?h.HeaderRowType.COLUMN_GROUP:h.HeaderRowType.COLUMN,n=new h.HeaderRowComp(t,i,this.pinned,this.dropTarget);this.context.wireBean(n),this.headerRowComps.push(n),this.eContainer.appendChild(n.getGui())}this.gridOptionsWrapper.isFloatingFilter()&&!this.columnController.isPivotMode()&&(n=new h.HeaderRowComp(e,h.HeaderRowType.FLOATING_FILTER,this.pinned,this.dropTarget),this.context.wireBean(n),this.headerRowComps.push(n),this.eContainer.appendChild(n.getGui()))},n([a.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],g.prototype,"gridOptionsWrapper",void 0),n([a.Autowired("context"),o("design:type",a.Context)],g.prototype,"context",void 0),n([a.Autowired("$scope"),o("design:type",Object)],g.prototype,"$scope",void 0),n([a.Autowired("dragAndDropService"),o("design:type",l.DragAndDropService)],g.prototype,"dragAndDropService",void 0),n([a.Autowired("columnController"),o("design:type",c.ColumnController)],g.prototype,"columnController",void 0),n([a.Autowired("eventService"),o("design:type",u.EventService)],g.prototype,"eventService",void 0),n([a.Autowired("scrollVisibleService"),o("design:type",i.ScrollVisibleService)],g.prototype,"scrollVisibleService",void 0),n([a.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],g.prototype,"init",null),t.HeaderContainer=g},function(e,t,i){"use strict";var n,o,r,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),u=i(0),d=i(2),h=i(4),p=i(10),f=i(3),g=i(5),m=i(1),v=i(100),y=i(133),b=i(18),w=i(21),i=i(6),C=((C=o=t.HeaderRowType||(t.HeaderRowType={}))[C.COLUMN_GROUP=0]="COLUMN_GROUP",C[C.COLUMN=1]="COLUMN",C[C.FLOATING_FILTER=2]="FLOATING_FILTER",r=c.Component,s(_,r),_.prototype.forEachHeaderElement=function(t){var i=this;Object.keys(this.headerComps).forEach(function(e){t(i.headerComps[e])})},_.prototype.destroy=function(){var e=Object.keys(this.headerComps);this.removeAndDestroyChildComponents(e),r.prototype.destroy.call(this)},_.prototype.removeAndDestroyChildComponents=function(e){var i=this;e.forEach(function(e){var t=i.headerComps[e];i.getGui().removeChild(t.getGui()),t.destroy&&t.destroy(),delete i.headerComps[e]})},_.prototype.onRowHeightChanged=function(){for(var e,t=this.columnController.getHeaderRowCount(),i=[],n=0,o=this.columnController.isPivotMode()?(n=0,e=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),this.gridOptionsWrapper.getPivotHeaderHeight()):(this.gridOptionsWrapper.isFloatingFilter()&&t++,n=this.gridOptionsWrapper.isFloatingFilter()?1:0,e=this.gridOptionsWrapper.getGroupHeaderHeight(),this.gridOptionsWrapper.getHeaderHeight()),r=t-(1+n),s=0;s<r;s++)i.push(e);i.push(o);for(s=0;s<n;s++)i.push(this.gridOptionsWrapper.getFloatingFiltersHeight());for(var a=0,s=0;s<this.dept;s++)a+=i[s];this.getGui().style.top=a+"px",this.getGui().style.height=i[this.dept]+"px"},_.prototype.init=function(){this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addDestroyableEventListener(this.gridOptionsWrapper,d.GridOptionsWrapper.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,d.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,d.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,d.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,d.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this))},_.prototype.onColumnResized=function(){this.setWidth()},_.prototype.setWidth=function(){var e=this.columnController.getContainerWidth(this.pinned)+"px";this.getGui().style.width=e},_.prototype.onGridColumnsChanged=function(){this.removeAndDestroyAllChildComponents()},_.prototype.removeAndDestroyAllChildComponents=function(){var e=Object.keys(this.headerComps);this.removeAndDestroyChildComponents(e)},_.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth()},_.prototype.onVirtualColumnsChanged=function(){var s,a=this,l=Object.keys(this.headerComps),e=this.columnController.getVirtualHeaderGroupRow(this.pinned,this.type==o.FLOATING_FILTER?this.dept-1:this.dept),c=this.gridOptionsWrapper.isEnsureDomOrder();e.forEach(function(e){var t,i,n,o,r;e.isEmptyGroup()||(t=e.getUniqueId(),i=a.getGui(),n=0<=l.indexOf(t),s=(n?(m.Utils.removeFromArray(l,t),r=(o=a.headerComps[t]).getGui(),c&&m.Utils.ensureDomOrder(i,r,s)):(o=a.createHeaderComp(e),r=(a.headerComps[t]=o).getGui(),c?m.Utils.insertWithDomOrder(i,r,s):i.appendChild(r)),r))}),this.removeAndDestroyChildComponents(l)},_.prototype.createHeaderComp=function(e){switch(this.type){case o.COLUMN:t=new v.HeaderWrapperComp(e,this.dropTarget,this.pinned);break;case o.COLUMN_GROUP:t=new y.HeaderGroupWrapperComp(e,this.dropTarget,this.pinned);break;case o.FLOATING_FILTER:var t=this.createFloatingFilterWrapper(e)}return this.context.wireBean(t),t},_.prototype.createFloatingFilterWrapper=function(t){var i=this,e=this.createFloatingFilterParams(t),n=this.componentRecipes.newFloatingFilterWrapperComponent(t,e);return this.addDestroyableEventListener(t,p.Column.EVENT_FILTER_CHANGED,function(){var e=i.filterManager.getFilterComponent(t);n.onParentModelChanged(e.resolveNow(null,function(e){return e.getModel()}))}),this.filterManager.cachedFilter(t)&&(e=this.filterManager.getFilterComponent(t),n.onParentModelChanged(e.resolveNow(null,function(e){return e.getModel()}))),n},_.prototype.createFloatingFilterParams=function(t){var o=this;return{api:this.gridApi,column:t,currentParentModel:function(){var e=o.filterManager.getFilterComponent(t).resolveNow(null,function(e){return e.getNullableModel?e.getNullableModel():e.getModel()});return null!=e.operator?e.condition1:e},onFloatingFilterChanged:function(i){var n,e=new m.Promise(function(e){n=e});return o.filterManager.getFilterComponent(t).then(function(e){var t;e.onFloatingFilterChanged?(t=e.onFloatingFilterChanged(i),n(t)):(e.setModel(i),o.filterManager.onFilterChanged(),n(!0))}),e.resolveNow(!0,function(e){return e})},suppressFilterButton:!1}},a([u.Autowired("gridOptionsWrapper"),l("design:type",d.GridOptionsWrapper)],_.prototype,"gridOptionsWrapper",void 0),a([u.Autowired("gridApi"),l("design:type",i.GridApi)],_.prototype,"gridApi",void 0),a([u.Autowired("columnController"),l("design:type",h.ColumnController)],_.prototype,"columnController",void 0),a([u.Autowired("context"),l("design:type",u.Context)],_.prototype,"context",void 0),a([u.Autowired("eventService"),l("design:type",f.EventService)],_.prototype,"eventService",void 0),a([u.Autowired("filterManager"),l("design:type",b.FilterManager)],_.prototype,"filterManager",void 0),a([u.Autowired("componentRecipes"),l("design:type",w.ComponentRecipes)],_.prototype,"componentRecipes",void 0),a([u.PostConstruct,l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],_.prototype,"init",null),_);function _(e,t,i,n){var o=r.call(this,'<div class="ag-header-row" role="presentation"/>')||this;return o.headerComps={},o.dept=e,o.type=t,o.pinned=i,o.dropTarget=n,o}t.HeaderRowComp=C},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(0),u=i(10),d=i(1),h=i(15),p=i(7),f=i(4),g=i(59),m=i(2),v=i(81),y=i(52),b=i(6),w=i(24),C=i(3),_=i(21),A=i(60),E=i(11),x=i(132),S=i(5),T=i(45),k=i(28),D=i(74),R=i(46),i=(o=l.Component,r(O,o),O.prototype.getColumn=function(){return this.column},O.prototype.init=function(){this.instantiate(this.context);var e=this.columnController.getDisplayNameForColumn(this.column,"header",!0),t=this.gridOptionsWrapper.isEnableSorting()&&!this.column.getColDef().suppressSorting,i=this.menuFactory.isMenuEnabled(this.column)&&!this.column.getColDef().suppressMenu,e=(this.appendHeaderComp(e,t,i),this.setupWidth(),this.setupMovingCss(),this.setupTooltip(),this.setupResize(),this.setupMenuClass(),this.setupSortableClass(t),this.addColumnHoverListener(),this.addFeature(this.context,new D.HoverFeature([this.column],this.getGui())),this.addDestroyableEventListener(this.column,u.Column.EVENT_FILTER_ACTIVE_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged(),this.addFeature(this.context,new x.SelectAllFeature(this.cbSelectAll,this.column)),new y.SetLeftFeature(this.column,this.getGui(),this.beans));e.init(),this.addDestroyFunc(e.destroy.bind(e)),this.addAttributes(),v.CssClassApplier.addHeaderClassesFromColDef(this.column.getColDef(),this.getGui(),this.gridOptionsWrapper,this.column,null)},O.prototype.addColumnHoverListener=function(){this.addDestroyableEventListener(this.eventService,S.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this)),this.onColumnHover()},O.prototype.onColumnHover=function(){var e=this.columnHoverService.isHovered(this.column);d.Utils.addOrRemoveCssClass(this.getGui(),"ag-column-hover",e)},O.prototype.setupSortableClass=function(e){e&&(e=this.getGui(),d.Utils.addCssClass(e,"ag-header-cell-sortable"))},O.prototype.onFilterChanged=function(){var e=this.column.isFilterActive();d.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-filtered",e)},O.prototype.appendHeaderComp=function(e,t,i){var n=this,t={column:this.column,displayName:e,enableSorting:t,enableMenu:i,showColumnMenu:function(e){n.gridApi.showColumnMenuAfterButtonClick(n.column,e)},progressSort:function(e){n.sortController.progressSort(n.column,!!e,"uiColumnSorted")},setSort:function(e,t){n.sortController.setSortForColumn(n.column,e,!!t,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},i=this.afterHeaderCompCreated.bind(this,e);this.componentRecipes.newHeaderComponent(t).then(i)},O.prototype.afterHeaderCompCreated=function(e,t){this.appendChild(t),this.setupMove(t.getGui(),e),t.destroy&&this.addDestroyFunc(t.destroy.bind(t))},O.prototype.onColumnMovingChanged=function(){this.column.isMoving()?d.Utils.addCssClass(this.getGui(),"ag-header-cell-moving"):d.Utils.removeCssClass(this.getGui(),"ag-header-cell-moving")},O.prototype.setupMove=function(e,t){var i,n=this;this.gridOptionsWrapper.isSuppressMovableColumns()||this.column.getColDef().suppressMovable||this.column.isLockPosition()||e&&(i={type:h.DragSourceType.HeaderCell,eElement:e,dragItemCallback:function(){return n.createDragItem()},dragItemName:t,dragSourceDropTarget:this.dragSourceDropTarget,dragStarted:function(){return n.column.setMoving(!0,"uiColumnMoved")},dragStopped:function(){return n.column.setMoving(!1,"uiColumnMoved")}},this.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc(function(){return n.dragAndDropService.removeDragSource(i)}))},O.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},O.prototype.setupResize=function(){var e,t=this,i=this.column.getColDef();this.eResize&&(this.column.isResizable()?(e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)}),this.addDestroyFunc(e),this.gridOptionsWrapper.isSuppressAutoSize()||i.suppressAutoSize||(this.addDestroyableEventListener(this.eResize,"dblclick",function(){t.columnController.autoSizeColumn(t.column,"uiColumnResized")}),e=new R.TouchListener(this.eResize),this.addDestroyableEventListener(e,R.TouchListener.EVENT_DOUBLE_TAP,function(){t.columnController.autoSizeColumn(t.column,"uiColumnResized")}),this.addDestroyFunc(e.destroy.bind(e)))):d.Utils.removeFromParent(this.eResize))},O.prototype.onResizing=function(e,t){t=this.normaliseResizeAmount(t),t=this.resizeStartWidth+t;this.columnController.setColumnWidth(this.column,t,this.resizeWithShiftKey,e,"uiColumnDragged")},O.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e},O.prototype.setupTooltip=function(){var e=this.column.getColDef();e.headerTooltip&&(this.getGui().title=e.headerTooltip)},O.prototype.setupMovingCss=function(){this.addDestroyableEventListener(this.column,u.Column.EVENT_MOVING_CHANGED,this.onColumnMovingChanged.bind(this)),this.onColumnMovingChanged()},O.prototype.addAttributes=function(){this.getGui().setAttribute("col-id",this.column.getColId())},O.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,u.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this)),this.onColumnWidthChanged()},O.prototype.setupMenuClass=function(){this.addDestroyableEventListener(this.column,u.Column.EVENT_MENU_VISIBLE_CHANGED,this.onMenuVisible.bind(this)),this.onColumnWidthChanged()},O.prototype.onMenuVisible=function(){this.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())},O.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"},O.prototype.normaliseResizeAmount=function(e){return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==u.Column.PINNED_LEFT&&(e*=-1):this.pinned===u.Column.PINNED_RIGHT&&(e*=-1),e},O.TEMPLATE='<div class="ag-header-cell" role="presentation" ><div ref="eResize" class="ag-header-cell-resize" role="presentation"></div><ag-checkbox ref="cbSelectAll" class="ag-header-select-all" role="presentation"></ag-checkbox></div>',s([c.Autowired("gridOptionsWrapper"),a("design:type",m.GridOptionsWrapper)],O.prototype,"gridOptionsWrapper",void 0),s([c.Autowired("dragAndDropService"),a("design:type",h.DragAndDropService)],O.prototype,"dragAndDropService",void 0),s([c.Autowired("columnController"),a("design:type",f.ColumnController)],O.prototype,"columnController",void 0),s([c.Autowired("horizontalResizeService"),a("design:type",g.HorizontalResizeService)],O.prototype,"horizontalResizeService",void 0),s([c.Autowired("context"),a("design:type",c.Context)],O.prototype,"context",void 0),s([c.Autowired("menuFactory"),a("design:type",Object)],O.prototype,"menuFactory",void 0),s([c.Autowired("gridApi"),a("design:type",b.GridApi)],O.prototype,"gridApi",void 0),s([c.Autowired("columnApi"),a("design:type",p.ColumnApi)],O.prototype,"columnApi",void 0),s([c.Autowired("sortController"),a("design:type",w.SortController)],O.prototype,"sortController",void 0),s([c.Autowired("eventService"),a("design:type",C.EventService)],O.prototype,"eventService",void 0),s([c.Autowired("componentRecipes"),a("design:type",_.ComponentRecipes)],O.prototype,"componentRecipes",void 0),s([c.Autowired("columnHoverService"),a("design:type",T.ColumnHoverService)],O.prototype,"columnHoverService",void 0),s([c.Autowired("beans"),a("design:type",k.Beans)],O.prototype,"beans",void 0),s([E.RefSelector("eResize"),a("design:type",HTMLElement)],O.prototype,"eResize",void 0),s([E.RefSelector("cbSelectAll"),a("design:type",A.AgCheckbox)],O.prototype,"cbSelectAll",void 0),s([c.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],O.prototype,"init",null),O);function O(e,t,i){var n=o.call(this,O.TEMPLATE)||this;return n.column=e,n.dragSourceDropTarget=t,n.pinned=i,n}t.HeaderWrapperComp=i},function(e,t,i){"use strict";var n,o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(15)),a=i(0),l=i(102),c=i(10),u=i(103),i=i(4),d=((d=n=n||{})[d.ColumnMove=0]="ColumnMove",d[d.Pivot=1]="Pivot",h.prototype.registerGridComp=function(e){switch(this.gridPanel=e,this.moveColumnController.registerGridComp(e),this.pinned){case c.Column.PINNED_LEFT:this.eSecondaryContainers=this.gridPanel.getDropTargetLeftContainers();break;case c.Column.PINNED_RIGHT:this.eSecondaryContainers=this.gridPanel.getDropTargetRightContainers();break;default:this.eSecondaryContainers=this.gridPanel.getDropTargetBodyContainers()}},h.prototype.isInterestedIn=function(e){return e===s.DragSourceType.HeaderCell||e===s.DragSourceType.ToolPanel},h.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},h.prototype.getContainer=function(){return this.eContainer},h.prototype.init=function(){this.moveColumnController=new l.MoveColumnController(this.pinned,this.eContainer),this.context.wireBean(this.moveColumnController);var e=new u.BodyDropPivotTarget(this.pinned);this.context.wireBean(e),this.dropListeners[n.ColumnMove]=this.moveColumnController,this.dropListeners[n.Pivot]=e,this.dragAndDropService.addDropTarget(this)},h.prototype.getIconName=function(){return this.currentDropListener.getIconName()},h.prototype.getDropType=function(e){return this.columnController.isPivotMode()&&e.dragSource.type===s.DragSourceType.ToolPanel?n.Pivot:n.ColumnMove},h.prototype.onDragEnter=function(e){var t=this.getDropType(e);this.currentDropListener=this.dropListeners[t],this.currentDropListener.onDragEnter(e)},h.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)},h.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)},h.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)},o([a.Autowired("context"),r("design:type",a.Context)],h.prototype,"context",void 0),o([a.Autowired("dragAndDropService"),r("design:type",s.DragAndDropService)],h.prototype,"dragAndDropService",void 0),o([a.Autowired("columnController"),r("design:type",i.ColumnController)],h.prototype,"columnController",void 0),o([a.PostConstruct,r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",void 0)],h.prototype,"init",null),h);function h(e,t){this.dropListeners={},this.pinned=e,this.eContainer=t}t.BodyDropTarget=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(12),a=i(4),l=i(10),m=i(1),h=i(15),i=i(2);function c(e,t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.pinned=e,this.eContainer=t,this.centerContainer=!m.Utils.exists(e)}c.prototype.registerGridComp=function(e){this.gridPanel=e},c.prototype.init=function(){this.logger=this.loggerFactory.create("MoveColumnController")},c.prototype.getIconName=function(){return this.pinned?h.DragAndDropService.ICON_PINNED:h.DragAndDropService.ICON_MOVE},c.prototype.onDragEnter=function(e){var t,i,n=e.dragItem.columns;e.dragSource.type===h.DragSourceType.ToolPanel?this.setColumnsVisible(n,!0,"uiColumnDragged"):(t=e.dragItem.visibleState,i=n.filter(function(e){return t[e.getId()]}),this.setColumnsVisible(i,!0,"uiColumnDragged")),this.setColumnsPinned(n,this.pinned,"uiColumnDragged"),this.onDragging(e,!0)},c.prototype.onDragLeave=function(e){this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()||e.fromNudge||(e=e.dragSource.dragItemCallback().columns,this.setColumnsVisible(e,!1,"uiColumnDragged")),this.ensureIntervalCleared()},c.prototype.setColumnsVisible=function(e,t,i){void 0===i&&(i="api"),e&&(e=e.filter(function(e){return!e.isLockVisible()}),this.columnController.setColumnsVisible(e,t,i))},c.prototype.setColumnsPinned=function(e,t,i){void 0===i&&(i="api"),e&&(e=e.filter(function(e){return!e.isLockPinned()}),this.columnController.setColumnsPinned(e,t,i))},c.prototype.onDragStop=function(){this.ensureIntervalCleared()},c.prototype.normaliseX=function(e){return this.gridOptionsWrapper.isEnableRtl()&&(e=this.eContainer.clientWidth-e),this.centerContainer&&(e+=this.gridPanel.getBodyViewportScrollLeft()),e},c.prototype.checkCenterForScrolling=function(e){var t,i;this.centerContainer&&(i=(t=this.gridPanel.getBodyViewportScrollLeft())+this.gridPanel.getCenterWidth(),this.gridOptionsWrapper.isEnableRtl()?(this.needToMoveRight=e<t+50,this.needToMoveLeft=i-50<e):(this.needToMoveLeft=e<t+50,this.needToMoveRight=i-50<e),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared())},c.prototype.onDragging=function(e,t){var i,n,o,r=this;void 0===t&&(t=!1),this.lastDraggingEvent=e,m.Utils.missing(e.hDirection)||(i=this.normaliseX(e.x),t||this.checkCenterForScrolling(i),n=this.normaliseDirection(e.hDirection),o=e.dragSource.type,e=(e=e.dragSource.dragItemCallback().columns).filter(function(e){return!e.isLockPinned()||e.getPinned()==r.pinned}),this.attemptMoveColumns(o,e,n,i,t))},c.prototype.normaliseDirection=function(e){if(!this.gridOptionsWrapper.isEnableRtl())return e;switch(e){case h.HDirection.Left:return h.HDirection.Right;case h.HDirection.Right:return h.HDirection.Left;default:console.error("ag-Grid: Unknown direction "+e)}},c.prototype.calculateOldIndex=function(e){var t=this.columnController.getAllGridColumns(),i=[],e=(e.forEach(function(e){return i.push(t.indexOf(e))}),m.Utils.sortNumberArray(i),i[0]);return i[i.length-1]-e!=i.length-1?null:e},c.prototype.attemptMoveColumns=function(e,t,i,n,o){for(var r=i===h.HDirection.Left,s=i===h.HDirection.Right,a=this.calculateValidMoves(t,s,n),l=this.calculateOldIndex(t),c=0;c<a.length;c++){var u=a[c],d=null!==l&&!o;if(d=e==h.DragSourceType.HeaderCell?null!==l:d){if(r&&l<=u)continue;if(s&&u<=l)continue}if(this.columnController.doesMovePassRules(t,u))return void this.columnController.moveColumns(t,u,"uiColumnDragged")}},c.prototype.calculateValidMoves=function(t,e,i){function n(e){return t.indexOf(e)<0}var o,r=this.columnController.getDisplayedColumns(this.pinned),s=this.columnController.getAllGridColumns(),a=r.filter(function(e){return 0<=t.indexOf(e)}),l=r.filter(n),c=s.filter(n),u=0,d=i;e&&(o=0,a.forEach(function(e){return o+=e.getActualWidth()}),d-=o);for(var h,p=0;p<l.length;p++){if((d-=l[p].getActualWidth())<0)break;u++}e&&u++;for(var f=[h=0<u?(i=l[u-1],c.indexOf(i)+1):0],g=s[h];m.Utils.exists(g)&&this.isColumnHidden(r,g);)f.push(++h),g=s[h];return f},c.prototype.isColumnHidden=function(e,t){return e.indexOf(t)<0},c.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(h.DragAndDropService.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(h.DragAndDropService.ICON_RIGHT,!0))},c.prototype.ensureIntervalCleared=function(){this.moveInterval&&(clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(h.DragAndDropService.ICON_MOVE))},c.prototype.moveInterval=function(){var e,t;this.intervalCount++,100<(e=10+5*this.intervalCount)&&(e=100),this.needToMoveLeft?t=this.gridPanel.scrollHorizontally(-e):this.needToMoveRight&&(t=this.gridPanel.scrollHorizontally(e)),0!==t?(this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0):(this.failedMoveAttempts++,0<(e=this.lastDraggingEvent.dragItem.columns.filter(function(e){return!e.isLockPinned()})).length&&(this.dragAndDropService.setGhostIcon(h.DragAndDropService.ICON_PINNED),7<this.failedMoveAttempts&&(t=this.needToMoveLeft?l.Column.PINNED_LEFT:l.Column.PINNED_RIGHT,this.setColumnsPinned(e,t,"uiColumnDragged"),this.dragAndDropService.nudge())))},n([r.Autowired("loggerFactory"),o("design:type",s.LoggerFactory)],c.prototype,"loggerFactory",void 0),n([r.Autowired("columnController"),o("design:type",a.ColumnController)],c.prototype,"columnController",void 0),n([r.Autowired("dragAndDropService"),o("design:type",h.DragAndDropService)],c.prototype,"dragAndDropService",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],c.prototype,"gridOptionsWrapper",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],c.prototype,"init",null),t.MoveColumnController=c},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(15)),s=i(4),a=i(0),i=i(2);function l(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}l.prototype.onDragEnter=function(e){var t=this;this.clearColumnsList(),this.gridOptionsWrapper.isFunctionsReadOnly()||e.dragItem.columns.forEach(function(e){!e.isPrimary()||e.isAnyFunctionActive()||(e.isAllowValue()?t.columnsToAggregate.push(e):e.isAllowRowGroup()?t.columnsToGroup.push(e):e.isAllowRowGroup()&&t.columnsToPivot.push(e))})},l.prototype.getIconName=function(){return 0<this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length?this.pinned?r.DragAndDropService.ICON_PINNED:r.DragAndDropService.ICON_MOVE:null},l.prototype.onDragLeave=function(e){this.clearColumnsList()},l.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},l.prototype.onDragging=function(e){},l.prototype.onDragStop=function(e){0<this.columnsToAggregate.length&&this.columnController.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),0<this.columnsToGroup.length&&this.columnController.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),0<this.columnsToPivot.length&&this.columnController.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},n([a.Autowired("columnController"),o("design:type",s.ColumnController)],l.prototype,"columnController",void 0),n([a.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],l.prototype,"gridOptionsWrapper",void 0),t.BodyDropPivotTarget=l},function(e,t,i){"use strict";var o,n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),a=i(10),l=i(2),c=i(1),u=i(4),i=i(38),l=((o=d).prototype.createAutoGroupColumns=function(e){var i=this,n=[],t=this.gridOptionsWrapper.isTreeData(),o=this.gridOptionsWrapper.isGroupMultiAutoColumn();return t&&o&&(console.log("ag-Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data"),o=!1),o?e.forEach(function(e,t){n.push(i.createOneAutoGroupColumn(e,t))}):n.push(this.createOneAutoGroupColumn(null)),n},d.prototype.createOneAutoGroupColumn=function(e,t){var i=this.generateDefaultColDef(e),e=e?o.GROUP_AUTO_COLUMN_ID+"-"+e.getId():o.GROUP_AUTO_COLUMN_BUNDLE_ID,n=this.gridOptionsWrapper.getAutoGroupColumnDef(),n=(c._.mergeDeep(i,n),(i=this.balancedColumnTreeBuilder.mergeColDefs(i)).colId=e,this.gridOptionsWrapper.isTreeData()||c._.missing(i.field)&&c._.missing(i.valueGetter)&&c._.missing(i.filterValueGetter)&&(i.suppressFilter=!0),0<t&&(i.headerCheckboxSelection=!1),new a.Column(i,e,!0));return this.context.wireBean(n),n},d.prototype.generateDefaultColDef=function(e){var t,i={headerName:this.gridOptionsWrapper.getLocaleTextFunc()("group","Group"),cellRenderer:"agGroupCellRenderer"};return e?(t=e.getColDef(),c._.assign(i,{headerName:this.columnController.getDisplayNameForColumn(e,"header"),headerValueGetter:t.headerValueGetter}),t.cellRenderer&&c._.assign(i,{cellRendererParams:{innerRenderer:t.cellRenderer,innerRendererParams:t.cellRendererParams}}),i.showRowGroup=e.getColId()):i.showRowGroup=!0,i},d.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",d.GROUP_AUTO_COLUMN_BUNDLE_ID=o.GROUP_AUTO_COLUMN_ID,n([s.Autowired("gridOptionsWrapper"),r("design:type",l.GridOptionsWrapper)],d.prototype,"gridOptionsWrapper",void 0),n([s.Autowired("context"),r("design:type",s.Context)],d.prototype,"context",void 0),n([s.Autowired("columnController"),r("design:type",u.ColumnController)],d.prototype,"columnController",void 0),n([s.Autowired("balancedColumnTreeBuilder"),r("design:type",i.BalancedColumnTreeBuilder)],d.prototype,"balancedColumnTreeBuilder",void 0),o=n([s.Bean("autoGroupColService")],d));function d(){}t.AutoGroupColService=l},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(9),l=i(1),i=i(2),i=(a.prototype.postConstruct=function(){this.rowModel.getType()===s.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},a.prototype.createTransactionForRowData=function(e){if(l._.missing(this.clientSideRowModel))console.error("ag-Grid: ImmutableService only works with ClientSideRowModel");else{var o,r,s,a=this.gridOptionsWrapper.getRowNodeIdFunc();if(!l._.missing(a))return o={remove:[],update:[],add:[]},r=this.clientSideRowModel.getCopyOfNodesMap(),s={},l._.exists(e)&&e.forEach(function(e,t){var i=a(e),n=r[i];s[i]=t,n?(n.data!==e&&o.update.push(e),r[i]=void 0):o.add.push(e)}),l._.iterateObject(r,function(e,t){t&&o.remove.push(t.data)}),[o,s];console.error("ag-Grid: ImmutableService requires getRowNodeId() callback to be implemented, your row data need IDs!")}},n([r.Autowired("rowModel"),o("design:type",Object)],a.prototype,"rowModel",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],a.prototype,"postConstruct",null),n([r.Bean("immutableService")],a));function a(){}t.ImmutableService=i},function(e,t,i){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.STRING_PROPERTIES=["headerName","columnGroupShow","headerClass","toolPanelClass","headerValueGetter","pivotKeys","groupId","colId","sort","field","type","tooltipField","headerTooltip","cellClass","showRowGroup","template","templateUrl","filter","aggFunc","cellRenderer","cellEditor","pinned"],n.OBJECT_PROPERTIES=["headerGroupComponent","headerGroupComponentFramework","headerGroupComponentParams","cellStyle","cellRendererParams","cellEditorFramework","cellEditorParams","pinnedRowCellRendererFramework","pinnedRowCellRendererParams","filterFramework","filterParams","pivotValueColumn","headerComponent","headerComponentFramework","headerComponentParams","floatingFilterComponent","floatingFilterComponentParams","floatingFilterComponentFramework","refData"],n.ARRAY_PROPERTIES=["children","sortingOrder","allowedAggFuncs","menuTabs","pivotTotalColumnIds","cellClassRules","icons"],n.NUMBER_PROPERTIES=["sortedAt","width","minWidth","maxWidth","rowGroupIndex","pivotIndex"],n.BOOLEAN_PROPERTIES=["suppressCellFlash","suppressToolPanel","openByDefault","marryChildren","hide","rowGroup","pivot","checkboxSelection","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMenu","suppressSorting","suppressMovable","suppressFilter","lockPosition","lockVisible","lockPinned","unSortIcon","suppressSizeToFit","suppressResize","suppressAutoSize","enableRowGroup","enablePivot","enableValue","editable","suppressPaste","suppressNavigable","enableCellChangeFlash","rowDrag","autoHeight"],n.FUNCTION_PROPERTIES=["valueGetter","valueSetter","filterValueGetter","keyCreator","cellRenderer","cellRendererFramework","pinnedRowCellRenderer","valueFormatter","pinnedRowValueFormatter","valueParser","comparator","equals","pivotComparator","suppressKeyboardEvent","colSpan","rowSpan","getQuickFilterText","newValueHandler","onCellValueChanged","onCellClicked","onCellDoubleClicked","onCellContextMenu","tooltip","cellRendererSelector","cellEditorSelector"],n.ALL_PROPERTIES=n.ARRAY_PROPERTIES.concat(n.OBJECT_PROPERTIES).concat(n.STRING_PROPERTIES).concat(n.NUMBER_PROPERTIES).concat(n.FUNCTION_PROPERTIES).concat(n.BOOLEAN_PROPERTIES),t.ColDefUtil=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(1);function n(){this.existingKeys=[]}n.prototype.getUniqueKey=function(e,t){e=o.Utils.toStringOrNull(e);for(var i=0;;){var n=void 0;if(e?(n=e,0!==i&&(n+="_"+i)):t?(n=t,0!==i&&(n+="_"+i)):n=""+i,this.existingKeys.indexOf(n)<0)return this.existingKeys.push(n),n;i++}},t.ColumnKeyCreator=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(18),a=i(1),l=i(35),c=i(2),i=i(3),i=(u.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},u.prototype.showMenuAfterMouseEvent=function(t,i){var n=this;this.showPopup(t,function(e){n.popupService.positionPopupUnderMouseEvent({column:t,type:"columnMenu",mouseEvent:i,ePopup:e})})},u.prototype.showMenuAfterButtonClick=function(t,i){var n=this;this.showPopup(t,function(e){n.popupService.positionPopupUnderComponent({type:"columnMenu",eventSource:i,ePopup:e,keepWithinBounds:!0,column:t})})},u.prototype.showPopup=function(e,t){var i=this,n=this.filterManager.getOrCreateFilterWrapper(e),o=document.createElement("div"),r=(a.Utils.addCssClass(o,"ag-menu"),n.guiPromise.promise.then(function(e){o.appendChild(e)}),function(e){"horizontal"===e.direction&&s()}),s=(this.eventService.addEventListener("bodyScroll",r),this.popupService.addAsModalPopup(o,!0,function(){i.eventService.removeEventListener("bodyScroll",r),e.setMenuVisible(!1,"contextMenu")}));t(o),n.filterPromise.then(function(e){var t;e.afterGuiAttached&&(t={hidePopup:s},e.afterGuiAttached(t))}),this.hidePopup=s,e.setMenuVisible(!0,"contextMenu")},u.prototype.isMenuEnabled=function(e){return this.gridOptionsWrapper.isEnableFilter()&&e.isFilterAllowed()},n([r.Autowired("eventService"),o("design:type",i.EventService)],u.prototype,"eventService",void 0),n([r.Autowired("filterManager"),o("design:type",s.FilterManager)],u.prototype,"filterManager",void 0),n([r.Autowired("popupService"),o("design:type",l.PopupService)],u.prototype,"popupService",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",c.GridOptionsWrapper)],u.prototype,"gridOptionsWrapper",void 0),n([r.Bean("menuFactory")],u));function u(){}t.StandardMenuFactory=i},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(2),a=i(110),i=i(86),s=(l.prototype.execute=function(e){e=e.rowNode;this.gridOptionsWrapper.isEnableServerSideFilter()?this.filterService.filter(e,!1):this.filterService.filterAccordingToColumnState(e),this.selectableService.updateSelectableAfterFiltering(e)},n([r.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],l.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("selectableService"),o("design:type",i.SelectableService)],l.prototype,"selectableService",void 0),n([r.Autowired("filterService"),o("design:type",a.FilterService)],l.prototype,"filterService",void 0),n([r.Bean("filterStage")],l));function l(){}t.FilterStage=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(18),i=i(2),s=(a.prototype.postConstruct=function(){this.doingTreeData=this.gridOptionsWrapper.isTreeData()},a.prototype.filterAccordingToColumnState=function(e){var t=this.filterManager.isAnyFilterPresent();this.filter(e,t)},a.prototype.filter=function(e,t){var i=this;e.hasChildren()?(e.childrenAfterGroup.forEach(function(e){return i.filter(e,t)}),e.childrenAfterFilter=t?e.childrenAfterGroup.filter(function(e){var t=e.childrenAfterFilter&&0<e.childrenAfterFilter.length,e=e.data&&i.filterManager.doesRowPassFilter(e);return t||e}):e.childrenAfterGroup,this.setAllChildrenCount(e)):(e.childrenAfterFilter=e.childrenAfterGroup,e.setAllChildrenCount(null))},a.prototype.setAllChildrenCountTreeData=function(e){var t=0;e.childrenAfterFilter.forEach(function(e){t++,t+=e.allChildrenCount}),e.setAllChildrenCount(t)},a.prototype.setAllChildrenCountGridGrouping=function(e){var t=0;e.childrenAfterFilter.forEach(function(e){e.group?t+=e.allChildrenCount:t++}),e.setAllChildrenCount(t)},a.prototype.setAllChildrenCount=function(e){this.doingTreeData?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)},n([r.Autowired("filterManager"),o("design:type",s.FilterManager)],a.prototype,"filterManager",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],a.prototype,"postConstruct",null),n([r.Bean("filterService")],a));function a(){}t.FilterService=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(2),i=i(112),s=(a.prototype.execute=function(e){this.gridOptionsWrapper.isEnableServerSideSorting()?this.sortService.sort(e.rowNode,null):this.sortService.sortAccordingToColumnsState(e.rowNode)},n([r.Autowired("gridOptionsWrapper"),o("design:type",s.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("sortService"),o("design:type",i.SortService)],a.prototype,"sortService",void 0),n([r.Bean("sortStage")],a));function a(){}t.SortStage=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(24),h=i(1),a=i(16),l=i(2),i=i(4),s=(c.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()},c.prototype.sortAccordingToColumnsState=function(e){var t=this.sortController.getSortForRowController();this.sort(e,t)},c.prototype.sort=function(e,t){var i,n=this;e.childrenAfterSort=e.childrenAfterFilter.slice(0),this.pullDownDataForHideOpenParents(e,!0),h._.exists(t)&&0<t.length&&((i=e.childrenAfterSort.map(function(e,t){return{currentPos:t,rowNode:e}})).sort(this.compareRowNodes.bind(this,t)),e.childrenAfterSort=i.map(function(e){return e.rowNode})),this.updateChildIndexes(e),this.pullDownDataForHideOpenParents(e,!1),e.childrenAfterFilter.forEach(function(e){e.hasChildren()&&n.sort(e,t)}),this.postSortFunc&&this.postSortFunc(e.childrenAfterSort)},c.prototype.compareRowNodes=function(e,t,i){for(var n=t.rowNode,o=i.rowNode,r=0,s=e.length;r<s;r++){var a=e[r],l=-1===a.inverter,c=this.getValue(n,a.column),u=this.getValue(o,a.column),d=void 0;if(0!==(d=a.column.getColDef().comparator?a.column.getColDef().comparator(c,u,n,o,l):h._.defaultComparator(c,u,this.gridOptionsWrapper.isAccentedSort())))return d*a.inverter}return t.currentPos-i.currentPos},c.prototype.getValue=function(e,t){return this.valueService.getValue(t,e)},c.prototype.updateChildIndexes=function(n){h._.missing(n.childrenAfterSort)||n.childrenAfterSort.forEach(function(e,t){var i=t===n.childrenAfterSort.length-1;e.setFirstChild(0===t),e.setLastChild(i),e.setChildIndex(t)})},c.prototype.pullDownDataForHideOpenParents=function(e,n){var o=this;h._.missing(e.childrenAfterSort)||this.gridOptionsWrapper.isGroupHideOpenParents()&&e.childrenAfterSort.forEach(function(i){o.columnController.getGroupDisplayColumns().forEach(function(e){var t=e.getColDef().showRowGroup;"string"!=typeof t?console.error("ag-Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup"):(t=o.columnController.getPrimaryColumn(t))!==i.rowGroupColumn&&(n?i.setGroupValue(e.getId(),null):(t=i.getFirstChildOfFirstChild(t))&&i.setGroupValue(e.getId(),t.key))})})},n([r.Autowired("sortController"),o("design:type",s.SortController)],c.prototype,"sortController",void 0),n([r.Autowired("columnController"),o("design:type",i.ColumnController)],c.prototype,"columnController",void 0),n([r.Autowired("valueService"),o("design:type",a.ValueService)],c.prototype,"valueService",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],c.prototype,"gridOptionsWrapper",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],c.prototype,"init",null),n([r.Bean("sortService")],c));function c(){}t.SortService=s},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s=i(14),g=i(1),a=i(2),l=i(17),c=i(3),i=i(4),a=(u.prototype.execute=function(e){var e=e.rowNode,t=[],i={value:0},n=this.columnController.isPivotMode(),o=n&&e.leafGroup,r=o?[e]:e.childrenAfterSort;return this.resetRowTops(e),this.recursivelyAddToRowsToDisplay(r,t,i,n,0),!o&&this.gridOptionsWrapper.isGroupIncludeTotalFooter()&&(this.ensureFooterNodeExists(e),this.addRowNodeToRowsToDisplay(e.sibling,t,i,0)),t},u.prototype.resetRowTops=function(e){if(e.clearRowTop(),e.hasChildren()){if(e.childrenAfterGroup)for(var t=0;t<e.childrenAfterGroup.length;t++)this.resetRowTops(e.childrenAfterGroup[t]);e.sibling&&e.sibling.clearRowTop()}},u.prototype.recursivelyAddToRowsToDisplay=function(e,t,i,n,o){if(!g.Utils.missingOrEmpty(e))for(var r=this.gridOptionsWrapper.isGroupSuppressRow(),s=this.gridOptionsWrapper.isGroupHideOpenParents(),a=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),l=!a&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),c=0;c<e.length;c++){var u=e[c],d=u.hasChildren(),h=a&&d&&1===u.childrenAfterGroup.length,p=l&&d&&u.leafGroup&&1===u.childrenAfterGroup.length,f=n&&u.leafGroup,f=s&&u.expanded&&!f;!(n&&!d||r&&d||f||h||p)&&this.addRowNodeToRowsToDisplay(u,t,i,o),n&&u.leafGroup||(d?(f=h||p,(u.expanded||f)&&(this.recursivelyAddToRowsToDisplay(u.childrenAfterSort,t,i,n,f?o:o+1),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(u),this.addRowNodeToRowsToDisplay(u.sibling,t,i,o)))):u.master&&u.expanded&&(d=this.createDetailNode(u),this.addRowNodeToRowsToDisplay(d,t,i,o)))}},u.prototype.addRowNodeToRowsToDisplay=function(e,t,i,n){var o;t.push(e),g.Utils.missing(e.rowHeight)&&(o=this.gridOptionsWrapper.getRowHeightForNode(e),e.setRowHeight(o)),e.setUiLevel(n),e.setRowTop(i.value),e.setRowIndex(t.length-1),i.value+=e.rowHeight},u.prototype.ensureFooterNodeExists=function(t){var i;g.Utils.exists(t.sibling)||(i=new s.RowNode,this.context.wireBean(i),Object.keys(t).forEach(function(e){i[e]=t[e]}),i.footer=!0,i.rowTop=null,i.oldRowTop=null,g.Utils.exists(i.id)&&(i.id="rowGroupFooter_"+i.id),(i.sibling=t).sibling=i)},u.prototype.createDetailNode=function(e){var t;return g.Utils.exists(e.detailNode)?e.detailNode:(t=new s.RowNode,this.context.wireBean(t),t.detail=!0,t.flower=t.detail,t.parent=e,g.Utils.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,e.childFlower=e.detailNode,t)},n([r.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],u.prototype,"gridOptionsWrapper",void 0),n([r.Autowired("selectionController"),o("design:type",l.SelectionController)],u.prototype,"selectionController",void 0),n([r.Autowired("eventService"),o("design:type",c.EventService)],u.prototype,"eventService",void 0),n([r.Autowired("context"),o("design:type",r.Context)],u.prototype,"context",void 0),n([r.Autowired("columnController"),o("design:type",i.ColumnController)],u.prototype,"columnController",void 0),n([r.Bean("flattenStage")],u));function u(){}t.FlattenStage=a},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),c=i(2),u=i(0),d=i(3),h=i(17),p=i(5),f=i(24),g=i(18),m=i(9),v=i(136),y=i(13),b=i(87),w=i(115),C=i(6),i=i(7),y=(o=y.BeanStub,r(_,o),_.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},_.prototype.init=function(){var e=this;this.gridOptionsWrapper.isRowModelInfinite()&&(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.setDatasource(this.gridOptionsWrapper.getDatasource()),this.addDestroyFunc(function(){return e.destroyCache()}))},_.prototype.destroyDatasource=function(){this.datasource&&this.datasource.destroy&&this.datasource.destroy(),this.datasource=null},_.prototype.isLastRowFound=function(){return!!this.infiniteCache&&this.infiniteCache.isMaxRowFound()},_.prototype.addEventListeners=function(){this.addDestroyableEventListener(this.eventService,p.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addDestroyableEventListener(this.eventService,p.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addDestroyableEventListener(this.eventService,p.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.onColumnEverything.bind(this))},_.prototype.onFilterChanged=function(){this.gridOptionsWrapper.isEnableServerSideFilter()&&this.reset()},_.prototype.onSortChanged=function(){this.gridOptionsWrapper.isEnableServerSideSorting()&&this.reset()},_.prototype.onColumnEverything=function(){this.gridOptionsWrapper.isEnableServerSideSorting()&&this.reset()},_.prototype.destroy=function(){o.prototype.destroy.call(this)},_.prototype.getType=function(){return m.Constants.ROW_MODEL_TYPE_INFINITE},_.prototype.setDatasource=function(e){this.destroyDatasource(),(this.datasource=e)&&(this.checkForDeprecated(),this.reset())},_.prototype.checkForDeprecated=function(){var e=this.datasource;l.Utils.exists(e.maxConcurrentRequests)&&console.error("ag-Grid: since version 5.1.x, maxConcurrentRequests is replaced with grid property maxConcurrentDatasourceRequests"),l.Utils.exists(e.maxPagesInCache)&&console.error("ag-Grid: since version 5.1.x, maxPagesInCache is replaced with grid property maxPagesInPaginationCache"),l.Utils.exists(e.overflowSize)&&console.error("ag-Grid: since version 5.1.x, overflowSize is replaced with grid property paginationOverflowSize"),l.Utils.exists(e.blockSize)&&console.error("ag-Grid: since version 5.1.x, pageSize/blockSize is replaced with grid property infinitePageSize")},_.prototype.isEmpty=function(){return l.Utils.missing(this.infiniteCache)},_.prototype.isRowsToRender=function(){return l.Utils.exists(this.infiniteCache)},_.prototype.getNodesInRangeForSelection=function(e,t){return this.infiniteCache.getRowNodesInRange(e,t)},_.prototype.reset=function(){var e;l.Utils.missing(this.datasource)||(l.Utils.exists(this.gridOptionsWrapper.getRowNodeIdFunc())||this.selectionController.reset(),this.resetCache(),e=this.createModelUpdatedEvent(),this.eventService.dispatchEvent(e))},_.prototype.createModelUpdatedEvent=function(){return{type:p.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newPage:!1,newData:!1,keepRenderedRows:!1,animate:!1}},_.prototype.resetCache=function(){this.destroyCache();var e=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests(),e=(this.rowNodeBlockLoader=new w.RowNodeBlockLoader(e),this.context.wireBean(this.rowNodeBlockLoader),{datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,maxConcurrentRequests:e,overflowSize:this.gridOptionsWrapper.getCacheOverflowSize(),initialRowCount:this.gridOptionsWrapper.getInfiniteInitialRowCount(),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),blockSize:this.gridOptionsWrapper.getCacheBlockSize(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),lastAccessedSequence:new l.NumberSequence});1<=e.maxConcurrentRequests||(e.maxConcurrentRequests=2),1<=e.blockSize||(e.blockSize=100),1<=e.initialRowCount||(e.initialRowCount=0),1<=e.overflowSize||(e.overflowSize=1),this.infiniteCache=new v.InfiniteCache(e),this.context.wireBean(this.infiniteCache),this.infiniteCache.addEventListener(b.RowNodeCache.EVENT_CACHE_UPDATED,this.onCacheUpdated.bind(this))},_.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache.destroy(),this.infiniteCache=null),this.rowNodeBlockLoader&&(this.rowNodeBlockLoader.destroy(),this.rowNodeBlockLoader=null)},_.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},_.prototype.getRow=function(e){return this.infiniteCache?this.infiniteCache.getRow(e):null},_.prototype.getRowNode=function(t){var i=null;return this.forEachNode(function(e){e.id===t&&(i=e)}),i},_.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e,new l.NumberSequence)},_.prototype.getCurrentPageHeight=function(){return this.getRowCount()*this.rowHeight},_.prototype.getRowIndexAtPixel=function(e){return 0!==this.rowHeight?(e=Math.floor(e/this.rowHeight))>this.getPageLastRow()?this.getPageLastRow():e:0},_.prototype.getPageFirstRow=function(){return 0},_.prototype.getPageLastRow=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount()-1:0},_.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount():0},_.prototype.updateRowData=function(e){l.Utils.exists(e.remove)||l.Utils.exists(e.update)?console.warn("ag-Grid: updateRowData for InfiniteRowModel does not support remove or update, only add"):l.Utils.missing(e.addIndex)?console.warn("ag-Grid: updateRowData for InfiniteRowModel requires add and addIndex to be set"):this.infiniteCache&&this.infiniteCache.insertItemsAtIndex(e.addIndex,e.add)},_.prototype.isRowPresent=function(e){return!1},_.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},_.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},_.prototype.getVirtualRowCount=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount():null},_.prototype.isMaxRowFound=function(){if(this.infiniteCache)return this.infiniteCache.isMaxRowFound()},_.prototype.setVirtualRowCount=function(e,t){this.infiniteCache&&this.infiniteCache.setVirtualRowCount(e,t)},_.prototype.getBlockState=function(){return this.rowNodeBlockLoader?this.rowNodeBlockLoader.getBlockState():null},s([u.Autowired("gridOptionsWrapper"),a("design:type",c.GridOptionsWrapper)],_.prototype,"gridOptionsWrapper",void 0),s([u.Autowired("filterManager"),a("design:type",g.FilterManager)],_.prototype,"filterManager",void 0),s([u.Autowired("sortController"),a("design:type",f.SortController)],_.prototype,"sortController",void 0),s([u.Autowired("selectionController"),a("design:type",h.SelectionController)],_.prototype,"selectionController",void 0),s([u.Autowired("eventService"),a("design:type",d.EventService)],_.prototype,"eventService",void 0),s([u.Autowired("context"),a("design:type",u.Context)],_.prototype,"context",void 0),s([u.Autowired("gridApi"),a("design:type",C.GridApi)],_.prototype,"gridApi",void 0),s([u.Autowired("columnApi"),a("design:type",i.ColumnApi)],_.prototype,"columnApi",void 0),s([u.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],_.prototype,"init",null),s([u.PreDestroy,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],_.prototype,"destroyDatasource",null),s([u.PreDestroy,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],_.prototype,"destroy",null),s([u.Bean("rowModel")],_));function _(){return null!==o&&o.apply(this,arguments)||this}t.InfiniteRowModel=y},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(61)),a=i(12),l=i(0),c=i(1);function u(e){this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0,this.maxConcurrentRequests=e}u.prototype.setBeans=function(e){this.logger=e.create("RowNodeBlockLoader")},u.prototype.addBlock=function(e){this.blocks.push(e)},u.prototype.removeBlock=function(e){c._.removeFromArray(this.blocks,e)},u.prototype.destroy=function(){this.active=!1},u.prototype.loadComplete=function(){this.activeBlockLoadsCount--},u.prototype.checkBlockToLoad=function(){var t;this.active&&(this.printCacheStatus(),this.activeBlockLoadsCount>=this.maxConcurrentRequests?this.logger.log("checkBlockToLoad: max loads exceeded"):(t=null,this.blocks.forEach(function(e){e.getState()===s.RowNodeBlock.STATE_DIRTY&&(t=e)}),t?(t.load(),this.activeBlockLoadsCount++,this.logger.log("checkBlockToLoad: loading page "+t.getBlockNumber()),this.printCacheStatus()):this.logger.log("checkBlockToLoad: no pages to load")))},u.prototype.getBlockState=function(){var n={};return this.blocks.forEach(function(e){var t=e.getNodeIdPrefix(),i={blockNumber:e.getBlockNumber(),startRow:e.getStartRow(),endRow:e.getEndRow(),pageStatus:e.getState()};c._.exists(t)?n[t+e.getBlockNumber()]=i:n[e.getBlockNumber()]=i}),n},u.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},n([r(0,l.Qualifier("loggerFactory")),o("design:type",Function),o("design:paramtypes",[a.LoggerFactory]),o("design:returntype",void 0)],u.prototype,"setBeans",null),t.RowNodeBlockLoader=u},function(e,t,i){"use strict";var a,n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),s=i(9),l=i(2),c=i(7),u=i(4),d=i(18),h=i(14),p=i(3),f=i(5),g=i(0),m=i(17),v=i(88),y=i(89),b=i(16),w=i(33),i=i(6),C=((C=a=a||{})[C.Normal=0]="Normal",C[C.AfterFilter=1]="AfterFilter",C[C.AfterFilterAndSort=2]="AfterFilterAndSort",C[C.PivotNodes=3]="PivotNodes",_.prototype.init=function(){var e=this.refreshModel.bind(this,{step:s.Constants.STEP_EVERYTHING}),e=(this.eventService.addModalPriorityEventListener(f.Events.EVENT_COLUMN_EVERYTHING_CHANGED,e),this.eventService.addModalPriorityEventListener(f.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.eventService.addModalPriorityEventListener(f.Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.eventService.addModalPriorityEventListener(f.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:s.Constants.STEP_PIVOT})),this.eventService.addModalPriorityEventListener(f.Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this)),this.eventService.addModalPriorityEventListener(f.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.eventService.addModalPriorityEventListener(f.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.eventService.addModalPriorityEventListener(f.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.refreshModel.bind(this,{step:s.Constants.STEP_MAP,keepRenderedRows:!0,animate:!0}));this.gridOptionsWrapper.addEventListener(l.GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,e),this.gridOptionsWrapper.addEventListener(l.GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,e),this.rootNode=new h.RowNode,this.nodeManager=new v.ClientSideNodeManager(this.rootNode,this.gridOptionsWrapper,this.context,this.eventService,this.columnController),this.context.wireBean(this.rootNode)},_.prototype.ensureRowAtPixel=function(e,t){t=this.getRowIndexAtPixel(t);return this.getRow(t)!==e&&(r.Utils.removeFromArray(this.rootNode.allLeafChildren,e),r.Utils.insertIntoArray(this.rootNode.allLeafChildren,e,t),this.refreshModel({step:s.Constants.STEP_EVERYTHING,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),!0)},_.prototype.isLastRowFound=function(){return!0},_.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},_.prototype.getRowBounds=function(e){if(r.Utils.missing(this.rowsToDisplay))return null;e=this.rowsToDisplay[e];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null},_.prototype.onRowGroupOpened=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:s.Constants.STEP_MAP,keepRenderedRows:!0,animate:e})},_.prototype.onFilterChanged=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:s.Constants.STEP_FILTER,keepRenderedRows:!0,animate:e})},_.prototype.onSortChanged=function(){var e;this.gridOptionsWrapper.isEnableServerSideSorting()||(e=this.gridOptionsWrapper.isAnimateRows(),this.refreshModel({step:s.Constants.STEP_SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0}))},_.prototype.getType=function(){return s.Constants.ROW_MODEL_TYPE_CLIENT_SIDE},_.prototype.onValueChanged=function(){this.columnController.isPivotActive()?this.refreshModel({step:s.Constants.STEP_PIVOT}):this.refreshModel({step:s.Constants.STEP_AGGREGATE})},_.prototype.createChangePath=function(e){var t=this.columnController.getValueColumns(),t=r.Utils.missingOrEmpty(t),e=r.Utils.missingOrEmpty(e),i=new y.ChangedPath(!1);return(t||e)&&i.setInactive(),i},_.prototype.refreshModel=function(e){var t=this,i=this.createChangePath(e.rowNodeTransactions);switch(e.step){case s.Constants.STEP_EVERYTHING:this.doRowGrouping(e.groupState,e.rowNodeTransactions,e.rowNodeOrder,i);case s.Constants.STEP_FILTER:this.doFilter();case s.Constants.STEP_PIVOT:this.doPivot(i);case s.Constants.STEP_AGGREGATE:this.doAggregate(i);case s.Constants.STEP_SORT:this.doSort();case s.Constants.STEP_MAP:this.doRowsToDisplay()}var n={type:f.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1};this.eventService.dispatchEvent(n),this.$scope&&setTimeout(function(){t.$scope.$apply()},0)},_.prototype.isEmpty=function(){var e=r.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc())?r.Utils.missing(this.rootNode.childrenAfterGroup)||0===this.rootNode.childrenAfterGroup.length:r.Utils.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return r.Utils.missing(this.rootNode)||e||!this.columnController.isReady()},_.prototype.isRowsToRender=function(){return r.Utils.exists(this.rowsToDisplay)&&0<this.rowsToDisplay.length},_.prototype.getNodesInRangeForSelection=function(o,r){var s,a=!r,l=!1,c=[],u=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort(function(e){var t,i,n=a&&!l;a||e!==r&&e!==o||(a=!0),e.group&&u||(t=a&&!l,i=e.isParentOfNode(s),(t||i)&&c.push(e)),!n||e!==r&&e!==o||(l=!0,s=e===r?r:o)}),c},_.prototype.setDatasource=function(e){console.error("ag-Grid: should never call setDatasource on clientSideRowController")},_.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},_.prototype.getRootNode=function(){return this.rootNode},_.prototype.getRow=function(e){return this.rowsToDisplay[e]},_.prototype.isRowPresent=function(e){return 0<=this.rowsToDisplay.indexOf(e)},_.prototype.getVirtualRowCount=function(){return console.warn("ag-Grid: rowModel.getVirtualRowCount() is not longer a function, use rowModel.getRowCount() instead"),this.getPageLastRow()},_.prototype.getPageFirstRow=function(){return 0},_.prototype.getPageLastRow=function(){return this.rowsToDisplay?this.rowsToDisplay.length-1:0},_.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty())return-1;var t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(this.rowsToDisplay[this.rowsToDisplay.length-1].rowTop<=e)return this.rowsToDisplay.length-1;for(;;){var n=Math.floor((t+i)/2),o=this.rowsToDisplay[n];if(this.isRowInPixel(o,e))return n;o.rowTop<e?t=n+1:o.rowTop>e&&(i=n-1)}},_.prototype.isRowInPixel=function(e,t){var i=e.rowTop,e=e.rowTop+e.rowHeight;return i<=t&&t<e},_.prototype.getCurrentPageHeight=function(){var e;return this.rowsToDisplay&&0<this.rowsToDisplay.length?(e=this.rowsToDisplay[this.rowsToDisplay.length-1]).rowTop+e.rowHeight:0},_.prototype.forEachLeafNode=function(i){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(e,t){return i(e,t)})},_.prototype.forEachNode=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,e,a.Normal,0)},_.prototype.forEachNodeAfterFilter=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterFilter,e,a.AfterFilter,0)},_.prototype.forEachNodeAfterFilterAndSort=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,e,a.AfterFilterAndSort,0)},_.prototype.forEachPivotNode=function(e){this.recursivelyWalkNodesAndCallback([this.rootNode],e,a.PivotNodes,0)},_.prototype.recursivelyWalkNodesAndCallback=function(e,t,i,n){if(e)for(var o=0;o<e.length;o++){var r=e[o];if(t(r,n++),r.hasChildren()){var s=void 0;switch(i){case a.Normal:s=r.childrenAfterGroup;break;case a.AfterFilter:s=r.childrenAfterFilter;break;case a.AfterFilterAndSort:s=r.childrenAfterSort;break;case a.PivotNodes:s=r.leafGroup?null:r.childrenAfterSort}s&&(n=this.recursivelyWalkNodesAndCallback(s,t,i,n))}}return n},_.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},_.prototype.expandOrCollapseAll=function(n){var o=this.gridOptionsWrapper.isTreeData();this.rootNode&&!function i(e){if(!e)return;e.forEach(function(e){var t=o?r.Utils.exists(e.childrenAfterGroup):e.group;t&&(e.expanded=n,i(e.childrenAfterGroup))})}(this.rootNode.childrenAfterGroup),this.refreshModel({step:s.Constants.STEP_MAP})},_.prototype.doSort=function(){this.sortStage.execute({rowNode:this.rootNode})},_.prototype.doRowGrouping=function(e,t,i,n){var o=this;r.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc())||(this.groupStage?(r.Utils.exists(t)?t.forEach(function(e){o.groupStage.execute({rowNode:o.rootNode,rowNodeTransaction:e,rowNodeOrder:i,changedPath:n})}):(this.selectionController.removeGroupsFromSelection(),this.groupStage.execute({rowNode:this.rootNode,changedPath:n}),this.restoreGroupState(e)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionController.updateGroupsFromChildrenSelections()):this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren)},_.prototype.restoreGroupState=function(i){i&&r.Utils.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(e,t){"boolean"==typeof i[t]&&(e.expanded=i[t])})},_.prototype.doFilter=function(){this.filterStage.execute({rowNode:this.rootNode})},_.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},_.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var i={};return r.Utils.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(e,t){return i[t]=e.expanded}),i},_.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},_.prototype.getRowNode=function(e){return this.nodeManager.getRowNode(e)},_.prototype.setRowData=function(e){var t=this.getGroupState(),e=(this.nodeManager.setRowData(e),{type:f.Events.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(e),this.refreshModel({step:s.Constants.STEP_EVERYTHING,groupState:t,newData:!0})},_.prototype.batchUpdateRowData=function(e,t){var i,n=this;this.rowDataTransactionBatch||(this.rowDataTransactionBatch=[],i=this.gridOptionsWrapper.getBatchUpdateWaitMillis(),setTimeout(function(){n.executeBatchUpdateRowData(),n.rowDataTransactionBatch=null},i)),this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})},_.prototype.executeBatchUpdateRowData=function(){var i=this,n=(this.valueCache.onDataChanged(),[]),o=[];this.rowDataTransactionBatch.forEach(function(e){var t=i.nodeManager.updateRowData(e.rowDataTransaction,null);o.push(t),e.callback&&n.push(e.callback.bind(t))}),this.commonUpdateRowData(o),0<n.length&&setTimeout(function(){n.forEach(function(e){return e()})},0)},_.prototype.updateRowData=function(e,t){this.valueCache.onDataChanged();e=this.nodeManager.updateRowData(e,t);return this.commonUpdateRowData([e],t),e},_.prototype.commonUpdateRowData=function(e,t){this.refreshModel({step:s.Constants.STEP_EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,animate:!0,keepEditingRows:!0});e={type:f.Events.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(e)},_.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},_.prototype.onRowHeightChanged=function(){this.refreshModel({step:s.Constants.STEP_MAP,keepRenderedRows:!0,keepEditingRows:!0})},_.prototype.resetRowHeights=function(){this.forEachNode(function(e){return e.setRowHeight(null)}),this.onRowHeightChanged()},n([g.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],_.prototype,"gridOptionsWrapper",void 0),n([g.Autowired("columnController"),o("design:type",u.ColumnController)],_.prototype,"columnController",void 0),n([g.Autowired("filterManager"),o("design:type",d.FilterManager)],_.prototype,"filterManager",void 0),n([g.Autowired("$scope"),o("design:type",Object)],_.prototype,"$scope",void 0),n([g.Autowired("selectionController"),o("design:type",m.SelectionController)],_.prototype,"selectionController",void 0),n([g.Autowired("eventService"),o("design:type",p.EventService)],_.prototype,"eventService",void 0),n([g.Autowired("context"),o("design:type",g.Context)],_.prototype,"context",void 0),n([g.Autowired("valueService"),o("design:type",b.ValueService)],_.prototype,"valueService",void 0),n([g.Autowired("valueCache"),o("design:type",w.ValueCache)],_.prototype,"valueCache",void 0),n([g.Autowired("columnApi"),o("design:type",c.ColumnApi)],_.prototype,"columnApi",void 0),n([g.Autowired("gridApi"),o("design:type",i.GridApi)],_.prototype,"gridApi",void 0),n([g.Autowired("filterStage"),o("design:type",Object)],_.prototype,"filterStage",void 0),n([g.Autowired("sortStage"),o("design:type",Object)],_.prototype,"sortStage",void 0),n([g.Autowired("flattenStage"),o("design:type",Object)],_.prototype,"flattenStage",void 0),n([g.Optional("groupStage"),o("design:type",Object)],_.prototype,"groupStage",void 0),n([g.Optional("aggregationStage"),o("design:type",Object)],_.prototype,"aggregationStage",void 0),n([g.Optional("pivotStage"),o("design:type",Object)],_.prototype,"pivotStage",void 0),n([g.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],_.prototype,"init",null),n([g.Bean("rowModel")],_));function _(){}t.ClientSideRowModel=C},function(e,t,i){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.dateComponent=function(e){return e.dateComponent},n.prototype.colDefFloatingCellRenderer=function(e){return e.pinnedRowCellRenderer},n.prototype.colDefCellRenderer=function(e){return e.cellRenderer},n.prototype.colDefCellEditor=function(e){return e.cellEditor},n.prototype.colDefFilter=function(e){return e.filter},n.prototype.gridOptionsFullWidthCellRenderer=function(e){return e.fullWidthCellRenderer},n.prototype.gridOptionsGroupRowRenderer=function(e){return e.groupRowRenderer},n.prototype.gridOptionsGroupRowInnerRenderer=function(e){return e.groupRowInnerRenderer},n.prototype.setTimeout=function(e,t){setTimeout(e,t)},t.BaseFrameworkFactory=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},i=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),s="\r\n",n=(o.prototype.createXml=function(t,i){var n=this,o="",r=(t.properties&&(t.properties.prefixedAttributes&&t.properties.prefixedAttributes.forEach(function(t){Object.keys(t.map).forEach(function(e){o+=n.returnAttributeIfPopulated(t.prefix+e,t.map[e],i)})}),t.properties.rawMap&&Object.keys(t.properties.rawMap).forEach(function(e){o+=n.returnAttributeIfPopulated(e,t.properties.rawMap[e],i)})),"<"+t.name+o);return t.children||null!=t.textNode?null!=t.textNode?r+">"+t.textNode+"</"+t.name+">"+s:(r+=">\r\n",t.children.forEach(function(e){r+=n.createXml(e,i)}),r+"</"+t.name+">"+s):r+"/>"+s},o.prototype.returnAttributeIfPopulated=function(e,t,i){if(!t)return"";var n=t;return" "+e+"="+(n='"'+(n="boolean"==typeof t&&i?i(t):n)+'"')},n([i.Bean("xmlFactory")],o));function o(){}t.XmlFactory=n},function(e,t,i){"use strict";!function(e){Object.defineProperty(t,"__esModule",{value:!0});e=void 0===e?{}:e,e.HTMLElement="undefined"==typeof HTMLElement?{}:HTMLElement,e.HTMLButtonElement="undefined"==typeof HTMLButtonElement?{}:HTMLButtonElement,e.HTMLSelectElement="undefined"==typeof HTMLSelectElement?{}:HTMLSelectElement,e.HTMLInputElement="undefined"==typeof HTMLInputElement?{}:HTMLInputElement,e.Node="undefined"==typeof Node?{}:Node,e.MouseEvent="undefined"==typeof MouseEvent?{}:MouseEvent,e=i(38),t.BalancedColumnTreeBuilder=e.BalancedColumnTreeBuilder,e=i(4),t.ColumnController=e.ColumnController,e=i(107),t.ColumnKeyCreator=e.ColumnKeyCreator,e=i(31),t.ColumnUtils=e.ColumnUtils,e=i(48),t.DisplayedGroupCreator=e.DisplayedGroupCreator,e=i(83),t.GroupInstanceIdCreator=e.GroupInstanceIdCreator,e=i(62),t.ComponentUtil=e.ComponentUtil,e=i(106),t.ColDefUtil=e.ColDefUtil,e=i(66),t.ComponentProvider=e.ComponentProvider,e=i(135),t.initialiseAgGridWithAngular1=e.initialiseAgGridWithAngular1,e=i(141),t.initialiseAgGridWithWebComponents=e.initialiseAgGridWithWebComponents,e=i(13),t.BeanStub=e.BeanStub,e=i(0),t.Context=e.Context,t.Autowired=e.Autowired,t.PostConstruct=e.PostConstruct,t.PreConstruct=e.PreConstruct,t.Optional=e.Optional,t.Bean=e.Bean,t.Qualifier=e.Qualifier,t.PreDestroy=e.PreDestroy,e=i(11),t.QuerySelector=e.QuerySelector,t.Listener=e.Listener,t.RefSelector=e.RefSelector,e=i(15),t.DragAndDropService=e.DragAndDropService,t.DragSourceType=e.DragSourceType,t.HDirection=e.HDirection,t.VDirection=e.VDirection,e=i(40),t.DragService=e.DragService,e=i(10),t.Column=e.Column,e=i(26),t.ColumnGroup=e.ColumnGroup,e=i(23),t.GridCell=e.GridCell,e=i(64),t.GridRow=e.GridRow,e=i(32),t.OriginalColumnGroup=e.OriginalColumnGroup,e=i(14),t.RowNode=e.RowNode,e=i(51),t.BaseFilter=e.BaseFilter,e=i(68),t.DateFilter=e.DateFilter,e=i(18),t.FilterManager=e.FilterManager,e=i(96),t.NumberFilter=e.NumberFilter,e=i(95),t.TextFilter=e.TextFilter,e=i(78),t.GridPanel=e.GridPanel,e=i(36),t.ScrollVisibleService=e.ScrollVisibleService,e=i(44),t.MouseEventService=e.MouseEventService,e=i(103),t.BodyDropPivotTarget=e.BodyDropPivotTarget,e=i(101),t.BodyDropTarget=e.BodyDropTarget,e=i(81),t.CssClassApplier=e.CssClassApplier,e=i(98),t.HeaderContainer=e.HeaderContainer,e=i(80),t.HeaderRootComp=e.HeaderRootComp,e=i(99),t.HeaderRowComp=e.HeaderRowComp,e=i(59),t.HorizontalResizeService=e.HorizontalResizeService,e=i(102),t.MoveColumnController=e.MoveColumnController,e=i(108),t.StandardMenuFactory=e.StandardMenuFactory,e=i(142),t.TabbedLayout=e.TabbedLayout,e=i(143),t.VerticalStack=e.VerticalStack,e=i(144),t.simpleHttpRequest=e.simpleHttpRequest,e=i(94),t.LargeTextCellEditor=e.LargeTextCellEditor,e=i(69),t.PopupEditorWrapper=e.PopupEditorWrapper,e=i(93),t.PopupSelectCellEditor=e.PopupSelectCellEditor,e=i(92),t.PopupTextCellEditor=e.PopupTextCellEditor,e=i(75),t.SelectCellEditor=e.SelectCellEditor,e=i(67),t.TextCellEditor=e.TextCellEditor,e=i(71),t.AnimateShowChangeCellRenderer=e.AnimateShowChangeCellRenderer,e=i(70),t.AnimateSlideCellRenderer=e.AnimateSlideCellRenderer,e=i(72),t.GroupCellRenderer=e.GroupCellRenderer,e=i(52),t.SetLeftFeature=e.SetLeftFeature,e=i(39),t.AutoWidthCalculator=e.AutoWidthCalculator,e=i(54),t.CellEditorFactory=e.CellEditorFactory,e=i(55),t.CellRendererFactory=e.CellRendererFactory,e=i(56),t.CellRendererService=e.CellRendererService,e=i(65),t.CheckboxSelectionComponent=e.CheckboxSelectionComponent,e=i(34),t.CellComp=e.CellComp,e=i(50),t.RowComp=e.RowComp,e=i(20),t.RowRenderer=e.RowRenderer,e=i(43),t.ValueFormatterService=e.ValueFormatterService,e=i(109),t.FilterStage=e.FilterStage,e=i(113),t.FlattenStage=e.FlattenStage,e=i(111),t.SortStage=e.SortStage,e=i(30),t.PinnedRowModel=e.PinnedRowModel,e=i(116),t.ClientSideRowModel=e.ClientSideRowModel,e=i(89),t.ChangedPath=e.ChangedPath,e=i(88),t.ClientSideNodeManager=e.ClientSideNodeManager,e=i(114),t.InfiniteRowModel=e.InfiniteRowModel,e=i(61),t.RowNodeBlock=e.RowNodeBlock,e=i(115),t.RowNodeBlockLoader=e.RowNodeBlockLoader,e=i(87),t.RowNodeCache=e.RowNodeCache,e=i(73),t.StylingService=e.StylingService,e=i(60),t.AgCheckbox=e.AgCheckbox,e=i(8),t.Component=e.Component,e=i(35),t.PopupService=e.PopupService,e=i(46),t.TouchListener=e.TouchListener,e=i(117),t.BaseFrameworkFactory=e.BaseFrameworkFactory,e=i(82),t.CellNavigationService=e.CellNavigationService,e=i(58),t.AlignedGridsService=e.AlignedGridsService,e=i(9),t.Constants=e.Constants,e=i(47),t.CsvCreator=e.CsvCreator,t.BaseCreator=e.BaseCreator,e=i(84),t.Downloader=e.Downloader,e=i(85),t.Grid=e.Grid,e=i(6),t.GridApi=e.GridApi,e=i(25),t.Events=e.Events,e=i(22),t.FocusedCellController=e.FocusedCellController,e=i(145),t.defaultGroupComparator=e.defaultGroupComparator,e=i(2),t.GridOptionsWrapper=e.GridOptionsWrapper,e=i(3),t.EventService=e.EventService,e=i(86),t.SelectableService=e.SelectableService,e=i(42),t.GridCore=e.GridCore,e=i(12),t.Logger=e.Logger,e=i(17),t.SelectionController=e.SelectionController,e=i(24),t.SortController=e.SortController,e=i(49),t.TemplateService=e.TemplateService,e=i(1),t.Utils=e.Utils,t.NumberSequence=e.NumberSequence,t._=e._,t.Promise=e.Promise,e=i(16),t.ValueService=e.ValueService,e=i(19),t.ExpressionService=e.ExpressionService,e=i(118),t.XmlFactory=e.XmlFactory,e=i(63),t.GridSerializer=e.GridSerializer,t.BaseGridSerializingSession=e.BaseGridSerializingSession,t.RowType=e.RowType,e=i(12),t.LoggerFactory=e.LoggerFactory,e=i(7),t.ColumnApi=e.ColumnApi,e=i(146),t.BaseComponentWrapper=e.BaseComponentWrapper,e=i(41);t.Environment=e.Environment}.call(t,i(120))},function(e,t){var i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";var n,r,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(0),u=i(14),d=i(15),h=i(25),p=i(1),i=i(13),l=(r=l.Component,o(f,r),f.prototype.postConstruct=function(){this.addDragSource(),this.checkCompatibility(),this.beans.gridOptionsWrapper.isRowDragManaged()?this.addFeature(this.beans.context,new b(this,this.beans,this.rowNode,this.column)):this.addFeature(this.beans.context,new m(this,this.beans,this.rowNode,this.column))},f.prototype.checkCompatibility=function(){var e=this.beans.gridOptionsWrapper.isRowDragManaged();this.beans.gridOptionsWrapper.isTreeData()&&e&&p._.doOnce(function(){return console.warn("ag-Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},f.prototype.addDragSource=function(){var e=this,t={rowNode:this.rowNode},i={type:d.DragSourceType.RowDrag,eElement:this.getGui(),dragItemName:this.cellValue,dragItemCallback:function(){return t},dragStartPixels:0};this.beans.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc(function(){return e.beans.dragAndDropService.removeDragSource(i)})},s([c.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],f.prototype,"postConstruct",null),f);function f(e,t,i,n){var o=r.call(this,'<span class="ag-row-drag"></span>')||this;return o.rowNode=e,o.column=t,o.cellValue=i,o.beans=n,o}t.RowDragComp=l;g=i.BeanStub,o(v,g),v.prototype.postConstruct=function(){this.addDestroyableEventListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.workOutVisibility()},v.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},v.prototype.workOutVisibility=function(){var e;this.beans.gridOptionsWrapper.isSuppressRowDrag()?this.parent.setVisible(!1):(e=this.column.isRowDrag(this.rowNode),this.parent.setVisible(e))},s([c.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],v.prototype,"postConstruct",null);var g,m=v;function v(e,t,i,n){var o=g.call(this)||this;return o.parent=e,o.beans=t,o.column=n,o.rowNode=i,o}y=i.BeanStub,o(w,y),w.prototype.postConstruct=function(){this.addDestroyableEventListener(this.beans.eventService,h.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addDestroyableEventListener(this.beans.eventService,h.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addDestroyableEventListener(this.beans.eventService,h.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addDestroyableEventListener(this.rowNode,u.RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addDestroyableEventListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.updateSortActive(),this.updateFilterActive(),this.updateRowGroupActive(),this.workOutVisibility()},w.prototype.updateRowGroupActive=function(){var e=this.beans.columnController.getRowGroupColumns();this.rowGroupActive=!p._.missingOrEmpty(e)},w.prototype.onRowGroupChanged=function(){this.updateRowGroupActive(),this.workOutVisibility()},w.prototype.updateSortActive=function(){var e=this.beans.sortController.getSortModel();this.sortActive=!p._.missingOrEmpty(e)},w.prototype.onSortChanged=function(){this.updateSortActive(),this.workOutVisibility()},w.prototype.updateFilterActive=function(){this.filterActive=this.beans.filterManager.isAnyFilterPresent()},w.prototype.onFilterChanged=function(){this.updateFilterActive(),this.workOutVisibility()},w.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},w.prototype.workOutVisibility=function(){var e=this.sortActive||this.filterActive||this.rowGroupActive,t=this.beans.gridOptionsWrapper.isSuppressRowDrag();e||t?this.parent.setVisible(!1):(e=this.column.isRowDrag(this.rowNode),this.parent.setVisible(e))},s([c.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],w.prototype,"postConstruct",null);var y,b=w;function w(e,t,i,n){var o=y.call(this)||this;return o.parent=e,o.beans=t,o.column=n,o.rowNode=i,o}},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),c=i(10),u=i(1),d=i(52),h=i(8),p=i(11),f=i(2),g=i(28),m=i(74),v=i(5),y=i(3),i=i(45),h=(o=h.Component,r(b,o),b.prototype.init=function(e){this.column=e.column;e=u._.loadTemplate('<div class="ag-header-cell" aria-hidden="true"><div class="ag-floating-filter-body" aria-hidden="true"></div></div>'),this.enrichBody(e),this.setTemplateFromElement(e),this.setupWidth(),this.addColumnHoverListener(),this.addFeature(this.context,new m.HoverFeature([this.column],this.getGui())),e=new d.SetLeftFeature(this.column,this.getGui(),this.beans);e.init(),this.addDestroyFunc(e.destroy.bind(e))},b.prototype.addColumnHoverListener=function(){this.addDestroyableEventListener(this.eventService,v.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this)),this.onColumnHover()},b.prototype.onColumnHover=function(){var e=this.columnHoverService.isHovered(this.column);u._.addOrRemoveCssClass(this.getGui(),"ag-column-hover",e)},b.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,c.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this)),this.onColumnWidthChanged()},b.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"},s([l.Autowired("context"),a("design:type",l.Context)],b.prototype,"context",void 0),s([l.Autowired("columnHoverService"),a("design:type",i.ColumnHoverService)],b.prototype,"columnHoverService",void 0),s([l.Autowired("eventService"),a("design:type",y.EventService)],b.prototype,"eventService",void 0),s([l.Autowired("beans"),a("design:type",g.Beans)],b.prototype,"beans",void 0),b);function b(){return null!==o&&o.apply(this,arguments)||this}t.BaseFilterWrapperComp=h;r(C,w=h),C.prototype.init=function(e){this.floatingFilterCompPromise=e.floatingFilterComp,this.suppressFilterButton=e.suppressFilterButton,w.prototype.init.call(this,e),this.addEventListeners()},C.prototype.addEventListeners=function(){!this.suppressFilterButton&&this.eButtonShowMainFilter&&this.addDestroyableEventListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))},C.prototype.enrichBody=function(n){var o=this;this.floatingFilterCompPromise.then(function(e){var t=n.querySelector(".ag-floating-filter-body"),i=e.getGui();o.suppressFilterButton?(t.appendChild(i),u._.removeCssClass(t,"ag-floating-filter-body"),u._.addCssClass(t,"ag-floating-filter-full-body")):(t.appendChild(i),n.appendChild(u._.loadTemplate('<div class="ag-floating-filter-button" aria-hidden="true">\n                        <button type="button" ref="eButtonShowMainFilter"></button>\n                </div>')),t=u._.createIconNoSpan("filter",o.gridOptionsWrapper,o.column),n.querySelector("button").appendChild(t)),e.afterGuiAttached&&e.afterGuiAttached(),o.wireQuerySelectors(),o.addEventListeners()})},C.prototype.onParentModelChanged=function(e){var t=void 0,i=null,i=e&&e.operator?(t=e).condition1:e;this.floatingFilterCompPromise.then(function(e){e.onParentModelChanged(i,t)})},C.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.eButtonShowMainFilter,"filterMenuTab",["filterMenuTab"])},s([p.RefSelector("eButtonShowMainFilter"),a("design:type",HTMLInputElement)],C.prototype,"eButtonShowMainFilter",void 0),s([l.Autowired("menuFactory"),a("design:type",Object)],C.prototype,"menuFactory",void 0),s([l.Autowired("gridOptionsWrapper"),a("design:type",f.GridOptionsWrapper)],C.prototype,"gridOptionsWrapper",void 0);var w,i=C;function C(){return null!==w&&w.apply(this,arguments)||this}t.FloatingFilterWrapperComp=i;r(A,_=h),A.prototype.enrichBody=function(e){},A.prototype.onParentModelChanged=function(e){};var _,y=A;function A(){return null!==_&&_.apply(this,arguments)||this}t.EmptyFloatingFilterWrapperComp=y},function(e,t,i){"use strict";function n(){this.first=null,this.last=null}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.add=function(e){e={item:e,next:null};this.last?this.last.next=e:this.first=e,this.last=e},n.prototype.remove=function(){var e=this.first;return e&&(this.first=e.next,this.first||(this.last=null)),e.item},n.prototype.isEmpty=function(){return!this.first},t.LinkedList=n},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),c=i(2),u=i(0),d=i(8),i=i(21),d=(o=d.Component,r(h,o),h.prototype.init=function(){},h.prototype.showLoadingOverlay=function(e){var i=this;this.setTemplate(h.LOADING_WRAPPER_OVERLAY_TEMPLATE),this.componentRecipes.newLoadingOverlayComponent().then(function(e){var t=i.getRefElement("loadingOverlayWrapper");l.Utils.removeAllChildren(t),t.appendChild(e.getGui())}),this.showOverlay(e,this.getGui())},h.prototype.showNoRowsOverlay=function(e){var i=this;this.setTemplate(h.NO_ROWS_WRAPPER_OVERLAY_TEMPLATE),this.componentRecipes.newNoRowsOverlayComponent().then(function(e){var t=i.getRefElement("noRowsOverlayWrapper");l.Utils.removeAllChildren(t),t.appendChild(e.getGui())}),this.showOverlay(e,this.getGui())},h.prototype.hideOverlay=function(e){l.Utils.removeAllChildren(e),l.Utils.setVisible(e,!1)},h.prototype.showOverlay=function(e,t){t?(l.Utils.removeAllChildren(e),l.Utils.setVisible(e,!0),e.appendChild(t)):(console.warn("ag-Grid: unknown overlay"),this.hideOverlay(e))},h.LOADING_WRAPPER_OVERLAY_TEMPLATE='<div class="ag-overlay-panel" role="presentation"><div class="ag-overlay-wrapper ag-overlay-loading-wrapper" ref="loadingOverlayWrapper">[OVERLAY_TEMPLATE]</div></div>',h.NO_ROWS_WRAPPER_OVERLAY_TEMPLATE='<div class="ag-overlay-panel" role="presentation"><div class="ag-overlay-wrapper ag-overlay-no-rows-wrapper" ref="noRowsOverlayWrapper">[OVERLAY_TEMPLATE]</div></div>',s([u.Autowired("gridOptionsWrapper"),a("design:type",c.GridOptionsWrapper)],h.prototype,"gridOptionsWrapper",void 0),s([u.Autowired("componentRecipes"),a("design:type",i.ComponentRecipes)],h.prototype,"componentRecipes",void 0),h);function h(){return o.call(this)||this}t.OverlayWrapperComponent=d},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(10),u=i(1),d=i(0),h=i(2),p=i(24),f=i(46),g=i(3),m=i(11),v=i(5),i=(o=l.Component,r(y,o),y.prototype.init=function(e){var t=u.Utils.firstExistingValue(e.template,y.TEMPLATE);this.setTemplate(t),this.params=e,this.setupTap(),this.setupIcons(e.column),this.setupMenu(),this.setupSort(),this.setupFilterIcon(),this.setupText(e.displayName)},y.prototype.setupText=function(e){this.eText&&(this.eText.innerHTML=e)},y.prototype.setupIcons=function(e){this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)},y.prototype.addInIcon=function(e,t,i){null!=t&&(e=u.Utils.createIconNoSpan(e,this.gridOptionsWrapper,i),t.appendChild(e))},y.prototype.setupTap=function(){var e,t=this;this.gridOptionsWrapper.isSuppressTouch()||(e=new f.TouchListener(this.getGui()),this.params.enableMenu&&this.addDestroyableEventListener(e,f.TouchListener.EVENT_LONG_TAP,function(e){t.gridOptionsWrapper.getApi().showColumnMenuAfterMouseClick(t.params.column,e.touchStart)}),this.params.enableSorting&&this.addDestroyableEventListener(e,f.TouchListener.EVENT_TAP,function(){t.sortController.progressSort(t.params.column,!1,"uiColumnSorted")}),this.addDestroyFunc(function(){return e.destroy()}))},y.prototype.setupMenu=function(){var e,t=this;this.eMenu&&(!this.params.enableMenu||u.Utils.isUserAgentIPad()?u.Utils.removeFromParent(this.eMenu):(this.eMenu.addEventListener("click",function(){return t.showMenu(t.eMenu)}),this.gridOptionsWrapper.isSuppressMenuHide()||(this.eMenu.style.opacity="0",this.addGuiEventListener("mouseover",function(){t.eMenu.style.opacity="1"}),this.addGuiEventListener("mouseout",function(){t.eMenu.style.opacity="0"})),(e=this.eMenu.style).transition="opacity 0.2s, border 0.2s",e["-webkit-transition"]="opacity 0.2s, border 0.2s"))},y.prototype.showMenu=function(e){this.menuFactory.showMenuAfterButtonClick(this.params.column,e)},y.prototype.removeSortIcons=function(){u.Utils.removeFromParent(this.eSortAsc),u.Utils.removeFromParent(this.eSortDesc),u.Utils.removeFromParent(this.eSortNone),u.Utils.removeFromParent(this.eSortOrder)},y.prototype.setupSort=function(){var n,o=this;this.params.enableSorting?(n=this.gridOptionsWrapper.isMultiSortKeyCtrl(),this.addDestroyableEventListener(this.params.column,c.Column.EVENT_MOVING_CHANGED,function(){o.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addDestroyableEventListener(this.eLabel,"click",function(e){var t=o.params.column.isMoving(),i=(new Date).getTime()-o.lastMovingChanged<50;t||i?console.log("kipping sort cos of moving "+o.lastMovingChanged):(t=n?e.ctrlKey||e.metaKey:e.shiftKey,o.params.progressSort(t))}),this.addDestroyableEventListener(this.params.column,c.Column.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.onSortChanged(),this.addDestroyableEventListener(this.eventService,v.Events.EVENT_SORT_CHANGED,this.setMultiSortOrder.bind(this)),this.setMultiSortOrder()):this.removeSortIcons()},y.prototype.onSortChanged=function(){var e;u.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-asc",this.params.column.isSortAscending()),u.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-desc",this.params.column.isSortDescending()),u.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-none",this.params.column.isSortNone()),this.eSortAsc&&u.Utils.addOrRemoveCssClass(this.eSortAsc,"ag-hidden",!this.params.column.isSortAscending()),this.eSortDesc&&u.Utils.addOrRemoveCssClass(this.eSortDesc,"ag-hidden",!this.params.column.isSortDescending()),this.eSortNone&&(e=!this.params.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon(),u.Utils.addOrRemoveCssClass(this.eSortNone,"ag-hidden",e||!this.params.column.isSortNone()))},y.prototype.setMultiSortOrder=function(){var e,t,i;this.eSortOrder&&(i=this.params.column,e=(t=this.sortController.getColumnsWithSortingOrdered()).indexOf(i),t=1<t.length,i=i.isSorting()&&t,u.Utils.setVisible(this.eSortOrder,i),this.eSortOrder.innerHTML=0<=e?(e+1).toString():"")},y.prototype.setupFilterIcon=function(){this.eFilter&&(this.addDestroyableEventListener(this.params.column,c.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},y.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();u.Utils.addOrRemoveCssClass(this.eFilter,"ag-hidden",!e)},y.TEMPLATE='<div class="ag-cell-label-container" role="presentation">  <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>  <div ref="eLabel" class="ag-header-cell-label" role="presentation">    <span ref="eText" class="ag-header-cell-text" role="columnheader"></span>    <span ref="eFilter" class="ag-header-icon ag-filter-icon" aria-hidden="true"></span>    <span ref="eSortOrder" class="ag-header-icon ag-sort-order" aria-hidden="true"></span>    <span ref="eSortAsc" class="ag-header-icon ag-sort-ascending-icon" aria-hidden="true"></span>    <span ref="eSortDesc" class="ag-header-icon ag-sort-descending-icon" aria-hidden="true"></span>    <span ref="eSortNone" class="ag-header-icon ag-sort-none-icon" aria-hidden="true"></span>  </div></div>',s([d.Autowired("gridOptionsWrapper"),a("design:type",h.GridOptionsWrapper)],y.prototype,"gridOptionsWrapper",void 0),s([d.Autowired("sortController"),a("design:type",p.SortController)],y.prototype,"sortController",void 0),s([d.Autowired("menuFactory"),a("design:type",Object)],y.prototype,"menuFactory",void 0),s([d.Autowired("eventService"),a("design:type",g.EventService)],y.prototype,"eventService",void 0),s([m.RefSelector("eFilter"),a("design:type",HTMLElement)],y.prototype,"eFilter",void 0),s([m.RefSelector("eSortAsc"),a("design:type",HTMLElement)],y.prototype,"eSortAsc",void 0),s([m.RefSelector("eSortDesc"),a("design:type",HTMLElement)],y.prototype,"eSortDesc",void 0),s([m.RefSelector("eSortNone"),a("design:type",HTMLElement)],y.prototype,"eSortNone",void 0),s([m.RefSelector("eSortOrder"),a("design:type",HTMLElement)],y.prototype,"eSortOrder",void 0),s([m.RefSelector("eMenu"),a("design:type",HTMLElement)],y.prototype,"eMenu",void 0),s([m.RefSelector("eLabel"),a("design:type",HTMLElement)],y.prototype,"eLabel",void 0),s([m.RefSelector("eText"),a("design:type",HTMLElement)],y.prototype,"eText",void 0),y);function y(){var e=null!==o&&o.apply(this,arguments)||this;return e.lastMovingChanged=0,e}t.HeaderComp=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(1),u=i(4),d=i(2),h=i(0),p=i(46),f=i(11),g=i(32),i=(o=l.Component,r(m,o),m.prototype.init=function(e){this.params=e,this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},m.prototype.setupExpandIcons=function(){function e(e){c.Utils.isStopPropagationForAgGrid(e)||(e=!i.params.columnGroup.isExpanded(),i.columnController.setColumnGroupOpened(i.params.columnGroup.getOriginalColumnGroup(),e,"uiColumnExpanded"))}function t(e){c.Utils.stopPropagationForAgGrid(e)}var i=this,n=(this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed"),this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e),this.addDestroyableEventListener(this.eCloseIcon,"dblclick",t),this.addDestroyableEventListener(this.eOpenIcon,"dblclick",t),this.addDestroyableEventListener(this.getGui(),"dblclick",e),this.updateIconVisibility(),this.params.columnGroup.getOriginalColumnGroup());this.addDestroyableEventListener(n,g.OriginalColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addDestroyableEventListener(n,g.OriginalColumnGroup.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},m.prototype.addTouchAndClickListeners=function(e,t){var i=new p.TouchListener(this.eCloseIcon);this.addDestroyableEventListener(i,p.TouchListener.EVENT_TAP,t),this.addDestroyFunc(function(){return i.destroy()}),this.addDestroyableEventListener(e,"click",t)},m.prototype.updateIconVisibility=function(){var e;this.params.columnGroup.isExpandable()?(e=this.params.columnGroup.isExpanded(),c.Utils.setVisible(this.eOpenIcon,!e),c.Utils.setVisible(this.eCloseIcon,e)):(c.Utils.setVisible(this.eOpenIcon,!1),c.Utils.setVisible(this.eCloseIcon,!1))},m.prototype.addInIcon=function(e,t){e=c.Utils.createIconNoSpan(e,this.gridOptionsWrapper,null);this.getRefElement(t).appendChild(e)},m.prototype.addGroupExpandIcon=function(){this.params.columnGroup.isExpandable()||(c.Utils.setVisible(this.eOpenIcon,!1),c.Utils.setVisible(this.eCloseIcon,!1))},m.prototype.setupLabel=function(){this.params.displayName&&""!==this.params.displayName&&(this.getRefElement("agLabel").innerHTML=this.params.displayName)},m.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer"><span ref="agLabel" class="ag-header-group-text"></span><span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span><span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span></div>',s([h.Autowired("columnController"),a("design:type",u.ColumnController)],m.prototype,"columnController",void 0),s([h.Autowired("gridOptionsWrapper"),a("design:type",d.GridOptionsWrapper)],m.prototype,"gridOptionsWrapper",void 0),s([f.RefSelector("agOpened"),a("design:type",HTMLElement)],m.prototype,"eOpenIcon",void 0),s([f.RefSelector("agClosed"),a("design:type",HTMLElement)],m.prototype,"eCloseIcon",void 0),m);function m(){return o.call(this,m.TEMPLATE)||this}t.HeaderGroupComp=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),c=i(0),i=i(8),i=(o=i.Component,r(u,o),u.prototype.init=function(e){var t=this.gridOptionsWrapper.getOverlayLoadingTemplate()?this.gridOptionsWrapper.getOverlayLoadingTemplate():u.DEFAULT_LOADING_OVERLAY_TEMPLATE,i=this.gridOptionsWrapper.getLocaleTextFunc(),t=t.replace("[LOADING...]",i("loadingOoo","Loading..."));this.setTemplate(t)},u.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',s([c.Autowired("gridOptionsWrapper"),a("design:type",l.GridOptionsWrapper)],u.prototype,"gridOptionsWrapper",void 0),u);function u(){return o.call(this)||this}t.LoadingOverlayComponent=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(2)),c=i(0),i=i(8),i=(o=i.Component,r(u,o),u.prototype.init=function(e){var t=this.gridOptionsWrapper.getOverlayNoRowsTemplate()?this.gridOptionsWrapper.getOverlayNoRowsTemplate():u.DEFAULT_NO_ROWS_TEMPLATE,i=this.gridOptionsWrapper.getLocaleTextFunc(),t=t.replace("[NO_ROWS_TO_SHOW]",i("noRowsToShow","No Rows To Show"));this.setTemplate(t)},u.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',s([c.Autowired("gridOptionsWrapper"),a("design:type",l.GridOptionsWrapper)],u.prototype,"gridOptionsWrapper",void 0),u);function u(){return o.call(this)||this}t.NoRowsOverlayComponent=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(window):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},c=2,n="undefined"!=typeof MutationObserver,u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||window},d=f(0,0,0,0);function h(e){return parseFloat(e)||0}function p(i,e,t){return[e,t].reduce(function(e,t){return e+h(i.getPropertyValue("border-"+t+"-width"))},0)}function o(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return d;var e=u(e).getComputedStyle(e),n=function(e){for(var t={top:null,left:null,right:null,bottom:null},i=0,n=["top","right","bottom","left"];i<n.length;i+=1){var o=n[i],r=e.getPropertyValue("padding-"+o);t[o]=h(r)}return t}(e),o=n.left+n.right,r=n.top+n.bottom,s=h(e.width),a=h(e.height),e=("border-box"===e.boxSizing&&(Math.round(s+o)!==t&&(s-=p(e,"left","right")+o),Math.round(a+r)!==i&&(a-=p(e,"top","bottom")+r)),Math.round(s+o)-t),o=Math.round(a+r)-i;return 1!==Math.abs(e)&&(s-=e),1!==Math.abs(o)&&(a-=o),f(n.left,n.top,s,a)}function r(e){for(var t=e.x,i=e.y,n=e.width,e=e.height,o=window.DOMRectReadOnly||Object,o=Object.create(o.prototype),r=o,s={x:t,y:i,width:n,height:e,top:i,right:t+n,bottom:e+i,left:t},a=0,l=Object.keys(s);a<l.length;a+=1){var c=l[a];Object.defineProperty(r,c,{value:s[c],enumerable:!1,writable:!1,configurable:!0})}return o}function f(e,t,i,n){return{x:e,y:t,width:i,height:n}}a.prototype.addObserver=function(e){-1==this.observers_.indexOf(e)&&this.observers_.push(e),this.connected_||this.connect_()},a.prototype.removeObserver=function(e){var t=this.observers_,e=t.indexOf(e);-1<e&&t.splice(e,1),!t.length&&this.connected_&&this.disconnect_()},a.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},a.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},a.prototype.connect_=function(){this.connected_||(window.addEventListener("resize",this.refresh),n?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},a.prototype.disconnect_=function(){this.connected_&&(window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},a.getInstance=function(){return this.instance_||(this.instance_=new a),this.instance_},a.instance_=null;var s=a;function a(){function e(){r&&(r=!1,n()),s&&i()}function t(){l(e)}function i(){var e=Date.now();if(r){if(e-a<c)return;s=!0}else s=!(r=!0),setTimeout(t,o);a=e}var n,o,r,s,a;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.callback_=null,this.refresh=(n=this.refresh.bind(this),s=r=!(o=20),a=0,i)}m.prototype.isActive=function(){var e=o(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},m.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var g=m;function m(e){this.target=e,this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=null,this.contentRect_=f(0,0,0,0)}y.prototype.observe=function(e){this.observation=new g(e),this.controller_.addObserver(this),this.controller_.refresh()},y.prototype.disconnect=function(){this.observation=null,this.controller_.removeObserver(this)},y.prototype.broadcastActive=function(){var e;this.hasActive()&&(e=this.callbackCtx_,this.callback_.call(e,{target:this.observation.target,contentRect:r(this.observation.broadcastRect())},e))},y.prototype.hasActive=function(){return this.observation.isActive()};var v=y;function y(e,t,i){if(this.observation=null,this.callback_=null,this.controller_=null,this.callbackCtx_=null,this.observation=null,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}w.prototype.observe=function(e){this.observer_.observe(e)},w.prototype.disconnect=function(){this.observer_.disconnect()};var b=w;function w(e){var t=s.getInstance(),e=new v(e,t,this);this.observer_=e}t.observeResize=function(e,r){var t,i;return window.ResizeObserver?((t=new window.ResizeObserver(function(e,t){for(var i=0,n=e;i<n.length;i++){var o=n[i];r(o)}})).observe(e),function(){t.disconnect()}):((i=new b(function(e){r(e)})).observe(e),function(){i.disconnect()})}},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),s=i(0),i=i(2);function a(e){this.childCount=0,this.rowTemplatesToAdd=[],this.afterGuiAttachedCallbacks=[],this.eContainer=e.eContainer,this.eViewport=e.eViewport,this.hideWhenNoChildren=e.hideWhenNoChildren}a.prototype.setVerticalScrollPosition=function(e){this.scrollTop=e},a.prototype.postConstruct=function(){this.domOrder=this.gridOptionsWrapper.isEnsureDomOrder(),this.checkVisibility()},a.prototype.getRowElement=function(e){return this.eContainer.querySelector('[comp-id="'+e+'"]')},a.prototype.setHeight=function(e){this.eContainer.style.height=e+"px"},a.prototype.flushRowTemplates=function(){var e;0!==this.rowTemplatesToAdd.length&&(e=this.rowTemplatesToAdd.join(""),r.Utils.appendHtml(this.eContainer,e),this.rowTemplatesToAdd.length=0),this.afterGuiAttachedCallbacks.forEach(function(e){return e()}),this.afterGuiAttachedCallbacks.length=0,this.lastPlacedElement=null},a.prototype.appendRowTemplate=function(e,t){this.domOrder?this.lastPlacedElement=r.Utils.insertTemplateWithDomOrder(this.eContainer,e,this.lastPlacedElement):this.rowTemplatesToAdd.push(e),this.afterGuiAttachedCallbacks.push(t),this.childCount++,this.checkVisibility()},a.prototype.ensureDomOrder=function(e){this.domOrder&&(r.Utils.ensureDomOrder(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)},a.prototype.removeRowElement=function(e){this.eContainer.removeChild(e),this.childCount--,this.checkVisibility()},a.prototype.checkVisibility=function(){var e,t;this.hideWhenNoChildren&&(e=this.eViewport||this.eContainer,t=0<this.childCount,this.visible!==t&&(this.visible=t,r.Utils.setVisible(e,t),t&&this.eViewport&&(this.eViewport.scrollTop=this.scrollTop)))},n([s.Autowired("gridOptionsWrapper"),o("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),n([s.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],a.prototype,"postConstruct",null),t.RowContainerComponent=a},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=(Object.defineProperty(t,"__esModule",{value:!0}),i(15)),r=i(0),a=i(22),l=i(2),c=i(3),u=i(25);function d(e,t){this.eContainer=e,this.gridPanel=t}d.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel)},d.prototype.getContainer=function(){return this.eContainer},d.prototype.isInterestedIn=function(e){return e===s.DragSourceType.RowDrag},d.prototype.getIconName=function(){return s.DragAndDropService.ICON_MOVE},d.prototype.onDragEnter=function(e){this.dispatchEvent(u.Events.EVENT_ROW_DRAG_ENTER,e),this.dragAndDropService.setGhostIcon(s.DragAndDropService.ICON_MOVE),e.dragItem.rowNode.setDragging(!0),this.onEnterOrDragging(e)},d.prototype.onDragging=function(e){this.onEnterOrDragging(e)},d.prototype.onEnterOrDragging=function(e){this.dispatchEvent(u.Events.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;var t=this.normaliseForScroll(e.y);this.gridOptionsWrapper.isRowDragManaged()&&this.doManagedDrag(e,t),this.checkCenterForScrolling(t)},d.prototype.doManagedDrag=function(e,t){e=e.dragItem.rowNode;this.clientSideRowModel.ensureRowAtPixel(e,t)&&(this.focusedCellController.clearFocusedCell(),this.rangeController&&this.rangeController.clearSelection())},d.prototype.normaliseForScroll=function(e){return!this.gridOptionsWrapper.isGridAutoHeight()?e+this.gridPanel.getVScrollPosition().top:e},d.prototype.checkCenterForScrolling=function(e){var t=this.gridPanel.getVScrollPosition();this.needToMoveUp=e<t.top+50,this.needToMoveDown=e>t.bottom-50,this.needToMoveUp||this.needToMoveDown?this.ensureIntervalStarted():this.ensureIntervalCleared()},d.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.movingIntervalId=setInterval(this.moveInterval.bind(this),100))},d.prototype.ensureIntervalCleared=function(){this.moveInterval&&(clearInterval(this.movingIntervalId),this.movingIntervalId=null)},d.prototype.moveInterval=function(){var e,t;this.intervalCount++,100<(e=10+5*this.intervalCount)&&(e=100),this.needToMoveDown?t=this.gridPanel.scrollVertically(e):this.needToMoveUp&&(t=this.gridPanel.scrollVertically(-e)),0!==t&&this.onDragging(this.lastDraggingEvent)},d.prototype.dispatchEvent=function(e,t){var i,n=this.normaliseForScroll(t.y),o=-1,r=null;switch(n>this.rowModel.getCurrentPageHeight()||(o=this.rowModel.getRowIndexAtPixel(n),r=this.rowModel.getRow(o)),t.vDirection){case s.VDirection.Down:i="down";break;case s.VDirection.Up:i="up";break;default:i=null}e={type:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),event:t.event,node:t.dragItem.rowNode,overIndex:o,overNode:r,y:n,vDirection:i};this.eventService.dispatchEvent(e)},d.prototype.onDragLeave=function(e){this.dispatchEvent(u.Events.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e)},d.prototype.onDragStop=function(e){this.dispatchEvent(u.Events.EVENT_ROW_DRAG_END,e),this.stopDragging(e)},d.prototype.stopDragging=function(e){this.ensureIntervalCleared(),e.dragItem.rowNode.setDragging(!1)},n([r.Autowired("dragAndDropService"),o("design:type",s.DragAndDropService)],d.prototype,"dragAndDropService",void 0),n([r.Autowired("rowModel"),o("design:type",Object)],d.prototype,"rowModel",void 0),n([r.Autowired("focusedCellController"),o("design:type",a.FocusedCellController)],d.prototype,"focusedCellController",void 0),n([r.Autowired("gridOptionsWrapper"),o("design:type",l.GridOptionsWrapper)],d.prototype,"gridOptionsWrapper",void 0),n([r.Optional("rangeController"),o("design:type",Object)],d.prototype,"rangeController",void 0),n([r.Autowired("eventService"),o("design:type",c.EventService)],d.prototype,"eventService",void 0),n([r.PostConstruct,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],d.prototype,"postConstruct",null),t.RowDragFeature=d},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(60)),c=i(13),u=i(0),d=i(7),h=i(6),p=i(5),f=i(3),g=i(9),m=i(17),i=i(2),c=(o=c.BeanStub,r(v,o),v.prototype.postConstruct=function(){this.showOrHideSelectAll(),this.addDestroyableEventListener(this.eventService,p.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addDestroyableEventListener(this.eventService,p.Events.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addDestroyableEventListener(this.eventService,p.Events.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addDestroyableEventListener(this.cbSelectAll,l.AgCheckbox.EVENT_CHANGED,this.onCbSelectAll.bind(this))},v.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setVisible(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType(),this.updateStateOfCheckbox())},v.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},v.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},v.prototype.getNextCheckboxState=function(e){return(0!==e.selected||0!==e.notSelected)&&(0<e.selected&&0<e.notSelected?null:0<e.selected)},v.prototype.updateStateOfCheckbox=function(){var e;this.processingEventFromCheckbox||(this.processingEventFromCheckbox=!0,e=this.getSelectionCount(),e=this.getNextCheckboxState(e),this.cbSelectAll.setSelected(e),this.processingEventFromCheckbox=!1)},v.prototype.getSelectionCount=function(){function e(e){e.isSelected()?t++:e.selectable&&i++}var t=0,i=0;return this.filteredOnly?this.gridApi.forEachNodeAfterFilter(e):this.gridApi.forEachNode(e),{notSelected:i,selected:t}},v.prototype.checkRightRowModelType=function(){var e=this.rowModel.getType();e!==g.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&console.log("ag-Grid: selectAllCheckbox is only available if using normal row model, you are using "+e)},v.prototype.onCbSelectAll=function(){this.processingEventFromCheckbox||this.cbSelectAllVisible&&(this.cbSelectAll.isSelected()?this.selectionController.selectAllRowNodes(this.filteredOnly):this.selectionController.deselectAllRowNodes(this.filteredOnly))},v.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;return!!(e="function"==typeof e?e({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi}):e)&&(this.gridOptionsWrapper.isRowModelServerSide()?(console.warn("headerCheckboxSelection is not supported for Server Side Row Model"),!1):this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("headerCheckboxSelection is not supported for Infinite Row Model"),!1):!this.gridOptionsWrapper.isRowModelViewport()||(console.warn("headerCheckboxSelection is not supported for Viewport Row Model"),!1))},s([u.Autowired("gridApi"),a("design:type",h.GridApi)],v.prototype,"gridApi",void 0),s([u.Autowired("columnApi"),a("design:type",d.ColumnApi)],v.prototype,"columnApi",void 0),s([u.Autowired("eventService"),a("design:type",f.EventService)],v.prototype,"eventService",void 0),s([u.Autowired("rowModel"),a("design:type",Object)],v.prototype,"rowModel",void 0),s([u.Autowired("selectionController"),a("design:type",m.SelectionController)],v.prototype,"selectionController",void 0),s([u.Autowired("gridOptionsWrapper"),a("design:type",i.GridOptionsWrapper)],v.prototype,"gridOptionsWrapper",void 0),s([u.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],v.prototype,"postConstruct",null),v);function v(e,t){var i=o.call(this)||this,e=(i.cbSelectAllVisible=!1,i.processingEventFromCheckbox=!1,i.cbSelectAll=e,(i.column=t).getColDef());return i.filteredOnly=!!e&&!!e.headerCheckboxSelectionFilteredOnly,i}t.SelectAllFeature=c},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(10),u=i(1),d=i(26),h=i(7),p=i(4),f=i(2),g=i(59),m=i(0),v=i(81),y=i(15),b=i(52),w=i(6),C=i(21),_=i(28),A=i(74),i=(o=l.Component,r(E,o),E.prototype.postConstruct=function(){v.CssClassApplier.addHeaderClassesFromColDef(this.columnGroup.getColGroupDef(),this.getGui(),this.gridOptionsWrapper,null,this.columnGroup);var e=this.columnController.getDisplayNameForColumnGroup(this.columnGroup,"header"),e=(this.appendHeaderGroupComp(e),this.setupResize(),this.addClasses(),this.setupWidth(),this.addAttributes(),this.setupMovingCss(),this.setupTooltip(),this.addFeature(this.context,new A.HoverFeature(this.columnGroup.getOriginalColumnGroup().getLeafColumns(),this.getGui())),new b.SetLeftFeature(this.columnGroup,this.getGui(),this.beans));e.init(),this.addDestroyFunc(e.destroy.bind(e))},E.prototype.setupMovingCss=function(){var t=this;this.columnGroup.getOriginalColumnGroup().getLeafColumns().forEach(function(e){t.addDestroyableEventListener(e,c.Column.EVENT_MOVING_CHANGED,t.onColumnMovingChanged.bind(t))}),this.onColumnMovingChanged()},E.prototype.setupTooltip=function(){var e=this.columnGroup.getColGroupDef();e&&e.headerTooltip&&(this.getGui().title=e.headerTooltip)},E.prototype.onColumnMovingChanged=function(){this.columnGroup.isMoving()?u.Utils.addCssClass(this.getGui(),"ag-header-cell-moving"):u.Utils.removeCssClass(this.getGui(),"ag-header-cell-moving")},E.prototype.addAttributes=function(){this.getGui().setAttribute("col-id",this.columnGroup.getUniqueId())},E.prototype.appendHeaderGroupComp=function(e){var t=this,i={displayName:e,columnGroup:this.columnGroup,setExpanded:function(e){t.columnController.setColumnGroupOpened(t.columnGroup.getOriginalColumnGroup(),e,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},n=(e||(e=(n=this.columnGroup.getLeafColumns())?n[0].getColDef().headerName:""),this.afterHeaderCompCreated.bind(this,e));this.componentRecipes.newHeaderGroupComponent(i).then(n)},E.prototype.afterHeaderCompCreated=function(e,t){this.appendChild(t),this.setupMove(t.getGui(),e),t.destroy&&this.addDestroyFunc(t.destroy.bind(t))},E.prototype.addClasses=function(){this.columnGroup.isPadding()?this.addCssClass("ag-header-group-cell-no-group"):this.addCssClass("ag-header-group-cell-with-group")},E.prototype.setupMove=function(e,t){var i,n,o=this;e&&!this.isSuppressMoving()&&(i=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),e&&(n={type:y.DragSourceType.HeaderCell,eElement:e,dragItemName:t,dragItemCallback:this.getDragItemForGroup.bind(this),dragSourceDropTarget:this.dragSourceDropTarget,dragStarted:function(){return i.forEach(function(e){return e.setMoving(!0,"uiColumnDragged")})},dragStopped:function(){return i.forEach(function(e){return e.setMoving(!1,"uiColumnDragged")})}},this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(function(){return o.dragAndDropService.removeDragSource(n)})))},E.prototype.getDragItemForGroup=function(){var t=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),i={},n=(t.forEach(function(e){return i[e.getId()]=e.isVisible()}),[]);return this.columnController.getAllDisplayedColumns().forEach(function(e){0<=t.indexOf(e)&&(n.push(e),u.Utils.removeFromArray(t,e))}),t.forEach(function(e){return n.push(e)}),{columns:n,visibleState:i}},E.prototype.isSuppressMoving=function(){var t=!1;return this.columnGroup.getLeafColumns().forEach(function(e){(e.getColDef().suppressMovable||e.isLockPosition())&&(t=!0)}),t||this.gridOptionsWrapper.isSuppressMovableColumns()},E.prototype.setupWidth=function(){this.addListenersToChildrenColumns(),this.addDestroyableEventListener(this.columnGroup,d.ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.destroyListenersOnChildrenColumns.bind(this))},E.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},E.prototype.addListenersToChildrenColumns=function(){var t=this,i=(this.destroyListenersOnChildrenColumns(),this.onWidthChanged.bind(this));this.columnGroup.getLeafColumns().forEach(function(e){e.addEventListener(c.Column.EVENT_WIDTH_CHANGED,i),e.addEventListener(c.Column.EVENT_VISIBLE_CHANGED,i),t.childColumnsDestroyFuncs.push(function(){e.removeEventListener(c.Column.EVENT_WIDTH_CHANGED,i),e.removeEventListener(c.Column.EVENT_VISIBLE_CHANGED,i)})})},E.prototype.destroyListenersOnChildrenColumns=function(){this.childColumnsDestroyFuncs.forEach(function(e){return e()}),this.childColumnsDestroyFuncs=[]},E.prototype.onWidthChanged=function(){this.getGui().style.width=this.columnGroup.getActualWidth()+"px"},E.prototype.setupResize=function(){var e,i=this;this.eHeaderCellResize=this.getRefElement("agResize"),this.columnGroup.isResizable()?(e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eHeaderCellResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)}),this.addDestroyFunc(e),this.gridOptionsWrapper.isSuppressAutoSize()||this.eHeaderCellResize.addEventListener("dblclick",function(e){var t=[];i.columnGroup.getDisplayedLeafColumns().forEach(function(e){e.getColDef().suppressAutoSize||t.push(e.getColId())}),0<t.length&&i.columnController.autoSizeColumns(t,"uiColumnResized")})):u.Utils.removeFromParent(this.eHeaderCellResize)},E.prototype.onResizeStart=function(e){var t=this,i=this.columnGroup.getDisplayedLeafColumns(),i=(this.resizeCols=u.Utils.filter(i,function(e){return e.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(e){return t.resizeStartWidth+=e.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(e){return t.resizeRatios.push(e.getActualWidth()/t.resizeStartWidth)}),null);(i=e?this.columnController.getDisplayedGroupAfter(this.columnGroup):i)?(e=i.getDisplayedLeafColumns(),this.resizeTakeFromCols=u.Utils.filter(e,function(e){return e.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(e){return t.resizeTakeFromStartWidth+=e.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(e){return t.resizeTakeFromRatios.push(e.getActualWidth()/t.resizeTakeFromStartWidth)})):(this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null)},E.prototype.onResizing=function(e,t){var i=[],t=this.normaliseDragChange(t);i.push({columns:this.resizeCols,ratios:this.resizeRatios,width:this.resizeStartWidth+t}),this.resizeTakeFromCols&&i.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-t}),this.columnController.resizeColumnSets(i,e,"uiColumnDragged")},E.prototype.normaliseDragChange=function(e){return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==c.Column.PINNED_LEFT&&(e*=-1):this.pinned===c.Column.PINNED_RIGHT&&(e*=-1),e},E.TEMPLATE='<div class="ag-header-group-cell"><div ref="agResize" class="ag-header-cell-resize"></div></div>',s([m.Autowired("gridOptionsWrapper"),a("design:type",f.GridOptionsWrapper)],E.prototype,"gridOptionsWrapper",void 0),s([m.Autowired("columnController"),a("design:type",p.ColumnController)],E.prototype,"columnController",void 0),s([m.Autowired("horizontalResizeService"),a("design:type",g.HorizontalResizeService)],E.prototype,"horizontalResizeService",void 0),s([m.Autowired("dragAndDropService"),a("design:type",y.DragAndDropService)],E.prototype,"dragAndDropService",void 0),s([m.Autowired("context"),a("design:type",m.Context)],E.prototype,"context",void 0),s([m.Autowired("componentRecipes"),a("design:type",C.ComponentRecipes)],E.prototype,"componentRecipes",void 0),s([m.Autowired("gridApi"),a("design:type",w.GridApi)],E.prototype,"gridApi",void 0),s([m.Autowired("columnApi"),a("design:type",h.ColumnApi)],E.prototype,"columnApi",void 0),s([m.Autowired("beans"),a("design:type",_.Beans)],E.prototype,"beans",void 0),s([m.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],E.prototype,"postConstruct",null),E);function E(e,t,i){var n=o.call(this,E.TEMPLATE)||this;return n.childColumnsDestroyFuncs=[],n.columnGroup=e,n.dragSourceDropTarget=t,n.pinned=i,n}t.HeaderGroupWrapperComp=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultColumnTypes={numericColumn:{headerClass:"ag-numeric-header",cellClass:"ag-numeric-cell"}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(85);function n(e,t,i,n){var o,n=n.agGrid,r=n+".quickFilterText",n=t.$eval(n);n?(e=e[0],o=new s.Grid(e,n,{$scope:t,$compile:i,quickFilterOnScope:r}),t.$on("$destroy",function(){o.destroy(),o=null})):console.warn("WARNING - grid options for ag-Grid not found. Please ensure the attribute ag-grid points to a valid object on the scope")}t.initialiseAgGridWithAngular1=function(e){e.module("agGrid",[]).directive("agGrid",function(){return{restrict:"A",controller:["$element","$scope","$compile","$attrs",n],scope:!0}})}},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__param||function(i,n){return function(e,t){n(e,t,i)}},c=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),u=i(3),d=i(5),h=i(12),p=i(137),f=i(87),g=i(6),i=i(7),f=(o=f.RowNodeCache,r(m,o),m.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},m.prototype.init=function(){o.prototype.init.call(this),this.getRow(0)},m.prototype.moveItemsDown=function(e,t,i){for(var n,o=e.getStartRow(),r=t+i,s=e.getEndRow()-1;o<=s;s--)s<r||((n=this.getRow(s-i,!0))?e.setRowNode(s,n):(e.setBlankRowNode(s),e.setDirty()))},m.prototype.insertItems=function(e,t,i){for(var n=e.getStartRow(),o=e.getEndRow(),r=[],s=0;s<i.length;s++){var a,l=t+s;n<=l&&l<o&&(a=i[s],l=e.setNewData(l,a),r.push(l))}return r},m.prototype.insertItemsAtIndex=function(t,i){var n=this,o=[],e=(this.forEachBlockInReverseOrder(function(e){e.getEndRow()<=t||(n.moveItemsDown(e,t,i.length),n.insertItems(e,t,i).forEach(function(e){return o.push(e)}))}),this.isMaxRowFound()&&this.hack_setVirtualRowCount(this.getVirtualRowCount()+i.length),this.onCacheUpdated(),{type:d.Events.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(e)},m.prototype.getRow=function(e,t){void 0===t&&(t=!1);var i=Math.floor(e/this.cacheParams.blockSize),n=this.getBlock(i);if(!n){if(t)return null;n=this.createBlock(i)}return n.getRow(e)},m.prototype.createBlock=function(e){e=new p.InfiniteBlock(e,this.cacheParams);return this.context.wireBean(e),this.postCreateBlock(e),e},m.prototype.refreshCache=function(){this.forEachBlockInOrder(function(e){return e.setDirty()}),this.checkBlockToLoad()},s([c.Autowired("eventService"),a("design:type",u.EventService)],m.prototype,"eventService",void 0),s([c.Autowired("context"),a("design:type",c.Context)],m.prototype,"context",void 0),s([c.Autowired("columnApi"),a("design:type",i.ColumnApi)],m.prototype,"columnApi",void 0),s([c.Autowired("gridApi"),a("design:type",g.GridApi)],m.prototype,"gridApi",void 0),s([l(0,c.Qualifier("loggerFactory")),a("design:type",Function),a("design:paramtypes",[h.LoggerFactory]),a("design:returntype",void 0)],m.prototype,"setBeans",null),s([c.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],m.prototype,"init",null),m);function m(e){return o.call(this,e)||this}t.InfiniteCache=f},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(1)),c=i(2),u=i(0),d=i(61),i=i(20),d=(o=d.RowNodeBlock,r(h,o),h.prototype.createBlankRowNode=function(e){var t=o.prototype.createBlankRowNode.call(this,e);return t.uiLevel=0,this.setIndexAndTopOnRowNode(t,e),t},h.prototype.setDataAndId=function(e,t,i){l.Utils.exists(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)},h.prototype.setRowNode=function(e,t){o.prototype.setRowNode.call(this,e,t),this.setIndexAndTopOnRowNode(t,e)},h.prototype.init=function(){o.prototype.init.call(this,{context:this.context,rowRenderer:this.rowRenderer})},h.prototype.getNodeIdPrefix=function(){return null},h.prototype.getRow=function(e){return this.getRowUsingLocalIndex(e)},h.prototype.setIndexAndTopOnRowNode=function(e,t){e.setRowIndex(t),e.rowTop=this.cacheParams.rowHeight*t},h.prototype.loadFromDatasource=function(){var e=this,t={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this),sortModel:this.cacheParams.sortModel,filterModel:this.cacheParams.filterModel,context:this.gridOptionsWrapper.getContext()};l.Utils.missing(this.cacheParams.datasource.getRows)?console.warn("ag-Grid: datasource is missing getRows method"):(1<l.Utils.getFunctionParameters(this.cacheParams.datasource.getRows).length&&(console.warn("ag-grid: It looks like your paging datasource is of the old type, taking more than one parameter."),console.warn("ag-grid: From ag-grid 1.9.0, now the getRows takes one parameter. See the documentation for details.")),setTimeout(function(){e.cacheParams.datasource.getRows(t)},0))},s([u.Autowired("gridOptionsWrapper"),a("design:type",c.GridOptionsWrapper)],h.prototype,"gridOptionsWrapper",void 0),s([u.Autowired("context"),a("design:type",u.Context)],h.prototype,"context",void 0),s([u.Autowired("rowRenderer"),a("design:type",i.RowRenderer)],h.prototype,"rowRenderer",void 0),s([u.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],h.prototype,"init",null),h);function h(e,t){e=o.call(this,e,t)||this;return e.cacheParams=t,e}t.InfiniteBlock=d},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=(Object.defineProperty(t,"__esModule",{value:!0}),i(14)),s=i(88),a=i(2),l=i(3),c=i(0),i=i(4),a=(u.prototype.create=function(e){var t=new r.RowNode,i=new s.ClientSideNodeManager(t,this.gridOptionsWrapper,this.context,this.eventService,this.columnController);return this.context.wireBean(t),i.setRowData(e),t},n([c.Autowired("gridOptionsWrapper"),o("design:type",a.GridOptionsWrapper)],u.prototype,"gridOptionsWrapper",void 0),n([c.Autowired("eventService"),o("design:type",l.EventService)],u.prototype,"eventService",void 0),n([c.Autowired("context"),o("design:type",c.Context)],u.prototype,"context",void 0),n([c.Autowired("columnController"),o("design:type",i.ColumnController)],u.prototype,"columnController",void 0),n([c.Bean("rowNodeFactory")],u));function u(){}t.RowNodeFactory=a},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(0)),c=i(2),u=i(89),d=i(20),h=i(3),p=i(9),f=i(13),g=i(5),i=(o=f.BeanStub,r(m,o),m.prototype.init=function(){this.rowModel.getType()===p.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.addDestroyableEventListener(this.eventService,g.Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},m.prototype.onCellValueChanged=function(e){this.doChangeDetection(e.node,e.column)},m.prototype.doChangeDetection=function(e,t){var i;this.gridOptionsWrapper.isSuppressChangeDetection()||(this.clientSideRowModel&&!e.isRowPinned()&&(i=this.gridOptionsWrapper.isAggregateOnlyChangedColumns(),(i=new u.ChangedPath(i)).addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(i)),this.rowRenderer.refreshCells())},s([l.Autowired("gridOptionsWrapper"),a("design:type",c.GridOptionsWrapper)],m.prototype,"gridOptionsWrapper",void 0),s([l.Autowired("rowModel"),a("design:type",Object)],m.prototype,"rowModel",void 0),s([l.Autowired("rowRenderer"),a("design:type",d.RowRenderer)],m.prototype,"rowRenderer",void 0),s([l.Autowired("eventService"),a("design:type",h.EventService)],m.prototype,"eventService",void 0),s([l.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],m.prototype,"init",null),s([l.Bean("changeDetectionService")],m));function m(){return null!==o&&o.apply(this,arguments)||this}t.ChangeDetectionService=i},function(e,t,i){"use strict";var n,o,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(r<3?o(s):3<r?o(t,i,s):o(t,i))||s);return 3<r&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=(Object.defineProperty(t,"__esModule",{value:!0}),i(8)),c=i(0),u=i(2),d=i(11),h=i(1),p=i(3),f=i(5),g=i(20),i=i(29),l=(o=l.Component,r(m,o),m.prototype.postConstruct=function(){this.setTemplate(this.getTemplate()),this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()?(this.addDestroyableEventListener(this.eventService,f.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addDestroyableEventListener(this.btFirst,"click",this.onBtFirst.bind(this)),this.addDestroyableEventListener(this.btLast,"click",this.onBtLast.bind(this)),this.addDestroyableEventListener(this.btNext,"click",this.onBtNext.bind(this)),this.addDestroyableEventListener(this.btPrevious,"click",this.onBtPrevious.bind(this)),this.onPaginationChanged()):this.setVisible(!1)},m.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},m.prototype.setCurrentPageLabel=function(){var e=0<this.paginationProxy.getTotalPages(),t=this.paginationProxy.getCurrentPage();this.lbCurrent.innerHTML=this.formatNumber(e?t+1:0)},m.prototype.formatNumber=function(e){var t=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();return t?t({value:e}):h._.formatNumberCommas(e)},m.prototype.getTemplate=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of");return'<div class="ag-paging-panel ag-font-style">\n                <span ref="eSummaryPanel" class="ag-paging-row-summary-panel">\n                    <span ref="lbFirstRowOnPage"></span> '+i+' <span ref="lbLastRowOnPage"></span> '+n+' <span ref="lbRecordCount"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel">\n                    <button type="button" class="ag-paging-button" ref="btFirst">'+e("first","First")+'</button>\n                    <button type="button" class="ag-paging-button" ref="btPrevious">'+e("previous","Previous")+"</button>\n                    "+t+' <span ref="lbCurrent"></span> '+n+' <span ref="lbTotal"></span>\n                    <button type="button" class="ag-paging-button" ref="btNext">'+e("next","Next")+'</button>\n                    <button type="button" class="ag-paging-button" ref="btLast">'+e("last","Last")+"</button>\n                </span>\n            </div>"},m.prototype.onBtNext=function(){this.paginationProxy.goToNextPage()},m.prototype.onBtPrevious=function(){this.paginationProxy.goToPreviousPage()},m.prototype.onBtFirst=function(){this.paginationProxy.goToFirstPage()},m.prototype.onBtLast=function(){this.paginationProxy.goToLastPage()},m.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages(),n=0===e,n=(this.btPrevious.disabled=n,this.btFirst.disabled=n,this.isZeroPagesToDisplay()),t=(this.btNext.disabled=t&&e===i-1||n,!t||n||e===i-1);this.btLast.disabled=t},m.prototype.updateRowLabels=function(){var e,t,i=this.paginationProxy.getCurrentPage(),n=this.paginationProxy.getPageSize(),o=this.paginationProxy.isLastPageFound(),r=this.paginationProxy.isLastPageFound()?this.paginationProxy.getTotalRowCount():null;this.isZeroPagesToDisplay()?t=e=0:(t=(e=n*i+1)+n-1,o&&r<t&&(t=r)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(e),this.lbLastRowOnPage.innerHTML=this.formatNumber(t)},m.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&0===t},m.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),i=this.paginationProxy.isLastPageFound()?this.paginationProxy.getTotalRowCount():null;e?(this.lbTotal.innerHTML=this.formatNumber(t),this.lbRecordCount.innerHTML=this.formatNumber(i)):(e=this.gridOptionsWrapper.getLocaleTextFunc()("more","more"),this.lbTotal.innerHTML=e,this.lbRecordCount.innerHTML=e)},s([c.Autowired("gridOptionsWrapper"),a("design:type",u.GridOptionsWrapper)],m.prototype,"gridOptionsWrapper",void 0),s([c.Autowired("eventService"),a("design:type",p.EventService)],m.prototype,"eventService",void 0),s([c.Autowired("paginationProxy"),a("design:type",i.PaginationProxy)],m.prototype,"paginationProxy",void 0),s([c.Autowired("rowRenderer"),a("design:type",g.RowRenderer)],m.prototype,"rowRenderer",void 0),s([d.RefSelector("btFirst"),a("design:type",HTMLButtonElement)],m.prototype,"btFirst",void 0),s([d.RefSelector("btPrevious"),a("design:type",HTMLButtonElement)],m.prototype,"btPrevious",void 0),s([d.RefSelector("btNext"),a("design:type",HTMLButtonElement)],m.prototype,"btNext",void 0),s([d.RefSelector("btLast"),a("design:type",HTMLButtonElement)],m.prototype,"btLast",void 0),s([d.RefSelector("lbRecordCount"),a("design:type",Object)],m.prototype,"lbRecordCount",void 0),s([d.RefSelector("lbFirstRowOnPage"),a("design:type",Object)],m.prototype,"lbFirstRowOnPage",void 0),s([d.RefSelector("lbLastRowOnPage"),a("design:type",Object)],m.prototype,"lbLastRowOnPage",void 0),s([d.RefSelector("eSummaryPanel"),a("design:type",Object)],m.prototype,"eSummaryPanel",void 0),s([d.RefSelector("lbCurrent"),a("design:type",Object)],m.prototype,"lbCurrent",void 0),s([d.RefSelector("lbTotal"),a("design:type",Object)],m.prototype,"lbTotal",void 0),s([c.PostConstruct,a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],m.prototype,"postConstruct",null),m);function m(){return o.call(this)||this}t.PaginationComp=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(62),o=i(85),r=!1;t.initialiseAgGridWithWebComponents=function(){var e,t;console.warn("ag-grid: initialiseAgGridWithWebComponents is deprecated. Please use the ag-grid-webcomponent dependency instead. "),r||(r=!0,"undefined"!=typeof document&&document.registerElement||console.error("ag-Grid: unable to find document.registerElement() function, unable to initialise ag-Grid as a Web Component"),e=Object.create(HTMLElement.prototype),n.ComponentUtil.ALL_PROPERTIES.forEach(function(t){Object.defineProperty(e,t,{set:function(e){this.__agGridSetProperty(t,e)},get:function(){return this.__agGridGetProperty(t)},enumerable:!0,configurable:!0})}),(t=e).__agGridSetProperty=function(e,t){this.__attributes||(this.__attributes={}),this.__attributes[e]=t;var i={};i[e]={currentValue:t},this.onChange(i)},t.onChange=function(e){this._initialised&&n.ComponentUtil.processOnChange(e,this._gridOptions,this.api,this.columnApi)},t.__agGridGetProperty=function(e){return this.__attributes||(this.__attributes={}),this.__attributes[e]},t.setGridOptions=function(e){var t=this.globalEventListener.bind(this),t=(this._gridOptions=n.ComponentUtil.copyAttributesToGridOptions(e,this),{globalEventListener:t});this._agGrid=new o.Grid(this,this._gridOptions,t),this.api=e.api,this.columnApi=e.columnApi,this._initialised=!0},t.createdCallback=function(){for(var e=0;e<this.attributes.length;e++){var t=this.attributes[e];this.setPropertyFromAttribute(t)}},t.setPropertyFromAttribute=function(e){var t="string"==typeof(t=e.nodeName)?t.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}):t,e=e.nodeValue;0<=n.ComponentUtil.ALL_PROPERTIES.indexOf(t)&&(this[t]=e)},t.attachedCallback=function(e){},t.detachedCallback=function(e){},t.attributeChangedCallback=function(e){e=this.attributes[e];this.setPropertyFromAttribute(e)},t.globalEventListener=function(e,t){var e=e.toLowerCase(),i=new Event(e),t=(i.agGridDetails=t,this.dispatchEvent(i),"on"+e);"function"==typeof this[t]&&this[t](i)},document.registerElement("ag-grid",{prototype:e}))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);function o(e){var t=this;this.items=[],this.params=e,this.eGui=document.createElement("div"),this.eGui.innerHTML=o.TEMPLATE,this.eHeader=this.eGui.querySelector('[ref="tabHeader"]'),this.eBody=this.eGui.querySelector('[ref="tabBody"]'),n.Utils.addCssClass(this.eGui,e.cssClass),e.items&&e.items.forEach(function(e){return t.addItem(e)})}o.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e},o.prototype.getMinWidth=function(){var t=document.createElement("span"),i=(t.style.position="fixed",this.eGui.appendChild(t),0);return this.items.forEach(function(e){n.Utils.removeAllChildren(t);e=e.tabbedItem.bodyPromise.resolveNow(null,function(e){return e.cloneNode(!0)});null!=e&&(t.appendChild(e),i<t.offsetWidth&&(i=t.offsetWidth))}),this.eGui.removeChild(t),i},o.prototype.showFirstItem=function(){0<this.items.length&&this.showItemWrapper(this.items[0])},o.prototype.addItem=function(e){var t=document.createElement("span"),e=(t.appendChild(e.title),n.Utils.addCssClass(t,"ag-tab"),this.eHeader.appendChild(t),{tabbedItem:e,eHeaderButton:t});this.items.push(e),t.addEventListener("click",this.showItemWrapper.bind(this,e))},o.prototype.showItem=function(t){var e=n.Utils.find(this.items,function(e){return e.tabbedItem===t});e&&this.showItemWrapper(e)},o.prototype.showItemWrapper=function(e){var t=this;this.params.onItemClicked&&this.params.onItemClicked({item:e.tabbedItem}),this.activeItem===e?n.Utils.callIfPresent(this.params.onActiveItemClicked):(n.Utils.removeAllChildren(this.eBody),e.tabbedItem.bodyPromise.then(function(e){t.eBody.appendChild(e)}),this.activeItem&&n.Utils.removeCssClass(this.activeItem.eHeaderButton,"ag-tab-selected"),n.Utils.addCssClass(e.eHeaderButton,"ag-tab-selected"),(this.activeItem=e).tabbedItem.afterAttachedCallback&&e.tabbedItem.afterAttachedCallback(this.afterAttachedParams))},o.prototype.getGui=function(){return this.eGui},o.TEMPLATE='<div><div ref="tabHeader" class="ag-tab-header"></div><div ref="tabBody" class="ag-tab-body"></div></div>',t.TabbedLayout=o},function(e,t,i){"use strict";function n(){this.isLayoutPanel=!0,this.childPanels=[],this.eGui=document.createElement("div"),this.eGui.style.height="100%"}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.addPanel=function(e,t){e=e.isLayoutPanel?(this.childPanels.push(e),e.getGui()):e;t&&(e.style.height=t),this.eGui.appendChild(e)},n.prototype.getGui=function(){return this.eGui},n.prototype.doLayout=function(){for(var e=0;e<this.childPanels.length;e++)this.childPanels[e].doLayout()},t.VerticalStack=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);t.simpleHttpRequest=function(e){return new n.Promise(function(t){var i=new XMLHttpRequest;i.open("GET",e.url),i.send(),i.onreadystatechange=function(){var e;4==i.readyState&&200==i.status&&(e=JSON.parse(i.responseText),t(e))}})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(1);t.defaultGroupComparator=function(e,t,i,n,o){void 0===o&&(o=!1),console.warn("ag-Grid: Since ag-grid 11.0.0 defaultGroupComparator is not necessary. You can remove this from your colDef");var r=l.Utils.exists(i)&&i.group,s=l.Utils.exists(n)&&n.group,a=!r&&!s;return r&&s?l.Utils.defaultComparator(i.key,n.key,o):a?l.Utils.defaultComparator(e,t,o):r?1:-1}},function(e,t,i){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.wrap=function(e,t,i,n){var o=this,r=this.createWrapper(e,n);return t.forEach(function(e){o.createMethod(r,e,!0)}),i&&i.forEach(function(e){o.createMethod(r,e,!1)}),r},n.prototype.createMethod=function(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))},n.prototype.createMethodProxy=function(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&console.warn("ag-Grid: Framework component is missing the method "+t+"()"),null)}},t.BaseComponentWrapper=n}],o={},n.m=i,n.c=o,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=119);function n(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i,o}),!function(){function t(e){var n={};return _.each(e,function(e,i){_.isPlainObject(e)?_.each(t(e),function(e,t){n[i+"."+t]=e}):n[i]=e}),n}$.i18n.load(t(window.I18n)),window.t=function(){return $.i18n._.apply($.i18n,Array.prototype.slice.call(arguments))}}(),AGN=window.AGN||(window.AGN={}),AGN.Lib=window.AGN.Lib||(window.AGN.Lib={}),AGN.Lib.WM=window.AGN.Lib.WM||(window.AGN.Lib.WM={}),AGN.Opt=window.AGN.Opt||(window.AGN.Opt={}),AGN.Opt.Fields=window.AGN.Opt.Fields||(window.AGN.Opt.Fields={}),AGN.Opt.Forms=window.AGN.Opt.Forms||(window.AGN.Opt.Forms={}),AGN.Opt.Controllers=window.AGN.Opt.Controllers||(window.AGN.Opt.Controllers={}),AGN.Opt.Templates=window.AGN.Opt.Templates||(window.AGN.Opt.Templates={}),AGN.Opt.TableCellRenderers=window.AGN.Opt.TableCellRenderers||(window.AGN.Opt.TableCellRenderers={}),AGN.Opt.TableHeaderComponents=window.AGN.Opt.TableHeaderComponents||(window.AGN.Opt.TableHeaderComponents={}),AGN.Opt.Charts=window.AGN.Opt.Charts||(window.AGN.Opt.Charts={}),AGN.Opt.Validators=window.AGN.Opt.Validators||(window.AGN.Opt.Validators={}),AGN.Opt.Components=window.AGN.Opt.Components||(window.AGN.Opt.Components={}),AGN.url=function(e,t){return window.agnResolveRelativeUrl?(e&&"/"===e.charAt(0)&&(e=e.substring(1)),window.agnResolveRelativeUrl(e,t)):(console.error("window.agnResolveRelativeUrl is not defined"),e)},AGN.isIE=/MSIE|Trident/.test(window.navigator.userAgent),AGN.runAll=function(e){AGN.Lib.CoreInitializer.autorun(e),AGN.Lib.DomInitializer.autorun(e)},ace.config.set("basePath",AGN.url(window.aceEditorPath)),ace.config.setDefaultValue("session","useWorker",!1),!function(){var t=ace.require("ace/snippets").snippetManager;ace.require("ace/config");ace.config.loadModule("ace/snippets/html",function(e){e&&t.files&&((t.files.html=e).snippets=t.parseSnippetFile(e.snippetText),e.snippets.push({content:'[agnALTER column="${1}"]',name:"agn:ALTER",tabTrigger:"alt"},{content:'[agnBANNER banner="${1}" banner="${2}"]',name:"agn:BANNER",tabTrigger:"bnr"},{content:'[agnCALC column="${1}" op="${2}" value="${3}"]',name:"agn:CALC",tabTrigger:"clc"},{content:'[agnCUSTOMDATE offset="${1}" format="${2}"]',name:"agn:CUSTOMDATE",tabTrigger:"cusd"},{content:'[agnCUSTOMDATE_DE offset="${1}" format="${2}"]',name:"agn:CUSTOMDATE_DE",tabTrigger:"cust"},{content:"[agnCUSTOMERID]",name:"agn:CUSTOMERID",tabTrigger:"cst"},{content:"[agnDATE]",name:"agn:DATE",tabTrigger:"dte"},{content:'[agnDATEDB column="${1}" format="${2}"]',name:"agn:DATEDB",tabTrigger:"datb"},{content:'[agnDATEDB_DE column="${1}" format="${2}"]',name:"agn:DATEDB_DE",tabTrigger:"dadb"},{content:'[agnDAYS_UNTIL column="${1}"]',name:"agn:DAYS_UNTIL",tabTrigger:"daunt"},{content:'[agnDAYS_UNTILL column="${1}"]',name:"agn:DAYS_UNTILL",tabTrigger:"duti"},{content:'[agnDB column="${1}"]',name:"agn:DB",tabTrigger:"db"},{content:"[agnEMAIL]",name:"agn:EMAIL",tabTrigger:"ema"},{content:'[agnFORM name="${1}"]',name:"agn:FORM",tabTrigger:"form"},{content:'[agnIMAGE name="${1}"]',name:"agn:IMAGE",tabTrigger:"img"},{content:'[agnIMGLINK name="${1}"]',name:"agn:IMGLINK",tabTrigger:"imgli"},{content:"[agnPROFILE]",name:"agn:PROFILE",tabTrigger:"prof"},{content:"[agnSUBSCRIBERCOUNT]",name:"agn:SUBSCRIBERCOUNT",tabTrigger:"subs"},{content:'[agnSWYN networks="${1}" title="${2}"]',name:"agn:SWYN",tabTrigger:"swy"},{content:'[agnTITLE type="${1:2}"]',name:"agn:TITLE",tabTrigger:"ti"},{content:'[agnTITLEFIRST type="${1:2}"]',name:"agn:TITLEFIRST",tabTrigger:"tifr"},{content:'[agnTITLEFULL type="${1:2}"]',name:"agn:TITLEFULL",tabTrigger:"tifu"},{content:"[agnUNSUBSCRIBE]",name:"agn:UNSUBSCRIBE",tabTrigger:"unsub"},{content:'[agnDYN name="${1}"/]',name:"agn:DYN",tabTrigger:"dyn"},{content:"BIRTHDAY",name:"birthday",tabTrigger:"h"},{content:"CREATION_DATE",name:"creation_date",tabTrigger:"h"},{content:"CUSTOMER_ID",name:"customer_id",tabTrigger:"h"},{content:"DATASOURCE_ID",name:"datasource_id",tabTrigger:"h"},{content:"EMAIL",name:"email",tabTrigger:"h"},{content:"FACEBOOK_STATUS",name:"facebook_status",tabTrigger:"h"},{content:"FIRSTNAME",name:"firstname",tabTrigger:"h"},{content:"FOURSQUARE_STATUS",name:"foursquare_status",tabTrigger:"h"},{content:"GENDER",name:"gender",tabTrigger:"h"},{content:"GOOGLE_STATUS",name:"google_status",tabTrigger:"h"},{content:"LASTNAME",name:"lastname",tabTrigger:"h"},{content:"MAILTYPE",name:"mailtype",tabTrigger:"h"},{content:"ML_FEHLDATEN",name:"ml_fehldaten",tabTrigger:"h"},{content:"TIMESTAMP",name:"timestamp",tabTrigger:"h"},{content:"TITLE",name:"title",tabTrigger:"h"},{content:"TWITTER_STATUS",name:"twitter_status",tabTrigger:"h"},{content:"XING_STATUS",name:"xing_status",tabTrigger:"h"},{content:"HTML-Version",name:"html-version",tabTrigger:"h"},{content:"Text",name:"text",tabTrigger:"h"}),t.register(e.snippets,e.scope))})}(),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;r<n;r++)if(t=i[r],e.call(o,t,r,i))return t}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;r<n;r++)if(t=i[r],e.call(o,t,r,i))return r;return-1},enumerable:!1,configurable:!1,writable:!1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0==n)return!1;var o,r,t=0|t,s=Math.max(0<=t?t:n-Math.abs(t),0);for(;s<n;){if((o=i[s])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;s++}return!1}}),!function(){var i=$.ui.dialog.prototype._allowInteraction;$.ui.dialog.prototype._allowInteraction=function(e){var t=$(e.target);return!(!t.closest(".cke_dialog").length&&!t.closest(".cke_panel_frame").length)||i.apply(this,arguments)}}(),Function.prototype.bind&&window.console&&"object"==typeof console.log&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call),!function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define([],t.bind(e,e)):t(e)}("undefined"!=typeof global?global:this,function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;function t(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,i=String(e),n=i.length,o=-1,r="",s=i.charCodeAt(0);++o<n;)0==(t=i.charCodeAt(o))?r+="":r+=1<=t&&t<=31||127==t||0==o&&48<=t&&t<=57||1==o&&48<=t&&t<=57&&45==s?"\\"+t.toString(16)+" ":(0!=o||1!=n||45!=t)&&(128<=t||45==t||95==t||48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122)?i.charAt(o):"\\"+i.charAt(o);return r}return e.CSS||(e.CSS={}),e.CSS.escape=t}),!function(t){t.fn.modal.Constructor.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(e){setTimeout(t.proxy(function(){27==e.which&&this.hide()},this),100)},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")}}(jQuery),!function(){var e;jQuery.browser=(e=navigator.userAgent.toLowerCase(),[(e=/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[])[1]||"",e[2]][0])}(jQuery),!function(s){s.extend(!0,s.fn.dirty.prototype,{checkValues:function(e){var o=this,r=!1;this.form.find("select").each(function(e,t){var t=s(t),i=o.isSelectFieldDirty(t);t.data(o.statuses.dataIsDirty,i),r|=i}),this.form.find("input, textarea").each(function(e,t){var i=o.isRadioOrCheckbox(t),n=o.isFileInput(t),t=s(t),i=i?o.isCheckboxDirty(t):n?o.isFileInputDirty(t):o.isFieldDirty(t);t.data(o.statuses.dataIsDirty,i),r|=i}),r?o.setDirty():o.setClean()},saveInitialValues:function(){var o=this;this.form.find("input, select, textarea").each(function(e,t){var i=s(t),e=((i.attr("id")||i.attr("name"))&&i.attr("id",i.prop("tagName__"+e)),o.isRadioOrCheckbox(t)),n=o.isFileInput(t);e?(e=s(t).is(":checked")?"checked":"unchecked",i.data(o.statuses.dataInitialValue,e)):n?i.data(o.statuses.dataInitialValue,JSON.stringify(t.files)):i.data(o.statuses.dataInitialValue,i.val()||"")})},backupData:function(){var o=this,r={};return o.form.find("input, select, textarea").each(function(e,t){var t=s(t),i=t.attr("id")||t.attr("name"),n={};n[o.statuses.dataInitialValue]=t.data(o.statuses.dataInitialValue),n[o.statuses.dataIsDirty]=t.data(o.statuses.dataIsDirty),r[i]=n}),r},restoreData:function(n){var o=this;n&&o.form.find("input, select, textarea").each(function(e,t){var t=s(t),i=t.attr("id")||t.attr("name"),i=n[i];i&&(t.data(o.statuses.dataInitialValue,i[o.statuses.dataInitialValue]),t.data(o.statuses.dataIsDirty,i[o.statuses.dataIsDirty]))}),o.checkValues()},isSelectFieldDirty:function(e){var t=e.data(this.statuses.dataInitialValue)||"",e=e.val()||"";return!_.isEqual(e,t)},resetForm:function(){var r=this;this.form.find("select").each(function(e,t){var t=s(t),i=t.data(r.statuses.dataInitialValue);t.data("select2")?t.select2("val",i):t.val(i)}),this.form.find("input, textarea").each(function(e,t){var i=s(t),n=r.isRadioOrCheckbox(t),o=r.isFileInput(t);n&&(n=i.data(r.statuses.dataInitialValue),i.prop("checked","checked"===n)),o?(t.value="",s(t).data(r.statuses.dataInitialValue,JSON.stringify(t.files))):(n=i.data(r.statuses.dataInitialValue),i.val(n))}),this.checkValues()}})}(jQuery),!function(e){e.fn.all?console.error("$.fn.all is already defined"):e.fn.extend({all:function(e){return this.filter(e).add(this.find(e))}}),e.fn.exists?console.error("$.fn.exists is already defined"):e.fn.extend({exists:function(){return 0<this.length}}),e.fn.json?console.error("$.fn.json is already defined"):e.fn.extend({json:function(){return JSON.parse(this.html())}})}(jQuery),!function(t){t.fn.extend({ensureLoad:function(e){return this.each(function(){this.complete?e.call(this):t(this).on("load",e)})}})}(jQuery),$.extend(!0,$.inputmask.defaults.aliases,{datetime:{regex:{quartspre:new RegExp("0|1|3|4"),quartspost:new RegExp("00|15|30|45"),halfspre:new RegExp("0|3"),halfspost:new RegExp("00|30")},definitions:{q:{validator:function(e,t,i,n,o){var r=o.regex.quartspost.test(e);return!(!n&&!r)||(o.regex.quartspost.test(e[0]+"5")?{c:"5"}:{c:"0"})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){o.regex.quartspre.test(e);if(n)return!0;for(var r,s=parseInt(e+"0"),a=["00","15","30","45"],l=100,c=0;c<a.length;c++){var u=a[c];parsedNum=parseInt(u),Math.abs(parsedNum-s)<l&&(l=Math.abs(parsedNum-s),r=u)}return{caret:i+2,insert:[{pos:i,c:r[0]},{pos:i+1,c:r[1]}]}},cardinality:1}]},u:{validator:function(e,t,i,n,o){o=o.regex.halfspost.test(e);return!(!n&&!o)||{c:"0"}},cardinality:2,prevalidator:[{validator:function(e,t,i,n,o){o.regex.halfspre.test(e);if(n)return!0;for(var r,s=parseInt(e+"0"),a=["00","30"],l=100,c=0;c<a.length;c++){var u=a[c];parsedNum=parseInt(u),Math.abs(parsedNum-s)<l&&(l=Math.abs(parsedNum-s),r=u)}return{caret:i+2,insert:[{pos:i,c:r[0]},{pos:i+1,c:r[1]}]}},cardinality:1}]}}},"h:quarts t":{mask:"h:q t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:quarts":{mask:"h:q",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:halfs t":{mask:"h:u t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:halfs":{mask:"h:u",placeholder:"hh:mm",alias:"datetime",hourFormat:"24"},"h:00 t":{mask:"h:00 t\\m",placeholder:"hh:00 xm",alias:"datetime",hourFormat:"12"},"h:00":{mask:"h:00",placeholder:"hh:00",alias:"datetime",hourFormat:"24"}}),$.fn.serializeObject=function(){var e={};return $.each(this.serializeArray(),function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$.fn.serializeFormDataObject=function(){var i=this.serializeObject();return this.find("input[type=file]").each(function(){var e,t;!$(this).is(":disabled")&&this.name&&(0==(e=this.files).length&&(e=[new File([],"",{type:"application/octet-stream"})]),i[this.name]?(t=i[this.name],$.isArray(t)?i[this.name]=t.concat(e):i[this.name]=[t].concat(e)):1<e.length?i[this.name]=e:i[this.name]=e[0])}),i},!function(e){e.fn.style?console.error("$.fn.style is already defined"):e.fn.extend({style:function(t,i,n){if(void 0===i)return this.css(t);e.isFunction(i)?this.each(function(){var e;this.style&&(e=i.call(this,this.style.getPropertyValue(t)),this.style.setProperty(t,e,n))}):this.each(function(){this.style&&this.style.setProperty(t,i,n)})}})}(jQuery),!function(e){String.prototype.trim&&(e.trim=function(e){return null==e?"":(e+"").trim()})}(jQuery),$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(e){this.options.title||e.html("&#160;"),e.html(this.options.title)}})),AGN.Opt.Components.JsPlumbFixedBezierConnector=function(e){var i=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this.type="FixedBezierConnector",this._compute=function(e){var t="opposite"===e.anchorOrientation?2:1.5;i.addSegment(this,"Bezier",{x1:e.tx,y1:e.ty,x2:e.sx,y2:e.sy,cp1x:e.tx+e.to[0]*e.w/t,cp1y:e.ty+e.to[1]*e.h/t,cp2x:e.sx+e.so[0]*e.w/t,cp2y:e.sy+e.so[1]*e.h/t})}},_.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g},jQuery.extend(jQuery.fn.pickadate.defaults,{monthsFull:t("date.monthsFull"),monthsShort:t("date.monthsShort"),weekdaysFull:t("date.weekdaysFull"),weekdaysShort:t("date.weekdaysShort"),labelMonthNext:t("date.nextMonth"),labelMonthPrev:t("date.prevMonth"),labelMonthSelect:t("date.selectMonth"),labelYearSelect:t("date.selectYear"),today:t("defaults.today"),clear:t("defaults.delete"),close:t("defaults.close"),firstDay:t("date.firstDayOfWeek"),format:t("date.format"),hiddenName:!0}),jQuery.extend(jQuery.fn.pickatime.defaults,{clear:t("defaults.delete"),format:t("time.format"),hiddenName:!0}),window.onpopstate=function(){window.location.reload()},jQuery.extend($.fn.select2.defaults,{formatNoMatches:function(e){return t("selects.noMatches",e)},formatInputTooShort:function(e,i){return t("selects.errors.inputTooShort",i)},formatInputTooLong:function(e,i){return t("selects.errors.inputTooLong",i)},formatSelectionTooBig:function(e){return t("selects.errors.selectionTooBig",e)},formatLoadMore:function(e){return t("selects.loadMore")},formatSearching:function(){return t("selects.loadMore")},formatAjaxError:function(){return t("selects.errors.ajax")},formatMatches:function(e){return 1<e?t("selects.matches",e):t("selects.matchesSing",e)}}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return!((t="number"!=typeof t?0:t)+e.length>this.length)&&-1!==this.indexOf(e,t)}),!function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.svg4everybody=t()}):"object"==typeof exports?module.exports=t():e.svg4everybody=t()}(this,function(){function u(e,t){if(t){var i=!e.getAttribute("viewBox")&&t.getAttribute("viewBox"),n=document.createDocumentFragment(),o=t.cloneNode(!0);for(i&&e.setAttribute("viewBox",i);o.childNodes.length;)n.appendChild(o.firstChild);e.appendChild(n)}}return function(e){e=e||{};var r=document.getElementsByTagName("use"),s="polyfill"in e?e.polyfill:/\bEdge\/12\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent)||(navigator.userAgent.match(/AppleWebKit\/(\d+)/)||[])[1]<537,a=e.validate,l=window.requestAnimationFrame||setTimeout,c={};s&&function e(){for(;n=r[0];){var t,i,n,o=n.parentNode;o&&/svg/i.test(o.nodeName)&&(i=n.getAttribute("xlink:href"),!s||a&&!a(i,o,n)||(t=(i=i.split("#"))[0],i=i[1],o.removeChild(n),t.length?((n=c[t]=c[t]||new XMLHttpRequest).s||(n.s=[],n.open("GET",t),n.send()),n.s.push([o,i]),function(e){e.onreadystatechange=function(){var t;4===e.readyState&&((t=document.createElement("x")).innerHTML=e.responseText,e.s.splice(0).map(function(e){u(e[0],t.querySelector("#"+e[1].replace(/(\W)/g,"\\$1")))}))},e.onreadystatechange()}(n)):u(o,document.getElementById(i))))}l(e,17)}()}}),AGN.Opt.Templates.modal='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         {{= content }}       </div>     </div>   </div> </div>',AGN.Opt.Templates["modal-yes-no-cancel"]='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         {{= content }}       </div>       <div class="modal-footer">         <div class="btn-group">           <button type="button" class="btn btn-default btn-large pull-left" data-confirm-negative="cancel" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= t(\'defaults.cancel\') }}</span>           </button>           <button type="button" class="btn btn-default btn-large" data-confirm-negative="no" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= t(\'defaults.no\') }}</span>           </button>           <button type="button" class="btn btn-primary btn-large" data-confirm-positive="yes" data-dismiss="modal">             <i class="icon icon-check"></i>             <span class="text">{{= t(\'defaults.yes\') }}</span>           </button>         </div>       </div>     </div>   </div> </div>',AGN.Opt.Templates["modal-yes-no-cancel-save-choice"]='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         <div class="form-group">           <div class="col-sm-12">           {{= content }}           </div>         </div>         <div class="form-group">           <div class="col-sm-8">             <label class="control-label-left">               {{ if(!choiceContent) { }}                 {{= t(\'defaults.remember.choice\') }}               {{ } else { }}                 {{= choiceContent }}               {{ } }}             </label>           </div>           <div class="col-sm-4">             <label class="toggle">               <input type="checkbox" name="confirm-save-choice">               <div class="toggle-control"></div>             </label>           </div>         </div>       </div>       <div class="modal-footer">         <div class="btn-group">           <button type="button" class="btn btn-default btn-large pull-left" data-confirm-negative="cancel" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= t(\'defaults.cancel\') }}</span>           </button>           <button type="button" class="btn btn-default btn-large" data-confirm-negative="no" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= t(\'defaults.no\') }}</span>           </button>           <button type="button" class="btn btn-primary btn-large" data-confirm-positive="yes" data-dismiss="modal">             <i class="icon icon-check"></i>             <span class="text">{{= t(\'defaults.yes\') }}</span>           </button>         </div>       </div>     </div>   </div> </div>',AGN.Opt.Templates.error='<div class="backdrop backdrop-error js-close-error overlay-box">     <div class="notification notification-alert overlay-content">         <div class="notification-header">             <p class="headline">                 <i class="icon icon-state-alert"></i>                 <span class="text">{{= headline }}</span>                 <i class="icon icon-times-circle close-icon js-close-error"></i>             </p>         </div>         <div class="notification-content">             <p>{{= text }}</p>             <button type="button" class="btn btn-regular btn-primary vspace-top-10" onclick="location.reload();">                 <i class="icon icon-repeat"></i>                 <span class="text">{{= reload }}</span>             </button>         </div>     </div> </div>',AGN.Opt.Templates["permission-denied"]='<div class="backdrop backdrop-error js-close-error overlay-box">     <div class="notification notification-alert overlay-content">         <div class="notification-header">             <p class="headline">                 <i class="icon icon-state-alert"></i>                 <span class="text">{{= title }}</span>                 <i class="icon icon-times-circle close-icon js-close-error"></i>             </p>         </div>         <div class="notification-content">             <p>{{= text }}</p>             <button type="button" class="btn btn-regular btn-primary vspace-top-10 vspace-bottom-10 js-close-error" style="float: right">                 <i class="icon icon-check"></i>                 <span class="text">{{= btn }}</span>             </button>         </div>     </div> </div>',AGN.Opt.Templates["autosave-restore"]='<div class="modal">   <div class="modal-dialog {{= modalClass }}">     <div class="modal-content">       <div class="modal-header">         <button type="button" class="close-icon close" data-dismiss="modal">           <i aria-hidden="true" class="icon icon-times-circle"></i>         </button>         <h4 class="modal-title">{{= title }}</h4>       </div>       <div class="modal-body">         {{= content }}       </div>       <div class="modal-footer">         <div class="btn-group">           <button type="button" class="btn btn-default btn-large js-confirm-negative" data-dismiss="modal">             <i class="icon icon-times"></i>             <span class="text">{{= negative }}</span>           </button>           <button type="button" class="btn btn-primary btn-large js-confirm-positive" data-dismiss="modal">             <i class="icon icon-check"></i>             <span class="text">{{= positive }}</span>           </button>         </div>       </div>     </div>   </div> </div>',AGN.Opt.Templates["tooltip-template"]='<div class="tooltip {{= tooltipStyle }}" role="tooltip">   <div class="tooltip-arrow {{= arrowStyle }}"></div>   <div class="tooltip-inner {{= innerStyle }}"></div> </div>',AGN.Opt.Templates["tooltip-message-with-title"]='<div class="helper-popup-header">{{= title }}</div> <div class="helper-popup-content">{{= content }}</div>',AGN.Opt.Templates["tooltip-message-just-content"]='<div class="helper-popup-content">{{= content }}</div>',AGN.Opt.Templates["table-controls-top"]='{{ if (showRecordsCount || pagination) { }} <div class="table-controls clearfix">   {{ if (showRecordsCount) { }}   <div class="table-control pull-left">     <div class="well">{{= t(\'tables.range\', itemStart, itemEnd, itemTotal) }}</div>   </div>   {{ } }}  <div class="table-control pull-left" id="filtersDescription"></div>   {{ if (pagination) { }}   <div class="table-control pull-right">     <ul class="pagination">       <li class="js-data-table-first-page {{= currentPage == 1 ? \'disabled\' : \'\'¬†}}">         <span><i class="icon icon-angle-double-left"></i> {{= t(\'tables.first\') }}</span>       </li>       <li class="js-data-table-prev-page {{= currentPage == 1 ? \'disabled\' : \'\'¬†}}">         <span><i class="icon icon-angle-left"></i> {{= t(\'tables.previous\') }}</span>       </li>       {{ _.each(pageSelects, function(page) { }}       <li class="{{=¬†page == currentPage ? \'active\' : \'js-data-table-page\' }}" data-page="{{= page - 1 }}">         <span>{{= page }}</span>       </li>       {{ }) }}       <li class="js-data-table-next-page {{= currentPage == totalPages ? \'disabled\' : \'\'¬†}}">         <span>{{= t(\'tables.next\') }} <i class="icon icon-angle-right"></i></span>       </li>       <li class="js-data-table-last-page {{= currentPage == totalPages ? \'disabled\' : \'\'¬†}}">         <span>{{= t(\'tables.last\') }} <i class="icon icon-angle-double-right"></i></span>       </li>     </ul>   </div>   {{ } }}  </div>{{ } }}',AGN.Opt.Templates["table-controls-bottom"]="<div class=\"table-controls clearfix\">   {{ if (showRecordsCount) { }}   <div class=\"table-control pull-left\">     <div class=\"well\">{{= t('tables.range', itemStart, itemEnd, itemTotal) }}</div>   </div>   {{ } }}   {{ if (pagination) { }}   <div class=\"table-control pull-right\">     <ul class=\"pagination\">       <li class=\"js-data-table-first-page {{= currentPage == 1 ? 'disabled' : ''¬†}}\">         <span><i class=\"icon icon-angle-double-left\"></i> {{= t('tables.first') }}</span>       </li>       <li class=\"js-data-table-prev-page {{= currentPage == 1 ? 'disabled' : ''¬†}}\">         <span><i class=\"icon icon-angle-left\"></i> {{= t('tables.previous') }}</span>       </li>       {{ _.each(pageSelects, function(page) { }}        <li class=\"{{=¬†page == currentPage ? 'active' : 'js-data-table-page' }}\" data-page=\"{{= page - 1 }}\">         <span>{{= page }}</span>       </li>       {{ }) }}       <li class=\"js-data-table-next-page {{= currentPage == totalPages ? 'disabled' : ''¬†}}\">         <span>{{= t('tables.next') }} <i class=\"icon icon-angle-right\"></i></span>       </li>       <li class=\"js-data-table-last-page {{= currentPage == totalPages ? 'disabled' : ''¬†}}\">         <span>{{= t('tables.last') }} <i class=\"icon icon-angle-double-right\"></i></span>       </li>     </ul>   </div>   {{ } }} </div>",AGN.Opt.Templates["session-expired"]='<div class="backdrop backdrop-warning overlay-box" id="session-expired-overlay">     <div class="notification notification-warning overlay-content">         <div class="notification-header">             <p class="headline">                 <i class="icon icon-state-alert"></i>                 <span class="text">{{= t(\'logon.session.expired\') }}</span>             </p>         </div>         <div class="notification-content">             <div class="form-group">               {{= t(\'logon.session.notification\') }}             </div>            <div class="form-group">               <a href="{{= AGN.url("/logon.action", true) }}">                 {{= t(\'defaults.relogin\') }}               </a>             </div>        </div>     </div> </div>',AGN.Opt.Templates["datetime-picker"]='<div class="row">  <div class="col-sm-8">     <div class="input-group">       <div class="input-group-controls">         <input type="text" id="{{- property }}_date" class="form-control datepicker-input js-datepicker"           data-value="{{- date}}" data-datepicker-options="format: {{- dateFormat}}"/>       </div>       <div class="input-group-btn">         <button type="button" class="btn btn-regular btn-toggle js-open-datepicker" tabindex="-1">           <i class="icon icon-calendar-o"></i>         </button>       </div>     </div>   </div>   <div class="col-sm-4">     <div class="input-group">       <div class="input-group-controls">         <input type="text" id="{{- property }}_time" class="form-control js-timepicker" value="{{- time}}"              data-timepicker-options="mask: \'h:s\'"/>       </div>       <div class="input-group-addon">         <span class="addon"><i class="icon icon-clock-o"></i></span>       </div>     </div>   </div> </div>',AGN.Opt.Templates["trackablelink-extension-table-row"]='<tr data-extension-row="{{- index}}">     <td>         <input type="text" class="form-control" data-extension-name value="{{- name}}"/>     </td>     <td>         <input type="text" class="form-control" data-extension-value value="{{- value}}"/>     </td>     <td class="table-actions">         {{ if (name == "" && value == "") { }}             <a href="#" class="btn btn-regular btn-primary" data-extension-add id="newExtensionBtn">                 <i class="icon icon-plus"></i>             </a>         {{ } else { }}             <a href="#" class="btn btn-regular btn-alert" data-extension-delete>                 <i class="icon icon-trash-o"></i>             </a>         {{ } }}     </td> </tr>',window.agnTimeZoneId&&moment.tz.setDefault(window.agnTimeZoneId),!function(e,t){"function"==typeof define&&define.amd?define(["jquery","dot/doT","jquery-extendext"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),require("dot/doT"),require("jquery-extendext")):t(e.jQuery,e.doT)}(this,function(d,i){"use strict";function h(e,t){(e[0].queryBuilder=this).$el=e,this.settings=d.extendext(!0,"replace",{},h.DEFAULTS,t),this.model=new n,this.status={id:null,generated_id:!1,group_id:0,rule_id:0,has_optgroup:!1,has_operator_optgroup:!1},this.filters=this.settings.filters,this.icons=this.settings.icons,this.operators=this.settings.operators,this.templates=this.settings.templates,this.plugins=this.settings.plugins,this.lang=null,void 0===h.regional.en&&p.error("Config",'"i18n/en.js" not loaded.'),this.lang=d.extendext(!0,"replace",{},h.regional.en,h.regional[this.settings.lang_code],this.settings.lang),!1===this.settings.allow_groups?this.settings.allow_groups=0:!0===this.settings.allow_groups&&(this.settings.allow_groups=-1),Object.keys(this.templates).forEach(function(e){this.templates[e]||(this.templates[e]=h.templates[e]),"string"==typeof this.templates[e]&&(this.templates[e]=i.template(this.templates[e]))},this),this.$el.attr("id")||(this.$el.attr("id","qb_"+Math.floor(99999*Math.random())),this.status.generated_id=!0),this.status.id=this.$el.attr("id"),this.$el.addClass("query-builder form-inline"),this.filters=this.checkFilters(this.filters),this.operators=this.checkOperators(this.operators),this.bindEvents(),this.initPlugins()}d.extend(h.prototype,{trigger:function(e){e=new d.Event(this._tojQueryEvent(e),{builder:this});return this.$el.triggerHandler(e,Array.prototype.slice.call(arguments,1)),e},change:function(e,t){e=new d.Event(this._tojQueryEvent(e,!0),{builder:this,value:t});return this.$el.triggerHandler(e,Array.prototype.slice.call(arguments,2)),e.value},on:function(e,t){return this.$el.on(this._tojQueryEvent(e),t),this},off:function(e,t){return this.$el.off(this._tojQueryEvent(e),t),this},once:function(e,t){return this.$el.one(this._tojQueryEvent(e),t),this},_tojQueryEvent:function(e,t){return e.split(" ").map(function(e){return e+".queryBuilder"+(t?".filter":"")}).join(" ")}}),h.types={string:"string",integer:"number",double:"number",date:"datetime",time:"datetime",datetime:"datetime",boolean:"boolean"},h.inputs=["text","number","textarea","radio","checkbox","select"],h.modifiable_options=["display_errors","allow_groups","allow_empty","default_condition","default_filter"],h.selectors={group_container:".rules-group-container",rule_container:".rule-container",filter_container:".rule-filter-container",operator_container:".rule-operator-container",value_container:".rule-value-container",error_container:".error-container",condition_container:".rules-group-header .group-conditions",rule_header:".rule-header",group_header:".rules-group-header",group_actions:".group-actions",rule_actions:".rule-actions",rules_list:".rules-group-body>.rules-list",group_btns:".btn",group_condition:".rules-group-header [name$=_cond]",rule_filter:".rule-filter-container [name$=_filter]",rule_operator:".rule-operator-container [name$=_operator]",rule_value:".rule-value-container :input:not(.icon-help)",add_rule:"[data-add=rule]",delete_rule:"[data-delete=rule]",add_group:"[data-add=group]",delete_group:"[data-delete=group]"},h.templates={},h.regional={},h.OPERATORS={equal:{type:"equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},not_equal:{type:"not_equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},in:{type:"in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},not_in:{type:"not_in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},less:{type:"less",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},less_or_equal:{type:"less_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater:{type:"greater",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater_or_equal:{type:"greater_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},between:{type:"between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},not_between:{type:"not_between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},begins_with:{type:"begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_begins_with:{type:"not_begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},contains:{type:"contains",nb_inputs:1,multiple:!1,apply_to:["string"]},not_contains:{type:"not_contains",nb_inputs:1,multiple:!1,apply_to:["string"]},ends_with:{type:"ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_ends_with:{type:"not_ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},is_empty:{type:"is_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_not_empty:{type:"is_not_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_null:{type:"is_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]},is_not_null:{type:"is_not_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]}},h.DEFAULTS={filters:[],plugins:[],sort_filters:!1,display_errors:!0,allow_groups:-1,allow_empty:!1,conditions:["AND","OR"],default_condition:"AND",inputs_separator:" , ",select_placeholder:"------",display_empty_filter:!0,default_filter:null,optgroups:{},default_rule_flags:{filter_readonly:!1,operator_readonly:!1,value_readonly:!1,no_delete:!1},default_group_flags:{condition_readonly:!1,no_add_rule:!1,no_add_group:!1,no_delete:!1},templates:{group:null,rule:null,filterSelect:null,operatorSelect:null,ruleValueSelect:null},lang_code:"en",lang:{},operators:["equal","not_equal","in","not_in","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null"],icons:{add_group:"glyphicon glyphicon-plus-sign",add_rule:"glyphicon glyphicon-plus",remove_group:"glyphicon glyphicon-remove",remove_rule:"glyphicon glyphicon-remove",error:"glyphicon glyphicon-warning-sign"}},h.plugins={},h.defaults=function(e){if("object"!=typeof e)return"string"==typeof e?"object"==typeof h.DEFAULTS[e]?d.extend(!0,{},h.DEFAULTS[e]):h.DEFAULTS[e]:d.extend(!0,{},h.DEFAULTS);d.extendext(!0,"replace",h.DEFAULTS,e)},h.define=function(e,t,i){h.plugins[e]={fct:t,def:i||{}}},h.extend=function(e){d.extend(h.prototype,e)},h.prototype.initPlugins=function(){var t;this.plugins&&(d.isArray(this.plugins)&&(t={},this.plugins.forEach(function(e){t[e]=null}),this.plugins=t),Object.keys(this.plugins).forEach(function(e){e in h.plugins?(this.plugins[e]=d.extend(!0,{},h.plugins[e].def,this.plugins[e]||{}),h.plugins[e].fct.call(this,this.plugins[e])):p.error("Config",'Unable to find plugin "{0}"',e)},this))},h.prototype.getPluginOptions=function(e,t){var i;if(this.plugins&&this.plugins[e]?i=this.plugins[e]:h.plugins[e]&&(i=h.plugins[e].def),i)return t?i[t]:i;p.error("Config",'Unable to find plugin "{0}"',e)},h.prototype.init=function(e){this.trigger("afterInit"),e?(this.setRules(e),delete this.settings.rules):this.setRoot(!0)},h.prototype.checkFilters=function(e){var i,t=[];return e&&0!==e.length||p.error("Config","Missing filters list"),e.forEach(function(n,e){switch(n.id||p.error("Config","Missing filter {0} id",e),-1!=t.indexOf(n.id)&&p.error("Config",'Filter "{0}" already defined',n.id),t.push(n.id),n.type?h.types[n.type]||p.error("Config",'Invalid type "{0}"',n.type):n.type="string",n.input?"function"!=typeof n.input&&-1==h.inputs.indexOf(n.input)&&p.error("Config",'Invalid input "{0}"',n.input):n.input="number"===h.types[n.type]?"number":"text",n.operators&&n.operators.forEach(function(e){"string"!=typeof e&&p.error("Config","Filter operators must be global operators types (string)")}),n.field||(n.field=n.id),n.label||(n.label=n.field),n.optgroup?(this.status.has_optgroup=!0,this.settings.optgroups[n.optgroup]||(this.settings.optgroups[n.optgroup]=n.optgroup)):n.optgroup=null,n.input){case"radio":case"checkbox":(!n.values||n.values.length<1)&&p.error("Config",'Missing filter "{0}" values',n.id);break;case"select":var o=[];n.has_optgroup=!1,p.iterateOptions(n.values,function(e,t,i){o.push({value:e,label:t,optgroup:i||null}),i&&(n.has_optgroup=!0,this.settings.optgroups[i]||(this.settings.optgroups[i]=i))}.bind(this)),n.has_optgroup?n.values=p.groupSort(o,"optgroup"):n.values=o,n.placeholder&&(void 0===n.placeholder_value&&(n.placeholder_value=-1),n.values.forEach(function(e){e.value==n.placeholder_value&&p.error("Config",'Placeholder of filter "{0}" overlaps with one of its values',n.id)}))}},this),this.settings.sort_filters&&("function"==typeof this.settings.sort_filters?e.sort(this.settings.sort_filters):(i=this,e.sort(function(e,t){return i.translate(e.label).localeCompare(i.translate(t.label))}))),e=this.status.has_optgroup?p.groupSort(e,"optgroup"):e},h.prototype.checkOperators=function(i){var n=[];return i.forEach(function(e,t){"string"==typeof e?(h.OPERATORS[e]||p.error("Config",'Unknown operator "{0}"',e),i[t]=e=d.extendext(!0,"replace",{},h.OPERATORS[e])):(e.type||p.error("Config",'Missing "type" for operator {0}',t),h.OPERATORS[e.type]&&(i[t]=e=d.extendext(!0,"replace",{},h.OPERATORS[e.type],e)),void 0!==e.nb_inputs&&void 0!==e.apply_to||p.error("Config",'Missing "nb_inputs" and/or "apply_to" for operator "{0}"',e.type)),-1!=n.indexOf(e.type)&&p.error("Config",'Operator "{0}" already defined',e.type),n.push(e.type),e.optgroup?(this.status.has_operator_optgroup=!0,this.settings.optgroups[e.optgroup]||(this.settings.optgroups[e.optgroup]=e.optgroup)):e.optgroup=null},this),i=this.status.has_operator_optgroup?p.groupSort(i,"optgroup"):i},h.prototype.bindEvents=function(){var r=this,t=h.selectors;this.$el.on("change.queryBuilder",t.group_condition,function(){var e;d(this).is(":checked")&&(e=d(this).closest(t.group_container),r.getModel(e).condition=d(this).val())}),this.$el.on("change.queryBuilder",t.rule_filter,function(){var e=d(this).closest(t.rule_container);r.getModel(e).filter=r.getFilterById(d(this).val())}),this.$el.on("change.queryBuilder",t.rule_operator,function(){var e=d(this).closest(t.rule_container);r.getModel(e).operator=r.getOperatorByType(d(this).val())}),this.$el.on("click.queryBuilder",t.add_rule,function(){var e=d(this).closest(t.group_container);r.addRule(r.getModel(e))}),this.$el.on("click.queryBuilder",t.delete_rule,function(){var e=d(this).closest(t.rule_container);r.deleteRule(r.getModel(e))}),0!==this.settings.allow_groups&&(this.$el.on("click.queryBuilder",t.add_group,function(){var e=d(this).closest(t.group_container);r.addGroup(r.getModel(e))}),this.$el.on("click.queryBuilder",t.delete_group,function(){var e=d(this).closest(t.group_container);r.deleteGroup(r.getModel(e))})),this.model.on({drop:function(e,t){t.$el.remove(),r.refreshGroupsConditions()},add:function(e,t,i,n){0===n?i.$el.prependTo(t.$el.find(">"+h.selectors.rules_list)):i.$el.insertAfter(t.rules[n-1].$el),r.refreshGroupsConditions()},move:function(e,t,i,n){t.$el.detach(),0===n?t.$el.prependTo(i.$el.find(">"+h.selectors.rules_list)):t.$el.insertAfter(i.rules[n-1].$el),r.refreshGroupsConditions()},update:function(e,t,i,n,o){if(t instanceof s)switch(i){case"error":r.updateError(t);break;case"flags":r.applyRuleFlags(t);break;case"filter":r.updateRuleFilter(t,o);break;case"operator":r.updateRuleOperator(t,o);break;case"value":r.updateRuleValue(t,o)}else switch(i){case"error":r.updateError(t);break;case"flags":r.applyGroupFlags(t);break;case"condition":r.updateGroupCondition(t,o)}}})},h.prototype.setRoot=function(e,t,i){e=void 0===e||!0===e;var n=this.nextGroupId(),n=d(this.getGroupTemplate(n,1));return n.find(h.selectors.group_btns).addClass(this.settings.readonly?"disabled":""),this.$el.append(n),this.model.root=new l(null,n),this.model.root.model=this.model,this.model.root.data=t,this.model.root.flags=d.extend({},this.settings.default_group_flags,i),this.model.root.condition=this.settings.default_condition,this.trigger("afterAddGroup",this.model.root),e&&this.addRule(this.model.root),this.model.root},h.prototype.addGroup=function(e,t,i,n){var o=e.level+1;if(this.trigger("beforeAddGroup",e,t=void 0===t||!0===t,o).isDefaultPrevented())return null;var r=this.nextGroupId(),r=d(this.getGroupTemplate(r,o)),o=e.addGroup(r);return o.data=i,o.flags=d.extend({},this.settings.default_group_flags,n),o.condition=this.settings.default_condition,this.trigger("afterAddGroup",o),this.trigger("rulesChanged"),t&&this.addRule(o),o},h.prototype.deleteGroup=function(e){if(e.isRoot())return!1;if(this.trigger("beforeDeleteGroup",e).isDefaultPrevented())return!1;var t=!0;return e.each("reverse",function(e){t&=this.deleteRule(e)},function(e){t&=this.deleteGroup(e)},this),t&&(e.drop(),this.trigger("afterDeleteGroup"),this.trigger("rulesChanged")),t},h.prototype.updateGroupCondition=function(t,e){t.$el.find(">"+h.selectors.group_condition).each(function(){var e=d(this);e.prop("checked",e.val()===t.condition),e.parent().toggleClass("active",e.val()===t.condition)}),this.trigger("afterUpdateGroupCondition",t,e),this.trigger("rulesChanged")},h.prototype.refreshGroupsConditions=function(){!function t(e){e.flags&&(!e.flags||e.flags.condition_readonly)||e.$el.find(">"+h.selectors.group_condition).prop("disabled",e.rules.length<=1).parent().toggleClass("disabled",e.rules.length<=1),e.each(null,function(e){t(e)},this)}(this.model.root)},h.prototype.addRule=function(e,t,i){if(this.trigger("beforeAddRule",e).isDefaultPrevented())return null;var n=this.nextRuleId(),n=d(this.getRuleTemplate(n)),e=e.addRule(n);return e.data=t,e.flags=d.extend({},this.settings.default_rule_flags,i),this.trigger("afterAddRule",e),this.trigger("rulesChanged"),this.createRuleFilters(e),!this.settings.default_filter&&this.settings.display_empty_filter||(e.filter=this.change("getDefaultFilter",this.getFilterById(this.settings.default_filter||this.filters[0].id),e)),e},h.prototype.deleteRule=function(e){return!e.flags.no_delete&&(!this.trigger("beforeDeleteRule",e).isDefaultPrevented()&&(e.drop(),this.trigger("afterDeleteRule"),this.trigger("rulesChanged"),!0))},h.prototype.createRuleFilters=function(e){var t=this.change("getRuleFilters",this.filters,e),t=d(this.getRuleFilterSelect(e,t));e.$el.find(h.selectors.filter_container).html(t),this.trigger("afterCreateRuleFilters",e),this.applyRuleFlags(e)},h.prototype.createRuleOperators=function(e){var t,i,n=e.$el.find(h.selectors.operator_container).empty();e.filter&&(t=this.getOperators(e.filter),i=d(this.getRuleOperatorSelect(e,t)),n.html(i),e.filter.default_operator?e.__.operator=this.getOperatorByType(e.filter.default_operator):e.__.operator=t[0],e.$el.find(h.selectors.rule_operator).val(e.operator.type),this.trigger("afterCreateRuleOperators",e,t),this.applyRuleFlags(e))},h.prototype.createRuleInput=function(e){var t=e.$el.find(h.selectors.value_container).empty();if(e.__.value=void 0,e.filter&&e.operator&&0!==e.operator.nb_inputs){for(var i=this,n=d(),o=e.filter,r=0;r<e.operator.nb_inputs;r++){var s=d(this.getRuleInput(e,r));0<r&&t.append(this.settings.inputs_separator),t.append(s),n=n.add(s)}t.css("display",""),n.on("change "+(o.input_event||""),function(){e._updating_input||(e._updating_value=!0,e.value=i.getRuleInputValue(e),e._updating_value=!1)}),o.plugin&&n[o.plugin](o.plugin_config||{}),this.trigger("afterCreateRuleInput",e),void 0!==o.default_value?e.value=o.default_value:(e._updating_value=!0,e.value=i.getRuleInputValue(e),e._updating_value=!1),this.applyRuleFlags(e)}},h.prototype.updateRuleFilter=function(e,t){this.createRuleOperators(e),this.createRuleInput(e),e.$el.find(h.selectors.rule_filter).val(e.filter?e.filter.id:"-1"),t&&e.filter&&t.id!==e.filter.id&&(e.data=void 0),this.trigger("afterUpdateRuleFilter",e,t),this.trigger("rulesChanged")},h.prototype.updateRuleOperator=function(e,t){var i=e.$el.find(h.selectors.value_container);e.operator&&0!==e.operator.nb_inputs?(i.css("display",""),!i.is(":empty")&&t&&e.operator.nb_inputs===t.nb_inputs&&e.operator.optgroup===t.optgroup||this.createRuleInput(e)):(i.hide(),e.__.value=void 0),e.operator&&(e.$el.find(h.selectors.rule_operator).val(e.operator.type),e.__.value=this.getRuleInputValue(e)),this.trigger("afterUpdateRuleOperator",e,t),this.trigger("rulesChanged")},h.prototype.updateRuleValue=function(e,t){e._updating_value||this.setRuleInputValue(e,e.value),this.trigger("afterUpdateRuleValue",e,t),this.trigger("rulesChanged")},h.prototype.applyRuleFlags=function(e){var t=e.flags,i=h.selectors;e.$el.find(i.rule_filter).prop("disabled",t.filter_readonly),e.$el.find(i.rule_operator).prop("disabled",t.operator_readonly),e.$el.find(i.rule_value).prop("disabled",t.value_readonly),t.no_delete&&e.$el.find(i.delete_rule).remove(),this.trigger("afterApplyRuleFlags",e)},h.prototype.applyGroupFlags=function(e){var t=e.flags,i=h.selectors;e.$el.find(">"+i.group_condition).prop("disabled",t.condition_readonly).parent().toggleClass("readonly",t.condition_readonly),t.no_add_rule&&e.$el.find(i.add_rule).remove(),t.no_add_group&&e.$el.find(i.add_group).remove(),t.no_delete&&e.$el.find(i.delete_group).remove(),this.trigger("afterApplyGroupFlags",e)},h.prototype.clearErrors=function(e){(e=e||this.model.root)&&(e.error=null,e instanceof l&&e.each(function(e){e.error=null},function(e){this.clearErrors(e)},this))},h.prototype.updateError=function(e){var t;this.settings.display_errors&&(null===e.error?e.$el.removeClass("has-error"):(t=this.translate("errors",e.error[0]),t=p.fmt(t,e.error.slice(1)),t=this.change("displayError",t,e.error,e),e.$el.addClass("has-error").find(h.selectors.error_container).eq(0).attr("title",t)))},h.prototype.triggerValidationError=function(e,t,i){d.isArray(t)||(t=[t]),this.trigger("validationError",e,t,i).isDefaultPrevented()||(e.error=t)},h.prototype.destroy=function(){this.trigger("beforeDestroy"),this.status.generated_id&&this.$el.removeAttr("id"),this.clear(),this.model=null,this.$el.off(".queryBuilder").removeClass("query-builder").removeData("queryBuilder"),delete this.$el[0].queryBuilder},h.prototype.reset=function(){this.trigger("beforeReset").isDefaultPrevented()||(this.status.group_id=1,this.status.rule_id=0,this.model.root.empty(),this.model.root.data=void 0,this.model.root.flags=d.extend({},this.settings.default_group_flags),this.model.root.condition=this.settings.default_condition,this.addRule(this.model.root),this.trigger("afterReset"),this.trigger("rulesChanged"))},h.prototype.clear=function(){this.trigger("beforeClear").isDefaultPrevented()||(this.status.group_id=0,this.status.rule_id=0,this.model.root&&(this.model.root.drop(),this.model.root=null),this.trigger("afterClear"),this.trigger("rulesChanged"))},h.prototype.setOptions=function(e){d.each(e,function(e,t){-1!==h.modifiable_options.indexOf(e)&&(this.settings[e]=t)}.bind(this))},h.prototype.getModel=function(e){return e?e instanceof o?e:d(e).data("queryBuilderModel"):this.model.root},h.prototype.validate=function(o){o=d.extend({skip_empty:!1},o),this.clearErrors();var r=this,e=function t(e){var i=0,n=0;return e.each(function(e){if(e.filter||!o.skip_empty){if(!e.filter)return r.triggerValidationError(e,"no_filter",null),void n++;if(!e.operator)return r.triggerValidationError(e,"no_operator",null),void n++;if(0!==e.operator.nb_inputs){var t=r.validateValue(e,e.value);if(!0!==t)return r.triggerValidationError(e,t,e.value),void n++}i++}},function(e){e=t(e);!0===e?i++:!1===e&&n++}),!(0<n)&&(0===i&&!e.isRoot()&&o.skip_empty?null:!!(0!==i||r.settings.allow_empty&&e.isRoot())||(r.triggerValidationError(e,"empty_group",null),!1))}(this.model.root);return this.change("validate",e)},h.prototype.getRules=function(o){o=d.extend({get_flags:!1,allow_invalid:!1,skip_empty:!1},o);var e=this.validate(o);if(!e&&!o.allow_invalid)return null;var r=this,t=function t(e){var i,n={condition:e.condition,rules:[]};return e.data&&(n.data=d.extendext(!0,"replace",{},e.data)),o.get_flags&&(i=r.getGroupFlags(e.flags,"all"===o.get_flags),d.isEmptyObject(i)||(n.flags=i)),e.each(function(e){var t,i;!e.filter&&o.skip_empty||(t=null,e.operator&&0===e.operator.nb_inputs||(t=e.value),t={id:e.filter?e.filter.id:null,field:e.filter?e.filter.field:null,type:e.filter?e.filter.type:null,input:e.filter?e.filter.input:null,operator:e.operator?e.operator.type:null,value:t},(e.filter&&e.filter.data||e.data)&&(t.data=d.extendext(!0,"replace",{},e.filter.data,e.data)),o.get_flags&&(i=r.getRuleFlags(e.flags,"all"===o.get_flags),d.isEmptyObject(i)||(t.flags=i)),n.rules.push(r.change("ruleToJson",t,e)))},function(e){e=t(e);0===e.rules.length&&o.skip_empty||n.rules.push(e)},this),r.change("groupToJson",n,e)}(this.model.root);return t.valid=e,this.change("getRules",t)},h.prototype.setRules=function(e,o){o=d.extend({allow_invalid:!1},o),(e=d.isArray(e)?{condition:this.settings.default_condition,rules:e}:e)&&e.rules&&(0!==e.rules.length||this.settings.allow_empty)||p.error("RulesParse","Incorrect data object passed"),this.clear(),this.setRoot(!1,e.data,this.parseGroupFlags(e)),e=this.change("setRules",e,o);var r=this;!function i(e,n){null!==n&&(void 0===e.condition?e.condition=r.settings.default_condition:-1==r.settings.conditions.indexOf(e.condition)&&(p.error(!o.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',e.condition),e.condition=r.settings.default_condition),n.condition=e.condition,e.rules.forEach(function(e){var t;void 0!==e.rules?-1!==r.settings.allow_groups&&r.settings.allow_groups<n.level?(p.error(!o.allow_invalid,"RulesParse","No more than {0} groups are allowed",r.settings.allow_groups),r.reset()):null!==(t=r.addGroup(n,!1,e.data,r.parseGroupFlags(e)))&&i(e,t):(e.empty||(void 0===e.id&&(p.error(!o.allow_invalid,"RulesParse","Missing rule field id"),e.empty=!0),void 0===e.operator&&(e.operator="equal")),null!==(t=r.addRule(n,e.data,r.parseRuleFlags(e)))&&(e.empty||(t.filter=r.getFilterById(e.id,!o.allow_invalid)),t.filter&&(t.operator=r.getOperatorByType(e.operator,!o.allow_invalid),t.operator||(t.operator=r.getOperators(t.filter)[0])),t.operator&&0!==t.operator.nb_inputs&&(void 0!==e.value?t.value=e.value:void 0!==t.filter.default_value&&(t.value=t.filter.default_value)),r.change("jsonToRule",t,e)!=t&&p.error("RulesParse","Plugin tried to change rule reference")))}),r.change("jsonToGroup",n,e)!=n&&p.error("RulesParse","Plugin tried to change group reference"))}(e,this.model.root),this.trigger("afterSetRules")},h.prototype.validateValue=function(e,t){var i=e.filter.validation||{},n=!0,n=i.callback?i.callback.call(this,t,e):this._validateValue(e,t);return this.change("validateValue",n,t,e)},h.prototype._validateValue=function(e,t){var i,n=e.filter,o=e.operator,r=n.validation||{},s=!0;1===e.operator.nb_inputs&&(t=[t]);for(var a=0;a<o.nb_inputs;a++){if(!o.multiple&&d.isArray(t[a])&&1<t[a].length){s=["operator_not_multiple",o.type,this.translate("operators",o.type)];break}switch(n.input){case"radio":if(void 0!==t[a]&&0!==t[a].length)break;r.allow_empty_value||(s=["radio_empty"]);break;case"checkbox":if(void 0!==t[a]&&0!==t[a].length)break;r.allow_empty_value||(s=["checkbox_empty"]);break;case"select":if(void 0===t[a]||0===t[a].length||n.placeholder&&t[a]==n.placeholder_value){r.allow_empty_value||(s=["select_empty"]);break}break;default:for(var l=d.isArray(t[a])?t[a]:[t[a]],c=0;c<l.length;c++){switch(h.types[n.type]){case"string":if(void 0===l[c]||0===l[c].length){r.allow_empty_value||(s=["string_empty"]);break}if(void 0!==r.min&&l[c].length<parseInt(r.min)){s=[this.getValidationMessage(r,"min","string_exceed_min_length"),r.min];break}if(void 0!==r.max&&l[c].length>parseInt(r.max)){s=[this.getValidationMessage(r,"max","string_exceed_max_length"),r.max];break}if(!r.format||("string"==typeof r.format&&(r.format=new RegExp(r.format)),r.format.test(l[c])))break;s=[this.getValidationMessage(r,"format","string_invalid_format"),r.format];break;case"number":if(void 0===l[c]||0===l[c].length){r.allow_empty_value||(s=["number_nan"]);break}if(isNaN(l[c])){s=["number_nan"];break}if("integer"==n.type){if(parseInt(l[c])!=l[c]){s=["number_not_integer"];break}}else if(parseFloat(l[c])!=l[c]){s=["number_not_double"];break}if(void 0!==r.min&&l[c]<parseFloat(r.min)){s=[this.getValidationMessage(r,"min","number_exceed_min"),r.min];break}if(void 0!==r.max&&l[c]>parseFloat(r.max)){s=[this.getValidationMessage(r,"max","number_exceed_max"),r.max];break}if(void 0!==r.step&&"any"!==r.step){var u=(l[c]/r.step).toPrecision(14);if(parseInt(u)!=u){s=[this.getValidationMessage(r,"step","number_wrong_step"),r.step];break}}break;case"datetime":if(void 0===l[c]||0===l[c].length){r.allow_empty_value||(s=["datetime_empty"]);break}if(r.format){"moment"in window||p.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com");u=moment(l[c],r.format);if(!u.isValid()){s=[this.getValidationMessage(r,"format","datetime_invalid"),r.format];break}if(r.min&&u<moment(r.min,r.format)){s=[this.getValidationMessage(r,"min","datetime_exceed_min"),r.min];break}if(r.max&&u>moment(r.max,r.format)){s=[this.getValidationMessage(r,"max","datetime_exceed_max"),r.max];break}}break;case"boolean":if(void 0===l[c]||0===l[c].length){r.allow_empty_value||(s=["boolean_not_valid"]);break}if("true"!==(i=(""+l[c]).trim().toLowerCase())&&"false"!==i&&"1"!==i&&"0"!==i&&1!==l[c]&&0!==l[c]){s=["boolean_not_valid"];break}}if(!0!==s)break}}if(!0!==s)break}if(("between"===e.operator.type||"not_between"===e.operator.type)&&2===t.length)switch(h.types[n.type]){case"number":t[0]>t[1]&&(s=["number_between_invalid",t[0],t[1]]);break;case"datetime":r.format&&("moment"in window||p.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com"),moment(t[0],r.format).isAfter(moment(t[1],r.format))&&(s=["datetime_between_invalid",t[0],t[1]]))}return s},h.prototype.nextGroupId=function(){return this.status.id+"_group_"+this.status.group_id++},h.prototype.nextRuleId=function(){return this.status.id+"_rule_"+this.status.rule_id++},h.prototype.getOperators=function(i){"string"==typeof i&&(i=this.getFilterById(i));for(var e=[],t=0,n=this.operators.length;t<n;t++){if(i.operators){if(-1==i.operators.indexOf(this.operators[t].type))continue}else if(-1==this.operators[t].apply_to.indexOf(h.types[i.type]))continue;e.push(this.operators[t])}return i.operators&&e.sort(function(e,t){return i.operators.indexOf(e.type)-i.operators.indexOf(t.type)}),this.change("getOperators",e,i)},h.prototype.getFilterById=function(e,t){if("-1"==e)return null;for(var i=0,n=this.filters.length;i<n;i++)if(this.filters[i].id==e)return this.filters[i];return p.error(!1!==t,"UndefinedFilter",'Undefined filter "{0}"',e),null},h.prototype.getOperatorByType=function(e,t){if("-1"==e)return null;for(var i=0,n=this.operators.length;i<n;i++)if(this.operators[i].type==e)return this.operators[i];return p.error(!1!==t,"UndefinedOperator",'Undefined operator "{0}"',e),null},h.prototype.getRuleInputValue=function(e){var t=e.filter,i=e.operator,n=[];if(t.valueGetter)n=t.valueGetter.call(this,e);else{for(var o=e.$el.find(h.selectors.value_container),r=0;r<i.nb_inputs;r++){var s,a=p.escapeElementId(e.id+"_value_"+r);switch(t.input){case"radio":n.push(o.find("[name="+a+"]:checked").val());break;case"checkbox":s=[],o.find("[name="+a+"]:checked").each(function(){s.push(d(this).val())}),n.push(s);break;case"select":t.multiple?(s=[],o.find("[name="+a+"] option:selected").each(function(){s.push(d(this).val())}),n.push(s)):n.push(o.find("[name="+a+"] option:selected").val());break;default:n.push(o.find("[name="+a+"]").val())}}n=n.map(function(e){return i.multiple&&t.value_separator&&"string"==typeof e&&(e=e.split(t.value_separator)),d.isArray(e)?e.map(function(e){return p.changeType(e,t.type)}):p.changeType(e,t.type)}),1===i.nb_inputs&&(n=n[0]),t.valueParser&&(n=t.valueParser.call(this,e,n))}return this.change("getRuleValue",n,e)},h.prototype.setRuleInputValue=function(e,t){var i=e.filter,n=e.operator;if(i&&n){if(e._updating_input=!0,i.valueSetter)i.valueSetter.call(this,e,t);else{var o=e.$el.find(h.selectors.value_container);1==n.nb_inputs&&(t=[t]);for(var r=0;r<n.nb_inputs;r++){var s=p.escapeElementId(e.id+"_value_"+r);switch(i.input){case"radio":o.find("[name="+s+'][value="'+t[r]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":d.isArray(t[r])||(t[r]=[t[r]]),t[r].forEach(function(e){o.find("[name="+s+'][value="'+e+'"]').prop("checked",!0).trigger("change")});break;default:n.multiple&&i.value_separator&&d.isArray(t[r])&&(t[r]=t[r].join(i.value_separator)),o.find("[name="+s+"]").val(t[r]).trigger("change")}}}e._updating_input=!1}},h.prototype.parseRuleFlags=function(e){var t=d.extend({},this.settings.default_rule_flags);return e.readonly&&d.extend(t,{header_readonly:!0,filter_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0,no_sortable:!0}),e.flags&&d.extend(t,e.flags),this.change("parseRuleFlags",t,e)},h.prototype.getRuleFlags=function(i,e){var n;return e?d.extend({},i):(n={},d.each(this.settings.default_rule_flags,function(e,t){i[e]!==t&&(n[e]=i[e])}),n)},h.prototype.parseGroupFlags=function(e){var t=d.extend({},this.settings.default_group_flags);return e.readonly&&d.extend(t,{condition_readonly:!0,no_add_rule:!0,no_add_group:!0,no_delete:!0}),e.flags&&d.extend(t,e.flags),this.change("parseGroupFlags",t,e)},h.prototype.getGroupFlags=function(i,e){var n;return e?d.extend({},i):(n={},d.each(this.settings.default_group_flags,function(e,t){i[e]!==t&&(n[e]=i[e])}),n)},h.prototype.translate=function(e,t){var i;return t||(t=e,e=void 0),i="object"==typeof t?t[this.settings.lang_code]||t.en:(e?this.lang[e]:this.lang)[t]||t,this.change("translate",i,t,e)},h.prototype.getValidationMessage=function(e,t,i){return e.messages&&e.messages[t]||i},h.templates.group='<div id="{{= it.group_id }}" class="rules-group-container">   <div class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-success" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.translate("add_rule") }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-success" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.translate("add_group") }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-danger" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.translate("delete_group") }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.translate("conditions", condition) }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </div>   <div class=rules-group-body>     <div class=rules-list></div>   </div> </div>',h.templates.rule='<div id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-xs btn-danger" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i> {{= it.translate("delete_rule") }}       </button>     </div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </div>',h.templates.filterSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}" {{? filter.icon}}data-icon="{{= filter.icon}}"{{?}}>{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',h.templates.operatorSelect='{{? it.operators.length === 1 }} <span> {{= it.translate("operators", it.operators[0].type) }} </span> {{?}} {{ var optgroup = null; }} <select class="form-control {{? it.operators.length === 1 }}hide{{?}}" name="{{= it.rule.id }}_operator">   {{~ it.operators: operator }}     {{? optgroup !== operator.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = operator.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= operator.type }}" {{? operator.icon}}data-icon="{{= operator.icon}}"{{?}}>{{= it.translate("operators", operator.type) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',h.templates.ruleValueSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',h.prototype.getGroupTemplate=function(e,t){e=this.templates.group({builder:this,group_id:e,level:t,conditions:this.settings.conditions,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getGroupTemplate",e,t)},h.prototype.getRuleTemplate=function(e){e=this.templates.rule({builder:this,rule_id:e,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleTemplate",e)},h.prototype.getRuleFilterSelect=function(e,t){var i=this.templates.filterSelect({builder:this,rule:e,filters:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleFilterSelect",i,e,t)},h.prototype.getRuleOperatorSelect=function(e,t){var i=this.templates.operatorSelect({builder:this,rule:e,operators:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleOperatorSelect",i,e,t)},h.prototype.getRuleValueSelect=function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)},h.prototype.getRuleInput=function(e,t){var i=e.filter,n=e.filter.validation||{},o=e.id+"_value_"+t,r=i.vertical?" class=block":"",s="";if("function"==typeof i.input)s=i.input.call(this,e,o);else switch(i.input){case"radio":case"checkbox":p.iterateOptions(i.values,function(e,t){s+="<label"+r+'><input type="'+i.input+'" name="'+o+'" value="'+e+'"> '+t+"</label> "});break;case"select":s=this.getRuleValueSelect(o,e);break;case"textarea":s+='<textarea class="form-control" name="'+o+'"',i.size&&(s+=' cols="'+i.size+'"'),i.rows&&(s+=' rows="'+i.rows+'"'),void 0!==n.min&&(s+=' minlength="'+n.min+'"'),void 0!==n.max&&(s+=' maxlength="'+n.max+'"'),i.placeholder&&(s+=' placeholder="'+i.placeholder+'"'),s+="></textarea>";break;case"number":s+='<input class="form-control" type="number" name="'+o+'"',void 0!==n.step&&(s+=' step="'+n.step+'"'),void 0!==n.min&&(s+=' min="'+n.min+'"'),void 0!==n.max&&(s+=' max="'+n.max+'"'),i.placeholder&&(s+=' placeholder="'+i.placeholder+'"'),i.size&&(s+=' size="'+i.size+'"'),s+=">";break;default:s+='<input class="form-control" type="text" name="'+o+'"',i.placeholder&&(s+=' placeholder="'+i.placeholder+'"'),"string"===i.type&&void 0!==n.min&&(s+=' minlength="'+n.min+'"'),"string"===i.type&&void 0!==n.max&&(s+=' maxlength="'+n.max+'"'),i.size&&(s+=' size="'+i.size+'"'),s+=">"}return this.change("getRuleInput",s,e,o)};var p={};function n(){this.root=null,this.$=d(this)}(h.utils=p).iterateOptions=function(e,i){e&&(d.isArray(e)?e.forEach(function(e){d.isPlainObject(e)?"value"in e?i(e.value,e.label||e.value,e.optgroup):d.each(e,function(e,t){return i(e,t),!1}):i(e,e)}):d.each(e,function(e,t){i(e,t)}))},p.fmt=function(e,i){return Array.isArray(i)||(i=Array.prototype.slice.call(arguments,1)),e.replace(/{([0-9]+)}/g,function(e,t){return i[parseInt(t)]})},p.error=function(){var e=0,t="boolean"!=typeof arguments[e]||arguments[e++],i=arguments[e++],n=arguments[e++],e=Array.isArray(arguments[e])?arguments[e]:Array.prototype.slice.call(arguments,e);if(t)throw(t=new Error(p.fmt(n,e))).name=i+"Error",t.args=e,t;console.error(i+"Error: "+p.fmt(n,e))},p.changeType=function(e,t){if(""!==e&&void 0!==e)switch(t){case"integer":return"string"!=typeof e||/^-?\d+$/.test(e)?parseInt(e):e;case"double":return"string"!=typeof e||/^-?\d+\.?\d*$/.test(e)?parseFloat(e):e;case"boolean":return"string"!=typeof e||/^(0|1|true|false){1}$/i.test(e)?!0===e||1===e||"true"===e.toLowerCase()||"1"===e:e;default:return e}},p.escapeString=function(e){return"string"!=typeof e?e:e.replace(/[\0\n\r\b\\\'\"]/g,function(e){switch(e){case"\0":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";default:return"\\"+e}}).replace(/\t/g,"\\t").replace(/\x1a/g,"\\Z")},p.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},p.escapeElementId=function(e){return e&&e.replace(/(\\)?([:.\[\],])/g,function(e,t,i){return t?e:"\\"+i})},p.groupSort=function(e,i){var n=[],o=[];return e.forEach(function(e){var t;!e[i]||-1==(t=n.lastIndexOf(e[i]))?t=n.length:t++,n.splice(t,0,e[i]),o.splice(t,0,e)}),o},p.defineModelProperties=function(e,t){t.forEach(function(i){Object.defineProperty(e.prototype,i,{enumerable:!0,get:function(){return this.__[i]},set:function(e){var t=null!==this.__[i]&&"object"==typeof this.__[i]?d.extend({},this.__[i]):this.__[i];this.__[i]=e,null!==this.model&&this.model.trigger("update",this,i,e,t)}})})},d.extend(n.prototype,{trigger:function(e){e=new d.Event(e);return this.$.triggerHandler(e,Array.prototype.slice.call(arguments,1)),e},on:function(){return this.$.on.apply(this.$,Array.prototype.slice.call(arguments)),this},off:function(){return this.$.off.apply(this.$,Array.prototype.slice.call(arguments)),this},once:function(){return this.$.one.apply(this.$,Array.prototype.slice.call(arguments)),this}});var o=function(e,t){if(!(this instanceof o))return new o(e,t);Object.defineProperty(this,"__",{value:{}}),t.data("queryBuilderModel",this),this.__.level=1,this.__.error=null,this.__.flags={},this.__.data=void 0,this.$el=t,this.id=t[0].id,this.model=null,this.parent=e},l=(p.defineModelProperties(o,["level","error","data","flags"]),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){return this.__.parent},set:function(e){this.__.parent=e,this.level=null===e?1:e.level+1,this.model=null===e?null:e.model}}),o.prototype.isRoot=function(){return 1===this.level},o.prototype.getPos=function(){return this.isRoot()?-1:this.parent.getNodePos(this)},o.prototype.drop=function(){var e=this.model;this.parent&&this.parent.removeNode(this),this.$el.removeData("queryBuilderModel"),null!==e&&e.trigger("drop",this)},o.prototype.moveAfter=function(e){this.isRoot()||this.move(e.parent,e.getPos()+1)},o.prototype.moveAtBegin=function(e){this.isRoot()||(void 0===e&&(e=this.parent),this.move(e,0))},o.prototype.moveAtEnd=function(e){this.isRoot()||(void 0===e&&(e=this.parent),this.move(e,0===e.length()?0:e.length()-1))},o.prototype.move=function(e,t){this.isRoot()||("number"==typeof e&&(t=e,e=this.parent),this.parent.removeNode(this),e.insertNode(this,t,!1),null!==this.model&&this.model.trigger("move",this,e,t))},function(e,t){if(!(this instanceof l))return new l(e,t);o.call(this,e,t),this.rules=[],this.__.condition=null}),s=(l.prototype=Object.create(o.prototype),l.prototype.constructor=l,p.defineModelProperties(l,["condition"]),l.prototype.empty=function(){this.each("reverse",function(e){e.drop()},function(e){e.drop()})},l.prototype.drop=function(){this.empty(),o.prototype.drop.call(this)},l.prototype.length=function(){return this.rules.length},l.prototype.insertNode=function(e,t,i){return void 0===t&&(t=this.length()),this.rules.splice(t,0,e),e.parent=this,i&&null!==this.model&&this.model.trigger("add",this,e,t),e},l.prototype.addGroup=function(e,t){return this.insertNode(new l(this,e),t,!0)},l.prototype.addRule=function(e,t){return this.insertNode(new s(this,e),t,!0)},l.prototype.removeNode=function(e){var t=this.getNodePos(e);-1!==t&&(e.parent=null,this.rules.splice(t,1))},l.prototype.getNodePos=function(e){return this.rules.indexOf(e)},l.prototype.each=function(e,t,i,n){"boolean"!=typeof e&&"string"!=typeof e&&(n=i,i=t,t=e,e=!1),n=void 0===n?null:n;for(var o=e?this.rules.length-1:0,r=e?0:this.rules.length-1,s=e?-1:1,a=!1;(e?r<=o:o<=r)&&(this.rules[o]instanceof l?i&&(a=!1===i.call(n,this.rules[o])):t&&(a=!1===t.call(n,this.rules[o])),!a);o+=s);return!a},l.prototype.contains=function(t,e){return-1!==this.getNodePos(t)||!!e&&!this.each(function(){return!0},function(e){return!e.contains(t,!0)})},function(e,t){if(!(this instanceof s))return new s(e,t);o.call(this,e,t),this._updating_value=!1,this._updating_input=!1,this.__.filter=null,this.__.operator=null,this.__.value=void 0});function c(e,t,i){var n,o=h.selectors,r=t.closest(o.rule_container);(n=r.length?"moveAfter":n)||(r=t.closest(o.group_header)).length&&(r=t.closest(o.group_container),n="moveAtBegin"),n||(r=t.closest(o.group_container)).length&&(n="moveAtEnd"),n&&(e[n](i.getModel(r)),i&&e instanceof s&&i.setRuleInputValue(e,e.value))}function f(e){return e.match(/(question_mark|numbered|named)(?:\((.)\))?/)||[null,"question_mark",void 0]}return s.prototype=Object.create(o.prototype),s.prototype.constructor=s,p.defineModelProperties(s,["filter","operator","value"]),s.prototype.isRoot=function(){return!1},h.Group=l,h.Rule=s,d.fn.queryBuilder=function(e){0===this.length&&p.error("Config","No target defined"),1<this.length&&p.error("Config","Unable to initialize on multiple target");var t,i=this.data("queryBuilder"),n="object"==typeof e&&e||{};return i||"destroy"!=e?(i||(t=new h(this,n),this.data("queryBuilder",t),t.init(n.rules)),"string"==typeof e?i[e].apply(i,Array.prototype.slice.call(arguments,1)):this):this},d.fn.queryBuilder.constructor=h,d.fn.queryBuilder.defaults=h.defaults,d.fn.queryBuilder.extend=h.extend,d.fn.queryBuilder.define=h.define,d.fn.queryBuilder.regional=h.regional,h.define("bt-checkbox",function(c){"glyphicons"==c.font&&this.$el.addClass("bt-checkbox-glyphicons"),this.on("getRuleInput.filter",function(o,e,r){var s,a,l=e.filter;"radio"!==l.input&&"checkbox"!==l.input||l.plugin||(o.value="",l.colors||(l.colors={}),l.color&&(l.colors._def_=l.color),s=l.vertical?' style="display:block"':"",a=0,p.iterateOptions(l.values,function(e,t){var i=l.colors[e]||l.colors._def_||c.color,n=r+"_"+a++;o.value+="<div"+s+' class="'+l.input+" "+l.input+"-"+i+'">   <input type="'+l.input+'" name="'+r+'" id="'+n+'" value="'+e+'">   <label for="'+n+'">'+t+"</label> </div>"}))})},{font:"glyphicons",color:"default"}),h.define("bt-selectpicker",function(i){d.fn.selectpicker&&d.fn.selectpicker.Constructor||p.error("MissingLibrary",'Bootstrap Select is required to use "bt-selectpicker" plugin. Get it here: http://silviomoreto.github.io/bootstrap-select');var n=h.selectors;this.on("afterCreateRuleFilters",function(e,t){t.$el.find(n.rule_filter).removeClass("form-control").selectpicker(i)}),this.on("afterCreateRuleOperators",function(e,t){t.$el.find(n.rule_operator).removeClass("form-control").selectpicker(i)}),this.on("afterUpdateRuleFilter",function(e,t){t.$el.find(n.rule_filter).selectpicker("render")}),this.on("afterUpdateRuleOperator",function(e,t){t.$el.find(n.rule_operator).selectpicker("render")}),this.on("beforeDeleteRule",function(e,t){t.$el.find(n.rule_filter).selectpicker("destroy"),t.$el.find(n.rule_operator).selectpicker("destroy")})},{container:"body",style:"btn-inverse btn-xs",width:"auto",showIcon:!1}),h.define("bt-tooltip-errors",function(n){d.fn.tooltip&&d.fn.tooltip.Constructor&&d.fn.tooltip.Constructor.prototype.fixTitle||p.error("MissingLibrary",'Bootstrap Tooltip is required to use "bt-tooltip-errors" plugin. Get it here: http://getbootstrap.com');var o=this;this.on("getRuleTemplate.filter getGroupTemplate.filter",function(e){var t=d(e.value);t.find(h.selectors.error_container).attr("data-toggle","tooltip"),e.value=t.prop("outerHTML")}),this.model.on("update",function(e,t,i){"error"==i&&o.settings.display_errors&&t.$el.find(h.selectors.error_container).eq(0).tooltip(n).tooltip("hide").tooltip("fixTitle")})},{placement:"right"}),h.extend({setFilters:function(e,t){var i=this,n=(void 0===t&&(t=e,e=!1),t=this.checkFilters(t),(t=this.change("setFilters",t)).map(function(e){return e.id}));if(e||!function e(t){t.each(function(e){e.filter&&-1===n.indexOf(e.filter.id)&&p.error("ChangeFilter",'A rule is using filter "{0}"',e.filter.id)},e)}(this.model.root),this.filters=t,!function e(t){t.each(!0,function(e){e.filter&&-1===n.indexOf(e.filter.id)?(e.drop(),i.trigger("rulesChanged")):(i.createRuleFilters(e),e.$el.find(h.selectors.rule_filter).val(e.filter?e.filter.id:"-1"),i.trigger("afterUpdateRuleFilter",e))},e)}(this.model.root),this.settings.plugins&&(this.settings.plugins["unique-filter"]&&this.updateDisabledFilters(),this.settings.plugins["bt-selectpicker"]&&this.$el.find(h.selectors.rule_filter).selectpicker("render")),this.settings.default_filter)try{this.getFilterById(this.settings.default_filter)}catch(e){this.settings.default_filter=null}this.trigger("afterSetFilters",t)},addFilter:function(e,i){void 0===i||"#end"==i?i=this.filters.length:"#start"==i&&(i=0),d.isArray(e)||(e=[e]);var t=d.extend(!0,[],this.filters);parseInt(i)==i||this.filters.some(function(e,t){if(e.id==i)return i=t+1,!0})?Array.prototype.splice.apply(t,[i,0].concat(e)):Array.prototype.push.apply(t,e),this.setFilters(t)},removeFilter:function(t,e){var i=d.extend(!0,[],this.filters);"string"==typeof t&&(t=[t]),i=i.filter(function(e){return-1===t.indexOf(e.id)}),this.setFilters(e,i)}}),h.define("chosen-selectpicker",function(i){d.fn.chosen||p.error("MissingLibrary",'chosen is required to use "chosen-selectpicker" plugin. Get it here: https://github.com/harvesthq/chosen'),this.settings.plugins["bt-selectpicker"]&&p.error("Conflict","bt-selectpicker is already selected as the dropdown plugin. Please remove chosen-selectpicker from the plugin list");var n=h.selectors;this.on("afterCreateRuleFilters",function(e,t){t.$el.find(n.rule_filter).removeClass("form-control").chosen(i)}),this.on("afterCreateRuleOperators",function(e,t){t.$el.find(n.rule_operator).removeClass("form-control").chosen(i)}),this.on("afterUpdateRuleFilter",function(e,t){t.$el.find(n.rule_filter).trigger("chosen:updated")}),this.on("afterUpdateRuleOperator",function(e,t){t.$el.find(n.rule_operator).trigger("chosen:updated")}),this.on("beforeDeleteRule",function(e,t){t.$el.find(n.rule_filter).chosen("destroy"),t.$el.find(n.rule_operator).chosen("destroy")})}),h.define("filter-description",function(n){"inline"===n.mode?this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(e,t){var i=t.$el.find("p.filter-description"),e=e.builder.getFilterDescription(t.filter,t);e?(0===i.length?(i=d('<p class="filter-description"></p>')).appendTo(t.$el):i.css("display",""),i.html('<i class="'+n.icon+'"></i> '+e)):i.hide()}):"popover"===n.mode?(d.fn.popover&&d.fn.popover.Constructor&&d.fn.popover.Constructor.prototype.fixTitle||p.error("MissingLibrary",'Bootstrap Popover is required to use "filter-description" plugin. Get it here: http://getbootstrap.com'),this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(e,t){var i=t.$el.find("button.filter-description"),e=e.builder.getFilterDescription(t.filter,t);e?(0===i.length?((i=d('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="popover"><i class="'+n.icon+'"></i></button>')).prependTo(t.$el.find(h.selectors.rule_actions)),i.popover({placement:"left",container:"body",html:!0}),i.on("mouseout",function(){i.popover("hide")})):i.css("display",""),i.data("bs.popover").options.content=e,i.attr("aria-describedby")&&i.popover("show")):(i.hide(),i.data("bs.popover")&&i.popover("hide"))})):"bootbox"===n.mode&&("bootbox"in window||p.error("MissingLibrary",'Bootbox is required to use "filter-description" plugin. Get it here: http://bootboxjs.com'),this.on("afterUpdateRuleFilter afterUpdateRuleOperator",function(e,t){var i=t.$el.find("button.filter-description"),e=e.builder.getFilterDescription(t.filter,t);e?(0===i.length?((i=d('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="bootbox"><i class="'+n.icon+'"></i></button>')).prependTo(t.$el.find(h.selectors.rule_actions)),i.on("click",function(){bootbox.alert(i.data("description"))})):i.css("display",""),i.data("description",e)):i.hide()}))},{icon:"glyphicon glyphicon-info-sign",mode:"popover"}),h.extend({getFilterDescription:function(e,t){if(e)return"function"==typeof e.description?e.description.call(this,t):e.description}}),h.define("invert",function(i){var n=this,o=h.selectors;this.on("afterInit",function(){n.$el.on("click.queryBuilder","[data-invert=group]",function(){var e=d(this).closest(o.group_container);n.invert(n.getModel(e),i)}),i.display_rules_button&&i.invert_rules&&n.$el.on("click.queryBuilder","[data-invert=rule]",function(){var e=d(this).closest(o.rule_container);n.invert(n.getModel(e),i)})}),i.disable_template||(this.on("getGroupTemplate.filter",function(e){var t=d(e.value);t.find(o.condition_container).after('<button type="button" class="btn btn-xs btn-default" data-invert="group"><i class="'+i.icon+'"></i> '+n.translate("invert")+"</button>"),e.value=t.prop("outerHTML")}),i.display_rules_button&&i.invert_rules&&this.on("getRuleTemplate.filter",function(e){var t=d(e.value);t.find(o.rule_actions).prepend('<button type="button" class="btn btn-xs btn-default" data-invert="rule"><i class="'+i.icon+'"></i> '+n.translate("invert")+"</button>"),e.value=t.prop("outerHTML")}))},{icon:"glyphicon glyphicon-random",recursive:!0,invert_rules:!0,display_rules_button:!1,silent_fail:!1,disable_template:!1}),h.defaults({operatorOpposites:{equal:"not_equal",not_equal:"equal",in:"not_in",not_in:"in",less:"greater_or_equal",less_or_equal:"greater",greater:"less_or_equal",greater_or_equal:"less",between:"not_between",not_between:"between",begins_with:"not_begins_with",not_begins_with:"begins_with",contains:"not_contains",not_contains:"contains",ends_with:"not_ends_with",not_ends_with:"ends_with",is_empty:"is_not_empty",is_not_empty:"is_empty",is_null:"is_not_null",is_not_null:"is_null"},conditionOpposites:{AND:"OR",OR:"AND"}}),h.extend({invert:function(e,t){if(!(e instanceof o)){if(!this.model.root)return;t=e,e=this.model.root}var i,n;void 0===(t="object"!=typeof t?{}:t).recursive&&(t.recursive=!0),void 0===t.invert_rules&&(t.invert_rules=!0),void 0===t.silent_fail&&(t.silent_fail=!1),void 0===t.trigger&&(t.trigger=!0),e instanceof l?(this.settings.conditionOpposites[e.condition]?e.condition=this.settings.conditionOpposites[e.condition]:t.silent_fail||p.error("InvertCondition",'Unknown inverse of condition "{0}"',e.condition),t.recursive&&(i=d.extend({},t,{trigger:!1}),e.each(function(e){t.invert_rules&&this.invert(e,i)},function(e){this.invert(e,i)},this))):e instanceof s&&e.operator&&!e.filter.no_invert&&(this.settings.operatorOpposites[e.operator.type]?(n=this.settings.operatorOpposites[e.operator.type],e.filter.operators&&-1==e.filter.operators.indexOf(n)||(e.operator=this.getOperatorByType(n))):t.silent_fail||p.error("InvertOperator",'Unknown inverse of operator "{0}"',e.operator.type)),t.trigger&&(this.trigger("afterInvert",e,t),this.trigger("rulesChanged"))}}),h.defaults({mongoOperators:{equal:function(e){return e[0]},not_equal:function(e){return{$ne:e[0]}},in:function(e){return{$in:e}},not_in:function(e){return{$nin:e}},less:function(e){return{$lt:e[0]}},less_or_equal:function(e){return{$lte:e[0]}},greater:function(e){return{$gt:e[0]}},greater_or_equal:function(e){return{$gte:e[0]}},between:function(e){return{$gte:e[0],$lte:e[1]}},not_between:function(e){return{$lt:e[0],$gt:e[1]}},begins_with:function(e){return{$regex:"^"+p.escapeRegExp(e[0])}},not_begins_with:function(e){return{$regex:"^(?!"+p.escapeRegExp(e[0])+")"}},contains:function(e){return{$regex:p.escapeRegExp(e[0])}},not_contains:function(e){return{$regex:"^((?!"+p.escapeRegExp(e[0])+").)*$",$options:"s"}},ends_with:function(e){return{$regex:p.escapeRegExp(e[0])+"$"}},not_ends_with:function(e){return{$regex:"(?<!"+p.escapeRegExp(e[0])+")$"}},is_empty:function(e){return""},is_not_empty:function(e){return{$ne:""}},is_null:function(e){return null},is_not_null:function(e){return{$ne:null}}},mongoRuleOperators:{$eq:function(e){return{val:e,op:null===e?"is_null":""===e?"is_empty":"equal"}},$ne:function(e){return{val:e=e.$ne,op:null===e?"is_not_null":""===e?"is_not_empty":"not_equal"}},$regex:function(e){return"^(?!"==(e=e.$regex).slice(0,4)&&")"==e.slice(-1)?{val:e.slice(4,-1),op:"not_begins_with"}:"^((?!"==e.slice(0,5)&&").)*$"==e.slice(-5)?{val:e.slice(5,-5),op:"not_contains"}:"(?<!"==e.slice(0,4)&&")$"==e.slice(-2)?{val:e.slice(4,-2),op:"not_ends_with"}:"$"==e.slice(-1)?{val:e.slice(0,-1),op:"ends_with"}:"^"==e.slice(0,1)?{val:e.slice(1),op:"begins_with"}:{val:e,op:"contains"}},between:function(e){return{val:[e.$gte,e.$lte],op:"between"}},not_between:function(e){return{val:[e.$lt,e.$gt],op:"not_between"}},$in:function(e){return{val:e.$in,op:"in"}},$nin:function(e){return{val:e.$nin,op:"not_in"}},$lt:function(e){return{val:e.$lt,op:"less"}},$lte:function(e){return{val:e.$lte,op:"less_or_equal"}},$gt:function(e){return{val:e.$gt,op:"greater"}},$gte:function(e){return{val:e.$gte,op:"greater_or_equal"}}}}),h.extend({getMongo:function(e){if(!(e=void 0===e?this.getRules():e))return null;var r=this;return function n(e){if(e.condition||(e.condition=r.settings.default_condition),-1===["AND","OR"].indexOf(e.condition.toUpperCase())&&p.error("UndefinedMongoCondition",'Unable to build MongoDB query with condition "{0}"',e.condition),!e.rules)return{};var o=[],t=(e.rules.forEach(function(e){var t,i;e.rules&&0<e.rules.length?o.push(n(e)):(t=r.settings.mongoOperators[e.operator],i=r.getOperatorByType(e.operator),void 0===t&&p.error("UndefinedMongoOperator",'Unknown MongoDB operation for operator "{0}"',e.operator),0===i.nb_inputs||e.value instanceof Array||(e.value=[e.value]),(i={})[r.change("getMongoDBField",e.field,e)]=t.call(r,e.value),o.push(r.change("ruleToMongo",i,e,e.value,t)))}),{});return t["$"+e.condition.toLowerCase()]=o,r.change("groupToMongo",t,e)}(e)},getRulesFromMongo:function(e){if(null==e)return null;var a=this;if("rules"in(e=a.change("parseMongoNode",e))&&"condition"in e)return e;if("id"in e&&"operator"in e&&"value"in e)return{condition:this.settings.default_condition,rules:[e]};var t=a.getMongoCondition(e);return t||p.error("MongoParse","Invalid MongoDB query format"),function r(e,t){var i=e[t],s=[];return i.forEach(function(e){var t,i,n,o;"rules"in(e=a.change("parseMongoNode",e))&&"condition"in e||"id"in e&&"operator"in e&&"value"in e?s.push(e):(t=a.getMongoCondition(e))?s.push(r(e,t)):(o=e[t=Object.keys(e)[0]],void 0===(i=a.getMongoOperator(o))&&p.error("MongoParse","Invalid MongoDB query format"),void 0===(n=a.settings.mongoRuleOperators[i])&&p.error("UndefinedMongoOperator",'JSON Rule operation unknown for operator "{0}"',i),i=n.call(a,o),n=a.getMongoDBFieldID(t,o),o=a.change("mongoToRule",{id:n,field:t,operator:i.op,value:i.val},e),s.push(o))}),a.change("mongoToGroup",{condition:t.replace("$","").toUpperCase(),rules:s},e)}(e,t)},setRulesFromMongo:function(e){this.setRules(this.getRulesFromMongo(e))},getMongoDBFieldID:function(t,e){var i=this.filters.filter(function(e){return e.field===t}),i=1===i.length?i[0].id:this.change("getMongoDBFieldID",t,e);return i},getMongoOperator:function(e){if(null===e||"object"!=typeof e)return"$eq";if(void 0!==e.$gte&&void 0!==e.$lte)return"between";if(void 0!==e.$lt&&void 0!==e.$gt)return"not_between";e=Object.keys(e).filter(function(e){return!!this.settings.mongoRuleOperators[e]}.bind(this));return 1===e.length?e[0]:void 0},getMongoCondition:function(e){for(var t=Object.keys(e),i=0,n=t.length;i<n;i++)if("$or"===t[i].toLowerCase()||"$and"===t[i].toLowerCase())return t[i]}}),h.define("not-group",function(i){var n=this;this.on("afterInit",function(){n.$el.on("click.queryBuilder","[data-not=group]",function(){var e=d(this).closest(h.selectors.group_container),e=n.getModel(e);e.not=!e.not}),n.model.on("update",function(e,t,i){t instanceof l&&"not"===i&&n.updateGroupNot(t)})}),this.on("afterAddGroup",function(e,t){t.__.not=!1}),i.disable_template||this.on("getGroupTemplate.filter",function(e){var t=d(e.value);t.find(h.selectors.condition_container).prepend('<button type="button" class="btn btn-xs btn-default" data-not="group"><i class="'+i.icon_unchecked+'"></i> '+n.translate("NOT")+"</button>"),e.value=t.prop("outerHTML")}),this.on("groupToJson.filter",function(e,t){e.value.not=t.not}),this.on("jsonToGroup.filter",function(e,t){e.value.not=!!t.not}),this.on("groupToSQL.filter",function(e,t){t.not&&(e.value="NOT ( "+e.value+" )")}),this.on("parseSQLNode.filter",function(e){e.value.name&&"NOT"==e.value.name.toUpperCase()&&(e.value=e.value.arguments.value[0],-1===["AND","OR"].indexOf(e.value.operation.toUpperCase())&&(e.value=new SQLParser.nodes.Op(n.settings.default_condition,e.value,null)),e.value.not=!0)}),this.on("sqlGroupsDistinct.filter",function(e,t,i,n){i.not&&0<n&&(e.value=!0)}),this.on("sqlToGroup.filter",function(e,t){e.value.not=!!t.not}),this.on("groupToMongo.filter",function(e,t){var i="$"+t.condition.toLowerCase();t.not&&e.value[i]&&(e.value={$nor:[e.value]})}),this.on("parseMongoNode.filter",function(e){var t=Object.keys(e.value);"$nor"==t[0]&&(e.value=e.value[t[0]][0],e.value.not=!0)}),this.on("mongoToGroup.filter",function(e,t){e.value.not=!!t.not})},{icon_unchecked:"glyphicon glyphicon-unchecked",icon_checked:"glyphicon glyphicon-check",disable_template:!1}),p.defineModelProperties(l,["not"]),h.selectors.group_not=h.selectors.group_header+" [data-not=group]",h.extend({updateGroupNot:function(e){var t=this.plugins["not-group"];e.$el.find(">"+h.selectors.group_not).toggleClass("active",e.not).find("i").attr("class",e.not?t.icon_checked:t.icon_unchecked),this.trigger("afterUpdateGroupNot",e),this.trigger("rulesChanged")}}),h.define("sortable",function(n){var o,r,s,a;"interact"in window||p.error("MissingLibrary",'interact.js is required to use "sortable" plugin. Get it here: http://interactjs.io'),void 0!==n.default_no_sortable&&(p.error(!1,"Config",'Sortable plugin : "default_no_sortable" options is deprecated, use standard "default_rule_flags" and "default_group_flags" instead'),this.settings.default_rule_flags.no_sortable=this.settings.default_group_flags.no_sortable=n.default_no_sortable),interact.dynamicDrop(!0),interact.pointerMoveTolerance(10),this.on("afterAddRule afterAddGroup",function(e,t){var i;t!=o&&(i=e.builder,n.inherit_no_sortable&&t.parent&&t.parent.flags.no_sortable&&(t.flags.no_sortable=!0),n.inherit_no_drop&&t.parent&&t.parent.flags.no_drop&&(t.flags.no_drop=!0),t.flags.no_sortable||interact(t.$el[0]).draggable({allowFrom:h.selectors.drag_handle,onstart:function(e){a=!1,s=i.getModel(e.target),r=s.$el.clone().appendTo(s.$el.parent()).width(s.$el.outerWidth()).addClass("dragging");e=d('<div class="rule-placeholder">&nbsp;</div>').height(s.$el.outerHeight());o=s.parent.addRule(e,s.getPos()),s.$el.hide()},onmove:function(e){r[0].style.top=e.clientY-15+"px",r[0].style.left=e.clientX-15+"px"},onend:function(e){e.dropzone&&(c(s,d(e.relatedTarget),i),a=!0),r.remove(),r=void 0,o.drop(),o=void 0,s.$el.css("display",""),i.trigger("afterMove",s),i.trigger("rulesChanged")}}),t.flags.no_drop||(interact(t.$el[0]).dropzone({accept:h.selectors.rule_and_group_containers,ondragenter:function(e){c(o,d(e.target),i)},ondrop:function(e){a||c(s,d(e.target),i)}}),t instanceof l&&interact(t.$el.find(h.selectors.group_header)[0]).dropzone({accept:h.selectors.rule_and_group_containers,ondragenter:function(e){c(o,d(e.target),i)},ondrop:function(e){a||c(s,d(e.target),i)}})))}),this.on("beforeDeleteRule beforeDeleteGroup",function(e,t){e.isDefaultPrevented()||(interact(t.$el[0]).unset(),t instanceof l&&interact(t.$el.find(h.selectors.group_header)[0]).unset())}),this.on("afterApplyRuleFlags afterApplyGroupFlags",function(e,t){t.flags.no_sortable&&t.$el.find(".drag-handle").remove()}),n.disable_template||(this.on("getGroupTemplate.filter",function(e,t){1<t&&((t=d(e.value)).find(h.selectors.condition_container).after('<div class="drag-handle"><i class="'+n.icon+'"></i></div>'),e.value=t.prop("outerHTML"))}),this.on("getRuleTemplate.filter",function(e){var t=d(e.value);t.find(h.selectors.rule_header).after('<div class="drag-handle"><i class="'+n.icon+'"></i></div>'),e.value=t.prop("outerHTML")}))},{inherit_no_sortable:!0,inherit_no_drop:!0,icon:"glyphicon glyphicon-sort",disable_template:!1}),h.selectors.rule_and_group_containers=h.selectors.rule_container+", "+h.selectors.group_container,h.selectors.drag_handle=".drag-handle",h.defaults({default_rule_flags:{no_sortable:!1,no_drop:!1},default_group_flags:{no_sortable:!1,no_drop:!1}}),h.define("sql-support",function(e){},{boolean_as_integer:!0}),h.defaults({sqlOperators:{equal:{op:"= ?"},not_equal:{op:"!= ?"},in:{op:"IN(?)",sep:", "},not_in:{op:"NOT IN(?)",sep:", "},less:{op:"< ?"},less_or_equal:{op:"<= ?"},greater:{op:"> ?"},greater_or_equal:{op:">= ?"},between:{op:"BETWEEN ?",sep:" AND "},not_between:{op:"NOT BETWEEN ?",sep:" AND "},begins_with:{op:"LIKE(?)",mod:"{0}%"},not_begins_with:{op:"NOT LIKE(?)",mod:"{0}%"},contains:{op:"LIKE(?)",mod:"%{0}%"},not_contains:{op:"NOT LIKE(?)",mod:"%{0}%"},ends_with:{op:"LIKE(?)",mod:"%{0}"},not_ends_with:{op:"NOT LIKE(?)",mod:"%{0}"},is_empty:{op:"= ''"},is_not_empty:{op:"!= ''"},is_null:{op:"IS NULL"},is_not_null:{op:"IS NOT NULL"}},sqlRuleOperator:{"=":function(e){return{val:e,op:""===e?"is_empty":"equal"}},"!=":function(e){return{val:e,op:""===e?"is_not_empty":"not_equal"}},LIKE:function(e){return"%"==e.slice(0,1)&&"%"==e.slice(-1)?{val:e.slice(1,-1),op:"contains"}:"%"==e.slice(0,1)?{val:e.slice(1),op:"ends_with"}:"%"==e.slice(-1)?{val:e.slice(0,-1),op:"begins_with"}:void p.error("SQLParse",'Invalid value for LIKE operator "{0}"',e)},"NOT LIKE":function(e){return"%"==e.slice(0,1)&&"%"==e.slice(-1)?{val:e.slice(1,-1),op:"not_contains"}:"%"==e.slice(0,1)?{val:e.slice(1),op:"not_ends_with"}:"%"==e.slice(-1)?{val:e.slice(0,-1),op:"not_begins_with"}:void p.error("SQLParse",'Invalid value for NOT LIKE operator "{0}"',e)},IN:function(e){return{val:e,op:"in"}},"NOT IN":function(e){return{val:e,op:"not_in"}},"<":function(e){return{val:e,op:"less"}},"<=":function(e){return{val:e,op:"less_or_equal"}},">":function(e){return{val:e,op:"greater"}},">=":function(e){return{val:e,op:"greater_or_equal"}},BETWEEN:function(e){return{val:e,op:"between"}},"NOT BETWEEN":function(e){return{val:e,op:"not_between"}},IS:function(e){return null!==e&&p.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_null"}},"IS NOT":function(e){return null!==e&&p.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_not_null"}}},sqlStatements:{question_mark:function(){var i=[];return{add:function(e,t){return i.push(t),"?"},run:function(){return i}}},numbered:function(i){(!i||1<i.length)&&(i="$");var n=0,o=[];return{add:function(e,t){return o.push(t),i+ ++n},run:function(){return o}}},named:function(i){(!i||1<i.length)&&(i=":");var n={},o={};return{add:function(e,t){n[e.field]||(n[e.field]=1);e=e.field+"_"+n[e.field]++;return o[e]=t,i+e},run:function(){return o}}}},sqlRuleStatement:{question_mark:function(t){var i=0;return{parse:function(e){return"?"==e?t[i++]:e},esc:function(e){return e.replace(/\?/g,"'?'")}}},numbered:function(t,i){(!i||1<i.length)&&(i="$");var n=new RegExp("^\\"+i+"[0-9]+$"),o=new RegExp("\\"+i+"([0-9]+)","g");return{parse:function(e){return n.test(e)?t[e.slice(1)-1]:e},esc:function(e){return e.replace(o,"'"+("$"==i?"$$":i)+"$1'")}}},named:function(t,i){(!i||1<i.length)&&(i=":");var n=new RegExp("^\\"+i),o=new RegExp("\\"+i+"("+Object.keys(t).join("|")+")","g");return{parse:function(e){return n.test(e)?t[e.slice(1)]:e},esc:function(e){return e.replace(o,"'"+("$"==i?"$$":i)+"$1'")}}}}}),h.extend({getSQL:function(a,l,e){if(!(e=void 0===e?this.getRules():e))return null;l=l?"\n":" ";var c=this.getPluginOptions("sql-support","boolean_as_integer"),u=("string"==typeof(a=!0===a?"question_mark":a)&&(t=f(a),a=this.settings.sqlStatements[t[1]](t[2])),this),t=function r(e){if(e.condition||(e.condition=u.settings.default_condition),-1===["AND","OR"].indexOf(e.condition.toUpperCase())&&p.error("UndefinedSQLCondition",'Unable to build SQL query with condition "{0}"',e.condition),!e.rules)return"";var s=[],t=(e.rules.forEach(function(i){var n,o,e,t;i.rules&&0<i.rules.length?s.push("("+l+r(i)+l+")"+l):(n=u.settings.sqlOperators[i.operator],e=u.getOperatorByType(i.operator),o="",void 0===n&&p.error("UndefinedSQLOperator",'Unknown SQL operation for operator "{0}"',i.operator),0!==e.nb_inputs&&(i.value instanceof Array||(i.value=[i.value]),i.value.forEach(function(e,t){0<t&&(o+=n.sep),"boolean"==i.type&&c?e=e?1:0:a||"integer"===i.type||"double"===i.type||"boolean"===i.type||(e=p.escapeString(e)),n.mod&&(e=p.fmt(n.mod,e)),o+=a?a.add(i,e):"string"==typeof e?"'"+e+"'":e})),e=function(e){return n.op.replace("?",function(){return e})},t=u.change("getSQLField",i.field,i)+" "+e(o),s.push(u.change("ruleToSQL",t,i,o,e)))}),s.join(" "+e.condition+l));return u.change("groupToSQL",t,e)}(e);return a?{sql:t,params:a.run()}:{sql:t}},getRulesFromSQL:function(e,r){"SQLParser"in window||p.error("MissingLibrary","SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser");var s=this,t=("string"==typeof e&&(e={sql:e}),"string"==typeof(r=!0===r?"question_mark":r)&&(t=f(r),r=this.settings.sqlRuleStatement[t[1]](e.params,t[2])),r&&(e.sql=r.esc(e.sql)),0!==e.sql.toUpperCase().indexOf("SELECT")&&(e.sql="SELECT * FROM table WHERE "+e.sql),SQLParser.parse(e.sql)),e=(t.where||p.error("SQLParse","No WHERE clause found"),s.change("parseSQLNode",t.where.conditions));if("rules"in e&&"condition"in e)return e;if("id"in e&&"operator"in e&&"value"in e)return{condition:this.settings.default_condition,rules:[e]};var t=s.change("sqlToGroup",{condition:this.settings.default_condition,rules:[]},e),a=t;return function e(t,i){var n,o;null!==t&&("rules"in(t=s.change("parseSQLNode",t))&&"condition"in t||"id"in t&&"operator"in t&&"value"in t?a.rules.push(t):("left"in t&&"right"in t&&"operation"in t||p.error("SQLParse","Unable to parse WHERE clause"),-1!==["AND","OR"].indexOf(t.operation.toUpperCase())?(s.change("sqlGroupsDistinct",0<i&&a.condition!=t.operation.toUpperCase(),a,t,i)&&(o=s.change("sqlToGroup",{condition:s.settings.default_condition,rules:[]},t),a.rules.push(o),a=o),a.condition=t.operation.toUpperCase(),o=a,e(t.left,++i),a=o,e(t.right,i)):(d.isPlainObject(t.right.value)&&p.error("SQLParse","Value format not supported for {0}.",t.left.value),o=d.isArray(t.right.value)?t.right.value.map(function(e){return e.value}):t.right.value,r&&(o=d.isArray(o)?o.map(r.parse):r.parse(o)),i=t.operation.toUpperCase(),void 0===(i=s.settings.sqlRuleOperator[i="<>"==i?"!=":i])&&p.error("UndefinedSQLOperator",'Invalid SQL operation "{0}".',t.operation),i=i.call(this,o,t.operation),"values"in t.left?n=t.left.values.join("."):"value"in t.left?n=t.left.value:p.error("SQLParse","Cannot find field name in {0}",JSON.stringify(t.left)),o=s.getSQLFieldID(n,o),o=s.change("sqlToRule",{id:o,field:n,operator:i.op,value:i.val},t),a.rules.push(o))))}(e,0),t},setRulesFromSQL:function(e,t){this.setRules(this.getRulesFromSQL(e,t))},getSQLFieldID:function(t,e){var i=this.filters.filter(function(e){return e.field.toLowerCase()===t.toLowerCase()}),i=1===i.length?i[0].id:this.change("getSQLFieldID",t,e);return i}}),h.define("unique-filter",function(){this.status.used_filters={},this.on("afterUpdateRuleFilter",this.updateDisabledFilters),this.on("afterDeleteRule",this.updateDisabledFilters),this.on("afterCreateRuleFilters",this.applyDisabledFilters),this.on("afterReset",this.clearDisabledFilters),this.on("afterClear",this.clearDisabledFilters),this.on("getDefaultFilter.filter",function(t,i){var n=t.builder;n.updateDisabledFilters(),t.value.id in n.status.used_filters&&(n.filters.some(function(e){if(!(e.id in n.status.used_filters)||0<n.status.used_filters[e.id].length&&-1===n.status.used_filters[e.id].indexOf(i.parent))return t.value=e,!0})||(p.error(!1,"UniqueFilter","No more non-unique filters available"),t.value=void 0))})}),h.extend({updateDisabledFilters:function(e){var i=e?e.builder:this;i.status.used_filters={},i.model&&(function t(e){e.each(function(e){e.filter&&e.filter.unique&&(i.status.used_filters[e.filter.id]||(i.status.used_filters[e.filter.id]=[]),"group"==e.filter.unique&&i.status.used_filters[e.filter.id].push(e.parent))},function(e){t(e)})}(i.model.root),i.applyDisabledFilters(e))},clearDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={},t.applyDisabledFilters(e)},applyDisabledFilters:function(e){var i=e?e.builder:this;i.$el.find(h.selectors.filter_container+" option").prop("disabled",!1),d.each(i.status.used_filters,function(t,e){0===e.length?i.$el.find(h.selectors.filter_container+' option[value="'+t+'"]:not(:selected)').prop("disabled",!0):e.forEach(function(e){e.each(function(e){e.$el.find(h.selectors.filter_container+' option[value="'+t+'"]:not(:selected)').prop("disabled",!0)})})}),i.settings.plugins&&i.settings.plugins["bt-selectpicker"]&&i.$el.find(h.selectors.rule_filter).selectpicker("render")}}),h.regional.en={__locale:"English (en)",__author:'Damien "Mistic" Sorel, http://www.strangeplanet.fr',add_rule:t("querybuilder.common.add_rule"),add_group:t("querybuilder.common.add_group"),delete_rule:t("querybuilder.common.delete_rule"),delete_group:t("querybuilder.common.delete_group"),conditions:{AND:t("querybuilder.conditions.AND"),OR:t("querybuilder.conditions.OR")},operators:{equal:t("querybuilder.operators.equal"),not_equal:t("querybuilder.operators.not_equal"),in:t("querybuilder.operators.in"),not_in:t("querybuilder.operators.not_in"),less:t("querybuilder.operators.less"),less_or_equal:t("querybuilder.operators.less_or_equal"),greater:t("querybuilder.operators.greater"),greater_or_equal:t("querybuilder.operators.greater_or_equal"),between:t("querybuilder.operators.between"),not_between:t("querybuilder.operators.not_between"),begins_with:t("querybuilder.operators.begins_with"),not_begins_with:t("querybuilder.operators.not_begins_with"),contains:t("querybuilder.operators.contains"),not_contains:t("querybuilder.operators.not_contains"),ends_with:t("querybuilder.operators.ends_with"),not_ends_with:t("querybuilder.operators.not_ends_with"),is_empty:t("querybuilder.operators.is_empty"),is_not_empty:t("querybuilder.operators.is_not_empty"),is_null:t("querybuilder.operators.is_null"),is_not_null:t("querybuilder.operators.is_not_null"),before:t("querybuilder.operators.before"),after:t("querybuilder.operators.after"),like:"Like",not_like:"Not like"},errors:{no_filter:t("querybuilder.errors.no_filter"),empty_group:t("querybuilder.errors.empty_group"),radio_empty:t("querybuilder.errors.radio_empty"),checkbox_empty:t("querybuilder.errors.checkbox_empty"),select_empty:t("querybuilder.errors.select_empty"),string_empty:t("querybuilder.errors.string_empty"),string_exceed_min_length:t("querybuilder.errors.string_exceed_min_length"),string_exceed_max_length:t("querybuilder.errors.string_exceed_max_length"),string_invalid_format:t("querybuilder.errors.string_invalid_format"),number_nan:t("querybuilder.errors.number_nan"),number_not_integer:t("querybuilder.errors.number_not_integer"),number_not_double:t("querybuilder.errors.number_not_double"),number_exceed_min:t("querybuilder.errors.number_exceed_min"),number_exceed_max:t("querybuilder.errors.number_exceed_max"),number_wrong_step:t("querybuilder.errors.number_wrong_step"),number_between_invalid:"Invalid values, {0} is greater than {1}",datetime_empty:t("querybuilder.errors.datetime_empty"),datetime_invalid:t("querybuilder.errors.datetime_invalid"),datetime_exceed_min:t("querybuilder.errors.datetime_exceed_min"),datetime_exceed_max:t("querybuilder.errors.datetime_exceed_max"),datetime_between_invalid:"Invalid values, {0} is greater than {1}",boolean_not_valid:t("querybuilder.errors.boolean_not_valid"),operator_not_multiple:t("querybuilder.errors.operator_not_multiple")},invert:t("querybuilder.common.invert"),NOT:"NOT"},h.defaults({lang_code:"en"}),h}),!function(){var n=function(e,n,t){var o=this;n=_.bind(n,this),t=t&&t.exists()?t.first():$(document),_.each(e,function(e,i){t.on(i,e,function(e,t){o.event=e,o.trigger=i,o.el=$(this),o.data=t,n();e=$(o.event.target);!e.is("a")&&1!==e.parent("a").length||o.event.preventDefault()})})};n.new=function(e,t,i){new n(e,t,i)},n.translate=function(e){var i={};return _.each(e,function(e,t){e=e.split(/,\s?/),e=_.map(e,function(e){return'[data-action="'+e+'"]'}).join(", "),i[t]=e}),i},AGN.Lib.Action=n}(),!function(){function s(t,i,e){function n(){var e=i();return e&&AGN.Lib.Storage.set("autosave#"+t,{timestamp:(new Date).getTime(),values:e}),!1!==e}function o(){n()||$(document).unbind("ajax:unauthorized",o)}var r;0<e&&(r=setInterval(function(){n()||clearInterval(r)},1e3*e));$(document).on("ajax:unauthorized",o)}AGN.Lib.AutoSave={initialize:function(e,i,n,o,r){n=function(e,i,n){var o=AGN.Lib.Storage.get("autosave#"+e);if(o){var r=i?i(o.values,o.timestamp):o.values;if(r)return i=AGN.Lib.Template.text("autosave-restore",{modalClass:"",title:t("autosave.confirm.title"),content:t("autosave.confirm.question",new Date(o.timestamp).toLocaleString(window.adminLocale,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),negative:t("autosave.discard"),positive:t("autosave.restore")}),AGN.Lib.Confirm.create(i).done(function(){n(!0===r?o.values:r,o.timestamp),AGN.Lib.Messages(t("autosave.success.title"),t("autosave.success.message"),"success")}).always(function(){AGN.Lib.Storage.delete("autosave#"+e)}).promise();AGN.Lib.Storage.delete("autosave#"+e)}return $.Deferred().reject().promise()}(e,n,o);return s(e,i,r),n}}}(),!function(){function p(e){var t=e.parent().width(),i=0;return e.children("li").each(function(){i+=$(this).outerWidth(!0)}),i<=t}AGN.Lib.Breadcrumbs={truncate:function(e){$.each(e.find(".breadcrumbs.js-ellipsis"),function(e,t){var t=$(t),i=t.children("li");if(t.find("*").removeClass("breadcrumb-element-small"),i.removeClass("abbreviated"),i.css({"min-width":"","max-width":""}),i.show(),!p(t)&&(t.find("*").addClass("breadcrumb-element-small"),!p(t)))for(var r=[],s=t.parent().width(),n=($.each(i,function(e,t){var i,n,o,t=$(t);t.hasClass("js-ellipsis")?(i=t.html(),t.html("&hellip;"),n=t.outerWidth(!0),t.html(i),n=n<(i=t.outerWidth(!0))?n:i,t.addClass("abbreviated"),o=t.outerWidth(!0),t.removeClass("abbreviated"),r.unshift({$item:t,width:i,minimumWidth:n+1,minimumWidthAbbreviated:n+(o-i)+1})):s-=t.outerWidth(!0)}),r.length-1),o=0;o<=n;o++){var a,l,c=r[o],u=c.$item;if(c.width=u.outerWidth(!0),c.width>s){if(o==n)d=c.minimumWidth;else{u.addClass("abbreviated");for(var d=c.minimumWidthAbbreviated,h=o+1;h<=n;h++)r[h].$item.hide()}s<d&&0<o?(u.hide(),(l=(a=r[o-1]).$item).addClass("abbreviated"),l.outerWidth(!0)-a.width>s&&l.css("max-width",a.width+s)):u.css("max-width",s);break}s-=c.width}})}}}(),AGN.Lib.Clipboard={set:function(o,r){var e=o,t=function(e){if(e)r&&r(o,!0);else{var e=o,t=function(e){r&&r(o,e)},i=!0;try{var n=$("<input>");$("body").append(n),n.val(e),n.select(),document.execCommand("copy"),n.remove()}catch(e){console.warn(e),i=!1}t&&t(i)}};try{navigator.clipboard.writeText(e).then(function(){t(!0)},function(){t(!1)})}catch(e){console.warn(e),t(!1)}}},!function(){var o=function(e,t){this.$modal=e,this.deferred=t||$.Deferred()};o.get=function(e){return o.getWrapper(e).data("_confirm")},o.create=function(e,t){e=AGN.Lib.Modal.create(e),t=new o(e,t);return e.data("_confirm",t),t.promise()},o.createFromTemplate=function(e,t,i){e=AGN.Lib.Modal.createFromTemplate(e,t),t=new o(e,i);return e.data("_confirm",t),t.promise()},o.request=function(e){var n=$.Deferred(),e=_.isString(e)?$.get(e):e;return e.done(function(e){var t,i=$(e).all(".modal");1===i.length?(t=new o(i,n),i.data("_confirm",t),AGN.Lib.Modal.create(i)):(AGN.Lib.Page.render(e),n.reject())}).fail(function(){n.reject()}),n.promise()},o.getWrapper=function(e){var t=$(e.data("confirm-target"));return t=0==t.length?e.closest(".modal"):t},o.prototype.promise=function(){return this.deferred.promise()},o.prototype.positive=function(e){this.deferred.resolve(e),this.$modal.modal("hide"),this.$modal.remove()},o.prototype.negative=function(e){this.deferred.reject(e),this.$modal.modal("hide"),this.$modal.remove()},AGN.Lib.Confirm=o}(),AGN.Lib.ContextMenu={create:function(e){$.each(e,function(e,a){$.contextMenu({selector:e,build:function(e,t){var i=a,n=e,o=t;if(!1===i.shown||_.isFunction(i.shown)&&!1===i.shown(n,o))return!1;i=i.items,_.isFunction(i)&&(i=i(n,o));var r={},s=0;return $.each(i,function(e,i){_.isFunction(i.shown)&&!1===i.shown(n,o)||(e=r[e]={name:i.name,icon:i.icon},_.isFunction(i.disabled)?e.disabled=!0===i.disabled(n,o):!0===i.disabled&&(e.disabled=!0),_.isFunction(i.clicked)&&(e.callback=function(e,t){i.clicked(n,e,t)}),s++)}),!!s&&{items:r}}})})}},!function(){var e=function(e){(e=_.bind(e,this))()};e.prototype.addAction=function(e,t){AGN.Lib.Action.new(AGN.Lib.Action.translate(e),t)},e.prototype.addInitializer=function(e,t){AGN.Lib.CoreInitializer.new(e,t)},e.prototype.addDomInitializer=function(e,t){AGN.Lib.DomInitializer.new(e,t)},e.prototype.runInitializer=function(e){AGN.Lib.CoreInitializer.run(e)},e.new=function(e,t){AGN.Opt.Controllers[e]=t},e.init=function(e){(e=e||$(document)).all("[data-controller]").each(function(){var e=$(this),t=AGN.Opt.Controllers[e.data("controller")];t&&(new AGN.Lib.Controller(t),AGN.Opt.Controllers[e.data("controller")]=void 0)})},AGN.Lib.Controller=e}(),!function(){var a={};AGN.Lib.CoreInitializer={autorun:function(i){var n={},o=[];$.each(a,function(e,t){!function n(o,e,r,s){var t="key#"+e.name;if(!r[t]){Array.isArray(e.dependencies)&&e.dependencies.length&&(s.push(e.name),e.dependencies.forEach(function(e){var t,i=a["key#"+e];if(i){if(s.includes(e))return t=s.map(function(e){return"`"+e+"`"}).join(" => "),void console.error("Cyclic initializer dependency detected ("+t+" => `"+e+"`)");n(o,i,r,s)}else console.error("Unknown initializer dependency: `"+name+"`")}),s.pop());try{e.handler.call(e.handler,o)}catch(e){console.error(e)}r[t]=!0}}(i,t,n,o)})},run:function t(e,i){var n;if(!Array.isArray(e))return(n=a["key#"+e])?(n.handler.call(n.handler,i),!0):(console.error("Unknown initializer: `"+e+"`"),!1);e.forEach(function(e){t(e,i)})},new:function(e){var t=null,i=2<arguments.length?(t=arguments[1],arguments[2]):arguments[1];_.isFunction(i)?a["key#"+e]={name:e,handler:i,dependencies:t}:console.error("Handler must be a function")}}}(),!function(){var o={get:function(e){var t,i=e.data("provider"),n=e.data("provider-src");switch(i){case"opt":t=o.opt(n);break;case"remote":t=o.remote(n)}return t},opt:function(e){var t=$.Deferred();return AGN.Opt[e]?setTimeout(function(){t.resolve(AGN.Opt[e])},100):setTimeout(function(){t.reject()},100),t},remote:function(e){return $.get(e)}};AGN.Lib.DataProvider=o}(),!function(){var y={MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],LZ:function(e){return(e<0||9<e?"":"0")+e},compareDates:function(e,t,i,n){e=y.parseFormat(e,t),t=y.parseFormat(i,n);return 0==e||0==t?-1:t<e?1:0},format:function(e,t){t+="";var i,n="",o=0,r="",s=e.getYear()+"",a=e.getMonth()+1,l=e.getDate(),c=e.getDay(),u=e.getHours(),d=e.getMinutes(),e=e.getSeconds(),h=new Object;for(s.length<4&&(s=""+(+s+1900)),h.y=""+s,h.yyyy=s,h.yy=s.substring(2,4),h.M=a,h.MM=y.LZ(a),h.MMM=y.MONTH_NAMES[a-1],h.NNN=y.MONTH_NAMES[a+11],h.d=l,h.dd=y.LZ(l),h.E=y.DAY_NAMES[c+7],h.EE=y.DAY_NAMES[c],h.H=u,h.HH=y.LZ(u),h.h=0==u?12:12<u?u-12:u,h.hh=y.LZ(h.h),h.K=11<u?u-12:u,h.k=u+1,h.KK=y.LZ(h.K),h.kk=y.LZ(h.k),h.a=11<u?"PM":"AM",h.m=d,h.mm=y.LZ(d),h.s=e,h.ss=y.LZ(e);o<t.length;){for(i=t.charAt(o),r="";t.charAt(o)==i&&o<t.length;)r+=t.charAt(o++);null!=h[r]?n+=h[r]:n+=r}return n},_isInteger:function(e){for(var t=0;t<e.length;t++)if(-1=="1234567890".indexOf(e.charAt(t)))return!1;return!0},_getInt:function(e,t,i,n){for(var o=n;i<=o;o--){var r=e.substring(t,t+o);if(r.length<i)return null;if(y._isInteger(r))return r}return null},parseFormat:function(e,t){e+="",t+="";for(var i,n,o=0,r=0,s="",a=new Date,l=a.getYear(),c=a.getMonth()+1,u=1,d=a.getHours(),h=a.getMinutes(),p=a.getSeconds(),f="";r<t.length;){for(i=t.charAt(r),s="";t.charAt(r)==i&&r<t.length;)s+=t.charAt(r++);if("yyyy"==s||"yy"==s||"y"==s){if("yyyy"==s&&(n=4),"yy"==s&&(n=2),null==(l=y._getInt(e,o,n="y"==s?2:n,4)))return 0;o+=l.length,2==l.length&&(l=70<l?+l+1900:+l+2e3)}else if("MMM"==s||"NNN"==s){for(var c=0,g=0;g<y.MONTH_NAMES.length;g++){var m=y.MONTH_NAMES[g];if(e.substring(o,o+m.length).toLowerCase()==m.toLowerCase()&&("MMM"==s||"NNN"==s&&11<g)){12<(c=g+1)&&(c-=12),o+=m.length;break}}if(c<1||12<c)return 0}else if("EE"==s||"E"==s)for(g=0;g<y.DAY_NAMES.length;g++){var v=y.DAY_NAMES[g];if(e.substring(o,o+v.length).toLowerCase()==v.toLowerCase()){o+=v.length;break}}else if("MM"==s||"M"==s){if(null==(c=y._getInt(e,o,s.length,2))||c<1||12<c)return 0;o+=c.length}else if("dd"==s||"d"==s){if(null==(u=y._getInt(e,o,s.length,2))||u<1||31<u)return 0;o+=u.length}else if("hh"==s||"h"==s){if(null==(d=y._getInt(e,o,s.length,2))||d<1||12<d)return 0;o+=d.length}else if("HH"==s||"H"==s){if(null==(d=y._getInt(e,o,s.length,2))||d<0||23<d)return 0;o+=d.length}else if("KK"==s||"K"==s){if(null==(d=y._getInt(e,o,s.length,2))||d<0||11<d)return 0;o+=d.length}else if("kk"==s||"k"==s){if(null==(d=y._getInt(e,o,s.length,2))||d<1||24<d)return 0;o+=d.length,d--}else if("mm"==s||"m"==s){if(null==(h=y._getInt(e,o,s.length,2))||h<0||59<h)return 0;o+=h.length}else if("ss"==s||"s"==s){if(null==(p=y._getInt(e,o,s.length,2))||p<0||59<p)return 0;o+=p.length}else if("a"==s){if("am"==e.substring(o,o+2).toLowerCase())f="AM";else{if("pm"!=e.substring(o,o+2).toLowerCase())return 0;f="PM"}o+=2}else{if(e.substring(o,o+s.length)!=s)return 0;o+=s.length}}if(o!=e.length)return 0;if(2==c)if(l%4==0&&l%100!=0||l%400==0){if(29<u)return 0}else if(28<u)return 0;return(4==c||6==c||9==c||11==c)&&30<u?0:(d<12&&"PM"==f?d=+d+12:11<d&&"AM"==f&&(d-=12),new Date(l,c-1,u,d,h,p))},parse:function(e,t){if(t)return y.parseFormat(e,t);for(var i,n=2==arguments.length&&t,o=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d"),r=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"),s=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M"),a=[o,n?s:r,n?r:s],l=0;l<a.length;l++)for(var c=a[l],u=0;u<c.length;u++)if(0!=(i=y.parseFormat(e,c[u])))return new Date(i);return null},toArray:function(e,t){return e&&e.getMonth?[e.getFullYear(),e.getMonth(),e.getDate()]:t}};AGN.Lib.DateFormat=y}(),!function(){var i='script[type="application/json"]',n="config:",o={};function r(e,t){(this.el=e).is(i)?this.config=e.json():(e=e.find("script#"+CSS.escape(n+t))).exists()&&((t=e.attr("type"))&&"application/json"!==t?console.error("Unexpected config script type: `"+t+"`"):this.config=e.json())}function s(e,t,i){var n=o["key#"+e];return!!n&&(!1===n.call(new r(t,e),t,i)&&(o["key#"+e]=void 0),!0)}r.prototype.addAction=function(e,t){AGN.Lib.Action.new(AGN.Lib.Action.translate(e),t,this.el)},AGN.Lib.DomInitializer={autorun:function(t){(t||$(document)).all("[data-initializer]").each(function(){var e=$(this);s(e.data("initializer"),e,t)})},run:s,try:function(e,t){var i;o["key#"+e]&&(i=(t||$(document)).all('[data-initializer="'+CSS.escape(e)+'"]')).exists()&&s(e,i,t)},new:function(e,t){_.isFunction(t)?o["key#"+e]=t:console.error("Handler must be a function")}}}(),!function(){var i,n,o,r,t=function(e){var t,i,n,o=this;this.el=$(e),e=!!this.el.attr("readonly"),this.isFullHeight=!!this.el.data("full-height-editor"),this.height=15*parseInt(this.el.attr("rows")||15),n=this.el.attr("id")+"Editor",1===(t=$("#"+n)).length?(i=n,n=t.data("full-height-editor"),t.css("height",n?"100%":this.height+"px")):(i=_.uniqueId("Editor"),(t=$('<div id="'+i+'" class="form-control"></div>')).css("height",this.isFullHeight?"100%":this.height+"px"),t.insertAfter($(this.el))),this.el.hide(),this.editor=ace.edit(i),this.editor.setReadOnly(e),this.editor.getSession().setValue(this.el.val()),this.editor.getSession().on("change",function(e){o.el.val(o.editor.getSession().getValue()),o.el.trigger("editor:change")}),this.langTools=ace.require("ace/ext/language_tools"),this.decorate(),this.el.hasClass("js-editor-validate")&&this.editor.getSession().setUseWorker(!0),this.el.hasClass("js-editor-wrap")&&this.editor.getSession().setUseWrapMode(!0),o.el.trigger("editor:create")};t.get=function(e){var t=e.data("_editor");return t||(e.hasClass("js-editor")?t=new i(e):e.hasClass("js-editor-text")?t=new n(e):e.hasClass("js-editor-eql")?t=new o(e):e.hasClass("js-editor-css")&&(t=new r(e)),e.data("_editor",t),t)},t.all=function(){return _.map($(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),function(e){return t.get($(e))})},t.prototype.decorate=function(){$("body").hasClass("dark-theme")?this.editor.setTheme("ace/theme/idle_fingers"):this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!0),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:20})},t.prototype.resize=function(){this.editor.resize()},t.prototype.val=function(e){if(void 0===e)return this.editor.getSession().getValue();this.editor.getSession().setValue(e)},(i=function(e){t.apply(this,e)}).prototype=Object.create(t.prototype),(i.prototype.constructor=i).prototype.decorate=function(){t.prototype.decorate.call(this),this.editor.getSession().setMode("ace/mode/html")},(n=function(e){t.apply(this,e)}).prototype=Object.create(t.prototype),(n.prototype.constructor=n).prototype.decorate=function(){$("body").hasClass("dark-theme")?this.editor.setTheme("ace/theme/idle_fingers"):this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!1),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.editor.setOptions({enableBasicAutocompletion:!1,enableSnippets:!1,enableLiveAutocompletion:!1,minLines:20}),this.editor.getSession().setMode("ace/mode/text")},(o=function(e){t.apply(this,e)}).prototype=Object.create(t.prototype),(o.prototype.constructor=o).prototype.decorate=function(){$("body").hasClass("dark-theme")?this.editor.setTheme("ace/theme/idle_fingers"):this.editor.setTheme("ace/theme/chrome"),this.editor.session.setUseWrapMode(!1),this.editor.session.setWrapLimitRange(null,null),this.editor.setBehavioursEnabled(!0),this.editor.setShowPrintMargin(!1),this.editor.session.setUseSoftTabs(!0),this.editor.getSession().setUseWorker(!1),this.langTools.setCompleters([this.langTools.keyWordCompleter,this.langTools.snippetCompleter]),this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!1,enableLiveAutocompletion:!0,minLines:20}),ace.config.loadModule("ace/ext/eql_constructions_tokens"),ace.config.loadModule("ace/ext/eql_constructions_basic"),ace.config.loadModule("ace/ext/eql_constructions_extended"),this.editor.getSession().setMode("ace/mode/eql")},(r=function(e){t.apply(this,e)}).prototype=Object.create(t.prototype),(r.prototype.constructor=r).prototype.decorate=function(){t.prototype.decorate.call(this),this.editor.getSession().setMode("ace/mode/css")},AGN.Lib.Editor=t,AGN.Lib.EditorHtml=i,AGN.Lib.EditorText=n,AGN.Lib.EditorEql=o,AGN.Lib.EditorCss=r}(),AGN.Lib.Equalizer=function(e){var t,e=$(e),i=e.find("[data-equalizer-watch]:visible"),n=e.data("equalizer"),o=parseInt(e.data("equalizer-min"))||0,e=parseInt(e.data("equalizer-max"))||1e4;0!=i.length&&(1==i.length&&"min"==n&&(e=o),i.css({height:"",overflow:"","overflow-y":""}),t=_.map(i,function(e){return $(e).outerHeight(!1)}),e<(n=(n=("min"==n?Math.min:Math.max).apply(null,t))<o?o:n)&&(n=e),i.css({height:n,overflow:"hidden","overflow-y":"auto"}))},!function(){function i(){}function o(e){e.exists()||(e=o.create({})),this.$rowWrapper=e}function r(e){e.exists()||(e=r.create({})),this.$rowWrapper=e}function e(e){var t=this;t.$container=e.find("table tbody"),t.$container.on("scheduler:add-day",function(){1<t.$container.find(".l-time-schedule-row").length&&t.$container.find('[data-action="remove-day"]').removeClass("hidden")}),t.$container.on("scheduler:remove-day",function(){var e=t.$container.find(".l-time-schedule-row");e.length<=1&&e.find('[data-action="remove-day"]').addClass("hidden")})}function n(e){var t=100;e&&(t=Number(e)),this.intervalPad=t}i.defaults=function(){return[{active:!1,time:""}]},i.create=function(e,t){return e=$.extend(i.defaults()[0],e),t?AGN.Lib.Template.dom("schedule-extended-time-wrapper",{scheduleElement:e}):AGN.Lib.Template.dom("schedule-time-wrapper",{scheduleElement:e})},i.get=function(e){return e.closest(".schedule-time-wrapper")},o.prototype.toJson=function(){var e=this.$rowWrapper.find("select[name=dayOfTheWeek]").val(),t=_.map(this.$rowWrapper.find(".schedule-time-wrapper"),function(e){var t=$(e).find(".time-checkbox");return{active:!t.is(":disabled")&&t.is(":checked"),time:$(e).find(".time-input").val()}}),i=this.$rowWrapper.find(".hour-checkbox"),i={active:i.is(":checked")&&!i.is(":disabled"),interval:this.$rowWrapper.find("select.hour-select").val()};return $.extend(o.defaults(),{weekDay:e,scheduledTime:t,scheduledInterval:i})},o.prototype.addSchedule=function(e){var t=this.$rowWrapper,e=i.create(e,!0);t.find(".schedule-settings-wrapper").append(e),AGN.runAll(e),t.trigger("row:add-schedule")},o.prototype.removeSchedule=function(e){i.get(e).remove(),this.$rowWrapper.trigger("row:remove-schedule")},o.prototype.hourCheckboxToggle=function(e){var t=e.attr("disables"),e=e.is(":checked");this.$rowWrapper.find(t).prop("disabled",e)},o.prototype.timeCheckboxToggle=function(e){for(var t,i=e.attr("disables"),n=e.is(":checked"),o=this.$rowWrapper.find(".time-checkbox"),r=this.$rowWrapper.find(".hour-checkbox"),s=0;s<o.length;s++){var a=o[s];if(e[0]!==a&&$(a).is(":checked")){t=!0;break}}r.is(":disabled")&&t||this.$rowWrapper.find(i).prop("disabled",n)},o.prototype.getAllScheduleTimes=function(){var e=this.toJson(),t=[];return e.scheduledTime.forEach(function(e){e.active&&t.push(parseInt(e.time.replace(":","")))}),t},o.prototype.isValidTimeIntervals=function(){var e=new n,t=this.getAllScheduleTimes();return e.valid(t)},o.prototype.showTimeScheduleErrors=function(e){var t=this.$rowWrapper.find(".schedule-time-wrapper"),i=$('<div class="form-control-feedback-message js-form-error-msg">'+e+"</div>");_.each(t,function(e){e=$(e);e.find(".js-form-error-msg").exists()||(e.find(".time-input").after(i.clone()),e.addClass("has-alert has-feedback js-form-error"))})},o.prototype.hideTimeScheduleErrors=function(){var e=this.$rowWrapper.find(".schedule-time-wrapper");e.find(".js-form-error-msg").remove(),e.removeClass("has-alert has-feedback js-form-error")},o.defaults=function(){return{weekDay:"",scheduledInterval:{active:!1,interval:""},scheduledTime:[{active:!1,time:""}]}},o.get=function(e){e=e.hasClass("tr.l-time-schedule-row")?e:e.closest("tr.l-time-schedule-row");return new o(e)},o.create=function(e){e=$.extend(o.defaults(),e);var i=AGN.Lib.Template.dom("schedule-day-row",{entry:e}),n=new o(i);return i.on("row:add-schedule",function(){var e=1<i.find(".schedule-time-wrapper").length,e=(i.find('[data-action="remove-schedule"]').closest(".input-group-addon").toggleClass("hidden",!e),i.find(".interval-reminder").toggleClass("hidden",!e),i.find(".hour-checkbox")),e=(n.hourCheckboxToggle(e),i.find(".time-checkbox"));n.timeCheckboxToggle(e)}),i.on("row:remove-schedule",function(){var e=i.find(".schedule-time-wrapper"),t=1<e.length;i.find('[data-action="remove-schedule"]').closest(".input-group-addon").toggleClass("hidden",!t),i.find(".interval-reminder").toggleClass("hidden",!t),0===e.length&&n.addSchedule()}),i},o.deserialize=function(e){return o.create(e)},r.prototype.toJson=function(){var e=this.$rowWrapper.find("input[name=type]:checked").val(),t=void 0,i=void 0,n=("TYPE_MONTHLY"==e?i=this.$rowWrapper.find("select[name=dayOfTheMonth]").val():t=this.$rowWrapper.find("select[name=dayOfTheWeek]").val(),_.map(this.$rowWrapper.find(".schedule-time-wrapper"),function(e){var t=$(e).find(".time-checkbox"),i=!0,t=(t.exists()&&(i=!t.is(":disabled")&&t.is(":checked")),$(e).find(".time-input").val());return{active:i,time:t}}));return $.extend(r.defaults(),{type:e,weekDay:t,monthDay:i,scheduledTime:n})},r.prototype.addSchedule=function(e){var t=this.$rowWrapper,e=i.create(e);t.find(".schedule-settings-wrapper").append(e),AGN.runAll(e),t.trigger("row:add-schedule")},r.prototype.removeSchedule=function(e){i.get(e).remove(),this.$rowWrapper.trigger("row:remove-schedule")},r.defaults=function(){return{type:"1",weekDay:"",monthDay:"",scheduledTime:[{active:!1,time:""}]}},r.deserialize=function(e,t){var i=$.extend(r.defaults(),e);return i.type="TYPE_MONTHLY"!==e.type?1:2,i.monthDay=function(e){switch(e){case"TYPE_MONTHLY_FIRST":return 1;case"TYPE_MONTHLY_15TH":return 15;case"TYPE_MONTHLY_LAST":return 99;default:return 1}}(e.monthDay),r.create(i)},r.get=function(e){e=e.hasClass("tr.l-time-schedule-row")?e:e.closest("tr.l-time-schedule-row");return new r(e)},r.create=function(e){e=$.extend(r.defaults(),e);var t=AGN.Lib.Template.dom("schedule-period-row",{entry:e}),i=new r(t);return t.on("row:add-schedule",function(){1<t.find(".schedule-time-wrapper").length&&t.find('[data-action="remove-schedule"]').closest(".input-group-addon").removeClass("hidden")}),t.on("row:remove-schedule",function(){var e=t.find(".schedule-time-wrapper");e.length<2&&t.find('[data-action="remove-schedule"]').closest(".input-group-addon").addClass("hidden"),0===e.length&&i.addSchedule()}),t},e.prototype.clean=function(){this.$container.find("tr.l-time-schedule-row").remove()},e.prototype.deleteRow=function(e){this.deleteRowByNeedle(e.$rowWrapper)},e.prototype.deleteRowByNeedle=function(e){this.$container.find(e).remove(),this.$container.trigger("scheduler:remove-day")},e.prototype.addRow=function(e){e&&(this.$container.append(e),AGN.runAll(e),this.$container.trigger("scheduler:add-day",e),e.trigger("row:add-schedule",e))},e.prototype.addEmptyDayRow=function(){this.addRow(o.create())},e.prototype.addEmptyPeriodRow=function(){this.addRow(r.create())},e.prototype.getAllDayRows=function(){var e=this.$container.find("tr.l-time-schedule-row");return _.map(e,function(e){return o.get($(e))})},e.prototype.getAllPeriodRows=function(){var e=this.$container.find("tr.l-time-schedule-row");return _.map(e,function(e){return r.get($(e))})},e.prototype.getSubmissionJson=function(e){var t={};return"day"==e?t=_.map(this.getAllDayRows(),function(e){return e.toJson()}):"period"==e&&(t=_.map(this.getAllPeriodRows(),function(e){return e.toJson()})),JSON.stringify(t)},n.prototype.valid=function(e){var t=this.intervalPad;return e.every(n.hasCorrectInterval,t)},n.hasCorrectInterval=function(t,e,i){var n=this,o=!0;return i.splice(e,1),i.forEach(function(e){Math.abs(e-t)<n&&(o=!1)}),o},AGN.Lib.ScheduleTimeTable=e,AGN.Lib.ScheduleTimeTable.DayRow=o,AGN.Lib.ScheduleTimeTable.PeriodRow=r}(),!function(){var l,e,i;(l=function(e){this.el=e}).create=function(e){var t=e.data("field");return new(AGN.Opt.Fields[t]||l)(e)},l.prototype.valid=function(){return!0},l.prototype.errors=function(){return[]},AGN.Lib.Field=l,(((e=function(e){l.apply(this,[e]);e=this.el.find("[data-field-validator]"),this.$target=e,this.validatorName=e.data("field-validator"),e=e.data("validator-options");this.options=e&&AGN.Lib.Helpers.objFromString(e)||{}}).prototype=Object.create(l.prototype)).constructor=e).prototype.valid=function(){var e=AGN.Lib.Validator.get(this.validatorName);return e&&this.$target.exists()?e.valid(this.$target,this.options):(console.debug("Validator `"+this.validatorName+"` doesn't exist"),!0)},e.prototype.errors=function(){var e=AGN.Lib.Validator.get(this.validatorName);return e&&this.$target.exists()?e.errors(this.$target,this.options):(console.debug("Validator `"+this.validatorName+"` doesn't exist"),[])},AGN.Lib.CustomField=e,AGN.Opt.Fields.validator=e,(((e=function(e){l.apply(this,[e]);var t=this;this.$source=this.el.find(".js-double-select-trigger"),this.$target=this.el.find(".js-double-select-target"),this.$source.on("change",function(){t.$target.val([]),t.update()}),AGN.Lib.DataProvider.get(e).done(function(e){t.options=e,t.update()})}).prototype=Object.create(l.prototype)).constructor=e).prototype.update=function(){var e=this.$source.find("option:selected").val(),t=this.$target.find("option:selected").val(),e=_.template('{{ _.forEach(opts, function(name, value) { }}<option value="{{- value }}" {{- ( value == valueSelected ) ? "selected" : "" }}>{{- name }}</option>{{ }); }}')({opts:this.options[e],valueSelected:t});this.$target.html(e),AGN.runAll(this.el)},AGN.Lib.DoubleSelectField=e,AGN.Opt.Fields["double-select"]=e,(((e=function(e){l.apply(this,[e]);var t=this;this.$source=this.el.find("[data-field-vis]"),this.$source.on("change",function(){t.update()}),t.update()}).prototype=Object.create(l.prototype)).constructor=e).prototype._updateSelects=function(){var t=this;_.each(this.$source.filter("select"),function(e){t._toggleFields($(e).find(":selected"))})},e.prototype._updateDefaults=function(){var t=this;_.each(this.el.find("[data-field-vis-default]"),function(e){t._toggleFields($(e))})},e.prototype._updateCheckboxes=function(){var t=this;_.each(this.$source.filter(":checked"),function(e){t._toggleFields($(e))})},e.prototype._toggleFields=function(t){var e,i;t.is(":disabled")&&!t.is("[data-field-vis-nondisabled]")||(e=t.data("field-vis-hide"),i=t.data("field-vis-show"),_.each(this.el.find(e),function(e){(t=$(e)).all(":input").each(function(){var e=$(this);e.prop("disabled")||(e.data("field-disabled",!0),e.prop("disabled",!0))}),t.hide(),t.data("select2")&&(t.select2("container").hide(),t.select2("enable",!1)),t.is("option")&&(t.prop("disabled",!0),AGN.Lib.CoreInitializer.run("select",t.parents("select")))}),_.each(this.el.find(i),function(e){(t=$(e)).all(":input").each(function(){var e=$(this);e.data("field-disabled")&&(e.prop("disabled",!1),e.removeData("field-disabled"))}),t.show(),t.data("select2")&&(t.select2("container").show(),t.select2("enable",!0)),t.is("option")&&(t.prop("disabled",!1),AGN.Lib.CoreInitializer.run("select",t.parents("select")))}))},e.prototype.update=function(){this._updateDefaults(),this._updateSelects(),this._updateCheckboxes()},AGN.Lib.ToggleVisField=e,AGN.Opt.Fields["toggle-vis"]=e,(((e=function(e){l.apply(this,[e]),this.$target=this.el.find("[data-field-required]")}).prototype=Object.create(l.prototype)).constructor=e).prototype.valid=function(){return!this.$target.exists()||$.trim(this.$target.val())},e.prototype.errors=function(){var e=[];return this.valid()||e.push({field:this.$target,msg:t("fields.required.errors.missing")}),e},AGN.Lib.RequiredField=e,AGN.Opt.Fields.required=e,(((e=function(e){l.apply(this,[e]);var t=this;this.$strength=this.el.find(".js-password-strength"),this.$strengthIndicator=this.el.find(".js-password-strength-indicator"),this.$match=this.el.find(".js-password-match"),this.$matchIndicator=this.el.find(".js-password-match-indicator"),this.$strength.on("keyup",function(){t.updateStrength(),t.updateMatch()}),this.$match.on("keyup",function(){t.updateMatch()})}).prototype=Object.create(l.prototype)).constructor=e).prototype.match=function(){return this.$strength.val()==this.$match.val()},e.prototype.safe=function(){return 0===this._getSecurityIssues().length},e.prototype._getSecurityIssues=function(){var e=[],i=this.$strength.val();if(0==i.length)return e;var n=this.$strength.attr("data-rule"),o=AGN.Lib.PasswordPolicies.find_password_policy(n)(i);if(null!=o&&0<o.length){e.push(t("fields.password.errors.unsafe"));for(var r=0;r<o.length;r++)e.push(t(o[r]))}return e},e._getRule=function(e){var t=8,i=["[a-z]","[A-Z]","[0-9]","[^a-zA-Z0-9]"];switch(e){case"LENGTH_8_MIXED":t=8,i=["[a-z]","[A-Z]","[0-9]","[^a-zA-Z0-9]"];break;case"LENGTH_12_SIMPLE":t=12,i=["."];break;case"WEBSERVICE":t=32,i=["."];break;default:return console.log("Don't know password policy '"+name+"'"),!1}return{minLength:t,checks:i}},e.prototype.passesCheck=function(e,t){return!!e.match(t)},e.prototype.valid=function(){return 0==this.$match.length||this.match()&&this.safe()},e.prototype.errors=function(){var i=this,n=[];if(this.valid())return n;this.match()||n.push({field:this.$match,msg:t("fields.password.errors.notMatching")});var e=this._getSecurityIssues();return 0<e.length&&e.forEach(function(e){n.push({field:i.$strength,msg:e})}),n},e.prototype.resetStrength=function(){AGN.Lib.Form.get(this.el).cleanErrors(this.$strengthIndicator.parents(".form-group")),this.$strengthIndicator.addClass("hidden"),this.$strengthIndicator.removeClass("state-alert"),this.$strengthIndicator.removeClass("state-success"),this.$strengthIndicator.html("")},e.prototype.resetMatch=function(){AGN.Lib.Form.get(this.el).cleanErrors(this.$matchIndicator.parents(".form-group")),this.$matchIndicator.addClass("hidden"),this.$matchIndicator.removeClass("state-success"),this.$matchIndicator.removeClass("state-alert"),this.$matchIndicator.html("")},e.prototype.updateStrength=function(){this.resetStrength(),0!=this.$strength.val().length&&(this.$strengthIndicator.removeClass("hidden"),this.safe()?(this.$strengthIndicator.addClass("state-success"),this.$strengthIndicator.html(t("fields.password.successHtml",t("fields.password.safe")))):(this.$strengthIndicator.addClass("state-alert"),this.$strengthIndicator.html(t("fields.password.unsuccessHtml",t("fields.password.unsafe")))))},e.prototype.updateMatch=function(){this.resetMatch(),0!=this.$match.val().length&&(this.$matchIndicator.removeClass("hidden"),this.match()?(this.$matchIndicator.addClass("state-success"),this.$matchIndicator.html(t("fields.password.successHtml",t("fields.password.matches")))):(this.$matchIndicator.addClass("state-alert"),this.$matchIndicator.html(t("fields.password.unsuccessHtml",t("fields.password.matchesNot")))))},AGN.Lib.PasswordField=e,AGN.Opt.Fields.password=e,(((e=function(e){l.apply(this,[e]),this.$source=this.el.find("[data-field-split]"),this.targets=this.$source.data("field-split").split(/,\s?/),this.rule=new RegExp(this.$source.data("field-split-rule"))}).prototype=Object.create(l.prototype)).constructor=e).prototype.valid=function(){var i=AGN.Lib.Form.get(this.el),n=this.$source.val().split(this.rule);return _.each(this.targets,function(e,t){i.setValueOnce(e,n[t])}),!0},AGN.Lib.ValueSplitField=e,AGN.Opt.Fields.split=e,(((e=function(e){var t=this;l.apply(this,[e]),this.$filters=this.el.find("[data-field-filter]"),this.$filters.on("change",function(){t.update()}),t.position(),t.update()}).prototype=Object.create(l.prototype)).constructor=e).prototype.position=function(){var e=$(this.el.data("filter-target"));this.el.detach(),this.el.appendTo(e),e.parents("table").hide(),e.parents("table").show()},e.prototype.isEnabled=function(){return this.$filters.get().some(function(e){e=$(e);if(e.is("input")){var t=e.attr("type");if("text"==t||"number"==t||"password"==t)return!!e.val()}return!!e.serialize()})},e.prototype.isDisabled=function(){return!this.isEnabled()},e.prototype.update=function(){this.isEnabled()?this.el.addClass("filter-active"):this.el.removeClass("filter-active")},AGN.Lib.FilterField=e,AGN.Opt.Fields.filter=e,(((i=function(e){var t=this;l.apply(this,[e]),this.$filterMin=this.el.find("[data-filter-date-min]"),this.$filterMax=this.el.find("[data-filter-date-max]"),this.$filters=this.el.find("[data-filter-date-min],[data-filter-date-max]"),this.$filterMin.on("change",function(){t.$filterMax.data("pickadate").set("min",t.$filterMin.val())}),this.$filterMax.on("change",function(){t.$filterMin.data("pickadate").set("max",t.$filterMax.val())}),this.$filters.on("change",function(){t.update()}),t.position(),t.update()}).prototype=Object.create(e.prototype)).constructor=i).prototype.isEnabled=function(){return _.some(this.$filters,function(e){return""!=$(e).val()})},AGN.Lib.DateFilterField=i,AGN.Opt.Fields["date-filter"]=i,(((e=function(e){var t=this;l.apply(this,[e]),this.$source=this.el.find("[data-field-date-split]"),this.$source.on("change",function(){t.update()})}).prototype=Object.create(l.prototype)).constructor=e).prototype.update=function(){var i=null,e=this.$source.val();e&&(i=new Date(parseInt(e))),this.el.find("[data-date-split-target]").each(function(){var e=$(this),t=e.attr("data-date-split-target");if(i&&t)switch(t.toUpperCase()){case"MILLISECONDS":e.val(i.getMilliseconds());break;case"SECONDS":e.val(i.getSeconds());break;case"MINUTES":e.val(i.getMinutes());break;case"HOURS":e.val(i.getHours());break;case"DAY":e.val(i.getDate());break;case"MONTH":e.val(i.getMonth()+1);break;case"YEAR":e.val(i.getFullYear());break;default:e.val(i.toJSON())}else e.val("")})},AGN.Lib.DateSplitField=e,AGN.Opt.Fields["date-split"]=e,((i=function(e){l.apply(this,[e]);var t,i,n,e=$(this.el),o=e.data("property"),r=_.extend({},AGN.Lib.Helpers.objFromString(e.data("field-options"))),s=r.value||r.defaultValue||"",a=r.dateFormat||"dd.mm.yyyy";r=e,t=o,s=s,i=a,(n=document.createElement("input")).type="hidden",n.name=t,n.value=s,r.append(_.template(AGN.Opt.Templates["datetime-picker"])({date:function(e){if(e)return e.split(" ")[0];return""}(s),time:function(e){if(e){e=e.split(" ");if(2==e.length)return e[1]}return""}(s),property:t,dateFormat:i})),r.append(n),AGN.runAll(r),e.on("change",function(){var e,t,i,n;t=a,i=(e=o).replace(/([:.\[\],=@])/g,"\\$1"),n=$("#"+i+"_date"),i=$("#"+i+"_time"),$('[name="'+e+'"]').val(function(e,t,i){t=t?t.val():"";return t=t?t.replaceAll("_","0"):"00:00",e.val()?function(e,t,i){return e.get("select",i)+(/^(\d{2}):(\d{2})$/.test(t)?" "+t:"")}(e.pickadate("picker"),t,i):""}(n,i,t))})}).prototype=Object.create(l.prototype)).constructor=i,AGN.Lib.DateTimeField=i,AGN.Opt.Fields.datetime=i}(),!function(){var o=_.template('<div class="form-group email-list-manager-row" data-action="change-trigger">        <div class="col-sm-12">            <div class="input-group">                <div class="input-group-controls">                    <input type="text" value="{{= value}}" class="form-control" size="42" maxlength="99"/>                </div>                <div class="input-group-btn">                    <button type="button" class="btn btn-regular btn-primary email-list-manager-add-btn" data-action="create-email">                        <i class="icon icon-plus"></i>                    </button>                </div>            </div>        </div>    </div>'),i=_.template('<button type="button" class="btn btn-regular btn-alert email-list-manager-delete-btn" data-action="delete-email">        <i class="icon icon-trash-o"></i>    </button>');function n(e,t,i){this.scope=e,this.data=t,this.options=$.extend({rowTemplate:o,rowSelector:".email-list-manager-row",addBtnSelector:".email-list-manager-add-btn",deleteBtnSelector:".email-list-manager-delete-btn",rowDataMapper:function(e){return{value:e}}},i);var n=this;_.each(n.data,function(e){s(n.scope,e,null,n.options)})}function r(e,t){e=e.find(t.rowSelector);1===e.length?e.find(t.deleteBtnSelector).remove():_.each(e,function(e){e=$(e);e.find(t.deleteBtnSelector).exists()||e.find(".input-group-btn").append(i({}))})}function s(e,t,i,n){t=n.rowTemplate(n.rowDataMapper(t));i&&i.exists()?i.closest(n.rowSelector).after(t):e.append(t),r(e,n)}n.initialize=function(e,t,i){return new n(e,t,i)},n.prototype.createRowAfter=function(e){s(this.scope,"",$(e),this.options)},n.prototype.deleteRow=function(e){$(e).closest(this.options.rowSelector).remove(),r(this.scope,this.options)},n.prototype.getJsonData=function(){var t=[];return _.each(this.scope.find(this.options.rowSelector+" input"),function(e){e=e.value;""!==e.trim()&&t.push(e)}),t},AGN.Lib.EmailsListManager=n}(),!function(){var r,t,i=AGN.Lib.Field;function o(e,t){var i=e,n=e.data("_editor"),e=e.data("emojioneArea"),o=!0;n?(n=n.editor).container&&(o=!1,i=$(n.container)):e?e.editor&&(o=!1,i=e.editor.parent()):i.is("select")&&(o=!1,i.is(".input-group .input-group-controls .js-select")&&(i=i.closest(".input-group"))),o&&i.after('<span class="icon icon-state-alert form-control-feedback js-form-error-ind"></span>'),i.after('<div class="form-control-feedback-message js-form-error-msg">'+t+"</div>")}(t=function(e){this.group=e,this.$controls=$()}).prototype._collect=function(e){var t=$("[data-controls-group]");return"*"===e?t:e?t.filter(function(){return e===$(this).attr("data-controls-group")}):$()},t.prototype.collect=function(){this.group&&(this.$controls=this._collect(this.group).filter(function(){var e=$(this);return!e.prop("disabled")&&!e.hasClass("disabled")}))},t.prototype.setDisabled=function(e){!1===e?(this.$controls.removeClass("disabled"),this.$controls.prop("disabled",!1)):(this.$controls.addClass("disabled"),this.$controls.prop("disabled",!0))},(r=function(e){this.$form=e,this.form=e[0],this._abort=null,this._data={},this._dataNextRequest={},this.fields=[],this.validatorName=null,this.validatorOptions=null,this.url=e.attr("action"),this.urlNextRequest=null,this.method=e.attr("method"),this.isMultipart="multipart/form-data"==(e.attr("enctype")||"").toLowerCase(),this.isCustomLoader=e.is("[data-custom-loader]"),this.controlsToDisable=new t(e.attr("data-disable-controls")),e.is("[data-custom-loader]")?this.isCustomLoader="false"!==e.attr("data-custom-loader"):this.isCustomLoader=!1,this.initFields(),this.initValidator()}).get=function(e){var t,e=r.getWrapper(e),i=e.data("_form");return i||(t=e.data("form"),i=new(AGN.Opt.Forms[t]||AGN.Lib.Form)(e),e.data("_form",i)),i},r.getWrapper=function(e){var t=$(e.data("form-target"));return t=0==t.length?e.closest("form"):t},r.prototype.valid=function(e){var t=$.Event("validation");if(e=_.merge({},this.validatorOptions,e),this.$form.trigger(t,e),t.isDefaultPrevented())return!1;t=_.every(this.fields,function(e){return e.valid()});if(this.validatorName){var i=AGN.Lib.Validator.get(this.validatorName);if(i)return i.valid(this,e,t)}return t},r.prototype.validate=function(e){return!!this.valid(e)||(this.handleErrors(),!1)},r.prototype.get$=function(){return this.$form},r.prototype.getAction=function(){var e;return this.urlNextRequest?(e=this.urlNextRequest,this.urlNextRequest=null,e):this.url},r.prototype.setActionOnce=function(e){this.urlNextRequest=e},r.prototype.errors=function(){var e,t=[];return _.each(this.fields,function(e){t=t.concat(e.errors())}),t=this.validatorName&&(e=AGN.Lib.Validator.get(this.validatorName))?t.concat(e.errors(this,this.validatorOptions)):t},r.prototype.setValue=function(e,t){var i=this.form[e];"object"==typeof i?($(i).val([t]),$(i).trigger("change")):void 0===t?delete this._data[e]:this._data[e]=t},r.prototype.setValueOnce=function(e,t){void 0===t?delete this._dataNextRequest[e]:this._dataNextRequest[e]=t},r.prototype.getValue=function(e){var t=this.form[e];return"object"==typeof t?t.value:this._data[e]},r.prototype.data=function(){var n,i;return this.isMultipart?(n=new FormData,i=this.$form.serializeFormDataObject(),$.each(this._data,function(e,t){i.hasOwnProperty(e)||(i[e]=t)}),$.each(this._dataNextRequest,function(e,t){i[e]=t}),$.each(i,function(i,e){$.isArray(e)?$.each(e,function(e,t){n.append(i,t)}):n.append(i,e)}),n):_.merge({},this._data,this.$form.serializeObject(),this._dataNextRequest)},r.prototype.params=function(){return $.param(this.data(),!0)},r.prototype.jqxhr=function(){var e,i=this,t=$.ajaxSettings.xhr(),n=$.Deferred(),o=(this.$form.trigger("form:submit"),{url:this.getAction(),method:this.method,loader:this.loader(),xhr:function(){return t}});return this.isMultipart?(o.data=this.data(),o.enctype="multipart/form-data",o.processData=!1,o.contentType=!1):o.data=this.params(),this.isCustomLoader&&(e=function(e){var t=!0;e.lengthComputable&&(t=(e.loaded/e.total*100).toFixed(1)),i.$form.trigger("form:progress",{loaded:e.loaded,total:e.total,progress:t})},"upload"in t?o.xhr=function(){return t.upload.onprogress=e,t}:o.xhrFields={onprogress:e}),"function"==typeof t.abort&&(this._abort=function(){t.abort()}),o=$.ajax(o),this._dataNextRequest={},this.setLoaderShown(!0),n.always(function(){i.setLoaderShown(!1)}),o.done(function(i){var e=$(i),e=e.filter('[data-form="polling"]').add(e.find('[data-form="polling"]'));1==e.length?((e=r.get(e).jqhxr()).done(function(){n.resolve.apply(this,arguments);var e=$("body"),t=$("<div></div>");t.html(i),t.find('script[data-message][type="text/html"]').appendTo(e),t.find('script[data-message][type="text/javascript"]').each(function(){try{eval.call(window,$(this).html())}catch(e){}}),t.remove()}),e.fail(function(){n.reject.apply(this,arguments)})):n.resolve(i)}),o.fail(function(){n.reject.apply(this,arguments)}),n.promise()},r.prototype._submit=function(){var e,t=this;return this.setLoaderShown(!0),(e=this.jqxhr()).done(function(e){t.setLoaderShown(!1),t.updateHtml(e),t.$form.trigger("submitted",e)}),e},r.prototype._submitStatic=function(){var e=this.data(),n=$('<form method="'+this.method+'" action="'+this.getAction()+'"></form>');_.each(e,function(e,t){var i;_.isArray(e)?(i=$('<select multiple name="'+t+'"></select>'),_.each(e,function(e){var t=$('<option selected="selected"></option>');t.val(e),t.appendTo(i)}),i.appendTo(n)):((t=$('<input type="hidden" name="'+t+'"/>')).val(e),t.appendTo(n))}),n.appendTo($("body")),n.submit(),n.remove(),this._dataNextRequest={}},r.prototype._submitAction=function(e){return this.setValue("previousAction",this.getValue("actionList")),this.setValueOnce("action",e),this.submit()},r.prototype._submitEvent=function(){var e=$.Event("submission");this.$form.trigger(e),e.isDefaultPrevented()||(this.$form.trigger("submitted"),this._dataNextRequest={})},r.prototype._submitConfirm=function(e){this.setValue("previousAction",this.getValue("actionList")),this.setValueOnce("action",e);var e=this.jqxhr(),t=this;return e.done(function(e){t.$form.trigger("submitted",e)}),e},r.prototype.submit=function(e){var t=0,i={},i="confirm"!=e&&"action"!=e||"number"!=typeof arguments[1]&&"string"!=typeof arguments[1]?arguments[1]:(t=arguments[1],arguments[2]);if(!this.valid(i))return this.handleErrors(),!1;switch(this.cleanErrors(),e){case"static":return this._submitStatic();case"confirm":return this._submitConfirm(t);case"action":return this._submitAction(t);case"event":return this._submitEvent();default:return this._submit()}},r.prototype.revertAction=function(){},r.prototype.reset=function(){this.$form.trigger("reset")},r.prototype.abort=function(){this.$form.trigger("form:abort"),this._abort&&(this._abort(),this._abort=null)},r.prototype.bulkUpdate=function(e,t){(e?this.$form.find('[name^="'+e+'"]'):this.$form.find(".js-bulk-ids")).prop("checked",t)},r.prototype.handleMessages=function(e){e=$(e),e=e.filter("script[data-message]").add(e.find("script[data-message]"));_.each(e,function(e){$("body").append(e)})},r.prototype.initFields=function(e){var t=this;e=e||this.$form,t.fields.length=0,_.each(e.find("[data-field]"),function(e){t.fields.push(i.create($(e)))})},r.prototype.initValidator=function(){this.validatorName=this.$form.data("validator");var e=this.$form.data("validator-options");this.validatorOptions=e?AGN.Lib.Helpers.objFromString(e):null},r.prototype.updateHtml=function(e){var t=$(e),t=this.$form.attr("id")?$(e).filter("#"+this.$form.attr("id")).add(t.find("#"+this.$form.attr("id"))):this.$form.attr("name")?$(e).filter('[name="'+this.$form.attr("name")+'"]').add(t.find('[name="'+this.$form.attr("name")+'"]')):$(e).filter("form").add(t.find("form"));this.$form.html(t.html()),this.handleMessages(e),this.initFields(),this.initValidator(),AGN.Lib.Controller.init(this.$form),AGN.runAll(this.$form)},r.prototype.loader=function(){var e=this;return{show:function(){e.controlsToDisable.collect(),e.controlsToDisable.setDisabled(!0),e.setLoaderShown(!0)},hide:function(){e.controlsToDisable.setDisabled(!1),e.setLoaderShown(!1)}}},r.prototype.setLoaderShown=function(e){this.isCustomLoader?e?this.$form.trigger("form:loadershow"):this.$form.trigger("form:loaderhide"):e?AGN.Lib.Loader.show():AGN.Lib.Loader.hide()},r.prototype.cleanErrors=function(e){e=e||this.$form.find(".js-form-error"),_.each(e,function(e){e=$(e);e.removeClass("has-alert has-feedback js-form-error"),e.find(".js-form-error-ind").remove(),e.find(".js-form-error-msg").remove()})},r.prototype.handleErrors=function(){var e,i=[],t=(this.cleanErrors(),this.errors().filter(function(e){return e.field&&0<e.field.length})),t=(_.each(t,function(e){var t,i,n=e.field;(i=(t=n).closest("td")).length&&i.parents(".table-form").length?i.addClass("has-alert js-form-error"):t.parents(".form-group").addClass("has-alert has-feedback js-form-error"),o(n,e.msg)}),_.each(this.errors(),function(e){var t,e=e.field;e.data("select2")?i.push(e.parent().find(".select2-container").offset().top):e.data("_editor")&&e.data("_editor").editor?(t=e.data("_editor").editor,i.push($(t.container).offset().top)):i.push(e.offset().top)}),!1),n=this.$form.closest(".modal");n.exists()||(n=$('.tile-content[data-sizing="scroll"]')).exists()&&(t=!0),(n=n.exists()?n:$(document)).find(".popover.support-popover").exists()||(e=this.$form.offset().top,t=t?_.sortBy(i)[0]+n.scrollTop()-n.offset().top-25:_.sortBy(i)[0]-e-25,n.scrollTop(t))},r.prototype.cleanFieldError=function(e){this.form[e]&&this.cleanFieldError$($(this.form[e]))},r.prototype.cleanFieldError$=function(e){e=e.closest(".js-form-error");e.removeClass("has-alert has-feedback js-form-error"),e.find(".js-form-error-ind").remove(),e.find(".js-form-error-msg").remove()},r.prototype.showFieldError=function(e,t,i){this.form[e]&&this.showFieldError$($(this.form[e]),t,i)},r.prototype.showFieldError$=function(e,t,i){var n=e.parents(".form-group");n.addClass("has-alert has-feedback js-form-error"),n.find(".js-form-error-ind").remove(),n.find(".js-form-error-msg").remove(),o(e,t),!0!==i&&((n=this.$form.closest("[data-sizing=scroll], .modal").first()).exists()?(t=$(".has-alert").first(),n.animate({scrollTop:t.offset().top-n.offset().top+n.scrollTop()})):(n=$(document)).scrollTop(e.offset().top-25))},AGN.Lib.Form=r}(),!function(){var e=function(e){this.$el=e};e.prototype.update=function(e){this.config=e,this.draw()},e.prototype.template=function(){var e=this.config;return _.template('<div class="grid-stage center-block" style="width: {{= viewWidth}} px; height: {{= viewHeight }}px;"><svg class="grid-view center-block" viewBox="0 0 {{= viewWidth }} {{= viewHeight }}" style="width: {{= viewWidth }}px; height: {{= viewHeight }}px"><g class="grid-columns"></g></svg></div>')({viewWidth:e.templateWidth,viewHeight:100})},e.prototype.data=function(){var t=[],i=this.config;return _.times(i.columnNum,function(e){t.push({type:"gutter",width:i.gutter/2,offset:_.reduce(t,function(e,t){return e+t.width},0)}),t.push({type:"col",width:i.columnWidth,offset:_.reduce(t,function(e,t){return e+t.width},0)}),t.push({type:"gutter",width:i.gutter/2,offset:_.reduce(t,function(e,t){return e+t.width},0)})}),t},e.prototype.draw=function(){this.$el.html(this.template()),d3.select(this.$el.find(".grid-columns")[0]).selectAll("g").data(this.data()).enter().append("g").attr("transform",function(e,t){return"translate("+e.offset+",0)"}).append("rect").attr("class",function(e){return"grid-view-"+e.type}).attr("width",function(e){return e.width}).attr("height",100)},AGN.Lib.GridView=e}(),!function(){var e=function(e){this.$el=e};e.prototype.update=function(e){this.config=e,this.draw()},e.prototype.template=function(){var e=this.config;return _.template('<div class="grid-stage center-block" style="width: {{= viewWidth }}"px"; height: {{= viewHeight }}px;"><svg class="column-view center-block" viewBox="0 0 {{= viewWidth }} {{= viewHeight }}" style="width: {{= viewWidth }}px; height: {{= viewHeight }}px"><g class="grid-columns"></g></svg></div>')({viewWidth:e.templateWidth,viewHeight:35*e.columnNum-5})},e.prototype.data=function(){var i=this.config,n=[];return _.times(i.columnNum,function(e){var t=[];t.push({type:"gutter",width:i.gutter/2,offset:0}),t.push({type:"col",width:(e+1)*i.columnWidth+e*i.gutter,offset:_.reduce(t,function(e,t){return e+t.width},0)}),t.push({type:"gutter",width:i.gutter/2,offset:_.reduce(t,function(e,t){return e+t.width},0)}),_.times(i.columnNum-(e+1),function(e){t.push({type:"gutter",width:i.gutter/2,offset:_.reduce(t,function(e,t){return e+t.width},0)}),t.push({type:"empty-col",width:i.columnWidth,offset:_.reduce(t,function(e,t){return e+t.width},0)}),t.push({type:"gutter",width:i.gutter/2,offset:_.reduce(t,function(e,t){return e+t.width},0)})}),n.push(t)}),n},e.prototype.draw=function(){var e,i=this.config;this.$el.html(this.template()),(e=d3.select(this.$el.find(".grid-columns")[0]).selectAll(".row").data(this.data()).enter().append("g").attr("class","row").attr("transform",function(e,t){return"translate(0,"+35*t+")"})).selectAll(".col").data(function(e){return e}).enter().append("g").attr("class","col").attr("transform",function(e){return"translate("+e.offset+",0)"}).append("rect").attr("class",function(e){return"column-view-"+e.type}).attr("width",function(e){return e.width}).attr("height",30),e.append("text").attr("class","column-view-text").attr("x",i.gutter/2+10).attr("y",20).text(function(e,t){return _.template("{{= width }}px / {{= perc }}%")({width:e[1].width,perc:Math.floor(100*(t+1)/i.columnNum)})})},AGN.Lib.GridColumnView=e}(),!function(){var s='<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content popover-scrollable"></div></div>',i=function(e){var t=AGN.url(e.data("help")),i=this;this.el=e,$.get(t).done(function(e){i.config=$(e),i.popoverInteractive(),i.show()})};i.show=function(e){var t=e.data("_help");t?t.show():(t=new i(e),e.data("_help",t))},i.prototype.show=function(){this.el.popover("show")},i.prototype.getConfig=function(e){return this.config.find(e).text().replace("<![CDATA[","").replace("]]>","")},i.prototype.popover=function(){this.config&&(this.el.popover("destroy"),AGN.Lib.Popover.new(this.el,{template:s,title:this.getConfig("title"),content:this.getConfig("content"),html:!0,trigger:this.el.data("trigger")||"focus"}))},i.prototype.popoverInteractive=function(){var e,t,n,i,o,r;this.config&&(this.el.popover("destroy"),e=AGN.Lib.Popover.new(this.el,{template:s,title:this.getConfig("title"),content:this.getConfig("content"),html:!0,trigger:"manual"}),t=this.el,(n=e.tip()).attr("tabindex",0),n.css("outline","none"),i=null,r=function(){clearTimeout(i)},n.focusout(o=function(){i=setTimeout(function(){e.hide()},100)}),t.focusout(o),n.focusin(r),t.focusin(r),t.on("shown.bs.popover",function(){var e=n.children(".popover-content"),t=e.css("min-width"),i=e.outerWidth();e.css("min-width","100%"),e.css("min-width",e.outerWidth()),i>e.outerWidth()&&e.css("min-width",t||"0px")}))},AGN.Lib.Help=i}(),!function(){AGN.Lib.Helpers={paramsFromUrl:function(e){var t,i={};if(!e)return i;if(-1==(t=e.indexOf("?")))return i;for(var n=e.substring(t+1).split("&"),o=0;o<n.length;o++){var r=n[o].split("=");i[r[0]]=r[1]}return i},objFromString:function(optsAsString){var optsArray,optsSplitRegex=/,\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,tupleSplitRegex=/:\s*(?=(?:[^'\\]*(?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'))*[^']*$)/m,floatRegex=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,arrayRegex=/^\s?\[.*?\]$/i;return(opts={},""===optsAsString||void 0===optsAsString)?opts:(optsArray=optsAsString.split(optsSplitRegex),_.forEach(optsArray,function(opt){var tup=opt.split(tupleSplitRegex),name,value,tup=_.filter(tup),name=tup[0].replace(/^'([^]*?)'$/m,"$1");name=name.replace(/\\/,""),value=tup[1],void 0===value&&(value=""),value="true"==value||"false"!=value&&(floatRegex.test(value)?parseFloat(value):arrayRegex.test(value)?(value=value.replace(/\[|\]/g,""),value=value.split(/\s+/),_.map(value,function(v){return/^\'(.*?)\'$/.test(v)?v.replace(/^\'(.*?)\'$/g,"$1"):eval(v)})):(value=value.replace(/^'(.*?)'$/m,"$1"),value.replace(/\\/,""))),opts[name]=value}),opts)},disableCSSAnimations:function(){var e=$('<style class="disable-animation">* { -webkit-transition: none !important; -o-transition: none !important; transition: none !important; }</style>');$("body").append(e)},enableCSSAnimations:function(){window.setTimeout(function(){$(".disable-animation").remove()},10)},clearFormField:function(e){var t=$("<form></form>"),i=$("<div></div>");i.insertAfter(e),t.append(e),t.get(0).reset(),e.insertBefore(i),i.remove()},formatBytes:function(e,t){if(0==e)return"0 Bytes";if(1==e)return"1 Byte";if(-1==e)return"-1 Byte";var e=Math.abs(e),i=(t=t&&t.toLowerCase()&&"iec"==t.toLowerCase()?(n=Math.pow(2,10),["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]):(n=Math.pow(10,3),["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"]),Math.floor(Math.log(e)/Math.log(n))),n=e/Math.pow(n,i);return e<0&&(n*=-1),99.995<=n||0==i?n.toFixed(0)+" "+t[i]:n.toFixed(2)+" "+t[i]},pad:function(e,t,i){i=i||"0";e+="";return e.length<t?new Array(t-e.length+1).join(i)+e:e},caching:function(e,t){var i,n=!1;return 1<arguments.length&&(e=_.bind.apply(null,Array.prototype.slice.call(arguments))),function(){return n||(n=!0,i=e()),i}},replaceAgnTags:function(e,a){try{return e.replace(/\[(agn[A-Z0-9]+)(?:[^'"\]]|'.*?'|".*?")+]/g,function(e,t){var i=$("<"+e.substring(1,e.length-1)+">")[0];if(i instanceof HTMLElement){for(var n=i.attributes,o={},r=0;r<n.length;r++){var s=n[r];o[s.nodeName]=s.nodeValue}return a({name:t,attributes:o},e)}return e})}catch(e){}return e},escapeAgnTags:function(e){try{if(e)return e.replace(/\[agn[A-Z0-9]+(?:[^'"\]]|'.*?'|".*?")+]/g,function(e){return e.includes("'")||e.includes('"')?_.escape(e):e})}catch(e){}return e},unescapeAgnTags:function(e){try{if(e)return e.replace(/\[agn[A-Z0-9]+(?:(?!&#39;|&quot;)[^'"\]]|=\s*&#39;.*?&#39;|=\s*&quot;.*?&quot;)*]/g,function(e){return _.unescape(e)})}catch(e){}return e}}}(),!function(){var i=function(e){var t=this;t.el=e,t.url=e.data("load"),t.interval=parseInt(e.data("load-interval")),t.target=e.data("load-target"),t.interval&&(t._interval=window.setInterval(function(){t.load()},t.interval)),t.el.removeAttr("data-load")};i.load=function(e){var t=e.data("_load");t?t.load():e.is(":hidden")||((t=new i(e)).load(),e.data("_load",t))},i.prototype.stop=function(){window.clearInterval(this._interval)},i.prototype.load=function(){var e,i=this;i.loading||(i.loading=!0,(e=$.get(i.url)).always(function(){i.interval&&(i.loading=!1)}),e.fail(function(){i.stop()}),e.done(function(e){var t=$(e);0!=t.all("[data-load-stop]").length&&i.stop(),t=i.target?"body"==i.target?/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(e)[1]:t.all(i.target):e,i.el.html(t),AGN.Lib.Controller.init(i.el),AGN.runAll(i.el)}))},AGN.Lib.Load=i}(),!function(){var e,t={},i=0,n=!1;t.show=function(){window.clearTimeout(e),n?n=!1:(i+=1,$(".loader").show())},t.hide=function(){--i<=0&&(e=window.setTimeout(function(){$(".loader").hide()},5),i=0)},t.prevent=function(){n=!0},AGN.Lib.Loader=t}(),!function(){var t=AGN.Lib.Form,e=function(e){t.apply(this,[e]),AGN.Lib.Loader.show(),this.submit()};((e.prototype=Object.create(t.prototype)).constructor=e).prototype.jqxhr=function(){var e=this,t=$.Deferred();return this.$form.trigger("form:submit"),window.setTimeout(function(){$.ajax({url:e.url,method:e.method,data:e.params(),loader:e.loader()}).done(function(e){t.resolve.apply(this,arguments)})},parseInt(this.$form.data("polling-interval"))),t.promise()},e.prototype.submit=function(){var t=this,e=this.jqxhr();return e.done(function(e){t.updateHtml(e)}),e},e.prototype.updateHtml=function(e){var t=$(e),t=t.filter('[data-form="loading"]').add(t.find('[data-form="loading"]'));1==t.length?(this.$form.html(t.html()),AGN.runAll(this.$form),this.submit()):(AGN.Lib.Loader.hide(),AGN.Lib.Page.render(e))},AGN.Lib.LoadingForm=e,AGN.Opt.Forms.loading=e}(),AGN.Lib.Menu={init:function(){"open"==(AGN.Lib.Storage.get("menu_state")||"open")?this.openDirectly():this.closeDirectly(),this.updateInits()},isOpen:function(){return $("body").hasClass("menu-is-active")},openDirectly:function(){AGN.Lib.Helpers.disableCSSAnimations(),this.open(),AGN.Lib.Helpers.enableCSSAnimations()},closeDirectly:function(){AGN.Lib.Helpers.disableCSSAnimations(),this.close(),AGN.Lib.Helpers.enableCSSAnimations()},close:function(){AGN.Lib.Storage.set("menu_state","close"),$("body").removeClass("menu-is-active"),this.updateInits()},open:function(){AGN.Lib.Storage.set("menu_state","open"),$("body").addClass("menu-is-active"),this.updateInits()},updateInits:function(){window.setTimeout(function(){AGN.Lib.CoreInitializer.run(["truncate","scrollable","dropdown-expand"])},600)}},!function(){var Messages=function(n,o,e,t,i){var r;null===i&&(i=!0),r={success:3e3,warning:3e3}[(e=e||"info")||"info"]||0,_.each($(".notification"),function(e){var e=$(e),t=e.data("message-head"),i=e.data("message-content");n===t&&o===i&&e.remove()}),(e=toastr[e](n,o,{timeOut:r,extendedTimeOut:r,onCloseClick:t,newestOnTop:i})).data("message-head",n),e.data("message-content",o),AGN.Lib.Controller.init(e),AGN.runAll(e)},displayMessages=function(t,e,i){e.forEach(function(e){Messages(t,e,i)})},hideMessages=function(){_.each($(".notification"),function(e){e.remove()})},JsonMessages=function(e,i){i&&hideMessages(),e&&(e.success&&displayMessages(t("defaults.success"),e.success,"success"),e.warning&&displayMessages(t("defaults.warning"),e.warning,"warning"),e.alert&&displayMessages(t("defaults.error"),e.alert,"alert"),e.fields&&$.each(e.fields,function(e,i){i&&displayMessages(t("defaults.error"),i,"alert")}))},RenderMessages=function($resp){$resp.all('script[data-message][type="text/html"]').appendTo($(document.body)),$resp.all('script[data-message][type="text/javascript"]').each(function(){try{eval($(this).html())}catch(exception){console.debug(exception)}})};AGN.Lib.Messages=Messages,AGN.Lib.JsonMessages=JsonMessages,AGN.Lib.RenderMessages=RenderMessages}(),!function(){var o={};AGN.Lib.Messaging={send:function(e){var t="key#"+e,i=o[t],n=Array.prototype.slice.call(arguments,1);i&&(o[t]=i.filter(function(e){return!1!==e.apply(this,n)}))},subscribe:function(e,t){e="key#"+e,$.isFunction(t)?(o[e]||(o[e]=[]),o[e].push(t)):console.error("Callback must be a function")},unsubscribe:function(e,t){var i;arguments.length&&(o[i="key#"+e]=1<arguments.length?o[i].filter(function(e){return e!==t}):[])}}}(),!function(){var i=function(){};i.create=function(e,t){var i=null,n=null,e=(n=e instanceof $?e:$(e)).filter(".modal"),n=n.filter("script");return e&&((i=$(e[0])).data("_modal",t),n.each(function(){$(this).appendTo(i)}),i=i.modal(),AGN.Lib.Controller.init(i),AGN.runAll(i)),i},i.createFromTemplate=function(e,t){return t=AGN.Opt.Templates[t]||AGN.Opt.Templates.modal,i.create(_.template(t)(e),e)},i.get=function(e){return i.getWrapper(e).data("_modal")},i.getWrapper=function(e){return e.closest(".modal")},AGN.Lib.Modal=i}(),!function(){var a=AGN.Lib.Confirm,l={};l.render=function(e,t){var i,o,n,r,s;if(!/<\s*\/\s*body\s*>/i.test(e))return(r=(n=$(e)).filter(".modal")).exists()?(s=$.Deferred(),AGN.Lib.RenderMessages(n),a.create(n),s.resolve(a.get(n)),s.promise()):(r=n.all("script[data-load]")).exists()?l.reload(r.data("load"),!0).done(function(){AGN.Lib.RenderMessages(n)}):void AGN.Lib.RenderMessages(n);s=(new DOMParser).parseFromString(e,"text/html"),(t=!1!==t&&s.head&&(r=$(s.head).data("origin-uri"))?r:t)&&window.history.pushState({},"",t),i=$(document).scrollTop(),setTimeout(function(){AGN.Lib.Controller.init(),AGN.runAll(),$(document).scrollTop(i)},100),document.body=s.body,document.title=s.title,(o=$(document.body)).find("script").each(function(e,t){var i=$(t);if(i.attr("src")){var n=$("<script><\/script>");$.each(t.attributes,function(){this.specified&&n.attr(this.name,this.value)});try{n.appendTo(o)}catch(e){console.debug(e)}}else if("text/javascript"==i.attr("type"))try{eval.call(window,i.html())}catch(e){console.debug(e)}})},l.reload=function(t,e,i){var n;return e?(t=t||window.location.href,n=$.Deferred(),$.ajax(t,{method:function(e){if(e)switch(e=e.toUpperCase()){case"CONNECT":case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"POST":case"PUT":return e}return"GET"}(i)}).done(function(e){e=l.render(e,t);e?e.done(n.resolve).fail(n.reject):n.resolve()}).fail(function(){n.reject()}),n.promise()):(t&&t!=window.location.href?window.location.assign(t):window.location.reload(!0),null)},AGN.Lib.Page=l}(),!function(){function i(e){return["password.error.generic_error"]}var e={},n=[];function t(e,t){n.push({name:e,fn:t})}t("LENGTH_8_MIXED",function(e){var t=[];return e.length<8&&t.push("password.error.too_short_min8"),e.match("[a-z]")||t.push("password.error.no_lower_case"),e.match("[A-Z]")||t.push("password.error.no_upper_case"),e.match("[0-9]")||t.push("password.error.no_digits"),e.match("[^a-zA-Z0-9]")||t.push("password.error.no_special"),t}),t("LENGTH_12_SIMPLE",function(e){return e.length<12?["password.error.too_short_min12"]:null}),t("WEBSERVICE",function(e){return e.length<32?["password.error.too_short_min32"]:null}),e.find_password_policy=function(e){for(var t=0;t<n.length;t++)if(n[t].name==e)return n[t].fn;return i},AGN.Lib.PasswordPolicies=e}(),!function(){var i=AGN.Lib.Page,t=AGN.Lib.Form,e=function(e){t.apply(this,[e])};((e.prototype=Object.create(t.prototype)).constructor=e).prototype.jqhxr=function(){var i=this,n=$.Deferred();return this.$form.trigger("form:submit"),window.setTimeout(function(){$.ajax({url:i.url,method:i.method,data:i.params(),loader:i.loader()}).done(function(e){var t=$(e).all('[data-form="polling"]');1==t.length?(i.$form.data("polling-interval",t.data("polling-interval")),i.jqhxr().done(function(){n.resolve.apply(this,arguments)})):n.resolve.apply(this,arguments)})},parseInt(this.$form.data("polling-interval"))),n.promise()},e.prototype.submit=function(){var e,t=this;return AGN.Lib.Loader.show(),(e=this.jqxhr()).done(function(e){AGN.Lib.Loader.hide(),t.updateHtml(e)}),e},e.prototype.updateHtml=function(e){var t=$(e);"page"==this.$form.data("render")?i.render(e):(t=this.$form.attr("id")?t.all("#"+this.$form.attr("id")):this.$form.attr("name")?t.all('[name="'+this.$form.attr("name")+'"]'):t.all("form"),setTimeout(function(){AGN.Lib.Controller.init(),AGN.runAll()},100),this.handleMessages(e),this.$form.replaceWith(t))},AGN.Lib.PollingForm=e,AGN.Opt.Forms.polling=e}(),!function(r){function n(e,t){var e=r(e),t=r(t),i=r(window).scrollTop(),n=r(window).outerHeight(),o=t.outerHeight(),i=(t=t.offset().top-i)+o;return!(e.outerHeight()<=t)&&t<n-i?"bottom":"top"}var e={};e.new=function(e,t){if(1!==e.length)return!1;e.popover(r.extend({container:"body",placement:n},t));var i=e.data("bs.popover");return t&&t.enableAgnRunAll&&e.on("shown.bs.popover",function(){var e=i.tip();AGN.Lib.Controller.init(e),AGN.runAll(e)}),i},e.get=function(e){if(1!==e.length)return null;var t=e.data("bs.popover");return t||e.closest("div.popover").data("bs.popover")},e.remove=function(e){return 1===e.length&&(e.popover("destroy"),!0)},e.validate=function(){r(".popover").each(function(){var e=r(this).data("bs.popover");e&&e.$element&&(r.contains(document.body,e.$element[0])||e.destroy())})},AGN.Lib.Popover=e}(jQuery),!function(){var t=AGN.Lib.Form,r=AGN.Lib.Page,e=function(e){t.apply(this,[e]),this.resourceSelector=e.data("resource-selector")};(e.prototype=Object.create(t.prototype)).getResourceSelector=function(){var e;return this.resourceSelectorNextRequest?(e=this.resourceSelectorNextRequest,this.resourceSelectorNextRequest=null,e):this.resourceSelector},e.prototype.setResourceSelectorOnce=function(e){this.resourceSelectorNextRequest=e},e.prototype.updateHtml=function(e){var t,i,n,o=this.getResourceSelector();o?(t=$(e),i=$(o),o=t.all(o),1==i.length&&1==o.length?(n=!1,i[0]!=this.$form[0]&&!$.contains(i[0],this.$form[0])||(n=!0),i.html(o.html()),this.handleMessages(t),n&&(this.initFields(),this.initValidator()),AGN.Lib.Controller.init(i),AGN.runAll(i)):r.render(e)):r.render(e)},AGN.Lib.ResourceForm=e,AGN.Opt.Forms.resource=e}(),!function(){function t(e,t){this.src=e,this.promises={},this.cache=$.extend({},t)}t.prototype.retrieve=function(t){var e=this.promises,i=this.cache;if((r=e[t])&&"pending"==r.state())return r;var n,o=$.Deferred(),r=o.promise();return i[t]?o.resolve(i[t]):this.src?(n=$.ajax(this.src,{type:"POST",data:{mailingId:t}}),e[t]=r,n.always(function(){delete e[t]}),n.done(function(e){e&&e.mailingId==t?(e=e.links||[],i[t]=e,o.resolve(e,t)):o.reject(t)}),n.fail(function(){o.reject(t)})):o.reject(t),r};var s="DATE",a="DATETIME",i="INTEGER",n="DOUBLE",o="FLOAT",r="NUMBER",l="MAILING",c="MAILING_LINKS",u="INTERVAL_MAILING";function d(e){switch(e){case i:case n:case o:case r:return 1;default:return}}function h(e,t,i,n){var o=t.value,r=T(x("primaryOperator",n),"form-control","1",n),n=function(e,t){switch(t){case s:case a:return e.dateOperators;case l:case c:return e.mailingOperators;case u:return e.intervalMailingOperators;default:return d(t)?e.numericOperators:e.stringOperators}}(e,i),e=($.each(F(n),function(e,t){R(r,o,t.id,t.value)}),t),i=r;i=$(i),$(e).parent().html(i),i.is("select")&&D(i)}function p(e){return $('select[name="'+e+'"] option')}function f(e){return e=p(e),$.map(e.toArray(),function(e){e=$(e);return{id:e.val(),value:e.text()}})}function g(e,t,i){var n=null==t.value?"":t.value,i=T(x("primaryValue",i),"form-control","1",null);R(i,n,"null","null"),R(i,n,"not null","not null"),k([i],$(t.parentNode))}function m(e,t,i){var e=e.modSecondaryOperators,n=null==t.value?"":t.value,o=E("secondaryOperator",i),r=null==o?"":o.value,o=E("secondaryValue",i),o=null==o?"":o.value,n=O(x("primaryValue",i),n,"form-control"),s=T(x("secondaryOperator",i),"form-control","1",null),e=($.each(F(e),function(e,t){R(s,r,t.id,t.value)}),O(x("secondaryValue",i),o,"form-control"));k([n,s,e],$(t.parentNode))}function v(e,t,i){var n=null==t.value?"":t.value;k([O(x("primaryValue",i),n,"form-control")],$(t.parentNode))}function y(e,t,i){var e=e.mailTypes,n=null==t.value?"":t.value,o=T(x("primaryValue",i),"form-control","1",null);$.each(F(e),function(e,t){R(o,n,t.id,t.value)}),k([o],$(t.parentNode))}function b(e,t,i){var e=e.genders,n=null==t.value?"":t.value,o=T(x("primaryValue",i),"form-control","1",null);$.each(F(e),function(e,t){R(o,n,t.id,t.value)}),k([o],$(t.parentNode))}function w(e,t,i){var e=e.dateFormats,n=null==t.value?"":t.value,o=E("dateFormat",i),r=null==o?"":o.value,o=O(x("primaryValue",i),n,"form-control"),s=T(x("dateFormat",i),"form-control","1",null);$.each(F(e),function(e,t){R(s,r,t.id,t.value)}),k([o,s],$(t.parentNode))}function C(e,t,i){var e=e.intervalMailings,n=null==t.value?"":t.value,o=T(x("primaryValue",i),"form-control js-select","1",null);$.each(F(e),function(e,t){R(o,n,t.id,t.value)}),k([o],$(t.parentNode))}function _(e,t,i){var e=e.allMailings,n=null==t.value?"":t.value,o=T(x("primaryValue",i),"form-control js-select","1",null);$.each(F(e),function(e,t){R(o,n,t.id,t.value)}),k([o],$(t.parentNode))}function A(e,t,i){var n=e.allMailings,o=null==t.value?"":t.value,r=E("secondaryValue",i),s=(null==r||r.value,T(x("primaryValue",i),"form-control js-select","1",i)),r=(s.setAttribute("data-action","resetMailingUrls"+(null==i?"New":"")),$.each(F(n),function(e,t){R(s,o,t.id,t.value)}),o=s.value,T(x("secondaryValue",i),"form-control js-select js-option-popovers","1",i));r.setAttribute("data-action","updateMailingLinkId"+(null==i?"New":"")),S(e,o,r,e.mailingLinksSelectionsCache[i]&&e.mailingLinksSelectionsCache[i][o]),k([s,r],$(t.parentNode))}function E(e,t){return document.getElementsByName(x(e,t))[0]}function x(e,t){return e+(null!=t?"["+t+"]":"New")}function S(e,t,n,o){e.mailingLinks.retrieve(t).done(function(e){var t,i;0!=e.length&&(t=null,$.each(e,function(e){0!=e&&this.id!=o||(t=this.id)}),i=$(n),$.each(e,function(){i.append($("<option/>",{value:this.id,text:this.value,selected:t==this.id}))}),i.data("select2")&&i.select2("val",t))})}function T(e,t,i,n){var o=document.createElement("select");return o.setAttribute("name",e),o.setAttribute("class",t),o.setAttribute("size",i),o.setAttribute("data-action",e.replace(/\[\d+\]/,"")),null!=n&&o.setAttribute("data-ruleid",n),o}function k(e,i){var n;0<e.length&&(n="col-sm-"+Math.round(12/e.length),(i=i.parent()).empty(),$.each(e,function(){var e=$(this),t=$("<div>").addClass(n);t.append(e),i.append(t),e.is("select")&&D(e)}))}function D(e){AGN.Lib.CoreInitializer.run("select",e.parent())}function R(e,t,i,n){n=$("<option/>",{value:i,text:n,selected:0==t.localeCompare(i)});n.appendTo($(e))}function O(e,t,i){var n=document.createElement("input");return n.setAttribute("type","text"),n.setAttribute("name",e),n.setAttribute("value",t),n.setAttribute("class",i),n}function F(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(e[t]);return i}AGN.Lib.RuleService={changedColumn:function(e,t){var i,n,o,r=E("columnAndType",e);r&&(i=(r=r.options[r.selectedIndex]).value.toUpperCase(),r=r.getAttribute("data-extra").toUpperCase(),n=E("primaryOperator",e),o=E("primaryValue",e),(n.value==t.OPERATOR_IS?g:n.value==t.OPERATOR_MOD&&d(r)?m:r==s||r===a?w:r==u?C:r==l?_:r==c?A:"MAILTYPE"==i?y:"GENDER"==i?b:v)(t,o,e),h(t,n,r,e))},resetPrimaryOperators:h,resetMailingUrls:function(e,t){var i=E("primaryValue",t),n=i.value,o=T(x("secondaryValue",t),"form-control js-select js-option-popovers","1",t),e=(o.setAttribute("data-action","updateMailingLinkId"+(null==t?"New":"")),S(e,n,o,e.mailingLinksSelectionsCache[t]&&e.mailingLinksSelectionsCache[t][n]),$(i));(t=e.clone()).val(e.val()),t.css({display:"block"}),k([t,o],$(i.parentNode))},updateMailingLinksCache:function(e,t,i){var n=E("primaryValue",t).value,o=e.mailingLinksSelectionsCache[t];o||(e.mailingLinksSelectionsCache[t]=o={}),o[n]=i},switchTo:{operators:{mod:m,is:g},types:{string:v,mail:y,gender:b,date:w,mailing:_,mailingLinks:A,intervalMailing:C}},configure:function(e){var i={};return $('select[name="all_mailings_urls_config"] optgroup').each(function(){var e=$(this),t=e.find("option");i[e.attr("label")]=t.map(function(){var e=$(this);return{id:e.val(),value:e.text()}})}),$.extend(e,{mailingLinks:new t(e&&e.URL_GET_MAILING_LINKS,i),mailingLinksSelectionsCache:{},allColumns:p("all_columns_config"),intervalMailings:f("interval_mailings_config"),modSecondaryOperators:f("mod_secondary_operators_config"),allMailings:f("all_mailings_config"),dateOperators:f("date_operators_config"),mailingOperators:f("mailing_operators_config"),intervalMailingOperators:f("interval_mailing_operators_config"),numericOperators:f("numeric_operators_config"),stringOperators:f("string_operators_config"),mailTypes:f("mail_types_config"),genders:f("genders_config"),dateFormats:f("date_formats_config")})}}}(),!function(){var t=AGN.Lib.Form,e=function(e){t.apply(this,[e])};(e.prototype=Object.create(t.prototype)).updateHtml=function(e){var t=$(e).find("[data-form-content]"),i=this.$form.find("[data-form-content]");i.html(t.html()),this.handleMessages(e),this.initFields(i),AGN.Lib.Controller.init(i),AGN.runAll(i),i.trigger("scrollTo",i)},AGN.Lib.SearchForm=e,AGN.Opt.Forms.search=e}(),!function(){var i=function(e){this.$select=e,this.select=e[0],this.api=function(){args=Array.prototype.slice.call(arguments,0),e.select2.apply(e,args)}};i.get=function(e){var t=e.data("_select");return t||(t=new i(e),e.data("_select",t)),t},i.prototype.map=function(){var i=this;return _.reduce(i.values(),function(e,t){return e[t]=i.$select.find("option[value='"+t+"']").html(),e},{})},i.prototype.values=function(){return _.map(this.$select.find("option"),function(e){return $(e).val()})},i.prototype.clear=function(){this.api("val","")},i.prototype.selectValue=function(e){this.api("val",e)},i.prototype.getFirstValue=function(){return this.$select.find("option:first").val()},i.prototype.selectFirstValue=function(){this.api("val",this.getFirstValue())},i.prototype.selectValueOrSelectFirst=function(e){var t=this.values();_.isArray(e)||(e=[e]),_.every(e,function(e){return-1!=t.indexOf(e+"")})&&0!=e.length?this.selectValue(e):this.selectFirstValue()},i.prototype.resetOptions=function(){this.$select.html("")},i.prototype.setOptions=function(e){e=_.reduce(e,function(e,t){return e+='<option value="'+t.id+'">'+t.text+"</option>"},"");this.$select.html(e)},i.prototype.addFormattedOption=function(e){this.$select.append(e)},i.prototype.getSelectedValue=function(){var e=this.$select.val();return e||""},AGN.Lib.Select=i}(),!function(){var t=AGN.Lib.Form,e=function(e){t.apply(this,[e])};(e.prototype=Object.create(t.prototype)).jqxhr=function(){return this.form.submit()},e.prototype.submit=function(){var i=this,e=_.merge({},this._data,this._dataNextRequest);return this.valid()?(this.$form.trigger("form:submit"),_.each(e,function(e,t){t=$('<input type="hidden" name="'+t+'"/>');t.val(e),t.appendTo(i.$form)}),this._dataNextRequest={},this.$form.submit(),$.Deferred().promise()):(this.handleErrors(),!1)},AGN.Lib.StaticForm=e,AGN.Opt.Forms.static=e}(),!function(d){var h,p,n,t=function(i){function t(e,t,i){var n,i=i?((n=new Date).setTime(n.getTime()+24*i*60*60*1e3),"; expires="+n.toGMTString()):"";document.cookie=e+"="+t+i+"; path=/"}function n(e){e=JSON.stringify(e),"session"==i?window.name=e:t("localStorage",e,365)}function o(){var t="session"==i?window.name:function(e){for(var t,i=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(t=n[o];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(i))return t.substring(i.length,t.length)}return null}("localStorage");try{return JSON.parse(t)}catch(e){console.warn("Could not parse storage data: "+t+" cause: "+e)}return{}}var r=o();return{length:0,clear:function(){r={},this.length=0,"session"==i?window.name="":t("localStorage","",365)},getItem:function(e,t){return!0===t?void 0===(t=o())[e]?null:t[e]:void 0===r[e]?null:r[e]},key:function(e){var t,i=0;for(t in r){if(i==e)return t;i++}return null},removeItem:function(e){delete r[e],this.length--,n(r)},setItem:function(e,t){r[e]=t+"",this.length++,n(r)}}};try{n=window.localStorage||new t("local")}catch(e){n=new t("local")}function i(e){var t,i=""|e.data("stored-field"),n=e.prop("name");null!=n&&(t=void 0,"checkbox"==e.prop("type")?t=e.is(":checked"):(e.is("input")||e.is("select"))&&(t=e.val()),null!=t&&p(g(n,i),t))}function o(e){var t=""|e.data("stored-field"),i=!1,n=e.prop("name");if(null!=n){var o=e.prop("type")||e.prop("type"),r=h(g(n,t));if(void 0===r){if(void 0===(r=h(f(n,t))))return;p(g(n,t),r)}if("radio"==o){if(e.val()!==r&&e.is(":checked"))return e.prop("checked",!1),1;if(e.val()==r&&!e.is(":checked"))return e.prop("checked",!0),1}else if("checkbox"==o)e.prop("checked")!==r&&(e.prop("checked",r),i=!0);else if("select-one"==o){var s=!1;e.find("option").each(function(){if(d(this).val()==r)return!(s=!0)}),s&&e.val()!==r&&(e.val(r).change(),i=!0)}else if("select-multiple"==o){var a=[],l=e.value(),c=(e.find("option").each(function(){var i=d(this);d.each(r,function(e,t){i.val()==t&&a.push(t)})}),a.sort(),l.sort(),!0);a.length!=l.length&&(c=!1);for(var u=0;u<a.length;++u)a[u]!==l[u]&&(c=!1);c||(e.val(a).change(),i=!0)}else"textarea"!=o&&"text"!=o||e.val()!==r&&(e.val(r),i=!0)}return i}function f(e,t){var i="stored_field_";if(e&&(i+=e),t)return i=i+"_"+t}function g(e,t){e=f(e,t);return e&&r(e)}function r(e){return window.adminId?window.adminId+"-"+e:e}h=function(t){try{var e=n.getItem(r(t));if(e)return JSON.parse(e)}catch(e){console.warn("Could not get Storage key: "+t+" cause: "+e)}},p=function(t,i){try{i=JSON.stringify(i),n.setItem(r(t),i)}catch(e){console.warn("Could not set Storage key:value "+t+":"+i+" cause: "+e)}},AGN.Lib.Storage={get:h,set:p,delete:function(t){try{n.removeItem(r(t))}catch(e){console.warn("Could not remove Storage key:"+t+" cause: "+e)}},saveChosenFields:function(e){e.each(function(){var e=d(this);e.is("[data-stored-field]")&&(e.is("input")||e.is("select"))?i(e):e.find("[data-stored-field]").each(function(){i(d(this))})})},restoreChosenFields:function(e){var t=!1;return e.each(function(){var e=d(this);e.is("[data-stored-field]")&&(e.is("input")||e.is("select"))?o(e)&&(t=!0):e.find("[data-stored-field]").each(function(){o(d(this))&&(t=!0)})}),t}}}(jQuery),!function(){var s,a=AGN.Lib.Storage,n=function(e){var t=e.parents("ul").find("[data-toggle-tab]").not(e),i=e.data("toggle-tab"),n=s(e,i),i=$(i),o=e.find(".tab-toggle"),r=$(e.data("extends-tab"));_.each(t,function(e){l($(e))}),e.parent().addClass("active"),o.removeClass("icon-angle-down").addClass("icon-angle-up"),i.removeClass("hidden"),r.removeClass("hidden"),i.trigger("tile:show"),a.set("toggle_tab"+n,{hidden:!1}),AGN.Lib.CoreInitializer.run("load",i)},l=function(e){var t=e.data("toggle-tab"),i=s(e,t),n=e.find(".tab-toggle");e.parent().removeClass("active"),n.removeClass("icon-angle-up").addClass("icon-angle-down"),$(t).addClass("hidden"),$(t).trigger("tile:hide"),a.set("toggle_tab"+i,{hidden:!0})};toggle=function(e){var t=e.data("toggle-tab");($(t).is(":visible")?l:n)(e)},s=function(e,t){e=e.data("tab-group");return e?"/"+e:t},AGN.Lib.Tab={init:function(e){var t=e.data("toggle-tab"),i=s(e,t),i=a.get("toggle_tab"+i)||{},t=$(t);void 0!==t.data("tab-show")&&(i.hidden=!1,t.data("tab-show",void 0)),void 0!==t.data("tab-hide")&&(i.hidden=!0,t.data("tab-hide",void 0)),(!1===i.hidden||!0!==i.hidden&&t.is(":visible"))&&n(e)},show:n,hide:l,toggle:toggle}}(),!function(){var i,s=AGN.Lib.Popover;(i=function(e,i,n,o){var r=this;this.$el=e,this.$el.html('<div class="pagination-top"></div><div class="ag-theme-bootstrap" style="height: calc(100% - 106px); width: 100%"></div><div class="pagination-bottom"></div>'),this.$el.data("_table",r),this.$paginationTop=this.$el.find(".pagination-top"),this.$paginationBottom=this.$el.find(".pagination-bottom"),i.forEach(function(e){e.cellRenderer&&(e.cellRenderer=AGN.Opt.TableCellRenderers[e.cellRenderer]),e.headerComponent&&(e.headerComponent=AGN.Opt.TableHeaderComponents[e.headerComponent])}),this.gridOptions=_.merge({autoSizePadding:4,columnDefs:i,enableSorting:!0,enableFilter:!0,enableColResize:!0,pagination:!0,showRecordsCount:!0,filtersDescription:{enabled:!1,templateName:"",templateParams:{}},paginationPageSize:100,rowSelection:"multiple",unSortIcon:!0,onCellClicked:function(e){switch(e.colDef.cellAction){case"select":e.node.setSelected(!e.node.isSelected());break;case"goTo":var t=e.data.show;t&&(e.event.ctrlKey?window.open(t,"_blank"):window.location.href=t)}},onCellMouseOver:function(e){var t;!0===e.colDef.textInPopoverIfTruncated&&(t=e.event.target).clientWidth<t.scrollWidth&&(t=e,e=$(t.event.target),(s.get(e)||s.new(e,{trigger:"manual",container:"body",content:t.value})).show())},onCellMouseOut:function(e){!0===e.colDef.textInPopoverIfTruncated&&(e=s.get($(e.event.target)))&&e.hide()},suppressRowClickSelection:!0,headerHeight:41,rowHeight:34,suppressPaginationPanel:!0,onPaginationChanged:function(){r.renderPagination()},defaultColDef:{headerComponentParams:{template:'<div class="ag-cell-label-container" role="presentation">  <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button"></span>  <div ref="eLabel" class="ag-header-cell-label" role="presentation">    <span ref="eSortAsc" class="ag-header-icon ag-sort-ascending-icon" ></span>    <span ref="eSortDesc" class="ag-header-icon ag-sort-descending-icon" ></span>    <span ref="eSortNone" class="ag-header-icon ag-sort-none-icon" ></span>    <span ref="eText" class="ag-header-cell-text" role="columnheader"></span>    <span ref="eFilter" class="ag-header-icon ag-filter-icon"></span>    <span ref="eSortOrder" class="ag-header-icon ag-sort-order" ></span>  </div></div>'},filterParams:{clearButton:!0}},columnTypes:{numberColumn:{width:83,filter:"agNumberColumnFilter",comparator:AGN.Lib.TableNumberComparator},dateColumn:{filter:AGN.Lib.TableDateFilter},setColumn:{filter:AGN.Lib.TableSetFilter},bulkSelectColumn:{headerName:"",editable:!1,checkboxSelection:!0,headerCheckboxSelection:!0,headerComponent:AGN.Opt.TableHeaderComponents.NoLabelHeader,suppressResize:!0,suppressMenu:!0,suppressSorting:!0,cellAction:"select",suppressSizeToFit:!0,cellStyle:{textAlign:"center"}},deleteColumn:{headerName:"",editable:!1,suppressResize:!0,suppressMenu:!0,suppressSorting:!0,cellAction:null,cellRenderer:AGN.Opt.TableCellRenderers.DeleteCellRenderer,suppressSizeToFit:!0,"button-tooltip":t("defaults.delete")},textCaseInsensitiveColumn:{comparator:AGN.Lib.TableCaseInsensitiveComparator}},icons:{menu:'<i class="icon icon-filter"/>',filter:'<i class="icon icon-filter"/>',columns:'<i class="icon icon-handshake-o"/>',sortAscending:'<i class="icon icon-sort-asc"/>',sortDescending:'<i class="icon icon-sort-desc"/>',checkboxChecked:'<i class="icon icon-check-square-o"/>',checkboxUnchecked:'<i class="icon icon-square-o"/>',checkboxIndeterminate:'<i class="icon icon-square-o"/>',checkboxCheckedReadOnly:'<i class="icon icon-check-square-o"/>',checkboxUncheckedReadOnly:'<i class="icon icon-square-o"/>',checkboxIndeterminateReadOnly:'<i class="icon icon-square-o"/>',sortUnSort:'<i class="icon-fa5 icon-fa5-sort"/>'},localeText:window.I18n.tables},o||{}),this.gridOptions.showRecordsCount||this.gridOptions.pagination||this.$el.find(".ag-theme-bootstrap").height(this.$el.parent().height()),this.grid=new agGrid.Grid(this.$el.find(".ag-theme-bootstrap").get(0),this.gridOptions),this.api=this.gridOptions.api,this.columnApi=this.gridOptions.columnApi,this.api.setRowData(n),this.redraw()}).prototype.renderPagination=function(){var t,i,n,e=this.api,o=AGN.Lib.Template.prepare("table-controls-top");paginationBottomTemplate=AGN.Lib.Template.prepare("table-controls-bottom"),e&&(t=e.paginationGetCurrentPage()+1,i=e.paginationGetTotalPages(),n=[t],_.times(5,function(e){0<t-(e+1)&&n.unshift(t-(e+1)),t+(e+1)<=i&&n.push(t+(e+1))}),e={pagination:this.gridOptions.pagination,showRecordsCount:this.gridOptions.showRecordsCount,currentPage:t,totalPages:i,itemStart:e.paginationGetPageSize()*(t-1)+1,itemEnd:t==i?e.paginationGetRowCount():e.paginationGetPageSize()*t,itemTotal:e.paginationGetRowCount(),pageSelects:n},this.$paginationTop.html(o(e)),(o=this.gridOptions.filtersDescription).enabled&&o.templateName&&this.$paginationTop.find("#filtersDescription").html(AGN.Lib.Template.text(o.templateName),o.templateParams),this.$paginationBottom.html(paginationBottomTemplate(e)),this.api.redrawRows())},i.prototype.redraw=function(){var e=this.columnApi.getAllDisplayedColumns().filter(function(e){return!0===e.getColDef().suppressSizeToFit}).map(function(e){return e.getColId()});e.length&&this.columnApi.autoSizeColumns(e),this.api.sizeColumnsToFit()},i.get=function(e){return i.getWrapper(e).data("_table")},i.getWrapper=function(e){var t=$(e.data("table-body"));return t=0==t.length?e.closest(".js-data-table-body"):t},AGN.Lib.Table=i}(),!function(){var e=function(){};e.getComplexityColor=function(e){e=e<10?"green":10<=e&&e<17?"yellow":"red";return e},AGN.Lib.TargetGroup=e}(),!function(){var t=AGN.Opt.Templates;function i(e){if(e in t)return _.template(t[e]);throw new Error("There's no template `"+e+"` registered")}function n(e,t){return i(e)(t)}AGN.Lib.Template={prepare:i,text:n,dom:function(e,t){return $(n(e,t))}}}(),!function(){var n=AGN.Lib.Storage,i=function(e){var t=e.find(".icon"),e=e.data("toggle-tile"),i=$(e);i.removeClass("hidden"),t.addClass("icon-angle-up"),t.removeClass("icon-angle-down"),n.set("toggle_tile"+e,{hidden:!1}),AGN.Lib.CoreInitializer.run("load",i)},o=function(e){var t=e.find(".icon"),e=e.data("toggle-tile");$(e).addClass("hidden"),t.addClass("icon-angle-down"),t.removeClass("icon-angle-up"),n.set("toggle_tile"+e,{hidden:!0})};AGN.Lib.Tile={toggle:function(e){($(e.data("toggle-tile")).hasClass("hidden")?i:o)(e)},init:function(e){var t=e.data("toggle-tile"),t=n.get("toggle_tile"+t);t&&(t.hidden?o:i)(e)},show:i,hide:o,trigger:function(e){return e.closest(".tile").find("[data-toggle-tile]")}}}(),!function(){var i,n,o,r={},s=AGN.Lib.Template,a=AGN.Lib.Helpers,l=(i=s.prepare("tooltip-message-with-title"),n=s.prepare("tooltip-message-just-content"),function(e,t){return e?i({title:e,content:t}):n({content:t})}),c=(o=s.prepare("tooltip-template"),function(e,t,i){return o({tooltipStyle:e,arrowStyle:t,innerStyle:i})});function u(e,t){return{title:e,container:"body",template:c(t)}}function d(e,t,i){return{title:l(e,t),container:"body",html:!0,placement:"auto top",template:c(i,"helper-popup-arrow","helper-popup")}}r.options=function(e){var t,i,n={};return e.is("[data-tooltip]")?(t=e.data("tooltip"),n=u(t=(i=e.data("tooltip-src"))?s.text(i,{element:e}):t,e.data("tooltip-style"))):e.is("[data-tooltip-help]")&&(n=d(e.data("tooltip-help"),e.data("tooltip-help-text"),e.data("tooltip-style"))),$.extend(n,a.objFromString(e.data("tooltip-options")))},r.create=function(e,t){r.remove(e),e.bsTooltip(t),e.on({"dragstart.tooltip":function(){e.bsTooltip("hide"),e.bsTooltip("disable")},"dragstop.tooltip":function(){e.bsTooltip("enable")}}),e.on("remove",function(){r.remove(e)})},r.remove=function(e){e.bsTooltip("hide"),e.bsTooltip("destroy"),e.off("dragstart.tooltip dragstop.tooltip")},r.setEnabled=function(e,t){t||void 0===t?e.bsTooltip("enable"):(e.bsTooltip("hide"),e.bsTooltip("disable"))},r.setShown=function(e,t){t||void 0===t?e.bsTooltip("show"):e.bsTooltip("hide")},r.createTip=function(e,t,i){r.create(e,u(t,i))},r.createHelpTip=function(e,t,i,n){r.create(e,d(t,i,n))},AGN.Lib.Tooltip=r}(),!function(){var e,n,o,t=AGN.Lib.Action;function r(e,t,i){s(t,i)&&o.append(n({index:e,name:t,value:i}))}function i(e,t){var i=o.find("[data-extension-row]:last-child").data("extension-row")||0;r(++i,e,t)}function s(t,i){var n=!0;return _.each(o.find("[data-extension-row]"),function(e){e=$(e);n&&l(e)==t&&c(e)==i&&(n=!1)}),n}function a(){var e=o.find("#newExtensionBtn");e.after("<a href='#' class='btn btn-regular btn-alert' data-extension-delete><i class='icon icon-trash-o'></i></a>"),e.remove()}function l(e){return e.find("[data-extension-name]").val()}function c(e){return e.find("[data-extension-value]").val()}(e=function(){}).prototype.load=function(e,t){o=t,n=_.template(AGN.Opt.Templates["trackablelink-extension-table-row"]),_.each(e,function(e,t){r(t,e.name,e.value)}),i("","")},e.prototype.collect=function(){return o&&o.length?_.map(o.find("[data-extension-row]"),function(e){e=$(e);return{name:l(e),value:c(e)}}).filter(function(e){return e.name&&e.value}):[]},t.new({click:"[data-extension-add]",enterdown:"[data-extension-row]"},function(){this.event.preventDefault(),s("","")&&(a(),i("","")),o.find("[data-extension-name]:last").focus()}),t.new({click:"[data-extension-delete]"},function(){this.el.closest("tr").remove()}),t.new({click:"[data-add-default-extensions]"},function(){var e=o.find("tr:last");""==l(e)&&""==c(e)?e.remove():a(),_.each(AGN.Opt.DefaultExtensions,function(e){i(e.name,e.value)}),i("","")}),AGN.Lib.TrackableLinkExtensions=e}(),AGN.Lib.Truncate={run:function(e,t){var i=e.width(),n=_.reduce(e.children().not(t),function(e,t){return e+$(t).outerWidth(!0)},0);n=i<(n=5<.05*(n+=$(t).outerWidth(!0)-$(t).outerWidth())?1.05*n:n+5)?i:n,e.children(t).css({"max-width":i-n+"px",overflow:"hidden"})}},!function(){var i=function(e){return e.init&&(e.init(),delete e.init),$.extend(this,e)};i.exists=function(e){return AGN.Opt.Validators.hasOwnProperty(e)},i.get=function(e){return i.exists(e)?AGN.Opt.Validators[e]:null},i.new=function(e,t){i.exists(e)&&console.debug("Validator with name `"+e+"` was overridden");t=new i(t);return AGN.Opt.Validators[e]=t},i.prototype.valid=function(){return!0},i.prototype.errors=function(){return[]},AGN.Lib.Validator=i}(),!function(){var i=function(t){_.each($("[data-view-"+t+"]"),function(e){e=$(e);e.attr("class",e.data("view-"+t))}),$(window).trigger("resize"),AGN.Lib.CoreInitializer.run("load")};AGN.Lib.View={init:function(){var e=$("[data-view]:checked"),t=AGN.Lib.Storage.get("view_"+e.data("view"));t?$('[data-view][value="'+t.view+'"]').prop("checked",!0):t={view:e.val()},i(t.view)},trigger:function(e){var t=e.val();i(t),AGN.Lib.Storage.set("view_"+e.data("view"),{view:t})}}}(),!function(){var i=AGN.Lib.Storage,n={get:function(e){e="web-storage#"+$.trim(e);try{return i.get(e)}catch(e){console.error(e)}return null},set:function(e,t){i.set("web-storage#"+$.trim(e),t)},extend:function(e,t){var i=null!=(i=n.get(e))?$.extend(i,t):t;return n.set(e,i),i}};AGN.Lib.WebStorage=n}(),AGN.Lib.WM.Definitions={KEY_ENTER:13,KEY_SHIFT:16,KEY_CTRL:17,KEY_SPACE:32,KEY_DELETE:46,MOUSE_BUTTON_LEFT:0,MOUSE_BUTTON_MIDDLE:1,BOTTOM:"BOTTOM",LEFT:"LEFT",RIGHT:"RIGHT",TOP:"TOP",NODE_ANIMATION_DROPPED:"animate-dropped",NODE_ANIMATION_AUTO_DROPPED:"animate-auto-dropped",Z_INDEX_VIEW_PORT:10,Z_INDEX_ICON_PANEL:50,Z_INDEX_DRAGGABLE_BUTTON:60,Z_INDEX_ICON_TITLES_CONTAINER:5,Z_INDEX_CONNECTION_OVERLAY:9,Z_INDEX_ICON:10,Z_INDEX_CONNECTION_HOVER:11,Z_INDEX_CONNECTION_OVERLAY_HOVER:12,Z_INDEX_ICON_HOVER:13,Z_INDEX_ICON_TITLE_HOVER:19,Z_INDEX_DRAGGED_ICON_NODE:20,Z_INDEX_JSPLUMB_DRAG_OPTIONS:25,Z_INDEX_NAVIGATOR_GLOBE:30,Z_INDEX_NAVIGATOR_ARROWS:31,Z_INDEX_CONTEXT_MENU:40,CANVAS_GRID_SIZE:20,NODE_SIZE:64,NODE_MIN_MARGIN:.1,TITLE_WIDTH:94,MINIMAP_PADDING:2,AUTO_ALIGN_STEP_X:5,AUTO_ALIGN_EXTRA_STEP_X:.5,AUTO_ALIGN_STEP_Y:6,AUTO_ALIGN_STEP_BETWEEN_GROUPS:2,AUTO_DROP_STEP_X:4,AUTO_DROP_STEP_Y:3,MIN_ZOOM:.5,MAX_ZOOM:1.5,DEFAULT_ZOOM:1,ZOOM_STEP:.1,NAVIGATION_STEP:100,MAX_UNDO_STEPS:17,CONNECTION_COLOR:"#61B7CF",CONNECTION_THICKNESS:3,CONNECTION_OUTLINE_COLOR:"transparent",CONNECTION_OUTLINE_WIDTH:4,CONNECTION_HOVER_COLOR:"#216477",CONNECTION_ARROW_SIZE:10,NODE_TYPE_START:"start",NODE_TYPE_STOP:"stop",NODE_TYPE_DECISION:"decision",NODE_TYPE_DEADLINE:"deadline",NODE_TYPE_PARAMETER:"parameter",NODE_TYPE_REPORT:"report",NODE_TYPE_RECIPIENT:"recipient",NODE_TYPE_ARCHIVE:"archive",NODE_TYPE_FORM:"form",NODE_TYPE_MAILING:"mailing",NODE_TYPE_OWN_WORKFLOW:"ownWorkflow",NODE_TYPE_SC_BIRTHDAY:"scBirthday",NODE_TYPE_SC_DOI:"scDOI",NODE_TYPE_SC_ABTEST:"scABTest",NODE_TYPE_ACTION_BASED_MAILING:"actionbased_mailing",NODE_TYPE_DATE_BASED_MAILING:"datebased_mailing",NODE_TYPE_FOLLOWUP_MAILING:"followup_mailing",NODE_TYPE_IMPORT:"import",NODE_TYPE_EXPORT:"export",NODE_TYPES_MAILING:["mailing","followup_mailing","actionbased_mailing","datebased_mailing"],NODE_TYPES_IMPORT_EXPORT:["import","export"],NODE_TYPE_START_ID:0,NODE_TYPE_STOP_ID:1,NODE_TYPE_DECISION_ID:2,NODE_TYPE_DEADLINE_ID:3,NODE_TYPE_PARAMETER_ID:4,NODE_TYPE_REPORT_ID:5,NODE_TYPE_RECIPIENT_ID:6,NODE_TYPE_ARCHIVE_ID:7,NODE_TYPE_FORM_ID:8,NODE_TYPE_MAILING_ID:9,NODE_TYPE_OWN_WORKFLOW_ID:10,NODE_TYPE_SC_BIRTHDAY_ID:11,NODE_TYPE_SC_DOI_ID:12,NODE_TYPE_SC_ABTEST_ID:13,NODE_TYPE_ACTION_BASED_MAILING_ID:14,NODE_TYPE_DATE_BASED_MAILING_ID:15,NODE_TYPE_FOLLOWUP_MAILING_ID:16,NODE_TYPE_IMPORT_ID:17,NODE_TYPE_EXPORT_ID:18,MAILING_PARAM_MAILING_LIST:1,MAILING_PARAM_TARGET_GROUPS:2,MAILING_PARAM_ARCHIVE:3,MAILING_PARAM_LIST_SPLIT:4,MAILING_PARAM_PLANNED_DATE:5,MAILING_PARAM_SEND_DATE:6,MAILING_PARAM_ALTGS:7,DEPENDENCY_TYPE_ARCHIVE:1,DEPENDENCY_TYPE_AUTO_EXPORT:2,DEPENDENCY_TYPE_AUTO_IMPORT:3,DEPENDENCY_TYPE_MAILING_DELIVERY:4,DEPENDENCY_TYPE_MAILING_LINK:5,DEPENDENCY_TYPE_MAILING_REFERENCE:6,DEPENDENCY_TYPE_MAILINGLIST:7,DEPENDENCY_TYPE_PROFILE_FIELD:8,DEPENDENCY_TYPE_PROFILE_FIELD_HISTORY:9,DEPENDENCY_TYPE_REPORT:10,DEPENDENCY_TYPE_TARGET_GROUP:11,DEPENDENCY_TYPE_USER_FORM:12,GENDER_PROFILE_FIELD:"gender",FIELD_TYPE_DATE:"date",TITLE_MAX_TARGETS:2,TITLE_MAX_REPORTS:2,PDF_SIZE:"A4",PDF_ORIENTATION:"landscape",PAGE_DIMENSIONS:{A4:{width:800,height:1360}},ICONS_CONFIG:{actionbased_mailing:{icons:{inactive:"icon_actionbased_mailing_g.png",active:"icon_actionbased_mailing_l.png",dialog:"icon_actionbased_mailing_s.png"},anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},archive:{icons:{inactive:"icon_archive_g.png",active:"icon_archive_l.png",dialog:"icon_archive_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.8,0,1]]},datebased_mailing:{icons:{inactive:"icon_datebased_mailing_g.png",active:"icon_datebased_mailing_l.png",dialog:"icon_datebased_mailing_s.png"},anchors:[[.07,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},deadline:{icons:{inactive:"icon_deadline_g.png",active:"icon_deadline_l.png",dialog:"icon_deadline_s.png"},anchors:[[.1,.5,-1,0],[.5,.05,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},decision:{icons:{inactive:"icon_decision_g.png",active:"icon_decision_l.png",dialog:"icon_decision_s.png"},anchors:[[.06,.5,-1,0],[.5,.06,0,-1],[.94,.5,1,0],[.5,.94,0,1]]},export:{icons:{inactive:"icon_export_g.png",active:"icon_export_l.png",dialog:"icon_export_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},followup_mailing:{icons:{inactive:"icon_followup_mailing_g.png",active:"icon_followup_mailing_l.png",dialog:"icon_followup_mailing_s.png"},anchors:[[.04,.5,-1,0],[.5,.2,0,-1],[.96,.5,1,0],[.5,.8,0,1]]},form:{icons:{inactive:"icon_form_g.png",active:"icon_form_l.png",dialog:"icon_form_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},import:{icons:{inactive:"icon_import_g.png",active:"icon_import_l.png",dialog:"icon_import_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},mailing:{icons:{inactive:"icon_mailing_g.png",active:"icon_mailing_l.png",dialog:"icon_mailing_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},ownWorkflow:{icons:{inactive:"icon_ownWorkflow_g.png",active:"icon_ownWorkflow_l.png",dialog:"icon_ownWorkflow_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},parameter:{icons:{inactive:"icon_parameter_g.png",active:"icon_parameter_l.png",dialog:"icon_parameter_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},recipient:{icons:{inactive:"icon_recipient_g.png",active:"icon_recipient_l.png",dialog:"icon_recipient_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.9,0,1]]},report:{icons:{inactive:"icon_report_g.png",active:"icon_report_l.png",dialog:"icon_report_s.png"},anchors:[[.1,.5,-1,0],[.5,.22,0,-1],[.9,.5,1,0],[.5,.78,0,1]]},scABTest:{icons:{inactive:"icon_scABTest_g.png",active:"icon_scABTest_l.png",dialog:"icon_scABTest_s.png"},anchors:[[.1,.5,-1,0],[.5,.15,0,-1],[.9,.5,1,0],[.5,.85,0,1]]},scBirthday:{icons:{inactive:"icon_scBirthday_g.png",active:"icon_scBirthday_l.png",dialog:"icon_scBirthday_s.png"},anchors:[[.1,.5,-1,0],[.5,.1,0,-1],[.9,.5,1,0],[.5,.85,0,1]]},scDOI:{icons:{inactive:"icon_scDOI_g.png",active:"icon_scDOI_l.png",dialog:"icon_scDOI_s.png"},anchors:[[.3,.5,-1,0],[.5,.04,0,-1],[.72,.5,1,0],[.5,.96,0,1]]},start:{icons:{inactive:"icon_start_g.png",active:"icon_start_l.png",dialog:"icon_start_s.png"},anchors:[[0,.5,-1,0],[.5,.15,0,-1],[1,.5,1,0],[.5,.85,0,1]]},stop:{icons:{inactive:"icon_start_g.png",active:"icon_start_l.png",dialog:"icon_start_s.png"},anchors:[[0,.5,-1,0],[.5,.15,0,-1],[1,.5,1,0],[.5,.85,0,1]]}},CONNECTION_CONSTRAINTS:{"*":{deadline:function(e,t){return!t.connections.incoming.some(function(e){return"import"===e.source.getType()})},mailing:function(e,t){return 0===t.connections.incoming.length},datebased_mailing:function(e,t){return 0===t.connections.incoming.length}},start:{recipient:!0,form:!0,import:!0,export:!0},stop:!1,decision:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0},parameter:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0},deadline:{decision:!0,parameter:!0,report:!0,recipient:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},report:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},recipient:{decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},actionbased_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},datebased_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},followup_mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},mailing:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,import:!0,export:!0},archive:{decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},form:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,form:!0,archive:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0},import:{deadline:function(e){return 0===e.connections.outgoing.length}},export:{stop:!0,decision:!0,parameter:!0,deadline:!0,report:!0,recipient:!0,actionbased_mailing:!0,datebased_mailing:!0,followup_mailing:!0,mailing:!0,import:!0,export:!0,archive:!0,form:!0}},NODE_POPOVER_TEMPLATE:'<div class="popover popover-wide" role="tooltip" ><div class="arrow"></div><div class="popover-content" style="width: auto; height: auto; max-width: 300px; max-height: 350px; overflow: auto;"></div></div>'},!function(){var i=AGN.Lib.WM.Definitions,n=AGN.Lib.Helpers,o=AGN.Lib.DateFormat;AGN.Lib.WM.Utils={checkActivation:function(){var e=$("#workflow-status").val();return i.constants.initialWorkflowStatus===i.constants.statusActive&&(e===i.constants.statusActive||e===i.constants.statusTesting)&&(AGN.Lib.Messages(t("workflow.defaults.error"),t("error.workflow.saveActivatedWorkflow"),"alert"),!0)},getConfigData:function(e){return n.objFromString(e.data("config"))},mapAsOptionsHtml:function(t){var i="";return Object.keys(t).forEach(function(e){i+="<option "+('value="'+e+'"')+">"+t[e]+"</option>"}),i},arrayAsOptionsHtml:function(e){var n="";return e.forEach(function(e){var t='value="'+e.id+'"',i=e.data,e=(i&&Object.keys(i).forEach(function(e){t+=" data-"+e+'="'+i[e].replace('"',"&quot;")+'"'}),e.text.replace("<","&lt;").replace(">","&gt;"));n+="<option "+t+">"+e+"</option>"}),n}},AGN.Lib.WM.DateTimeUtils={toDateTime:function(e,t,i){var n=null;return e&&e.getMonth&&(n=new Date(e),t&&0!==t&&n.setHours(t),i&&0!==i&&n.setMinutes(i)),n},getDateTimeValue:function(e,t,i){e=this.toDateTime(e,t,i);return null!=e?e.getTime():null},getDateTimeStr:function(e,t,i,n){if(!e||!e.getMonth)return"";t=t||e.getHours(),i=i||e.getMinutes();e=this.toDateTime(e,t,i);return e?o.format(e,n):""},getDateStr:function(e,t){return this.getDateTimeStr(e,null,null,t)}}}(),!function(){function e(e){this.rules=e}e.prototype.isConstraint=function(e){return _.isBoolean(e)||_.isFunction(e)},e.prototype.evaluate=function(e,t,i){return!0===e||!1===e?e:_.isFunction(e)?e(t,i):void 0},e.prototype.getRulesToCheck=function(e,t){return[{from:e.type,to:[t.type,"*"]},{from:"*",to:[t.type,"*"]}]},e.prototype.getRelevantConstraints=function(e,t){var o=this.isConstraint,e=this.getRulesToCheck(e,t),r=this.rules,s=[];return e.forEach(function(t){var i,n=!0;_.has(r,t.from)&&(i=r[t.from],o(i)?(s.push(i),n=!1):t.to.forEach(function(e){_.has(r[t.from],e)&&(i=r[t.from][e],o(i)&&(s.push(i),n=!1))})),n&&"*"!=t.from&&s.push(!1)}),s},e.prototype.check=function(e,t){for(var i=this.getRelevantConstraints(e,t),n=!1,o=0;o<i.length;o++){if(!this.evaluate(i[o],e,t))return!1;n=!0}return n},AGN.Lib.WM.ConnectionConstraints=e}(),!function(){var t,i,e,n=AGN.Lib.WM.DateTimeUtils,o=AGN.Lib.Template,s=AGN.Lib.WM.Definitions,r=AGN.Lib.Popover;function a(e,t){this.id=null,this.x=0,this.y=0,this.type=e,this.title="",this.statisticTitle="",this.overlayTitle="",this.statistic=[],this.overlayImage={image:"",title:"",visible:!1},this.filled=!1,this.editable=!0,this.expandable=!1,this.dependent=!1,this.inRecipientsChain=!1,this.anchors=s.ICONS_CONFIG[e].anchors,this.data=t,this.$element=a.create$(e),this.$element.data("agn:node",this),this.$connectionButton=this.$element.find(".node-connect-button"),this.$titleDiv=a.createTitleDiv$(),this.$titleSpan=this.$titleDiv.find(".icon-title-span"),this.$statisticSpan=this.$titleDiv.find(".icon-statistic-span"),this.$overlayTitle=this.$element.find(".icon-overlay-title"),this.$overlayImage=this.$element.find(".icon-overlay-image img"),this.nodePopover=new l(this),this.lastTitleAnchor=s.BOTTOM}function l(e){this.node=e instanceof a?e:a.get(e),this.popover=void 0,this.timeoutId=void 0,this.isEnabled=!0}a.restore=function(e){return e.get$().data("agn:node")||e.get$().data("agn:node",e),e},a.get=function(e){return(e=(e=e instanceof HTMLElement?$(e):e).is(".node")?e:e.closest(".node")).data("agn:node")},a.isDecisionNode=function(e){return e.getType()===s.NODE_TYPE_DECISION},a.isMailingNode=function(e){return!!e&&s.NODE_TYPES_MAILING.includes(e.getType())},a.isBranchingDecisionNode=function(e){if(a.isDecisionNode(e)&&e.getData().decisionType===s.constants.decisionTypeDecision)return!0;return!1},a.isDecisionBranchesOrderFromPositiveToNegative=function(e,t,i){return t.y<=e.y&&i.y<=e.y?t.y<i.y||!(i.y<t.y)&&t.x<i.x:t.y>e.y&&i.y>e.y?t.x>i.x:t.y<i.y},a.getDecisionBranches=function(e){var t,i,n;return 2===e.length?(t=a.getPosition(e[0].source.get$()),i=a.getPosition(e[0].target.get$()),n=a.getPosition(e[1].target.get$()),this.isDecisionBranchesOrderFromPositiveToNegative(t,i,n)?{positive:e[0],negative:e[1]}:{positive:e[1],negative:e[0]}):null},a.isCommented=function(e){return!!_.trim(e.getComment())},a.isSelected=function(e){return e.hasClass("ui-selected")},a.setSelected=function(e,t){return e.toggleClass("ui-selected",!!t)},a.isChainSource=function(e){return e.hasClass("chain-mode-source")},a.setChainSource=function(e,t){e.toggleClass("chain-mode-source",!!t)},a.getAnchors=function(e){var t=a.get(e);return t?t.getAnchors():s.ICONS_CONFIG[e.data("type")].anchors},a.getAnchorsInUse=function(e){var t={};return e.forEach(function(e){e=e.anchor.getOrientation();0<e[0]?t[s.RIGHT]=!0:e[0]<0?t[s.LEFT]=!0:0<e[1]?t[s.BOTTOM]=!0:e[1]<0&&(t[s.TOP]=!0)}),t},a.getPosition=function(e){e=e.position();return{x:e.left,y:e.top}},a.getBox=function(e){var t=e.position(),e=e[0].getBoundingClientRect();return{minX:t.left,minY:t.top,maxX:t.left+e.width,maxY:t.top+e.height}},a.isInRegion=function(e,t){e=a.getBox(e);return(e.minX>=t.minX&&e.minX<=t.maxX||e.maxX>=t.minX&&e.maxX<=t.maxX)&&(e.minY>=t.minY&&e.minY<=t.maxY||e.maxY>=t.minY&&e.maxY<=t.maxY)},a.getCollisionBox=function(e){var t=a.getAnchors(e),i=e.position(),e=e[0].getBoundingClientRect(),n=(t[0][0]-s.NODE_MIN_MARGIN)*e.width,o=(t[1][1]-s.NODE_MIN_MARGIN)*e.height,r=(1-t[2][0]-s.NODE_MIN_MARGIN)*e.width,t=(1-t[3][1]-s.NODE_MIN_MARGIN)*e.height;return{minX:i.left+n,minY:i.top+o,maxX:i.left+e.width-r,maxY:i.top+e.height-t}},a.detectBoxCollision=function(e,t){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},a.create$=(t=null,function(e){return null==t&&(t=o.prepare("workflow-node")),$(t({icons:s.ICONS_CONFIG[e].icons}))}),a.createDraggable$=(i=null,function(e){return null==i&&(i=o.prepare("workflow-draggable-node")),$(i({type:e,icons:s.ICONS_CONFIG[e].icons}))}),a.createTitleDiv$=(e=null,function(){return null==e&&(e=o.prepare("workflow-icon-title")),$(e({}))}),a.create=function(e){var t={iconComment:""},i=new a(e,t);switch(e){case"scABTest":case"scBirthday":case"scDOI":i.setFilled(!0),i.setExpandable(!0),t.copyContent=!0,t.created=!1;break;case"ownWorkflow":i.setExpandable(!0),t.ownWorkflowId=0,t.copyContent=!0,t.created=!1;break;case"start":t.startType=null,t.date=null,t.hour=0,t.minute=0,t.sendReminder=!1,t.remindAdminId=0,t.remindAtOnce=!1,t.scheduleReminder=!1,t.remindSpecificDate=!1,t.remindDate=new Date,t.remindHour=0,t.remindMinute=0,t.event=null,t.reaction=null,t.mailingId=0,t.profileField="",t.dateProfileField="",t.dateFieldOperator=1,t.dateFieldValue="",t.useRules=!1,t.rules=[],t.executeOnce=!0,t.comment="",t.recipients="",t.adminTimezone="";break;case"stop":t.endType=null,t.date=null,t.hour=0,t.minute=0,t.sendReminder=!1,t.remindAdminId=0,t.remindAtOnce=!1,t.scheduleReminder=!1,t.remindSpecificDate=!1,t.remindDate=new Date,t.remindHour=0,t.remindMinute=0,t.event=null,t.reaction=null,t.mailingId=0,t.profileField="",t.useRules=!1,t.rules=[],t.executeOnce=!0,t.comment="",t.recipients="",t.adminTimezone="";break;case"decision":t.decisionType=null,t.decisionCriteria=null,t.reaction=null,t.mailingId=0,t.linkId=0,t.profileField="",t.aoDecisionCriteria=null,t.threshold="",t.decisionDate=new Date,t.rules=[],t.includeVetoed=!0;break;case"deadline":t.deadlineType=null,t.date=new Date,t.timeUnit=null,t.delayValue=0,t.hour=0,t.minute=0,t.useTime=!1;break;case"parameter":t.value=0;break;case"report":t.reports=[];break;case"recipient":i.setDependent(!1),t.mailinglistId=0,t.targets=[],t.altgs=[],t.targetsOption=null;break;case"archive":t.campaignId=0,t.archived=!1;break;case"form":t.userFormId=0,t.formType="form";break;case"mailing":t.mailingId=0,t.skipEmptyBlocks=!1,t.doubleCheck=!0;break;case"actionbased_mailing":case"datebased_mailing":t.mailingId=0;break;case"followup_mailing":t.baseMailingId=0,t.mailingId=0,t.decisionCriterion="OPENED";break;case"import":case"export":t.importexportId=0,t.errorTolerant=!1}return i},a.isExpandableType=function(e){switch(e){case"scABTest":case"scBirthday":case"scDOI":case"ownWorkflow":return!0;default:return!1}},a.deserialize=function(e){var i=$.extend({},e),t=new a(e.type,i);return t.setId(e.id),t.setCoordinates(e.x,e.y),t.setTitle(e.iconTitle),t.setComment(e.iconComment),t.setFilled(e.filled),t.setEditable(e.editable),["ownWorkflow","scBirthday","scDOI","scABTest"].includes(e.type)&&t.setExpandable(!0),delete i.id,delete i.x,delete i.y,delete i.type,delete i.iconTitle,delete i.filled,delete i.editable,["date","remindDate","decisionDate"].forEach(function(e){var t;i[e]&&((t=i[e].toString()).includes("-")?(t=t.split("-"),i[e]=new Date(t[0],t[1]-1,t[2])):i[e]=new Date(i[e]))}),t},a.deserializeConnections=function(e,i){var n=[];return e.forEach(function(e){var t=i[e.id];t instanceof a&&e.connections&&e.connections.forEach(function(e){e=i[e.targetIconId];e instanceof a&&n.push({source:t,target:e})})}),n},a.toMap=function(e){var t={};return e.forEach(function(e){t[e.getId()]=e}),t},a.prototype.appendTo=function(e,t,i){this.$container=e,this.$titlesContainer=t,i&&this.$element.addClass(i),e.append(this.$element),t.append(this.$titleDiv),this.$titleDiv.toggleClass("expandable",this.$titleSpan.height()>this.$titleDiv.height())},a.prototype.isAppended=function(){return!!this.$container},a.prototype.get$=function(){return this.$element},a.prototype.getId=function(){return this.id},a.prototype.setId=function(e){this.id=e,this.$element.prop("id",e)},a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getCoordinates=function(){return{x:this.x,y:this.y}},a.prototype.setCoordinates=function(e,t){this.x=e,this.y=t,this.$element.css("left",e*s.CANVAS_GRID_SIZE),this.$element.css("top",t*s.CANVAS_GRID_SIZE)},a.prototype.updateCoordinates=function(e){var t=a.getPosition(this.$element);this.x=Math.round(t.x/e/s.CANVAS_GRID_SIZE),this.y=Math.round(t.y/e/s.CANVAS_GRID_SIZE)},a.prototype.getType=function(){return this.type},a.prototype.setType=function(e){this.type=e},a.prototype.setStatistic=function(e,t){this.statistic=t||[]},a.prototype.getStatistic=function(){return this.statistic},a.prototype.isStatisticEnabled=function(){return!_.isEmpty(this.statistic)},a.prototype.getTitle=function(){return this.title},a.prototype.setTitle=function(e,t){this.title=e,this.statisticTitle=t,(e||t)&&(this.$titleSpan.text(e),this.$statisticSpan.text(t),this.positionTitle(this.lastTitleAnchor),this.$titleDiv.toggleClass("expandable",this.$titleSpan.height()+this.$statisticSpan.height()>this.$titleDiv.height())),this.setTitleEnabled(!!e||!!t)},a.prototype.setTitleEnabled=function(e){this.$titleDiv.toggle(!(!e||!this.title&&!this.statisticTitle))},a.prototype.setTitleExpanded=function(e){this.$titleDiv.toggleClass("expanded",!!e),this.isAppended()&&(e?this.$titleDiv.appendTo(this.$container):this.$titleDiv.appendTo(this.$titlesContainer))},a.prototype.positionTitle=function(e){this.lastTitleAnchor=e;var t=this.x*s.CANVAS_GRID_SIZE,i=t+s.NODE_SIZE,n=this.y*s.CANVAS_GRID_SIZE,o=n+s.NODE_SIZE;switch(e){case s.BOTTOM:this.$titleDiv.css({top:o,left:t+(s.NODE_SIZE-s.TITLE_WIDTH)/2,transform:"none"});break;case s.LEFT:this.$titleDiv.css({top:(n+o)/2,left:t-s.TITLE_WIDTH,transform:"translateY(-50%)"});break;case s.RIGHT:this.$titleDiv.css({top:(n+o)/2,left:i,transform:"translateY(-50%)"});break;case s.TOP:this.$titleDiv.css({top:n,left:t+(s.NODE_SIZE-s.TITLE_WIDTH)/2,transform:"translateY(-100%)"});break;default:return}},a.prototype.getOverlayTitle=function(){return this.overlayTitle},a.prototype.setOverlayTitle=function(e){this.overlayTitle=e,this.$overlayTitle.text(_.trim(e))},a.prototype.getOverlayImage=function(){return this.overlayImage},a.prototype.setOverlayImage=function(e){this.overlayImage=$.extend({image:"",title:"",visible:!1},e);e=_.trim(this.overlayImage.image)?s.constants.imagePath+"/"+_.trim(this.overlayImage.image):"";this.$overlayImage.prop("src",e),this.$overlayImage.prop("title",this.overlayImage.title),this.overlayImage.visible?this.$overlayImage.show():this.$overlayImage.hide()},a.prototype.getComment=function(){return this.comment},a.prototype.setComment=function(e){this.comment=this.data.iconComment=e,this.$element.toggleClass("icon-commented",!!_.trim(e))},a.prototype.updateCommentLabels=function(){this.$element.toggleClass("icon-commented",!!_.trim(this.comment))},a.prototype.setFootnote=function(e){0<e?this.$element.attr("comment-footnote",e):this.$element.removeAttr("comment-footnote")},a.prototype.isFilled=function(){return this.filled},a.prototype.setFilled=function(e){this.filled=e,this.$element.toggleClass("active",e)},a.prototype.isEditable=function(){return this.editable},a.prototype.setEditable=function(e){this.editable=e},a.prototype.isExpandable=function(){return this.expandable},a.prototype.setExpandable=function(e){this.expandable=e},a.prototype.isDependent=function(){return this.dependent},a.prototype.setDependent=function(e){this.dependent=e},a.prototype.isInRecipientsChain=function(){return this.inRecipientsChain},a.prototype.setInRecipientsChain=function(e){this.inRecipientsChain=e},a.prototype.getAnchors=function(){return this.anchors},a.prototype.setAnchors=function(e){this.anchors=e},a.prototype.getData=function(){return this.data},a.prototype.setData=function(e){this.data=e},a.prototype.setInteractionEnabled=function(e){this.$connectionButton.toggle(!!e)},a.prototype.removePopover=function(){this.nodePopover.remove()},a.prototype.setPopoverEnabled=function(e){e||this.nodePopover._hidePopover(!0),this.nodePopover.setEnabled(e)},a.prototype.setPopoverShown=function(e){e?this.nodePopover.show():this.nodePopover.hide()},a.prototype.setHovered=function(e){this.setPopoverShown(e),this.setTitleExpanded(e)},a.prototype.remove=function(){this.nodePopover.remove(),this.$element.remove(),this.$titleDiv.remove(),this.$container=null,this.$titlesContainer=null},a.prototype.serialize=function(){var e=$.extend({},this.data,{id:this.id,x:this.x,y:this.y,type:this.type,filled:this.filled,editable:this.editable,iconTitle:this.title});return"date"in e&&"hour"in e&&"minute"in e&&(e.date=n.getDateTimeValue(e.date,e.hour,e.minute)),"remindDate"in e&&"remindHour"in e&&"remindMinute"in e&&(e.remindDate=n.getDateTimeValue(e.remindDate,e.remindHour,e.remindMinute)),"decisionDate"in e&&(e.decisionDate=n.getDateTimeValue(e.decisionDate)),e},l.prototype.remove=function(){this.popover&&this.popover.hide(),r.remove(this.node.get$()),this.popover=null},l.destroyAll=function(){$("[rel=popover]").each(function(e,t){a.get($(t)).removePopover()}),$(".popover").remove()},l.prototype.initPopover=function(){var e=this,t=r.new(e.node.get$(),{trigger:"manual",html:!0,template:s.NODE_POPOVER_TEMPLATE,content:function(){return e.getPopoverContent()}});return e.isEnabled?t.enable():t.disable(),t.tip().on({mouseenter:function(){e._showPopover()},mouseleave:function(){e._hidePopover(!0)}}),t},l.prototype.show=function(){l.destroyAll(),this.popover=this.initPopover(),this.popover.hasContent()&&this.popover.enabled&&this._showPopover()},l.prototype.hide=function(e){this._hidePopover(e)},l.prototype.getPopoverContent=function(){var e=this.node,t="",i=l.getThumbnail(e);return i&&!_.isEmpty(i.src)&&(t+='<img src="'+i.src+'" style="width: 100%; height: 100%;" />'),a.isCommented(e)&&(t+="<div>"+e.getComment()+"</div>"),t},l.getThumbnail=function(e){return a.isMailingNode(e)&&0<e.getData().mailingId?l.getMailingThumbnail(e.getData().mailingId):""},l.getMailingThumbnail=_.memoize(function(e){var t="";return $.ajax({type:"POST",url:AGN.url("/workflow/getMailingThumbnail.action"),async:!1,data:{mailingId:e},success:function(e){0<e&&((t=new Image).src=AGN.url("/sc?compID="+e))}}),t}),l.prototype._stopHiding=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},l.prototype._showPopover=function(){this._stopHiding(),this.popover.show()},l.prototype._hidePopover=function(e){var t;this._stopHiding(),this.popover&&(!0===e?this.popover&&this.popover.hide():(t=this).timeoutId=setTimeout(function(){t._hidePopover(!0)},200))},l.prototype.setEnabled=function(e){this.isEnabled=e,this.popover&&(e?this.popover.enable():this.popover.disable())},AGN.Lib.WM.NodePopover=l,AGN.Lib.WM.Node=a}(),!function(){var i=AGN.Lib.WM.Node;function n(e){this.id=e.getId(),this.node=e,this.position=i.getPosition(e.get$()),this.box=i.getBox(e.get$()),this.connections={incoming:[],outgoing:[]}}n.nodesToVertices=function(e){return e.map(function(e){return new n(e)})},n.verticesToMap=function(e){var t={};return e.forEach(function(e){t[e.id]=e}),t},n.verticesFrom=function(e,t){var e=n.nodesToVertices(e),i=n.verticesToMap(e);return t.forEach(function(e){var t,e="sourceId"in e?(t=i[e.sourceId],i[e.targetId]):(t=i[e.source.getId()],i[e.target.getId()]);t.connections.outgoing.push(e),e.connections.incoming.push(t)}),e},n.compareByPosition=function(e,t){e=e.box,t=t.box;return e.minX==t.minX?e.minY-t.minY:e.minX-t.minX},n.filterUnvisited=function(e,t){return e.filter(function(e){return!t[e.id]&&(t[e.id]=!0)})},n.getDecisionBranches=function(t){var e=t.connections.outgoing.map(function(e){return{source:t.node,target:e.node,targetVertex:e}}),e=i.getDecisionBranches(e);return e?{positive:e.positive.targetVertex,negative:e.negative.targetVertex}:null},n.getIncomingChains=function(e){var t=[];return function t(i,e,n,o){{var r;n[e.id]?o.push(i):(i.push(e.node),(r=e.connections.incoming).length?(n[e.id]=!0,1==r.length?t(i,r[0],n,o):r.forEach(function(e){t(i.slice(),e,n,o)}),n[e.id]=!1):o.push(i))}}([],e,{},t),t},n.getOutgoingChains=function(e){var t=[];return function t(i,e,n,o){{var r;n[e.id]?o.push(i):(i.push(e.node),(r=e.connections.outgoing).length?(n[e.id]=!0,1==r.length?t(i,r[0],n,o):r.forEach(function(e){t(i.slice(),e,n,o)}),n[e.id]=!1):o.push(i))}}([],e,{},t),t},n.prototype.getNode=function(){return this.node},n.prototype.siblings=function(){return this.connections.incoming.concat(this.connections.outgoing)},n.prototype.rightSiblingsOrdered=function(){var e=this.connections.outgoing;if(i.isBranchingDecisionNode(this.node)){var t=n.getDecisionBranches(this);if(t)return[t.positive,t.negative]}return e.sort(function(e,t){return e.node.getY()-t.node.getY()})},AGN.Lib.WM.Vertex=n}(),!function(){var o=AGN.Lib.WM.Vertex;function r(e){this.vertices=e,this.box=e.map(function(e){return e.box}).reduce(function(e,t){return{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}})}r.detectGroups=function(e){var t=[],i={};return e.forEach(function(e){e=r.detectGroup(e,i);e&&t.push(e)}),t.sort(r.compareByPosition)},r.detectGroup=function(e,t){if(t[e.id])return null;var i=[],n=e.siblings();for(i.push(e),t[e.id]=!0;n.length;)n=_.flatMap(n,function(e){return t[e.id]?[]:(i.push(e),t[e.id]=!0,e.siblings())});return new r(i)},r.compareByPosition=function(e,t){var i=e.box.minX+e.box.maxX-(t.box.minX+t.box.maxX);return 0==i?e.box.minY+e.box.maxY-(t.box.minY+t.box.maxY):i},r.prototype.getNodes=function(){return this.vertices.map(function(e){return e.getNode()})},r.prototype.getStartingVertices=function(){var e=this.vertices.filter(function(e){return 0==e.connections.incoming.length});return e.length?e.sort(o.compareByPosition):[this.vertices.reduce(function(e,t){var i=e.connections.outgoing.length/e.connections.incoming.length,n=t.connections.outgoing.length/t.connections.incoming.length;return i==n?0<=o.compareByPosition(e,t)?e:t:n<i?e:t})]},AGN.Lib.WM.VertexGroup=r}(),!function(){var s=AGN.Lib.WM.Definitions,n=AGN.Lib.WM.DateTimeUtils,o={},a=function(){};function i(t,e,i){if(e<=0)return"";_.isEmpty(o[t])&&$.ajax({url:AGN.url(i),async:!1}).done(function(e){o[t]=_.extend({},e)});i=o[t][e];return i||""}function l(e){switch(e){case s.constants.reactionOpened:return t("workflow.reaction.opened");case s.constants.reactionNotOpened:return t("workflow.reaction.not_opened");case s.constants.reactionClicked:return t("workflow.reaction.clicked");case s.constants.reactionNotClicked:return t("workflow.reaction.not_clicked");case s.constants.reactionBought:return t("workflow.reaction.bought");case s.constants.reactionNotBought:return t("workflow.reaction.not_bought");case s.constants.reactionChangeOfProfile:return t("workflow.reaction.change_of_profile");case s.constants.reactionWaitingForConfirm:return t("workflow.reaction.waiting_for_confirm");case s.constants.reactionOptIn:return t("workflow.reaction.opt_in");case s.constants.reactionOptOut:return t("workflow.reaction.opt_out");case s.constants.reactionClickedLink:return t("workflow.reaction.clicked_on_link");case s.constants.reactionOpenedAndClicked:return t("workflow.reaction.opened_and_clicked");case s.constants.reactionOpenedOrClicked:return t("workflow.reaction.opened_or_clicked")}}function r(n,e){var o="";return e.forEach(function(e){var t,i;o+=(_.isEmpty(o)?"":" "+e.chainOperator+" ")+function(e){switch(Number(e)){case 1:return"(";case 0:return""}}(e.parenthesisOpened)+n+" "+s.constants.operatorsMap[e.primaryOperator]+" "+(t=n,i=e.primaryValue,t&&s.GENDER_PROFILE_FIELD===t.toLowerCase()?s.constants.genderOptions[i||0]:_.isEmpty(i)?"":i)+function(e){switch(Number(e)){case 1:return")";case 0:return""}}(e.parenthesisClosed)}),t("workflow.start.rule")+(o?": "+o:"")}function c(e,t,i){return e?1===arguments.length?n.getDateStr(e,s.constants.localeDateTimePattern):n.getDateTimeStr(e,t,i,s.constants.localeDateTimePattern):""}function u(e,i){return e+" "+function(e,i){if(1<e)switch(i){case s.constants.deadlineTimeUnitMinute:return t("workflow.deadline.minutes");case s.constants.deadlineTimeUnitHour:return t("workflow.defaults.hours");case s.constants.deadlineTimeUnitDay:return t("workflow.defaults.days");case s.constants.deadlineTimeUnitWeek:return t("workflow.defaults.weeks");case s.constants.deadlineTimeUnitMonth:return t("workflow.defaults.months")}else switch(i){case s.constants.deadlineTimeUnitMinute:return t("workflow.deadline.minute");case s.constants.deadlineTimeUnitHour:return t("workflow.defaults.hour");case s.constants.deadlineTimeUnitDay:return t("workflow.defaults.day");case s.constants.deadlineTimeUnitWeek:return t("workflow.defaults.week");case s.constants.deadlineTimeUnitMonth:return t("workflow.defaults.month")}}(e,i)}function d(e,i,n){e=function(e){switch(e){case s.constants.decisionAOCriteriaClickRate:return t("workflow.defaults.ckickrate");case s.constants.decisionAOCriteriaOpenrate:return t("workflow.opening_rate");default:return t("workflow.statistic.revenue")}}(e)+(_.isEmpty(i)?"":": "+i)+"\n";return n&&(e+=t("workflow.defaults.date")+": "+c(n)),e}function h(e,i,n,o){var r="";return o&&(r+=t("workflow.mailinglist.short")+": "+a.getMailinglistName(e)),_.isEmpty(i)||(_.isEmpty(r)||(r+="\n"),r+=t("workflow.target.short")+": "+function(e,i){for(var n=[],o=0;o<s.TITLE_MAX_TARGETS&&o<e.length;o++)n.push(a.getTargetName(e[o]));var r=", ";return s.constants.targetOptions[i]&&(r=" "+s.constants.targetOptions[i]+" "),e.length>s.TITLE_MAX_TARGETS?n.join(r)+" "+t("defaults.andMore",e.length-s.TITLE_MAX_TARGETS)+"...":n.join(r)}(i,n)),r}a.getWebFormName=function(e){return i("form",e,"/workflow/ajax/getWebFormNames.action")},a.getReportName=function(e){return i("report",e,"/workflow/ajax/getReportNames.action")},a.getTargetName=function(e){return i("target",e,"/workflow/ajax/getTargetNames.action")},a.getMailingName=function(e){return i("mailing",e,"/workflow/ajax/getMailingNames.action")},a.getArchiveName=function(e){return i("archive",e,"/workflow/ajax/getArchiveNames.action")},a.getAutoExportName=function(e){return i("autoExport",e,"/workflow/ajax/getAutoExportNames.action")},a.getAutoImportName=function(e){return i("autoImport",e,"/workflow/ajax/getAutoImportNames.action")},a.getMailinglistName=function(e){return i("mailinglist",e,"/workflow/ajax/getMailinglistNames.action")},a.positionTitle=function(e,t){t[s.BOTTOM]?t[s.LEFT]?t[s.RIGHT]?t[s.TOP]?e.positionTitle(s.BOTTOM):e.positionTitle(s.TOP):e.positionTitle(s.RIGHT):e.positionTitle(s.LEFT):e.positionTitle(s.BOTTOM)};var e={title:function(e){return a.getMailingName(e.mailingId)}},p={"*":{statistic:function(e){var t="";return t=e.isStatisticEnabled()?e.getStatistic().join("\n"):t},overlayImage:{},overlayTitle:"",title:""},start:{title:function(e){var i,n,o=e.startType,r="";return s.constants.startTypeDate===o?r=t("workflow.start.start_date")+":\n"+c(e.date,e.hour,e.minute):s.constants.startTypeEvent===o&&(o=e.event,s.constants.startEventReaction===o?r=t("workflow.start.start_event")+":\n"+l(e.reaction)+": ("+c(e.date,e.hour,e.minute)+")":s.constants.startEventDate===o&&(r=t("workflow.start.start_event")+":\n"+(o=e.dateProfileField,i=e.dateFieldOperator,n=e.dateFieldValue,o+" "+s.constants.operatorsMap[i]+(n?" "+n:""))+":\n("+c(e.date,e.hour,e.minute)+")")),r},isImageAvailable:function(e){return s.constants.startTypeEvent===e.startType&&s.constants.startEventReaction===e.event},overlayImage:function(e){return this.isImageAvailable(e)?{visible:!0,image:function(e){switch(e){case s.constants.reactionOpened:return"reaction_opened.png";case s.constants.reactionNotOpened:return"reaction_notopened.png";case s.constants.reactionClicked:return"reaction_clicked.png";case s.constants.reactionNotClicked:return"reaction_notclicked.png";case s.constants.reactionBought:return"reaction_bought.png";case s.constants.reactionNotBought:return"reaction_notbought.png";case s.constants.reactionChangeOfProfile:return"reaction_profilechange.png";case s.constants.reactionWaitingForConfirm:return"reaction_wfc.png";case s.constants.reactionOptIn:return"reaction_optin.png";case s.constants.reactionOptOut:return"reaction_optout.png";case s.constants.reactionClickedLink:return"reaction_clicked.png";case s.constants.reactionOpenedAndClicked:case s.constants.reactionOpenedOrClicked:return"reaction_profilechange.png"}}(e.reaction),title:l(e.reaction)}:{}}},stop:{title:function(e,i,n){var o=e.endType,r="";return s.constants.endTypeDate===o?r=t("workflow.stop.end_date")+":\n"+c(e.date,e.hour,e.minute):s.constants.endTypeAutomatic===o&&(r=n?t("workflow.stop.automatic_end"):t("workflow.stop.open_end")),r}},deadline:{title:function(e){var i=e.deadlineType,n="";return s.constants.deadlineTypeFixedDeadline===i?n=t("workflow.deadline.title")+":\n"+c(e.date,e.hour,e.minute):s.constants.deadlineTypeDelay===i&&(n=t("workflow.defaults.delay")+":\n"+u(e.delayValue,e.timeUnit)),n}},parameter:{title:"",overlayTitle:function(e){return e.value},statistic:function(e){return e.isStatisticEnabled()?""+e.getStatistic()[0]:""}},decision:{title:function(e){var i,n=e.decisionType;return s.constants.decisionTypeAutoOptimization===n?t("workflow.mailing.autooptimization")+":\n"+d(e.aoDecisionCriteria,e.threshold,e.decisionDate):s.constants.decisionReaction===e.decisionCriteria?t("workflow.decision")+",\n"+(n=e.reaction,i=e.mailingId,t("workflow.reaction.title")+": "+l(n)+",\n"+t("workflow.defaults.mailing")+": "+a.getMailingName(i)):t("workflow.decision")+",\n"+r(e.profileField,e.rules)},statistic:"",branches:{title:function(e){var i=t("workflow.defaults.yes"),n=t("workflow.defaults.no");return e.isStatisticEnabled()&&((e=e.getStatistic())[0]&&(i+=': <span class="node-stats">'+e[0]+"</span>"),e[1]&&(n+=': <span class="node-stats">'+e[1]+"</span>")),{positive:i,negative:n}}}},recipient:{title:function(e,t){return h(e.mailinglistId,e.targets,e.targetsOption,!t.isInRecipientsChain())}},report:{title:function(e){return t("workflow.defaults.report")+":\n"+function(e){for(var i=[],n=0;n<s.TITLE_MAX_REPORTS&&n<e.length;n++)i.push(a.getReportName(e[n]));return e.length>s.TITLE_MAX_REPORTS?i.join(",\n")+" "+t("defaults.andMore",e.length-s.TITLE_MAX_REPORTS)+"...":i.join(",\n")}(e.reports)}},archive:{title:function(e){return a.getArchiveName(e.campaignId)}},form:{title:function(e){return a.getWebFormName(e.userFormId)}},mailing:e,actionbased_mailing:e,datebased_mailing:e,followup_mailing:{title:function(e,t){var t=t.getTitle(),i=a.getMailingName(e.baseMailingId)||"?",i=function(e,t,i){if(e)return t?t+" ("+l(i)+") "+e:e}(a.getMailingName(e.mailingId)||"?",i,e.decisionCriterion);return t=i?i:t}},import:{title:function(e){return a.getAutoImportName(e.importexportId)}},export:{title:function(e){return a.getAutoExportName(e.importexportId)}}};function f(e,t){var i=p[e],n=(i=i.hasOwnProperty(t)?i:p["*"])[t],o=Array.prototype.slice.call(arguments,2);return _.isFunction(n)?n.apply(i,o):n}a.getDecisionBranchesLabels=function(e){return p.decision.branches.title(e)},a.updateTitle=function(e,t,i){if(i||(n=(i=e).getType(),!s.NODE_TYPES_MAILING.includes(n)&&!s.NODE_TYPES_IMPORT_EXPORT.includes(n)||!i.getTitle())){var n;if(!e.isFilled())return e.setTitle(""),e.setOverlayImage({}),void e.setOverlayTitle("");e.setTitle((n=t,f((i=e).getType(),"title",i.getData(),i,n)),f((t=e).getType(),"statistic",t)),e.setOverlayImage(f((i=e).getType(),"overlayImage",i.getData())),e.setOverlayTitle(f((t=e).getType(),"overlayTitle",t.getData()))}},AGN.Lib.WM.NodeTitleHelper=a}(),!function(){function i(e,t,i){this.minimap=e,this.$element=e.$container.find(t),this.scale=1}function o(e,t,i){this.minimap=e,this.$element=e.get$().find(t),this.onDrag=_.isFunction(i.onPannerDrag)?i.onPannerDrag:_.noop,this.containment=$.extend({mode:"",padding:0},i.containment),this.containmentBox=null;var r=this,s=0,a=0;this.$element.draggable({start:function(e,t){s=t.position.left,a=t.position.top,r.containmentBox||(r.containmentBox=r.getContainmentBox(r.containment))},drag:function(e,t){var i=r.getScale(),n=(r.containmentBox&&(n=t.position.left,o=t.position.top,n<r.containmentBox.minX?t.position.left=r.containmentBox.minX:n>r.containmentBox.maxX&&(t.position.left=r.containmentBox.maxX),o<r.containmentBox.minY?t.position.top=r.containmentBox.minY:o>r.containmentBox.maxY&&(t.position.top=r.containmentBox.maxY)),(s-t.position.left)/i),o=(a-t.position.top)/i;s=t.position.left,a=t.position.top,r.onDrag.call(r,n,o)}})}function e(e,t){this.$container=$("#minimap"),this.canvas=e,this.$collapseBtn=this.$container.find(".minimap-collapse"),this.miniCanvas=new i(this,".minimap-canvas"),this.miniPanner=new o(this,".minimap-panner",t),this.enabled=!1;var n=this;this.$container.on("click",".minimap-panner, .minimap-collapse",function(e){e.preventFocusOnArea=!0}),this.$collapseBtn.on("click",function(e){n.collapseMinimap()}),this.$container.on("click",function(e){var t,i;e.preventFocusOnArea||(t=n.$container[0].getBoundingClientRect(),i=e.clientX-t.left,e=e.clientY-t.top,n.focusOnClickedArea(i,e))})}var n=AGN.Lib.WM.Node,r=AGN.Lib.WM.Definitions;i.prototype.setScale=function(e){this.scale=e},i.prototype.getScale=function(){return this.scale},i.prototype.getPosition=function(){var e=this.$element.position();return{x:e.left,y:e.top}},i.prototype.update=function(){this.reset();var e=this.minimap.getPureIconsBox(),t=2*r.MINIMAP_PADDING,i=e.maxX-e.minX+t,n=e.maxY-e.minY+t,o=(this.minimap.getWidth()-t)/i,t=(this.minimap.getHeight()-t)/n,o=(this.setScale(Math.min(o,t)),-e.minX*this.scale+r.MINIMAP_PADDING),t=-e.minY*this.scale+r.MINIMAP_PADDING;this.$element.css({transform:"scale("+this.scale+")",width:i,height:n,left:o,top:t}),this.renderIcons()},i.prototype.renderIcons=function(){var t=this;this.minimap.getPureIconsPosition().forEach(function(e){e=$('<div class="miniview-element"></div>').css({width:r.NODE_SIZE,height:r.NODE_SIZE,left:e.x,top:e.y});t.$element.append(e)})},i.prototype.reset=function(){this.scale=1,this.$element.css({transform:"scale(1)",width:0,height:0,left:0,top:0}),this.$element.html("")},o.prototype.getContainmentBox=function(e){var t,i,n;if(e.mode&&"none"!=e.mode)return t=this.minimap.get$(),i=this.getScaledWidth(),n=this.getScaledHeight(),"panner-box"==e.mode?{minX:-i+e.padding,maxX:t.width()-e.padding,minY:-n+e.padding,maxY:t.height()-e.padding}:"minimap-box"==e.mode?{minX:e.padding,maxX:Math.max(0,t.width()-i)-e.padding,minY:e.padding,maxY:Math.max(0,t.height()-n)-e.padding}:void 0},o.prototype.getScale=function(){return this.minimap.getMiniCanvasScale()/this.minimap.getCanvasZoom()},o.prototype.getScaledWidth=function(){return this.getWidth()*this.getScale()},o.prototype.getScaledHeight=function(){return this.getHeight()*this.getScale()},o.prototype.getWidth=function(){return this.$element.width()},o.prototype.getHeight=function(){return this.$element.height()},o.prototype.update=function(){var e=this.minimap.getCanvasParent$(),t=e.width(),e=e.height(),t=t+2*r.MINIMAP_PADDING,e=e+2*r.MINIMAP_PADDING;this.$element.css({width:t,height:e}),this.containmentBox=this.getContainmentBox(this.containment),this.updatePosition()},o.prototype.updatePosition=function(){var e=this.minimap.getCanvasPosition(),t=this.minimap.getMiniCanvasPosition(),i=this.getScale(),n=-e.x*i+t.x,e=-e.y*i+t.y;this.$element.css({transform:"scale("+i+")",left:n,top:e})};e.prototype.get$=function(){return this.$container},e.prototype.getWidth=function(){return this.get$().width()},e.prototype.getHeight=function(){return this.get$().height()},e.prototype.moveCanvasTo=function(e,t){this.canvas.moveTo(e,t)},e.prototype.getCanvas$=function(){return this.canvas.get$()},e.prototype.getCanvasParent$=function(){return this.canvas.get$().parent()},e.prototype.focusOnClickedArea=function(e,t){var i=this.getMiniCanvasPosition(),n=this.getMiniPannerScale(),e=(e-i.x)/n,t=(t-i.y)/n,i=this.getMiniPannerCenter(),n=this.getCanvasZoom(),e=(e-i.x)*n,t=(t-i.y)*n;this.moveCanvasTo(-e,-t)},e.prototype.collapseMinimap=function(){this.$container.toggleClass("minimap-collapsed"),this.updateMinimap()},e.prototype.getIcons=function(){return this.canvas.getIcons()},e.prototype.getPureIconsPosition=function(){var t=this.getCanvasZoom();return this.getIcons().map(function(e){e=n.getPosition(e);return{x:e.x/t,y:e.y/t}})},e.prototype.getPureIconsBox=function(){return this.canvas.getPureIconsBox()},e.prototype.getMiniCanvasScale=function(){return this.miniCanvas.getScale()},e.prototype.getMiniCanvasPosition=function(){return this.miniCanvas.getPosition()},e.prototype.getMiniPannerScale=function(){return this.miniCanvas.getScale()},e.prototype.getMiniPannerCenter=function(){return{x:this.miniPanner.getWidth()/2,y:this.miniPanner.getHeight()/2}},e.prototype.getCanvasZoom=function(){return this.canvas.getZoom()},e.prototype.getCanvasPosition=function(){return this.canvas.getPosition()},e.prototype.updateMinimap=function(){this.enabled&&(this.miniCanvas.update(),this.miniPanner.update())},e.prototype.onPanZoom=function(){this.enabled&&this.miniPanner.updatePosition()},e.prototype.setEnabled=function(e){(this.enabled=e)?(this.updateMinimap(),this.get$().show()):this.get$().hide()},AGN.Lib.WM.Minimap=e}(),!function(){function e(e){var n=this;this.$canvas=e,this.mouseWheelZoomEnabled=!1,this.panningEnabled=!1,this.zoomEventHandler=null,this.ignoreNextZoomEvent=!1,this.minimap=new t(this,{containment:{mode:"panner-box",padding:5},onPannerDrag:function(e,t){var i;(e||t)&&(i=n.getPosition(),n.moveTo(i.x+e,i.y+t))}}),this.panzoom=panzoom(e[0],{minZoom:s.MIN_ZOOM,maxZoom:s.MAX_ZOOM,initialZoom:s.DEFAULT_ZOOM,disableKeyboardInteraction:!0,smoothScroll:!1,onDoubleClick:function(){return!1},beforeWheel:function(){return!n.mouseWheelZoomEnabled},beforeMouseDown:function(){return!n.panningEnabled}}),this.panzoom.on("zoom",function(){n.zoomEventHandler&&(n.ignoreNextZoomEvent?n.ignoreNextZoomEvent=!1:(n.zoomEventHandler.call(null,n.getZoom()),n.minimap.onPanZoom()))}),this.panzoom.on("pan",function(){n.minimap.onPanZoom()})}var s=AGN.Lib.WM.Definitions,i=AGN.Lib.WM.Node,t=AGN.Lib.WM.Minimap;e.prototype.get$=function(){return this.$canvas},e.prototype.setMinimapEnabled=function(e){this.minimap.setEnabled(e)},e.prototype.updateMinimap=function(){this.minimap.updateMinimap()},e.prototype.setPanningEnabled=function(e){this.panningEnabled=!!e},e.prototype.setMouseWheelZoomEnabled=function(e){this.mouseWheelZoomEnabled=e},e.prototype.getZoom=function(){return this.panzoom.getTransform().scale},e.prototype.getPosition=function(){var e=this.panzoom.getTransform();return{x:e.x,y:e.y}},e.prototype.getVisibleArea=function(){var e=this.$canvas.parent(),t=e.width(),e=e.height(),i=this.panzoom.getTransform();return{minX:-i.x/i.scale,minY:-i.y/i.scale,maxX:(t-i.x)/i.scale,maxY:(e-i.y)/i.scale}},e.prototype.moveTo=function(e,t){this.panzoom.moveTo(e,t)},e.prototype.setZoom=function(e){var t=this.panzoom.getTransform();this.ignoreNextZoomEvent=!0,this.panzoom.zoomAbs(t.x,t.y,e),this.minimap.onPanZoom()},e.prototype.setOnZoom=function(e){this.zoomEventHandler=e},e.prototype.getCanvasParent$=function(){return this.get$().parent()},e.prototype.getIcons=function(){var i=[];return this.get$().children(".node").each(function(e,t){i.push($(t))}),i},e.prototype.getPureIconsBox=function(){var e=this.getIcons(),t=this.getZoom();return e.length?{minX:(e=e.map(function(e){return i.getBox(e)}).reduce(function(e,t,i){return{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}})).minX/t-s.CANVAS_GRID_SIZE,minY:e.minY/t-s.CANVAS_GRID_SIZE,maxX:e.maxX/t+s.CANVAS_GRID_SIZE,maxY:e.maxY/t+s.CANVAS_GRID_SIZE}:(e=this.getCanvasParent$(),{minX:-s.CANVAS_GRID_SIZE,minY:-s.CANVAS_GRID_SIZE,maxX:e.width()/t+s.CANVAS_GRID_SIZE,maxY:e.height()/t+s.CANVAS_GRID_SIZE})},e.prototype.fitPdfPage=function(e,t){var i,n=this.getPureIconsBox(),o=n.maxX-n.minX+s.NODE_MIN_MARGIN,r=n.maxY-n.minY+s.NODE_MIN_MARGIN;s.PAGE_DIMENSIONS[e]&&(e=s.PAGE_DIMENSIONS[e],i=(t="landscape"==t)?e.height:e.width,t=t?e.width:e.height,i="matrix("+(e=i<o||t<r?o/r<i/t?t/r:i/o:1)+", 0, 0, "+e+", "+(t=n.minX<(r=t=0)?-n.minX*e:t)+", "+(r=n.minY<0?-n.minY*e:r)+")",o="left top 0",this.getCanvasParent$().css({transform:i,"-webkit-transform":i,"transform-origin":o,"-webkit-transform-origin":o,"backface-visibility":"hidden","-webkit-backface-visibility":"hidden",overflow:"visible"}))},AGN.Lib.WM.Canvas=e}(),!function(){var i=AGN.Lib.WM.Definitions,n=AGN.Lib.Confirm;AGN.Lib.WM.Dialogs={Activation:function(e,i){var n=$("#activating-campaign-dialog"),i=($("#activating-campaign-mailings").html(i),n.css("visibility","visible"),n.show(),$("#activating-campaign-activate-button"));i.off("click"),i.on("click",function(){return e(),n.dialog("close"),!1}),n.dialog({open:function(){var e=n.parent().find(".ui-dialog-title");e.empty(),e.append('<span class="dialog-title-image">'+t("workflow.activating.title")+"</span>"),e.find(".dialog-title-image").css("padding-left","0px")},modal:!0,resizable:!1,width:650,minHeight:0,close:function(){return!1}})},Deactivation:function(e){var i=$("#inactivating-campaign-dialog"),n=(i.css("visibility","visible"),i.show(),$("#inactivating-campaign-inactivate-button"));n.off("click"),n.on("click",function(){return e(),i.dialog("close"),!1}),i.dialog({open:function(){var e=i.parent().find(".ui-dialog-title");e.empty(),e.append('<span class="dialog-title-image">'+t("workflow.inactivating.title")+"</span>"),e.find(".dialog-title-image").css("padding-left","0px")},modal:!0,resizable:!1,width:650,minHeight:0,close:function(){return!1}})},confirmSaveBeforePdfGenerating:function(e,i){var n=$("#workflow-save-before-pdf-dialog"),o=$("#save-before-pdf-btn-cancel");o.off("click"),o.on("click",function(){return n.dialog("close"),!1}),_.isFunction(e)&&(e=_.noop);o=$("#save-before-pdf-btn-save");o.off("click"),o.on("click",function(){return e(),n.dialog("close"),!1}),$("#workflow-save-before-pdf-dialog .dialog-message").html(i),n.dialog({title:'<span class="dialog-fat-title">'+t("workflow.pdf.save_campaign")+"</span>",dialogClass:"no-close",width:650,modal:!0,resizable:!1,close:function(){return!1}})},confirmTestingStartStop:function(e){return n.createFromTemplate({startTesting:e,shortname:i.shortname},"testing-modal")},confirmMailingDataTransfer:function(e){return n.createFromTemplate({Def:i,paramsToAsk:e},"mailing-data-transfer-modal")},confirmOwnWorkflowExpanding:function(){return n.createFromTemplate({},"own-workflow-expanding-modal")},confirmCopy:function(e){return n.createFromTemplate({hasContent:!0===e},"workflow-copy-modal")}}}(),!function(){var d=AGN.Lib.WM.Definitions,n=AGN.Lib.WM.Node,e={};function o(i){return function(e){var t=e.map(n.deserialize),e=n.deserializeConnections(e,n.toMap(t));i.call(null,t,e)}}e.loadSample=function(e,t){[d.NODE_TYPE_SC_ABTEST,d.NODE_TYPE_SC_BIRTHDAY,d.NODE_TYPE_SC_DOI].includes(e)?$.ajax({url:AGN.url("/workflow/getSampleWorkflowContent.action"),type:"POST",async:!1,data:{type:e},success:o(t)}):console.error("Unknown sample type: "+e)},e.loadOwnWorkflow=function(e,t,i){$.ajax({url:AGN.url("/workflow/getWorkflowContent.action"),type:"POST",async:!1,data:{workflowId:e,isWithContent:t},success:o(i)})},e.removeStartStop=function(e,t,i,n){var o,r;(i||n)&&(o=[],(r=e.filter(function(e){var t=e.getType();return!(i&&t===d.NODE_TYPE_START||n&&t===d.NODE_TYPE_STOP)||(o.push(e),!1)})).length<e.length&&(Array.prototype.splice.apply(e,[0,e.length].concat(r)),(e=t.filter(function(e){return!(o.includes(e.source)||o.includes(e.target))})).length<t.length&&Array.prototype.splice.apply(t,[0,t.length].concat(e))))},e.adjustPositions=function(e,t,i,n){var o,r,s,a,l,c=0,u=0;u=n?(n=function(e){var t=e.filter(function(e){return d.NODE_TYPE_START==e.getType()});0==t.length&&(t=e);return 1<t.length?t.reduce(function(e,t){return e.getX()==t.getX()?e.getY()<t.getY()?e:t:e.getX()<t.getX()?e:t}):t[0]}(e),c=n.getX(),n.getY()):(l=!(a=s=r=o=0),e.forEach(function(e){l?(o=r=e.getX(),s=a=e.getY(),l=!1):(o=Math.min(o,e.getX()),r=Math.max(r,e.getX()),s=Math.min(s,e.getY()),a=Math.max(a,e.getY()))}),c=Math.round((o+r)/2),Math.round((s+a)/2)),e.forEach(function(e){e.setCoordinates(t+e.getX()-c,i+e.getY()-u)})},AGN.Lib.WM.Snippets=e}(),!function(){var a=AGN.Lib.WM.Definitions,l=AGN.Lib.WM.Node,e=".js-draggable-button";function t(r){this.enabled=!!r.enabled,this.$buttons=$(e);var s=this;this.$buttons.each(function(){var e=$(this),t=e.data("type"),o=[];e.draggable({revert:!0,revertDuration:0,zIndex:a.Z_INDEX_DRAGGABLE_BUTTON,disabled:!s.enabled,cursorAt:function(){var e=this.helper[0].getBoundingClientRect();return[e.width/2-1,e.height/2]},appendTo:"#canvas",helper:function(){return l.createDraggable$(t)},start:function(){o=r.getOccupiesAreas.call(s),r.onStart.call(s)},stop:function(){r.onStop.call(s)},drag:function(e,t){var i,n=r.getZoom.call(s);t.position.left=Math.round(t.position.left/n/a.CANVAS_GRID_SIZE)*a.CANVAS_GRID_SIZE,t.position.top=Math.round(t.position.top/n/a.CANVAS_GRID_SIZE)*a.CANVAS_GRID_SIZE,t.helper.toggleClass("js-collision-detected",(n=o,i=l.getCollisionBox(t.helper),n.some(function(e){return l.detectBoxCollision(i,e)})))}}).on("dblclick",function(){s.enabled&&r.onDrop.call(s,t)})}),$("#viewPort").droppable({accept:e,tolerance:"fit",drop:function(e,t){var i,n,o;t.helper.hasClass("js-collision-detected")||(i=r.getZoom.call(s),o=$("#canvas").offset(),n=Math.round((t.offset.left-o.left)/i),o=Math.round((t.offset.top-o.top)/i),r.onDrop.call(s,t.helper.data("type"),{x:Math.round(n/a.CANVAS_GRID_SIZE),y:Math.round(o/a.CANVAS_GRID_SIZE)}))}})}t.prototype.setEnabled=function(e){this.enabled=!!e,this.$buttons.draggable("option","disabled",!e)},AGN.Lib.WM.DraggableButtons=t}(),!function(){var s=AGN.Lib.WM.Definitions,r=AGN.Lib.WM.Vertex,n=AGN.Lib.WM.VertexGroup;function a(e,t){this.layers=e,this.height=t}a.fromVertexGroup=function(e){for(var t=[],i={},n=r.filterUnvisited(e.getStartingVertices(),i),o=0;n.length;)o=Math.max(o,n.length),t.push(n),n=_.flatMap(n,function(e){return r.filterUnvisited(e.rightSiblingsOrdered(),i)});return new a(t,o)},a.prototype.align=function(n,o){var r=null;return this.layers.forEach(function(e){var t,i=Math.round(s.AUTO_ALIGN_STEP_Y*(o-e.length)/2);r&&1<(t=Math.abs(r.length-e.length))&&(n+=Math.round(s.AUTO_ALIGN_EXTRA_STEP_X*t)),e.forEach(function(e){e.node.setCoordinates(n,i),i+=s.AUTO_ALIGN_STEP_Y}),n+=s.AUTO_ALIGN_STEP_X,r=e}),n},AGN.Lib.WM.AutoAlignment={align:function(e){var e=n.detectGroups(e).map(function(e){return a.fromVertexGroup(e)}),t=0,i=(e.forEach(function(e){t=Math.max(t,e.height)}),1);e.forEach(function(e){i=e.align(i,t),i+=s.AUTO_ALIGN_STEP_BETWEEN_GROUPS})}}}(),!function(){var i=AGN.Lib.WM.Definitions,n=AGN.Lib.WM.Node;function o(e){this.maxLength=e,this._undoStack=[],this._transactionStack=[],this._transaction=!1}function e(e,t){this.editor=e,this.undoOperations={nodeAdded:this.undoAddNode,nodeDeleted:this.undoDeleteNode,nodeMoved:this.undoMoveNode,nodeDataUpdated:this.undoSaveNodeData,connectionCreated:this.undoCreateConnection,connectionDeleted:this.undoDeleteConnection},this.manualStart=!1,this.undoStack=new o(i.MAX_UNDO_STEP),this.onChange=_.isFunction(t.onChange)?t.onChange:_.noop}o.prototype.add=function(e){for(;this._undoStack.length>=this.maxLength;)this._undoStack.shift();this._undoStack.push(e)},o.prototype.pop=function(){return this._undoStack.pop()},o.prototype.addOperation=function(e){this._transactionStack.push(e)},o.prototype.isEmpty=function(){return _.isEmpty(this._undoStack)},o.prototype.startTransaction=function(){this._transaction=!0},o.prototype.endTransaction=function(){this.flush(),this._transaction=!1},o.prototype.flush=function(){_.isEmpty(this._transactionStack)||this.add(this._transactionStack),this._transactionStack=[]},o.prototype.isTransactionStarted=function(){return!0===this._transaction},e.prototype.undoAddNode=function(e){this.editor.deleteNode(e)},e.prototype.undoDeleteNode=function(e){e instanceof n?this.editor.add(n.restore(e)):this.editor.add(n.get(e))},e.prototype.undoCreateConnection=function(e){this.editor.deleteConnectionBetween(e.source,e.target)},e.prototype.undoDeleteConnection=function(e){this.editor.connect(n.get(e.source),n.get(e.target))},e.prototype.undoMoveNode=function(e){var i=this.editor.getZoom(),t=this;e.forEach(function(e){e.node.setTitleEnabled(!1)}),this.editor.batch(function(){e.forEach(function(e){var t=e.coordinates,e=e.node;e.setCoordinates(t.x,t.y),e.updateCoordinates(i)}),t.editor.updateOverlays(),t.editor.positionTitles(),t.editor.updateMinimap()}),e.forEach(function(e){e.node.setTitleEnabled(!0)})},e.prototype.undoSaveNodeData=function(e,t){t=t instanceof n?t:n.get(t),(e=e instanceof n?e:n.get(e)).setTitle(t.getTitle()),e.setOverlayTitle(t.getOverlayTitle()),e.setOverlayImage(t.getOverlayImage()),e.setComment(t.getComment()),e.setFilled(t.isFilled()),e.setDependent(t.isDependent()),e.setInRecipientsChain(t.isInRecipientsChain()),e.setData(t.getData()),this.editor.positionTitles()},e.prototype.canUndo=function(){return!this.undoStack.isEmpty()},e.prototype.startTransaction=function(){this.manualStart=!0,this.undoStack.startTransaction()},e.prototype.endTransaction=function(){this.undoStack.endTransaction(),this.onChange(),this.manualStart=!1},e.prototype.transaction=function(e){_.isFunction(e)&&(this.undoStack.isTransactionStarted()||(this.manualStart=!1,this.undoStack.startTransaction()),e.call(),this.manualStart||this.undoStack.endTransaction(),this.onChange())},e.prototype.operation=function(e){var t;this.undoStack.isTransactionStarted()&&((t=[].slice.call(arguments)).shift(),this.undoStack.addOperation({operation:e,args:t}))},e.prototype.undo=function(){var e,t,i;this.canUndo()&&(e=this.undoStack.pop(),t=function(e,t){var e=e.operation,t=t.operation,i=["nodeAdded","nodeDeleted","nodeDataUpdated"],n=["connectionCreated","connectionDeleted"];return n.includes(e)&&i.includes(t)?1:i.includes(e)&&n.includes(t)?-1:0},(i=this).editor.batch(function(){e.sort(t).forEach(function(e){var t=i.undoOperations[e.operation];t&&t.apply(i,e.args)})}),this.onChange())},AGN.Lib.WM.UndoManager=e}(),!function(){var l=AGN.Lib.WM.Definitions,i=AGN.Lib.Select;AGN.Lib.WM.EditorsHelper=new function(){var a={};this.editors=[],this.curEditor,this.curEditingNode,this.getCurrentNode=function(){return this.curEditingNode},this.getCurrentNodeId=function(){return this.curEditingNode.getId()},this.getCurrentNodeAnchorsInUse=function(){return a.getNodeAnchorsInUse?a.getNodeAnchorsInUse(this.curEditingNode):{}},this.getCurrentEditor=function(){return this.curEditor},this.assignOptions=function(e){$.extend(a,e)},this.registerEditor=function(e,t){return this.editors[e]=t},this.showEditDialog=function(n,o){var r=this,s=n.getType();this.curEditingNode=n,this.curEditor=this.editors[s],this.curEditor.fillEditor(n),this.getEditorPanel(s).dialog({open:function(e){var t=$(this),i=t.parent().find(".ui-dialog-title");i.empty(),i.append($('<span class="dialog-title-image">'+r.curEditor.getTitle()+"</span>")),i.find(".dialog-title-image").attr("data-type",s),s==l.NODE_TYPE_RECIPIENT&&t.parent().find(".recipient-editor-select").prop("disabled",n.isDependent()||n.isInRecipientsChain()),$(e.target).find(".js-datepicker").each(function(e,t){t=$(t).pickadate("picker");t.set("select",t.get("select"))}),o&&((i=$(e.target)).find(".disable-for-active").each(function(e,t){$(t).attr("disabled",!0)}),i.find(".hide-for-active").each(function(e,t){$(t).hide()}),i.find(':input:enabled[type!="hidden"]').not(":button, .select2, .js-select, .js-datepicker").each(function(e,t){"radio"==$(t).prop("type")||"checkbox"==$(t).prop("type")?$(t).attr("disabled",!0):$(t).attr("readonly",!0)}),i.find(":input:enabled.select2, :input:enabled.js-select, .select2-container").not(".disabled, :disabled").each(function(e,t){"text"==$(t).prop("type")||$(t).is("input, select")?$(t).attr("disabled",!0):$(t).select2("disable")}),i.find(".js-datepicker").each(function(e,t){$(t).attr("disabled",!0)}))},close:function(){r.curEditor.closeEditor&&r.curEditor.closeEditor()},width:650,height:"auto",minHeight:"auto",modal:!0,resizable:!1})},this.showIconCommentDialog=function(e){var t=this;this.curEditingNode=e,this.curEditor=this.editors["icon-comment"],this.curEditor.fillEditor(e),this.getEditorPanel("icon-comment").dialog({open:function(){t.getEditorPanel("icon-comment").parent().find(".ui-dialog-titlebar").hide()},width:300,height:"auto",minHeight:"auto",modal:!0,resizable:!1,fluid:!0,position:{my:"left top",at:"left bottom",of:e.get$()}})},this.saveIconComment=function(t){var i=this;a.getUndoManager().transaction(function(){var e=i.curEditingNode;a.getUndoManager().operation("nodeDataUpdated",e,_.cloneDeep(e)),e.setComment(t),a.onChange(e)})},this.saveCurrentEditorWithUndo=function(e,t){var i=this;_.defer(function(){a.getUndoManager().startTransaction(),i.saveCurrentEditor(e,t,function(){a.getUndoManager().endTransaction()})})},this.saveCurrentEditor=function(t,i,n){n=_.isFunction(n)?n:_.noop;var o,r=this,e=this.curEditingNode,s=(a.getUndoManager().operation("nodeDataUpdated",e,_.cloneDeep(e),r.curEditor),r.curEditor.saveEditor());t||r.cancelEditor(),r.isNodeIsMailing(e)?(o=s.mailingId,i&&i.checkDifferentMailingLists(o,function(e){r.mailingSpecificSave(t,e,s,i),n()},function(e){r.curEditor.storedMailingContent=e,r.curEditor.storedMailingId=o,r.curEditor.storedLeaveOpen=t,r.curEditor.storedEditorData=s,i.initOneMailinglistWarningDialog(i),n()})):($.extend(e.getData(),s),e.isFilled()||e.setFilled(!0),e.isFilled()&&_.isFunction(r.curEditor.isSetFilledAllowed)&&(r.curEditor.isSetFilledAllowed()||e.setFilled(!1)),a.supplement&&a.supplement(e),a.onChange&&a.onChange(e),n())},this.resave=function(e){var t=this.curEditingNode,i=this.curEditor;try{this.curEditingNode=e,this.curEditor=this.editors[e.getType()],this.curEditor.fillEditor(e),this.saveCurrentEditor()}finally{this.curEditingNode=t,this.curEditor=i}},this.modify=function(e,t){a.getUndoManager().operation("nodeDataUpdated",e,_.cloneDeep(e)),t(e),a.supplement&&a.supplement(e),a.onChange&&a.onChange(e)},this.isNodeIsMailing=function(e){return l.NODE_TYPES_MAILING.includes(e.getType())},this.mailingSpecificSave=function(e,t,i,n){var o=this.curEditingNode,r=o.getData();$.extend(r,i),o.isFilled()&&_.isFunction(this.curEditor.isSetFilledAllowed)&&(this.curEditor.isSetFilledAllowed()||o.setFilled(!1)),a.supplement&&a.supplement(o,n,t),a.onChange&&a.onChange(o)},this.mailingSpecificSaveAfterMailinglistCheckModal=function(e){this.curEditor.storedMailingContent.mailinglistId=e.configuredMailingData.mailinglistId,this.mailingSpecificSave(this.curEditor.storedLeaveOpen,this.curEditor.storedMailingContent,this.curEditor.storedEditorData,e)},this.cancelEditor=function(){var e=this.curEditingNode.getType(),e=this.getEditorPanel(e);e.dialog("instance")&&e.dialog("close")},this.getEditorPanel=function(e){return $("#"+("stop"==e?"start":e)+"-editor")},this.formToObject=function(e){var t=$('form[name="'+e+'"]').serializeArray(),n={};return $.each(t,function(){var e,t,i;-1!=this.name.indexOf("[")?(e=this.name.substring(0,this.name.indexOf("[")),null==n[e]&&(n[e]=[]),t=this.name.substring(this.name.indexOf("[")+1,this.name.indexOf("]")),null==n[e][t]&&(n[e][t]={}),-1!=this.name.indexOf(".")?(i=this.name.substring(this.name.indexOf(".")+1),n[e][t][i]=this.value):n[e][t]=this.value):n[this.name]=this.value||""}),$('form[name="'+e+'"] [type="checkbox"]').each(function(){n[this.name]=$(this).prop("checked")}),n},this.fillFormFromObject=function(e,t,i,n){if("string"==typeof t)this.fillFormFromObjectItem(e,i,i,t||n);else for(var o in t){var r;t.hasOwnProperty(o)&&(!(r=t[o])&&n&&n[o]&&(r=n[o]),this.fillFormFromObjectItem(e,i,o,r))}},this.fillFormFromObjectItem=function(e,t,i,n){if("[object Array]"===Object.prototype.toString.call(n))for(var o=0;o<n.length;o++)this.fillFormFromObject(e,n[o],i+"["+o+"].");else{var r=$('form[name="'+e+'"] [name="'+t+i+'"]');switch(r.attr("type")){case"checkbox":r.prop("checked",Boolean(n));break;case"radio":r.filter('[value="'+n+'"]').prop("checked",!0);break;default:"SELECT"===r.prop("tagName")?(r.val(n),this.initSelectWithValueOrChooseFirst(r,n)):r.val(n)}}},this.processForward=function(e,t,i,n){var o=[],t=(o.push("nodeId="+this.curEditingNode.getId()),o.push("elementId="+encodeURIComponent(t)),n&&o.push(n),{forwardName:e,forwardParams:o.join(";")});this.curEditor.safeToSave&&this.saveCurrentEditor(),i(!1,t)},this.getFirstOptionValue=function(e){return i.get(e).getFirstValue()},this.resetSelect=function(e){i.get(e).clear()},this.initSelectWithFirstValue=function(e){i.get(e).selectFirstValue()},this.initSelectWithValueOrChooseFirst=function(e,t){i.get(e).selectValueOrSelectFirst(t)},this.getNodesByTypes=function(e){return a.getNodesByTypes?a.getNodesByTypes(e):[]},this.getNodesByType=function(e){return this.getNodesByTypes([e])},this.getNodesByIncomingConnections=function(e){return a.getNodesByIncomingConnections?a.getNodesByIncomingConnections(e):[]},this.getNodesByOutgoingConnections=function(e){return a.getNodesByOutgoingConnections?a.getNodesByOutgoingConnections(e):[]},this.getFirstIncomingChain=function(){return this.curEditingNode&&a.getFirstIncomingChain?a.getFirstIncomingChain(this.curEditingNode):[]},this.forEachPreviousNode=function(t){var i=this;return this.curEditingNode&&a.forEachPreviousNode?a.forEachPreviousNode(this.curEditingNode,function(e){return t.call(i,e)}):[]},this.deleteNode=function(e){a.deleteNodeById&&a.deleteNodeById(e)},this.openNode=function(e,t){a.editNode&&a.editNode(e,t)}}}(),!function(){var y=AGN.Lib.WM.Definitions,b=AGN.Lib.WM.Node,w=AGN.Lib.WM.EditorsHelper,C=AGN.Lib.WM.Dialogs;AGN.Lib.WM.MailingEditorHelper=function(e,o){this.MAILING_TYPE_ACTIONBASED=1,this.MAILING_TYPE_DATEBASED=2,this.MAILING_TYPE_FOLLOWUP=3,this.node={},this.mailingsStatus="all",this.defaultMailingsSort=e.defaultMailingsSort,this.defaultMailingsOrder=e.defaultMailingsOrder,this.mailingsSort=this.defaultMailingsSort,this.mailingsOrder=this.defaultMailingsOrder,this.formNameJId='form[name="'+e.form+'"]',this.containerId=e.container,this.mailingType=e.mailingType,this.mailingTypesForLoading=e.mailingTypesForLoading,this.statusName=e.mailingStatus,this.selectName=e.selectName,this.selectNameJId="select[name="+e.selectName+"]",this.mailingId=0,this.showCreateEditLinks=e.showCreateEditLinks,this.$dropdown=null,e.$dropdown&&(this.$dropdown=e.$dropdown),this.isChangeDecisionOptions=e.isFollowUpBaseMailing,this.followUpContainer=e.followUpContainer,this.advertisingAdditionalOptions=e.advertisingAdditionalOptions,this.advertisingUrl=e.advertisingUrl,this.nodesChain=[],this.mailingData={},this.configuredMailingData=null;var l=this,i=(this.fillEditorBase=function(e){this.node=e,this.mailingsStatus=$(this.formNameJId).find("input[checked=checked]").val()||"all",this.mailingsSort=this.defaultMailingsSort,this.mailingsOrder=this.defaultMailingsOrder,this.cleanOptions(),this.hideSendSettings(),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.cleanOptions=function(){this.setDefaultSortOptions(),$(this.containerId+" #"+this.statusName+"_all").attr("checked","checked"),this.activateInputs(),this.setSelectMailingOptions(this.node.data[this.selectName]),this.getMailingsByWorkStatus(this.mailingsStatus,this.mailingsSort,this.mailingsOrder,this.node.data.mailingId)},this.setDefaultSortOptions=function(){this.mailingsSort=this.defaultMailingsSort,this.mailingsOrder=this.defaultMailingsOrder,$(this.containerId+" .arrowUp").hide(),$(this.containerId+" .arrowDown").hide(),$(this.containerId+" #shortname_sort").attr("press",1),$(this.containerId+" #change_date_sort").attr("press",2),(this.mailingType==this.MAILING_TYPE_ACTIONBASED||this.mailingType==this.MAILING_TYPE_DATEBASED?$(this.containerId+" #shortname_sort .arrowUp"):$(this.containerId+" #change_date_sort .arrowDown")).show()},this.onMailingsStatusChange=function(e){this.setSelectMailingOptions(0),this.getMailingsByWorkStatus(e,this.mailingsSort,this.mailingsOrder),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.onMailingSelectChange=function(e){this.setSelectMailingOptions(e),this.changeDecisionOptionsSet($(this.containerId),this.isChangeDecisionOptions)},this.changeDecisionOptionsSet=function(e,t){var i,n;t&&(t=this.mailingId,i=$(e.find(this.followUpContainer)),n=this.advertisingAdditionalOptions,e=this.advertisingUrl,$.ajax({action:"POST",url:e,data:{mailingId:t},success:function(e){$(i.find(".advertisingOption")).remove(),e.isAdvertisingContentType&&(e=AGN.Lib.Template.text("followupAdvertisingOptions",{items:n}),i.append(e))}}))},this.onMailingSortClick=function(e,t){$(this.containerId+" .arrowUp").hide(),$(this.containerId+" .arrowDown").hide();var i=$(this.containerId+" .sort"),e=this.containerId+" #"+e+"_sort",n=$(e),o=$(e+" .arrowUp"),r=$(e+" .arrowDown"),e=n.attr("press"),s=$(this.formNameJId+" "+this.selectNameJId).val();if(e)switch(e){case"1":n.attr("press",2),r.show(),this.mailingsOrder="DESC";break;case"2":n.attr("press",1),o.show(),this.mailingsOrder="ASC"}else i.attr("press",2),n.attr("press",2),o.show(),this.mailingsOrder="ASC";this.getMailingsByWorkStatus(this.mailingsStatus,t,this.mailingsOrder,s)},this.setMailingId=function(e){this.mailingId=e,this.$dropdown&&(0<this.mailingId?this.$dropdown.show():this.$dropdown.hide())},this.setSelectMailingOptions=function(e){this.setMailingId(e),this.showCreateEditLinks&&this.setMailingLinks(e)},this.setMailingLinks=function(e){var i="",i="0"!=e?'<span style="font-weight: bold;">'+t("workflow.mailing.tip")+': &nbsp;</span><a href="#" data-action="mailing-editor-edit">'+t("workflow.mailing.edit_mailing_link")+"</a> ":'<a href="#" class="setting-mailing-left" data-action="mailing-editor-new"> '+t("workflow.mailing.new")+"</a>",e=$(this.containerId+" #mailing_create_edit_link");e.html(""),e.append(i)},this.showSecurityQuestion=function(){var e;return this.setSecurityQuestion(),this.setIsUsedInCMAttr(),!this.isSentMailing(this.mailingIsSent)&&!this.mailingIsUsedInCM||(e=this.getSelectedMailingOption(),$(this.containerId+"-security-dialog").dialog({title:'<span class="dialog-fat-title">'+e.html()+"</span>",dialogClass:"no-close",open:function(e,t){},width:650,modal:!0,resizable:!1}),!1)},this.isSentMailing=function(e){return"mailing.status.sent"==e||"mailing.status.scheduled"==e||"mailing.status.norecipients"==e},this.cancelSecurityDialog=function(){$(this.containerId+"-security-dialog").dialog("close")},this.getMailingsByWorkStatus=function(i,n,o,r){var s=this,a=$(this.formNameJId+" "+this.selectNameJId);a.attr("readonly","readonly"),$.ajax({type:"POST",url:AGN.url("/workflow/getMailingsByWorkStatus.action"),data:{mailingTypes:this.mailingTypesForLoading.join(","),status:i,sort:n,order:o},success:function(e){a.empty(),a.append($("<option></option>",{value:0,text:t("workflow.defaults.no_mailing")})),e.forEach(function(e){var t=$("<option></option>",{value:e.MAILING_ID,text:e.SHORTNAME,selected:r==e.MAILING_ID});s.isSentMailing(e.WORK_STATUS)&&t.css("color","#808080"),t.attr({status:e.WORK_STATUS,senddate:e.SENDDATE}),t.data({status:e.WORK_STATUS,"send-date":e.SENDDATE,"dependent-campaigns":e.USEDINWORKFLOWS||""}),a.append(t)}),a.removeAttr("readonly"),s.mailingsStatus=i,s.mailingsSort=n,s.mailingsOrder=o,a.val(s.mailingId),w.initSelectWithValueOrChooseFirst(a,s.mailingId)}})},this.disableInputs=function(){$(this.containerId+' [name="'+this.statusName+'"]').attr("disabled","disabled")},this.activateInputs=function(){$(this.containerId+' [name="'+this.statusName+'"]').removeAttr("disabled")},this.setNodeFields=function(){this.node.setFilled(0<parseInt(this.mailingId,10))},this.setSecurityQuestion=function(){var e=this.getSelectedMailingOption();this.mailingIsSent="",0<parseInt(this.mailingId,10)&&(this.mailingIsSent=e.data("status"))},this.setIsUsedInCMAttr=function(){var e=this.getSelectedMailingOption(),t=e.data("dependent-campaigns"),e=e.val();this.mailingIsUsedInCM=!1,0<parseInt(this.mailingId,10)&&e==this.mailingId&&t&&(e=y.workflowId||0,0<(t=t.split(",")).length&&(this.mailingIsUsedInCM=!(0<e)||t.indexOf(e.toString())<0))},this.getSelectedMailingOption=function(){return $(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")},this.getSelectedDecisionOption=function(){var e="decisionCriterion",t=$(this.formNameJId+' select[name="'+e+'"]').val();return $(this.formNameJId+' select[name="'+e+'"] option[value='+t+"]")},this.createNewMailing=function(e){n({node:this.node,successCallback:i,forwardName:e,mailingEditorBase:this})},function(e,i,n){e.hasMailingList?((e=[]).push("mailingType="+n.mailingType),n.mailingType==n.MAILING_TYPE_FOLLOWUP&&(e.push("workflowFollowUpParentMailing="+n.node.data.baseMailingId),e.push("workflowFollowUpDecisionCriterion="+n.node.data.decisionCriterion)),w.processForward(i,n.formNameJId+" "+n.selectNameJId,o,e.join(";"))):($(n.containerId+" .editor-error-messages").html(t("error.workflow.notAddedMailingList")),$(n.containerId+" .editor-error-messages").css("display","block"))}),s=(this.processCopyAndEditMailingForward=function(e,t,i,n){$("#forwardTargetItemId").val(e);e=[];this.mailingType==this.MAILING_TYPE_FOLLOWUP&&(e.push("workflowFollowUpParentMailing="+this.node.data.baseMailingId),e.push("workflowFollowUpDecisionCriterion="+this.node.data.decisionCriterion)),0<e.length?w.processForward(t,i+" "+n,o,e.join(";")):w.processForward(t,i+" "+n,o)},this.editMailing=function(e){this.processCopyAndEditMailingForward(this.mailingId,e,this.formNameJId,this.selectNameJId)},this.copyMailing=function(e){this.processCopyAndEditMailingForward(this.mailingId,e,this.formNameJId,this.selectNameJId)},this.trySupplementChain=function(e,t,i){0<e.length&&(this.configuredMailingData=s(e),this.nodesChain=e,this.mailingData=t,(e=c(l,!0)).length?C.confirmMailingDataTransfer(e).done(function(e){l.transferMailingData(e),l.supplementChain(i)}).fail(function(){l.transferMailingData(),l.supplementChain(i)}):l.supplementChain(i))},this.checkDifferentMailingLists=function(e,n,o){var r=this;a(e).then(function(e){var t=w.getFirstIncomingChain(),i=(r.configuredMailingData=s(t),r.nodesChain=t,r.mailingData=e,0),t=(t.forEach(function(e){e.getType()==y.NODE_TYPE_MAILING&&i++}),r.configuredMailingData.mailinglistId);(1<i&&0!=t&&t!=e.mailinglistId?o:n)(e)})},function(e){for(var t={parameterValue:0,campaignId:0,mailinglistId:0,targets:[],date:null},i=e.length-1;0<=i;i--){var n=e[i],o=n.getData();switch(n.getType()){case y.NODE_TYPE_PARAMETER:t.parameterValue=o.value;break;case y.NODE_TYPE_ARCHIVE:t.campaignId=o.campaignId;break;case y.NODE_TYPE_RECIPIENT:0==t.mailinglistId&&(t.mailinglistId=o.mailinglistId),null!==o.targets&&o.targets.forEach(function(e){t.targets.includes(e)||t.targets.push(parseInt(e))});break;case y.NODE_TYPE_START:o.date?(t.date=f(o.date),t.date.setHours(o.hour),t.date.setMinutes(o.minute)):t.date=null;break;case y.NODE_TYPE_DEADLINE:o.deadlineType==y.constants.deadlineTypeFixedDeadline?o.date?(t.date=f(o.date),t.date.setHours(o.hour),t.date.setMinutes(o.minute)):t.date=null:o.deadlineType==y.constants.deadlineTypeDelay&&null!=t.date&&(o.timeUnit==y.constants.deadlineTimeUnitMinute?t.date.setMinutes(t.date.getMinutes()+parseInt(o.delayValue)):o.timeUnit==y.constants.deadlineTimeUnitHour?t.date.setHours(t.date.getHours()+parseInt(o.delayValue)):o.timeUnit==y.constants.deadlineTimeUnitDay&&(t.date.setDate(t.date.getDate()+parseInt(o.delayValue)),!o.useTime&&"true"!=o.useTime||(t.date.setMinutes(t.date.getMinutes()+parseInt(o.minute)),t.date.setHours(t.date.getHours()+parseInt(o.hour)))))}}return t}),c=function(e,t){var i=e.configuredMailingData,n=e.mailingData,o=[],r=[],s=[],a=(0==n.mailinglistId?s.push(y.MAILING_PARAM_MAILING_LIST):0==i.mailinglistId?o.push(y.MAILING_PARAM_MAILING_LIST):i.mailinglistId!=n.mailinglistId&&(t?r:o).push(y.MAILING_PARAM_MAILING_LIST),i.targets),l=n.targetGroupIds,a=(null==l||0==l.length?s.push(y.MAILING_PARAM_TARGET_GROUPS):null==a||0==a.length?o.push(y.MAILING_PARAM_TARGET_GROUPS):g(i,n)||(t?r:o).push(y.MAILING_PARAM_TARGET_GROUPS),y.constants.isAltgExtended&&(l=i.altgs,null==(a=n.altgIds)||0==a.length?s.push(y.MAILING_PARAM_ALTGS):null==l||0==l.length?o.push(y.MAILING_PARAM_ALTGS):m(i,n)||(t?r:o).push(y.MAILING_PARAM_TARGET_GROUPS)),e.getParameterValue(n.splitBase,n.splitPart)),l=(null==a?s.push(y.MAILING_PARAM_LIST_SPLIT):0==i.parameterValue?o.push(y.MAILING_PARAM_LIST_SPLIT):i.parameterValue!=a&&(t?r:o).push(y.MAILING_PARAM_LIST_SPLIT),0==n.campaignId?s.push(y.MAILING_PARAM_ARCHIVE):0==i.campaignId?o.push(y.MAILING_PARAM_ARCHIVE):i.campaignId!=n.campaignId&&(t?r:o).push(y.MAILING_PARAM_ARCHIVE),i.date),a=p(n),i=h(n);return null==a&&null==i?s.push(y.MAILING_PARAM_PLANNED_DATE):null==l?null!=a?o.push(y.MAILING_PARAM_PLANNED_DATE):o.push(y.MAILING_PARAM_SEND_DATE):(f(a)>f(l)?(t?r:o).push(y.MAILING_PARAM_PLANNED_DATE):a&&f(a)<f(l)&&s.push(y.MAILING_PARAM_PLANNED_DATE),l<i?(t?r:o).push(y.MAILING_PARAM_SEND_DATE):i&&i<l&&s.push(y.MAILING_PARAM_SEND_DATE)),u(e,s),t?r:o},u=function(e,t){for(var i=e.configuredMailingData,n=e.mailingData,o=0;o<t.length;o++)switch(t[o]){case y.MAILING_PARAM_MAILING_LIST:n.mailinglistId=i.mailinglistId;break;case y.MAILING_PARAM_TARGET_GROUPS:n.targetGroupIds=i.targets;break;case y.MAILING_PARAM_ALTGS:n.altgIds=i.altgs;break;case y.MAILING_PARAM_ARCHIVE:n.campaignId=i.campaignId;break;case y.MAILING_PARAM_LIST_SPLIT:n.splitBase="",n.splitPart="";break;case y.MAILING_PARAM_PLANNED_DATE:var r=f(i.date);n.planDate=r?r.getTime():0;break;case y.MAILING_PARAM_SEND_DATE:n.sendDate=f(i.date),i.date&&(n.sendHour=i.date.getHours(),n.sendMinute=i.date.getMinutes())}},a=function(e){return new Promise(function(t){_.defer(function(){$.ajax({type:"POST",url:AGN.url("/workflow/getMailingContent.action"),data:{mailingId:e},success:function(e){t(e)}})})})},n=function(e){var t,i=e.node||w.curEditingNode,n=e.successCallback,o=e.forwardName;n({hasMailingList:(t=0,w.curEditingNode=i,w.forEachPreviousNode(function(e){if(e.type===y.NODE_TYPE_RECIPIENT)return t=e.data.mailinglistId,!1}),0<t)},o,e.mailingEditorBase)},r=(this.transferMailingData=function(e){u(l,e||c(l,!0))},this.supplementChain=function(e){for(var n=c(this,!1),o=this.mailingData,r=this.configuredMailingData,t=this.nodesChain,i=!1,s=!1,a=1;a<t.length;a++)if(y.NODE_TYPES_MAILING.includes(t[a].getType())){t.splice(a+1),s=!0;break}s||(n.includes(y.MAILING_PARAM_PLANNED_DATE)||n.includes(y.MAILING_PARAM_SEND_DATE))&&(i=y.NODE_TYPE_START==t[t.length-1].getType()||0==w.getNodesByType(y.NODE_TYPE_START).length&&o.mailingType!=this.MAILING_TYPE_ACTIONBASED&&o.mailingType!=this.MAILING_TYPE_DATEBASED||i)&&this.supplementSingleNode(y.NODE_TYPE_START,function(e){var t,i=e.getData();n.includes(y.MAILING_PARAM_PLANNED_DATE)?(i.date=p(o),(t=r.date)&&(i.hour=t.getHours(),i.minute=t.getMinutes()),w.resave(e)):n.includes(y.MAILING_PARAM_SEND_DATE)&&(i.date=h(o),i.hour=i.date.getHours(),i.minute=i.date.getMinutes())}),n.includes(y.MAILING_PARAM_LIST_SPLIT)&&this.supplementSingleNode(y.NODE_TYPE_PARAMETER,function(e){e.getData().value=l.getParameterValue(o.splitBase,o.splitPart)}),n.includes(y.MAILING_PARAM_ARCHIVE)&&this.supplementSingleNode(y.NODE_TYPE_ARCHIVE,function(e){e.getData().campaignId=o.campaignId}),(n.includes(y.MAILING_PARAM_MAILING_LIST)||n.includes(y.MAILING_PARAM_TARGET_GROUPS))&&this.supplementSingleNode(y.NODE_TYPE_RECIPIENT,function(e){var t=e.getData();n.includes(y.MAILING_PARAM_MAILING_LIST)&&(t.mailinglistId=o.mailinglistId,e.setDependent(!0)),n.includes(y.MAILING_PARAM_TARGET_GROUPS)&&(t.targets=o.targetGroupIds,y.constants.isAltgExtended?t.targetsOption="ONE_TARGET_REQUIRED":t.targetsOption=0<y.constants.accessLimitTargetId?"ALL_TARGETS_REQUIRED":"ONE_TARGET_REQUIRED"),y.constants.isAltgExtended&&n.includes(y.MAILING_PARAM_ALTGS)&&(t.altgs=o.altgIds)}),i||!n.includes(y.MAILING_PARAM_PLANNED_DATE)&&!n.includes(y.MAILING_PARAM_SEND_DATE)||this.supplementSingleNode(y.NODE_TYPE_DEADLINE,function(e){var t,e=e.getData();n.includes(y.MAILING_PARAM_PLANNED_DATE)?(e.date=p(o),(t=r.date)&&(e.date.setHours(t.getHours()),e.date.setMinutes(t.getMinutes()))):n.includes(y.MAILING_PARAM_SEND_DATE)&&(e.date=h(o)),e.deadlineType=y.constants.deadlineTypeFixedDeadline,e.hour=e.date.getHours(),e.minute=e.date.getMinutes()}),e(t)},this.supplementSingleNode=function(e,t){var i;switch(e){case y.NODE_TYPE_START:i=!1;break;case y.NODE_TYPE_PARAMETER:i=[];break;case y.NODE_TYPE_ARCHIVE:i=[y.NODE_TYPE_PARAMETER];break;case y.NODE_TYPE_RECIPIENT:i=[y.NODE_TYPE_PARAMETER,y.NODE_TYPE_ARCHIVE];break;case y.NODE_TYPE_DEADLINE:i=[y.NODE_TYPE_PARAMETER,y.NODE_TYPE_ARCHIVE,y.NODE_TYPE_RECIPIENT];break;default:return void console.error("Unexpected supplement node type: "+e)}r(e,t)||d(e,i,t)},function(e,t){for(var i=l.nodesChain,n=1;n<i.length;n++){var o=i[n];if(e==o.getType())return t(o),w.resave(o),!0}return!1}),d=function(e,t,i){var n=l.nodesChain,o=b.create(e);if(i(o),!1===t)n.push(o);else{for(var r=1;r<n.length;r++){var s=n[r];if(!t.includes(s.getType()))return void n.splice(r,0,o)}n.push(o)}},h=(this.closeOneMailinglistWarningDialog=function(){$(this.containerId+"-oneMailinglistWarning-dialog").dialog("close")},this.acceptOneMailinglistPerCampaign=function(){this.closeOneMailinglistWarningDialog(),w.mailingSpecificSaveAfterMailinglistCheckModal(l)},this.validateEditor=function(e){var i,n=$(this.containerId+" .editor-error-messages"),o=(n.html(""),n.css("display","none"),!1);$(this.containerId+" .delivery-settings").length&&(i=$(this.containerId+' [name="maxRecipients"]').val(),parseInt(i)!=i?(n.html(t("error.workflow.wrongMaxRecipientsFormat")),o=!0):parseInt(i)<0?(n.html(t("error.workflow.maxRecipientsLessThanZero")),o=!0):1e9<parseInt(i)&&(n.html(t("error.workflow.maxRecipientsTooBig")),o=!0)),$(this.formNameJId+" "+this.selectNameJId).val()<=0&&(""!=n.html()&&n.html(n.html()+"<br>"),n.html(n.html()+t("error.workflow.noMailing")),o=!0),o?n.css("display","block"):e?e():w.saveCurrentEditor()},this.toggleSendSettings=function(e){"none"==$("#sendSettings_"+e).css("display")?($("#sendSettingsToggle_"+e).removeClass("toggle_closed"),$("#sendSettingsToggle_"+e).addClass("toggle_open")):($("#sendSettingsToggle_"+e).removeClass("toggle_open"),$("#sendSettingsToggle_"+e).addClass("toggle_closed")),$("#sendSettings_"+e).toggle("blind",200)},this.hideSendSettings=function(){$(".wm-mailing-send-settings-link").removeClass("toggle_open"),$(".wm-mailing-send-settings-link").addClass("toggle_closed"),$(".wm-mailing-send-settings").css("display","none")},this.getParameterValue=function(e,t){if(4<e.length){for(var i=0;i<e.length/2;i++)if(i+1==t)return e.substring(2*i,2*(i+1))}else for(i=0;i<e.length/2;i++)if(e.substring(2*i,2*(i+1))==t)return e.substring(2*i,2*(i+1));return null},this.initOneMailinglistWarningDialog=function(e){$(e.containerId+"-oneMailinglistWarning-dialog").dialog({title:'<span class="dialog-fat-title">'+e.getSelectedMailingOption().html()+"</span>",dialogClass:"no-close",width:350,modal:!0,resizable:!1})},function(e){return null!=(t=e).sendDate&&null!=t.sendDate&&null!=t.sendHour&&null!=t.sendMinute?new Date(e.sendDate+"T"+e.sendHour+":"+e.sendMinute+":00"):null;var t}),p=function(e){return 0<e.planDate?new Date(e.planDate):null},f=function(e){return null==e?null:new Date(e.getFullYear(),e.getMonth(),e.getDate())},g=function(e,t){var i=e.targets,n=t.targetGroupIds;if(null==i&&null==n)return!0;if(i.length!=n.length)return!1;for(var o=0;o<n.length;o++)if(!v(i,n[o]))return!1;return!0},m=function(e,t){var i=e.altgs,n=t.altgIds;if(null==i&&null==n)return!0;if(i.length!=n.length)return!1;for(var o=0;o<n.length;o++)if(!v(i,n[o]))return!1;return!0},v=function(e,t){return-1!=e.indexOf(t)}}}(),!function(){var s=AGN.Lib.WM.EditorsHelper;AGN.Lib.WM.MailingSelector=function(e,i,n,o){this.formNameJId='form[name="'+e+'"]',this.container=i,this.selectNameJId="select[name="+n+"]",this.defaultSortField="date",this.mailingId=0,this.noMailingOption=o,this.cleanOptions=function(e){null==e&&(e=0),$(this.container+" .sort").prop("press",e),this.onMailingSortClick(this.defaultSortField)},this.onMailingSelectChange=function(e){},this.onMailingSortClick=function(e){$(this.container+" .arrowUp").hide(),$(this.container+" .arrowDown").hide();var t=$(this.container+" .sort"),i=this.container+" #"+e+"_sort",n=$(i),o=$(i+" .arrowUp"),r=$(i+" .arrowDown"),i=parseInt(n.prop("press")),s="asc";switch(t.prop("press",0),i){case 0:n.prop("press",1),o.show(),s="asc";break;case 1:n.attr("press",2),r.show(),s="desc";break;case 2:n.prop("press",1),o.show(),s="asc"}this.getAllMailingSorted(e,s)},this.setMailingId=function(e){this.mailingId=e},this.getAllMailingSorted=function(e,i){var n=this,o=$(this.formNameJId+" "+this.selectNameJId),r=o.val();null!=r&&(n.mailingId=r),o.attr("readonly","readonly"),$.ajax({type:"POST",url:AGN.url("/workflow/getAllMailingSorted.action"),data:{sortField:e,sortDirection:i},success:function(e){o.html(""),n.noMailingOption&&o.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>");for(var i=0;i<e.length;i++)o.append('<option  value="'+e[i].mailingID+'">'+e[i].shortname+"</option>");o.removeAttr("readonly"),0==n.mailingId&&0==n.noMailingOption&&0<e.length?o.val(e[0].mailingID):o.val(n.mailingId),s.initSelectWithValueOrChooseFirst(o,o.val())}})},this.getSelectedMailingOption=function(){return $(this.formNameJId+" "+this.selectNameJId+" option[value="+this.mailingId+"]")}}}(),!function(){var v=AGN.Lib.WM.Definitions,a=AGN.Lib.WM.Node,i=AGN.Lib.WM.Vertex,o=AGN.Lib.WM.VertexGroup,r=AGN.Lib.WM.NodeTitleHelper,s=AGN.Lib.WM.Canvas,l=AGN.Lib.WM.ConnectionConstraints,c=AGN.Lib.WM.DraggableButtons,u=AGN.Lib.WM.AutoAlignment,d=AGN.Lib.WM.UndoManager,h=AGN.Lib.WM.EditorsHelper,p=AGN.Lib.WM.Dialogs,f=AGN.Lib.WM.Snippets,g=AGN.Lib.ContextMenu,m=AGN.Lib.Helpers,n=AGN.Lib.WM.Utils,y=function(){document.activeElement&&$(document.activeElement).is("input, textarea")&&document.activeElement.blur()},b=function(e,t){var i;t?(i=e.origin.getOverlay("label"))?(i.setLabel(t),i.show()):e.origin.addOverlay(["Label",{location:.5,id:"label",cssClass:"connection-label",label:t}]):e.origin.hideOverlay("label")},e=function(e){$("#deleteButton").toggleClass("disabled",!e),$("#deleteItem").prop("disabled",!e)},w=function(e){$("#undoButton").toggleClass("disabled",!e),$("#undoItem").prop("disabled",!e)},C=function(e){$("#toggle-statistic-btn .text").html(e?t("workflow.fade_out_statistics"):t("workflow.fade_in_statistics"))};function A(e,t,i){this.$viewport=$("#viewPort"),this.$container=$("#canvas"),this.$titlesContainer=this.$container.find("#icon-titles-container"),this.canvas=new s(this.$container),this.canvasZoomHandler=null,this.instance=jsPlumb.getInstance(A.defaults(this.$container)),this.editable=!!e,this.lastAllocatedId=0,this.drag=null,this.chainModeEnabled=!1,this.multiConnectionEnabled=!1,this.statisticEnabled=!1;var n=this;this.canvas.setOnZoom(function(e){n.instance.setZoom(e),n.canvasZoomHandler&&n.canvasZoomHandler.call(null,e)}),this.draggableButtons=new c({enabled:!!e,getZoom:function(){return n.getZoom()},getOccupiesAreas:function(){return n.getNodes$().get().map(function(e){return a.getCollisionBox($(e))})},onStart:function(){},onStop:function(){},onDrop:function(e,t){n.newNode(e,t)}}),this.$viewport.selectable({filter:".node",distance:10,disabled:!this.editable,start:function(){$("#selection-backdrop").show()},stop:function(){$("#selection-backdrop").hide()},selected:function(e,t){n.instance.addToDragSelection(t.selected),n.onSelectionChanged()},unselected:function(e,t){n.instance.removeFromDragSelection(t.unselected),n.onSelectionChanged()}}),this.$viewport.on("mousedown",function(e){(["canvas","viewPort","icon-titles-container"].includes(e.target.id)||$.contains(n.$titlesContainer[0],e.target))&&n.deselectAll(),y()}),this.instance.bind("connection",function(e){n.undoManager.operation("connectionCreated",e),n.updateOverlays(),n.positionTitles(),n.processRecipientsChains()}),this.instance.bind("connectionDetached",function(e){n.undoManager.operation("connectionDeleted",e),n.updateOverlays(),n.positionTitles(),n.processRecipientsChains()}),this.instance.bind("mousedown",function(e,t){n.editable&&t.button===v.MOUSE_BUTTON_MIDDLE&&_.defer(function(){n.undoManager.transaction(function(){n.deleteConnection(e)})}),y()}),this.instance.bind("beforeDrag",function(){n.undoManager.startTransaction()}),this.instance.bind("connectionDragStop",function(){n.undoManager.endTransaction()}),this.instance.bind("connectionDrag",function(e){n.deselectAll(),e.source&&(e=$(e.source),n.setNodeSelected(e,!0),n.isChainMode()&&a.setChainSource(e,!0))}),this.instance.bind("beforeDrop",function(e){var t=a.get(document.getElementById(e.sourceId)),e=a.get(document.getElementById(e.targetId)),t=n.connect(t,e,!0);return!!t||(!1===t&&workflowNotAllowedConnectionDialogHandler.showDialog(),!1)}),this.$footnotesContainer=$("#footnotes-container ol"),this.isFootnotesEnabled=i,this.undoManager=new d(this,{onChange:function(){w(this.canUndo()),n.processRecipientsChains()}}),h.assignOptions({getUndoManager:function(){return n.getUndoManager()},getNodesByTypes:function(e){return n.getNodesByTypes(e)},getNodesByIncomingConnections:function(e){return n.getNodeIncomingConnections(e).map(function(e){return e.source})},getNodesByOutgoingConnections:function(e){return n.getNodeOutgoingConnections(e).map(function(e){return e.target})},getFirstIncomingChain:function(e){return n.getFirstIncomingChain(e)},forEachPreviousNode:function(e,t){return n.forEachPreviousNode(e,t)},getNodeAnchorsInUse:function(e){return n.getAnchorsInUse(e)},onChange:function(e){n.updateNodeTitle(e,!0),n.updateFootnotes(),n.updateMinimap()},supplement:function(e){n.supplement.apply(n,arguments)},editNode:function(e,t){alert("Missing editorsHelper.editNode")},deleteNodeById:function(e){alert("Missing editorsHelper.deleteNodeById")}}),t&&g.create(A.contextMenuOptions(n))}A.defaults=function(e){return{Container:e,Anchor:[[0,.5,-1,0],[.5,0,0,-1],[1,.5,1,0],[.5,1,0,1]],DragOptions:{cursor:"pointer",zIndex:v.Z_INDEX_JSPLUMB_DRAG_OPTIONS},Endpoint:"Blank",Connector:["FixedBezierConnector"],PaintStyle:{stroke:v.CONNECTION_COLOR,strokeWidth:v.CONNECTION_THICKNESS,outlineStroke:v.CONNECTION_OUTLINE_COLOR,outlineWidth:v.CONNECTION_OUTLINE_WIDTH},HoverPaintStyle:{stroke:v.CONNECTION_HOVER_COLOR,strokeWidth:v.CONNECTION_THICKNESS,outlineStroke:v.CONNECTION_OUTLINE_COLOR,outlineWidth:v.CONNECTION_OUTLINE_WIDTH},ConnectionOverlays:[["Arrow",{id:"arrow",visible:!0,location:1,width:v.CONNECTION_ARROW_SIZE,length:v.CONNECTION_ARROW_SIZE}]]}},A.contextMenuOptions=function(i){return{".jtk-connector":{shown:function(){return i.editable},items:{delete:{name:t("workflow.defaults.delete"),icon:"delete",disabled:function(e){return!i.canDeleteConnection(i.getConnectionByConnector$(e))},clicked:function(t){i.undoManager.transaction(function(){var e=i.getConnectionByConnector$(t);i.deleteConnection(e.origin)})}}}},".node":{shown:function(){return!0},items:{connect:{name:t("workflow.connect"),icon:"connect",shown:function(){return i.editable&&1<i.getSelectionSize()},clicked:function(){i.undoManager.transaction(function(){2==i.getSelectionSize()&&i.multiConnectionEnabled?i.connectBetweenSelected():i.connectSelected()})}},disconnect:{name:t("workflow.disconnect"),icon:"disconnect",shown:function(){return i.editable&&1<i.getSelectionSize()},clicked:function(){i.undoManager.transaction(function(){i.disconnectSelected()})}},edit:{name:t("workflow.defaults.edit"),icon:"edit",shown:function(){return i.getSelectionSize()<=1},clicked:function(e){i.editIcon(a.get(e))},disabled:function(e){return!a.get(e).isEditable()}},delete:{name:t("workflow.defaults.delete"),icon:"delete",clicked:function(){i.undoManager.transaction(function(){i.deleteSelected()})},disabled:function(){return!i.editable}},comment:{name:t("workflow.defaults.comment"),icon:"comment",clicked:function(e){i.editIconComment(a.get(e))},disabled:function(){return!i.editable}}}}}},A.prototype.updateFootnotes=_.throttle(function(){var t,i;this.forEachNode(function(e){e.setFootnote(-1)}),this.$footnotesContainer.html(""),this.isFootnotesEnabled&&(i=1,(t=this).forEachNode(function(e){a.isCommented(e)&&(t.$footnotesContainer.append('<li id="#fn:'+i+'">'+e.getComment()+"</li>"),e.setFootnote(i),i++)}))},150),A.prototype.isActionBasedWorkflow=function(){return this.getNodes().some(function(e){return e.getType()===v.NODE_TYPE_ACTION_BASED_MAILING})},A.prototype.isDateBasedWorkflow=function(){return this.getNodes().some(function(e){return e.getType()===v.NODE_TYPE_DATE_BASED_MAILING})},A.prototype.isNormalWorkflow=function(){return!this.isActionBasedWorkflow()&&!this.isDateBasedWorkflow()},A.prototype.getNodes$=function(){return this.$container.find(".node")},A.prototype.getNodes=function(){return this.getNodes$().get().map(function(e){return a.get(e)})},A.prototype.getVertices=function(){return i.verticesFrom(this.getNodes(),this.instance.getAllConnections())},A.prototype.getNodesByTypes=function(t){return this.getNodes().filter(function(e){return t.includes(e.type)})},A.prototype.forEachNode$=function(e){var t=this.getNodes$(),i=this;t.each(function(){e.call(i,$(this))})},A.prototype.forEachNode=function(t){var i=this;this.forEachNode$(function(e){t.call(i,a.get(e))})},A.prototype.forEachPreviousNode=function(t,e){for(var i=this.getConnections(),n=i.filter(function(e){return e.target===t}).map(function(e){return e.source}),o={};n.length;){for(var r=0;r<n.length;r++){var s=n[r],a=s.getId();if(!1===e.call(this,s))return;o[a]=!0}n=i.filter(function(e){return!!n.includes(e.target)&&(e=e.source.getId(),!o[e]&&(o[e]=!0))}).map(function(e){return e.source})}},A.prototype.getNodeIncomingChains=function(t){var e=this.getVertices().find(function(e){return e.node==t});return e?i.getIncomingChains(e):[]},A.prototype.getNodeOutgoingChains=function(t){var e=this.getVertices().find(function(e){return e.node==t});return e?i.getOutgoingChains(e):[]},A.prototype.getFirstIncomingChain=function(e){e=this.getNodeIncomingChains(e);return e.length?e[0]:[]},A.prototype.getNodeIncomingConnections=function(t){return this.getConnections(function(e){return a.get(e.target)===t})},A.prototype.getNodeOutgoingConnections=function(t){return this.getConnections(function(e){return a.get(e.source)===t})},A.prototype.getNodeConnections=function(t){return this.getConnections(function(e){return a.get(e.source)===t||a.get(e.target)===t})},A.prototype.hasNodeIncomingConnections=function(t){return this.instance.getAllConnections().some(function(e){return a.get(e.target)===t})},A.prototype.hasNodeOutgoingConnections=function(t){return this.instance.getAllConnections().some(function(e){return a.get(e.source)===t})},A.prototype.hasConnection=function(t){return this.instance.getAllConnections().some(function(e){return t.call(null,{origin:e,source:a.get(e.source),target:a.get(e.target)})})},A.prototype.getConnections=function(e){var t=this.instance.getAllConnections();return(t=e?t.filter(e):t).map(function(e){return{origin:e,source:a.get(e.source),target:a.get(e.target)}})},A.prototype.getConnectionByConnector$=function(t){return this.getConnections(function(e){return e.canvas==t[0]})[0]},A.prototype.getConnectionBetween=function(t,i){return this.getConnections(function(e){return $(e.source).is(t)&&$(e.target).is(i)})[0]},A.prototype.recycle=function(){this.instance.reset(),this.$container.empty()},A.prototype.batch=function(){this.instance.batch.apply(this.instance,arguments)},A.prototype.newNode=function(e,t){var i=this;if(this.editable)if(a.isExpandableType(e))switch(e){case v.NODE_TYPE_SC_ABTEST:case v.NODE_TYPE_SC_BIRTHDAY:case v.NODE_TYPE_SC_DOI:this.newSnippetFromSample(e,t);break;case v.NODE_TYPE_OWN_WORKFLOW:p.confirmOwnWorkflowExpanding().done(function(e){i.newSnippetFromOwnWorkflow(e.workflowId,e.copyContent,t)})}else{var n=a.create(e),o=v.NODE_ANIMATION_DROPPED;t||(t=this.pickNewNodePosition(),o=v.NODE_ANIMATION_AUTO_DROPPED),n.setCoordinates(t.x,t.y),this.undoManager.transaction(function(){i.add(n,o),i.supplement(n)})}},A.prototype.newSnippetFromSample=function(e,i){var n=this;f.loadSample(e,function(e,t){n.newSnippet(e,t,i)})},A.prototype.newSnippetFromOwnWorkflow=function(e,t,i){var n=this;f.loadOwnWorkflow(e,t,function(e,t){n.newSnippet(e,t,i)})},A.prototype.newSnippet=function(e,t,i){var n=this,o=i?v.NODE_ANIMATION_DROPPED:v.NODE_ANIMATION_AUTO_DROPPED,r=0<this.getNodesByTypes([v.NODE_TYPE_START]).length,s=0<this.getNodesByTypes([v.NODE_TYPE_STOP]).length;f.removeStartStop(e,t,r,s),i?f.adjustPositions(e,i.x,i.y,!0):(i=this.getCenterPosition(),f.adjustPositions(e,i.x,i.y,!1)),this.undoManager.transaction(function(){n.batch(function(){var i=n.allocateIds(e.length);n.allocateSpaceForSnippet(e),e.forEach(function(e,t){e.setId(i[t]),n.add(e,o)}),t.forEach(function(e){n.connect(e.source,e.target)})})})},A.prototype.allocateId=function(){return this.allocateIds(1)[0]},A.prototype.allocateIds=function(e){var t=[],i={};for(this.forEachNode(function(e){i[e.getId()]=!0});0<e;){for(;this.lastAllocatedId++,i[this.lastAllocatedId];);t.push(this.lastAllocatedId),e--}return t},A.prototype.pickNewNodePosition=function(){function e(){for(var e=0;e+1<arguments.length;e+=2){var t=i(arguments[e],arguments[e+1]);if(t)return t}return!1}var t=this.canvas.getVisibleArea(),n=Math.ceil(t.minY/v.CANVAS_GRID_SIZE),o=Math.floor(t.maxY/v.CANVAS_GRID_SIZE)-(v.AUTO_DROP_STEP_Y>>1),r=[],i=(this.forEachNode(function(e){e=e.getCoordinates();r.push({minX:e.x-v.AUTO_DROP_STEP_X+1,minY:e.y-v.AUTO_DROP_STEP_Y+1,maxX:e.x+v.AUTO_DROP_STEP_X-1,maxY:e.y+v.AUTO_DROP_STEP_Y-1})}),function(t,i){return!(i<n||o<i)&&(!r.some(function(e){return!(t<e.minX||t>e.maxX||i<e.minY||i>e.maxY)})&&{x:t,y:i})}),s=Math.round((t.minX+t.maxX-v.NODE_SIZE)/2/v.CANVAS_GRID_SIZE),a=Math.round((t.minY+t.maxY-v.NODE_SIZE)/2/v.CANVAS_GRID_SIZE);if(f=e(s,a))return f;for(var l=s,c=s,u=a,d=a,h=0;;){if(f=e(l-v.AUTO_DROP_STEP_X,a,s,u-v.AUTO_DROP_STEP_Y,s,d+v.AUTO_DROP_STEP_Y,c+v.AUTO_DROP_STEP_X,a))return f;for(var p=1;p<=h;p++){var f,g=p*v.AUTO_DROP_STEP_X,m=p*v.AUTO_DROP_STEP_Y;if(f=e(l-v.AUTO_DROP_STEP_X,a-m,l-v.AUTO_DROP_STEP_X,a+m,s-g,u-v.AUTO_DROP_STEP_Y,s+g,u-v.AUTO_DROP_STEP_Y,s-g,d+v.AUTO_DROP_STEP_Y,s+g,d+v.AUTO_DROP_STEP_Y,c+v.AUTO_DROP_STEP_X,a-m,c+v.AUTO_DROP_STEP_X,a+m))return f}if(f=e(l-v.AUTO_DROP_STEP_X,u-v.AUTO_DROP_STEP_Y,l-v.AUTO_DROP_STEP_X,d+v.AUTO_DROP_STEP_Y,c+v.AUTO_DROP_STEP_X,u-v.AUTO_DROP_STEP_Y,c+v.AUTO_DROP_STEP_X,d+v.AUTO_DROP_STEP_Y))return f;l-=v.AUTO_DROP_STEP_X,c+=v.AUTO_DROP_STEP_X,u-=v.AUTO_DROP_STEP_Y,d+=v.AUTO_DROP_STEP_Y,h++}},A.prototype.getCenterPosition=function(){var e=this.canvas.getVisibleArea();return{x:Math.round((e.minX+e.maxX-v.NODE_SIZE)/2/v.CANVAS_GRID_SIZE),y:Math.round((e.minY+e.maxY-v.NODE_SIZE)/2/v.CANVAS_GRID_SIZE)}},A.prototype.allocateSpaceForSnippet=function(s){var e,i,a;function l(e,t){return e.some(function(i){return t.some(function(e){return e=e,t=(t=i).getCoordinates(),e=e.getCoordinates(),Math.abs(t.x-e.x)<v.AUTO_DROP_STEP_X&&Math.abs(t.y-e.y)<v.AUTO_DROP_STEP_Y;var t})})}function n(e){var t=0,i=0,n=0,o=0;return e.forEach(function(e){t=Math.min(t,e.getX()),i=Math.max(i,e.getX()),n=Math.min(n,e.getY()),o=Math.max(o,e.getY())}),{x:(i-t)/2,y:(o-n)/2}}function c(e,i){e.forEach(function(e){var t=e.getCoordinates();e.setCoordinates(t.x+i.x,t.y+i.y)})}s.length&&(e=this.getNodes().map(function(e){return{node:e,coordinates:e.getCoordinates()}}),i=n(s),(a=o.detectGroups(this.getVertices()).map(function(e){var t,e=e.getNodes();return{nodes:e,moveDirection:(e=n(e),t=i,Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)?e.x<t.x?{x:-v.AUTO_DROP_STEP_X,y:0}:{x:v.AUTO_DROP_STEP_X,y:0}:e.y<t.y?{x:0,y:-v.AUTO_DROP_STEP_Y}:{x:0,y:v.AUTO_DROP_STEP_Y})}})).forEach(function(t){if(l(t.nodes,s)){var i,n=t.moveDirection,o=t.nodes.slice(0),r=s.slice(0),e=a.filter(function(e){return e!==t});do{for(c(o,n);i=!1,e=e.filter(function(e){return!l(o,e.nodes)||(e.moveDirection.x==n.x&&e.moveDirection.y==n.y?(c(e.nodes,n),Array.prototype.push.apply(o,e.nodes),i=!0):Array.prototype.push.apply(r,e.nodes),!1)}),i;);}while(l(o,r))}}),(e=e.filter(function(e){var t=e.node.getCoordinates(),e=e.coordinates;return t.x!=e.x||t.y!=e.y})).length&&this.undoManager.operation("nodeMoved",e))},A.prototype.allocateSpaceForSupplement=function(e,t){var n=[],i=(this.forEachNode(function(e){e=e.getCoordinates();n.push({minX:e.x-v.AUTO_DROP_STEP_X+1,minY:e.y-v.AUTO_DROP_STEP_Y+1,maxX:e.x+v.AUTO_DROP_STEP_X-1,maxY:e.y+v.AUTO_DROP_STEP_Y-1})}),0),o=0;switch(t){case v.LEFT:default:i=-1;break;case v.RIGHT:i=1;break;case v.TOP:o=-1;break;case v.BOTTOM:o=1}for(var r=e.getX()+v.AUTO_DROP_STEP_X*i,s=e.getY()+v.AUTO_DROP_STEP_Y*o;!function(t,i){return!n.some(function(e){return!(t<e.minX||t>e.maxX||i<e.minY||i>e.maxY)})}(r,s);)r+=i,s+=o;return{x:r,y:s}},A.prototype.allocateSpaceForIncomingSupplement=function(e){var t=this.getAnchorsInUse(e),i=v.LEFT;return!t[v.LEFT]&&t[v.TOP]&&(i=v.TOP),this.allocateSpaceForSupplement(e,i)},A.prototype.allocateSpaceForOutgoingSupplement=function(e){var t=this.getAnchorsInUse(e),i=v.RIGHT;return!t[v.RIGHT]&&t[v.BOTTOM]&&(i=v.BOTTOM),this.allocateSpaceForSupplement(e,i)},A.prototype.add=function(n,e){var o,i,r=this,s=n.get$();n.getId()||n.setId(this.allocateId()),n.appendTo(this.$container,this.$titlesContainer,e),n.setInteractionEnabled(this.editable),n.updateCommentLabels(),this.instance.makeTarget(s,{anchor:n.getAnchors()}),this.instance.makeSource(s,{anchor:n.getAnchors(),filter:".node-connect-button img"}),this.instance.draggable(s,{distance:v.CANVAS_GRID_SIZE/2,grid:[v.CANVAS_GRID_SIZE,v.CANVAS_GRID_SIZE],rightButtonCanDrag:!1,canDrag:function(){return r.editable},start:function(){var t,i;o=!0,null==r.drag&&(t=[],i=[],n.setPopoverEnabled(!1),r.forEachNode$(function(e){a.isSelected(e)?(t.push(e),a.get(e).setTitleEnabled(!1)):i.push(a.getCollisionBox(e))}),r.drag={lead:s,selected:t,unselected:i})},stop:function(){r.drag.lead.removeClass("js-no-drop"),r.drag.selected.forEach(function(e){a.get(e).setTitleEnabled(!0),e.removeClass("js-collision-detected")}),n.setPopoverEnabled(!0)},drag:function(){var n;r.drag&&s==r.drag.lead&&(n=!1,r.drag.selected.forEach(function(e){var t=a.getCollisionBox(e),i=r.drag.unselected.some(function(e){return a.detectBoxCollision(e,t)});e.toggleClass("js-collision-detected",i),i&&(n=!0)}),r.drag.lead.toggleClass("js-no-drop",n))},revert:function(){var e;return!!r.drag&&(e=!1,r.undoManager.transaction(function(){var t=r.getZoom();(e=r.drag.selected.some(function(e){var t=a.getCollisionBox(e);return r.drag.unselected.some(function(e){return a.detectBoxCollision(e,t)})}))||(r.undoManager.operation("nodeMoved",r.drag.selected.map(function(e){e=a.get(e);return{node:e,coordinates:e.getCoordinates()}})),r.drag.selected.forEach(function(e){a.get(e).updateCoordinates(t)})),r.drag=null,r.updateOverlays(),r.positionTitles(),r.updateMinimap()}),e)}}),s.on({mousedown:function(e){var t;e.button===v.MOUSE_BUTTON_MIDDLE?r.editable&&r.undoManager.transaction(function(){r.deleteNode(s)}):(o=!1,(i=a.isSelected(s))||(r.isChainMode()?r.isChainSourceSelected()?(t=r.getChainSource(),_.defer(function(){r.undoManager.transaction(function(){var e=r.connect(a.get(t),n);e?(r.deselectAll(),r.setNodeSelected(s,!0),a.setChainSource(s,!0)):!1===e&&workflowNotAllowedConnectionDialogHandler.showDialog()})})):(r.setNodeSelected(s,!0),a.setChainSource(s,!0)):(e.shiftKey||e.ctrlKey||r.deselectAll(),r.setNodeSelected(s,!0)))),y()},mouseup:function(e){i&&!o&&(r.isChainMode()?(r.setNodeSelected(s,!1),a.setChainSource(s,!1)):e.shiftKey||e.ctrlKey?r.setNodeSelected(s,!1):(r.deselectAll(),r.setNodeSelected(s,!0)))},dblclick:function(){r.editIcon(n)},mouseover:function(){n.setHovered(!0)},mouseout:function(){n.setHovered(!1)}}),this.undoManager.operation("nodeAdded",n),this.updateMinimap(),this.updateFootnotes()},A.prototype.supplement=function(e,t,i){var l=this;e.isFilled()?v.NODE_TYPES_MAILING.includes(e.getType())?t.trySupplementChain(this.getFirstIncomingChain(e),i,function(a){l.batch(function(){for(var e=a[0],t=1;t<a.length;t++)if((o=a[t]).isAppended())e=o;else for(var i=t;i<a.length;i++){var n=a[i];if(n.isAppended()){l.deleteConnectionBetween(n.get$(),e.get$()),e=n,t=i;break}}for(var o,r,s,t=1;t<a.length;t++)(o=a[t]).isAppended()||(r=a[t-1],s=l.allocateSpaceForIncomingSupplement(r),o.setCoordinates(s.x,s.y),l.add(o),l.connect(o,r),t+1<a.length&&a[t+1].isAppended()&&l.connect(a[t+1],o),h.resave(o))})}):v.NODE_TYPE_RECIPIENT==e.getType()?this.processRecipientsChains():v.NODE_TYPE_PARAMETER==e.getType()&&this.getNodeOutgoingChains(e).forEach(function(e){e=e.find(function(e,t){return 0<t&&v.NODE_TYPE_PARAMETER==e.getType()&&!e.isEditable()});if(e){var t=[],i=(l.getNodeIncomingChains(e).forEach(function(e){e=e.find(function(e,t){return 0<t&&v.NODE_TYPE_PARAMETER==e.getType()});e&&t.push(e)}),0);if(t.length)for(var n=!0,o=0;o<t.length;o++){var r=t[o];if(!r.isFilled()){n=!1;break}i+=parseInt(r.getData().value)}else n=!1;h.modify(e,function(e){n?(e.setFilled(0<i&&i<100),e.getData().value=100-i):(e.setFilled(!1),e.getData().value=0)})}}):v.NODE_TYPE_IMPORT!=e.getType()||this.hasNodeOutgoingConnections(e)||(t=a.create(v.NODE_TYPE_DEADLINE),i=this.allocateSpaceForOutgoingSupplement(e),t.setCoordinates(i.x,i.y),this.add(t),this.connect(e,t))},A.prototype.processRecipientsChains=_.debounce(function(){var e=this._findInitialRecipientsNodes(),o=this;e.forEach(function(n){n.setInRecipientsChain(!1),o.updateNodeTitle(n),o.getNodeOutgoingChains(n).forEach(function(e){for(var t=1;t<e.length;++t){var i=e[t];if(i.type!=v.NODE_TYPE_RECIPIENT)break;i.data.mailinglistId=n.data.mailinglistId,i.setInRecipientsChain(!0),o.updateNodeTitle(i)}})})},150),A.prototype._findInitialRecipientsNodes=function(){var e=this.getNodesByTypes([v.NODE_TYPE_RECIPIENT]),t=this.getConnections(),i=[];return t.filter(function(e){return e.target.type==v.NODE_TYPE_RECIPIENT&&e.source.type==v.NODE_TYPE_RECIPIENT}).forEach(function(e){i.push(e.target.id)}),e.filter(function(e){return!i.includes(e.id)})},A.prototype.getAnchorsInUse=function(e){e=e.get$();return a.getAnchorsInUse(this.instance.getEndpoints(e[0]))},A.prototype.positionTitle=function(e){r.positionTitle(e,this.getAnchorsInUse(e))},A.prototype.updateNodeTitle=function(e,t){var i=this.isNormalWorkflow();r.updateTitle(e,i,t),this.positionTitle(e)},A.prototype.updateNodeTitles=_.throttle(function(t){var i=this,n=this.isNormalWorkflow();this.forEachNode(function(e){r.updateTitle(e,n,t),i.positionTitle(e)})},150),A.prototype.positionTitles=_.throttle(function(){var t=this;this.forEachNode(function(e){t.positionTitle(e)})},150),A.prototype.setMinimapEnabled=function(e){this.canvas.setMinimapEnabled(e)},A.prototype.updateMinimap=_.debounce(function(){this.canvas.updateMinimap()},100),A.prototype.isChainSourceSelected=function(){return this.$container.find(".node.chain-mode-source").exists()},A.prototype.getChainSource=function(){return this.$container.find(".node.chain-mode-source")},A.prototype.setNodeSelected=function(e,t){t?this.instance.addToDragSelection(e):this.instance.removeFromDragSelection(e),a.setSelected(e,!!t),this.onSelectionChanged()},A.prototype.isConnectionPossible=function(t,i){return t instanceof a&&i instanceof a&&(t!==i&&!this.hasConnection(function(e){return e.source===t&&e.target===i||e.source===i&&e.target===t}))},A.prototype.isConnectionAllowed=function(e,t){var i=new l(v.CONNECTION_CONSTRAINTS),n={node:e,type:e.getType(),connections:{}},o={node:t,type:t.getType(),connections:{}};return Object.defineProperty(n.connections,"incoming",{get:m.caching(this.getNodeIncomingConnections,this,e)}),Object.defineProperty(n.connections,"outgoing",{get:m.caching(this.getNodeOutgoingConnections,this,e)}),Object.defineProperty(o.connections,"incoming",{get:m.caching(this.getNodeIncomingConnections,this,t)}),Object.defineProperty(o.connections,"outgoing",{get:m.caching(this.getNodeOutgoingConnections,this,t)}),n.type!=v.NODE_TYPE_STOP||this.hasNodeIncomingConnections(e)||(n.type=v.NODE_TYPE_START),o.type!=v.NODE_TYPE_START||this.hasNodeOutgoingConnections(t)||(o.type=v.NODE_TYPE_STOP),i.check(n,o)},A.prototype.connect=function(e,t,i){return this.isConnectionPossible(e,t)?!!this.isConnectionAllowed(e,t)&&(e.getType()===v.NODE_TYPE_STOP&&e.setType(v.NODE_TYPE_START),t.getType()===v.NODE_TYPE_START&&t.setType(v.NODE_TYPE_STOP),!0!==i&&this.instance.connect({source:e.get$(),target:t.get$()}),!0):null},A.prototype.deselectAll=function(){this.$container.find(".node.ui-selected").removeClass("ui-selected"),this.instance.clearDragSelection(),this.clearSelectedSource(),this.onSelectionChanged()},A.prototype.clearSelectedSource=function(){this.$container.find(".node.chain-mode-source").removeClass("chain-mode-source")},A.prototype.alignAll=function(){var e=this,t=this.getNodes(),i={},n=(t.forEach(function(e){i[e.getId()]=e.getCoordinates()}),this.batch(function(){u.align(e.getVertices())}),t.filter(function(e){var t=i[e.getId()];return t.x!=e.getX()||t.y!=e.getY()}).map(function(e){return{node:e,coordinates:i[e.getId()]}}));n.length&&(e.undoManager.transaction(function(){e.undoManager.operation("nodeMoved",n)}),this.positionTitles(),this.updateMinimap())},A.prototype.deleteSelected=function(){this.deleteNodes(this.getSelectedNodes())},A.prototype.deleteNode=function(e){var t=this;if((e=e instanceof a?e:a.get(e)).isAppended()){var i=[e];switch(e.getType()){case v.NODE_TYPE_IMPORT:this.getNodeOutgoingConnections(e).forEach(function(e){v.NODE_TYPE_DEADLINE==e.target.getType()&&i.push(e.target)});break;case v.NODE_TYPE_DEADLINE:this.getNodeIncomingConnections(e).forEach(function(e){v.NODE_TYPE_IMPORT==e.source.getType()&&i.push(e.source)})}i.forEach(function(e){t.undoManager.operation("nodeDeleted",e),t.instance.remove(e.get$()),e.remove()}),this.onSelectionChanged(),this.positionTitles(),this.updateFootnotes(),this.updateMinimap()}},A.prototype.deleteNodes=function(e){var t=this;this.undoManager.transaction(function(){t.batch(function(){e.forEach(function(e){t.deleteNode(e)})})})},A.prototype.disconnectSelected=function(){this.disconnectNodes(this.getSelectedNodes())},A.prototype.disconnectNode=function(e){var t=this;this.getNodeConnections(e).forEach(function(e){t.deleteConnection(e)})},A.prototype.disconnectNodes=function(e){var t=this;this.batch(function(){e.forEach(function(e){t.disconnectNode(e)})})},A.prototype.canDeleteConnection=function(e){var t,e=e.origin?(t=e.source,e.target):(t=a.get(e.source),a.get(e.target));return!(v.NODE_TYPE_IMPORT==t.getType()&&v.NODE_TYPE_DEADLINE==e.getType())},A.prototype.deleteConnection=function(e){return!!this.canDeleteConnection(e)&&(e.origin?this.instance.deleteConnection(e.origin):this.instance.deleteConnection(e),!0)},A.prototype.deleteConnectionBetween=function(e,t){e=this.getConnectionBetween(e,t);e&&this.deleteConnection(e)},A.prototype.connectSelected=function(){return this.connectNodes(this.getSelectedNodes())},A.prototype.connectBetweenSelected=function(){var e=this.getSelectedNodes$();return 2<=e.length&&this.connectNodes(this.getNodesBetweenSelected(e[0],e[1]))},A.prototype.getNodesBetweenSelected=function(e,t){var e=a.getBox(e),t=a.getBox(t),i={minX:Math.min(e.minX,t.minX),maxX:Math.max(e.maxX,t.maxX),minY:Math.min(e.minY,t.minY),maxY:Math.max(e.maxY,t.maxY)};return this.getNodes().filter(function(e){return a.isInRegion(e.get$(),i)})},A.prototype.connectNodes=function(e){var t=this,i=e.sort(function(e,t){return e.getX()<t.getX()?-1:e.getX()>t.getX()?1:e.getY()<t.getY()?-1:e.getY()>t.getY()?1:0}),n=!1;return this.undoManager.transaction(function(){t.batch(function(){for(var e=0;e<i.length-1;e++)t.connect(i[e],i[e+1])&&(n=!0)})}),n},A.prototype.getSelectedNodes$=function(){var i=[];return this.$container.find(".node.ui-selected").each(function(e,t){i.push($(t))}),i},A.prototype.getSelectedNodes=function(){return this.getSelectedNodes$().map(function(e){return a.get(e)})},A.prototype.getSelectionSize=function(){return this.$container.find(".node.ui-selected").length},A.prototype.onSelectionChanged=function(){e(0<this.getSelectionSize())},A.prototype.setOnInitialized=function(e){this.instance.ready(e)},A.prototype.setOnZoom=function(e){this.canvasZoomHandler=e},A.prototype.setEditable=function(t){t=!!t,this.editable!==t&&(this.editable=t,this.draggableButtons.setEnabled(t),this.$viewport.selectable(t?"enable":"disable"),this.forEachNode(function(e){e.setInteractionEnabled(t)}))},A.prototype.getZoom=function(){return this.instance.getZoom()},A.prototype.setZoom=function(e){this.canvas.setZoom(e),this.instance.setZoom(e)},A.prototype.setPanningEnabled=function(e){this.canvas.setPanningEnabled(e),this.$viewport.toggleClass("js-panning",!!e),e?this.$viewport.selectable("disable"):this.editable&&this.$viewport.selectable("enable")},A.prototype.setMouseWheelZoomEnabled=function(e){this.canvas.setMouseWheelZoomEnabled(e)},A.prototype.setMultiConnectionEnabled=function(e){this.multiConnectionEnabled=e},A.prototype.setChainModeEnabled=function(e){this.chainModeEnabled=e,this.clearSelectedSource(),e&&(e=this.getSelection().shift())&&(this.deselectAll(),this.setNodeSelected(e,!0),a.setChainSource(e,!0))},A.prototype.isChainMode=function(){return!0===this.chainModeEnabled},A.prototype.updateOverlays=_.debounce(function(){this.forEachNode(function(e){a.isDecisionNode(e)&&this.updateDecisionBranchesOverlays(e)})},100),A.prototype.updateDecisionBranchesOverlays=function(e){var t,i=this.getNodeOutgoingConnections(e);a.isBranchingDecisionNode(e)?(t=a.getDecisionBranches(i))?(e=r.getDecisionBranchesLabels(e),b(t.positive,e.positive),b(t.negative,e.negative)):i.forEach(function(e){b(e,"?")}):i.forEach(function(e){b(e,!1)})},A.prototype.editIcon=function(e){null==this.drag&&(e?e.editable&&(this.deselectAll(),h.showEditDialog(e,n.checkActivation())):1==(e=this.getSelection()).length&&(this.deselectAll(),h.showEditDialog(a.get(e[0]),n.checkActivation())))},A.prototype.editIconComment=function(e){h.showIconCommentDialog(e)},A.prototype.serializeIcons=function(){var e=this.getNodes().map(function(e){return e.serialize()}),i={};return this.getConnections().forEach(function(e){var t=i[e.source.id];(t=t||[]).push(e),i[e.source.id]=t}),e.forEach(function(e){var t=i[e.id];e.connections=t?t.map(function(e){return{targetIconId:e.target.id}}):[]}),JSON.stringify(e)},A.prototype.undo=function(){this.undoManager.undo()},A.prototype.getUndoManager=function(){return this.undoManager},A.prototype.enlargeEditor=function(e,t){var i=this,e=_.isFunction(e)?e:_.noop,t=_.isFunction(t)?t:_.noop,n=AGN.Lib.Confirm.createFromTemplate({},"enlarged-editor-template");$("#modalCampaignEditorContainer").append($("#campaignEditorBody")),i.$viewport.selectable("option","appendTo","#modalCampaignEditorContainer"),n.done(e).fail(t).always(function(){$("#pageCampaignEditorContainer").append($("#campaignEditorBody")),i.$viewport.selectable("option","appendTo","body")})},A.prototype.hasUnsavedChanges=function(){return this.getUndoManager().canUndo()},A.prototype.isStatisticEnabled=function(){return this.statisticEnabled},A.prototype.toggleStatistic=function(){this.setStatisticEnabled(!this.statisticEnabled)},A.prototype.setStatisticEnabled=function(e){var t=this,i=$.Deferred();this.updateStatistic(i,e),i.done(function(){t.statisticEnabled=e,C(e)}).always(function(){t.updateNodeTitles(!0),t.updateOverlays()})},A.prototype.updateStatistic=function(e,i){var n=this;return i?$.post(AGN.url("/workflow/loadStatistics.action"),{workflowId:v.workflowId}).done(function(i){n.forEachNode(function(e){var t=i[e.id];t&&e.setStatistic(!0,t)}),e.resolve()}).fail(function(){e.reject(),AGN.Lib.Messages(t("Error"),t("defaults.error"),"alert")}):(n.forEachNode(function(e){e.setStatistic(!1)}),e.resolve()),e.promise()},A.prototype.fitPdfPage=function(){this.canvas.fitPdfPage(v.PDF_SIZE,v.PDF_ORIENTATION)},AGN.Lib.WM.Editor=A}(),agGrid.BaseFilter.prototype.generateTemplate=function(){var e=this.translate.bind(this),t=this.createConditionBody(0);return"<div>\n                    <div class='ag-filter-body-wrapper'>"+(this.acceptsBooleanLogic()?this.wrapCondition(t):t)+'</div>\n                    <div class="ag-filter-apply-panel" id="applyPanel">\n                        <a href="#" id="clearButton">'+e("clearFilter")+'</a>\n                        <button type="button" id="applyButton">'+e("applyFilter")+"</button>\n                    </div>\n                </div>"},agGrid.BaseFilter.prototype.createConditionTemplate=function(e){return'<div class="ag-filter-condition">\n            <div class="ag-filter-condition-type radio"><label class="" for="andId"><input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /> AND</label>\n            <label  class="" for="orId"><input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /> OR</label></div>\n            <div>'+this.createConditionBody(e)+"</div>\n        </div>"},agGrid.TextFilter.prototype.bodyTemplate=function(e){return'<div class="ag-filter-body">\n            <input class="ag-filter-filter form-control" id='+(0==e?"filterText":"filterConditionText")+' type="text" placeholder="'+this.translate.bind(this)("filterOoo","Filter...")+'"/>\n        </div>'},agGrid.TextFilter.prototype.generateFilterHeader=function(e){var t=this,i=this.getApplicableFilterTypes(),n=this.filterParams.filterOptions,n=(n||i).map(function(e){return'<option value="'+e+'">'+t.translate(e)+"</option>"}),i=1==n.length?"disabled":"";return n.length<=0?"":'<div>\n                <select class="ag-filter-select form-control" id="'+(0==e?"filterType":"filterConditionType")+'" '+i+">\n                    "+n.join("")+"\n                </select>\n            </div>"},agGrid.NumberFilter.prototype.bodyTemplate=function(e){var t=this.translate.bind(this),i=0==e?"filterNumberToPanel":"filterNumberToPanelCondition",n=0==e?"filterToText":"filterToConditionText";return'<div class="ag-filter-body">\n            <div>\n                <input class="ag-filter-filter form-control" id="'+(0==e?"filterText":"filterConditionText")+'" type="text" placeholder="'+t("filterOoo")+'"/>\n            </div>\n             <div class="ag-filter-number-to" id="'+i+'">\n                <input class="ag-filter-filter form-control" id="'+n+'" type="text" placeholder="'+t("filterOoo")+'"/>\n            </div>\n        </div>'},agGrid.NumberFilter.prototype.generateFilterHeader=agGrid.TextFilter.prototype.generateFilterHeader,agGrid.TextFilter.prototype.createConditionTemplate=function(e){return'<div class="ag-filter-condition">\n            <div class="ag-filter-condition-type radio"><label class="" for="andId"><input id="andId" type="radio" class="and" name="booleanLogic" value="AND" checked="checked" /> AND</label>\n            <label  class="" for="orId"><input id="orId" type="radio" class="or" name="booleanLogic" value="OR" /> OR</label></div>\n            <div>'+this.createConditionBody(e)+"</div>\n        </div>"},AGN.Lib.TableCaseInsensitiveComparator=function(e,t){return"string"==typeof e&&"string"==typeof t?e.toLowerCase().localeCompare(t.toLowerCase()):e.localeCompare(t)},!function(){function e(){}function t(e,t){return e.value?(e.valueFormatted||(e.valueFormatted=moment(e.value).format(t)),e.valueFormatted):""}e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show),e.optionDateFormat?this.format=e.optionDateFormat:(this.format="DD.MM.YYYY",e.optionShowTime&&(e.optionShowSeconds?this.format+=" HH:mm:ss":this.format+=" HH:mm")),this.eGui.innerHTML=t(e,this.format)},e.prototype.getGui=function(){return this.eGui},e.prototype.refresh=function(e){return this.eGui.innerHTML=t(e,this.format),!0},e.prototype.destroy=function(){},AGN.Opt.TableCellRenderers.DateCellRenderer=e}(),!function(){function e(){}e.prototype.init=function(e){this.eGui=document.createElement("div"),this.eGui.innerHTML='<div class="ag-filter">  <div>    <div class="ag-filter-body-wrapper">      <div class="ag-filter-body">        <label class="">'+t("tables.from")+'</label>        <input class="ag-filter-filter form-control js-datepicker js-datepicker-right" id="filterBegin" type="text" placeholder="">      </div>      <div class="ag-filter-body">        <label class="">'+t("tables.till")+'</label>        <input class="ag-filter-filter form-control js-datepicker js-datepicker-right" id="filterEnd" type="text" placeholder="">      </div>    </div>    <div class="ag-filter-apply-panel" id="applyPanel">      <a href="#" id="clearFilter" class="">'+t("tables.clearFilter")+"</a>    </div>  </div></div>",this.filterBegin=$(this.eGui).find("#filterBegin"),this.filterEnd=$(this.eGui).find("#filterEnd"),this.beginDate=void 0,this.endDate=void 0,this.clearFilter=$(this.eGui).find("#clearFilter"),this.filterBegin.on("change",this.filterBeginChanged.bind(this)),this.filterEnd.on("change",this.filterEndChanged.bind(this)),this.clearFilter.on("click",this.filterClear.bind(this)),AGN.Lib.CoreInitializer.run("pickadate",$(this.eGui)),this.filterActive=!1,this.filterChangedCallback=e.filterChangedCallback,this.valueGetter=e.valueGetter},e.prototype.afterGuiAttached=function(){},e.prototype.destroy=function(){this.filterBegin.off("change",this.filterBeginChanged.bind(this)),this.filterEnd.off("change",this.filterEndChanged.bind(this)),this.clearFilter.off("click",this.filterClear.bind(this))},e.prototype.filterBeginChanged=function(){this.filterEnd.data("pickadate").set("min",this.filterBegin.val()),this.beginDate=this.filterBegin.data("pickadate").get("select").pick,this.filterActive=this.beginDate||this.endDate,this.filterChangedCallback()},e.prototype.filterEndChanged=function(){this.filterBegin.data("pickadate").set("max",this.filterEnd.val()),this.endDate=this.filterEnd.data("pickadate").get("select").pick,this.filterActive=this.beginDate||this.endDate,this.filterChangedCallback()},e.prototype.filterClear=function(){this.filterEnd.val(void 0),this.filterBegin.val(void 0),this.beginDate=void 0,this.endDate=void 0,this.filterEnd.data("pickadate").set("min",!1),this.filterBegin.data("pickadate").set("max",!1),this.filterActive=!1,this.filterChangedCallback()},e.prototype.getGui=function(){return this.eGui},e.prototype.doesFilterPass=function(e){e=this.valueGetter(e.node);return!this.beginDate&&!this.endDate||!!e&&(this.beginDate&&this.endDate?e>=this.beginDate&&e<=this.endDate:this.beginDate?e>=this.beginDate:this.endDate?e<=this.endDate:void 0)},e.prototype.parseDate=function(e){if(e)return moment(e,t("date.format").toUpperCase()).valueOf()},e.prototype.isFilterActive=function(){return this.filterActive},e.prototype.getModel=function(){},e.prototype.setModel=function(){},AGN.Lib.TableDateFilter=e}(),!function(){function e(){}var n=AGN.Lib.Table,o=AGN.Lib.Confirm,r=AGN.Lib.Page,t=AGN.Lib.Tooltip;function s(e){return e.valueFormatted||e.value}e.prototype.init=function(i){i.eGridCell.classList.add("ag-cell-table-actions"),this.eGui=document.createElement("div"),this.eGui.innerHTML='<button type="button" class="btn btn-regular btn-alert"><i class="icon icon-trash-o"></i></button>',this.eButton=this.eGui.querySelector(".btn"),i.colDef["button-tooltip"]&&t.createTip($(this.eButton),i.colDef["button-tooltip"]);var e=s(i);e?this.eButton.setAttribute("href",e):this.eGui.style.visibility="hidden",this.eventListener=function(e){var t=this;return $.get(s(i)).done(function(e){1==$(e).all(".modal").length?o.create(e).done(function(e){e=$(e);n.get($(t)).api.updateRowData({remove:[i.data]}),AGN.Lib.RenderMessages(e)}):r.render(e)}),e.preventDefault(),!1},this.eButton.addEventListener("click",this.eventListener)},e.prototype.getGui=function(){return this.eGui},e.prototype.refresh=function(e){e=s(e);return this.eGui.style.visibility=e?"visible":"hidden",this.eButton.dataset.url=e,!0},e.prototype.destroy=function(){this.eButton.removeEventListener("click",this.eventListener)},AGN.Opt.TableCellRenderers.DeleteCellRenderer=e}(),[]);function validateEmailList(e,o,r){e.each(function(e,i){var i=$(i),n=getEmailsFromField(i);n&&isValidEmailList(n)?i.val(n.join(",")):o.push({field:i,msg:t(r)})})}function validateEmail(e,o,r){e.each(function(e,i){var i=$(i),n=i.val().trim();isValidEmail(n)?i.val(n):o.push({field:i,msg:t(r)})})}function validateSubject(e,o){e.each(function(e,i){var i=$(i),n=i.val().trim();!n||n.length<3?o.push({field:i,msg:t("triggerManager.operation.serviceMail.error.subjectToShort")}):n&&200<n.length?o.push({field:i,msg:t("triggerManager.operation.serviceMail.error.subjectToLong")}):i.val(n)})}function getEmailsFromField(e){e=e.val(),e=e.trim()&&e.trim().split(/[ ,|]+/);return _.map(e,_.trim),e}function isValidEmailList(e){for(var t=0;t<e.length;t++)if(!isValidEmail(e[t]))return!1;return!0}function isValidEmail(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}!function(){function e(){}var n=AGN.Lib.Template;e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show);var t,i=e.templateName;cachedTemplates[i]?t=cachedTemplates[i]:(t=n.prepare(i),cachedTemplates[i]=t),this.eGui.innerHTML=t({value:e.value,entry:e.data})},e.prototype.getGui=function(){return this.eGui},e.prototype.refresh=function(){return!1},e.prototype.destroy=function(){},AGN.Opt.TableCellRenderers.MustacheTemplateCellRender=e}(),!function(){function e(){}e.prototype.init=function(e){this.agParams=e,this.eGui=document.createComment("No label")},e.prototype.getGui=function(){return this.eGui},e.prototype.destroy=function(){},AGN.Opt.TableHeaderComponents.NoLabelHeader=e}(),AGN.Lib.TableNumberComparator=function(e,t,i,n,o){return e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t)?isNaN(e)?isNaN(t)?0:o?-1:1:o?1:-1:e-t},!function(){AGN.Lib.Table;function e(){}var n=AGN.Lib.Confirm,o=AGN.Lib.Page;function r(e){return e.deliveryHistoryEnabled?AGN.url("/recipient/"+e.recipientId+"/mailing/"+e.data.mailingId+"/deliveryHistory.action"):""}e.prototype.init=function(i){this.eGui=document.createElement("div");var e=r(i);e?(i.eGridCell.classList.add("ag-cell-table-actions"),this.eGui.innerHTML='<button type="button" class="btn btn-regular "><i class="icon icon-share-square-o"></i><span>'+i.value+"</span></button>",this.eButton=this.eGui.querySelector(".btn"),this.eButton.setAttribute("href",e),this.eventListener=function(e){var t=r(i);if(t)return $.get(t).done(function(e){1==$(e).all(".modal").length?n.create(e):o.render(e)}),e.preventDefault(),!1},this.eButton.addEventListener("click",this.eventListener)):this.eGui.innerHTML=i.value},e.prototype.getGui=function(){return this.eGui},e.prototype.refresh=function(e){return this.eButton&&(this.eButton.dataset.url=r(e)),!0},e.prototype.destroy=function(){this.eButton&&this.eButton.removeEventListener("click",this.eventListener)},AGN.Opt.TableCellRenderers.RecipientDeliveryInfoRenderer=e}(),!function(){function e(){}var n=AGN.Lib.Confirm,o=AGN.Lib.Page;function r(e){return e.deliveryHistoryEnabled?AGN.url("/recipient/"+e.recipientId+"/mailing/"+e.data.mailingId+"/successfulDeliveryHistory.action"):""}e.prototype.init=function(i){this.eGui=document.createElement("div");var e=r(i);e?(i.eGridCell.classList.add("ag-cell-table-actions"),this.eGui.innerHTML='<button type="button" class="btn btn-regular "><i class="icon icon-share-square-o"></i><span>'+i.value+"</span></button>",this.eButton=this.eGui.querySelector(".btn"),this.eButton.setAttribute("href",e),this.eventListener=function(e){var t=r(i);if(t)return $.get(t).done(function(e){1==$(e).all(".modal").length?n.create(e):o.render(e)}),e.preventDefault(),!1},this.eButton.addEventListener("click",this.eventListener)):this.eGui.innerHTML=i.value},e.prototype.getGui=function(){return this.eGui},e.prototype.refresh=function(e){return this.eButton&&(this.eButton.dataset.url=r(e)),!0},e.prototype.destroy=function(){this.eButton&&this.eButton.removeEventListener("click",this.eventListener)},AGN.Opt.TableCellRenderers.RecipientSuccessDeliveryInfoRenderer=e}(),!function(){function e(){}e.prototype.init=function(i){this.column=i.colDef.field,this.values=_.sortBy(_.uniq(_.map(i.rowModel.rowsToDisplay,function(e){return e.data[i.colDef.field]}))),this.labels=_.extend({},i.labels),this.eGui=document.createElement("div"),this.eGui.innerHTML='<div class="ag-filter">  <div>    <div class="ag-filter-body-wrapper">'+this.buildOptions()+'    </div>    <div class="ag-filter-apply-panel" id="applyPanel">      <a href="#" id="clearFilter" class="">'+t("tables.clearFilter")+"</a>    </div>  </div></div>",this.checkBoxes=$(this.eGui).find("input"),this.checkedBoxes=[],this.clearFilter=$(this.eGui).find("#clearFilter"),this.checkBoxes.on("change",this.checkBoxesChanged.bind(this)),this.clearFilter.on("click",this.filterClear.bind(this)),this.filterActive=!1,this.filterChangedCallback=i.filterChangedCallback,this.valueGetter=i.valueGetter},e.prototype.buildOptions=function(){var t=this.labels;return _.map(this.values,function(e){return'<div class="ag-filter-body">  <label class="">    <input class="" type="checkbox" value="'+e+'">    '+(t.hasOwnProperty(e)?t[e]:e)+"  </label></div>"}).join("\n")},e.prototype.afterGuiAttached=function(){},e.prototype.destroy=function(){this.checkBoxes.off("change",this.checkBoxesChanged.bind(this)),this.clearFilter.off("click",this.filterClear.bind(this))},e.prototype.checkBoxesChanged=function(){this.valuesFiltered=_.map(_.filter(this.checkBoxes,{checked:!0}),function(e){return e.value}),this.filterActive=0!==this.valuesFiltered.length,this.filterChangedCallback()},e.prototype.filterClear=function(){this.checkBoxes.removeAttr("checked"),this.valuesFiltered=[],this.filterActive=!1,this.filterChangedCallback()},e.prototype.getGui=function(){return this.eGui},e.prototype.doesFilterPass=function(e){e=this.valueGetter(e.node);return _.includes(this.valuesFiltered,e)},e.prototype.isFilterActive=function(){return this.filterActive},e.prototype.getModel=function(){},e.prototype.setModel=function(){},AGN.Lib.TableSetFilter=e}(),!function(){function e(){}e.prototype.init=function(e){this.gui=AGN.Lib.TableCellWrapper(e.data.show);var t=document.createElement("div");e.value&&t.appendChild(document.createTextNode(e.value)),t.style.cssText="text-overflow: ellipsis;overflow: hidden;",this.gui.appendChild(t)},e.prototype.getGui=function(){return this.gui},e.prototype.refresh=function(){return!1},AGN.Opt.TableCellRenderers.StringCellRenderer=e}(),AGN.Lib.TableCellWrapper=function(e){var t;return e?((t=document.createElement("a")).href=e,t.style.cssText="display: block;height: 33px;margin:  -8px -6px;padding: 8px 6px;",t):document.createElement("div")},!function(){function e(){}e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show);var i="";1===e.value.endTypeId?i=t("workflow.stop.automatic_end"):2===e.value.endTypeId&&(i=e.value.date),this.eGui.innerHTML=i},e.prototype.getGui=function(){return this.eGui},e.prototype.refresh=function(e){return!1},e.prototype.destroy=function(){},AGN.Opt.TableCellRenderers.WorkflowEndCellRenderer=e}(),!function(){function e(){}e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show);var i="",i=1===e.value.startTypeId?' <span class="badge badge-campaigntype-actionbased">\n              <i class="icon icon-gear"></i>\n              <strong>'+t("workflow.start.action_based")+"</strong>\n         </span>":2===e.value.startTypeId?'<span class="badge badge-campaigntype-datebased">\n              <i class="icon icon-calendar-o"></i>\n              <strong>'+t("workflow.start.date_based")+"</strong>\n        </span>":e.value.date;this.eGui.innerHTML=i},e.prototype.getGui=function(){return this.eGui},e.prototype.refresh=function(e){return!1},e.prototype.destroy=function(){},AGN.Opt.TableCellRenderers.WorkflowStartCellRenderer=e}(),!function(){function e(){}e.prototype.init=function(e){this.eGui=AGN.Lib.TableCellWrapper(e.data.show),e.value&&(e=e.value.name,this.eGui.innerHTML='<span class="status-badge campaign.status.'+e+'"></span> '+t("workflow.status."+e))},e.prototype.getGui=function(){return this.eGui},e.prototype.refresh=function(e){return!1},e.prototype.destroy=function(){},AGN.Opt.TableCellRenderers.WorkflowStatusCellRenderer=e}(),AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{},AGN.Lib.FormBuilder.Utils={pushControl:function(e,o){Array.isArray(e)&&e.push(function(e){t=(i=e).prototype.constructor,n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),n.__proto__=i,o.build&&(n.prototype.build=o.build),o.onRender&&(n.prototype.onRender=o.onRender),Object.defineProperty(n,"definition",{get:o.definition});var t,i=n;function n(){return t.apply(this,arguments)}return e.register(o.newControlName,i),i})}},AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{},AGN.Lib.FormBuilder.EmmControls={mediapool:function(i){return{newControlName:"mediapool",build:function(){return{field:this.markup("img",null,{}),layout:"agnMediapool"}},onRender:function(e){this.preview&&$(e.target).parents(".form-field").find(".field-label").html(t("userform.formBuilder.mediapoolImage")+": "+i.options.mediapoolImages[this.config.image]);e=$(this.element);e.attr("src",this.config.image).attr("alt",this.config.alt),this.config.width&&e.attr("width",this.config.width),this.config.height&&e.attr("height",this.config.height)},definition:function(){return{i18n:{default:t("userform.formBuilder.mediapoolImage")}}}}},nextform:function(){return{newControlName:"formName",build:function(){return{field:this.markup("input",null,{name:"agnFN",type:"hidden"}),layout:"hidden"}},onRender:function(e){this.preview&&$(e.target).parents(".form-field").find(".field-label").html(t("userform.formBuilder.nextForm")+": "+this.config.formName),$(this.element).attr("value",this.config.formName)},definition:function(){return{i18n:{default:t("userform.formBuilder.nextForm")}}}}}},!function(){AGN.Lib.FormBuilder=AGN.Lib.FormBuilder||{};var o={agnCI:t("userform.formBuilder.tooltips.agnCI"),agnUID:t("userform.formBuilder.tooltips.agnUID")},r=["agnCI","agnUID","agnMAILINGLIST","agnSUBSCRIBE"];function s(e){var e=$(e.target).parents(".form-field"),t=this.config.emmField,i=e.data("currentEmmField"),n=e.find(".form-elements"),o=t!==i;!i?e.data("currentEmmField",t):o&&(e.data("currentEmmField",t),i=t,e=(o=n).find('input[name="value"]'),o=o.find('input[name="name"]'),n=(t="none"!==i)?"$!customerData."+i:"",i=t?i:"",e.val(n),o.val(i),t?o.prop("disabled",!0):o.prop("disabled",!1))}function e(e){var t=this.config.id.replace("-preview",""),i=$(e.target),n=i.parents(".form-field").find(".form-elements").find(".emmField-wrap");r.includes(t)?n.hide():n.show(),r.includes(t)||s.apply(this,arguments);n=i.parents(".form-field").find(".tooltip-element"),i=t;(i=o[i])?(n.attr("tooltip",i),n.show()):n.hide()}AGN.Lib.FormBuilder.Templates={default:function(){return{onRender:s}},hidden:function(){return{onRender:e}},dateForRender:function(t){var e=(this.config.className||"")+" js-datepicker",e=$.extend({},this.config,{"data-datepicker-options":"format: 'yyyy/mm/dd', formatSubmit: 'yyyy/mm/dd'",className:e});return{field:this.markup("input",null,e),onRender:function(e){$(e.target).append('<input type="hidden" name="'+t.name+'_format" value="yyyy/MM/dd">')}}}}}(),!function(){var o,e=AGN.Lib.FormBuilder.Utils,i=AGN.Lib.FormBuilder.EmmControls,r=AGN.Lib.FormBuilder.Templates,n='<html>\n    <head>\n        <script type="text/javascript" src="'+AGN.url("/js/lib/jquery/jquery-3.5.1.js")+'"><\/script>\n        <script type="text/javascript" src="'+AGN.url("/assets/js/vendor/pickadate-3.5.6.js")+'"><\/script>\n        <script type="text/javascript" src="'+AGN.url("/assets/js/vendor/pickadate-3.5.6.date.js")+'"><\/script>\n        <script type="text/javascript" src="'+AGN.url("/js/lib/formbuilder/generated-form.js")+'"><\/script>\n        <link rel="stylesheet" href="'+AGN.url("/assets/form.css")+'">        {{ if (cssUrl) { }}\n        <link rel="stylesheet" href="{{- cssUrl }}">\n        {{ } }}\n    </head>\n    <body>\n        <div class="container" style="margin-top: 50px;">\n            <form action="form.action">\n                {{= generatedHTML}}\n            </form>\n        </div>\n    </body>\n</html>',s=AGN.Lib.Confirm,a=["required","label","description","name","className","placeholder","value"];function l(e,i){i.val(e.generateHtml()),AGN.Lib.Messages(t("defaults.success"),t("userform.formBuilder.success.htmlGenerated"),"success")}function c(e){return t("userform.formBuilder.template.template")+": "+e}(o=function(e,t){this.options=$.extend({},t);var i=this;i.$el=$(e),i.$target=$(this.$el.data("target")),i.initCustomControls(),i.builder=i.$el.formBuilder(o.getBuilderDefaultOptions(i)),i.defered=$.Deferred(),i.options.data&&i.setJson(i.options.data),i.builder.promise.then(function(){i.builder=i.$el.data("formBuilder"),i.defered.resolve()})}).getBuilderDefaultOptions=function(e){return{roles:{},disabledAttrs:["access","description"],disableFields:["file","autocomplete"],defaultFields:o.defaultFields(e),disabledActionButtons:["data","save"],actionButtons:[{id:"downloadHtml",className:"btn btn-info",label:t("workflow.reaction.download"),type:"button",events:{click:function(){e.downloadHtml.bind(e)()}}},{id:"generateHtml",className:"btn btn-success",label:t("userform.formBuilder.generateHtml"),type:"button",events:{click:function(){e.generateHtmlToTarget.bind(e)()}}}],editOnAdd:!0,typeUserDisabledAttrs:{formName:a,mediapool:a,text:["subtype"],textarea:["subtype"]},typeUserAttrs:(i=e,n={formName:{formName:{label:t("userform.formBuilder.formName"),options:i.options.namesJson.reduce(function(e,t){return e[t]=t,e},{})}},mediapool:{image:{label:t("userform.formBuilder.mediapoolImage"),options:i.options.mediapoolImages},alt:{label:t("userform.formBuilder.imageAlt"),value:""},width:{label:t("userform.formBuilder.imageWidth"),value:0},height:{label:t("userform.formBuilder.imageHeight"),value:0}},date:{emmField:{label:t("userform.formBuilder.emmField"),options:i.options.dateProfileFields}},number:{emmField:{label:t("userform.formBuilder.emmField"),options:i.options.numberProfileFields}}},["text","hidden","textarea","select","radio-group","checkbox-group"].forEach(function(e){n[e]={emmField:{label:t("userform.formBuilder.emmField"),options:i.options.textProfileFields}}}),n),layoutTemplates:{agnMediapool:function(){return document.createElement("span")}},fields:[{type:"text"},{type:"hidden"},{type:"select"},{type:"radio-group"},{type:"checkbox-group"},{type:"number"},{type:"textarea"},{type:"date"}],templates:{text:r.default,hidden:r.hidden,textarea:r.default,date:r.default,select:r.default,"radio-group":r.default,"checkbox-group":r.default,number:r.default},controls:e.controls,i18n:{locale:window.adminLocale,location:AGN.url("/js/lib/formbuilder/translation/")},controlOrder:["header","paragraph","mediapool","","text","date","textarea","number","","select","radio-group","checkbox-group","","hidden","formName","button"],inputSets:o.getDefaultPresetsConfig(e)};var i,n},o.defaultFields=function(e){return[{type:"hidden",name:"agnCI",value:e.options.companyId.toString()},{type:"hidden",name:"agnUID",value:"$!agnUID"}]},o.getDefaultPresetsConfig=function(e){return[{label:c(t("userform.formBuilder.template.subscribe")),name:"subscribe",fields:[{type:"hidden",name:"agnCI",value:e.options.companyId.toString(),label:" "},{type:"hidden",name:"agnMAILINGLIST",value:"",label:" "},{type:"hidden",name:"agnSUBSCRIBE",value:"1",label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"text",name:"firstname",value:"$!customerData.firstname",emmField:"firstname",label:"Firstname:"},{type:"text",name:"lastname",value:"$!customerData.lastname",emmField:"lastname",label:"Lastname:"},{type:"text",name:"email",value:"$!customerData.email",emmField:"email",label:"Email:"},{type:"button",subtype:"submit",style:"primary",label:"Subscribe"},{type:"formName",label:" "}]},{label:c(t("userform.formBuilder.template.unsubscribe")),name:"unsubscribe",fields:[{type:"hidden",name:"agnCI",value:e.options.companyId.toString(),label:" "},{type:"formName",label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"button",subtype:"submit",style:"primary",label:"Unsubscribe"}]},{label:c(t("userform.formBuilder.template.profile_change")),name:"profile_change",fields:[{type:"hidden",name:"agnCI",value:e.options.companyId.toString(),label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "},{type:"formName",label:" "},{type:"text",name:"firstname",value:"$!customerData.firstname",emmField:"firstname",label:"Firstname:"},{type:"text",name:"lastname",value:"$!customerData.lastname",emmField:"lastname",label:"Lastname:"},{type:"text",name:"email",value:"$!customerData.email",emmField:"email",label:"Email:"},{type:"button",subtype:"submit",style:"primary",label:"Subscribe"}]},{label:c(t("userform.formBuilder.template.other")),name:"other",fields:[{type:"hidden",name:"agnCI",value:e.options.companyId.toString(),label:" "},{type:"hidden",name:"agnUID",value:"$!agnUID",label:" "}]}]},o.get=function(e,t){var i=$(e),n=i.data("_form-builder");return n||(n=new o(e,t),i.data("_form-builder",n),n)},o.isCreated=function(e){return!!$(e).data("_form-builder")},o.prototype.initCustomControls=function(){this.controls=[],e.pushControl(this.controls,i.mediapool(this)),e.pushControl(this.controls,i.nextform(this))},o.prototype.generateHtml=function(){var e=this.builder.actions.getData(),t=this.options.cssUrl,i=$("<form/>");return i.formRender({formData:e,controls:this.controls,templates:{date:r.dateForRender}}),e=n?_.template(n)({generatedHTML:i.html(),cssUrl:t}):i.html(),i.remove(),e=function(e){if(!e||e.length<=0)return e;return e.replace(/<\/.*?>/g,"$&\n")}(e)},o.prototype.generateHtmlToTarget=function(){var e,t=this,i=this.$target;!i||(e=AGN.Lib.Editor.get(i))&&(this.options.confirmationModal&&e.val()?s.createFromTemplate({},"warning-html-generation-modal").done(function(){l(t,e)}):l(t,e))},o.prototype.downloadHtml=function(){var e=this.generateHtml(),e=window.btoa(e),t="Generated form.txt",i=(this.options.formName&&(t=this.options.formName+".txt"),document.createElement("a"));i.setAttribute("href","data:application/octet-stream;charset=utf-8;base64,"+e),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},o.prototype.getJson=function(){return this.builder.actions.getData("json",!1)},o.prototype.getData=function(){return this.builder.actions.getData()},o.prototype.setJson=function(e){var t=this;t.defered.done(function(){return t.builder.actions.setData(e)})},o.prototype.promise=function(){return this.defered.promise()},o.prototype.getInitJson=function(){return JSON.stringify(this.options.data)},o.prototype.isChanged=function(){return this.options.data?this.getInitJson()!==this.getJson():_.isEqual(this.getData(),o.defaultFields(this))},AGN.Lib.FormBuilder.FormBuilder=o}(),AGN.Lib.DomInitializer.new("account-data",function(){var e=$("#account-data .account-initials"),t=e.next(".account-data-infobox");e.popover({trigger:"hover",container:"body",html:!0,content:t.html()})}),AGN.Lib.CoreInitializer.new("ace",function(e){e=e||$(document),_.each(e.find(".js-editor, .js-editor-text, .js-editor-eql, .js-editor-css"),function(e){AGN.Lib.Editor.get($(e))})}),!function(){function i(e,t,i){t.change(function(){n(e,t,i)})}function n(e,t,i){i?t.is(":checked")?e.removeClass("hidden"):e.addClass("hidden"):t.is(":checked")?e.addClass("hidden"):e.removeClass("hidden")}function r(e,t,i,n){t.change(function(){s(e,t,i,n)})}function s(e,t,i,n){for(var o,r=t.val(),s=!1,a=0;a<i.length;a++)if(i[a]==r){s=!0;break}t=n?(o=function(){e.removeClass("hidden")},function(){e.addClass("hidden")}):(o=function(){e.addClass("hidden")},function(){e.removeClass("hidden")}),(s?o:t)()}AGN.Lib.CoreInitializer.new("checkbox-hider",function(e){e=e||$(document),_.each(e.find("[data-show-by-checkbox]"),function(e){var e=$(e),t=$(e.data("show-by-checkbox"));n(e,t,!0),i(e,t,!0)}),_.each(e.find("[data-hide-by-checkbox]"),function(e){var e=$(e),t=$(e.data("hide-by-checkbox"));n(e,t,!1),i(e,t,!1)}),_.each(e.find("[data-show-by-select]"),function(e){var e=$(e),t=$(e.data("show-by-select")),i=e.data("show-by-select-values");if(t&&i){for(var n=i.toString().split(","),o=0;o<n.length;o++)n[o]=n[o].trim();s(e,t,n,!0),r(e,t,n,!0)}}),_.each(e.find("[data-hide-by-select]"),function(e){var e=$(e),t=$(e.data("hide-by-select")),i=e.data("hide-by-select-values");if(t&&i){for(var n=i.toString().split(","),o=0;o<n.length;o++)n[o]=n[o].trim();s(e,t,n,!1),r(e,t,n,!1)}})})}(),!function(){var n=AGN.Lib.AutoSave;function r(e,t){var i=e.attr("id"),n=e.data("_editor");window.CKEDITOR&&CKEDITOR.instances[i]?CKEDITOR.instances[i].setData(t):(n||e).val(t)}AGN.Lib.CoreInitializer.new("auto-save",["ace"],function(e){e=e||$(document),_.each(e.find("[data-autosave-scope]"),function(e){var e=$(e),t=e.data("autosave-scope"),i=e.data("autosave-period"),o=e.all("[data-autosave]");0<o.length&&n.initialize(t,function(){var t;return 0<(o=o.filter(function(e,t){return document.body.contains(t)})).length&&(t={},_.each(o,function(e){e=$(e);t["value#"+e.data("autosave")]=e.val()}),t)},function(n){var e=$.map(o,function(e){var e=$(e),t="value#"+e.data("autosave");if(t in n){var i=e.val(),t=n[t];if(i!=t){if(!e.is("[data-autorestore]"))return{target:e,value:t};r(e,t)}return null}});return 0<e.length&&e},function(e){_.each(e,function(e){r(e.target,e.value)})},i)})})}(),AGN.Lib.DomInitializer.new("autosubmit",function(e){setTimeout(function(){AGN.Lib.Form.get(e).submit()},100)}),AGN.Lib.DomInitializer.new("calendar-table",function(){var t=this.config,e=(AGN.Lib.CalendarService.setUp(t),window.setInterval(AGN.Lib.CalendarService.checkProgress,500),AGN.Lib.CalendarService.getMonthMode()?AGN.Lib.CalendarService.generateMonthCalendar(AGN.Lib.CalendarService.getCurMonth(),AGN.Lib.CalendarService.getCurYear()):AGN.Lib.CalendarService.generateWeekCalendar(AGN.Lib.CalendarService.getCurMonth(),AGN.Lib.CalendarService.getCurYear(),AGN.Lib.CalendarService.getCurDay()),AGN.Lib.CalendarService.generateUnsentMailingsTable(),AGN.Lib.Action);e.new({click:"#dateTimePicker"},function(){this.event.stopPropagation()}),e.new({click:"#dateTimePickerButton"},function(){this.event.stopPropagation()}),e.new({click:".js-calendar-navigate-previous"},function(){return AGN.Lib.CalendarService.prevEntry(),this.event.preventDefault(),!1}),e.new({click:".js-calendar-navigate-next"},function(){return AGN.Lib.CalendarService.nextEntry(),this.event.preventDefault(),!1}),e.new({click:".js-calendar-navigate-today"},function(){return AGN.Lib.CalendarService.jumpToday(),this.event.preventDefault(),!1}),e.new({click:".js-calendar-view-month"},function(){return AGN.Lib.CalendarService.toggleDateSelectionMode("SELECT_MONTH"),this.event.preventDefault(),!1}),e.new({click:".js-calendar-view-week"},function(){return AGN.Lib.CalendarService.toggleDateSelectionMode("SELECT_WEEK"),this.event.preventDefault(),!1}),e.new({click:".js-calendar-list-unsent"},function(){return AGN.Lib.CalendarService.generateUnsentMailingsTable(),this.event.preventDefault(),!1}),e.new({click:".js-calendar-list-planned"},function(){return AGN.Lib.CalendarService.generatePlannedMailingsTable(),this.event.preventDefault(),!1}),e.new({click:"#comment-save-button"},function(){AGN.Lib.ReminderService.reminder.onSave()}),e.new({click:".calendar-comments-add"},function(){var e=this.el.parents(".calendar-day-container").data("date");return AGN.Lib.CalendarService.showCommentDialog(AGN.Lib.ReminderService.getNewReminder(e,t)),!1}),e.new({click:".calendar-comments-toggle"},function(){var e=this.el.parents(".calendar-day-container").data("date");return AGN.Lib.CalendarService.toggleComment(e),!1}),e.new({change:".js-calendar-toggle-all-comments"},function(){this.el.prop("checked")?$(".calendar-table").find(".calendar-comment").show():$(".calendar-table").find(".calendar-comment").hide(),AGN.Lib.CalendarService.adjustSidebarHeight()}),e.new({change:"#scheduleReminder"},function(){AGN.Lib.ReminderService.onScheduleChanged()}),e.new({change:"#isDeadline"},function(){AGN.Lib.ReminderService.onDeadlineChanged()}),e.new({change:"#month_list, #month_list_year, #weeks_list"},function(){AGN.Lib.CalendarService.showDate()}),e.new({change:"#weeks_list_year"},function(){AGN.Lib.CalendarService.createWeeksList(this.el[0])}),e.new({change:'#reminderDetails input[name="userType"]'},function(){var e=this.el[0];AGN.Lib.ReminderService.onUserTypeChanged(e.value)}),this.addAction({mouseover:"mailing-popup"},function(){var e,t,i,n,o,r,s=this.el,a=$("#popup-"+s.data("mailing-id"));a.exists()&&(o=$(window).scrollTop(),e=a.outerHeight(),i=(t=s.offset().top)+s.outerHeight(),n=t-o-15,o=o+$(window).outerHeight()-i,e<=n||o<n?(r=t-15-e,a.addClass("top"),a.removeClass("bottom")):(r=i+15,a.addClass("bottom"),a.removeClass("top")),a.css({top:r,left:s.offset().left+s.outerWidth()/2-a.outerWidth()/2}),a.css("z-index","1500"),a.css("display","block"))}),this.addAction({mouseout:"mailing-popup"},function(){var e=this.el.data("mailing-id");$("#popup-"+e).css("display","none")})}),!function(){AGN.Lib.CalendarService=new function(){var u,c,d,s,r,a,i,h,n,o,G,B,W,H,V,j,z,U,Y,q,K,X=0,Q=t("date.monthsFull"),l=new Date,p=(l.setHours(0,0,0,0),l.getMonth()),f=l.getFullYear(),g=l.getDate(),m=!0,v={},y="MONTH",b=[],Z=0,e=!1,w=0;function C(){e=!0,w++}function A(){--w<=0&&(w=0,e=!1,$("#calendar-wait-notification").hide())}function E(e,t){v={};for(var i=new Date(t,e,1),n=ie(e+1,t),o=i.getDay()-d,r=(o<0&&(o=7+o),Math.ceil((n+o)/7)),n=new Date(t,e,1-o),o=new Date(t,e,1+7*r),i=new Date(n),s=0;s<r;s++){var a="row-"+(s+1);$("#calendar-container").append('<tr id="'+a+'"><td class="calendar-week-number-cell">'+i.getWeek(d)+"</td></tr>");for(var l=0;l<7;l++){var c=i.getMonth()!=e;O(i,i.getDate(),"",!0,a,c),i.setDate(i.getDate()+1)}}$("#calendar-days").html(Q[e]+" "+t),ve(n,o),pe(n,o),ge(n,o),me(n,o),ue(),P(),F(),we(e,t)}function x(e,t,i){v={};var n=new Date(t,e,i),o=(n.getDay(),n.setDate(i-n.getDay()-1+d),new Date(n.getFullYear(),n.getMonth(),n.getDate()));o.setDate(o.getDate()+1),s=o.getWeek(d),0==e&&1==i&&1!=o.getWeek(d)&&(o.setTime(o.getTime()+6048e5),n.setTime(n.getTime()+6048e5)),$("#calendar-container").append('<tr id="week-row"></tr>'),$("#week-row").append('<td class="calendar-week-number-cell">'+o.getWeek(d)+"</td>");for(var r=0;r<=6;r++)n.setDate(n.getDate()+1),O(n,AGN.Lib.DateFormat.format(n,u),"calendar-week-day-container",!1,"week-row",!1);$("#calendar-days").html(AGN.Lib.DateFormat.format(o,u)+" - "+AGN.Lib.DateFormat.format(n,u)),ve(o,n),pe(o,n),ge(o,n),me(o,n),ue(),F(),be(e,t,i)}function J(e,t){var i;e.draggable({stack:t,revert:"invalid",distance:20,start:function(){(i=$("#popup-"+e.prop("id"))).hide(),i.detach(),te()},stop:function(){$("#calendar-popup-holder").append(i)}})}function ee(e){J(e,".calendar-mail-label")}function S(e){J(e,".calendar-comment")}function T(){$(".calendar-comments-toggle").css("visibility","hidden"),$(".calendar-day-container").has(".calendar-comment").each(function(){$(this).find(".calendar-comments-toggle").css("visibility","visible")}),F()}function te(){var e;document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&(e=window.getSelection())&&e.removeAllRanges&&e.removeAllRanges()}function ie(e,t){return new Date(t,e,0).getDate()}function k(e){var e="SELECT_MONTH"==e;e&&m||!e&&!m?m?we(p,f):be(p,f,g):(D(),e?((e=new Date(f,p,g)).setDate(e.getDate()+7),1==s&&f<e.getFullYear()&&(p=0,f++,g=1),E(p,f),m=!0):(x(p,f,g),m=!1))}function D(){$("#calendar-container").empty(),$("#calendar-popup-holder").empty(),$(".calendar-mail-label").remove()}function R(e){var e=e?-7:7,t=(D(),new Date(f,p,g)),e=(t.setDate(t.getDate()+e),g=t.getDate(),p=t.getMonth(),f=t.getFullYear(),t.setDate(t.getDate()+e),$("#month_list_year option")),i=Number(e[e.length-1].value),e=Number(e[0].value);t.getFullYear()<i&&ye(),t.getFullYear()>e&&L(),x(p,f,g)}function ne(){D(),--p<0&&(p=11,f--);var e=$("#month_list_year option"),e=Number(e[e.length-1].value);f<e&&ye(),E(p,f)}function oe(){D(),11<++p&&(p=0,f++);var e=$("#month_list_year option");Number(e[0].value)<f&&L(),E(p,f)}function O(e,t,i,n,o,r){var s="",a="",r=(r?s="calendar-another-month-day":((r=new Date(e.getFullYear(),e.getMonth(),e.getDate())).getTime()==l.getTime()&&(s="calendar-current-day"),0!=r.getDay()&&6!=r.getDay()||(s+=" calendar-weekend-day",a=" calendar-weekend-day-label")),I(new Date(e.getFullYear(),e.getMonth(),e.getDate()))),e="day-"+r;$("#"+o).append('<td id="'+e+'" data-date="'+r+'" class="calendar-day-container '+i+" "+s+'"></td>'),$("#"+e).append('<div class="calendar-day-label'+a+'" id="label-'+e+'"></div>'),$("#label-"+e).append(t),se(e),n&&re(e),v[e]=!n}function re(e){$("#label-"+e).append('<button type="button" class="calendar-comments-toggle" title="'+t("calendar.title.show_hide_comment")+'"><i class="icon icon-comments"></i></button>'),$("#"+e+" .calendar-comments-toggle").css("visibility","hidden")}function se(e){$("#label-"+e).append('<button type="button" class="calendar-comments-add" title="'+t("calendar.title.new_comment")+'"><i class="icon icon-plus"></i></button>'),$("#label-"+e+" .calendar-comments-add").css("visibility","hidden"),$("#"+e).mouseover(function(){$("#"+e).hasClass("calendar-another-month-day")||$("#label-"+e+" .calendar-comments-add").css("visibility","visible")}),$("#"+e).mouseout(function(){$("#label-"+e+" .calendar-comments-add").css("visibility","hidden")})}function ae(e){var i,r,n="comment-"+e.id,o="day-"+e.getDateAsString(),s=e.text.replace(/\n/g,"<br>"),a=$("#"+o),l=$("#"+n);!l.exists()&&a.exists()&&(l=$('<div id="'+n+'" data-comment-id="'+e.id+'" class="calendar-mail-label calendar-comment"><span class="calendar-badge comment-badge"><span class="comment-text-content">'+s+"</span></span></div>"),v[o]||l.css("display","none"),a.append(l),(o=$("#calendar-popup-holder")).append('<input type="hidden" id="deadline-'+n+'" name="'+n+'" value="'+e.isDeadline+'"/>'),o.append('<input type="hidden" id="notified-'+n+'" name="'+n+'" value="'+e.isNotified+'"/>'),o.append('<input type="hidden" id="emm-user-type-'+n+'" name="'+n+'" value="'+e.isEmmUserType+'"/>'),o.append('<input type="hidden" id="notify-admin-id-'+n+'" name="'+n+'" value="'+e.notifyAdminId+'"/>'),o.append('<input type="hidden" id="recipients-'+n+'" name="'+n+'" value="'+e.recipients+'"/>'),o.append('<input type="hidden" id="plannedSendDate-'+n+'" name="'+n+'" value="'+e.getPlannedSendDateAsString()+'"/>'),l.dblclick(function(){AGN.Lib.CalendarService.showCommentDialog(AGN.Lib.ReminderService.getReminder(n,e.currentAdminName))}),i=$('<button type="button" id="remove-'+n+'" class="calendar-comments-remove"><i class="icon icon-trash-o"></i></button>'),l.find(".comment-badge").append(i),i.attr("title",t("calendar.title.delete_comment")),i.on("click",function(){return $("#deadline-"+n).remove(),$("#popup-"+n).remove(),l.remove(),he(n),T(),F(),!1}),l.mouseover(function(){i.css("display","block")}),l.mouseout(function(){i.css("display","none")}),S(l),r=e.id,a=s,$("#calendar-popup-holder").append('<div class="calendar-mail-popup" id="popup-comment-'+r+'"></div>'),$("#popup-comment-"+r).append('<div class="arrow"></div>'),$("#popup-comment-"+r).append('<div class="calendar-mail-popup-header">'+t("calendar.common.comment")+"</div>"),$("#popup-comment-"+r).append('<div class="calendar-mail-popup-content"><p class="comment-text-content">'+a+"</p></div>"),$("#popup-comment-"+r).css("display","none"),$("#popup-comment-"+r).css("word-wrap","break-word"),$("#comment-"+r).mouseover(function(){var e=$("#popup-comment-"+r),t=$(this),i=t.offset().top-$(window).scrollTop(),n=t.outerHeight(),o=e.outerHeight(),n=t.offset().top+n+15;o+15<i?(n=t.offset().top-o-15,e.addClass("top"),e.removeClass("bottom")):(e.addClass("bottom"),e.removeClass("top")),e.css({top:n,left:t.offset().left+t.outerWidth()/2-e.outerWidth()/2}),e.css("z-index","1500"),e.css("display","block")}),$("#comment-"+r).mouseout(function(){$("#popup-comment-"+r).css("display","none")}))}function le(e,i,t){var n,o,r,s,a,l=e.data("date");"true"!=i.attr("sent")&&(n=i.data("time"),a=_e(l,n),c<=a&&("true"==i.attr("planned")&&(o=i.find("a")).hasClass("calendar-mailing-status-planned-in-past")&&(r="calendar-"+i.attr("workstatus").replace(/\./g,"-"),o.addClass(r).removeClass("calendar-mailing-status-planned-in-past")),(o=new Date(a)).setHours(o.getHours()-3),o<c&&(n=null,i.data("time",null)),r=e.find(".calendar-mail-label"),s=!1,n&&$(r.get().reverse()).each(function(){var e=$(this),t=e.data("time");t&&t<n&&(e.after(i),s=!0)}),s||((a=r.filter("[data-mailing-id]").last()).length?(a.after(i),s=!0):e.append(i)),F(),$.ajax({type:"POST",url:B,data:{mailingId:t,date:l}})))}function ce(e,t,i){var n=e.data("date");switch(t.data("status")){case r:return;case a:if(_e(n,"00:00")<l)return}var o=e.find(".calendar-mail-label").filter("[data-push-id]").last();o.length?o.after(t):e.append(t),$.ajax({type:"POST",url:H,data:{pushId:i,date:n}})}function ue(){$(".calendar-day-container").droppable({hoverClass:"calendar-day-hover",drop:function(e,t){var i,n,o,r,s=$(this),a="UNKNOWN",l=t.draggable.data("comment-id");if(l?a="COMMENT":(l=t.draggable.data("mailing-id"))?a="MAILING":(l=t.draggable.data("push-id"))&&(a="PUSH"),"UNKNOWN"!=a)switch(t.draggable.css({top:"",left:""}),a){case"COMMENT":i=s,n=t.draggable,o=l,r=i.data("date"),v["day-"+r]||$(".js-calendar-toggle-all-comments").prop("checked")||n.hide(),i.append(n),de(AGN.Lib.ReminderService.getReminder("comment-"+o,h)),F(),T();break;case"MAILING":le(s,t.draggable,l);break;case"PUSH":ce(s,t.draggable,l)}}})}function F(){var e=$("#calendar-table").height();$(".calendar-sidebar").css({"max-height":e+"px"})}function de(o){$.ajax({type:"POST",url:z,data:{commentId:o.id,date:o.getDateAsString(),comment:o.text,deadline:o.isDeadline,sendNow:o.isSendNow,emmUserType:o.isEmmUserType,notifyAdminId:o.notifyAdminId,recipients:o.recipients,notified:o.isNotified,plannedSendDate:o.getPlannedSendDateAsString()},success:function(e){var t,i,n;void 0===e.commentId?AGN.Lib.Page.render(e):(o.isSendNow=!1,0==o.id?(o.id=e.commentId,ae(o),T()):(t="comment-"+(e=o).id,i=$("#"+t),$("#deadline-"+t).val(e.isDeadline),$("#emm-user-type-"+t).val(e.isEmmUserType),$("#notify-admin-id-"+t).val(e.notifyAdminId),$("#recipients-"+t).val(e.recipients),n=e.text.replace(/\n/g,"<br>"),S(i),i.find(".comment-text-content").html(n),$("#popup-"+t+" .comment-text-content").html(n),$("#plannedSendDate-"+t).val(e.getPlannedSendDateAsString())))}})}function he(e){$.ajax({type:"POST",url:U,data:{commentId:AGN.Lib.ReminderService.getReminderIdFromTag(e)}})}function pe(e,t){e=I(e),t=I(t),C(),$.ajax({type:"GET",url:G,data:{startDate:e,endDate:t}}).done(function(e){$.each(e,function(e,t){var i,n,o=$("#day-"+t.sendDate),r=$("#"+t.mailingId);o.exists()&&!r.exists()&&(n=function(e){e=(e.sent&&"mailing.status.test"!=e.workstatus&&K?q:Y).replace("{mailingId}",e.mailingId);return e}(t),i=t.plannedInPast?"calendar-mailing-status-planned-in-past":"calendar-"+t.workstatus.replace(".","-"),i={sent:t.sent,planned:t.planned,mailingId:t.mailingId,statusClass:i,mailingLink:n,workstatus:t.workstatus,shortname:t.shortname,sendTime:t.sendTime},r=AGN.Lib.Template.dom("calendar-mail-link",i),o.append(r),i.subject=t.subject,i.mailsSent=t.mailsSent,i.previewImage=function(e,t){t=t?AGN.url("/assets/core/images/facelift/post_thumbnail.jpg"):e?AGN.url("/sc?compID="+e):AGN.url("/assets/core/images/facelift/no_preview.svg");return t}(t.preview_component,t.isOnlyPostType),i.popupClass=t.preview_component?"":"calendar-mail-popup-preview-missing",i.emptyWorkstatus=!t.workstatus.trim(),i.openers=t.openers,i.clickers=t.clickers,i.workstatusIn=t.workstatusIn,n=AGN.Lib.Template.dom("calendar-mail-popup",i),$("#calendar-popup-holder").append(n),AGN.Lib.CalendarService.addMailingDragging(r))}),F()}).always(A)}function fe(e){switch(e.status){case r:return e.sendDate;case a:return e.startDate;default:return I(function(e){{var t,i;if(e)return t=e[0],i=e[1]-1,e=e[2],new Date(t,i,e)}return null}(e.plannedFor))}}function ge(e,t){C(),$.ajax({type:"GET",url:W,data:{startDate:I(e),endDate:I(t)}}).done(function(e){var n=AGN.Lib.Template.prepare("calendar-planned-push-notification");$.each(e,function(e,t){var i=$(n(t));$("#day-"+fe(t)).append(i),ee(i)}),F()}).always(A)}function me(e,t){C(),$.ajax({type:"POST",url:V,data:{startDate:I(e),endDate:I(t)},success:function(e){var n=AGN.Lib.Template.prepare("calendar-auto-optimization");$.each(e,function(e,t){var i=$(n({optimizationId:t.campaignID,shortname:t.shortname,linkUrl:0==(i=t).workflowId?"optimize.do?method=view&optimizationID="+i.id:"workflow/"+i.workflowId+"/view.action",status:t.autoOptimizationStatus}));$("#day-"+t.sendDate).append(i)}),F()}}).always(A)}function ve(e,t){$.ajax({type:"GET",url:j,data:{startDate:I(e),endDate:I(t)},success:function(e){$.each(e,function(e,t){var i,n;t=t,i=_.cloneDeep(AGN.Lib.ReminderService.reminder),n=t.recipients.adminId,i.id=t.commentId,i.setDate(t.date),i.text=t.comment,i.notifyAdminId=n,i.isEmmUserType=0!=n,i.currentAdminName=t.adminName,i.isDeadline=t.deadline,i.isNotified=t.notified,i.setPlannedSendDate(t.plannedSendDates),i.recipients=t.recipients.value,AGN.Lib.CalendarService.addComment(i)}),AGN.Lib.CalendarService.checkHideCommentIconsVisibility(),P(),F()}})}function L(){for(var e=$("#month_list_year option"),t=$("#weeks_list_year option"),i=Number(e[e.length-1].value),n=0;n<e.length;n++){var o=Number(e[n].value)+1;e[n].text=o,e[n].value=o,t[n].text=o,t[n].value=o}e[e.length]=new Option(i,i),t[t.length]=new Option(i,i)}function ye(){var e=$("#month_list_year option"),t=$("#weeks_list_year option"),i=Number(e[e.length-1].value)-1;e[e.length]=new Option(i,i),t[t.length]=new Option(i,i)}function M(e){e=AGN.Lib.DateFormat.parseFormat(e,getDateFormat());p=e.getMonth(),f=e.getFullYear(),g=e.getDate(),D(),m?E(p,f):x(p,f,g)}function be(e,t,i){var n=new Date(t,e,i),n=(n.setDate(i-n.getDay()-1+d),new Date(n.getFullYear(),n.getMonth(),n.getDate())),e=(n.setDate(n.getDate()+1),0==e&&1==i&&1!=n.getWeek(d)&&n.setTime(n.getTime()+6048e5),n.getWeek(d));1==e&&(i=new Date(n.valueOf()+6048e5),n.getFullYear()!=i.getFullYear()&&(t=i.getFullYear())),$("#weeks_list_year")[0].selectedIndex=$("#weeks_list_year option[value = "+t+"]")[0].index,N($("#weeks_list_year")[0]),$("#weeks_list")[0].selectedIndex=$("#weeks_list option[value = "+e+"]")[0].index,$("#weeks_list_year").select2({minimumResultsForSearch:-1}),$("#weeks_list").select2({minimumResultsForSearch:-1})}function we(e,t){$("#month_list_year")[0].selectedIndex=$("#month_list_year option[value = "+t+"]")[0].index,$("#month_list")[0].selectedIndex=$("#month_list option[value = "+e+"]")[0].index,$("#month_list").select2({minimumResultsForSearch:-1}),$("#month_list_year").select2({minimumResultsForSearch:-1})}function N(e){b=[];var t,i,n,o,r,s=6048e5,a=e.options[e.selectedIndex].value,l=(new Date(a,11,31),new Date(a,0,1)),c=(l.setDate(1-l.getDay()-1+d),l.setDate(l.getDate()+1),new Date(l.getFullYear(),l.getMonth(),l.getDate()));for(c.setTime(l.getTime()+s-864e5),1!=l.getWeek(d)&&(l.setTime(l.getTime()+s),c.setTime(c.getTime()+s));(t=new Object).number=l.getWeek(d),t.firstDay=new Date(l.getFullYear(),l.getMonth(),l.getDate()),t.lastDay=new Date(c.getFullYear(),c.getMonth(),c.getDate()),b.push(t),l.setTime(l.getTime()+s),c.setTime(c.getTime()+s),1!=l.getWeek(d)&&l.getFullYear()==a;);for(i in $("#weeks_list option").remove(),b)b.hasOwnProperty(i)&&(n=document.createElement("option"),o=AGN.Lib.DateFormat.format(b[i].firstDay,u),r=AGN.Lib.DateFormat.format(b[i].lastDay,u),n.value=b[i].number,n.innerHTML=b[i].number+" : "+o+" - "+r,$("#weeks_list").append(n))}function Ce(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i}function I(e){return Ce(e.getDate(),2)+"-"+Ce(e.getMonth()+1,2)+"-"+e.getFullYear()}function _e(e,t){if(e=e.match(/^(\d\d)-(\d\d)-(\d{4})$/)){var i=e[1],n=e[2]-1,o=e[3];if(t)if(e=t.match(/^(\d\d):(\d\d)$/))return t=e[1],e=e[2],new Date(o,n,i,t,e);return new Date(o,n,i)}return null}function P(){$(".js-calendar-toggle-all-comments").prop("checked")&&$(".calendar-table .calendar-comment").show()}function Ae(e){var t,e=encodeURI(e);return-1!=e.indexOf("%")?(0==(t=e.split("%").length-1)&&t++,t+=e.length-3*t):t=e.length,t}this.getMonthMode=function(){return m},this.getDayWidth=function(){return X},this.getCurMonth=function(){return p},this.getCurYear=function(){return f},this.getCurDay=function(){return g},this.setDayWidth=function(e){X=e},this.setUp=function(e){u=e.localeDatePattern,c=new Date(e.currentServerTime),d=e.firstDayOfWeek,s=l.getWeek(d),r=e.pushStatusSent,a=e.pushStatusScheduled,h=e.adminName,i=e.secondsBeforeWaitMessage,n=e.urls.CALENDAR_UNSENT_MAILINGS,o=e.urls.CALENDAR_PLANNED_MAILINGS,G=e.urls.CALENDAR_MAILINGS_LIST,B=e.urls.CALENDAR_MAILINGS_MOVE,W=e.urls.CALENDAR_PUSHES_LIST,H=e.urls.CALENDAR_PUSHES_MOVE,V=e.urls.CALENDAR_AUTO_OPTIMIZATION,j=e.urls.CALENDAR_COMMENT_LIST,z=e.urls.CALENDAR_COMMENT_SAVE,U=e.urls.CALENDAR_COMMENT_REMOVE,Y=e.urls.MAILING_VIEW,q=e.urls.MAILING_STATISTICS_VIEW,K=e.isStatisticsViewPermitted},this.toggleDateSelectionMode=function(e){"SELECT_MONTH"==e&&($("#linkSelectByMonth").toggleClass("active"),$("#linkSelectByWeek").toggleClass("active"),$("#dateSelectByMonth").css("display","inline"),$("#dateSelectByWeek").css("display","none"),k(e),y="MONTH"),"SELECT_WEEK"==e&&($("#linkSelectByMonth").toggleClass("active"),$("#linkSelectByWeek").toggleClass("active"),$("#dateSelectByMonth").css("display","none"),$("#dateSelectByWeek").css("display","inline"),N($("#weeks_list_year")[0]),k(e),y="WEEK")},this.checkProgress=function(){e?i<=(Z+=.5)&&$("#calendar-wait-notification").show():Z=0},this.startProgress=C,this.stopProgress=A,this.generateMonthCalendar=E,this.generateWeekCalendar=x,this.addMailingDragging=ee,this.addCommentDragging=S,this.checkHideCommentIconsVisibility=T,this.generateUnsentMailingsTable=function(){$.ajax({type:"GET",url:n,success:function(e){$(".calendar-sidebar-content").html(e),F(),AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],$(".calendar-wrapper"))}})},this.generatePlannedMailingsTable=function(){$.ajax({type:"GET",url:o,success:function(e){$(".calendar-sidebar-content").html(e),F(),AGN.Lib.CoreInitializer.run(["tooltip","scrollable"],$(".calendar-wrapper"))}})},this.clearSelection=te,this.daysInMonth=ie,this.changeCalendarMode=k,this.removeCurrentCalendar=D,this.prevEntry=function(){m?ne():R(!0)},this.nextEntry=function(){m?oe():R(!1)},this.switchWeek=R,this.prevMonth=ne,this.nextMonth=oe,this.addDayToCalendar=O,this.addCommentsShowButton=re,this.addDayPopup=se,this.toggleComment=function(e){v["day-"+e]?$("#day-"+e+" .calendar-comment").hide():$("#day-"+e+" .calendar-comment").show(),v["day-"+e]=!v["day-"+e],F()},this.validateComment=function(e){return""==e?($("#calendar-comment-error").html(t("calendar.error.empty_comment")),!1):!(1e3<Ae(e))||($("#calendar-comment-error").html(t("calendar.error.long_comment")),!1)},this.parseRecipients=function(e){if(e){for(var t=e.split(/[,; \t\n]+/),i=[],n=0;n<t.length;n++)t[n]&&i.push(t[n]);return i}return[]},this.validateEmails=function(e){if(!e||0==e.length)return $("#calendar-comment-error").html(t("calendar.error.empty_recipient_list")),!1;if(2e3<Ae(e.join(",")))return $("#calendar-comment-error").html(t("calendar.error.long_recipient_list")),!1;for(var i=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,n=0;n<e.length;n++)if(!i.test(e[n]))return $("#calendar-comment-error").html(t("calendar.error.invalid_email")+" "+e[n]),!1;return!0},this.showCommentDialog=function(e){AGN.Lib.Modal.create($("#calendar-dialog-modal-template").html()),AGN.Lib.ReminderService.fillCommentDialog(e),$("#calendar-comment-error").html(""),AGN.Lib.ReminderService.updateVisibility()},this.addComment=ae,this.adjustSidebarHeight=F,this.saveCommentDB=de,this.removeCommentDB=he,this.showDate=function(){var e,t;if("MONTH"==y&&(e=$("#month_list option:selected").val(),t=$("#month_list_year option:selected").val(),t=new Date(t,e,1),strDate=AGN.Lib.DateFormat.format(t,getDateFormat()),e=$("#month_list_year option:selected").index()),"WEEK"==y){var i,n=$("#weeks_list option:selected").val();for(i in b)if(b.hasOwnProperty(i)&&b[i].number==n){strDate=AGN.Lib.DateFormat.format(b[i].firstDay,getDateFormat());break}e=$("#weeks_list_year option:selected").index()}0==e&&L(),M(strDate)},this.jumpToDate=M,this.jumpToday=function(){M(AGN.Lib.DateFormat.format(new Date,getDateFormat()))},this.createWeeksList=N,this.setAllCommentsCheckState=P};var e={showDiv:function(e){$("div#calendar-dialog-modal div#"+e).css("display","block")},hideDiv:function(e){$("div#calendar-dialog-modal div#"+e).css("display","none")},updateVisibility:function(){this.onScheduleChanged(),this.onDeadlineChanged()},onDeadlineChanged:function(){return $("#isDeadline:checked").val()?($("#remindDate").prop("disabled",!1),$("#remindTime").prop("disabled",!1),$(".js-open-datepicker").prop("disabled",!1),$(".js-open-timepicker").prop("disabled",!1)):($("#remindDate").prop("disabled",!0),$("#remindTime").prop("disabled",!0),$(".js-open-datepicker").prop("disabled",!0),$(".js-open-timepicker").prop("disabled",!0)),!1},onUserTypeChanged:function(e){e==this.reminder.recipientEmm?($("#emmUsers").show(),$("#customRecipients").hide()):($("#customRecipients").show(),$("#emmUsers").hide())},onScheduleChanged:function(){return $("#scheduleReminder:checked").val()?($("#admin-for-notify").prop("disabled",!1),this.showDiv("reminderDetails")):($("#admin-for-notify").prop("disabled",!0),this.hideDiv("reminderDetails")),!1},reminder:{isDeadline:!1,isSendNow:!1,isEmmUserType:!0,recipientEmm:1,recipientCustom:2,defaultDate:{date:"",hours:8,minutes:0},plannedSendDate:{date:"",hours:8,minutes:0},getDateAsString:function(){return $.datepicker.formatDate("dd-mm-yy",this.defaultDate.date)},setDate:function(e){this.defaultDate.date=$.datepicker.parseDate("dd-mm-yy",e),this.plannedSendDate.date=$.datepicker.parseDate("dd-mm-yy",e),this.plannedSendDate.hours=this.defaultDate.hours,this.plannedSendDate.minutes=this.defaultDate.minutes},getPlannedSendDateAsString:function(){return $.datepicker.formatDate("dd-mm-yy",this.plannedSendDate.date)+(this.plannedSendDate.hours<10?" 0":" ")+this.plannedSendDate.hours.toString()+(this.plannedSendDate.minutes<10?":0":":")+this.plannedSendDate.minutes.toString()},setPlannedSendDate:function(e){e=e.split(" "),this.plannedSendDate.date=$.datepicker.parseDate("dd-mm-yy",e[0]),e=e[1].split(":");this.plannedSendDate.hours=parseInt(e[0]),this.plannedSendDate.minutes=parseInt(e[1])},getScheduleReminder:function(){return this.isDeadline||this.isSendNow},getRemindCalendarDate:function(){return this.defaultDate.date.toString()==this.plannedSendDate.date.toString()&&this.defaultDate.hours==this.plannedSendDate.hours&&this.defaultDate.minutes==this.plannedSendDate.minutes},onSave:function(){e.saveReminder(e.reminder)}},getNewReminder:function(e,i){return this.reminder.id=0,this.reminder.setDate(e),this.reminder.text="",this.reminder.isEmmUserType=!0,this.reminder.notifyAdminId=i.adminId,this.reminder.recipients="",this.reminder.currentAdminName=i.adminName,this.reminder.isDeadline=!1,this.reminder.isNotified=!1,this.reminder.title=t("calendar.common.new_comment"),this.reminder.recipientEmm=i.recipientEmm,this.reminder.recipientCustom=i.recipientCustom,this.reminder},getReminder:function(e,i){var n=$("#"+e+" .comment-text-content").html()+"";return this.reminder.id=this.getReminderIdFromTag(e),this.reminder.setDate(this.getDateFromTag($("#"+e).parent().attr("id"))),this.reminder.text=n.replace(/<br>/gi,"\n"),this.reminder.isEmmUserType="true"==$("#emm-user-type-"+e).val(),this.reminder.notifyAdminId=$("#notify-admin-id-"+e).val(),this.reminder.recipients=$("#recipients-"+e).val(),this.reminder.currentAdminName=i,this.reminder.isDeadline="true"==$("#deadline-"+e).val(),this.reminder.isNotified="true"==$("#notified-"+e).val(),this.reminder.setPlannedSendDate($("#plannedSendDate-"+e).val()),this.reminder.title=t("calendar.common.edit_comment"),this.reminder},fillCommentDialog:function(e){var t=$("#calendar-dialog-modal");t.find(".modal-title").html(e.title),t.find("#comment-text").val(e.text),t.find('#reminderDetails input[name="userType"][value='+(e.isEmmUserType?e.recipientEmm:e.recipientCustom)+"]").prop("checked",!0).trigger("change"),t.find("#admin-for-notify").val(e.notifyAdminId),AGN.Lib.Select.get(t.find("#admin-for-notify")).selectValueOrSelectFirst(e.notifyAdminId),t.find("#recipients-text").val(e.recipients),t.find("#isDeadline").prop("checked",e.isDeadline),t.find("#isSendNow").prop("checked",e.isSendNow),t.find("#scheduleReminder").prop("checked",e.getScheduleReminder()),t.find("#remindDate").pickadate("picker").set("select",e.plannedSendDate.date),t.find("#remindTime").val(e.plannedSendDate.hours+":"+e.plannedSendDate.minutes)},saveReminder:function(e){var t,i,n=$("#comment-text").val();AGN.Lib.CalendarService.validateComment(n)&&(i=$("#isEmmUserType").prop("checked"),t=AGN.Lib.CalendarService.parseRecipients($("#recipients-text").val()),(i||AGN.Lib.CalendarService.validateEmails(t))&&($("#calendar-dialog-modal").modal("hide"),e.text=n,(e.isEmmUserType=i)?(e.notifyAdminId=$("#admin-for-notify").val(),e.recipients=""):(e.notifyAdminId=0,e.recipients=t.join(",")),e.isSendNow=$("#isSendNow").prop("checked"),e.isDeadline=$("#isDeadline").prop("checked"),$("#isDeadline").prop("checked")&&$("#scheduleReminder").prop("checked")?(n=$("#remindDate").pickadate("picker"),i=$("#remindTime"),e.plannedSendDate.date=AGN.Lib.DateFormat.parseFormat(n.get("select","dd-mm-yyyy"),"dd-MM-yyyy"),e.plannedSendDate.hours=i.val().substring(0,2),e.plannedSendDate.minutes=i.val().substring(3,5)):(e.plannedSendDate.date=e.defaultDate.date,e.plannedSendDate.hours=e.defaultDate.hours,e.plannedSendDate.minutes=e.defaultDate.minutes),AGN.Lib.CalendarService.saveCommentDB(e)))},getDateFromTag:function(e){return e.substr(e.indexOf("-")+1)},getReminderIdFromTag:function(e){return e.substr(e.indexOf("-")+1)}};AGN.Lib.ReminderService=e}(),!function(){function o(e,t,i,n){e=$(e).pickadate("picker").get("select",n),n=$(t).val(),t=e&&n?e+" "+n:"";$(i).val(t)}function e(e,t,i,n){$(e).pickadate("picker").on({set:function(){o(e,t,i,n)}}),$(t).on("change",function(){o(e,t,i,n)})}AGN.Lib.DomInitializer.new("campaign-autooptimization-view",function(){$("form#optimizationForm").submit(!1),e("#testMailingsSendDate","#testMailingsSendTime","input[name='testMailingsSendDateAsString']",this.config.datePattern),e("#resultSendDate","#resultSendTime","input[name='resultSendDateAsString']",this.config.datePattern)})}(),AGN.Lib.CoreInitializer.new("colorpicker",function(e){(e=e||$(document)).find(".js-colorpicker").each(function(){$(this).colorpicker({format:"hex",container:!0})})}),!function(){var A={URL:void 0,reactorChartData:{bindto:"#reactor-type-chart",data:{columns:[],type:"donut",order:null},color:{pattern:["#008F00","#92D050","#CCCDCD","#F43536"]},legend:{position:"right"}},rebuyChartData:{bindto:"#rebuy-rate-chart",data:{columns:[],type:"gauge"},color:{pattern:["#0071B9"]}},revenueChartData:{bindto:"#revenue-chart",data:{columns:[],type:"bar",labels:{show:!0,format:function(e,t,i,n){return e}},color:function(e,t){return e}},tooltip:{show:!1},axis:{rotated:!0,x:{show:!1},y:{show:!1,min:0,max:150}},legend:{show:!1},bar:{width:{ratio:.7}}},progressChartData:{bindto:"#progress-of-used-devices-chart",onrendered:function(){d3.selectAll("#progress-of-used-devices-chart").selectAll(".c3-axis.c3-axis-x").selectAll(".tick text").style("text-anchor","start")},data:{columns:[],groups:[["windows","mac","android","ios","other"]],types:{reactions:"spline"},axes:{reactions:"y2"},names:{},type:"bar",x:"date",xFormat:"%m/%d/%Y",order:null},axis:{x:{type:"timeseries",tick:{culling:!0,format:"%m/%d/%Y"}},y:{padding:{top:10},tick:{format:function(e){return e+" %"}}},y2:{show:!0,min:0}},bar:{width:{ratio:.5}},tooltip:{format:{value:function(e,t,i){return"reactions"===i?e:e+" %"}}},color:{pattern:["#0071B9","#4C9BCE","#99C6E3","#CCE3F1","#CCCDCD","#555555"]}},devicesChartData:{bindto:"#devices-reacted-on-chart",data:{columns:[],type:"donut",order:null,names:{}},legend:{position:"right"},color:{pattern:["#0071B9","#4C9BCE","#99C6E3","#CCE3F1","#CCCDCD"]}}},n={reactorChartData:{size:{width:400,height:350}},rebuyChartData:{size:{width:400,height:250}},revenueChartData:{size:{width:350,height:275}},progressChartData:{size:{width:860,height:350}},devicesChartData:{size:{width:400,height:350}}},o={reactorChartData:{size:{width:350,height:250}},rebuyChartData:{size:{width:250,height:200}},revenueChartData:{size:{width:300,height:250}},progressChartData:{size:{width:550,height:250}},devicesChartData:{size:{width:350,height:250}}},r=[],e=null,t=!1;function i(){var e={method:"getProgressOfUsedDevices"},t=$("input[name=progressOfUsedPeriod]:checked").val();"month"==t?e.byMonth=!0:"dates"==t&&(e.from=$("#progressOfUsedFrom").val(),e.till=$("#progressOfUsedTill").val()),$.ajax({type:"GET",url:AGN.Lib.RecipientStatsData.URL,data:e,success:function(e){var t=e;if(void 0!==t&&void 0!==t.usedDevicesByPeriods&&void 0!==t.usedDevices){var i={windows:t.windowsTitle,mac:t.macTitle,android:t.androidTitle,ios:t.iosTitle,other:t.otherTitle,reactions:t.numberOfReactions},e=t.usedDevices,n=[],o=[];o.push({name:"windows",count:e.windows}),o.push({name:"mac",count:e.mac}),o.push({name:"android",count:e.android}),o.push({name:"ios",count:e.ios}),o.sort(function(e,t){return t.count-e.count});for(var r=0;r<o.length;r++)n.push([i[o[r].name],o[r].count]);n.push([t.otherTitle,e.other]),A.devicesChartData.data.columns=n,A.devicesChartData.data.names=i,E("devicesChart");for(var s=[],a=[],l=0;l<o.length;l++)a[o[l].name]=l,s.push([o[l].name]);s.push(["other"],["reactions"],["date"]);for(var c=0;c<t.usedDevicesByPeriods.length;c++){var u=t.usedDevicesByPeriods[c],d=u.windows,h=u.mac,p=u.android,f=u.ios,g=u.other,m=d+h+p+f+g;s[a.windows].push(x(d/m)),s[a.mac].push(x(h/m)),s[a.android].push(x(p/m)),s[a.ios].push(x(f/m)),s[4].push(x(g/m)),s[5].push(m),s[6].push(u.date)}A.progressChartData.data.columns=s,A.progressChartData.data.names=i,A.progressChartData.data.xFormat=t.dateFormat,A.progressChartData.axis.x.min=t.min,A.progressChartData.axis.x.max=t.max,A.progressChartData.axis.x.tick.format=t.dateFormat,E("progressChart")}AGN.Lib.CoreInitializer.run("equalizer")}})}function E(e){var t,i=A[e+"Data"];null!=i&&(t=(S()?n:o)[e+"Data"],$.extend(!0,i,t),$("#"+e).removeClass("hidden"),c3.generate(i),-1==r.indexOf(e)&&r.push(e))}function x(e){return Math.round(1e3*e)/10}function S(){return 1600<=$(window).width()}function T(e,i){var n,o=i.closest(".l-stat-content").find("hr"),r=0,s=(n=0,$.each(e,function(e,t){n++}),n);$.each(e,function(e,t){i.find(".l-stat-name").text(e),i.find(".l-stat-val").text(t),++r<s&&((e=i.clone()).insertAfter(o),i=e,r<s-1&&(o=o.clone()).insertAfter(i))})}AGN.Lib.RecipientStatsData=A,AGN.Lib.DomInitializer.new("company-insights",function(){this.config&&this.config.url&&(AGN.Lib.RecipientStatsData.URL=this.config.url,$.ajax({type:"GET",url:AGN.Lib.RecipientStatsData.URL,data:{method:"ajaxStatistic"},success:function(e){if(e){var t=e.reactorType,i=e.notAvailable;if(void 0!==t){var n,o=[],r=!1;for(n in t)t.hasOwnProperty(n)&&(o.push([n,t[n]]),0<t[n]&&(r=!0));r?4==o.length?A.reactorChartData.color.pattern=["#008F00","#92D050","#CCCDCD","#F43536"]:A.reactorChartData.color.pattern=["#92D050","#CCCDCD","#F43536"]:(o=[[i,100]],A.reactorChartData.color.pattern=["#CCCDCD"]),A.reactorChartData.data.columns=o,E("reactorChart")}i=e.rebuyTitle,C=e.rebuyRate,_=e.notAvailable,void 0!==C&&(0<C?A.rebuyChartData.data.columns=[[i,x(C)]]:(A.rebuyChartData.gauge={},A.rebuyChartData.gauge.label={},A.rebuyChartData.gauge.label.format=function(e,t){return _},A.rebuyChartData.gauge.label.show=!1,A.rebuyChartData.data.columns=[[_,0]]),E("rebuyChart"));var s=e.revenue,a=e.notAvailable;if(void 0!==s){var l,c,u=["#0071B9","#4C9BCE","#99C6E3","#CCCDCD"],d=[],h=[""],p=[],f=[],g=0,m=0,v=!1;for(l in s)s.hasOwnProperty(l)&&(c=s[l],d.push(l),0<c?(v=!0,p.push(c),g+=c):p.push(0));if(v){for(var y=S()?70:60,b=!1,w=0;w<p.length;w++)f[w]=Math.round(p[w]/g*100),m+=f[w],70<=f[w]&&(b=!0);for(100!=m&&(f[f.length-1]+=100-m),w=0;w<f.length;w++)h.push(25+(b?f[w]*y/100:f[w]));A.revenueChartData.data.labels.format=function(e,t,i,n){return f[i]+"% "+d[i]}}else{for(w=0;w<d.length;w++)h.push(50),f[w]=25;A.revenueChartData.data.labels.format=function(e,t,i,n){return a}}A.revenueChartData.data.columns=[h],A.revenueChartData.data.color=function(e,t){return null!=t.value?u[t.index]:e},E("revenueChart")}C=(i=e).favoriteOpeningDays,e=$("#favOpeningDays").find(".stat-fav-day"),C=(T(C,e),i.favoriteOpeningHours),e=$("#favOpeningHours").find(".stat-fav-time"),C=(T(C,e),i.ctr),e=($("#ctr-val").text(C.toString().replace(".",",")),i.conversion),C=(0!=e?$("#conversion-val").text(e.toString().replace(".",",")):($("#conversion-val").text("---"),$("#conversion-val").parent().find(".l-stat-sign").text("")),i.pageImpressions),e=(0!=C?$("#pi-val").text(C.toString().replace(",",".")):($("#pi-val").text("---"),$("#pi-val").parent().find(".l-stat-sign").text("")),i.pageImpressionsPerVisit),C=(0!=e?$("#pi-visit-val").text(e.toString().replace(",",".")):($("#pi-visit-val").text("---"),$("#pi-visit-val").parent().find(".l-stat-sign").text("")),i.pageImpressionsPerBuy);0!=C?$("#pi-buy-val").text(C.toString().replace(",",".")):($("#pi-buy-val").text("---"),$("#pi-buy-val").parent().find(".l-stat-sign").text("")),AGN.Lib.CoreInitializer.run("equalizer")}var C,_}}),i(),$("input[type=radio][name=progressOfUsedPeriod]").change(function(){"dates"==this.value?$("#progressOfUsedDates").removeClass("hidden"):$("#progressOfUsedDates").addClass("hidden")}),$("#refreshProgressOfUsedDevices").on("click",function(){i()}),t=S(),$(window).resize(function(){null!=e&&clearTimeout(e),e=setTimeout(function(){var e=S();t!=e&&(t=e,r.forEach(function(e){E(e)}))},200)}))})}(),AGN.Lib.DomInitializer.new("connection-speed-test",function(){var o,r=this.config.SLOW_CONNECTION_THRESHOLD_KBPS,n=this.config.SPEED_TEST_RESOURCE_SIZE,s=300,a=!1,l=!1,c=!1;function e(){var i;l?setTimeout(e,2e3):(i=!0,$("img").each(function(e,t){t.complete||(i=!1)}),i&&(AGN.Lib.Loader.prevent(),$.ajax({type:"GET",url:AGN.url("/connectionSpeed/test.action")+"?cacheKiller="+Date.now(),timeout:1e4}).done(function(e){var t;a||(t=(Date.now()-o)/1e3,d((8*(n+s)/t/1e3).toFixed(2))),c=!1}).fail(function(e,t){"timeout"===t&&(d(0),c=!1)})))}$(document).ajaxSend(function(e,t,i){var n;0<=(n=i.url).indexOf("/connectionSpeedTest")||0<=n.indexOf("/connectionSpeed")?(a=!(c=!0),o=Date.now()):(c&&(a=!0),l=!0,i.url.indexOf("/lock.action")<0&&u())}),$(document).ajaxStop(function(){l=!1});var u=_.throttle(function(){e()},6e4);function d(e){var i=r<e,n=$("#internet-indicator");n.data("tooltip",i?t("defaults.ok"):e+" Kbit/s"),AGN.Lib.CoreInitializer.run("tooltip",n.parent()),n.find("i").css("color",i?"#109e4d":"#ffa300")}return window.addEventListener("offline",function(){d(0)}),!1}),AGN.Lib.CoreInitializer.new("dark-theme",function(){$("body").hasClass("dark-theme")&&$("iframe").each(function(){var e=$(this);e.on("load.iframe",function(){e.contents().find("body").addClass("dark-theme")})})}),!function(){var a={data:{chartsColors:["#0071b9","#009999","#92d050","#41641a","#ffc000"],statChartData:{columnTitles:[],c3data:{bindto:".js-stat-chart",data:{columns:[],type:"bar",labels:!0},axis:{x:{tick:{centered:!0,fit:!0,format:function(e){return a.data.statChartData.columnTitles[e]}}}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(e,t,i,n){return a.data.statChartData.columnTitles[n]},value:function(e,t,i,n){return e}}},padding:{right:25}},build:function(e,t){this.columnTitles=e;e=t.slice(0);return e.unshift("values"),this.c3data.data.columns=[e],this.c3data}},clickChartData:{c3data:{bindto:".js-click-chart",data:{rows:[],type:"donut"},size:{height:150},donut:{title:"",label:{show:!1},width:15},legend:{position:"right"},tooltip:{show:!1}},build:function(e,t,i){this.c3data.donut.title=e,this.c3data.data.rows=[t,i];for(var n={},o=0;o<t.length;o++)n[t[o]]=a.data.chartsColors[o];return this.c3data.data.colors=n,this.c3data}},viewChartData:{c3data:{bindto:".js-view-chart",data:{rows:[],type:"donut"},size:{height:150},donut:{title:"",label:{show:!1},width:15},legend:{position:"right"},tooltip:{show:!1}},build:function(e,t,i){this.c3data.donut.title=e,this.c3data.data.rows=[t,i];for(var n={},o=0;o<t.length;o++)n[t[o]]=a.data.chartsColors[o];return this.c3data.data.colors=n,this.c3data}}},updateCharts:function(e){jQuery.ajax({type:"POST",url:AGN.url("/dashboard/statistics.action"),data:{mailingId:e},success:function(e){e=_.merge({common:[["no Data","0"]],clickers:[["no Data","0"]],clickersPercent:[0],openers:[["no Data","0"]],openersPercent:[0]},e);for(var t=[],i=[],n=0;n<e.common.length;n++){var o=parseInt(e.common[n][1]);t.push(e.common[n][0]),i.push(o)}c3.generate(a.data.statChartData.build(t,i)),t=[],i=[];for(var r=0,n=0;n<e.clickers.length;n++){o=a.roundTo(100*e.clickers[n][1],1);t.push(e.clickers[n][0]),i.push(o),r+=o}if(!isNaN(r)&&0<r)for(n=0;n<i.length;n++)t[n]+=" "+a.roundTo(100*i[n]/r,1)+"%";var s=a.roundTo(100*e.clickersPercent[0],1)+"%*";c3.generate(a.data.clickChartData.build(s,t,i)),t=[],i=[];for(n=r=0;n<e.openers.length;n++){o=a.roundTo(100*e.openers[n][1],1);t.push(e.openers[n][0]),i.push(o),r+=o}if(!isNaN(r)&&0<r)for(n=0;n<i.length;n++)t[n]+=" "+a.roundTo(100*i[n]/r,1)+"%";s=a.roundTo(100*e.openersPercent[0],1)+"%*";c3.generate(a.data.viewChartData.build(s,t,i)),AGN.Lib.CoreInitializer.run("equalizer")}})},roundTo:function(e,t){return+parseFloat(e).toFixed(t)}};AGN.Lib.DashboardStatisticsService=a}(),!function(){var r=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("pickadate",function(e){e=e||$(document),_.each(e.find(".js-datepicker"),function(e){var i,t=$(e),n={editable:!0,min:new Date(0,0,0),max:new Date(9999,11,31),maxFor:void 0,minFor:void 0,klass:{holder:"datepicker__holder picker__holder"+(t.hasClass("js-datepicker-right")?" datepicker__holder-right":"")}},o=_.merge({},n,r.objFromString(t.data("datepicker-options"))),n=t.pickadate("picker");n&&n.get("start")||($(e).pickadate(o),(n=t.pickadate("picker")).on("open",function(){this.$node.parents(".input-group").find(".js-open-datepicker").addClass("is-active")}),n.on("close",function(){this.$node.parents(".input-group").find(".js-open-datepicker").removeClass("is-active")}),o.maxFor&&t.on("change",function(){var e=$(this).val()||o.min;e&&$(o.maxFor).pickadate("picker").set("max",e)}),o.minFor&&t.on("change",function(){var e=$(this).val()||o.max;e&&$(o.minFor).pickadate("picker").set("min",e)}),i=!0,t.on("change",function(){if(i){var e=$(this),t=e.pickadate("picker");try{i=!1,e.val()?t.set("select",e.val()):t.set("clear")}finally{i=!0}}}))}),_.each(e.find(".js-timepicker"),function(e){var t=$(e),e=_.merge({},{mask:"h:halfs",oncomplete:function(){t.trigger("timepicker:complete")},onincomplete:function(){t.trigger("timepicker:incomplete")}},r.objFromString(t.data("timepicker-options"))),i=e.mask;delete e.mask,t.inputmask(i,e),t.attr("placeholder",t.data("_inputmask").opts.placeholder)})})}(),AGN.Lib.CoreInitializer.new("delegate",function(e){(e=e||$(document)).all("[data-delegate]").each(function(){var e=$(this),i=e.data("delegate"),t=e.data("delegate-events")||"click";e.on(t,function(e){var t=$(i);0<t.length&&t.trigger($.Event(e))})})}),!function(){var o=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("display-dimensions",function(e){e=e||$(document),_.each(e.find("[data-display-dimensions]"),function(i){var e=$(i),t=o.objFromString(e.data("display-dimensions")).scope,n=e.parents(t).find("[data-dimensions]");e.ensureLoad(function(){var e=i.naturalWidth,t=i.naturalHeight;n.html(e+" x "+t+" px")})})})}(),AGN.Lib.CoreInitializer.new("dragster",function(e){(e=e||$(document)).find(".dropzone").each(function(){new Dragster(this)})}),AGN.Lib.CoreInitializer.new("dropdown-expand",function(e){e=e||$(document),_.each(e.find("[data-dropdown-expand]"),function(e){var i,t,n=$(e),o=n.find(".dropdown-menu"),e=n.data("dropdown-expand"),e=$(e);n.removeClass("hidden"),o.html(""),i=e.parent().width(),t=e.children().filter(n).outerWidth(!0)+15,_.each(e.siblings(),function(e){e=$(e);i-=e.outerWidth(!0)}),n.addClass("hidden"),_.reduce(e.children().not(n),function(e,t){t=$(t);return t.removeClass("hidden"),e+=t.outerWidth(!0),i<=e&&(n.removeClass("hidden"),o.append(t.clone()),t.addClass("hidden")),e},t)})}),AGN.Lib.CoreInitializer.new("dropzone",function(){Dropzone.autoDiscover=!1}),AGN.Lib.CoreInitializer.new("emoji",function(e){(e=e||$(document)).all("[data-emoji]").each(function(){$(this).emojioneArea({placeholder:null})})}),!function(){var t=AGN.Lib.Equalizer;AGN.Lib.CoreInitializer.new("equalizer",function(e){e=e||$(document),window.setTimeout(function(){e.find("[data-equalizer]").each(function(){t($(this))})},1)})}(),!function(){var o=AGN.Lib.Form;AGN.Lib.CoreInitializer.new("form",function(e){(e=e||$(document)).find("form input[type=text], form input[type=password]").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1});var n=e.all("form[data-form-focus]").first();n.exists()&&setTimeout(function(){var e,t,i=n.find('[name="'+n.data("form-focus")+'"]');!i.exists()||i.is(":disabled")||i.is(":hidden")||(i=i,e=o.get(i).$form,t=i.closest("[data-sizing=scroll], .modal").first(),e=t.length?i.offset().top-t.offset().top+t.scrollTop()-25:(t=$(document),i.offset().top-e.offset().top-25),i.trigger("focus"),t.scrollTop(e))},10),_.each(e.find("form"),function(e){o.get($(e))})})}(),AGN.Lib.DomInitializer.new("formbuilder",function(e){var t=AGN.Lib.Tooltip,i=(e=e||$(document),this.config),n=$("script#"+CSS.escape("config:formbuilderCommon")+'[type="application/json"]');1===n.length&&(i=$.extend(n.json(),i)),_.each(e.find(".js-form-builder"),function(e){AGN.Lib.FormBuilder.FormBuilder.get(e,i).promise().then(function(){$(e).find(".form-actions button").each(function(){var e=$(this);t.create(e,{title:e.text()})})})}),_.each(e.find(".modal-js-form-builder"),function(e){var t=$(e).attr("data-target-formbuilder");!t||(t=$(t))&&(t=AGN.Lib.FormBuilder.FormBuilder.get(t),AGN.Lib.FormBuilder.FormBuilder.get(e,i).setJson(t.getJson()))})}),AGN.Lib.CoreInitializer.new("icons-defs",function(e){e=e||$(document),_.each(e.find("[data-icon]"),function(e){var e=$(e),t=AGN.url("assets/icons-defs.svg#"+e.data("icon"),!0);e.html('<svg viewBox="0 0 45 45"><use xlink:href="'+t+'"/></svg>')}),svg4everybody()}),AGN.Lib.CoreInitializer.new("iframe",function(e){(e=e||$(document)).find("iframe:not(.js-fixed-iframe)").each(function(){var e,t,o,r,s,a,i,l,c=this,u=$(this);u.hasClass("js-simple-iframe")?(e=u.parent(),t=e.parent(),o=parseInt(u.data("max-width")),r=parseInt(u.data("height-extra"))||10,s=u.data("media-query"),a=!!window.sidebar,i=function(){var e=c.contentDocument||c.contentWindow.document,t=e.body,e=e.documentElement,i=s?o:Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth),n=Math.min(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight);u.height(n),n=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),u.height(n+=r),u.width(i),s&&a&&u.contents().find("body").css("overflow","hidden"),l()},l=function(){t.width("auto"),u.width()>o&&o>t.width()?e.width(u.width()):e.width(Math.min(o,t.width())),s||(e.doubleScroll(),e.parent().doubleScroll(),$(".doubleScroll-scroll-wrapper").css("margin","0 auto"))},u.off("load.iframe"),u.on("load.iframe",function(){window.setTimeout(function(){i();var e=$(c.contentDocument.body);"function"==typeof e.imagesLoaded&&e.imagesLoaded().progress(_.throttle(i,100)).always(i),$(window).off("viewportChanged.iframe",l),$(window).on("viewportChanged.iframe",l)},50)})):u.on("load.iframe",function(){window.setTimeout(function(){u.iFrameResize({heightCalculationMethod:"grow",enablePublicMethods:!0})},50)})})}),AGN.Lib.CoreInitializer.new("image-editor",function(e){e=e||$(document),_.each(e.find("#editor-canvas"),function(e){var i=e.getContext("2d"),n=new Image;n.src=$("#editor-img").attr("src"),$("#editor-result").val(""),n.onload=function(){var e=n.width,t=n.height,t=(i.canvas.width=e,i.canvas.height=t,i.drawImage(n,0,0,e,t),$("#l-editor-img-width").attr("value",e),$("#l-editor-img-height").attr("value",t),$("#l-editor-img-percent").attr("value",100),e+$("#l-img-editor-tools").width()+10),e=($("#l-img-editor").css("min-width",t),$("#editor-img").data("content-type")),t=i.canvas.toDataURL(e);$("#editor-result").attr("value",t)}})}),!function(){var n=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("input-mask",function(e){e=e||$(document),_.each(e.find(".js-inputmask"),function(e){var e=$(e),t=_.merge({},n.objFromString(e.data("inputmask-options"))),i=t.mask;delete t.mask,e.inputmask(i,t)})})}(),$.fn.queryBuilder.defaults({templates:{group:'<dl id="{{= it.group_id }}" class="rules-group-container">   <dt class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-primary" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.translate("add_rule") }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-primary" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.translate("add_group") }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-alert" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.translate("delete_group") }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.translate("conditions", condition) }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </dt>   <dd class=rules-group-body>     <ul class=rules-list></ul>   </dd> </dl>'}}),$.fn.queryBuilder.defaults({templates:{rule:'<li id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header clearfix">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-regular btn-alert" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i>       </button>     </div>     <div class="rule-operator-conditions-container pull-right"></div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </li>'}}),$.fn.queryBuilder.defaults({templates:{filterSelect:'{{ var optgroup = null; }} <select class="form-control js-select" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}">{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>'}}),$.fn.queryBuilder.defaults({templates:{ruleValueSelect:'{{ var optgroup = null; }} <select class="form-control js-select" name="{{= it.name }}" {{? it.rule.filter.multiple }}multiple{{?}}>   {{? it.rule.filter.placeholder }}     <option value="{{= it.rule.filter.placeholder_value }}" disabled selected>{{= it.rule.filter.placeholder }}</option>   {{?}}   {{~ it.rule.filter.values: entry }}     {{? optgroup !== entry.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = entry.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= entry.value }}">{{= entry.label }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>'}}),$.fn.queryBuilder.defaults({icons:{add_group:"icon icon-plus-circle",add_rule:"icon icon-plus",remove_group:"icon icon-times",remove_rule:"icon icon-trash",error:"icon icon-exclamation-triangle"}}),!function(){var t=AGN.Lib.Load;AGN.Lib.CoreInitializer.new("load",function(e){e=e||$(document),_.each(e.find("[data-load]"),function(e){window.setTimeout(function(){t.load($(e))},100)})})}(),AGN.Lib.DomInitializer.new("logon-complete",function(e){var t,e=AGN.Lib.Form.get(e),n={};window.adminId=this.config.adminId,this.config&&($.each(this.config.webStorageBundleNames,function(e,t){try{var i=AGN.Lib.Storage.get("web-storage#"+t);null!=i&&(n[t]=i)}catch(e){console.error(e)}}),(t=AGN.Lib.Storage.get("login-page")||{}).isFrameShown=!!this.config.isFrameShown,AGN.Lib.Storage.set("login-page",t)),e.setValue("webStorageJson",JSON.stringify(n)),e.submit()}),!function(){function n(){return AGN.Lib.Storage.get("login-page")||{}}function o(){var e=n(),t=new Date;t.setDate(t.getDate()+30),e.notificationDismissExpiration=t.getTime(),AGN.Lib.Storage.set("login-page",e)}AGN.Lib.DomInitializer.new("logon",function(e){var i;e.toggleClass("l-hide-frame",0==n().isFrameShown),e.removeClass("hidden"),((e=n())&&e.notificationDismissExpiration?e.notificationDismissExpiration<=Date.now():!(e=localStorage.getItem("closedDate"))||(i=new Date,(e=new Date(e)).setDate(e.getDate()+30),0<i-e))&&!0===this.config.SHOW_TAB_HINT&&(i=t("defaults.info"),e=t("logon.info.multiple_tabs"),AGN.Lib.Messages(i,e,"info",o,!1))})}(),AGN.Opt.Components.MailingContentLock={manageLock:function(e,i,n){var o,r;return 0<e&&i?(o=Date.now(),r=setInterval(function(){o+108e5>Date.now()?$.ajax({url:AGN.url("/mailing/ajax/"+e+"/lock.action"),type:"POST",success:function(e){!0!==e.success&&clearInterval(r)},statusCode:{404:function(){clearInterval(r)}}}):(clearInterval(r),$(document).trigger("ajax:unauthorized"),$.ajax({url:AGN.url("/logout.action"),type:"POST",success:function(){$("body").append(AGN.Lib.Template.text("session-expired"))}}))},45e3),!0):(AGN.Lib.Modal.createFromTemplate({modalClass:"",title:t("defaults.warning"),content:t("error.mailing.exclusiveLockingFailed",n)},"modal"),!1)}},AGN.Lib.DomInitializer.new("mailing-content-overview",function(e,t){var i,n,o=this.config,t=(t||(t=AGN.Lib.Storage.get("mailings-content-dynNameID"))&&(t=$("tr[data-dyn-name-id='"+t.dynNameID+"']")).exists()&&(i=t.position().top,setTimeout(function(){$("body").scrollTop(i)},1),AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:0})),$("#myDatePicker"));t.exists()&&(t.pickadate("picker").on({set:function(e){"select"in e?(e=new Date(e.select),$("#startDay").val(e.getDate()),$("#startMonth").val(e.getMonth()+1),$("#startYear").val(e.getFullYear())):($("#startDay").val(0),$("#startMonth").val(0),$("#startYear").val(0))}}),(n=$("#myTimePicker")).on("timepicker:complete",function(){var e=n.val();$("#startHour").val(e.substr(0,2)),$("#startMinute").val(e.substring(3,5))}),n.on("timepicker:incomplete",function(){$("#startHour").val(0),$("#startMinute").val(0)})),o.isEditableMailing&&AGN.Opt.Components.MailingContentLock.manageLock(o.mailingId,o.isMailingExclusiveLockingAcquired,o.anotherLockingUserName)||((t=$('[data-controls-group="editing"]')).prop("disabled",!0),t.addClass("disabled"))}),AGN.Lib.DomInitializer.new("mailing-content-view",function(e){AGN.Lib.Storage.set("mailings-content-dynNameID",{dynNameID:e.data("dyn-name-id")})}),AGN.Lib.Controller.new("mailing-followup-options",function(){var t,i="",n=[],o="";this.addDomInitializer("mailing-followup-options",function(){var e=this.config;t=$(e.followUpContainer),i=$(e.mailingIdContainer),n=e.additionalOptions,o=e.advertisingUrl,changeFollowUpOptionsSet(),i.on("change",function(){changeFollowUpOptionsSet()})}),getAdditionalAdvertisingOptions=function(){return AGN.Lib.Template.text("followupAdvertisingOptions",{items:n})},changeFollowUpOptionsSet=function(){var e=AGN.Lib.Select.get(i).getSelectedValue();jQuery.ajax({action:"POST",url:o,data:{mailingId:e},success:function(e){t.children(".advertisingOption").remove(),e.isAdvertisingContentType&&t.append(getAdditionalAdvertisingOptions())}})}}),AGN.Lib.DomInitializer.new("mailing-overview-filters",function(){$("#filtersDescription").html(AGN.Lib.Template.text("mailing-overview-filters",this.config)),$("#mailing").after($("#mailings-overviewPreview"))}),AGN.Lib.DomInitializer.new("mailing-overview-table",function(e){e.removeClass("hidden")}),!function(){function s(e,i,n,o,r,s){var a=o,l=e;function c(e,t){var e=e||"",i=t.select2("container").find(".select2-chosen");t.select2("val",e),i.text(e)}l.select2({openOnEnter:!0,minimumInputLength:1,initSelection:function(e,t){},id:function(e){return r?e.mailingID:a},formatResult:function(e){return'<div style="box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);"><div class="row"><div class="col-sm-6">'+t("fields.mailing.parameter")+'</div><div class="col-sm-6">'+e.name+'</div></div><div class="row"><div class="col-sm-6">'+t("fields.mailing.description")+'</div><div class="col-sm-6">'+e.description+'</div></div><div class="row"><div class="col-sm-6">'+t("fields.mailing.for_mailing")+'</div><div class="col-sm-6">'+e.mailingID+'</div></div><div class="row"><div class="col-sm-6">'+t("fields.mailing.change_date")+'</div><div class="col-sm-6  ">'+new Date(e.changeDate).toLocaleDateString()+"</div></div></div>"},formatSelection:function(e){if(r)return e.mailingID;AGN.Lib.Page.reload(s.replace("{mailing-info-id}",e.mailingInfoID),!0)},ajax:{url:i,data:function(e){var t={};return c(a=e,l),t[n]=e,t},results:function(e){var t=0;return e.forEach(function(e){e.id=t++}),{results:e}},cache:!0}}),l.on("select2-open",function(){var e=a;e=a||"",l.select2("search",e)}),c(o,l)}AGN.Lib.DomInitializer.new("mailing-parameter-list-search-initializer",function(e){var e=AGN.Lib.Helpers.objFromString(e.data("config")),t=e.searchLink,i=e.viewLink,n=e.mailingSearchQuery,e=e.parameterSearchQuery,o=$("#parameter_search_field"),r=$("#mailing_search_field");s(o,t,"parameterSearchQuery",e,!1,i),s(r,t,"mailingSearchQuery",n,!0)})}(),AGN.Lib.DomInitializer.new("mediapool-image-pick",function(i){var e=i.find("#mediapool-image-pick-options"),n=i.find("#mediapool-browser-results"),o=i.find(".modal-body"),r=i.find("#mpFilterKeywords"),s=i.find("#mpFilterCategory"),a=i.find("#mpSortCriteria"),l=i.find("#mpIsAscendingSortOrder"),c=AGN.Lib.Template.prepare("mediapool-browser-results-template"),u=AGN.Lib.Select.get(s);function d(e){var t=e.data("image-id");return 0<t?h.images.find(function(e){return e.id===t})||{id:t}:null}var h=e.json(),p=null;function f(){o.addClass("ui-modal-loading"),$.ajax({type:"POST",url:h.urls.MEDIAPOOL_VIEW,data:{categoryId:s.val(),keywords:r.val(),sortCriteria:a.val(),isAscendingSortOrder:l.val()}}).done(function(e){var t=e.fullListSize,e=e.partialList;n.html(c({results:e,fullListSize:t})),h.images=e,p=null}).fail(function(){n.html(c({results:[],fullListSize:0})),h.images=[],p=null}).always(function(){o.removeClass("ui-modal-loading")})}h.images&&n.html(c({results:h.images,fullListSize:h.fullListSize})),i.is("[load-filters-on-init]")&&$.ajax({type:"GET",url:h.urls.FILTERS_JSON}).done(function(e){_.each(e.categories,function(e){u.addFormattedOption('<option value="'+e.id+'" data-id="'+e.id+'" data-parent-id="'+e.parentId+'">'+e.shortname+"</option>")})}),i.is("[load-images-on-init]")&&f(),this.addAction({click:"mpSearchImages",enterdown:"mpFilterKeywords"},f),this.addAction({dblclick:"mpSelectImage"},function(){var e=d(this.el);e&&AGN.Lib.Confirm.get(i).positive(e)}),this.addAction({click:"mpSelectImage"},function(){p&&p.removeClass("active"),(p=this.el).addClass("active")}),this.addAction({click:"mpAcceptImage"},function(){var e;p?(e=d(p))&&AGN.Lib.Confirm.get(i).positive(e):AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")})}),AGN.Lib.CoreInitializer.new("menu",function(){AGN.Lib.Menu.init()}),!function(){var o={data:{chartsColors:["#26b98a"],statChartData:{columnTitles:[],c3data:{bindto:"#barchart-message-stats",data:{columns:[],type:"bar",labels:!0},axis:{x:{tick:{centered:!0,fit:!0,format:function(e){return o.data.statChartData.columnTitles[e]}}},y:{show:!1}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(e,t,i,n){return o.data.statChartData.columnTitles[n]},value:function(e,t,i,n){return e}}},padding:{right:25,left:25}},build:function(e){return this.columnTitles.push(e.shift()),e.unshift("values"),this.c3data.data.columns=[e],this.c3data}}},updateChart:function(e){$.ajax({type:"GET",url:e,success:function(e){c3.generate(o.data.statChartData.build(e)),AGN.Lib.CoreInitializer.run("equalizer")}})}};AGN.Lib.MessageStatisticsService=o,AGN.Lib.DomInitializer.new("message-stat",function(e){e=AGN.Lib.Helpers.objFromString(e.data("config"));e&&e.url&&o.updateChart(e.url)})}(),AGN.Lib.DomInitializer.new("news-editor-period",function(e){var t=e,i=(t=e||$(document),[]);_.each(t.find(".js-datepicker"),function(e){e=$(e);e.hasClass("js-datepicker-period-start")&&(e.attr("datepicker-period-id")in i||(i[e.attr("datepicker-period-id")]={startEl:null,endEl:null}),i[e.attr("datepicker-period-id")].startEl=e),e.hasClass("js-datepicker-period-end")&&(e.attr("datepicker-period-id")in i||(i[e.attr("datepicker-period-id")]={startEl:null,endEl:null}),i[e.attr("datepicker-period-id")].endEl=e)});for(var n=0;n<i.length;n++)!function(e,t){var i=e,n=t;i.get("value")&&n.set("min",i.get("select"));n.get("value")&&i.set("max",n.get("select"));i.on("set",function(e){e.select?n.set("min",i.get("select")):"clear"in e&&n.set("min",!1)}),n.on("set",function(e){e.select?i.set("max",n.get("select")):"clear"in e&&i.set("max",!1)})}(i[n].startEl.pickadate("picker"),i[n].endEl.pickadate("picker"))}),!function(){var s={data:{chartsColors:["#0071b9","#009999","#92d050","#41641a","#ffc000"],browserChartData:{c3data:{bindto:"#notificationGlobalBrowserStat",data:{rows:[],type:"donut"},donut:{label:{show:!0}},legend:{position:"right"},tooltip:{show:!1}},build:function(e,t){this.c3data.data.rows=[e,t];for(var i={},n=0;n<e.length;n++)i[e[n]]=s.data.chartsColors[n];return this.c3data.data.colors=i,this.c3data}}},roundTo:function(e,t){return+parseFloat(e).toFixed(t)},updateChart:function(e){$.ajax({type:"POST",url:e,success:function(e){if(e&&e.warning&&0<e.warning.length)AGN.Lib.JsonMessages(e,!0);else{var t=[],i=[],n=0;for(key in e){var o=s.roundTo(100*e[key],1);t.push(key),i.push(o),n+=o}if(!isNaN(n)&&0<n)for(var r=0;r<i.length;r++)t[r]+=" "+s.roundTo(100*i[r]/n,1)+"%";c3.generate(s.data.browserChartData.build(t,i)),AGN.Lib.CoreInitializer.run("equalizer")}}})}};AGN.Lib.GLobalNotificationBrowserStatService=s,AGN.Lib.DomInitializer.new("notification-global-browser-stat",function(e){e=AGN.Lib.Helpers.objFromString(e.data("config"));e&&e.url&&AGN.Lib.GLobalNotificationBrowserStatService.updateChart(e.url)})}(),!function(){var u={data:{chartColors:["#0071b9","#006600","#b30000"],globalProgressChartData:{columnTitles:[],c3data:{bindto:"#notificationGlobalProgressStat",data:{x:"x",columns:[]},axis:{x:{type:"category",tick:{centered:!0,fit:!1}}},padding:{right:25}},build:function(e,t,i,n){this.c3data.data.columns=[e,t,i,n];e={};return e[t[0]]=u.data.chartColors[0],e[i[0]]=u.data.chartColors[1],e[n[0]]=u.data.chartColors[2],this.c3data.data.colors=e,this.c3data}}},updateChart:function(e){var n=["x"],o=[],r=[],s=[],t=$("#selectMode").val(),i=$("#selectMonth").val(),a=$("#selectYear").val(),l=$("#startDay").val(),c=$("#endDay").val();$.ajax({type:"POST",url:e,data:{dateMode:t,selectMonth:i,selectYear:a,startDay:l,endDay:c},success:function(e){if(e&&e.warning&&0<e.warning.length)AGN.Lib.JsonMessages(e,!0);else{for(objIndex in e){var t=e[objIndex];for(objKey in t){0==objIndex&&"time"!=objKey&&(0==o.length?o.push(objKey):0==r.length?r.push(objKey):0==s.length&&s.push(objKey));var i=t[objKey];"time"==objKey?n.push(i):objKey==o[0]?o.push(i):objKey==r[0]?r.push(i):objKey==s[0]&&s.push(i)}}c3.generate(u.data.globalProgressChartData.build(n,o,r,s)),AGN.Lib.CoreInitializer.run("equalizer")}}})}};AGN.Lib.GLobalNotificationProgressStatService=u,AGN.Lib.DomInitializer.new("notification-global-progress-stat",function(e){e=AGN.Lib.Helpers.objFromString(e.data("config"));e&&e.url&&AGN.Lib.GLobalNotificationProgressStatService.updateChart(e.url)})}(),!function(){var o={data:{chartsColors:["#0071b9","#92D050","#41641A"],statusChartData:{columnTitles:[],c3data:{bindto:"#notificationGlobalStatusStat",data:{columns:[],type:"bar",labels:!0,color:function(e,t){return o.data.chartsColors[t.index]}},axis:{x:{tick:{centered:!0,fit:!0,format:function(e){return o.data.statusChartData.columnTitles[e]}}},y:{show:!1}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(e,t,i,n){return o.data.statusChartData.columnTitles[n]},value:function(e,t,i,n){return e}}},padding:{right:25,left:25}},build:function(e,t){this.columnTitles=e;e=t.slice(0);return e.unshift("values"),this.c3data.data.columns=[e],this.c3data}}},updateChart:function(e){$.ajax({type:"POST",url:e,success:function(e){if(e&&e.warning&&0<e.warning.length)AGN.Lib.JsonMessages(e,!0);else{var t=[],i=[];for(key in e)t.push(key),i.push(e[key]);c3.generate(o.data.statusChartData.build(t,i)),AGN.Lib.CoreInitializer.run("equalizer")}}})}};AGN.Lib.GLobalNotificationStatusStatService=o,AGN.Lib.DomInitializer.new("notification-global-status-stat",function(e){e=AGN.Lib.Helpers.objFromString(e.data("config"));e&&e.url&&AGN.Lib.GLobalNotificationStatusStatService.updateChart(e.url)})}(),AGN.Lib.CoreInitializer.new("push-notification-preview",function(e){e=e||$(document),_.each(e.find(".push-notification-preview-button"),function(e){function i(e){e.prop("disabled",!0),e.parent().attr("data-tooltip",e.parent().attr("data-tooltip-if-disabled"))}var n=$(e),r=n.data("notification-form");"denied"==Notification.permission?i(n):n.on("click",function(){function t(){var e=$("#"+r),t=e.find("#pushTitle"),i=e.find("#pushContent"),n=e.find("#pushIcon"),e=e.find("#pushLink"),t=t?t.val():"",i=i?i.val():"",n=n?n.val():"",o=e?e.val():"";new Notification(t,{body:i,icon:n}).onclick=function(e){e.preventDefault(),window.open(o,"_blank")}}"granted"!=Notification.permission?Notification.requestPermission(function(e){"granted"==e?t():"denied"==e&&i(n)}):t()})})}),!function(){var d={data:{chartsColors:["#0071b9"],statChartData:{columnTitles:[],c3data:{bindto:"#barchart-notification-stats",data:{columns:[],type:"bar",labels:!0},axis:{x:{tick:{centered:!0,fit:!0,format:function(e){return d.data.statChartData.columnTitles[e]}}}},legend:{show:!1},tooltip:{format:{title:function(){return null},name:function(e,t,i,n){return d.data.statChartData.columnTitles[n]},value:function(e,t,i,n){return e}}},padding:{right:25}},build:function(e,t){this.columnTitles=e;e=t.slice(0);return e.unshift("values"),this.c3data.data.columns=[e],this.c3data}},progressChartData:{c3data:{bindto:"#progresschart-notification-stats",data:{x:"x",columns:[]},axis:{x:{type:"category",tick:{fit:!1}}},zoom:{enabled:!0,rescale:!0},subchart:{show:!0},padding:{right:25}},build:function(e,t,i){return this.c3data.data.columns=[e,t,i],this.c3data}}},updateCharts:function(e,t){$.ajax({type:"POST",url:t,data:{pushID:e},success:function(e){var t,i=e.common,n=[],o=[];for(t in i)i.hasOwnProperty(t)&&(n.push(t),o.push(i[t]));c3.generate(d.data.statChartData.build(n,o));var r=e.viewsclicks,s=["x"],a=[],l=[];for(objIndex in r){var c,u=r[objIndex];for(c in u)u.hasOwnProperty(c)&&(0==objIndex&&"time"!=c&&(0==a.length?a.push(c):0==l.length&&l.push(c)),"time"==c?s.push(u[c]):a[0]==c?a.push(u[c]):l[0]==c&&l.push(u[c]))}c3.generate(d.data.progressChartData.build(s,a,l)),AGN.Lib.CoreInitializer.run("equalizer")}})}};AGN.Lib.NotificationStatService=d,AGN.Lib.DomInitializer.new("notification-stats",function(e){e=AGN.Lib.Helpers.objFromString(e.data("config"));e&&e.pushId&&e.url&&AGN.Lib.NotificationStatService.updateCharts(e.pushId,e.url)})}(),AGN.Lib.CoreInitializer.new("polling-form",function(e){(e=e||$(document)).find('[data-form="polling"]').each(function(){AGN.Lib.Form.get($(this)).submit()})}),AGN.Lib.CoreInitializer.new("popover-validate",function(){AGN.Lib.Popover.validate()}),!function(){function s(e){var n=[];return e.forEach(function(e){var i=$("<option />");i.text(t("date.formats."+e)),i.val(e),n.push($("<div/>").append(i).html())}),n.join("")}AGN.Lib.CoreInitializer.new("target-group-query-builder-extend",function(){var e,o,i,n,r,l,c;window.queryBuilderIsExtended||(window.queryBuilderIsExtended=!0,l={},e=$.fn.queryBuilder,o=e.constructor,i=o.prototype.init,n=o.prototype.validate,r=o.prototype.bindEvents,l=o.utils,c=o.selectors,Object.assign(c,{rule_include_empty:".rule-include-empty[name*=_include_empty]",rule_operator_conditions_container:".rule-operator-conditions-container",rule_header_inputs:".rule-header :input"}),l.defineModelProperties(o.Rule,["includeEmpty"]),e.extend({init:function(e){return this.on("afterCreateRuleInput",function(e,t){var i,n=e.builder.optionsByType[t.filter.type];n&&(i=n.postCreate)&&"function"==typeof i&&i.call(e.builder,t,n)}),this.on("afterUpdateRuleOperator",function(e,t){var i,n=e.builder.optionsByType[t.filter.type];n&&(i=n.postOperatorUpdate)&&"function"==typeof i&&i.call(e.builder,t,n)}),this.setupInitialRule(e),i.call(this,e)},isEmptyOrInitial:function(e){return!(e&&e.rules&&e.rules.length)||!(1!==e.rules.length||!e.rules[0].initialRule&&!e.rules[0].empty)},setupInitialRule:function(e){this.isEmptyOrInitial(e)?(this.initialRule=!0,e.rules=[{initialRule:!0,empty:!0}]):this.initialRule=!1},optionsByType:{date:{availableFormats:function(e){return e&&e.type&&("before"==e.type||"after"==e.type)?["YYYYMMDD"]:["DD.MM.YYYY","YYYYMMDD","DDMMYYYY","MMDD","DDMM","DD","MM","YYYY"]},input:function(e,i){return $('<div class="qb-input-label"><label class="checkbox-inline"><input name="today" type="checkbox"><span class="text">'+t("defaults.today")+'</span></label></div><div class="qb-input-element date-filter"><input class="form-control" type="text" id="date-filter"/></div><div class="qb-input-label" id="date-offset-label" style="display: none;"><div class="form-badge qb-input-inner">'+t("defaults.days")+'</div></div><div class="qb-input-label"><div class="qb-input-inner">'+t("date.formats.label")+'</div></div><div class="qb-input-element"><select class="form-control" id="date-format">'+s(i.availableFormats(i.operator))+'</select></div><div class="qb-input-label"><div class="qb-input-inner"><button type="button" class="icon icon-help" data-help="help_'+this.settings.helpLanguage+'/targets/DateFormat.xml"></button></div></div>')},postCreate:function(i){var n=i.$el.find("input[name=today]"),o=i.$el.find("#date-offset-label"),r=i.$el.find("#date-filter"),s=i.$el.find("#date-format");n.on("change",function(){var e,t=n.prop("checked");o.toggle(t),r.off("change.offset keyup.offset"),i._updating_input||(i._updating_value=!0,t?r.val("+0"):r.val((e=new Date,s.val().replace("DD",AGN.Lib.Helpers.pad(e.getDate(),2)).replace("MM",AGN.Lib.Helpers.pad(e.getMonth()+1,2)).replace("YYYY",AGN.Lib.Helpers.pad(e.getFullYear(),4)))),i._updating_value=!1),t&&r.on("change.offset keyup.offset",function(e){var t,i=r.val();i?(t=parseInt(i),isNaN(t)||(t=(t<0?"":"+")+t)!=i&&r.val(t)):"change"===e.type&&r.val("+0")})})},postOperatorUpdate:function(e,t){var i=e.$el.find("#date-format");i.html(s(t.availableFormats(e.operator))),i.change(),i.trigger("change-date-format")},valueSetter:function(e,t){var i,n,o=t.slice(0),r=e.$el.find("input[name=today]"),s=e.$el.find("#date-offset-label"),a=e.$el.find("#date-format"),l=!1,t=(2<t.length?("today"===o.shift()&&(l=!0),n=o.shift(),i=o.shift()):"today"===(n=o.shift())&&(l=!0,n="+0"),o.shift());s.toggle(l),o=e,s=n,(e=i)&&(s="sub"===e?"-"+Math.abs(s):"+"+Math.abs(s)),o.$el.find("#date-filter").val(s),a.val(t),r.prop("checked",l).change()},valueGetter:function(e){var t=[],i=e.$el.find("#date-filter").val(),n=e.$el.find("#date-format").val();return e.$el.find("input[name=today]").is(":checked")?(t.push("today"),t.push(i),e=t,-1===Math.sign(i)?e.push("sub"):e.push("add")):t.push(i),t.push(n),t},validate:function(e){var t;if(2==e.length)return i=e[0],t=e[1],i?"today"==i||!t||(!!function(e,t){if(!e)return;var i=function(e){var t=["DD","MM","YYYY"],i=[];for(;e;){var n=function(e){var t=["DD","MM","YYYY",".","-","_"];if(e)for(var i=0;i<t.length;i++)if(e.startsWith(t[i]))return t[i];return!1}(e);if(!n)return!1;var o,r=!1,s=!1;t.includes(n)&&(s=r=!0,i.length&&(o=i[i.length-1]).isDigitFragment&&(o.isLenient=!1,s=!1)),i.push({lexeme:n,isDigitFragment:r,isLenient:s}),e=e.substring(n.length)}return!!i.length&&i}(t);if(i){for(var n=0;n<i.length;n++){var o=i[n];if(o.isDigitFragment)if(o.isLenient){var r=e.match("^\\d{1,"+o.lexeme.length+"}");if(!r)return;e=e.substring(r[0].length)}else{if(e.length<o.lexeme.length)return;if(!e.substr(0,o.lexeme.length).match(/^\d+$/))return;e=e.substring(o.lexeme.length)}else{if(!e.startsWith(o.lexeme))return;e=e.substring(o.lexeme.length)}}return!e}return}(i,t.toUpperCase())||["invalid_format"]):["empty_date"];if(4==e.length){var i=e[1];if(!i||i!=parseInt(i))return["invalid_expression"]}return!0}}},clearInitialRuleSettings:function(){this.initialRule=!1,$(".initial-rule").removeClass("initial-rule")},isInitial:function(e){return!(1!==e.length||!e[0].$el.hasClass("initial-rule"))||!(!this.initialRule||1!==e.length)&&(e[0].$el.addClass("initial-rule"),!0)},validate:function(e){var t=this.model.root.rules,e=_.clone(e);return(e=$.extend({skip_filter_validation:!0,skip_empty:!1},e)).skip_filter_validation&&(e.skip_empty=!0),this.isInitial(t)?(this.clearErrors(),!0):(this.clearInitialRuleSettings(),n.call(this,e))},getRuleInput:function(e,t){var i=e.filter,n=e.filter.validation||{},o=e.id+"_value_"+t,r=i.vertical?" class=block":"",s="";if("function"==typeof i.input)s=i.input.call(this,e,o);else if("function"==typeof e.operator.input)s=e.operator.input.call(this,e,o);else if(this.optionsByType[e.filter.type]&&"function"==typeof this.optionsByType[e.filter.type].input)s=this.optionsByType[e.filter.type].input.call(this,e,this.optionsByType[e.filter.type],o);else switch(i.input){case"radio":case"checkbox":l.iterateOptions(i.values,function(e,t){s+="<label"+r+'><input type="'+i.input+'" name="'+o+'" value="'+e+'"> '+t+"</label> "});break;case"select":s=this.getRuleValueSelect(o,e);break;case"textarea":s+='<textarea class="form-control" name="'+o+'"',i.size&&(s+=' cols="'+i.size+'"'),i.rows&&(s+=' rows="'+i.rows+'"'),void 0!==n.min&&(s+=' minlength="'+n.min+'"'),void 0!==n.max&&(s+=' maxlength="'+n.max+'"'),i.placeholder&&(s+=' placeholder="'+i.placeholder+'"'),s+="></textarea>";break;case"number":s+='<input class="form-control" type="number" name="'+o+'"',void 0!==n.step&&(s+=' step="'+n.step+'"'),void 0!==n.min&&(s+=' min="'+n.min+'"'),void 0!==n.max&&(s+=' max="'+n.max+'"'),i.placeholder&&(s+=' placeholder="'+i.placeholder+'"'),i.size&&(s+=' size="'+i.size+'"'),s+=">";break;default:s+='<input class="form-control" type="text" name="'+o+'"',i.placeholder&&(s+=' placeholder="'+i.placeholder+'"'),"string"===i.type&&void 0!==n.min&&(s+=' minlength="'+n.min+'"'),"string"===i.type&&void 0!==n.max&&(s+=' maxlength="'+n.max+'"'),i.size&&(s+=' size="'+i.size+'"'),s+=">"}return this.change("getRuleInput",s,e,o)},getRuleValueSelect:function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)},updateRuleOperator:function(e,t){var i=e.$el.find(c.value_container);e.operator&&0!==e.operator.nb_inputs?(i.css("display",""),!i.is(":empty")&&t&&"function"!=typeof t.input&&"function"!=typeof e.operator.input&&e.operator.nb_inputs===t.nb_inputs&&e.operator.optgroup===t.optgroup||this.createRuleInput(e)):(i.hide(),e.__.value=void 0),e.operator&&(e.$el.find(c.rule_operator).val(e.operator.type),e.__.value=this.getRuleInputValue(e),this.createExtendedOperatorConditions(e)),this.trigger("afterUpdateRuleOperator",e,t),this.trigger("rulesChanged")},createExtendedOperatorConditions:function(e){var i,n=this,o=e.$el.find(c.rule_operator_conditions_container);"not_equal"===e.operator.type?(e.includeEmpty=!0,i=$('<div class="qb-input-label"><label class="checkbox-inline"><input type="checkbox" class="rule-include-empty" name="'+e.id+'_include_empty" checked="checked"/><span class="text">'+t("querybuilder.common.include_empty")+"</span></label></div>"),o.html(i),i.find(c.rule_include_empty).on("change",function(){e.includeEmpty=n.getRuleIncludeEmptyValue(e)}),e.$el.find(c.rule_header_inputs).prop("disabled",e.flags.header_readonly)):(e.includeEmpty=!1,o.html(""))},createRuleOperators:function(e){var t,i,n=e.$el.find(c.operator_container).empty();e.filter&&(t=this.getOperators(e.filter),e.filter.skipOperator||(i=$(this.getRuleOperatorSelect(e,t)),n.html(i)),e.filter.default_operator?e.__.operator=this.getOperatorByType(e.filter.default_operator):e.__.operator=t[0],e.$el.find(c.rule_operator).val(e.operator.type),this.trigger("afterCreateRuleOperators",e,t),this.applyRuleFlags(e))},createRuleInput:function(e){var t=e.$el.find(c.value_container).empty();if(e.__.value=void 0,e.filter&&e.operator&&0!==e.operator.nb_inputs){for(var i=this,n=$(),o=e.filter,r=0;r<e.operator.nb_inputs;r++){var s,a=$(this.getRuleInput(e,r));o.canBeNegated&&(s=i.getNegateInput(),t.prepend(s),n=n.add(s)),0<r&&t.append(this.settings.inputs_separator),t.append(a),"function"==typeof o.values&&o.values.call(this,a),n=n.add(a)}t.css("display",""),n.on("change "+(o.input_event||""),function(){e._updating_input||(e._updating_value=!0,e.negated=i.getNegateValue(e),e.value=i.getRuleInputValue(e),e._updating_value=!1)}),o.plugin&&n[o.plugin](o.plugin_config||{}),this.trigger("afterCreateRuleInput",e),void 0!==o.default_value?e.value=o.default_value:(e._updating_value=!0,e.negated=i.getNegateValue(e),e.value=i.getRuleInputValue(e),e._updating_value=!1),this.applyRuleFlags(e)}},setRuleInputValue:function(e,t){var i=e.filter,n=e.operator;if(i&&n){if(e._updating_input=!0,i.valueSetter)i.valueSetter.call(this,e,t);else if("function"==typeof e.operator.valueSetter)e.operator.valueSetter.call(this,e,t);else if(this.optionsByType[e.filter.type]&&"function"==typeof this.optionsByType[e.filter.type].valueSetter)this.optionsByType[e.filter.type].valueSetter.call(this,e,t);else{var o=e.$el.find(c.value_container);1===n.nb_inputs&&(t=[t]);for(var r=0;r<n.nb_inputs;r++){var s=l.escapeElementId(e.id+"_value_"+r);switch(i.input){case"radio":o.find("[name="+s+'][value="'+t[r]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":$.isArray(t[r])||(t[r]=[t[r]]),t[r].forEach(function(e){o.find("[name="+s+'][value="'+e+'"]').prop("checked",!0).trigger("change")});break;default:n.multiple&&i.value_separator&&$.isArray(t[r])&&(t[r]=t[r].join(i.value_separator)),o.find("[name="+s+"]").val(t[r]).trigger("change")}}}this.setNegated(e),e._updating_input=!1}},getRuleInputValue:function(e){var t=e.filter,i=e.operator,n=[];if(t.valueGetter)n=t.valueGetter.call(this,e);else if("function"==typeof e.operator.valueGetter)n=e.operator.valueGetter.call(this,e);else if(this.optionsByType[e.filter.type]&&"function"==typeof this.optionsByType[e.filter.type].valueGetter)n=this.optionsByType[e.filter.type].valueGetter.call(this,e);else{for(var o=e.$el.find(c.value_container),r=0;r<i.nb_inputs;r++){var s,a=l.escapeElementId(e.id+"_value_"+r);switch(t.input){case"radio":n.push(o.find("[name="+a+"]:checked").val());break;case"checkbox":s=[],o.find("[name="+a+"]:checked").each(function(){s.push($(this).val())}),n.push(s);break;case"select":t.multiple?(s=[],o.find("[name="+a+"] option:selected").each(function(){s.push($(this).val())}),n.push(s)):n.push(o.find("[name="+a+"] option:selected").val());break;default:n.push(o.find("[name="+a+"]").val())}}n=n.map(function(e){return i.multiple&&t.value_separator&&"string"==typeof e&&(e=e.split(t.value_separator)),$.isArray(e)?e.map(function(e){return l.changeType(e,t.type)}):l.changeType(e,t.type)}),1===i.nb_inputs&&(n=n[0]),t.valueParser&&(n=t.valueParser.call(this,e,n))}return this.change("getRuleValue",n,e)},getRuleIncludeEmptyValue:function(e){return e.$el.find(c.rule_include_empty).is(":checked")},validateValue:function(e,t){var i=e.filter.validation||{},n=!0,n=i.callback?i.callback.call(this,t,e):"function"==typeof e.operator.validate?e.operator.validate.call(this,t,e):this.optionsByType[e.filter.type]&&"function"==typeof this.optionsByType[e.filter.type].validate?this.optionsByType[e.filter.type].validate.call(this,t,e):this._validateValue(e,t);return this.change("validateValue",n,t,e)},getRules:function(o){o=$.extend({get_flags:!1,allow_invalid:!1,skip_empty:!1},o);var e=this.validate(o);if(!e&&!o.allow_invalid)return null;var r=this,t=function t(e){var i,n={condition:e.condition,rules:[]};return e.data&&(n.data=$.extendext(!0,"replace",{},e.data)),o.get_flags&&(i=r.getGroupFlags(e.flags,"all"===o.get_flags),$.isEmptyObject(i)||(n.flags=i)),e.each(function(e){var t,i;!e.filter&&o.skip_empty||(t=null,e.operator&&0===e.operator.nb_inputs||(t=e.value),t={id:e.filter?e.filter.id:null,field:e.filter?e.filter.field:null,type:e.filter?e.filter.type:null,input:e.filter?e.filter.input:null,operator:e.operator?e.operator.type:null,value:t,includeEmpty:e.includeEmpty},(e.filter&&e.filter.data||e.data)&&(t.data=$.extendext(!0,"replace",{},e.filter.data,e.data)),e.filter&&e.filter.canBeNegated&&(t.negated=e.negated),o.get_flags&&(i=r.getRuleFlags(e.flags,"all"===o.get_flags),$.isEmptyObject(i)||(t.flags=i)),n.rules.push(r.change("ruleToJson",t,e)))},function(e){e=t(e);0===e.rules.length&&o.skip_empty||n.rules.push(e)},this),r.change("groupToJson",n,e)}(this.model.root);return t.valid=e,this.change("getRules",t)},setRules:function(e,o){o=$.extend({allow_invalid:!1},o),this.setupInitialRule(e),(e=$.isArray(e)?{condition:this.settings.default_condition,rules:e}:e)&&e.rules&&(0!==e.rules.length||this.settings.allow_empty)||l.error("RulesParse","Incorrect data object passed"),this.clear(),this.setRoot(!1,e.data,this.parseGroupFlags(e)),this.applyGroupFlags(this.model.root),e=this.change("setRules",e,o);var r=this;!function i(e,n){null!==n&&(void 0===e.condition?e.condition=r.settings.default_condition:-1==r.settings.conditions.indexOf(e.condition)&&(l.error(!o.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',e.condition),e.condition=r.settings.default_condition),n.condition=e.condition,e.rules.forEach(function(e){var t;void 0!==e.rules?-1!==r.settings.allow_groups&&r.settings.allow_groups<n.level?(l.error(!o.allow_invalid,"RulesParse","No more than {0} groups are allowed",r.settings.allow_groups),r.reset()):null!==(t=r.addGroup(n,!1,e.data,r.parseGroupFlags(e)))&&(r.applyGroupFlags(t),i(e,t)):(e.empty||(void 0===e.id&&(l.error(!o.allow_invalid,"RulesParse","Missing rule field id"),e.empty=!0),void 0===e.operator&&(e.operator="equal")),null!==(t=r.addRule(n,e.data,r.parseRuleFlags(e)))&&(e.id&&(e.empty||(t.filter=r.getFilterById(e.id,!o.allow_invalid)),t.filter&&(t.operator=r.getOperatorByType(e.operator,!o.allow_invalid),t.operator||(t.operator=r.getOperators(t.filter)[0])),t.negated=e.negated,t.operator&&0!==t.operator.nb_inputs&&(t.includeEmpty=!!e.includeEmpty,void 0!==e.value?t.value=e.value:void 0!==t.filter.default_value&&(t.value=t.filter.default_value))),r.change("jsonToRule",t,e)!=t&&l.error("RulesParse","Plugin tried to change rule reference")))}),r.change("jsonToGroup",n,e)!=n&&l.error("RulesParse","Plugin tried to change group reference"))}(e,this.model.root),this.validate(),this.trigger("afterSetRules")},getNegateValue:function(e){var t,e=e.$el.find("select.negate");return t=0!==e.length?"true"===e.val():t},getNegateInput:function(){var e='<div class="qb-input-negate"><select class="form-control negate"><option value="false">'+t("defaults.yes")+'</option><option value="true">'+t("defaults.no")+"</option></select></div>";return $(e)},setNegated:function(e){var t=e.$el.find("select.negate");0!==t.length&&t.val(""+e.negated)},displayError:function(e){var t;this.settings.display_errors&&(null===e.error?e.$el.removeClass("has-error"):(t=this.translate("errors",e.error[0]),t=this.constructor.utils.fmt(t,e.error.slice(1)),t=this.change("displayError",t,e.error,e),e.$el.addClass("has-error").find(this.constructor.selectors.error_container).eq(0).attr("data-tooltip",t),AGN.Lib.CoreInitializer.run("tooltip",e.$el)))},bindEvents:function(){r.call(this);var n=this;this.model.on("update",function(e,t,i){t instanceof o.Rule&&"includeEmpty"===i&&n.updateRuleIncludeEmpty(t)})},findRuleByField:function(e,t,i){function n(e){return e.hasOwnProperty("rules")}var o;return n(e)?(o=this,e.rules.find(function(e){return n(e)?!!i&&o.findRuleByField(e,i):e.field&&e.field===t})):e.field&&e.field===t},deleteRuleByField:function(e,t,i){var n,o=this;if(e=e||o.model.root)return n=!1,e.each("reverse",function(e){e&&e.filter&&e.filter.id==t&&(n&=o.deleteRule(o.getModel(e.$el)))},function(e){n&=o.deleteRuleByField(e,t,i)},o),!!n},setOrReplaceRule:function(e,t,i){return e=e||this.getRules({allow_invalid:!0,skip_empty:!0}),!(!t||!t.id)&&((i=this.findRuleByField(e,t.id,i))?$.extend(i,t):e.rules.push(t),this.setRules(e),!0)},containsNotEmptyRule:function(e){var t=this,e=t.getModel(e);return e.rules&&e.rules.length?e.rules.every(function(e){return e.hasOwnProperty("rules")?t.containsNotEmptyRule(e):!!e.filter}):!!e.filter}}),o.prototype.updateRuleIncludeEmpty=function(e){e.$el.find(c.rule_include_empty).prop("checked",e.includeEmpty),this.trigger("rulesChanged")})})}(),!function(){var n="---",o=.01,r="< 1",w={HIGH_PERFORMER:"#008F00",OPPORTUNITY:"#92D050",LEAD:"#CCCDCD",SLEEPER:"#F43536"},C=500,_=150,A="poor-dog",E="question-mark",x="rising-star",S="cash-cow";function T(i){var n=["data1"],o=[],r=0;return $.each(i.values,function(e,t){r<t&&(r=t),n.push(t),o.push(i.percentages[e])}),{values:n,percentages:o,maxValue:r}}function k(e,i){$(e.axes.x[0]).find(".tick text").attr("y",function(e,t){return parseInt(t||0)+i})}function D(i){var e=t("statistic.reactions"),n=t("statistic.impressions"),o=t("statistic.revenue"),r={},s=(r[e]="#99c6e3",r[n]="#f43536",r[o]="#0071b9",[]),a=[e],l=[n],c=[o],u=!1,d=!1,e=($.each(i.values,function(e,t){s.push(e),a.push(t.reactions),l.push(t.impressions),c.push(t.revenues),0<t.impressions&&(u=!0),0<t.revenues&&(d=!0)}),[a]),n={reactions:"area"},h=(u&&(e.push(l),n.impressions="area"),d&&(e.push(c),n.revenues="bar"),i.mailingNames),o=s.length,p=3;o<60?p=5:o<100&&(p=4),c3.generate({bindto:"#reaction-progress-chart",onrendered:function(){k(this,10)},size:{height:200},data:{columns:e,types:n,color:function(e,t){return r[t.id||t]||e}},tooltip:{format:{title:function(e){var e=s[e],t=i.values[e].mailingIds;return t.length?h[t[0]]:e}}},bar:{width:10},point:{r:p},axis:{x:{type:"category",categories:s,height:40,tick:{multiline:!1,centered:!0,outer:!1,culling:!0}},y:{show:!1}}})}function R(e,t){var e=$(e),i=e.find(".l-kpi-value"),e=e.find(".l-kpi-sign");0<t?t<o?i.text(r):i.text(d3.round(t,2)):i.text(n),e.toggle(0<t)}AGN.Lib.DomInitializer.new("recipient-insights",function(){var n,e,o,r,s,a,l,c,u=this.config,i=this.config.insightsData,d=($.i18n.load(u.translations),n=T(n=i.weekdayReactionRankData),e=t("recipient.reaction.day"),h=t("date.weekdaysShort"),c3.generate({bindto:"#reaction-weekday-chart",onrendered:function(){k(this,10)},size:{height:200},data:{type:"bar",columns:[n.values],labels:{format:{data1:function(e,t,i){return n.percentages[i]+"%"}}},color:function(e,t){return t.value===n.maxValue?"#0071b9":"#eaeaea"}},bar:{width:{ratio:.88}},legend:{show:!1},tooltip:{format:{name:function(){return e}}},axis:{x:{type:"category",categories:h,tick:{outer:!1}},y:{show:!1,padding:{top:20,bottom:20}}}}),i.hourReactionRankData),h=(d=T(d),c3.generate({bindto:"#reaction-hour-chart",onrendered:function(){k(this,10)},size:{height:200},data:{type:"bar",columns:[d.values],labels:{format:{data1:function(e,t,i){return d.percentages[i]+"%"}}},color:function(e,t){return t.value===d.maxValue?"#0071b9":"#eaeaea"},onmouseover:function(t){this.internal.mainText.style("visibility",function(e){return t.index===e.index?"visible":"hidden"})},onmouseout:function(t){this.internal.mainText.filter(function(e){return t.index===e.index}).style("visibility","hidden")}},bar:{width:{ratio:.7}},legend:{show:!1},tooltip:{show:!1},axis:{x:{type:"category",categories:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],tick:{multiline:!1,centered:!0,outer:!1}},y:{show:!1,padding:{top:20,bottom:20}}}}),i.mailingsRevenueRatingData),p=u.mailingUriPattern,f=u.localeLanguage;function g(e){return"asc"===e.sorting?"icon icon-arrow-down":"desc"===e.sorting?"icon icon-arrow-up":"hidden"}var m=[{title:t("mailing.senddate"),criterion:"timestamp",sorting:!1},{title:t("statistic.revenue"),criterion:"revenue",sorting:!1},{title:t("Mailing"),criterion:"name",sorting:!1}],f=function(e){var t;t="de"===e?(e=d3.locale({decimal:",",thousands:".",grouping:[3],currency:[""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M√§rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),e.numberFormat):d3.format;return function(e){return[{text:e.date,classes:"l-revenue-date"},{text:t(",.2f")(e.revenue),classes:"l-revenue-value"},{text:e.name,mailingId:e.mailingId,classes:"l-revenue-name"}]}}(f),v=$.noop,y=d3.select("#mailings-revenue-rating-table").append("table"),b=((m=y.append("thead").append("tr").selectAll("th").data(m).enter().append("th")).append("span").on("click",function(e){v(e)}).attr("class","clickable unselectable").html(function(e){return e.title+"&nbsp;"}),m.append("i").attr("class",g)),y=(h.length?(o=y.append("tbody").selectAll("tr").data(h).enter().append("tr"),(m=o.selectAll("td").data(f).enter().append("td").attr("class",function(e){return e.classes})).filter(function(e){return!e.mailingId}).text(function(e){return e.text}),m.filter(function(e){return 0<e.mailingId}).append("a").attr("href",function(e){return p.replace("{mailing-id}",e.mailingId)}).attr("title",function(e){return e.text}).text(function(e){return e.text}),v=function(i){b.attr("class",function(e){return e.sorting=e===i&&("asc"===e.sorting?"desc":"asc"),g(e)});var n="desc"===i.sorting?d3.descending:d3.ascending;o.sort(function(e,t){return n(e[i.criterion],t[i.criterion])})}):o=y.append("tbody").append("tr").append("td").attr("colspan",3).attr("class","l-revenue-unavailable").text(t("recipient.chart.not_available")),D(i.reactionsInProgressData),h=i.reactionDeviceRankData,r=["#0071B9","#009BFF","#64C3FF","#00558A","#92D050"],s=[],a={},l={},c={},$.each(h,function(e,i){var n="data"+e;s.push([n,i.value]),a[n]=t(i.deviceClass),l[n]=i.percentage,c[n]=r[e]}),c3.generate({bindto:"#reaction-device-chart",size:{height:200},data:{columns:s,type:"donut",names:a,color:function(e,t){return c[t.id||t]||e}},donut:{label:{format:function(e,t,i){return l[i]+"%"}}},legend:{position:"right"},tooltip:{format:{value:function(e,t,i){return e+" ("+l[i]+"%)"}}}}),R("#reactionTypeKpi",(f=i.mailingReactionPercentageData).percentage.percentage),$("#reactionGradeIcon").css("color",function(e){return w[e]||"inherit"}(f.grade)),R("#revenueSumKpi",(m=i.customerRevenueData).value),R("#revenueAvgKpi",m.average),$("#revenueIcon").addClass(function(e){return C<=e?S:_<=e?x:0<e?E:A}(m.value)),i.customerPerformanceData);0<y.clicks.percentage?R("#performanceClicksKpi",y.clicks.percentage):R("#performanceClicksKpi",0<y.clicks.value?.001:0),R("#performanceRevenueKpi",y.revenue),R("#impressionsByClickKpi",(h=i.pageImpressionsData).perClick),R("#impressionsByVisitKpi",h.perVisit),R("#impressionsByBuyKpi",h.perBuy),this.addAction({change:"selectReactionProgressPeriodType"},function(){$("#reactionProgressPeriodDates").toggleClass("hidden","CUSTOM"!==this.el.val())}),this.addAction({click:"selectReactionProgressPeriod"},function(){var e,i,n=$('input[name="reactionProgressPeriod"]:checked');switch(n.val()){case"YEAR":case"MONTH":e=n.data("min"),i=n.data("max");break;case"CUSTOM":e=$("#reactionProgressMinDate").val(),i=$("#reactionProgressMaxDate").val();break;default:return void console.error("Unexpected period type: `"+n.val()+"`")}e&&i?$.ajax(u.urls.reactionsInProgress,{type:"GET",data:{customerId:u.customerId,min:e,max:i}}).done(function(e){D(e)}):AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")})})}(),!function(){function i(e){var t=e.contents().find("body"),i=t.find("center");i.length?(t.css("background","#303030"),i.css("background","#303030")):e.contents().find("body").css("color","#ffffff")}AGN.Lib.DomInitializer.new("recipient-report-initializer",function(e){var t;e=e,$("body").hasClass("dark-theme")&&((t=e.find("iframe")).on("load.iframe",function(){i(t)}),t.ready(function(){i(t)}))})}(),AGN.Lib.CoreInitializer.new("relative-href",function(e){(e=e||$(document)).find("a[data-relative]").each(function(){var e=$(this);e.attr("href",AGN.url(e.attr("href"))),e.removeAttr("data-relative")})}),AGN.Lib.CoreInitializer.new("scrollable",function(e){e=e||$(document),_.each(e.find(".js-scrollable"),function(e){e=$(e);e.perfectScrollbar("destroy"),e.perfectScrollbar({wheelSpeed:5,scrollXMarginOffset:1})})}),!function(){var a=AGN.Lib.Popover,l=AGN.Lib.Template,c=AGN.Lib.Page;AGN.Lib.CoreInitializer.new("select",["template"],function(e){e=e||$(document),_.each(e.all("select"),function(e){var t,i,n,o=$(e),e=o.data("result-template"),r=(o.data("select2")&&o.select2("destroy"),{placeholder:o.attr("placeholder"),minimumResultsForSearch:10}),s=(o.hasClass("js-select")||(r.minimumResultsForSearch=-1),o.prop("multiple")&&(t=o.data("selection-template"),r.minimumResultsForSearch=1,t?(i=l.prepare(t),r.formatSelection=function(e){return i({element:e.element[0],isLocked:e.locked,isDisabled:e.disabled,text:e.text,value:e.id})}):r.formatSelection=function(e){if(e.element&&1===e.element.length){var t=$(e.element).data("url");if(t)return $("<a></a>",{href:t,text:e.text,click:function(){c.reload(t)}})}return e.text}),e?(n=l.prepare(e),r.formatResult=function(e){return n({element:e.element[0],isLocked:e.locked,isDisabled:e.disabled,text:e.text,value:e.id})}):o.hasClass("js-option-popovers")&&(r.formatResult=function(e,t,i,n){n='<span style="white-space: nowrap;">'+n(e.text)+"</span>";return a.new(t,{trigger:"hover",delay:{show:300,hide:100},html:!0,template:'<div class="popover popover-wide" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:n}),n},o.on("select2-close",function(){a.validate()})),r.formatSelection);r.formatSelection=function(e){var t=e.text;return t&&(e.text=t.trim()),(s instanceof Function?s:$.fn.select2.defaults.formatSelection).apply(this,arguments)},o.select2(r),0<o.find("option[data-exclusive]").length&&o.on("select2-selecting",function(e){var t;0<o.find("option[value='"+e.val+"'][data-exclusive]").length?(t=!1,o.find("option:selected:not([data-exclusive])").each(function(){t=!0,$(this).removeAttr("selected")})):(t=!1,o.find("option:selected[data-exclusive]").each(function(){t=!0,$(this).removeAttr("selected")})),t&&o.trigger("change")})})})}(),AGN.Lib.DomInitializer.new("session-timer",function(){var i,n,o=6e5,r=5e3,s=401,e=this.config,a=this.config.sessionInfoUrl,t=this.config.creationTime,l=this.config.lastAccessedTime,c=this.config.maxInactiveInterval,u=!1,d=!0,h=!1;function p(){h=!0}function f(e){e?(c=e.maxInactiveInterval,i=Date.now()+1e3*e.maxInactiveInterval,u=!1):(u=!0,n.showSessionExpired())}function g(e){e.status===s&&(u=!0,n.showSessionExpired())}function m(){d=h=!1}e&&t&&l&&c&&(i=1e3*c+Date.now(),setInterval(function(){var e=Date.now(),t=e<i?i-e:0;n=n||new v,d&&!(t<=o)||u||h||n.showTimerBlock(t),!h&&!u&&e<i+r&&i<e&&n.showLoading(),!u&&!h&&i+r<e&&$.ajax({url:a,global:!1,beforeSend:p,success:f,error:g,complete:m})},1e3)),$(document).ajaxComplete(function(e,t){!e.preventSessionTimer&&!u&&!h&&t.status!==s&&t.status<501&&(i=1e3*c+Date.now()),e.preventSessionTimer=!0});var v=function(){this.timerLayout=$("#session-time-layout"),this.timeField=$("#session-time-field"),this.isSessionExpiredNotification=!1,this.refreshIconClass="icon icon-refresh icon-spin"};return v.prototype.showTimerBlock=function(e){this.timerLayout.show(),this.printTimerText(e)},v.prototype.showSessionExpired=function(){this.printTimerText(0),this.isSessionExpiredNotification||($("body").append(AGN.Lib.Template.text("session-expired")),this.isSessionExpiredNotification=!0)},v.prototype.showLoading=function(){var e='<i class="'+this.refreshIconClass+'"></i>';this.changeTimeFieldContent(e)},v.prototype.printTimerText=function(e){var t="00:00";0<e&&(t=0<(e=new Date(e)).getMinutes()?d3.format("02")(e.getUTCMinutes())+":":"00:",t+=0<e.getSeconds()?d3.format("02")(e.getUTCSeconds()):"00"),this.changeTimeFieldContent(t)},!(v.prototype.changeTimeFieldContent=function(e){this.timeField.html(e)})}),AGN.Lib.CoreInitializer.new("sizing",function(e){e=e||$(document);var s=$(window).height();_.each(e.find('[data-sizing="container"]'),function(e){var e=$(e),t=e.find('[data-sizing="top"]'),i=e.find('[data-sizing="bottom"]'),n=e.find('[data-sizing="scroll"]'),o=e.offset().top,t=_.reduce(_.map(t,function(e){return $(e).outerHeight()}),function(e,t){return e+t})||0,i=_.reduce(_.map(i,function(e){return $(e).outerHeight()}),function(e,t){return e+t})||0,e=e.data("sizing-offset")||20,r=s-o-t-i-e;_.each(n,function(e){var e=$(e),t=e.data("sizing-offset")||0;e.css({height:r-t,"overflow-y":"auto"}),e.trigger("scrollTo")})})}),!function(){var i=AGN.Lib.Helpers;AGN.Lib.CoreInitializer.new("slider",function(e){e=e||$(document),_.each(e.find(".js-slider"),function(e){var e=$(e),t=_.merge({},{handle:"round",min:0,max:101},i.objFromString(e.data("slider-options")));e.slider(t)})})}(),AGN.Lib.CoreInitializer.new("sync",["ace"],function(e){e=e||$(document),_.each(e.find("[data-sync]"),function(e){var e=$(e),t=$(e.data("sync")),i=e.data("_editor");(i||e).val(t.val())})}),!function(){var t=AGN.Lib.Tab;AGN.Lib.CoreInitializer.new("tab-toggle",function(e){e=e||$(document),_.each(e.find("[data-toggle-tab]"),function(e){t.init($(e))})})}(),AGN.Lib.CoreInitializer.new("table-responsive-wrap",function(e){(e=e||$(document)).find(".table-wrapper:not(.table-overflow-visible) table").wrap('<div class="table-responsive" />'),e.find(".table-wrapper.table-overflow-visible table").wrap('<div class="table-responsive" style="overflow: visible;" />')}),!function(){var e=AGN.Lib.Popover;function n(o){var r,s,a=o.find(".js-row-popover");1===a.length&&(r=!1,s=null,e.new(o,{trigger:"hover",delay:{show:300,hide:100},html:!0,content:function(){if(!1===r){r=$.Deferred();var e,t=a.children(),n=(0==t.length&&((e=$("<div></div>")).css({position:"fixed",visibility:"hidden"}),e.html(a.html()),t=e.children(),$(document.body).append(e),r.done(function(){t.detach(),e.remove()})),r.done(function(){s=t}),t.find("img").add(t.filter("img")).filter(function(){return this.complete?null:this}));if(0<n.length){r.done(function(){var e=o.data("bs.popover");e&&(e.setContent(),o.is(":hover")&&o.popover("show"))});for(var i=0;i<n.length;i++)$(n[i]).on("load error",function(){!function(){for(var e=!0,t=0;t<n.length;t++){var i=n[t];i&&(i.complete?($(i).off("load error"),n[t]=null):e=!1)}return e}()||r.resolve()})}else r.resolve()}return s}}))}AGN.Lib.CoreInitializer.new("table-row-actions",function(e){(e=e||$(document)).find(".js-table").each(function(){_.each(this.rows,function(e){var t,i,e=$(e);1===(i=(t=e).find(".js-row-show")).length&&(t.data("link",i.attr("href")),i.remove(),_.each(t.prop("cells"),function(e){e=$(e);0===e.find("a,input,select,textarea,button").length&&(e.addClass("table-link"),0===e.contents().length?e.html('<a href="'+i.attr("href")+'">&nbsp;</a>'):e.contents().wrapAll('<a href="'+i.attr("href")+'"></a>'))})),n(e)})})})}(),!function(){var n=AGN.Lib.Table;AGN.Lib.CoreInitializer.new("table",function(e){(e=e||$(document)).all(".js-data-table").each(function(){var e,t=$(this),i=t.find(".js-data-table-body"),t=t.data("table");i.exists()&&t&&((t=$("script#"+CSS.escape(t))).exists()&&(t=t.json(),e=i.data("web-storage")?_.merge(AGN.Lib.WebStorage.get(i.data("web-storage"))||{},t.options||{}):t.options||{},new n(i,t.columns,t.data,e)))})})}(),AGN.Lib.DomInitializer.new("targetgroup-overview-filters",function(){$("#filtersDescription").html(AGN.Lib.Template.text("targetgroup-overview-filters",this.config))}),!function(){var p={header_readonly:!0,filter_readonly:!0,condition_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0,no_add_rule:!0,no_sortable:!0,no_add_group:!0};AGN.Lib.DomInitializer.new("target-group-query-builder",function(e){var e=AGN.Lib.Form.getWrapper(e),c="#targetgroup-querybuilder",i=$(c),r=this.config.mailTrackingAvailable,s=this.config.isTargetGroupLocked,a=this.config.helpLanguage,l=navigator.userAgent.match("MSIE 10.0;"),u=this;function d(e,t){!l&&e.is("select")?AGN.Lib.Select.get(e).selectValueOrSelectFirst(t):e.val(t)}function h(n,e){e=e||function(e){var t=AGN.Lib.Select.get(n),i=[];e.forEach(function(e){i.push({id:e.mailingID,text:e.shortname})}),t.setOptions(i),n.trigger("values-set")};return $.ajax({type:"POST",url:AGN.url("/workflow/getAllMailingSorted.action"),data:{sortField:"date",sortDirection:"desc"},success:e})}_.each(i,function(e){var e=$(e),i=[{type:"equal",apply_to:["string","number","datetime"]},{type:"not_equal",apply_to:["string","number","datetime"]},{type:"less",apply_to:["string","number"]},{type:"less_or_equal",apply_to:["string","number"]},{type:"greater",apply_to:["string","number"]},{type:"greater_or_equal",apply_to:["string","number"]},{type:"like",nb_inputs:1,apply_to:["string"]},{type:"not_like",nb_inputs:1,apply_to:["string"]},{type:"contains",nb_inputs:1,apply_to:["string"]},{type:"not_contains",nb_inputs:1,apply_to:["string"]},{type:"begins_with",nb_inputs:1,apply_to:["string"]},{type:"not_begins_with",nb_inputs:1,apply_to:["string"]},{type:"mod",nb_inputs:1,apply_to:["number"],valueSelectors:["#first","#operator select","#second"],valueGetter:function(t){var i=[];return t.operator.valueSelectors.forEach(function(e){i.push(t.$el.find(e).val())}),i},valueSetter:function(i,n){i.operator.valueSelectors.forEach(function(e,t){i.$el.find(e).val(n[t])})},input:function(e){var t=this.operators.filter(function(e){return"mod"!==e.type&&e.apply_to.includes("number")});return"<div class='qb-input-element'><input class='form-control' id='first' type='number'/></div><div class='qb-input-element' id='operator'>"+this.getRuleOperatorSelect(e,t)+"</div><div class='qb-input-element'><input class='form-control' id='second' type='number'/></div>"},validate:function(e){return e.every(function(e){return e})||["string_empty"]}},{type:"is_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"is_not_empty",nb_inputs:0,apply_to:["string","number","datetime"]},{type:"before",nb_inputs:1,apply_to:["datetime"]},{type:"after",nb_inputs:1,apply_to:["datetime"]}],n=function(e,i){{var n;e=null===e?[{id:"?",label:"?",type:"string"}]:(n={},e.filter(function(e){return!n[e.id]&&(n[e.id]=!0)}))}return function(e,i){i=$.extend({mail_tracking_available:!1},i);function n(e){var t=$('<select class="form-control qb-input-element-select mailings js-select"></select>');return t.attr("id",e.id),t}function o(e){return e.$el.find(".mailings :selected").val()}function r(n){var o={},r={};return $(c).on("values-set",n,function(e){var t,i;$.isEmptyObject(r)?d($(e.target),-1):(t=$(e.target).attr("id"),d((i=r[t])?i.$el.find(n):$(e.target),o[t]||-1))}),function(e,t){var i=e.$el.find(n);o[e.id]=t,r[e.id]=e,d(i,t)}}var s=r("select.mailings"),a=r("select.auto-imports"),l={"finished auto-import":{type:"string",input_event:"values-setup-finished",input:function(e){var t=$('<select class="form-control qb-input-element-select auto-imports js-select"></select>');return t.attr("id",e.id),t},values:function(e){!function(t,e){e=e||function(e){e.forEach(function(e){t.append($("<option>",{text:e.shortname,value:e.autoImportId}))}),t.trigger("values-set")};return $.ajax({type:"POST",url:AGN.url("/autoimport.do"),data:{method:"listJson"},success:e})}(e).done(function(){e.trigger("values-setup-finished")})},valueSetter:a,valueGetter:function(e){return e.$el.find(".auto-imports :selected").val()},canBeNegated:!0,skipOperator:!0},"received mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){h(e).done(function(){e.trigger("values-setup-finished")})},valueSetter:s,valueGetter:o,canBeNegated:!0,skipOperator:!0},"opened mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){h(e).done(function(){e.trigger("values-setup-finished")})},valueSetter:s,valueGetter:o,canBeNegated:i.mail_tracking_available,skipOperator:!0},"clicked in mailing":{type:"string",input_event:"values-setup-finished",valueSelector:function(e,t){return e+"_"+["mailingID","linkID"][t]},input:function(e){return $('<div class="qb-input-element-select"><select class="form-control js-select mailings" data-rule-id="'+e.id+'" id="'+e.filter.valueSelector(e.id,0)+'" ></select></div><div class="qb-input-label"><div class="qb-input-inner">Links</div></div><div class="qb-input-element-select"><select class="form-control js-select links" data-rule-id="'+e.id+'" id="'+e.filter.valueSelector(e.id,1)+'" ></select></div>')},values:function(r){var i=r.find(".mailings"),n=AGN.Lib.Select.get(i);i.change(function(){var e,i=n.getSelectedValue();i=i,e=function(e){var i=r.find(".links"),n=AGN.Lib.Select.get(i),o=[{id:-1,text:t("querybuilder.common.anyLink")}];$.each(e,function(e,t){o.push({id:t.id,text:t.url})}),n.setOptions(o),i.trigger("link-values-set")},$.ajax({type:"POST",url:AGN.url("/workflow/getMailingLinks.action"),data:{mailingId:i},success:e})}),h(i,function(e){var t=[];e.forEach(function(e){t.push({id:e.mailingID,text:e.shortname})}),n.setOptions(t),i.trigger("mailing-values-set")})},valueGetter:function(e){var t=[];return t[0]=e.$el.find("#"+e.filter.valueSelector(e.id,0)).val(),t[1]=e.$el.find("#"+e.filter.valueSelector(e.id,1)).val(),t},valueSetter:function(){var o={},r={};return $(c).on("mailing-values-set",function(e){var e=$(e.target),t=e.data("rule-id"),i=r[t];i?(d(i=i.$el.find(".mailings"),o[t][0]),i.trigger("change")):(d(e),e.trigger("change"))}),$(c).on("link-values-set",function(e){var t,i=$(e.target).data("rule-id"),n=r[i];n?d(t=n.$el.find(".links"),o[i][1]||-1):d(t=$(e.target)),t.trigger("values-setup-finished")}),function(e,t){o[e.id]=t,r[e.id]=e}}(),validation:{callback:function(e){return e.every(function(e){return e})||["string_empty"]}},canBeNegated:i.mail_tracking_available,skipOperator:!0},"revenue by mailing":{type:"string",input_event:"values-setup-finished",input:n,values:function(e){h(e).done(function(){e.trigger("values-setup-finished")})},valueSetter:s,valueGetter:o,canBeNegated:i.mail_tracking_available,skipOperator:!0}};i.mail_tracking_available||delete l["received mailing"];e.forEach(function(e){var t=l[e.id];t&&$.extend(e,t)})}(e,i),$.extend([],e)}(u.config.queryBuilderFilters,{mail_tracking_available:r}),o=function(e,t){t&&(e=function t(e){e&&(e.flags=p,_.each(e.rules,function(e){e.flags=p,e.hasOwnProperty("condition")&&t(e)}));return e}(e));return $.extend({},e)}(JSON.parse(u.config.queryBuilderRules),s);e.queryBuilder({filters:n,allow_empty:!0,operators:i,helpLanguage:a,readonly:s,plugins:{sortable:{inherit_no_drop:!0,inherit_no_sortable:!0,icon:"icon icon-arrows-alt"}},rules:o}),l||AGN.Lib.CoreInitializer.run("select",e),e.on("afterSetRules.queryBuilder afterUpdateRuleFilter.queryBuilder afterCreateRuleFilters.queryBuilder afterAddRule.querybuilder",function(e){l||AGN.Lib.CoreInitializer.run("select",$(this))}),e.on("link-values-set",function(e){l||AGN.Lib.CoreInitializer.run("select",$(e.target))}),e.on("mailing-values-set values-set ",function(e){l||AGN.Lib.CoreInitializer.run("select",$(e.target))}),e.on("change-date-format",function(e){l||AGN.Lib.CoreInitializer.run("select",$(e.target))}),e.on("enterdown","input",function(e){return!1})}),e.off().on("validation",function(i,n){n=$.extend({ignore_qb_validation:!1,skip_empty:!1},n),_.each($(c),function(e){var e=$(e),t=e.prop("queryBuilder");if(!function(e,t,i,n){{if(t.clearInitialRuleSettings(),i.ignore_qb_validation)return 1;if(t.validate({skip_filter_validation:!1,skip_empty:i.skip_empty}))return n.find("#queryBuilderRules").val(function(e,t){return JSON.stringify(e.getRules({allow_invalid:!0,skip_empty:t}))}(t,i.skip_empty)),1;n.trigger("qb:invalidrules"),e.preventDefault()}}(i,t,n,e))return!1})})})}(),AGN.Lib.Controller.new("targets-list",function(){this.addAction({change:"check-favorites"},function(){var e,t;AGN.Lib.Loader.prevent(),$.ajax({type:"GET",url:AGN.url((e=this.el,t=e.data("target-id"),e=e.is(":checked"),"/target/"+t+"/"+(e?"addToFavorites":"removeFromFavorites")+".action"))})})}),AGN.Lib.CoreInitializer.new("template",function(e){(e=e||$(document)).find('script[type="text/x-mustache-template"]').each(function(){var e=$(this),t=e.attr("id");t&&(AGN.Opt.Templates[t]=e.html())})}),!function(){var t=AGN.Lib.Tile;AGN.Lib.CoreInitializer.new("tile-toggle",function(e){e=e||$(document),_.each(e.find("[data-toggle-tile]"),function(e){t.init($(e))})})}(),!function(){var t=AGN.Lib.Tooltip;AGN.Lib.CoreInitializer.new("tooltip",function(e){e=e||$(document),$(".tooltip").remove(),e.find("[data-tooltip], [data-tooltip-help]").each(function(){var e=$(this);t.create(e,t.options(e))})})}(),!function(){var t=AGN.Lib.Truncate.run,i=AGN.Lib.Breadcrumbs.truncate;AGN.Lib.CoreInitializer.new("truncate",function(e){e=e||$(document),setTimeout(function(){_.each(e.find(".l-header"),function(e){e=$(e);t(e,".header-nav"),i(e.find(".header-nav"))})},50)})}(),AGN.Lib.DomInitializer.new("upload",function(n){var o,i,r,e,t=AGN.Lib.Template,s=AGN.Lib.Form,a=n.find("[data-upload-dropzone]").first(),l=(a.exists()?a:n).find("[data-upload]"),c=n.find("[data-upload-add]"),u=c.find("[data-upload-add-template]"),d=n.find("[data-upload-progress]"),h=d.find("[data-upload-progress-template]"),p=l.prop("name")||"",f=p.includes("[]"),g=!l.exists()||l.is("[multiple]"),m=[];function v(){f?m.forEach(function(e,t){r.setValueOnce(b(t+1),void 0)}):r.setValueOnce(p,void 0),m=[],E()}function y(e){if(e&&0<e.length){var t,i=!1;if(g)for(var n=0;n<e.length;n++)C(t=e[n],m.length)&&(m.push(t),_(t),i=!0);else C(t=e[0],0)&&(A(),v(),m=[t],_(t),i=!0);i&&(E(),w())}}function b(e){return p.replace("[]","["+e+"]")}function w(){f?m.forEach(function(e,t){r.setValueOnce(b(t+1),e)}):r.setValueOnce(p,m.slice(0))}function C(e,t){var i=$.Event("upload:add");return n.trigger(i,{file:e,index:t}),!i.isDefaultPrevented()}function _(e){var t=e.id?"":"hidden",i={file:e,count:m.length,filename:e.name,size:e.size,id:e.id||0,duplicationErrorHidden:t,preview:void 0};/^image/.test(e.type)?((t=new FileReader).onloadend=function(){i.preview=this.result,c.removeClass("hidden"),AGN.runAll($(o(i)).appendTo(u)),r.initFields()},t.readAsDataURL(e)):(i.preview=void 0,c.removeClass("hidden"),AGN.runAll($(o(i)).appendTo(u)),r.initFields())}function A(){c.addClass("hidden"),u.empty(),r.initFields()}function E(){n.data("upload-selection",m.slice(0))}(l.exists()||a.exists())&&(E(),o=t.prepare(u.data("upload-add-template")),i=t.prepare(h.data("upload-progress-template")),l.prop("name",""),r=s.get(l.exists()?l:a),a.exists()?new Dropzone(a,{classDragOver:"drag-over",onSelectFiles:function(e){y(e)}}):l.on("change",function(){y(l.prop("files"))}),(e=r.get$()).on("form:loadershow",function(){h.html(i({currentProgress:!0})),d.removeClass("hidden")}),e.on("form:loaderhide",function(){d.addClass("hidden"),c.removeClass("hidden")}),e.on("form:submit",function(){c.addClass("hidden")}),e.on("form:abort",function(){m.length&&(c.removeClass("hidden"),w())}),e.on("form:progress",function(e,t){h.html(i({currentProgress:t.progress}))}),e.on("submitted",function(){A(),v()}),n.on("upload:reset",function(){A(),v(),n.trigger("reset-upload",e)}),n.on("click","a[data-upload-reset], button[data-upload-reset]",function(){A(),v(),n.trigger("reset-upload",e)}))}),AGN.Lib.DomInitializer.new("user-activity-log-period",function(e){var t=e,i=(t=e||$(document),[]);_.each(t.find(".js-datepicker"),function(e){e=$(e);e.hasClass("js-datepicker-period-start")&&(e.attr("datepicker-period-id")in i||(i[e.attr("datepicker-period-id")]={startEl:null,endEl:null}),i[e.attr("datepicker-period-id")].startEl=e),e.hasClass("js-datepicker-period-end")&&(e.attr("datepicker-period-id")in i||(i[e.attr("datepicker-period-id")]={startEl:null,endEl:null}),i[e.attr("datepicker-period-id")].endEl=e)});for(var n=0;n<i.length;n++)!function(e,t){var i=e,n=t;i.get("value")&&n.set("min",i.get("select"));n.get("value")&&i.set("max",n.get("select"));i.on("set",function(e){e.select?n.set("min",i.get("select")):"clear"in e&&n.set("min",!1)}),n.on("set",function(e){e.select?i.set("max",n.get("select")):"clear"in e&&i.set("max",!1)})}(i[n].startEl.pickadate("picker"),i[n].endEl.pickadate("picker"))}),AGN.Lib.CoreInitializer.new("view",function(){AGN.Lib.View.init()}),AGN.Lib.DomInitializer.new("web-storage-persist",function(){this.config&&$.each(this.config,function(e,t){var e="web-storage#"+$.trim(e),i=null;try{i=AGN.Lib.Storage.get(e)}catch(e){console.error(e)}null!=i?AGN.Lib.Storage.set(e,$.extend(i,t)):AGN.Lib.Storage.set(e,t)})}),!function(){var i=AGN.Lib.Loader,l=AGN.Lib.Template,c=AGN.Lib.Page,n=function(e){!0!==e.loader&&void 0!==e.loader||(e.loader={show:function(){i.show()},hide:function(){i.hide()}})},o=function(e){e=e.loader;if(e&&e.show)try{e.show()}catch(e){console.error(e)}},u=function(e){e=e.loader;if(e&&e.hide)try{e.hide()}catch(e){console.error(e)}};$.ajaxPrefilter(function(e){n(e)}),$(document).ajaxSend(function(e,t,i){o(i)}),$(document).ajaxComplete(function(e,t,i){u(i)}),$(document).ajaxError(function(e,i,n){var o;if((u(n),0!=i.readyState&&0!=i.status)&&!(n.statusCode&&i.status in n.statusCode))if(401==i.status){n=$.Event("ajax:unauthorized");$(document).trigger(n),!n.isDefaultPrevented()&&i.responseText&&c.render(i.responseText)}else if(403==i.status)o=l.text("permission-denied",{title:t("messages.permission.denied.title"),text:t("messages.permission.denied.text"),btn:t("defaults.ok")}),$("body").append(o);else{n=!0;if(i.responseText)try{var r=$(i.responseText),s=r.filter("#error-message"),a=r.all("[data-message]");s.exists()?(s.is('script[type="text/x-mustache-template"]')?$("body").append(_.template(s.html())):$("body").append(s),n=!1):a.exists()&&(c.render(i.responseText),n=!1)}catch(e){console.debug(e)}n&&(o=l.text("error",{headline:t("messages.error.headline"),text:t("messages.error.text"),reload:t("messages.error.reload")}),$("body").append(o))}}),$(document).on("click","a[data-ajax], a.js-ajax",function(e){var t=$(this);e.preventDefault(),c.reload(t.attr("href"),!0,t.data("ajax"))}),$(document).on("click","[data-prevent-load]",function(){i.prevent()}),window.onbeforeunload=function(){i.show()}}(),$(document).on("click","[data-toggle-checkboxes]",function(e){var t=$(this),i=t.data("toggle-checkboxes"),t=t.closest(".tile-header").find("[data-toggle-tile]").data("toggle-tile");_.each($(t+" [type=checkbox]:enabled"),function(e){var t="on"==i;$(e).prop("checked",t)}),e.preventDefault()}),$(document).on("click","[data-toggle-checkboxes-all]",function(e){var i=$(this).data("toggle-checkboxes-all");_.each($(".checkboxes-content [type=checkbox]:enabled"),function(e){var t="on"==i;$(e).prop("checked",t)}),e.preventDefault()}),AGN.Lib.Action.new({click:"[data-clone]"},function(){var e=this.el.data("clone"),t=this.el.data("clone-target"),i=parseInt(this.el.data("clone-count"));this.el.data("clone-count",i+=1),e=AGN.Lib.Template.text(e,{count:i}),i=$(t).append(e),AGN.runAll(i)}),$(document).on("click","a[data-clone]",function(e){e.preventDefault()}),!function(){var o=AGN.Lib.Form,r=AGN.Lib.Confirm,e=AGN.Lib.Action,i=AGN.Lib.Page;e.new({click:"[data-confirm], .js-confirm"},function(){$.get(this.el.attr("href")).done(function(e){var t=$(e);1!=t.filter(".modal").add(t.find(".modal")).length?i.render(e):r.create(e).done(function(e){i.render(e)})}),this.event.preventDefault()}),$(document).on("click","[data-confirm-positive], .js-confirm-positive",function(){var e,t=$(this),i=r.get(t),n=o.getWrapper(t);i&&(e=i.$modal.find('[name="confirm-save-choice"]'),n.exists()?o.get(n).jqxhr().done(function(e){i.positive(e)}):e.exists()?i.positive({code:t.data("confirm-positive"),saveChoice:e[0].checked}):i.positive(t.data("confirm-positive")))}),$(document).on("click","[data-confirm-negative], .js-confirm-negative",function(){var e,t=$(this),i=r.get(t);i&&((e=i.$modal.find('[name="confirm-save-choice"]')).exists()?i.negative({code:t.data("confirm-negative"),saveChoice:e[0].checked}):i.negative(t.data("confirm-negative")))})}(),!function(){var e=AGN.Lib.Action,o=AGN.Lib.Clipboard,r=AGN.Lib.Tooltip;e.new({click:"[data-copyable]"},function(){var e,n,i=void 0;this.el.is("[data-copyable-value]")?i=this.el.data("copyable-value"):(e=(e=this.el.data("copyable-target"))?$(e):this.el).exists()&&(i=e.val()),void 0!==i&&(n=this.el,o.set(i,function(e,i){i&&(r.create(n,{title:t("tooltip.copy.clipboard"),trigger:"manual"}),r.setShown(n),(i=n.data("tooltip-timeout-id"))&&clearTimeout(i),i=setTimeout(function(){r.remove(n),n.removeData("tooltip-timeout-id")},2500),n.data("tooltip-timeout-id",i))}))})}(),!function(){var u=AGN.Lib.Table,n=AGN.Lib.WebStorage;function i(e,i){var n=e.data("bulk-field")||"id",o=e.data("bulk-request-field")||(i?"bulkID":"bulkIds"),r=u.get(e).api,s=r.getSelectedRows(),a=s.map(function(e){return e[n]}),l={};if(i)for(var c in l[o]={},a){c=a[c];l[o][c]="on"}else l[o]=a;!function(e,i,n){var o=$.Deferred();e&&e.length?(e=$.ajax(i,{method:"POST",traditional:!1,data:n}).fail(function(){o.reject()}),AGN.Lib.Confirm.request(e).then(o.resolve,o.reject)):(o.reject(),AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert"));return o.promise()}(a,e.data("bulk-url"),l).done(function(){r.updateRowData({remove:s})})}$(document).on("click",".js-data-table-first-page",function(e){u.get($(this)).api.paginationGoToFirstPage()}),$(document).on("click",".js-data-table-prev-page",function(e){u.get($(this)).api.paginationGoToPreviousPage()}),$(document).on("click",".js-data-table-page",function(e){u.get($(this)).api.paginationGoToPage($(this).data("page"))}),$(document).on("click",".js-data-table-next-page",function(e){u.get($(this)).api.paginationGoToNextPage()}),$(document).on("click",".js-data-table-last-page",function(e){u.get($(this)).api.paginationGoToLastPage()}),$(document).on("click",".js-data-table-paginate",function(e){var t=$(this),i=t.data("page-size"),t=(u.get(t).api.paginationSetPageSize(i),t.closest(".dropdown-menu").trigger("click"),t.data("web-storage"));t&&n.extend(t,{paginationPageSize:parseInt(i)})}),$(window).on("viewportChanged",function(e){$(document).all(".js-data-table-body").each(function(){AGN.Lib.Table.get($(this)).redraw()})}),$(document).on("click",".js-data-table-bulk-delete",function(e){i($(this),!1)}),$(document).on("click",".js-data-table-bulk-delete-struts",function(e){i($(this),!0)})}(),$(document).ready(function(){window.AGN.Lib.Controller.init(),window.AGN.runAll()}),$(document).on("dragster:enter",function(e){e=$(e.target);e.is("[data-upload-dropzone]")||e.addClass("drag-over")}),$(document).on("dragster:leave",function(e){e=$(e.target);e.is("[data-upload-dropzone]")||e.removeClass("drag-over")}),$(document).on("click",".dropdown-menu *",function(e){($target=$(e.target)).hasClass("js-dropdown-open")&&(e.preventDropdownClose=!0),1==$target.parent(".js-dropdown-open").length&&(e.preventDropdownClose=!0),$target.is("button")||$target.is("a")||1==$target.parent("a").length||1==$target.parent("button").length||$target.hasClass("js-dropdown-close")||1!=$target.parent(".js-dropdown-close").length&&(e.preventDropdownClose=!0)}),$(document).on("click",".js-close-error",function(e){$(e.target).hasClass("js-close-error")&&$(this).closest(".backdrop").remove()}),!function(){var e=AGN.Lib.Action,n=AGN.Lib.Form,o=AGN.Lib.Confirm,t=AGN.Lib.Helpers;e.new({click:"[data-form-change]"},function(){n.get(this.el).setValueOnce("numberOfRowsChanged",!0)}),e.new({click:"[data-form-bulk]"},function(){var e=this.el.data("form-bulk"),t=this.el.prop("checked");n.get(this.el).bulkUpdate(e,t)}),e.new({click:"a[data-form-set], button[data-form-set]",change:"select[data-form-set], input[data-form-set]"},function(){var e=t.objFromString(this.el.data("form-set")),i=n.get(this.el);_.forEach(e,function(e,t){i.setValueOnce(t,e)})}),e.new({click:"a[data-form-url], button[data-form-url]",change:"select[data-form-url], input[data-form-url]"},function(){n.get(this.el).setActionOnce(this.el.data("form-url"))}),e.new({click:"a[data-form-resource], button[data-form-resource]",change:"select[data-form-resource], input[data-form-resource]"},function(){var e=n.get(this.el);e instanceof AGN.Lib.ResourceForm&&e.setResourceSelectorOnce(this.el.data("form-resource"))}),e.new({click:"a[data-form-persist], button[data-form-persist]",change:"select[data-form-persist], input[data-form-persist]"},function(){var e=t.objFromString(this.el.data("form-persist")),i=n.get(this.el);_.forEach(e,function(e,t){i.setValue(t,e)})}),e.new({click:"a[data-form-reset], button[data-form-reset]"},function(){n.get(this.el).reset()}),e.new({click:"a[data-form-abort], button[data-form-abort]"},function(){n.get(this.el).abort()}),e.new({click:"[data-form-confirm]"},function(){var e=this.el.data("form-confirm"),i=n.get(this.el);i.submit("confirm",e).done(function(e){var t=$(e);1!=t.filter(".modal").add(t.find(".modal")).length?i.updateHtml(e):o.create(e).done(function(e){i.updateHtml(e)}).fail(i.revertAction)})}),e.new({click:"a[data-form-action], button[data-form-action]",change:"select[data-form-action], input[data-form-action]"},function(){var e=this.el.data("form-action"),t=n.get(this.el);setTimeout(function(){t.submit("action",e)},5)}),e.new({click:"a[data-form-submit], button[data-form-submit]",change:"select[data-form-submit], input[data-form-submit]"},function(){var e=this;setTimeout(function(){n.get(e.el).submit()},5)}),e.new({click:"a[data-form-submit-static], button[data-form-submit-static]",change:"select[data-form-submit-static], input[data-form-submit-static]"},function(){var e=this;setTimeout(function(){n.get(e.el).submit("static")},5)}),e.new({click:"a[data-form-submit-event], button[data-form-submit-event]",change:"select[data-form-submit-event], input[data-form-submit-event]"},function(){var e=this;setTimeout(function(){n.get(e.el).submit("event")},5)}),e.new({submit:"[data-form]"},function(){var e=this;"static"!=this.el.data("form")&&(this.event.preventDefault(),setTimeout(function(){n.get(e.el).submit()},5))}),e.new({keydown:'input[type="text"], input[type="password"], input[type="number"]'},function(){var e,t;!function(e){var t=e.keyCode||e.which;if(13===t)return 1;if(229===t&&e.originalEvent){t=e.originalEvent.code;if("Enter"===t||"NumpadEnter"===t)return 1}}(this.event)||(e=$.Event("enterdown"),this.el.trigger(e),e.isDefaultPrevented()||(e=this.el.parents("form")).exists()&&(e.is("[data-form]")?(t=n.get(e),e.is("[data-action]")?t.submit("event"):t.submit()):e.submit()))})}(),!function(){var t=AGN.Lib.Help;$(document).on("click","[data-help]",function(e){t.show($(this)),e.preventDefault()})}(),$(document).on("click","label",function(e){var t=$(this),t=$("#"+t.attr("for")),i=t.data("select2");1==t.length&&i&&setTimeout(function(){i.opened()||i.open()},0)}),!function(){var n=window.history;$(document).on("click",'a[href^="#"]',function(e){var t,i;e.isDefaultPrevented()||(e.preventDefault(),"#"!==(e=$(this).attr("href"))&&(t=window.location.href,0<=(i=t.indexOf("#"))&&(t=t.substring(0,i)),n.replaceState(n.state||{},document.title,t+e)))}),$(document).on("click","[data-one-time]",function(){var e=$(this);setTimeout(function(){e.attr("disabled","disabled"),e.is("a")&&e.removeAttr("href")},1)})}(),!function(){var e=AGN.Lib.Action,t=AGN.Lib.Menu;e.new({click:".menu-close"},function(){t.close()}),e.new({click:".menu-open"},function(){t.open()}),e.new({click:".menu-open"},function(){t.open()}),$(document).on("click","main",function(){t.isOpen()&&t.close()}),$(document).on("")}(),!function(){var e=AGN.Lib.Action,n=AGN.Lib.Messages;e.new({click:"[data-msg]"},function(){var e=this.el.data("msg"),t=this.el.data("msg-content"),i=this.el.data("msg-type");if("system"===this.el.data("msg-system")){if($(document).find(".notification-info").is(":visible"))return!1;n(e,t,i)}else n(e,t,i)}),$(document).on("click","a[data-msg]",function(e){e.preventDefault()})}(),!function(){var e=AGN.Lib.Action,i=AGN.Lib.Modal,n=AGN.Lib.Helpers;e.new({click:"[data-modal]"},function(){var e=this.el.data("modal"),t=n.objFromString(this.el.data("modal-set"));i.createFromTemplate(t,e)}),$(document).on("hidden.bs.modal",".modal",function(){var e=$(this);e.trigger("modal:close"),setTimeout(function(){e.remove()},100)}),$.fn.modal.Constructor.prototype.enforceFocus=function(){var t=this;$(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&$(e.target.parentNode).hasClass("cke_contents cke_reset")&&t.$element.focus()})}}(),AGN.Lib.Action.new({click:"[data-password]"},function(){var e=this.el.data("password"),t=this.el.data("password-toggle"),e=$(e);this.el.data("password-toggle",this.el.text()),this.el.text(t),"password"===e.prop("type")?e.prop("type","text"):e.prop("type","password"),this.event.preventDefault()}),$(document).on("click",".js-open-datepicker",function(e){$(this).parents(".input-group").find(".js-datepicker").pickadate("picker").open()}),$(document).on("click",".js-datepicker",function(e){var t=$(this);t.pickadate("picker").open(),t.focus()}),$(document).on("click",'[data-dismiss="popover"]',function(){var e=AGN.Lib.Popover.get($(this));e&&e.hide()}),!function(){var e=AGN.Lib.Action;AGN.Lib.Modal,AGN.Lib.Helpers;e.new({click:"[data-popup]"},function(){var e=this.el.data("popup"),t=window.location.href,t=t.substring(0,t.lastIndexOf("/"));(!e||e.indexOf("://")<=0)&&(e=t+"/"+e),window.open(e,"help","width=800,height=600,left=0,top=0,scrollbars=yes")}),$(document).on("click","a[data-modal]",function(e){e.preventDefault()}),$(document).on("hidden.bs.modal",".modal",function(){var e=$(this);e.trigger("modal:close"),setTimeout(function(){e.remove()},100)})}(),!function(){var e,t=function(){e&&clearTimeout(e),e=setTimeout(function(){AGN.Lib.CoreInitializer.run(["equalizer","truncate","sizing","scrollable","dropdown-expand"]),_.each(AGN.Lib.Editor.all(),function(e){e.resize()}),$(window).trigger("viewportChanged")},500)};$(window).on("resize",t)}(),!function(){var e=AGN.Lib.Action,o=AGN.Lib.Popover,r=AGN.Lib.Template,s=AGN.Lib.Helpers;e.new({click:"[data-support-type]"},function(){var e,t,i=this.el.data("support-type"),n={supportType:i,subject:"",subjectChangeable:!0,page:function(){var e=window.location,t=[".action",".do"];if(e.origin&&e.pathname){for(var i=(e.pathname+"").replace(/;jsessionid=[a-z0-9]+/i,""),n=0;n<t.length;n++)0<(a=i.indexOf(l=t[n]))&&(i=i.substring(0,a+l.length));return e.origin+i+e.search+e.hash}var o=(e.href+"").replace(/;jsessionid=[a-z0-9]+/i,"");for(n=0;n<t.length;n++){var r,s,a,l=t[n];if(0<(a=o.indexOf(l)))return r=a+l.length,0<(s=(s=o.indexOf("?",r))<0?o.indexOf("#",r):s)?o.substring(0,r)+o.substring(s):o.substring(0,r)}return o}()},n=_.merge({},n,s.objFromString(this.el.data("support-options")));"PROBLEM"!=i&&"FEATURE"!=i||(i=$("#support-select-button"),o.remove(i),(e=$('<div class="modal-backdrop in" style="opacity: 0.2;"></div>')).appendTo("body"),(t=o.new(i,{trigger:"manual",template:'<div class="popover bottom support-popover" style="width: 600px; margin-top: 16px;"><div class="popover-content popover-tile"></div></div>',html:!0,sanitize:!1,enableAgnRunAll:!0,content:r.text("support-popover-template",n)})).show(),e.on("click",function(){t.hide()}),i.on("hidden.bs.popover",function(){e.remove()}))})}(),!function(){var e=AGN.Lib.Action,a=AGN.Lib.FormBuilder.FormBuilder;e.new({"click change":"[data-sync-from]"},function(){var e=this.el.data("sync-from").split(/,\s?/),s=this.el.data("sync-to").split(/,\s?/);_.each(e,function(e,t){var i=$(e),t=$(s[t]),i=i.val(),n=t.attr("id"),o=t.data("_editor"),r=t.data("select2");window.CKEDITOR&&CKEDITOR.instances[n]?CKEDITOR.instances[n].setData(i):o?o.val(i):r?t.select2("val",i):a.isCreated("#"+n)?a.get("#"+n).setJson(a.get(e).getJson()):t.val(i)})}),$(document).on("click","a[data-sync-from]",function(e){e.preventDefault()})}(),!function(){var r=AGN.Lib.Tile,s=AGN.Lib.Tab,a=AGN.Lib.Form;$(document).on("click","[data-toggle-tab]",function(e){var t=$(this),i=r.trigger(t),n=t.data("toggle-tab-method")||"show";if(t.is("[data-form-submit]")){var o=a.getWrapper(t);if(o.exists()&&!a.get(o).valid())return e.preventDefault(),!1}return r.show(i),s[n](t),e.preventDefault(),!1})}(),!function(){var s=AGN.Lib.Form,o=AGN.Lib.Confirm,a=AGN.Lib.Helpers,l=AGN.Lib.Page;$(document).on("click",".js-table a, .js-table input, .js-table select, .js-table button, .js-table .js-checkable, .js-table .disabled",function(e){e.preventViewLoad=!0}),$(document).on("click",".js-table-sort",function(e){var i,t=$(this),n=t.children("a"),o=$(e.target),r=n.attr("href");o[0]==n[0]&&(s.getWrapper(t).exists()?(i=s.get(t),o=a.paramsFromUrl(r),_.each(o,function(e,t){i.setValue(t,e)}),i.submit()):$.get(r).done(function(e){l.render(e,!1)}),e.preventDefault())}),$(document).on("click",".js-table-paginate",function(e){var t=$(this),i=t.attr("href"),n=s.get(t),i=a.paramsFromUrl(i),i=(_.each(i,function(e,t){n.setValue(t,e)}),n.submit(),e.preventDefault(),t.closest(".tile"));i.exists()?(e=i.offset().top,window.scrollY>e&&window.scrollTo(0,e-150)):window.scrollTo(0,0)}),$(document).on("click",".js-row-delete",function(e){var i=$(this),t=i.is("button")?i.data("url"):i.attr("href"),n=s.get(i);t&&$.get(t).done(function(e){var t=$(e);1!=t.filter(".modal").add(t.find(".modal")).length?n.updateHtml(e):o.create(e).done(function(e){i.closest("tr").remove(),n.updateHtml(e)})}),e.preventDefault()}),$(document).on("click",".js-table tr",function(e){var t=$(this);e.preventViewLoad||void 0!==(e=t.data("link"))&&(window.location.href=e)}),$(document).on("click",'.js-checkable label, .js-checkable input[type="checkbox"], .js-checkable input[type="radio"]',function(e){e.stopPropagation()}),$(document).on("click",".js-checkable",function(e){var t,i=$(this).find('input[type="checkbox"], input[type="radio"]');i.length&&_.each(i,function(e){(t=$(e)).prop("disabled")||(t.prop("checked",!t.prop("checked")),t.trigger("change"))})}),$(document).on("click",".disabled",function(e){e.preventDefault()})}(),!function(){var n=AGN.Lib.Tile;$(document).on("click","[data-toggle-tile]",function(e){n.toggle($(this)),e.preventDefault()}),$(document).on("click","[data-toggle-tile-all]",function(t){var i=$(this).data("toggle-tile-all");_.each($("[data-toggle-tile]"),function(e){e=$(e);"expand"==i?n.show(e):n.hide(e),t.preventDefault()})})}(),$(document).on("change","[data-toggle-usability]",function(){var e=$(this).data("toggle-usability"),e=$(document).find(e);_.each(e,function(e){e=$(e);e.prop("disabled")?e.prop("disabled",!1):e.prop("disabled",!0)})}),!function(){var t=AGN.Lib.Tooltip;$(window).on("load",function(){var e=$("body");AGN.isIE?e.on("DOMNodeInserted","[data-tooltip], [data-tooltip-help]",function(e){e=$(e.target);t.create(e,t.options(e))}):e.on("DOMNodeInserted",function(e){$(e.target).all("[data-tooltip], [data-tooltip-help]").each(function(){var e=$(this);t.create(e,t.options(e))})})})}(),!function(){var e=AGN.Lib.Action,t=AGN.Lib.View;e.new({change:"[data-view]"},function(){t.trigger(this.el),this.el.trigger("click.bs.dropdown.data-api")})}(),!function(){var n=AGN.Lib.Form,t=AGN.Lib.Editor;$(document).on("tile:show",function(e){var t,n,e=$(e.target).find(".js-wysiwyg"),i=e.attr("id");1===e.length&&(t=a(e),window.createEditorExt(i,t.width,t.height,t.browseMailingId,t.isFullHtml,t.isFullHeight,t.allowExternalScript),t.isFullHeight&&CKEDITOR.instances[i].on("instanceReady",(n=e,function(e){var t=n.parent().width(),i=n.parent().height();e.editor.resize(t,i),e.editor.resresize_enabledze=!1,$(window).on("resize."+r(n),o(n))})))}),$(document).on("tile:hide modal:close",function(e){$(e.target).find(".js-wysiwyg").each(function(){CKEDITOR.instances[$(this).attr("id")]&&CKEDITOR.instances[$(this).attr("id")].updateElement(),s($(this))&&$(window).off("resize."+r($(this))),t.get($(this)).val($(this).val()),window.removeEditor($(this).attr("id"))})}),$(document).on("form:submit",function(e){0<$(e.target).find(".js-wysiwyg").length&&window.removeAllEditors&&window.removeAllEditors()});var o=function(t){return function(){var e=t.parent();CKEDITOR.instances[t.attr("id")].resize(e.width(),e.height())}},r=function(e){return"ck-editor-"+e.attr("id")},s=function(e){return!!e.data("full-height-editor")},a=function(e){var t,i={};return i.isFullHtml=!!e.data("full-tags"),i.isFullHeight=s(e),i.browseMailingId=(t=e).data("browse-mailing-id")||((t=(t=t.data("form-target"))?$(t):null)&&0!==t.length?(t=n.get(t),t.getValue("mailingID")||t.getValue("mailingId")):null),i.height=i.isFullHeight?0:e.height(),i.width=i.isFullHeight?e.parent().width():"100%",i.allowExternalScript=!1,_.extend(i,AGN.Lib.Helpers.objFromString(e.data("editor-options")))}}(),AGN.Lib.Validator.new("action",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,t){var i=[];return $("#serviceMailOperation").length&&this.validateSendServiceOperation(i),i},validateSendServiceOperation:function(e){validateEmailList($("input[id$=toAddress]"),e,"triggerManager.operation.serviceMail.error.recipientAddress"),validateEmail($("input[id$=fromAddress]"),e,"triggerManager.operation.serviceMail.error.senderAddress"),validateEmail($("input[id$=replyAddress]"),e,"triggerManager.operation.serviceMail.error.replyAddress"),validateSubject($("input[id$=subjectLine]"),e)}}),!function(){function l(e){return e.val().trim()}AGN.Lib.Validator.new("export/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var s,a,n=[];return s=n,a=[],_.each($("#columnMappings tbody").find("[data-column-mapping-row]"),function(e){var e=$(e).find("[data-column-name]"),i=l(e),n=(o=s,n=l(r=e),!r.is(":last-child")&&n.length<3||r.is(":last-child")&&n&&n.length<3?o.push({field:r,msg:t("export.columnMapping.error.nameToShort")}):(!r.is(":last-child")&&!/^[a-zA-Z0-9_]{3,}$/.test(n)||r.is(":last-child")&&n&&!/^[a-zA-Z0-9_]{3,}$/.test(n))&&o.push({field:r,msg:t("export.columnMapping.error.invalidColName")}),i),o=a,r=s;n&&0<=o.indexOf(n.toLowerCase())&&r.push({field:e,msg:t("export.columnMapping.error.duplicate")}),0<=$.map($('select[name="columns"] option'),function(e){return e.value.toLowerCase()}).indexOf(n.toLowerCase())&&r.push({field:e,msg:t("export.columnMapping.error.exist")}),a.push(i.toLowerCase())}),n}})}(),AGN.Lib.CoreInitializer.new("importprofile-fields-validator",function(){var u,d="dd.mm.yyyy";function s(e,i){var n,o,r,s,a,l,c=c="'"==(c=(c=e).val())[0]&&"'"==c[c.length-1]?c.substring(1,c.length-1):c;c&&"do-not-import-column"!==h(e)&&("date"===(o=(n=u.columns[h(e)]).dataType.toLowerCase())||"datetime"===o?/^(now|now\(\)|sysdate|sysdate\(\)|current_timestamp|current_timestamp\(\)|today)\s*([+\-]\s*\d+\s*)?$/im.test(e.val().trim())||(r=o,a=i,l=e,(s=c)&&p(r,s)||a.push({field:l,msg:t("import.columnMapping.error.dateFormat","datetime"===r?d+" hh:mm":d)})):p(o,c)?c.length<=n.maxDataSize||i.push({field:e,msg:t("import.columnMapping.error.length",n.maxDataSize)}):i.push({field:e,msg:t("import.columnMapping.error.type",o)}))}function h(e){return("newColumnMapping.defaultValue"===e.attr("name")?$("[name=newColumnMapping\\.databaseColumn]"):e.closest("tr").find("[name^=dbColumn_]").first()).val()}function p(e,t){switch(e){case"numeric":case"float":case"double":return i=t,!isNaN(parseFloat(i))&&isFinite(i);case"integer":return/^-?\d+$/.test(t);case"date":return n(t);case"datetime":i=t;return n((i=i.split(" "))[0])&&/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/.test(i[1]);default:return 1}var i}function n(e){return moment(e,d.toUpperCase(),!0).isValid()}AGN.Lib.Validator.new("importprofile-fields/form",{init:function(){var e=$("#config\\:importprofile-fields-validator");u=e.exists()?e.json():{}},valid:function(e,t){return!this.errors(e,t).length},errors:function(e,t){var i,n,o,r=[];return $("#columnMappings").length&&(o=r,_.each($("#columnMappings tbody").find("[name^=default_value_]"),function(e){s($(e),o)}),i=o,"do-not-import-column"===h(n=$("[name=newColumnMapping\\.defaultValue]"))||function(){var e=$("[data-action=changeDateInput]");return e.length&&e.is(":checked")}()||s(n,i)),r}})}),AGN.Lib.Validator.new("length",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val(),o=[];return n?0<=i.min&&n.length<i.min?o.push({field:e,msg:t("fields.errors.string_exceed_min_length",i.min)}):0<=i.max&&n.length>i.max&&o.push({field:e,msg:t("fields.errors.string_exceed_max_length",i.max)}):(0<i.min||!0===i.required)&&o.push({field:e,msg:t("fields.required.errors.missing")}),o}}),AGN.Lib.Validator.new("logon-new-password/form",{valid:function(){return!this.errors().length},errors:function(){var e=[],i=$("#password"),n=$("#password-repeat"),o=i.val();return $.trim(o)?o!=n.val()&&e.push({field:n,msg:t("fields.password.errors.notMatching")}):e.push({field:i,msg:t("fields.required.errors.missing")}),e}}),AGN.Lib.Validator.new("mailing-priorities/form",{valid:function(){return 0<$("#priorityCount").val()||(AGN.Lib.Messages(t("defaults.error"),t("error.mailing.invalidPriorityCount"),"alert"),!1)},errors:function(){return[]}}),AGN.Lib.Validator.new("mailinglist-exist",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,t){var i=e.val(),n=AGN.Lib.Validator.get("required-id").errors(e,t);return n&&n.length<=0&&t&&t.removedMailinglistId==i.trim()&&n.push({field:e,msg:"Mailing list removed"}),n}}),AGN.Lib.Validator.new("max-length-validator",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val(),o=[];return(n=e.hasClass("js-wysiwyg")&&!n?$("#cke_"+e.attr("id")).find("iframe").contents().find("body").text():n)?n.length>i.max&&o.push({field:e,msg:t("fields.errors.contentLengthExceedsLimit",i.max)}):!0===i.required&&o.push({field:e,msg:t("fields.required.errors.missing")}),o}}),AGN.Lib.Validator.new("number",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n,o=[],r=e.val();return r?(n=(!0===i.float?parseFloat:parseInt)(r),isNaN(n)?o.push({field:e,msg:t("fields.errors.number_nan")}):n<i.min?o.push({field:e,msg:t("fields.errors.number_exceed_min",i.min)}):n>i.max?o.push({field:e,msg:t("fields.errors.number_exceed_max",i.max)}):!0===i.strict&&$.trim(r)!==n.toString()&&(!0===i.float?o.push({field:e,msg:t("fields.errors.number_not_double")}):o.push({field:e,msg:t("fields.errors.number_not_integer")}))):!0===i.required&&o.push({field:e,msg:t("fields.required.errors.missing")}),o}}),AGN.Lib.Validator.new("phone-number",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=$.trim(e.val()),o=[];if(n){for(var r=0,s=!1,a=!1,l=0,c=0;c<n.length;c++){var u=n.charAt(c);if("0"<=u&&u<="9")l++,r=3;else if("."==u||"-"==u||"/"==u){if(3!=r&&6!=r){s=!0;break}r=4}else if("("==u){if(a){s=!0;break}r=5,a=!0}else if(")"==u){if(3!=r||!a){s=!0;break}a=!(r=6)}else if("+"==u){if(0!=r){s=!0;break}r=1}else if(!/\s/.test(u)){s=!0;break}}(s||a||l<3||20<l)&&o.push({field:e,msg:t("fields.errors.phone_number_invalid")})}else!0===i.required&&o.push({field:e,msg:t("fields.required.errors.missing")});return o}}),!function(){function r(e,i,n,o,r,s){!function(e,t,i,n){e=AGN.Lib.Validator.get("length").errors(e,{min:i,max:n,required:!0});if(e.length)return void e.forEach(function(e){t.push(e)});return 1}(e,i,n,o)||(n=i,o=r,i=s,(r=e).val().match(o)||n.push({field:r,msg:t(i)}))}AGN.Lib.Validator.new("reference-table/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,t){var i=[],n=$('[name="shortname"]'),o=$('[name="keyColumn"]');return n.length&&r(n,i,5,t.isVoucher?27:29,new RegExp("^[a-z]*$","i"),"referenceTables.table.error.name"),o.length&&r(o,i,3,30,/^(?![0-9_])[a-z0-9_]*$/,"referenceTables.table.error.keyColumn"),i}})}(),AGN.Lib.Validator.new("reject-script-element",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[];return(new DOMParser).parseFromString(e.val(),"text/html").querySelector("script")&&n.push({field:e,msg:t("fields.errors.illegal_script_element")}),n}}),AGN.Lib.Validator.new("required-id",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=e.val(),o=parseInt(n),r=[];return(isNaN(o)||o.toString()!==n.toString().trim()||o<=0&&!1!==i.positive)&&r.push({field:e,msg:t("fields.required.errors.missing")}),r}}),AGN.Lib.Validator.new("unique-mobile-base",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=AGN.Lib.Select.get(e).getSelectedValue(),o=e.attr("id"),r=[];return this.isUniqueMobileBase(n,o)||r.push({field:e,msg:t("fields.mediapool.errors.mobile_base_duplicate")}),r},isUniqueMobileBase:function(t,e){return""==t||0===$("[id^=image-mobile-base]:not(#"+e+")").filter(function(){var e=$(this);return AGN.Lib.Select.get(e).getSelectedValue()===t}).length}}),AGN.Lib.Validator.new("upload-file/form",{valid:function(e,i){var n=!0,o=$('[data-initializer="upload"]');return o.exists()&&o.data("upload-selection").length<1&&(AGN.Lib.Messages(t("defaults.error"),t("error.upload.file"),"alert"),n=!1),n&&!this.errors(e,i).length},errors:function(e,i){var n=[{field:$("#name"),maxLength:99},{field:$("#firstName"),maxLength:99},{field:$("#phone"),maxLength:99},{field:$("#email"),maxLength:99,regexpRules:[{regexp:/\S+@\S+\.\S{2,}/,message:t("error.upload.email")}]}],s=[];return n.forEach(function(e){var i=e.field,n=i.val();if(!n||n.length<3)s.push({field:i,msg:t("fields.required.errors.missing")});else if(e.maxLength&&n.length>e.maxLength)s.push({field:i,msg:t("fields.errors.contentLengthExceedsLimit",e.maxLength)});else if(e.regexpRules&&0<e.regexpRules.length)for(var o=0;o<e.regexpRules.length;++o){var r=e.regexpRules[o];if(!n.match(r.regexp))return void s.push({field:i,msg:r.message})}}),s}}),AGN.Lib.Validator.new("userform-edit/form",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[],o=$('[name="formName"]');return o.val().match(/^[a-zA-Z0-9-_]+$/gi)||n.push({field:o,msg:t("userform.error.invalid_name")}),this.validateTemplateField(n,$("#successTemplate"),"SUCCESS"),this.validateTemplateField(n,$("#errorTemplate"),"ERROR"),n},validateTemplateField:function(e,t,i){return!!this.validateDirectives(e,t)&&(!!this.validateHrefPattern(e,t,i)&&void 0)},validateDirectives:function(e,i){var n=i.val().match(/#(?:include|parse)/gi);return!n||(e.push({field:i,msg:t("userform.error.illegal_directive",n.join(", "))}),!1)},validateHrefPattern:function(e,i,n){var o=i.val(),r=o.search(/\shref\s*=\s*(["'])\s/gi);return-1==r||(o=o.slice(0,r).match(/\r?\n/g).length+1,e.push({field:i,msg:t("userform.error.invalid_link",n,o)}),!1)}}),AGN.Lib.Controller.new("action-view",function(){var o,n=[],r={};function s(){var t=this;t.$container=$("#module-list"),t.$container.on("remove-module",function(){var e=t.$container.find("[data-action-module] .headline span.module-count");$.each(e,function(e,t){$(t).html(e+1+".")})}),t.$container.on("add-new-module",function(){var e=t.$container.find("[data-action-module]");e.last().find(".headline span.module-count").html(e.length+".")})}function a(e,t,i){this.type=e,this.index=i||0,this.id=t.id||0,this.data=$.extend(a.defaults(e),t)}function i(t){return n.filter(function(e){return e.type===t})}function l(e,t){var e=$(e.closest("[data-action-module]")),i=e.find("[data-useTrack-trackingPointId]"),n=e.find("[data-useTrack-updateValue]");i.exists()?0===e.index()&&(t?(i.show(),n.hide()):(i.hide(),n.show())):n.show()}s.prototype.clean=function(){this.$container.empty()},s.prototype.getNextIndex=function(){var e=this.$container.find("[data-module-content"),t=0;return t=0<e.length?e.last().data("module-content")+1:t},s.prototype.addModule=function(e){var i;e&&e.type&&(e.index=this.getNextIndex(),i=AGN.Lib.Template.dom("common-module-data",{moduleName:t("triggerManager.operation."+e.type)}),e=AGN.Lib.Template.text("module-"+e.type,e.getParameters()),i.filter(".inline-tile").append(e),this.$container.append(i),AGN.runAll(i),this.$container.trigger("add-new-module"))},s.prototype.deleteModule=function(t){var e,i;0<=t&&(i=(e=this.$container.find("[data-module-content="+t+"]").parent("[data-action-module]")).next(".tile-separator"),e.remove(),i.remove(),this.$container.trigger("remove-module"),n=n.filter(function(e){return e.index!==t}))},s.prototype.toJson=function(){var i=[];return this.$container.find("[data-module-content]").each(function(e,t){i.push(a.toJson($(t),e))}),i},s.prototype.getSubmissionJson=function(){return JSON.stringify(this.toJson())},a.defaults=function(e){var t={};switch(e){case"ActivateDoubleOptIn":t.forAllLists=!1,t.mediaTypeCode=0;break;case"ContentView":t.tagName="";break;case"ExecuteScript":t.script="";break;case"GetArchiveList":t.campaignID=0;break;case"GetArchiveMailing":t.expireDate=null;break;case"GetCustomer":t.loadAlways=!1;break;case"IdentifyCustomer":t.keyColumn="",t.passColumn="";break;case"SendMailing":t.mailingID=0,t.delayMinutes=0,t.bcc="",t.forActiveRecipients=!0;break;case"ServiceMail":t.toAddress="",t.fromAddress="",t.replyAddress="",t.subjectLine="",t.mailtype=0,t.textMail="",t.htmlMail="";break;case"SubscribeCustomer":t.doubleCheck=!1,t.keyColumn="",t.doubleOptIn=!1;break;case"UnsubscribeCustomer":t.mailinglistIds=[],t.allMailinglistsSelected=!1,t.additionalMailinglists=!1;break;case"UpdateCustomer":t.useTrack=!1,t.columnName="",t.updateValue="",t.updateType=1,t.trackingPointId=-1}return t},a.toJson=function(e,t){var o={};return o.index=t,e.find('[name^="modules[]"]').each(function(e,t){var t=$(t),i=(t.prop("name")||"").replace("modules[].",""),n="",n=t.is("select")?AGN.Lib.Select.get(t).getSelectedValue():t.is("input")&&"checkbox"===t.prop("type")?t.prop("checked"):t.val();o[i]=n}),$.extend(a.defaults(o.type),o)},a.prototype.getParameters=function(){var e={type:this.type,index:this.index,id:this.id};return _.merge({},this.data,e)},a.create=function(e){return new a(e,{})},a.deserialize=function(e,t){return new a(r[e.operationType],e,t)},this.addDomInitializer("action-view",function(){var e=$(this.el),t=AGN.Lib.Form.get(e),i=(t.loader().show(),this.config),n=(r=this.config.operationTypes,(o=new s).clean(),[]);(n=i.modules?JSON.parse(i.modules).map(function(e,t){return a.deserialize(e,t)}):n).forEach(function(e){o.addModule(e)}),t.initFields(),e.removeClass("hidden"),t.loader().hide()}),this.addAction({click:"add-new-module"},function(){var e=$(this.el),t=_.merge({},{},AGN.Lib.Helpers.objFromString(e.data("config"))),t=$(t.moduleTypeSelector),t=a.create(t.val());"SendMailing"===t.type&&0<i("ActivateDoubleOptIn").length&&(t.data.forActiveRecipients=!1),o.addModule(t),n.push(t),AGN.Lib.Form.get(e).initFields(),"ActivateDoubleOptIn"===t.type&&i("SendMailing").forEach(function(e){document.getElementById("module_"+e.index+".forActiveRecipients").checked=!1})}),this.addAction({click:"action-delete-module"},function(){var e=$(this.el);o.deleteModule(e.data("property-id"))}),this.addAction({submission:"save-action-data"},function(){var e=AGN.Lib.Form.get($(this.el));e.setValueOnce("modulesSchema",o.getSubmissionJson()),e.submit()}),this.addDomInitializer("update-customer-module",function(){var e=$(this.el),t=e.find('[data-action="toggle-if-first"]:checked');l(e,t.exists())}),this.addAction({click:"toggle-if-first"},function(){var e=$(this.el);l(e,e.prop("checked"))})}),AGN.Lib.Controller.new("admin-enabling",function(){this.addAction({click:"save-approved-mailing-lists"},function(){var e,t=this.el,i=AGN.Lib.Form.getWrapper(t);e=i,$("input[name*='disabledMailinglistsIds']").remove(),function(e){return e?$("input:checkbox:not(:checked)[data-enabling="+e+"]"):$("input:checkbox:not(:checked)[data-enabling]")}("mailinglist").each(function(){$("<input>").attr({type:"hidden",name:"disabledMailinglistsIds",value:$(this).data("mailinglist")}).appendTo(e)}),AGN.Lib.Form.get(i).submit().done(function(e){!0===e.success?(AGN.Lib.JsonMessages(e.popups,!0),AGN.Lib.Modal.getWrapper(t).modal("hide")):AGN.Lib.JsonMessages(e.popups,!0)})})}),AGN.Lib.Controller.new("allowed-profile-field-values",function(){var i=this;this.addInitializer("allowed-values",function(e){e=(e=e||$(document)).find('[data-controller="allowed-profile-field-values"]');0!=e.length&&(i.container=e.find("table .js-allowed-value").first().parent())}),this.addAction({click:"addNewValue"},function(){var e=i.getRow(this.el),t=i.getField(e).val();e.remove(),i.appendRow(!1,t),i.appendRow(!0)}),this.addAction({click:"deleteValue"},function(){i.getRow(this.el).remove()}),this.appendRow=function(e,t){e=AGN.Lib.Template.dom("allowed-value-new-row",{isLastRow:e});t&&this.getField(e).val(t),this.container.append(e)},this.getRow=function(e){return e.closest("tr.js-allowed-value")},this.getField=function(e){return e.find('input[name="allowedValues"]')}}),AGN.Lib.Controller.new("auto-import-export",function(){this.addInitializer("optionsChangeable",function(){$("#recipient-autoimport-csvdescription").length&&$('[data-action="options-availability"][value="ReferenceTable"]').prop("disabled",!1)}),this.addAction({click:"select-customer-fields"},function(){AGN.Lib.Modal.createFromTemplate({},"modal-select-customer-fields"),$("#modalSelectedProfileFields").select2("val",$("#selectedProfileFields").val())}),this.addAction({click:"save-selected-customer-fields"},function(){$("#selectedProfileFields").select2("val",$("#modalSelectedProfileFields").val())});var i={},n=!1,o=(this.addDomInitializer("import-profile-mailing-lists",function(){var e=this.config,e=(n=e.isAutoImportNew,i=e.profileMailinglists,$('[name="'+e.profileIdPropertyName+'"]').val());o(e,n)}),this.addAction({change:"change-import-profile"},function(){var e=AGN.Lib.Select.get($(this.el)).getSelectedValue();o(e,n)}),function(e,t){t&&(t=i[e],$('input[type=checkbox][name^="mailinglist"]').prop("checked",!1),_.each(t,function(e){$('input[type=checkbox][name="mailinglist['+e+']"]').prop("checked",!0)}))}),r=AGN.Lib.ScheduleTimeTable,s=AGN.Lib.ScheduleTimeTable.DayRow;function a(e){return e.closest("[data-controller]").data("_schedule_table")}function l(e){return e.isValidTimeIntervals()?(e.hideTimeScheduleErrors(),!0):(e.showTimeScheduleErrors(t("error.delay.60")),!1)}function c(e){return e.closest("[data-controller]").data("_export_type_handler")}function u(e,t){if(!e.exists())return console.error("ExportTypeHandler could not instantiate, element is not defined"),!1;this.$element=e,this.exportType=t.exportType||"",this.mailingType=t.mailingType||-1;e=$('input[name="'+t.oneTimeOption+'"]');this.$oneTimeCheckbox=e,this.initialOneTimeValues={checked:e.is(":checked"),disabled:e.is(":disabled")},this.toggleOneTimeCheckbox()}this.addDomInitializer("auto-import-export-scheduler",function(){var e=$(this.el),t=this.config.intervalAsJson||[],i=new r($("#tile-importexport-schedule-time")),n=(n=i,e.closest("[data-controller]").data("_schedule_table",n),[]);(n=_.isEmpty(t)?n:JSON.parse(t).map(function(e){return s.deserialize(e)})).forEach(function(e){i.addRow(e)}),0===n.length&&i.addEmptyDayRow(),AGN.Lib.Form.get(e).initFields()}),this.addAction({click:"add-day"},function(){a($(this.el)).addEmptyDayRow()}),this.addAction({click:"remove-day"},function(){a($(this.el)).deleteRow(s.get($(this.el)))}),this.addAction({click:"add-schedule"},function(){s.get($(this.el)).addSchedule()}),this.addAction({click:"remove-schedule"},function(){s.get($(this.el)).removeSchedule($(this.el))}),this.addAction({click:"time-checkbox-toggle"},function(){var e=$(this.el);s.get(e).timeCheckboxToggle(e)}),this.addAction({click:"hour-checkbox-toggle"},function(){var e=$(this.el);s.get(e).hourCheckboxToggle(e)}),this.addAction({change:"validate-changes"},function(){var e=$(this.el);l(s.get(e))}),this.addAction({submission:"save-scheduler-data"},function(){var e,t=a($(this.el));t.getAllDayRows().every(l)&&((e=AGN.Lib.Form.get($(this.el))).setValueOnce("intervalAsJson",t.getSubmissionJson("day")),e.submit())}),this.addDomInitializer("mailing-options-attribute-resolver",function(){var e,t=$(this.el);e=new u(t=t,this.config),t.closest("[data-controller]").data("_export_type_handler",e)}),u.prototype.isAfterMailingDeliveryType=function(){return"Mailing"==this.exportType&&0==this.mailingType},u.prototype.resolve=function(e,t){this.exportType=e||"",this.mailingType=t||-1,this.toggleOneTimeCheckbox()},u.prototype.toggleOneTimeCheckbox=function(){var e=this.isAfterMailingDeliveryType(),t=this.initialOneTimeValues.checked,i=this.initialOneTimeValues.disabled;this.$oneTimeCheckbox.prop("checked",e||t),this.$oneTimeCheckbox.prop("disabled",e||i)},this.addAction({change:"change-mailing-type"},function(){var e=$(this.el),t=AGN.Lib.Select.get(e).getSelectedValue(),i=$("#exportType").is("select")?AGN.Lib.Select.get($("#exportType select")).getSelectedValue():$("#exportType [type=radio]:checked").val();c(e).resolve(i,t)}),this.addAction({change:"export-type-resolver"},function(){var e=$(this.el),t=$("#exportType").is("select")?AGN.Lib.Select.get($("#exportType select")).getSelectedValue():e.find("[type=radio]:checked").val(),i=AGN.Lib.Select.get($("#exportMailing select")).getSelectedValue();c(e).resolve(t,i)})}),AGN.Lib.Controller.new("available-building-blocks",function(){var i,n,t;function o(){var e=$(t.form).find(".table-controls .well");e.first().html(e.last().html())}function r(){t&&t.setValue("changedBlockStatusJson",JSON.stringify(i,function(e,t){if(null!=t)return t}))}this.addDomInitializer("available-building-blocks",function(){i={},n={};var e=this.el;t=AGN.Lib.Form.get(e),this.config.changedBlockStatus&&(i=JSON.parse(this.config.changedBlockStatus))}),this.addDomInitializer("available-building-blocks-table",function(){var e=this.config.divContainerList;_.each(e,function(e){var t=e.id,e=e.active;t in n?t in i&&$("input:checkbox[data-block-id="+t+"]").prop("checked",!!i[t]):n[t]=e}),o()}),this.addAction({click:"update-changed-data"},function(){var e=this.el;o(),r(),t.setActionOnce(e.data("form-url")),t.setResourceSelectorOnce(e.data("form-resource")),t.submit()}),this.addAction({change:"change-activation"},function(){var e=this.el,t=e.data("block-id"),e=e.is(":checked");e==n[t]?t in i&&delete i[t]:i[t]=e}),this.addAction({change:"activate-all"},function(){var e=this.el,t=$("input:checkbox[data-block-id]");t.prop("checked",e.is(":checked")),t.change()}),this.updateTableControls=o,this.updateFormData=r}),AGN.Lib.Controller.new("birt-reports",function(){var t,i,r={},n=0,s=[],a=[],l=[];this.addDomInitializer("birt-reports",function(){r=this.config,i=r.constant.MAILING_ID,t=r.constant.AFTER_MAILING_TYPE_ID,s=r.filtered.FILTER_ARCHIVE,a=r.filtered.FILTER_MAILINGLIST,l=r.filtered.FILTER_TARGET,n=r.reportType}),AGN.Lib.Action.new({change:"input[type=radio][name=type]"},function(){var e=$(this.el).val();return e==t?_.each($(r.reportSettingsId).find("[data-toggle-tab]"),function(e){var e=$(e),t=e.data("toggle-tab");t.endsWith(i)?e.trigger("click"):(e.parent("li").addClass("disabled"),AGN.Lib.Tab.hide($(t)))}):n==t&&_.each($(r.reportSettingsId).find("[data-toggle-tab]"),function(e){$(e).parent("li").removeClass("disabled")}),n=e,!1}),this.addDomInitializer("report-settings",function(){var e=this.el,t=this.config;new o(e,t)});var o=function(e,t){var i=this;this.container=e,this.config=t,this.settingsType=t.settingsType,this.select=AGN.Lib.Select.get(e.find(t.selectors.filterBlockId)),this.mailingSelect=AGN.Lib.Select.get(e.find(t.selectors.normalMailing)),i.init(t),e.find(t.selectors.mailingType).on("change",function(e){i.handleMailingTypeChanges($(e.target))}),e.find(t.selectors.mailingFilter).on("change",function(e){i.handleMailingFilterChanges($(e.target))}),e.find(t.selectors.filterBlockId).on("change",function(e){i.handleMailingFilterValueChanges($(e.target))})};o.prototype.init=function(e){var t=e.data.mailingType,i=e.data.mailingFilter,n=e.data.predefineMailing,e=e.data.selectedMailings;this.updateAllComparisonDependentFields(t,i,n,e)},o.prototype.handleMailingTypeChanges=function(e){var t=this.getMailingFilter(),i=this.getMailingFilterValue();this.updateNormalMailingField(e.val(),t,i)},o.prototype.handleMailingFilterChanges=function(e){var t=this.getMailingType();this.updateAllComparisonDependentFields(t,e.val())},o.prototype.handleMailingFilterValueChanges=function(e){var t=this.getMailingFilter(),i=this.getMailingType();this.updateNormalMailingField(i,t,e.val())},o.prototype.updateAllComparisonDependentFields=function(e,t,i,n){var o,r=this;r.select.resetOptions(),0<t&&(o=[],1==t?o=s:2==t?o=a:4==t&&(o=l),_.each(o,function(e){r.select.addFormattedOption('<option value="'+e.id+'">'+e.shortname+"</option>")}),r.select.selectValueOrSelectFirst(i),i=r.select.getSelectedValue()),r.updateNormalMailingField(e,t,i,n)},o.prototype.updateNormalMailingField=function(e,t,i,n){var o=this;o.mailingSelect.resetOptions(),(o.settingsType==r.constant.COMPARISON_SETTINGS&&2==e||o.settingsType==r.constant.MAILING_SETTINGS&&3==e)&&$.ajax({type:"POST",url:r.urls.FILTERED_MAILING_URL,data:{type:t,value:i||0,mailingType:r.constant.NORMAL_MAILING_TYPE}}).done(function(e){_.each(e,function(e){o.mailingSelect.addFormattedOption('<option value="'+e.id+'">'+e.shortname+"</option>")}),o.mailingSelect.selectValue(n||"")})},o.prototype.getMailingFilter=function(){var e=this.container.find(this.config.selectors.mailingFilter);return 0|parseInt(e.val())},o.prototype.getMailingFilterValue=function(){var e=this.select.getSelectedValue();return 0|parseInt(e)},o.prototype.getMailingType=function(){var e=this.container.find(this.config.selectors.mailingType+":checked");return 0|parseInt(e.val())}}),AGN.Lib.Controller.new("blacklist-list",function(){var i;this.addDomInitializer("blacklist-list-init",function(){i=this.el}),this.addAction({click:"saveBlacklist"},function(){var e=this.el,t=AGN.Lib.Form.get(e),e=e.data("url");$.ajax(e,{type:"POST",data:{email:i.find("#new-entry-email").val(),reason:i.find("#new-entry-reason").val()},success:function(e){!0===e.success?t.submit().done(function(){AGN.Lib.JsonMessages(e.popups,!0)}):AGN.Lib.JsonMessages(e.popups,!0)}})})}),AGN.Lib.Controller.new("edit-modal-blacklist-list",function(){this.addAction({click:"saveChanges"},function(){var t=this.el;AGN.Lib.Form.get(t).submit().done(function(e){!0===e.success?(AGN.Lib.Form.get($("#blacklistListView")).submit().done(function(){AGN.Lib.JsonMessages(e.popups,!0)}),AGN.Lib.Modal.getWrapper(t).modal("hide")):AGN.Lib.JsonMessages(e.popups,!0)})})}),AGN.Lib.Controller.new("email-list-controller",function(){function e(){var e=i.getJsonData();$('input[name="'+n+'"]').val(e.join(o))}var i,n="",o=" ";this.addDomInitializer("email-list-initializer",function(){var e,t=$(this.el);n=t.data("target-field")||"",o=t.data("data-emails-separator")||o,i=AGN.Lib.EmailsListManager.initialize(t,(t=[""],e=$('input[name="'+n+'"]').val(),t=e?e.split(o):t))}),this.addAction({click:"delete-email"},function(){i.deleteRow($(this.el)),e()}),this.addAction({click:"create-email"},function(){i.createRowAfter($(this.el)),e()}),this.addAction({change:"change-trigger"},function(){e()})}),AGN.Lib.Controller.new("content-source-view",function(){var s,o,n,i,r,a=AGN.Lib.Select,l=AGN.Lib.Template,c=[],u=[];function d(e,t){this.address=t,this.contentBlockName="",this.targetGroup=0,this.index=e}function h(){var e,t=$("#dynamic-container");o.empty(),t.empty(),"HTML"===r&&i?(e=$(l.text("add-url-btn",{})),t.append(e)):"XML"===r&&(e=$(l.text("xml-source-url")),t.append(e))}function p(e,t){e&&t&&e.on("change keyup paste",function(){$(this).val()?t.show():t.hide()})}function f(e,t,i,n,o){e=e.find(t);i?(e.find(n).text(o),e.show()):e.hide()}d.create=function(e,t){return new d(e,t)},this.addDomInitializer("content-source-view",function(){var e;o=$("#urlsContainer"),s=AGN.Lib.Form.get($("#content-source-form")),r=$("#resource-type").val(),c=[],h(),this.config.urlResources&&(e=this.config.urlResources,"XML"===r?0<e.length&&$("#xml-url-address").val(e[0].url):"HTML"===r&&_.each(e,function(e){t=e,(i=d.create(c.length)).address=t.url,i.contentBlockName=t.contentBlockName,i.targetGroup=t.targetGroup,c.push(i);var t=i,i=$(l.text("html-source-url",{index:t.index,address:t.address})),t=i.find("button[data-action='configure-url']"),n=i.find("input[data-source-url]");f(i,".content-block-info",e.contentBlockName,".content-name-value",e.contentBlockName),f(i,".target-group-info",e.targetGroupName,".target-group-value",e.targetGroupName),o.append(i),p(n,t)})),n=this.config.urls.linkForSettings,i=this.config.htmlSourcesAllowed}),this.addAction({change:"change-resource-type"},function(){r=this.el.val(),h(),c=[]}),this.addDomInitializer("content-sources-mailings",function(){u=this.config;var t,e,i=$("#mailing-name");t=i,u.forEach(function(e){e=$("<option>",{value:e.name,text:e.name});t.append(e)}),i=i,e=$("#content-block-name"),i.on("change",function(){var t,i;e.empty(),t=$(this).val(),i=e,u.find(function(e){return e.name===t}).blocks.forEach(function(e){e=$("<option>",{value:e,text:e});i.append(e)}),a.get(e).selectFirstValue()})}),this.addAction({click:"add-url-resource"},function(){var e=c.length,t=$(l.text("html-source-url",{index:e,address:""})),i=t.find("button[data-action='configure-url']"),n=t.find("input[data-source-url]");o.append(t),i.hide(),p(n,i),c.push(d.create(e))}),this.addAction({click:"configure-url"},function(){var o,r,e=this.el.closest(".form-group"),t=e.find(".form-control"),i=e.data("url-index"),e={url:t.val(),index:i},t=c.find(function(e){return e.index===i});o=e,r=t,$.get(n).done(function(e){var t,i,e=_.template(e)(o),e=(s.updateHtml(e),r),n=$('div[data-modal-index="'+e.index+'"]');e.contentBlockName&&(t=n.find("#content-block-name"),(i=t.find("option:first-child")).val(e.contentBlockName),i.text(e.contentBlockName),t.change()),0<e.targetGroup&&((i=n.find("#target-group-select")).find("option[value="+e.targetGroup+"]").attr("selected","selected"),i.change()),$("[data-confirm-positive]").on("click",function(){var e=$(this).closest(".modal"),t=e.data("modal-index"),i=c.find(function(e){return e.index===t}),n=e.find("#target-group-select");i.targetGroup=n.val(),i.contentBlockName=e.find("#content-block-name").val(),e=i,i=n,n=$("div[data-url-index='"+e.index+"']"),i=i.find("option:selected").text(),f(n,".content-block-info",e.contentBlockName,".content-name-value",e.contentBlockName),f(n,".target-group-info",e.targetGroup,".target-group-value",i),s.handleErrors()})})}),this.addAction({click:"remove-url"},function(){var e=this.el.closest(".form-group"),t=e.data("url-index");e.remove(),c=c.filter(function(e){return e.index!==t})}),this.addAction({submission:"content-source-save"},function(){var e;s.initFields(),"XML"===r?(e=d.create(0,$("#xml-url-address").val()),(c=[]).push(e)):"HTML"===r&&_.each(o.find("[data-source-url]"),function(e){var e=$(e),t=e.closest(".form-group").data("url-index");c.find(function(e){return e.index===t}).address=e.val()}),s.valid()&&_.each(c,function(e,t){var i=e.targetGroup||0;s.setValue("urls["+t+"].url",e.address),s.setValue("urls["+t+"].contentBlockName",e.contentBlockName),s.setValue("urls["+t+"].targetGroup",i)}),s.submit()}),AGN.Lib.Validator.new("mailing-content-block",{valid:function(e,t){return!this.errors(e,t).length},errors:function(e,i){var n=[],o=e.closest(".form-group").data("url-index");return c.find(function(e){return e.index===o}).contentBlockName||n.push({field:e,msg:t("contentSource.error.block_not_set")}),n}})}),AGN.Lib.Controller.new("custom-thumbnail-view",function(){function n(e,t,i){var n=e.data("preview-name");n&&$(n).text(t),(n=e.data("preview-image"))&&(i?$(n).prop("src",i):$(n).each(function(){var e=$(this);e.prop("src",e.data("no-preview-src")||"")}))}this.addAction({change:"use-custom-thumbnail"},function(){$("#customThumbnailFile").prop("name",this.el.is(":checked")?"customThumbnailFile":"")}),this.addAction({change:"custom-thumbnail-image"},function(){var t,i=this.el,e=i.prop("files");e&&e.length?"image"==(t=e[0]).type||t.type.match("image/.*")?((e=new FileReader).onload=function(e){n(i,t.name,e.target.result)},e.readAsDataURL(t)):(AGN.Lib.Helpers.clearFormField(i),n(i,"","")):n(i,"","")})}),AGN.Lib.Controller.new("dashboard",function(){var r,t,i,n,e=this;function o(e){jQuery.ajax({type:"POST",url:t.urls.STATISTICS,data:{mailingId:e},success:function(e){e=_.merge({common:[["no Data","0"]],clickers:[["no Data","0"]],clickersPercent:[0],openers:[["no Data","0"]],openersPercent:[0]},e);for(var t=[],i=[],n=0;n<e.common.length;n++){var o=parseInt(e.common[n][1]);t.push(e.common[n][0]),i.push(o)}c3.generate(AGN.Lib.DashboardStatisticsService.data.statChartData.build(t,i)),t=[],i=[];for(var r=0,n=0;n<e.clickers.length;n++){o=a(100*e.clickers[n][1],1);t.push(e.clickers[n][0]),i.push(o),r+=o}if(!isNaN(r)&&0<r)for(n=0;n<i.length;n++)t[n]+=" "+a(100*i[n]/r,1)+"%";var s=a(100*e.clickersPercent[0],1)+"%*";c3.generate(AGN.Lib.DashboardStatisticsService.data.clickChartData.build(s,t,i)),t=[],i=[];for(n=r=0;n<e.openers.length;n++){o=a(100*e.openers[n][1],1);t.push(e.openers[n][0]),i.push(o),r+=o}if(!isNaN(r)&&0<r)for(n=0;n<i.length;n++)t[n]+=" "+a(100*i[n]/r,1)+"%";s=a(100*e.openersPercent[0],1)+"%*";c3.generate(AGN.Lib.DashboardStatisticsService.data.viewChartData.build(s,t,i)),AGN.Lib.CoreInitializer.run("equalizer")}})}function a(e,t){return+parseFloat(e).toFixed(t)}function s(){var e="MESSAGE",t=0;if(d("MESSAGE")<1){var i,n,o=!1;for(i in r)!r.hasOwnProperty(i)||t<(n=u(i))&&(t=n,e=i,o=!0);if(!o)for(i in r)r.hasOwnProperty(i)&&t<(n=d(i))&&(t=n,e=i)}AGN.Lib.Modal.createFromTemplate({openedNewsType:e},"modal-news"),$("#buttonNewsCounter").text(""),$(".l-news-menu-item").each(function(e){var t=$(this),i=u(t.data("news-type"));0<i?t.find(".l-news-menu-counter").text(i):t.find(".l-news-menu-counter").html("&nbsp;"),$(this).hasClass("active")&&l(t.data("news-type"))}),c()}function l(e){0<u(e)&&($("#newsCounter"+e).html("&nbsp;"),$.ajax({url:i,data:{type:e}}),r[e].unreadCount=0,c())}function c(){var e=u("NEWS"),t=$("#buttonNewsCounter"),i=t.parent(),n="5px",o="5px",r="";0<e?(i.removeClass("hidden"),o=n="4px",r=e):i.addClass("hidden"),i.parent().css("padding-top",n),i.parent().css("padding-bottom",o),t.text(r)}function u(e){return r&&r[e]&&Number.isInteger(r[e].unreadCount)?r[e].unreadCount:0}function d(e){return r&&r[e]&&Number.isInteger(r[e].availableCount)?r[e].availableCount:0}this.addDomInitializer("dashboard-news-counters",function(){var e=this.config;i=e.newsDateUrl,n=e.newsCountersUrl,$.ajax({url:n}).done(function(e){e.counters&&(r=e.counters,c(),u("MESSAGE")&&!$(".modal-news").exists()&&s())})}),this.addDomInitializer("dashboard-statistics",function(){0<(t=this.config).mailingId&&o(t.mailingId)}),this.addAction({click:"open-mailing-statistics"},function(){0<t.mailingId&&AGN.Lib.Page.reload(t.mailingStatisticsLinkPattern.replace("{mailing-id}",t.mailingId))}),this.addAction({change:"update-template-links"},function(){e.runInitializer("UpdateDashboardTemplateLinks")}),this.addAction({change:"statistics-select-mailing"},function(){return t.mailingId=this.el.val(),o(t.mailingId),!1}),this.addAction({click:"showNewsPopup"},function(){s()}),this.addAction({click:"chooseNewsType"},function(){l(this.el.parent().data("news-type"))}),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},this.addInitializer("UpdateDashboardTemplateLinks",function(e){var e=(e=e||$(document)).find(".js-template-link"),i=$('[data-action="update-template-links"]').val();_.each(e,function(e){var e=$(e),t=(t=e.attr("href")).replace(/templateID=\d+/,"templateID="+i);e.attr("href",t)})}),this.addInitializer("EndlessScroll",function(e){e=(e=e||$(document)).find(".js-endless-scroll");e.length<1||e.each(function(e){var t=1,i=$(this);i.endlessScroll({pagesToKeep:null,fireOnce:!0,fireDelay:1e3,loader:"",insertAfter:".js-endless-scroll .js-endless-scroll-content",ceaseFire:function(){return 0!==i.find(".message-list-item-last").length},callback:function(){var e;return AGN.Lib.Loader.prevent(),e=$.ajax({method:"GET",url:i.data("url"),data:{page:t+1}}),i.find(".js-endless-scroll-content").append('<div class="message-list-loader"><i class="icon icon-refresh icon-spin"></i></div>'),e.done(function(e){t+=1,i.find(".js-endless-scroll-content").append(e),i.find(".message-list-loader").remove(),AGN.Lib.CoreInitializer.run("icons-defs",i)}),e}})})})}),AGN.Lib.Controller.new("device-statistic",function(){var i,n,o,r;this.addDomInitializer("device-statistic-initializer",function(){var e=this.config,t=e.activeStatisticId;i=e.HTML_URL,n=e.htmlBlockSelector,o=e.exportBlockSelector,r=e.typeFieldName,_.each($('[data-action="switch-device-tab"]'),function(e){$(e).data("type")===t&&e.trigger("click")})}),this.addAction({click:"switch-device-tab"},function(){var e=$(this.el).data("type");$(n).find("iframe").attr("src",i.replace("{stat-type}",e)),$(o).html(AGN.Lib.Template.text("statistic-csv-view",{type:e})),$('[name="'+r+'"]').val(e)})}),AGN.Lib.Controller.new("emm-activeness",function(){function a(e){var t,i=$('[data-action="save"]'),n=0;for(t in e)if(e.hasOwnProperty(t)){n++;break}0<n?i.removeClass("disabled"):i.addClass("disabled")}function l(e,t){c(e,t,!0)}function c(e,n,o){var r=[];e.api.forEachNodeAfterFilterAndSort(function(e,t){var i=e.data.id;n.hasOwnProperty(i)&&(i=o?!n[i]:n[i],e.data.activeStatus=i?"ACTIVE":"INACTIVE",r.push(e.data))})}this.addAction({click:"save"},function(){var e=$(this.el),i=AGN.Lib.Form.get(e),n=e.closest("[data-controller]").data("_states")||{};if(i&&i.form){for(var o in n)n.hasOwnProperty(o)&&i.setValueOnce("activeness["+o+"]",n[o]);i.submit()}else{var r,s=AGN.Lib.Table.get(e);s&&(r=[],$.ajax(e.data("form-url"),{method:"POST",traditional:!1,data:{activeness:n}}).done(function(e){r=e&&!0===e.success?void c(s,n,!1):l(s,n),AGN.Lib.JsonMessages(e.popups)}).fail(function(){r=l(s,n),AGN.Lib.Messages(t("Error"),t("defaults.error"),"alert")}).always(function(){s.api.updateRowData({update:r});var e,t=n;for(e in t)delete t[e];a(t)}))}}),this.addAction({change:"toggle-active"},function(){var e=$(this.el),t=e.closest("[data-controller]"),i=t.data("_states")||{},n=e.data("item-id"),o=e.is(":checked");o==e.data("initial-state")?(delete(e=i)[n],a(e)):((e=i)[n]=o,a(e)),t.data("_states",i)})}),AGN.Lib.Controller.new("enlarged-content-editor-controller",function(){var t=AGN.Lib.Modal,i=AGN.Lib.Confirm,n=(this.addDomInitializer("enlarged-content-editor-initializer",function(e){e=t.get(e);e.content,r(e.editorType)}),this.addAction({click:"updateContent"},function(){var e=$(this.el);i.get(e).positive(n()),$("#enlarged_content_modal").modal("toggle")}),function(){return{content:e(),editorType:o()}}),e=function(){var e=$("#tab-enlargedContent-wysiwyg"),t=$("#enlargedContentEditor");return e.is(":visible")?CKEDITOR.instances.enlargedContent.getData():t.is(":visible")?ace.edit("enlargedContentEditor").getValue():void 0},o=function(){return $("#tab-enlargedContent-wysiwyg").is(":visible")?"wysiwyg":$("#enlargedContentEditor").is(":visible")?"html":""},r=function(e){!e||""===e||(e=$('[data-toggle-tab$="'+e+'"]'))&&e.trigger("click")}}),AGN.Lib.Controller.new("exportwizard-view",function(){var n,o,r,s;function a(e,t){s.append(o({name:e,value:t}))}function l(){return s.find("[data-column-mapping-row]:last-child")}function t(t){var i;_.each((i=[],_.each(s.find("[data-column-mapping-row]"),function(e){var e=$(e),t=e.find("[data-column-name]").val().trim();t&&i.push([t,e.find("[data-column-value]").val().trim()])}),i),function(e){t.setValue("customColumnMappings."+e[0],e[1])})}function c(){var e,t,i=$("#mailing-bounce-column-option");$("#recipient-export-recipientstatus").find(":selected").val()==r?i.removeAttr("disabled"):(t=(e=$('[name="columns"]')).val().filter(function(e){return"MAILING_BOUNCE"!=e}),e.val(t),e.trigger("change"),i.attr("disabled","disabled"))}function e(){var e=AGN.Lib.Form.get($("#exportWizardForm"));e.valid({})?(t(e),e.submit()):e.handleErrors()}this.addDomInitializer("exportwizard-view",function(){var e,t,i;n=this.config.adminHasOwnColumnPermission,r=this.config.bounceUserStatusCode,c(),n&&(t=this.config.columnMappings,i=[],Object.keys(t).forEach(function(e){i.push([e,t[e]])}),i.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),e=i,s=$("#columnMappings tbody"),o=AGN.Lib.Template.prepare("column-mapping-table-row"),_.each(e,function(e){a(e[0],e[1])}),a("",""))}),this.addAction({click:"save"},function(){e()}),this.addAction({click:"collect-data"},function(){e()}),this.addAction({change:"add-bounce-col-to-choose"},c),this.addAction({click:"add-column-mapping",enterdown:"mapping-enterdown"},function(){var e,t=AGN.Lib.Form.get($("#exportWizardForm")),i=l().find("[data-column-name]");this.event.preventDefault(),t.valid({})?i.val()?(t.cleanErrors(),(e=s.find('[data-action="add-column-mapping"]')).after("<a href='#' class='btn btn-regular btn-alert' data-action='delete-column-mapping'><i class='icon icon-trash-o'></i></a>"),e.remove(),a("",""),l().find("[data-column-name]").focus()):i.focus():t.handleErrors()}),this.addAction({click:"delete-column-mapping"},function(){this.el.closest("tr").remove()})}),AGN.Lib.Controller.new("facebook-leadads",function(){var e=AGN_FACEBOOK.Login,o=AGN_FACEBOOK.LeadAds,i=AGN_FACEBOOK.SDK,r=AGN.Lib.Select,s={},n=(this.addDomInitializer("facebook-leadads",function(){s=this.config,AGN.Lib.Storage.delete("fblst_"+s.FACEBOOK_LEADADS_APP_ID),i.load_sdk(s.FACEBOOK_LEADADS_APP_ID,d)}),function(e){$("#mailinglistId").prop("disabled",!e)}),a=function(e){$("#doiMailingId").prop("disabled",!e)},l=function(e){$('[data-action="connect-page"]').prop("disabled",!e)},c=function(){$('[data-action="authorized-info"]:not(.hidden)').addClass("hidden")},u=function(){$('[data-action="authorized-info"].hidden').removeClass("hidden")},d=function(){e.attach_login_function(".facebook-login-btn",function(e){h(),o.list_manageable_pages(e,s.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table",function(){AGN.Lib.Messages(t("defaults.error"),t("messages.error.reload"),"alert")})},"pages_read_engagement, leads_retrieval"),h()},h=function(){e.doByLoginStatus(null,function(){$(".facebook-login-btn").show()}),e.doByLoginStatus(f,p)},p=function(){r.get($("#mailinglistId")).selectFirstValue(),n(!1),a(!1),l(!1),c()},f=function(e){u(),n(!0),o.list_manageable_pages(e,s.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table"),$('[data-action="connect-page"]').data("fbAccessToken",e),o.renew_page_access_tokens(e,s.URL.RENEW_FACEBOOK_PAGE_ACCESS_TOKENS_AJAX_URL,function(e){e=JSON.parse(e);0<e.count&&AGN.Lib.Messages(t("defaults.success"),t("facebook.leadAds.renewedPageAccessTokens",e.count),"success")})},g=(this.addAction({change:"mailinglist-change"},function(){l(!1),a(!1);var e=$(this.el),e=r.get(e).getSelectedValue();g(e),a(0!==e)}),function(e){var i=r.get($('[data-action="doi-mailing-change"]'));i.resetOptions(),i.setOptions([{id:0,text:"---"}]),i.selectFirstValue(),0!==e&&(a(!1),$.ajax({url:s.URL.LIST_ACTIONBASED_AJAX_URL,type:"GET",data:{mailinglist:e},success:function(e){e&&((e=_.map(e.mailings,function(e){return console.log("mailing "+e.id+": "+e.shortname),{id:e.id,text:e.shortname}})).unshift({id:0,text:"---"}),i.setOptions(e),i.selectFirstValue())},error:function(e,i,n){console.log("status = "+i+", error = "+n),AGN.Lib.Messages(t("defaults.error"),t("messages.error.reload"),"alert")},statusCode:{500:function(){onError&&onError()}}}))});this.addAction({change:"doi-mailing-change"},function(){var e=$(this.el),e=r.get(e).getSelectedValue();l(0!==e)}),this.addAction({click:"connect-page"},function(){var e=$(this.el).data("fbAccessToken"),i=r.get($('[data-action="mailinglist-change"]')).getSelectedValue(),n=r.get($('[data-action="doi-mailing-change"]')).getSelectedValue();o.connect_pages(e,s.URL.CONNECT_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table",i,n,function(){o.list_manageable_pages(e,s.URL.LIST_FACEBOOK_PAGE_BINDINGS_AJAX_URL,"#facebook-pages-table"),AGN.Lib.Messages(t("defaults.success"),t("defaults.saved"),"success")},null,function(e){e&&e.page_names.forEach(function(e){AGN.Lib.Messages(t("facebook.leadAds.error.already_bound_to_other_company"),e,"alert")})})})}),AGN.Lib.Controller.new("form-trackable-link",function(){var a;function l(e){return e.find("[data-extension-name]").val()}function c(e){return e.find("[data-extension-value]").val()}function n(e,t,i){var n,o,r,s=$("#extensions-table tbody");n=t,o=i,r=!0,_.each($("[data-extension-row]"),function(e){e=$(e);r&&l(e)==n&&c(e)==o&&(r=!1)}),r&&s.append(a({index:e,name:t,value:i}))}function t(e,t){var i=$("#extensions-table tbody [data-extension-row]:last-child").data("extension-row")||0;n(++i,e,t)}function i(i,n){_.each($("[data-extension-row]"),function(e,t){e=$(e);i.setValueOnce(n+"["+t+"].name",l(e)),i.setValueOnce(n+"["+t+"].value",c(e))})}AGN.Opt.DefaultExtensions={},this.addDomInitializer("trackable-link-extensions",function(){var e=this.config;AGN.Opt.DefaultExtensions=e.defaultExtensions,a=AGN.Lib.Template.prepare("extensions-table-row"),e=e.extensions,$("#extensions-table tbody").html(""),_.each(e,function(e,t){n(t,e.name,e.value)})}),this.addAction({submission:"bulk-save"},function(){var e=$("#userFormTrackableLinksForm"),e=AGN.Lib.Form.get(e);i(e,"commonExtensions"),e.submit()}),this.addAction({submission:"save"},function(){var e=$("#userFormTrackableLinkForm"),e=AGN.Lib.Form.get(e);i(e,"extensions"),e.submit()}),this.addAction({click:"add-default-extensions"},function(){_.each(AGN.Opt.DefaultExtensions,function(e){t(e.name,e.value)})}),this.addAction({click:"add-extension"},function(){t("","")}),this.addAction({click:"delete-extension"},function(){var e=$(this.el).data("property-id");$('[data-extension-row="'+e+'"]').remove()}),this.addAction({click:"delete-all-extensions"},function(){$("[data-extension-row]").remove()})}),AGN.Lib.Controller.new("grid-building-block-defaults",function(){var l,i=AGN.Lib.Confirm,o=AGN.Lib.Form,n=AGN.Lib.Page,c=AGN.Lib.Helpers;function u(e){e=e.closest("[data-placeholder-id]");return e.exists()?parseInt(e.data("placeholder-id")):0}function r(t){i.request(l.urls.MEDIAPOOL_IMAGE_PICK).done(function(e){$("#content-"+t).val(e.id),c.clearFormField($("#file-"+t)),s(t,e.src,e.name,e.title)})}function s(e,t,i,n){var o=$("#preview-"+e),e=$("#file-name-"+e);o.attr("src")!==t&&o.attr("src",t||l.noPreviewImageLink),o.attr("title",n||""),e.text(i||"")}function a(e){return c.replaceAgnTags(e,function(e,t){return"agnIMAGE"!==e.name||!e.attributes.name||e.attributes.source&&"mediapool"!==e.attributes.source&&"mediapoolbg"!==e.attributes.source?t:l.imageByFilenameSrcPattern.replace("{filename}",encodeURIComponent(e.attributes.name))})}this.addDomInitializer("grid-building-block-defaults",function(){l=this.config,$("img[id^=preview]").each(function(){var e,t=$(this),i=t.attr("src");i&&(e=a(i))!==i&&t.attr("src",$.trim(e)),t.style("display","")})});var d=_.throttle(function(e,t){e=$("#preview-"+e);e.attr("src")!==t&&(t?e.attr("src",$.trim(a(t))):e.attr("src",t||l.noPreviewImageLink))},300);this.addAction({click:"delete"},function(){var e=$.post(l.urls.CONFIRM_DELETE);return i.request(e).done(function(e){!0===e.success?n.reload(l.urls.BACK,!0).done(function(){AGN.Lib.JsonMessages(e.popups)}):AGN.Lib.JsonMessages(e.popups)})}),this.addAction({click:"chooseImage"},function(){var e,t=u(this.el);0<t&&(e=t,(e=$("#file-"+e)).exists()&&e.val()?$("#file-"+t).trigger("click"):r(t))}),this.addAction({click:"showMediapoolDialog"},function(){var e=u(this.el);0<e&&r(e)}),this.addAction({change:"chooseImageFile"},function(){var e,t,i,n,o,r=u(this.el);0<r&&(e=this.el,t=r,r=e.prop("files"),n=$("#content-"+t),o=$("#image-category-"+t).closest(".form-group"),r&&r.length?"image"===(i=r[0]).type||i.type.match("image/.*")?((r=new FileReader).onload=function(e){o.removeClass("hidden"),s(t,e.target.result,i.name,i.name)},r.readAsDataURL(i)):(o.addClass("hidden"),c.clearFormField(e),s(t)):(o.addClass("hidden"),s(t)),n.val(""))}),this.addAction({click:"deleteImage"},function(){var e,t,i,n=u(this.el);0<n&&(n=n,e=$("#file-"+n),t=$("#file-name-"+n),i=$("#content-"+n),n=$("#preview-"+n),c.clearFormField(e),t.text(""),i.val(""),n.attr("src",l.noPreviewImageLink))}),this.addAction({change:"previewImageLink",keyup:"previewImageLink",mouseup:"previewImageLink"},function(){var e=u(this.el);0<e&&d(e,$.trim(this.el.val()))}),this.addAction({click:"chooseImageLink"},function(){var e=u(this.el);0<e&&$("#content-"+e).trigger("focus")}),this.addAction({click:"save"},function(){var i,n,r,e,s,a;n=$.Deferred(),r=[],e=$("#defaultsForm"),s=o.get(e),a=!0,e.find("input[type=file]").each(function(){var e,i=$(this),n=u(i),o=$("#image-category-"+n),i=i.prop("files");i&&i.length?0<(e=o.val())?(r.push({placeholderId:n,image:i[0],categoryId:e}),s.cleanFieldError$(o)):(a=!1,s.showFieldError$(o,t("error.grid.noCategorySelected"))):s.cleanFieldError$(o)}),a?r.length?(i=new FormData,r.forEach(function(e,t){i.append("images["+t+"].file",e.image),i.append("images["+t+"].fileName",e.image.name),i.append("images["+t+"].title",e.image.name),i.append("images["+t+"].categoryId",e.categoryId)}),$.ajax(l.urls.MEDIAPOOL_IMAGE,{type:"POST",dataType:"json",accepts:["application/json"],enctype:"multipart/form-data",processData:!1,contentType:!1,data:i}).done(function(e){!0===e.success?(e.data.forEach(function(e,t){t=r[t].placeholderId;$("#content-"+t).val(e),c.clearFormField($("#file-"+t))}),n.resolve()):(AGN.Lib.JsonMessages(e.popups),n.reject())}).fail(function(){n.reject()})):n.resolve():n.reject(),n.promise().done(function(){$("#defaultsForm").submit()})})}),AGN.Lib.Controller.new("grid-building-block",function(){var t,i=AGN.Lib.Confirm,n=AGN.Lib.Page;this.addDomInitializer("grid-building-block",function(){t=this.config}),this.addAction({click:"delete"},function(){var e=$.post(t.urls.CONFIRM_DELETE);return i.request(e).done(function(e){!0===e.success?n.reload(t.urls.BACK,!0).done(function(){AGN.Lib.JsonMessages(e.popups)}):AGN.Lib.JsonMessages(e.popups)})})}),AGN.Lib.Controller.new("grid-building-blocks-new",function(){var s,o=AGN.Lib.Confirm,r=AGN.Lib.Form,a={setSaveButtonEnabled:function(e){var t=$("#save-button");e?t.removeClass("disabled"):t.addClass("disabled")},getActivenessToggles:function(){return $("#containers").find("input.js-activeness-toggle")},getActivenessTogglesMap:function(){var t={};return a.getActivenessToggles().each(function(){var e=$(this);t[e.data("container-id")]=e}),t},getActivenessTogglesStateMap:function(){var t={};return a.getActivenessToggles().each(function(){var e=$(this);t[e.data("container-id")]=e.prop("checked")}),t},getBulkIds:function(){var t=[];return $("#containers").find(".js-bulk-ids:checked").each(function(){var e=parseInt($(this).val());0<e&&t.push(e)}),t.length?t:null},resetBulkIds:function(){$("#containers").find(".js-bulk-ids").prop("checked",!1)}};function i(){this.map={}}function n(o,r){var e={};r=arguments.length<2||!!r;for(var t=0;t<o.length;t++)e[o[t]]=r;return l(e).done(function(e){if(!0===e.success){for(var t=a.getActivenessTogglesMap(),i=0;i<o.length;i++){var n=o[i];t[n].prop("checked",r),s.activenessInitialStateMap[n]=r}s.activenessChangeMap.excludeAll(o),a.resetBulkIds(),a.setSaveButtonEnabled(0<s.activenessChangeMap.size())}})}function l(e){return $.post(s.urls.SET_ACTIVENESS,{activeness:e}).done(function(e){AGN.Lib.JsonMessages(e.popups)})}i.prototype.include=function(e,t){this.map[e]=t},i.prototype.exclude=function(e){delete this.map[e]},i.prototype.excludeAll=function(e){for(var t=0;t<e.length;t++)delete this.map[e[t]]},i.prototype.clear=function(){this.map={}},i.prototype.size=function(){return Object.keys(this.map).length},i.prototype.get=function(){return _.clone(this.map)},this.addDomInitializer("grid-building-blocks-new",function(){var e,t;s=this.config,location.hash&&0<(t=parseInt(location.hash.substr(1)))&&((t=(e=$("#containers")).find('[data-container-id="'+t+'"]').closest("tr")).exists()&&(t=t.position().top,e.scrollTop(t-10))),s.activenessChangeMap=new i,s.activenessInitialStateMap=a.getActivenessTogglesStateMap()}),this.addAction({click:"save"},function(){var t=r.get(this.el);l(s.activenessChangeMap.get()).done(function(e){!0===e.success&&(s.activenessChangeMap.clear(),s.activenessInitialStateMap=a.getActivenessTogglesStateMap(),a.setSaveButtonEnabled(!1),t.submit())})}),this.addAction({change:"toggle-activated"},function(){var e=$(this.el),t=e.data("container-id"),e=e.is(":checked");s.activenessInitialStateMap[t]==e?s.activenessChangeMap.exclude(t):s.activenessChangeMap.include(t,e),a.setSaveButtonEnabled(0<s.activenessChangeMap.size())}),this.addAction({click:"delete-building-block"},function(){var e,t=this.el.data("container-id"),i=r.get(this.el);0<t&&(e=t,e=$.post(s.urls.CONFIRM_DELETE.replace("{containerId}",t)),o.request(e).done(function(e){AGN.Lib.JsonMessages(e.popups)}).done(function(e){!0===e.success&&i.submit()}))}),this.addAction({click:"bulk-delete"},function(){var e,i=a.getBulkIds(),n=r.get(this.el);i?(e=i,e=$.ajax(s.urls.CONFIRM_BULK_DELETE,{method:"POST",traditional:!0,data:{bulkIds:i}}),o.request(e).done(function(e){AGN.Lib.JsonMessages(e.popups)}).done(function(e){!0===e.success&&n.submit()})):AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}),this.addAction({click:"bulk-activate"},function(){var e=a.getBulkIds(),i=r.get(this.el);e?n(e,!0).done(function(e){!0===e.success&&i.submit()}):AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}),this.addAction({click:"bulk-deactivate"},function(){var e=a.getBulkIds(),i=r.get(this.el);e?n(e,!1).done(function(e){!0===e.success&&i.submit()}):AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}),this.addAction({click:"back"},function(){history.back()})}),AGN.Lib.Controller.new("grid-edit-new",function(){var t=this,i=AGN.Lib.Form;this.addDomInitializer("grid-edit-new",function(){t.isGridInUse=this.config.isGridInUse,t.gridView=new AGN.Lib.GridView($("[data-grid-view]")),t.gridColumnView=new AGN.Lib.GridColumnView($("[data-column-view]")),t.updateViews()}),this.addAction({submission:"createTemplate"},function(){$("#templateCreationForm").submit()}),this.addAction({submission:"saveGrid"},function(){var e=$("#gridForm");i.get(e).submit()}),this.addAction({change:"updateColnum"},function(){t.validateRequiredNumber(this.el,1,12),$('[name="columnWidth"]').val(t.calculateColumnWidth()),t.updateViews()}),this.addAction({change:"updateTemplateWidth"},function(){t.validateRequiredNumber(this.el,50,2e3),$('[name="columnWidth"]').val(t.calculateColumnWidth()),t.updateViews()}),this.addAction({change:"updateColumnWidth"},function(){t.validateRequiredNumber(this.el,10,2e3),$('[name="templateWidth"]').val(t.calculateTemplateWidth()),t.updateViews()}),this.addAction({change:"updateGutterWidth"},function(){t.validateRequiredNumber(this.el,0,500),$('[name="columnWidth"]').val(t.calculateColumnWidth()),t.updateViews()}),this.addAction({click:"enableEditing"},function(){$(this.el).hide(),$('[name="gridName"]').prop("disabled",!1),t.isGridInUse||$.each(["columnNum","columnWidth","gutter","templateWidth"],function(e,t){t=$('[name="'+t+'"]');t.prop("disabled",!1),t.attr("type","number")}),$("#createTemplateButton").addClass("hidden"),$("#saveAndCreateTemplateButton").removeClass("hidden"),$("#gridForm").attr("data-action","saveGrid")}),this.addAction({click:"back"},function(){window.history.back()}),this.validateRequiredNumber=function(e,t,i){var n=parseInt(e.val());(n!=e.val()||n<t)&&e.val(t),i<n&&e.val(i)},this.updateViews=function(){var e={columnNum:this.columnNum(),columnWidth:this.columnWidth(),gutter:this.gutterWidth(),templateWidth:this.templateWidth()};t.gridView.update(e),t.gridColumnView.update(e)},this.calculateColumnWidth=function(){return Math.floor(this.templateWidth()/this.columnNum()-this.gutterWidth())},this.calculateTemplateWidth=function(){return Math.ceil((this.columnWidth()+this.gutterWidth())*this.columnNum())},this.columnNum=function(){return parseInt($('[name="columnNum"]').val())},this.columnWidth=function(){return parseInt($('[name="columnWidth"]').val())},this.gutterWidth=function(){return parseInt($('[name="gutter"]').val())},this.templateWidth=function(){return parseInt($('[name="templateWidth"]').val())}}),AGN.Lib.Controller.new("grid-layout-view",function(){var l,r=AGN.Lib.Template,n=AGN.Lib.Tooltip,i=AGN.Lib.Popover,o=AGN.Lib.Modal,e=AGN.Lib.Confirm,s=AGN.Lib.Form,a=AGN.Lib.Action,c=AGN.Lib.Load,u=AGN.Lib.Helpers,d=AGN.Lib.AutoSave,h=1,p="Placeholder",f="Image",g={setShown:function(e,t){t?e.removeClass("hidden"):e.addClass("hidden")},setTooltip:function(e,t){e.data("tooltip",t),n.createTip(e,t)},removeTooltip:function(e){n.remove(e)},checkHoverState:function(e){e.is(":hover")&&e.trigger("mouseleave").trigger("mouseenter")},setLoading:function(e){$("#editor-progress").toggle(!!e),$("#disabled-save-button").toggle(!!e),$("#save-button").toggle(!e),$("#navbar-disabled-save-button").toggle(!!e),$("#navbar-save-button").toggle(!e)},setEditable:function(e){$("#save-button").toggle(!!e),$("#navbar-save-button").toggle(!!e),$("#building-blocks-search").toggleClass("disabled",!e),$("#update-text-version").toggle(!!e),$("#grid-tile-content").toggleClass("translucent",!e),e?$("#visibleTargets").select2("enabled"):$("#visibleTargets").select2("disable")},setTargetId:function(e){$("#visibleTargets").select2("val",e)},getAvailableTargetIds:function(){return $("#visibleTargets").children("option").get().map(function(e){return parseInt($(e).val())})},setAvailableTargetIds:function(e){var i=this.getAvailableTargetIds(),n=$("#visibleTargets");n.empty(),e.push({id:-1,name:t("filter.reset")}),_.sortBy(e,function(e){return 0<e.id?i.indexOf(parseInt(e.id)):0==e.id?1e6:1000001}).forEach(function(e){$("<option></option>").val(e.id).text(e.name).appendTo(n)})},imagesAdjusted:function(i,e){function t(){var e=i.outerWidth(),t=i.outerHeight();o===e&&r===t||(o=e,r=t,n.notify())}var n=$.Deferred(),o=void 0,r=void 0;!0===e&&(o=i.outerWidth(),r=i.outerHeight());return i.imagesLoaded().progress(t).always(t),n.promise()},getHeightAccurate:function(e){return e[0].getBoundingClientRect().height},getResizeHandleDirection:function(e){return e.hasClass("ui-resizable-ne")?new A("ne"):e.hasClass("ui-resizable-se")?new A("se"):e.hasClass("ui-resizable-nw")?new A("nw"):e.hasClass("ui-resizable-sw")?new A("sw"):e.hasClass("ui-resizable-e")?new A("e"):e.hasClass("ui-resizable-w")?new A("w"):e.hasClass("ui-resizable-n")?new A("n"):e.hasClass("ui-resizable-s")?new A("s"):(console.error("Invalid resizing direction handle"),new A(""))}};function m(){var e=this;this.templateId=0,this.targetId=-1,this.targets=new v,this.categories=new y,this.children=new b([]),this.imageUriPattern="{image-id}",this.imageByFilenameUriPattern="{filename}",this.watcher=new k,this.adjust=_.throttle(this.adjust,200),this.watcher.promise().progress(function(){e.adjust(!1)})}function v(e){var t={};e?(this.data=e.slice(),this.data.forEach(function(e){t[e.id]=e.name})):this.data=[],this.map=t}function y(e){var t={};e?(this.data=e.slice(),this.data.forEach(function(e){t[e.id]=e.name})):this.data=[],this.map=t}function b(e){e[0]instanceof w?this.children=e.slice():this.children=e.sort(function(e,t){return e.z===t.z?e.columns===t.columns?e.column-t.column:t.columns-e.columns:e.z-t.z}).map(function(e){return new w(e)})}function w(e){this.data=_.merge({id:0,name:"",targetId:0,row:0,column:0,rows:1,columns:1,z:0,isTocItem:!1,isRecycled:!1,interestGroup:"",container:{id:0,name:"",isToc:!1,isSortable:!1,markup:[],content:{},tocItemPlaceholderId:0,type:"",filter:""},content:void 0},e),void 0===this.data.content&&(this.data.content=_.clone(this.data.container.content)),this.capsule=new x(this),this.isContainerDeleted()&&(this.setDraggable(!1),this.setResizable(!1))}function C(e){this.data=$.extend({id:0,name:"",isToc:!1,markup:[],content:{}},e)}function A(e){this.horizontal="",this.vertical="";for(var t=0;t<e.length;t++){var i=e.charAt(t).toLowerCase();switch(i){case"e":case"w":""===this.horizontal?this.horizontal=i:console.error("Ambiguous direction code: "+e);break;case"n":case"s":""===this.vertical?this.vertical=i:console.error("Ambiguous direction code: "+e);break;default:console.error("Unknown direction code: "+i)}}}function E(e,t){var i=e.get$();this.child=e,this.$child=i,this.grid=t}function x(e){var t=this,i=$.Deferred(),n=r.dom("div-sandbox");this.promise=i.promise(),this.watcher=new k,this.$capsule=n,this.$content=x.stub(),e.isContainerDeleted()&&this.showIsDeleted(),n.find("iframe").on("load",function(){var e=$(this).contents().get(0);$(e.head).append(x.style()),$(e.body).append(t.$content),t.watcher.bind(g.imagesAdjusted(t.$content)),i.resolveWith(t)}),n.appendTo("#children"),w.set(n,e),this.controls=new T(n)}function S(e){this.child=e}function T(e){var t=this,i=w.get(e);this.$capsule=e,this.factory=new S(i),this.timeoutId=null,this.state=h,this.update(),e.on("mouseenter",function(){t.show()}),e.on("mouseleave",function(){t.hide()})}function k(){this.deferred=$.Deferred(),this.callback=null}window.onbeforeunload=function(e){if($('[data-controller="grid-layout-view"]').exists()){var i=t("grid.layout.leaveQuestion");if(e=e||window.event,l&&l.isChanged())return e&&(e.returnValue=i),i}AGN.Lib.Loader.show()},this.addDomInitializer("grid-layout-view",function(e){l=l||new m;var t=e.json();d.initialize("template-components/"+t.templateId,_.bind(l.getDataForAutoSave,l),_.bind(l.checkIfDataRestoreNeeded,l),function(e){e=$.extend(t,{children:e.children});l.setup(e),l.setChanged(!0)},0).fail(function(){l.setup(t)})}),this.addDomInitializer("available-building-blocks-menu",function(e){var t=$("#div-containers-cache"),i={};t.children("[data-container-id]").each(function(){var e=new C($(this).json());i[e.getContainerId()]=e}),e.find("[data-building-block]").each(function(){var e=$(this),t=e.data("container-id"),t=i[t];t&&(w.set(e,t),l.isEditable()&&e.draggable(C.draggableOptions()))}),t.remove()}),this.addAction({change:"visibleTargets"},function(){l.isEditable()&&l.setTargetId(parseInt(this.el.val()))}),this.addAction({"select2-open":"visibleTargets"},function(){var e;l.isEditable()&&((e=this.el.select2("dropdown").find(".select2-results")).css("overflow","hidden"),e.children(".select2-result").each(function(){var e=$(this);0<e.data("select2-data").id&&e.addClass("sortable")}),e.sortable({items:".select2-result.sortable",containment:"parent",tolerance:"pointer",distance:5,opacity:.4,cursor:"move",start:function(e,t){t.item.removeClass("select2-result-selectable")},stop:function(e,t){t.item.addClass("select2-result-selectable")},update:function(e,t){var i=t.item.data("select2-data"),n=t.item.prev(),t=t.item.next();n.length?(n=n.data("select2-data"),$(n.element[0]).after($(i.element[0]))):t.length&&(n=t.data("select2-data"),$(n.element[0]).before($(i.element[0]))),l.setLayeringByTargets(g.getAvailableTargetIds())}}))}),this.addAction({"select2-close":"visibleTargets"},function(){l.isEditable()&&this.el.select2("dropdown").find(".select2-results").sortable("destroy")}),this.addAction({change:"setTemplateReleased"},function(){l.isEditable()&&($("#is-released").val(this.el.is(":checked")?"true":"false"),l.setChanged(!0))}),this.addAction({click:"toggleGutter"},function(){var e;l.isEditable()&&((e=O.get(this.el)).setGuttered(!e.isGuttered()),l.setChanged(!0),l.adjust())}),this.addAction({click:"insertRow"},function(){l.isEditable()&&l.addRowBefore(O.get(this.el))}),this.addAction({click:"addRow"},function(){l.isEditable()&&l.addRow()}),this.addAction({click:"deleteRow"},function(){l.isEditable()&&l.removeRow(O.get(this.el))}),this.addAction({click:"edit"},function(){var e;l.isEditable()&&(e=w.get(this.el))&&l.editChild(e)}),this.addAction({click:"clone"},function(){var e;l.isEditable()&&(e=w.get(this.el))&&l.cloneChild(e)}),this.addAction({click:"remove"},function(){var e;l.isEditable()&&(e=w.get(this.el))&&l.removeChild(e)}),this.addAction({change:"previewImageSrc",keyup:"previewImageSrc",mouseup:"previewImageSrc"},function(){l.isEditable()&&L.get(this.el).updateImageSrc(this.el)}),this.addAction({change:"chooseImageFile"},function(){l.isEditable()&&L.get(this.el).updateImage(this.el)}),this.addAction({click:"chooseImage"},function(){var e;l.isEditable()&&(e=this.el.data("placeholder-id"),L.get(this.el).chooseImage(e))}),this.addAction({click:"deleteImage"},function(){var e;l.isEditable()&&(e=this.el.data("placeholder-id"),L.get(this.el).deleteImage(e))}),this.addAction({click:"showMediapoolDialog"},function(){var e;l.isEditable()&&(e=this.el.data("placeholder-id"),L.get(this.el).showMediapoolDialog(e))}),this.addAction({submission:"saveChildContents"},function(){l.isEditable()&&L.get(this.el).save(s.get(this.el))}),this.addAction({submission:"save-content"},function(){var e;l.isEditable()&&(e=!1,l.isTextVersionGenerationAllowed()&&(e=0<$("#update-text-version input:checked").length),l.saveMadeChoice(e),l.save(e))}),a.new({"form:loadershow":"form"},function(){g.setLoading(!0)}),a.new({"form:loaderhide":"form"},function(){g.setLoading(!1)}),m.prototype.setup=function(e){e=$.extend({templateId:0,targetId:-1,grid:{},children:[],imageUriPattern:"{image-id}",imageByFilenameUriPattern:"{filename}",noPreviewImageLink:"#",isTextVersionGenerationAllowed:!1,isEmptyTextVersion:!1,targets:[],interestGroups:[],categories:[],translations:{},urls:{},actions:{}},e),$.i18n.load(e.translations),this.changesNotSaved=!1,this.templateId=e.templateId,this.targetId=e.targetId,this.imageUriPattern=e.imageUriPattern,this.imageByFilenameUriPattern=e.imageByFilenameUriPattern,this.noPreviewImageLink=e.noPreviewImageLink,this.textVersionGenerationAllowed=e.isTextVersionGenerationAllowed,this.emptyTextVersion=e.isEmptyTextVersion,this.noImageLink=e.noImageLink,this.targets=new v(e.targets),this.interestGroups=e.interestGroups,this.categories=new y(e.categories),this.children=new b(e.children),this.urls=e.urls,this.actions=e.actions,this.mailingId=e.mailingId;var t=this.children.active(),e=(this.grid=new R(e.grid,Math.max(1,t.calculateRowsCount())),t.rebuildStatic({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink}),t.adjustLayering(),this.updateAvailableTargets(),0<this.mailingId?this.editable=AGN.Opt.Components.MailingContentLock.manageLock(this.mailingId,e.isMailingExclusiveLockingAcquired,e.anotherLockingUserName):this.editable=!0,g.setTargetId(this.targetId),this.setTargetId(this.targetId),this.editable?(this.setupInteractions(),this.updateRecycleBin(),this.restoreUpdateTextVersionCheckbox(e.mailingId),g.setLoading(!1)):(t.each(function(e){e.setDraggable(!1),e.setControlsEnabled(!1),e.setResizable(!1)}),g.setLoading(!1),g.setEditable(!1)),$("#availableBuildingBlocksArea")),t="/layoutbuilder/template/{templateId}/activeBuildingBlocks.action".replace("{templateId}",this.templateId);e.attr("data-load",AGN.url(t)),c.load(e)},m.prototype.restoreUpdateTextVersionCheckbox=function(){$("#update-text-version").attr("checked",this.getMadeChoice())},m.prototype.setupInteractions=function(){var r=this;function t(t,i){r.children.active().matching(r.targetId).each(function(e){e!==t&&(e.setControlsEnabled(i),e.isContainerDeleted()||e.setResizable(i))})}this.children.recycled().each(function(e){e.setRows(1),e.setColumns(1)}),this.grid.setOnResizingStarted(function(e){t(e,!1)}),this.grid.setOnResizingStopped(function(e){t(e,!0),r.children.active().stick(e.getArea())});var e=null;this.grid.setOnAreaHovered(function(t){var i=r.children.active().matching(r.targetId);e=t?(i=i.select(function(e){return e.isInArea(t)}),e&&e.each(function(e){i.contains(e)||e.setHighlighted(!1)}),i.setHighlighted(!0),i):(i.setHighlighted(!1),null)}),this.grid.setOnDrop(function(e,t,i){var n=r.children.active(),o=!1;n.contains(e)||(o=!0,e instanceof C?(e=e.instantiate(),r.children.add(e)):e.isRecycled()&&(e.setRecycled(!1),r.updateRecycleBin()),-1!==r.targetId&&e.setTargetId(r.targetId),n=r.children.active(),e.isToc()||e.rebuild({imageUriPattern:r.imageUriPattern,imageByFilenameUriPattern:r.imageByFilenameUriPattern,noImageLink:r.noImageLink})),e.setArea(i),n.active().stick(i),n.matching(r.targetId).rebuildToc({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink}),e.adjustSize(r.grid),e.adjustCoordinates(r.grid),o?(e.setShown(!0),r.adjust(),r.watcher.bind(n.matching(r.targetId).pulse())):r.adjust(),r.updateAvailableTargets(),r.setChanged(!0)}),$("#children").on("dblclick","[data-building-block]",function(e){var e=$(e.target);e.is("button")||e.is(".ui-resizable-handle")||e.closest("button").exists()||(e=$(this),(e=w.get(e))&&l.editChild(e))})},m.prototype.updateAvailableTargets=function(){var e=this.children.active(),t=this.targets,i=e.collectTargetIds(),o=[];e.groups().forEach(function(e){var i={};e.sort(function(e,t){return e.getZ()-t.getZ()}).forEach(function(e,t){i[e.getTargetId()]=t}),o.push(i)}),i.sort(function(t,i){var n=0;return o.forEach(function(e){t in e&&i in e&&((e=e[t]-e[i])<0?n++:0<e&&n--)}),n}),g.setAvailableTargetIds(i.map(function(e){return{id:e,name:t.name(e)}})),i.indexOf(this.targetId)<0&&(this.targetId=-1),g.setTargetId(this.targetId)},m.prototype.getTemplateId=function(){return this.templateId},m.prototype.isTextVersionGenerationAllowed=function(){return this.textVersionGenerationAllowed},m.prototype.saveMadeChoice=function(e){AGN.Lib.WebStorage.set("updateTextVersion_"+this.mailingId,e)},m.prototype.getMadeChoice=function(){return AGN.Lib.WebStorage.get("updateTextVersion_"+this.mailingId)},m.prototype.isEmptyTextVersion=function(){return this.emptyTextVersion},m.prototype.isChanged=function(){return this.changesNotSaved},m.prototype.isEditable=function(){return this.editable},m.prototype.setChanged=function(e){this.changesNotSaved=!!e},m.prototype.getGrid=function(){return this.grid},m.prototype.getTargetName=function(e){return this.targets.name(e)},m.prototype.setTargetId=function(e){var t=this.children.active();this.targetId=e,t.unmatching(this.targetId).setShown(!1),(t=t.matching(this.targetId)).rebuildToc({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink}),t.setShown(!0),this.adjust(),this.watcher.bind(t.pulse())},m.prototype.setLayeringByTargets=function(t){var i=!1;this.children.active().groups().forEach(function(e){1<e.length&&(b.make(e).setLayeringByTargets(t),i=!0)}),i&&this.updateToc(!0),this.setChanged(!0)},m.prototype.setChildrenControlsEnabled=function(e){this.children.active().matching(this.targetId).setControlsEnabled(e)},m.prototype.updateToc=function(e){var t=this.children.active().matching(this.targetId);t.rebuildToc({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink})&&e&&(this.adjustSizes(t),this.adjustCoordinates(t))},m.prototype.adjustSizes=function(e){(e=void 0===e?this.children.active().matching(this.targetId):e).adjustSizes(this.grid),this.grid.adjustRows(e)},m.prototype.adjustCoordinates=function(e){void 0===e&&(e=this.children.active().matching(this.targetId)),this.grid.adjustSidebars(),e.adjustCoordinates(this.grid)},m.prototype.adjustLayering=function(e){var r=this,s=(e=void 0===e?this.children.active().matching(this.targetId):e).groupsMap();this.grid.each(function(e,o){e.each(function(e,t){var i,n=b.make(s[o+1+":"+(t+1)]);1<n.size()?(i=1,n.setBorderHighlighted(!0),e.setLayeringIndex(i),e.setOnLayeringRotate(function(){r.setChanged(!0),i=i%n.size()+1,n.rotateLayering(),this.setLayeringIndex(i),r.updateToc(!0)})):(n.setBorderHighlighted(!1),e.setLayeringIndex(null),e.setOnLayeringRotate(null))})})},m.prototype.adjust=function(e){var t=this.children.active().matching(this.targetId);this.adjustSizes(t),this.adjustCoordinates(t),!1!==e&&this.adjustLayering(t)},m.prototype.addRowBefore=function(e,t){var o=this.grid.addRowBefore(e),e=this.children.active(),r=!1;e.each(function(e){var t=e.getRows(),i=e.getRow(),n=i+t-1;o<=i?e.setRow(i+1):i<o&&o<=n&&(r=!0,e.setRows(t+1))}),!1!==t&&(r?this.adjust():this.adjustCoordinates(e.matching(this.targetId))),this.setChanged(!0)},m.prototype.addRow=function(e){this.grid.addRow(),!1!==e&&this.grid.adjustSidebars(),this.setChanged(!0)},m.prototype.removeRow=function(e){var n=this.grid.removeRow(e),e=this.children.active(),o=!1,r=!1;e.each(function(e){var t=e.getRows(),i=e.getRow();i<=n&&n<=i+t-1?1<t?(e.setRows(t-1),r=!0):(e.setRecycled(!0),o=!0):n<i&&e.setRow(i-1)}),o?((e=this.children.active().matching(this.targetId)).rebuildToc({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink}),this.adjust(),this.watcher.bind(e.pulse()),this.updateAvailableTargets(),this.updateRecycleBin()):r?this.adjust():this.adjustCoordinates(),this.setChanged(!0)},m.prototype.removeChild=function(e){this.children.contains(e)&&(e.setRecycled(!0),this.updateToc(!1),this.adjust(),this.updateAvailableTargets(),this.updateRecycleBin(),this.setChanged(!0))},m.prototype.cloneChild=function(e){var t=this,c=this.grid.getColumns(),i=this.children.active();function n(e,t){for(var i=0;i<e.length&&0<t;i++){var n=e[i];0<n.length?t+=function(e,i){var n=null,o=null,t=(e.forEach(function(e){var t=e.getColumn(),e=t+e.getColumns()-1;n=Math.min(n||t,t),o=Math.max(o||e,e)}),0);return c<o+i&&(i+=t=c+1-n-i),e.forEach(function(e){var t=e.getColumn()+i;c<t?(e.setRow(e.getRow()+1),e.setColumn(t-c)):e.setColumn(t)}),t}(n,t):t--}}function o(e){e=t.grid.getRow(e);e?t.addRowBefore(e,!1):t.addRow(!1)}var r,s,a,l,u,d=e.clone();i=i,r=d,a=(e=e).getRow(),l=e.getColumns(),e=e.getColumn()+l,i=function(e,o,r){for(var t,s=[],a={},i=(e.each(function(e){var t=e.getColumn();if(o===e.getRow()&&r<=t){s.push(e);var i=e.getColumns();a[t]=Math.min(a[t]||t,t);for(var n=1;n<i;n++)a[t+n]=t}}),_.groupBy(s,function(e){for(var t=e.getColumn();a[t]&&a[t]!==t;)t=a[t];return t})),n=[],l=r;l<=c;l++)a[l]?(t=i[l])&&n.push(t):n.push([]);return n}(i,a,e),l<=(u=c-e+1)?(s=0,i.forEach(function(e){0===e.length&&s++}),l<=s||o(a+1),n(i,l),r.setRow(a),r.setColumn(e)):(o(a+1),n(i,u+l),r.setRow(a+1),r.setColumn(1)),d.rebuild({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink}),d.setShown(!0),this.children.add(d),this.updateToc(!1),this.watcher.bind(this.children.active().matching(this.targetId).pulse()),this.adjust(),this.setChanged(!0)},m.prototype.editChild=function(e){var t,i;this.isEditable()&&(t=this.imageByFilenameUriPattern,i={child:{name:e.getName(),containerName:e.getContainerName(),isToc:e.isToc(),isSortable:e.isSortable(),interestGroup:e.getInterestGroup(),targetId:e.getTargetId(),asTocItem:e.asTocItem(),placeholders:e.getPlaceholders()},targets:this.targets.list(),interestGroups:this.interestGroups.slice(),categories:this.categories.list(),imageUriPattern:this.imageUriPattern,noPreviewImageLink:this.noPreviewImageLink,noImageLink:this.noImageLink,urls:this.urls,mailingId:this.mailingId,resolveAgnImageTags:function(e){return e&&$.trim(w.resolveAgnImageTags(e,t))}},e.isToc()&&(i.child.toc=this.children.active().asTocItems(!1)),L.create(e,i))},m.prototype.saveChild=function(e,t,i,n,o,r,s){e.setName(t),e.setTargetId(i),e.setTocItem(n),e.setInterestGroup(o),e.setContent(r),e.isToc()?(this.children.active().each(function(e){var t=s[e.getId()];!0!==t&&!1!==t||e.setTocItem(t)}),this.updateToc(!1)):(e.rebuild({imageUriPattern:this.imageUriPattern,imageByFilenameUriPattern:this.imageByFilenameUriPattern,noImageLink:this.noImageLink}),!e.isTocItem()&&!n&&e.isMatching(this.targetId)||this.updateToc(!1)),e.isMatching(this.targetId)||(e.setShown(!1),this.watcher.bind(this.children.active().matching(this.targetId).pulse())),this.adjust(),this.setChanged(!0),this.updateAvailableTargets()},m.prototype.updateRecycleBin=function(){var e=$("#recyclebin-content"),t=$("#recyclebin-stub"),i=(this.children.sort(function(e,t){return e.isRecycled()===t.isRecycled()?0:e.isRecycled()?1:-1}),this.children.recycled().get()),t=(g.setShown(t,0===i.length),r.dom("recyclebin-table",{children:i.map(function(e){return{name:e.getName()||e.getContainerName(),id:e.getId(),containerId:e.getContainerId()}})}));e.html(t),t.find("[data-building-block]").each(function(e){var t=$(this);t.draggable(C.draggableOptions()),w.set(t,i[e])})},m.prototype.getGuttersAsString=function(){var t=[];return this.grid.each(function(e){t.push(e.isGuttered()?"1":"0")}),t.join("|")},m.prototype.getChildrenAsSubmittable=function(){var e=this.children.active().groups(),i=[],n=g.getAvailableTargetIds();return e.forEach(function(e){e=_.sortBy(e,function(e){return n.indexOf(e.getTargetId())});var t=0;e.forEach(function(e){e.setZ(t++),i.push(e.asSubmittable())})}),i},m.prototype.validateOverlaps=function(){for(var e=this.children.active().select(function(e){return 1<e.getRows()}).get(),t=0;t<e.length;t++)for(var i=e[t],n=i.getRow(),o=n+i.getRows()-1,r=t+1;r<e.length;r++){var s=e[r],a=s.getRow(),l=a+s.getRows()-1;if(n<a&&a<=o&&o<l||a<n&&n<=l&&l<o){var a=i.getColumn(),l=a+i.getColumns()-1,c=s.getColumn(),s=c+s.getColumns()-1;if(l<c||s<a)return!1}}return!0},m.prototype.save=function(e){var i;this.validateOverlaps()?(i=$("#gridTemplateForm"),i=s.get(i),this.setChanged(!1),i.setValue("forceGenerateTextVersion",!0===e),i.setValue("rowGutters",this.getGuttersAsString()),i.setValue("childrenJson",JSON.stringify(this.getChildrenAsSubmittable())),i.submit("resource")):AGN.Lib.Messages(t("defaults.error"),t("error.template.invalidVerticalSpanning"),"alert")},m.prototype.checkIfDataRestoreNeeded=function(e){var t=this.getChildrenData(),e=e.children;return t.length!==e.length||JSON.stringify(t)!==JSON.stringify(e)},m.prototype.getDataForAutoSave=function(){return{children:this.getChildrenData()}},m.prototype.getChildrenData=function(){return this.children.children.map(function(e){return e.data})},v.prototype.name=function(e){return this.map[-1==e?0:e]},v.prototype.list=function(){return this.data.slice()},y.prototype.name=function(e){return this.map[e]},y.prototype.list=function(){return this.data.slice()},b.make=function(e){return new b(e||[])},b.prototype.get=function(){return this.children.slice()},b.prototype.size=function(){return this.children.length},b.prototype.each=function(e){this.children.forEach(e)},b.prototype.sort=function(e){this.children.sort(e)},b.prototype.contains=function(e){return 0<=this.children.indexOf(e)},b.prototype.containsToc=function(){for(var e=0;e<this.children.length;e++)if(this.children[e].isToc())return!0;return!1},b.prototype.matching=function(t){return this.select(function(e){return e.isMatching(t)})},b.prototype.unmatching=function(t){return this.select(function(e){return!e.isMatching(t)})},b.prototype.active=function(){return this.select(function(e){return!e.isRecycled()})},b.prototype.recycled=function(){return this.select(function(e){return e.isRecycled()})},b.prototype.select=function(e){return new b(this.children.filter(e))},b.prototype.add=function(e){e.setZ(this.active().calculateMaxZ()+1),this.children.push(e)},b.prototype.groupsMap=function(){var r={},e=_.groupBy(this.children,function(e){return e.getRow()});return $.each(e,function(n,e){var o={};e.forEach(function(e){var t=e.getColumns();if(1<t)for(var i=e.getColumn(),n=1;n<t;n++)o[i+n]=i}),e.forEach(function(e){for(var t=e.getColumn();o[t];)t=o[t];var i=n+":"+t;void 0===r[i]&&(r[i]=[]),r[i].push(e)})}),r},b.prototype.groups=function(){var i=[],e=this.groupsMap();return $.each(e,function(e,t){t.length&&i.push(t)}),i},b.prototype.collectTargetIds=function(){var t={};return this.each(function(e){t[e.getTargetId()]=!0}),Object.keys(t).sort()},b.prototype.calculateMaxZ=function(){return this.children.reduce(function(e,t){return Math.max(t.getZ(),e)},0)},b.prototype.calculateRowsCount=function(){return this.children.reduce(function(e,t){return Math.max(t.getRow()+t.getRows()-1,e)},0)},b.prototype.setShown=function(t){this.children.forEach(function(e){e.setShown(t)})},b.prototype.setBorderHighlighted=function(t){this.children.forEach(function(e){e.setBorderHighlighted(t)})},b.prototype.setHighlighted=function(t){this.children.forEach(function(e){e.setHighlighted(t)})},b.prototype.setControlsEnabled=function(t){this.children.forEach(function(e){e.setControlsEnabled(t),e.isContainerDeleted()||e.setResizable(t),e.checkHoverState()})},b.prototype.asTocItems=function(e){var t=e?_.map(this.groupsMap(),function(e){return _.maxBy(e,function(e){return e.getZ()})}):this.children.slice(),t=t.sort(function(e,t){return e.getRow()===t.getRow()?e.getColumn()===t.getColumn()?t.getZ()-e.getZ():e.getColumn()-t.getColumn():e.getRow()-t.getRow()}).map(function(e){return e.asTocItem()}).filter(function(e){return!!e});return e?t.filter(function(e){return e.isEnabled}):t},b.prototype.pulse=function(){return this.children.map(function(e){return e.pulse()})},b.prototype.rebuildStatic=function(t){this.each(function(e){e.isToc()||e.rebuild(t)})},b.prototype.rebuildToc=function(t){var i=this,n=!1;return this.each(function(e){e.isToc()&&(e.rebuild($.extend({},t,{toc:i.asTocItems(!0)})),n=!0)}),n},b.prototype.rotateLayering=function(){var e=this.children.slice().sort(function(e,t){return e.getZ()-t.getZ()}),i=e.map(function(e){return e.getZ()});e.forEach(function(e,t){e.setZ(i[(t+1)%i.length])})},b.prototype.setLayeringByTargets=function(t){var e=this.children.slice().sort(function(e,t){return t.getZ()-e.getZ()}),i=e.map(function(e){return e.getZ()});_.sortBy(e,function(e){return t.indexOf(e.getTargetId())}).forEach(function(e,t){e.setZ(i[t])})},b.prototype.stick=function(t){this.children.forEach(function(e){e.isInArea(t)&&e.setArea(t)})},b.prototype.adjustLayering=function(){var t=this.children.length;this.children.forEach(function(e){e.setZ(--t)})},b.prototype.adjustSizes=function(t){this.children.forEach(function(e){e.adjustSize(t)})},b.prototype.adjustCoordinates=function(t){this.children.forEach(function(e){e.adjustCoordinates(t)})},w.get=function(e){return e.data("agn:child")},w.set=function(e,t){e.data("agn:child",t)},w.resolveAgnImageTags=function(e,i){return u.replaceAgnTags(e,function(e,t){return"agnIMAGE"!==e.name||!e.attributes.name||e.attributes.source&&"mediapool"!==e.attributes.source&&"mediapoolbg"!==e.attributes.source?t:i.replace("{filename}",encodeURIComponent(e.attributes.name))})},w.render=function(e,i,n){var o="";return e.forEach(function(t){switch(t.type){case"Text":t.value?o+=w.resolveAgnImageTags(t.value,n.imageByFilenameUriPattern):o+=t.value;break;case p:var e=i[t.id];if(t.markup)e&&(o+=w.render(t.markup,i,n));else switch(t.placeholderType){case"Label":case"Text":case"Link":e&&(o+=$.trim(w.resolveAgnImageTags(e,n.imageByFilenameUriPattern)));break;case"ImageLink":o+=e?$.trim(w.resolveAgnImageTags(e,n.imageByFilenameUriPattern)):n.noImageLink;break;case f:o+=0<parseInt(e)?n.imageUriPattern.replace("{image-id}",e):n.noImageLink;break;default:console.error("Unknown placeholder type: "+t.placeholderType)}break;case"TocArea":n.toc.forEach(function(e){o+=w.render(t.markup,i,$.extend({tocItem:e},n))});break;case"TocPlaceholder":switch(t.placeholderType){case"Id":o+="toc_"+n.tocItem.id;break;case"Name":o+=n.tocItem.name;break;default:console.error("Unknown TOC placeholder type: "+t.placeholderType)}break;default:console.error("Unknown span type: "+t.type)}}),u.escapeAgnTags(o)},w.collectPlaceholders=function(e,t,i,n,o){e.forEach(function(e){switch(e.type){case p:o&&!o.call(o,e)||void 0===n[e.id]&&(i.push({id:e.id,type:e.placeholderType,name:e.name,value:t[e.id]}),n[e.id]=!0);case"TocArea":e.markup&&w.collectPlaceholders(e.markup,t,i,n,o)}})},w.draggableOptions=function(){return{stack:"#children .div-container",revert:"invalid",distance:20,cursor:"move",opacity:.4,start:function(){l.setChildrenControlsEnabled(!1)},stop:function(){l.setChildrenControlsEnabled(!0)}}},w.resizableOptions=function(i){var n=!1;return{handles:"ne, se, sw, nw, w, n, e, s",autoHide:!0,create:function(){n=new E(i,l.getGrid())},start:function(e,t){!1===n&&(n=new E(i,l.getGrid()));e=$(e.originalEvent.target);i.setControlsEnabled(!1),i.capsule.setResizingEnabled(!0),n.start(g.getResizeHandleDirection(e))},stop:function(e,t){n.stop(t.size.width,t.size.height),i.capsule.setResizingEnabled(!1),i.setControlsEnabled(!0),i.checkHoverState(),l.updateToc(!1),l.adjust(),l.setChanged(!0)},resize:function(e,t){n.resize(t.size.width,t.size.height)}}},w.prototype.asSubmittable=function(){return{id:this.data.id,containerId:this.data.container.id,name:this.data.name,targetId:this.data.targetId,interestGroup:this.data.container.isSortable&&this.data.interestGroup||"",type:this.data.container.type,filter:this.data.container.filter,row:this.data.row,column:this.data.column,rows:this.data.rows,columns:this.data.columns,content:$.extend({},this.data.content),isTocItem:this.data.isTocItem}},w.prototype.get$=function(){return this.capsule.get$()},w.prototype.getId=function(){return this.data.id},w.prototype.getName=function(){return this.data.name},w.prototype.getContainerName=function(){return this.data.container.name},w.prototype.setName=function(e){this.data.name=e||""},w.prototype.getContainerId=function(){return this.data.container.id},w.prototype.isRecycled=function(){return this.data.isRecycled},w.prototype.setRecycled=function(e){e?(this.setShown(!1),this.setRows(1),this.setColumns(1),this.capsule.recycle(),this.data.isRecycled=!0):this.data.isRecycled=!1},w.prototype.isInArea=function(e){return!this.isNotInArea(e)},w.prototype.isNotInArea=function(e){var t=e.column,i=t+e.columns-1,n=e.row,e=n+e.rows-1,o=this.data.column,r=o+this.data.columns-1,s=this.data.row,a=s+this.data.rows-1;return Math.max(o,r)<t||Math.min(o,r)>i||Math.max(s,a)<n||Math.min(s,a)>e},w.prototype.isMatching=function(e){return-1===e||0===this.data.targetId||this.data.targetId===e},w.prototype.isToc=function(){return this.data.container.isToc},w.prototype.isTocItem=function(){return this.data.isTocItem},w.prototype.setTocItem=function(e){this.data.isTocItem=!!e},w.prototype.isSortable=function(){return this.data.container.isSortable},w.prototype.getInterestGroup=function(){return this.isSortable()&&this.data.interestGroup||""},w.prototype.setInterestGroup=function(e){this.isSortable()?this.data.interestGroup=e||"":this.data.interestGroup=""},w.prototype.getTargetId=function(){return this.data.targetId},w.prototype.setTargetId=function(e){this.data.targetId=0<=e?e:0,this.capsule.updateControls()},w.prototype.getRow=function(){return this.data.row},w.prototype.setRow=function(e){return this.data.row=e},w.prototype.getColumn=function(){return this.data.column},w.prototype.setColumn=function(e){this.data.column=e},w.prototype.getZ=function(){return this.capsule.getZ()},w.prototype.setZ=function(e){this.capsule.setZ(e)},w.prototype.getRows=function(){return this.data.rows},w.prototype.setRows=function(e){this.data.rows=e},w.prototype.getColumns=function(){return this.data.columns},w.prototype.setColumns=function(e){this.data.columns=e},w.prototype.getArea=function(){return R.area(this.data.row,this.data.column,this.data.rows,this.data.columns)},w.prototype.setArea=function(e){this.setRow(e.row),this.setColumn(e.column),this.setRows(e.rows),this.setColumns(e.columns)},w.prototype.getHeight=function(){return this.capsule.getHeight()},w.prototype.setShown=function(e){this.capsule.setShown(e),this.isContainerDeleted()||(this.setDraggable(e),this.setResizable(e))},w.prototype.setBorderHighlighted=function(e){this.capsule.setBorderHighlighted(e)},w.prototype.setHighlighted=function(e){this.capsule.setHighlighted(e)},w.prototype.setSize=function(e,t){this.capsule.setSize(e,t)},w.prototype.setCoordinates=function(e){this.capsule.setCoordinates(e)},w.prototype.setControlsEnabled=function(e){this.capsule.setControlsEnabled(e)},w.prototype.checkHoverState=function(){g.checkHoverState(this.capsule.get$())},w.prototype.adjustSize=function(e,t){this.setSize(e.getWidthForSpans(this.getColumns()),t||"auto")},w.prototype.adjustHeight=function(e){this.capsule.adjustHeight(e)},w.prototype.adjustCoordinates=function(e){this.setCoordinates(e.getCoordinates(this.getRow(),this.getColumn()))},w.prototype.setDraggable=function(e){var t=this.capsule.get$();if(e)t.draggable(w.draggableOptions());else try{t.draggable("destroy")}catch(e){}},w.prototype.setResizable=function(e){var t=this.capsule.get$();if(e)t.resizable(w.resizableOptions(this));else try{t.resizable("destroy")}catch(e){}},w.prototype.getPlaceholders=function(t){var e=this.data.content,i=[],n=t?function(e){return e.placeholderType===t}:void 0;return w.collectPlaceholders(this.data.container.markup,e,i,{},n),i.sort(function(e,t){return e.name.localeCompare(t.name)}),i},w.prototype.setContent=function(e){$.extend(this.data.content,e)},w.prototype.asTocItem=function(){var t=this.data.container.tocItemPlaceholderId;if(0<t){var e=this.data.content,i=[];if(w.collectPlaceholders(this.data.container.markup,e,i,{},function(e){return e.id===t}),i.length)return{id:this.data.id,name:e[(e=i[0]).id]||"",placeholderName:e.name,isEnabled:this.data.isTocItem}}return null},w.prototype.rebuild=function(e){this.capsule.embrace(w.render(this.data.container.markup,this.data.content,e))},w.prototype.pulse=function(){return this.capsule.pulse()},w.prototype.clone=function(){var e=new w(this.data);return e.data.id=0,e},w.prototype.isContainerDeleted=function(){return this.data.container.isDeleted},C.draggableOptions=function(){return{stack:"#children .div-container",revert:"invalid",distance:20,helper:"clone",appendTo:"body",containment:"window",zIndex:500,start:function(e,t){t.helper.width($(this).width()),l.setChildrenControlsEnabled(!1)},stop:function(e,t){t.helper.width("auto"),l.setChildrenControlsEnabled(!0)}}},C.prototype.getContainerId=function(){return this.data.id},C.prototype.getRows=function(){return 1},C.prototype.getColumns=function(){return 1},C.prototype.isToc=function(){return this.data.isToc},C.prototype.instantiate=function(){return new w({name:this.data.name,container:this.data})},A.prototype.isHorizontal=function(){return""!==this.horizontal},A.prototype.isVertical=function(){return""!==this.vertical},A.prototype.isEast=function(){return"e"===this.horizontal},A.prototype.isWest=function(){return"w"===this.horizontal},A.prototype.isNorth=function(){return"n"===this.vertical},A.prototype.isSouth=function(){return"s"===this.vertical},E.prototype.setupConstraints=function(){this.setConstraints(this.grid.getConstraints(this.child,this.direction))},E.prototype.setConstraints=function(e){this.$child.resizable({minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight})},E.prototype.getArea=function(e,t){return this.grid.getArea(this.child,this.direction,e,t)},E.prototype.start=function(e){this.direction=e,this.area={row:this.child.getRow(),column:this.child.getColumn(),rows:this.child.getRows(),columns:this.child.getColumns()},this.z=this.child.getZ(),this.setupConstraints(),this.grid.setAreaHovered(this.area),this.grid.startResizing(this.child),this.child.setZ(500)},E.prototype.resize=function(e,t){e=this.getArea(e,t);e.row===this.area.row&&e.column===this.area.column&&e.rows===this.area.rows&&e.columns===this.area.columns||(this.area=e,this.grid.setAreaHovered(e))},E.prototype.stop=function(e,t){this.area=this.getArea(e,t),this.child.setZ(this.z),this.child.setRow(this.area.row),this.child.setColumn(this.area.column),this.child.setRows(this.area.rows),this.child.setColumns(this.area.columns),this.grid.setAreaHovered(null),this.grid.stopResizing(this.child),this.child.adjustSize(this.grid),this.child.adjustCoordinates(this.grid)},x.stub=function(){return $('<div class="div-container"></div>')},x.css=function(){return $("#template-styles").html()},x.style=function(){return $("<style/>",{html:this.css()})},x.prototype.get$=function(){return this.$capsule},x.prototype.updateControls=function(){this.controls.update()},x.prototype.setControlsEnabled=function(e){this.controls.setEnabled(e)},x.prototype.ready=function(e){return void 0!==e&&this.promise.done(e),"resolved"===this.promise.state()},x.prototype.pulse=function(){return this.watcher.promise()},x.prototype.embrace=function(e){var t,e=$(e).filter("*");this.ready()?(this.$content.replaceWith(e),this.$content=e,0<(t=this.$capsule.outerWidth())&&this.setSize(t,"auto"),this.watcher.bind(g.imagesAdjusted(e,!0))):this.$content=e},x.prototype.recycle=function(){var t=this;this.setShown(!1),this.ready(function(){var e=x.stub();t.watcher.bind(!1),t.$content.replaceWith(e),t.$content=e})},x.prototype.getZ=function(){return this.$capsule.css("z-index")},x.prototype.setZ=function(e){this.$capsule.css("z-index",e)},x.prototype.setShown=function(e){g.setShown(this.$capsule,e)},x.prototype.setBorderHighlighted=function(e){e?this.$capsule.addClass("highlight-border"):this.$capsule.removeClass("highlight-border")},x.prototype.setHighlighted=function(e){e?this.$capsule.addClass("highlight-cont"):this.$capsule.removeClass("highlight-cont")},x.prototype.setCoordinates=function(e){this.$capsule.offset(e)},x.prototype.setSize=function(e,t){this.$content.outerWidth(e),this.$capsule.outerWidth(e),this.ready()?(this.$content.style("width",function(e){return e},"important"),this.$content.style("height","auto","important"),"auto"===t&&(t=this.$content.outerHeight()),this.$capsule.outerHeight(t)):"auto"===t?this.$capsule.outerHeight(80):this.$capsule.outerHeight(t)},x.prototype.adjustHeight=function(e){this.$capsule.outerHeight(e)},x.prototype.getHeight=function(){return this.ready()?g.getHeightAccurate(this.$content):80},x.prototype.setResizingEnabled=function(e){e?(this.$capsule.css("box-sizing","content-box"),this.$capsule.css("opacity",.4),this.$content.style("width","100%","important"),this.$content.style("height","100%","important")):(this.$capsule.css("box-sizing",""),this.$capsule.css("opacity",""))},x.prototype.showIsDeleted=function(){var e=this.$capsule.find(".div-sandbox-overlay"),i=(e.addClass("deleted"),$('<div class="delete-badge" data-tooltip="'+t("grid.container.deleted")+'"> <i class="icon-fa5 icon-trash"/><span class="text">!</span></div>'));n.create(i,n.options(i)),e.append(i)},S.prototype.getOptions=function(){return{targetName:l.getTargetName(this.child.getTargetId()),isToc:this.child.isToc(),containerDeleted:this.child.isContainerDeleted()}},S.prototype.createControls=function(e){e=r.dom(e,this.getOptions());return w.set(e.find("[data-action]"),this.child),AGN.runAll(e),e},S.prototype.createInlineControls=function(){return this.createControls("child-controls")},S.prototype.createPopoverControls=function(){return this.createControls("child-popover-controls")},T.popoverOptions=function(e){return{trigger:"manual",html:!0,template:'<div class="popover popover-wide" role="tooltip" style="margin-top: -5px;"><div class="popover-content"></div><div class="bottom-space"></div></div>',content:function(){return e.getPopoverContent()}}},T.prototype.stopHiding=function(){return!!this.timeoutId&&(clearTimeout(this.timeoutId),!(this.timeoutId=void 0))},T.prototype.popoverShow=function(){this.stopHiding()||this.popover.show(),this.state=2},T.prototype.popoverHide=function(e){var t;this.stopHiding(),!0===e?(this.popover.hide(),this.state=h):(t=this).timeoutId=setTimeout(function(){t.popoverHide(!0)},200)},T.prototype.inlineShow=function(){this.$inlineControls.show(),this.state=3},T.prototype.inlineHide=function(){this.$inlineControls.hide(),this.state=h},T.prototype.show=function(){0!==this.state&&(this.$inlineControls.height()<this.$capsule.height()?(2===this.state&&this.popoverHide(!0),this.inlineShow()):(3===this.state&&this.inlineHide(),this.popoverShow()))},T.prototype.hide=function(e){switch(this.state){case 3:this.inlineHide();break;case 2:this.popoverHide(e)}},T.prototype.setEnabled=function(e){e?0===this.state&&(this.state=h):(this.hide(!0),this.state=0)},T.prototype.update=function(){this.$inlineControls&&this.$inlineControls.remove(),this.$inlineControls=this.factory.createInlineControls(),this.$capsule.append(this.$inlineControls),this.popover&&this.popover.destroy(),this.$popoverControls&&(this.$popoverControls=void 0),this.popover=i.new(this.$capsule,T.popoverOptions(this));var e=this.popover.tip(),t=this;e.on("mouseenter",function(){t.popoverShow()}),e.on("mouseleave",function(){t.popoverHide()}),3!==this.state&&2!==this.state||this.show()},T.prototype.getPopoverContent=function(){void 0===this.$popoverControls&&(this.$popoverControls=this.factory.createPopoverControls(),t=this.$popoverControls.find("[data-action]"),w.set(t,this.child),e=this,t.on("click",function(){e.popoverHide(!0)}));var e,t=this.$popoverControls.clone(!0);return AGN.runAll(t),t},T.prototype.remove=function(){this.state=0,this.stopHiding(),this.popover.destroy(),this.$popoverControls=void 0,this.$inlineControls.remove(),this.$inlineControls=void 0},k.prototype.promise=function(){return this.deferred.promise()},k.prototype.bind=function(e){var t,i=this;!1===e?i.callback=null:(t=i.callback=function(){i.callback===t&&i.deferred.notifyWith(this,arguments)},$.isArray(e)?e.forEach(function(e){e.progress(t)}):e.progress(t))};var D={};function R(e,t){this.$template=$("#template"),this.columns=e.columns,this.rows=[],this.gap=e.gap,this.columnWidth=e.columnWidth,this.callbacks={},this.hoveredDroppable=null;for(var i=1;i<=t;i++){var n=this.createRow(e.gutters[i-1]);this.$template.append(n.get$()),this.rows.push(n)}this.adjustSidebars()}function O(e,i){this.$row=r.dom("droppables-row",{isGuttered:!1!==i}),this.$gutterButton=r.dom("toggle-gutter-button"),this.$removeButton=r.dom("remove-row-button"),this.$insertButton=r.dom("insert-row-button"),this.$row.data("agn:row",this),this.$gutterButton.data("agn:row",this),this.$removeButton.data("agn:row",this),this.$insertButton.data("agn:row",this),this.droppables=[],this.callbacks={};for(var n=1;n<=e;n++){var o=this.createDroppable();this.droppables.push(o),this.$row.append(o.get$())}this.$gutterButton.appendTo("#sidebar-gutters"),this.$removeButton.appendTo("#sidebar-actions"),this.$insertButton.appendTo("#sidebar-actions"),g.setTooltip(this.$gutterButton,!1===i?t("grid.gutter.show"):t("grid.gutter.hide")),g.setTooltip(this.$removeButton,t("grid.row.delete")),g.setTooltip(this.$insertButton,t("grid.row.add"))}function F(e){this.$droppable=r.dom("droppable"),this.$droppable.data("agn:droppable",this),this.$droppable.droppable(F.options(this)),this.row=e,this.callbacks={}}function L(e,t,i){var n=this,o=(this.$modal=e,this.child=t,this.options=i,t.getPlaceholders(f)),r=[];o.forEach(function(e){e=parseInt(e.value);0<e&&r.push(e)}),0<r.length&&$.ajax(this.options.urls.MEDIAPOOL_VIEW,{type:"POST",dataType:"json",traditional:!0,data:{elementIds:r}}).done(function(i){o.forEach(function(e){var t=parseInt(e.value);0<t&&(t=i[t],$("#image-category-id-"+e.id).select2("val",t.categoryId),n.updateImagePreview(e.id,t.src,t.name,t.title))})}),this.updateImageSrcPreview=_.throttle(this.updateImageSrcPreview,300)}D.make=function(t,e){D.adjustChildren(t,e),e.forEach(function(e){e.adjustHeight(t.getHeightForSpans(e.getRow(),e.getColumn(),e.getRows(),e.getColumns()))})},D.getChildrenProjections=function(n,e){var a=[],l=(n.each(function(e){a.push({row:e,projections:[]})}),[]);return e.forEach(function(e){for(var t=[],i={child:e,height:e.getHeight(),spans:t},n=e.getRow(),o=n+e.getRows()-1,r=n;r<=o;r++){var s={cascade:i,height:0,margin:0,adjusted:!1};t.push(s),a[r-1].projections.push(s)}l.push(i)}),$.each(a,function(e,t){var i=n.getRowMargin(t.row.isGuttered());$.each(t.projections,function(e,t){t.margin=i})}),$.each(l,function(e,t){D.adjustCascade(t)}),a},D.adjustCascade=function(e){for(var t=Math.max(e.height,10),i=0,n=e.spans,o=[],r=0;r<n.length;r++){var s=n[r];if(!1===s.adjusted&&(s.height=10,o.push(s)),(i+=s.height)+s.margin>=t){for(r+=1;r<n.length;r++)n[r].height=0;break}r+1<n.length&&(i+=s.margin)}var a,e=t-i;0<e&&o.length&&(a=e/o.length,$.each(o,function(e,t){t.height+=a}))},D.adjustChildren=function(e,t){$.each(D.getChildrenProjections(e,t),function(e,t){var i,n,o=t.projections;o.length?(n=i=0,$.each(o,function(e,t){t.height>i&&(i=t.height,n=e)}),0===i&&(i=80),$.each(o,function(e,t){t.adjusted=!0,e!==n&&(t.height=i,D.adjustCascade(t.cascade))}),t.row.setHeight(i)):t.row.setHeight(80)})},R.area=function(e,t,i,n){return{row:e,column:t,rows:i,columns:n}},R.prototype.createRow=function(e){var a=new O(this.columns,e),l=this;return a.setOnHoverChange(function(e,t,i,n){var o=l.rows.indexOf(a)+1;0<o?n?(l.setAreaHovered(R.area(o,i,t.getRows(),t.getColumns())),l.hoveredDroppable=e):l.hoveredDroppable===e&&l.setAreaHovered(!1):l.setAreaHovered(!1)}),a.setOnDrop(function(e,t,i){var n,o,r,s;l.callbacks.onDrop&&0<(n=l.rows.indexOf(a)+1)&&(o=e.getRows(),(r=l.getRows()-n+1)<o&&(o=r),r=e.getColumns(),s=l.getColumns()-i+1,l.callbacks.onDrop.call(l,e,t,R.area(n,i,o,r=s<r?s:r)))}),a},R.prototype.each=function(e){this.rows.forEach(e)},R.prototype.getRows=function(){return this.rows.length},R.prototype.getColumns=function(){return this.columns},R.prototype.getRow=function(e){return this.rows[e-1]||null},R.prototype.getDroppable=function(e,t){e=this.getRow(e);return e?e.getDroppable(t):null},R.prototype.getRowMargin=function(e){return 2+(e?this.gap:0)},R.prototype.getCoordinates=function(e,t){return this.getDroppable(e,t).getCoordinates()},R.prototype.getConstraints=function(e,t){return $.extend(this.getWidthConstraints(e,t),this.getHeightConstraints(e,t))},R.prototype.getWidthConstraints=function(e,t){var i=e.getColumn(),e=e.getColumns(),n=this.getWidthForSpans(1),t=t.isHorizontal()?t.isEast()?this.getWidthForSpans(this.getColumns()-i+1):this.getWidthForSpans(i+e-1):n;return{minWidth:n,maxWidth:t}},R.prototype.getHeightConstraints=function(e,t){var i,n,o=e.getColumns(),r=e.getColumn(),s=r+o-1,a=e.getRows(),l=e.getRow(),a=l+a-1;return t.isVertical()?(t.isSouth()?(i=this.getMinHeightConstraint(l,r,1,o),a=this.getRows(),t.isHorizontal()&&(t.isEast()?s=this.getColumns():r=1)):(i=this.getMinHeightConstraint(a,r,1,o),l=1),n=this.getMaxHeightConstraint(l,r,a-l+1,s-r+1)):i=n=e.getHeight(),{minHeight:Math.min(i,e.getHeight()),maxHeight:n}},R.prototype.getWidthForSpans=function(e){return this.columnWidth*e+this.gap*(e-1)},R.prototype.getHeightForSpans=function(e,t,i,n,o){var r=this;function s(e){return r.rows[e-1].getDroppables().slice(t-1,t+n-1).reduce(o)}void 0===o&&(o=function(e,t){return e.getHeight()>t.getHeight()?e:t});var a=e,e=e+i-1;return a===e?s(a).getHeight():(i=s(a).get$(),(a=s(e).get$()).position().top-i.position().top+a.outerHeight())},R.prototype.getMinHeightConstraint=function(e,t,i,n){return this.getHeightForSpans(e,t,i,n,function(e,t){return e.getHeight()<t.getHeight()?e:t})},R.prototype.getMaxHeightConstraint=function(e,t,i,n){return this.getHeightForSpans(e,t,i,n,function(e,t){return e.getHeight()>t.getHeight()?e:t})},R.prototype.getArea=function(e,t,i,n){var o,r,s,a=this;function l(e){e=a.rows[e-1];return e?e.getDroppables().slice(o-1,o+r-1).reduce(function(e,t){return e.getHeight()>t.getHeight()?e:t}):null}function c(e){return e.get$().position().top}if(t.isHorizontal()?(r=Math.ceil(i/(this.columnWidth+this.gap)),o=t.isEast()?e.getColumn():e.getColumn()+e.getColumns()-r):(o=e.getColumn(),r=e.getColumns()),t.isVertical()){var u,d,h=1;if(t.isSouth())for(u=l(s=e.getRow());(d=l(s+h))&&n>c(d)-c(u);)h++;else for(d=l(s=e.getRow()+e.getRows()-1);(u=l(s-1))&&n>c(d)-c(u)+d.getHeight()-u.getHeight();)s--,h++}else s=e.getRow(),h=e.getRows();return R.area(s,o,h,r)},R.prototype.setAreaHovered=function(i){i?this.each(function(e,t){t>=i.row-1&&t<=i.row-1+i.rows-1?e.setHovered(!0,i.column,i.column+i.columns-1):e.setHovered(!1)}):this.each(function(e){e.setHovered(!1)}),this.callbacks.onAreaHovered&&this.callbacks.onAreaHovered.call(this,i)},R.prototype.startResizing=function(e){this.callbacks.onResizingStarted&&this.callbacks.onResizingStarted.call(this,e)},R.prototype.stopResizing=function(e){this.callbacks.onResizingStopped&&this.callbacks.onResizingStopped.call(this,e)},R.prototype.adjustRows=function(e){D.make(this,e.get())},R.prototype.getDroppables=function(){var o=[],t=this.gap;return this.each(function(e,i){var n=(e.isGuttered()?t:0)+2;e.each(function(e,t){o.push({droppable:e,row:i+1,column:t+1,marginBottom:n})})}),o},R.prototype.adjustSidebars=function(){var o=[];$.each(this.rows,function(e,t){var t=t.get$(),i=parseInt(t.css("marginTop")),n=t.position().top,t=t.outerHeight(!0);o[e]={top:n+i/2,middle:n+i+(t-i)/2}}),$.each(this.rows,function(e,t){var i=o[e],n=o[e+1];t.setRemoveButtonShown(!0),t.setInsertButtonShown(!0),t.setGutterButtonShown(!!n),n&&t.adjustGutterButton(n.top-15),0===e?(t.adjustInsertButton(0),t.adjustRemoveButton(n?(n.top-15)/2:i.middle)):(t.adjustInsertButton(i.top-15),t.adjustRemoveButton(i.middle-15))})},R.prototype.addRowBefore=function(e){var t,e=this.rows.indexOf(e);return 0<=e&&(t=!0,0<e&&(t=this.rows[e-1].isGuttered()),t=this.createRow(t),this.rows[e].get$().before(t.get$()),this.rows.splice(e,0,t)),e+1},R.prototype.addRow=function(){0<this.rows.length&&this.rows[this.rows.length-1].setGuttered(!0);var e=this.createRow(!0);return this.$template.append(e.get$()),this.rows.push(e),this.rows.length},R.prototype.removeRow=function(e){e=this.rows.indexOf(e);return 0<=e&&(this.rows[e].remove(),this.rows.splice(e,1)),e+1},R.prototype.setOnDrop=function(e){this.callbacks.onDrop=e},R.prototype.setOnAreaHovered=function(e){this.callbacks.onAreaHovered=e},R.prototype.setOnResizingStarted=function(e){this.callbacks.onResizingStarted=e},R.prototype.setOnResizingStopped=function(e){this.callbacks.onResizingStopped=e},O.get=function(e){return e.data("agn:row")},O.prototype.createDroppable=function(){var e=new F(this),n=this;return e.setOnHoverChange(function(e,t){var i;n.callbacks.onHoverChange&&0<(i=n.droppables.indexOf(this)+1)&&n.callbacks.onHoverChange.call(n,this,e,i,t)}),e.setOnDrop(function(e){var t;n.callbacks.onDrop&&0<(t=n.droppables.indexOf(this)+1)&&n.callbacks.onDrop.call(n,e,this,t)}),e},O.prototype.get$=function(){return this.$row},O.prototype.each=function(e){this.droppables.forEach(e)},O.prototype.getDroppables=function(){return this.droppables.slice()},O.prototype.getDroppable=function(e){return this.droppables[e-1]||null},O.prototype.setHeight=function(t){t=0<t?Math.max(t,10):80,this.droppables.forEach(function(e){e.setHeight(t)})},O.prototype.isGuttered=function(){return this.$row.hasClass("guttered")},O.prototype.setGuttered=function(e){e?(this.$row.addClass("guttered"),g.setTooltip(this.$gutterButton,t("grid.gutter.hide"))):(this.$row.removeClass("guttered"),g.setTooltip(this.$gutterButton,t("grid.gutter.show")))},O.prototype.setHovered=function(i,n,o){void 0===n?this.droppables.forEach(function(e){e.setHovered(i)}):(void 0===o&&(o=n),this.droppables.forEach(function(e,t){t+=1;n<=t&&t<=o?e.setHovered(i):e.setHovered(!i)}))},O.prototype.remove=function(){this.droppables.forEach(function(e){e.remove()}),this.droppables=[],this.$row.remove(),g.removeTooltip(this.$gutterButton),this.$gutterButton.remove(),g.removeTooltip(this.$removeButton),this.$removeButton.remove(),g.removeTooltip(this.$insertButton),this.$insertButton.remove(),this.callbacks.onDrop=void 0},O.prototype.adjustGutterButton=function(e){this.$gutterButton.css("top",e)},O.prototype.setGutterButtonShown=function(e){g.setShown(this.$gutterButton,e)},O.prototype.adjustRemoveButton=function(e){this.$removeButton.css("top",e)},O.prototype.setRemoveButtonShown=function(e){g.setShown(this.$removeButton,e)},O.prototype.adjustInsertButton=function(e){this.$insertButton.css("top",e)},O.prototype.setInsertButtonShown=function(e){g.setShown(this.$insertButton,e)},O.prototype.setOnHoverChange=function(e){this.callbacks.onHoverChange=e},O.prototype.setOnDrop=function(e){this.callbacks.onDrop=e},F.get=function(e){return e.data("agn:droppable")},F.options=function(i){return{accept:"[data-building-block]",tolerance:"pointer",deactivate:function(){i.setHovered(!1),i.callbacks.onHoverChange&&i.callbacks.onHoverChange(!1)},drop:function(e,t){i.setHovered(!1),i.callbacks.onDrop&&i.callbacks.onDrop(w.get(t.draggable))},over:function(e,t){i.callbacks.onHoverChange?i.callbacks.onHoverChange(w.get(t.draggable),!0):i.setHovered(!0)},out:function(e,t){i.callbacks.onHoverChange?i.callbacks.onHoverChange(w.get(t.draggable),!1):i.setHovered(!1)}}},F.prototype.get$=function(){return this.$droppable},F.prototype.getCoordinates=function(){return this.$droppable.offset()},F.prototype.getRow=function(){return this.row},F.prototype.getHeight=function(){return g.getHeightAccurate(this.$droppable)},F.prototype.setHeight=function(e){this.$droppable.outerHeight(e)},F.prototype.setHovered=function(e){e?this.$droppable.addClass("container-hover-accept"):this.$droppable.removeClass("container-hover-accept")},F.prototype.setLayeringIndex=function(e){var t;0<e?this.$rotationButton?(this.$rotationButton.css("visibility",""),this.$rotationButton.find(".layer-number").text(e)):((t=this).$rotationButton=r.dom("child-z-index-button",{index:e}),l.isEditable()&&this.$rotationButton.on("click",function(){t.callbacks.onLayeringRotate&&t.callbacks.onLayeringRotate()}),this.$droppable.append(this.$rotationButton)):this.$rotationButton&&this.$rotationButton.css("visibility","hidden")},F.prototype.remove=function(){this.$droppable.droppable("destroy"),this.$rotationButton&&(this.$rotationButton.remove(),this.$rotationButton=void 0),this.$droppable.remove(),this.callbacks.onDrop=void 0,this.callbacks.onHoverChange=void 0,this.callbacks.onLayeringRotate=void 0},F.prototype.setOnDrop=function(t){var i=this;this.callbacks.onDrop=function(e){t.call(i,e)}},F.prototype.setOnHoverChange=function(i){var n=this;this.callbacks.onHoverChange=function(e,t){i.call(n,e,t)}},F.prototype.setOnLayeringRotate=function(e){var t;e?(t=this).callbacks.onLayeringRotate=function(){e.call(t)}:this.callbacks.onLayeringRotate=void 0},L.get=function(e){var t=e.data("agn:child-dialog");return t||e.closest(".modal").data("agn:child-dialog")},L.create=function(e,t){var i=o.createFromTemplate(t,"div-editing-dialog");i.data("agn:child-dialog",new L(i,e,t))},L.prototype.updateImageSrc=function(e){var t=e.data("placeholder-id"),e=$.trim(e.val());this.updateImageSrcPreview(t,e)},L.prototype.updateImageSrcPreview=function(e,t){e=$("#preview-"+e);e.attr("src")!==t&&e.attr("src",this.options.resolveAgnImageTags(t)||this.options.noPreviewImageLink)},L.prototype.updateImage=function(e){var t,i,n=e.data("placeholder-id"),o=e.prop("files"),r=$("#content-"+n);o&&o.length?"image"===(t=o[0]).type||t.type.match("image/.*")?(o=new FileReader,i=this,o.onload=function(e){i.updateImagePreview(n,e.target.result,t.name,t.name)},o.readAsDataURL(t)):(u.clearFormField(e),this.updateImagePreview(n)):this.updateImagePreview(n),r.val("")},L.prototype.updateImagePreview=function(e,t,i,n){var o=$("#preview-"+e),e=$("#image-name-"+e);o.attr("src")!==t&&o.attr("src",t||this.options.noPreviewImageLink),o.attr("title",n||""),e.text(i||"")},L.prototype.chooseImage=function(e){var t=$("#file-"+e);t.val()?t.trigger("click"):this.showMediapoolDialog(e)},L.prototype.deleteImage=function(e){var t=$("#file-"+e),i=$("#image-name-"+e),n=$("#content-"+e),e=$("#preview-"+e);u.clearFormField(t),i.text(""),n.val(""),e.attr("src",this.options.noPreviewImageLink)},L.prototype.showMediapoolDialog=function(t){var i=this;e.request(this.options.urls.MEDIAPOOL_IMAGE_PICK).done(function(e){$("#content-"+t).val(e.id),$("#image-category-id-"+t).select2("val",e.categoryId),u.clearFormField($("#file-"+t)),i.updateImagePreview(t,e.src,e.name,e.title)})},L.prototype.validate=function(e){var t=this.validateImageCategories(e),e=this.validateImageFormats(e);return t&&e&&this.validateHtml()},L.prototype.validateHtml=function(){var t,i=[];return this.child.getPlaceholders().forEach(function(e){e.type!==f&&(e=$("#content-"+e.id).val(),$.trim(e)&&i.push(e))}),!(0<i.length)||(t=!1,$.ajax({type:"POST",url:AGN.url("/layoutbuilder/template/"+l.getTemplateId()+"/validateHtml.action"),contentType:"application/json",async:!1,data:JSON.stringify({htmlPlaceholders:i})}).done(function(e){AGN.Lib.JsonMessages(e.popups,!0),t=e.success}),t)},L.prototype.validateImageCategories=function(o){var r=!0;return this.child.getPlaceholders(f).forEach(function(e){var i,n,e=e.id;$("#image-category-id-"+e).val()<=0&&(i=!!$("#file-"+e).val(),n=$("#content-"+e).val(),(i||0<parseInt(n))&&(r=!1,o.showFieldError("image-category-id-"+e,t("error.grid.noCategorySelected"))))}),r},L.prototype.validateImageFormats=function(n){var o=!0;return this.child.getPlaceholders(f).forEach(function(e){var e=e.id,i=$("#file-"+e).val();!i||(i=(i=i).match(/[^.\\/]\.([^.\\/]+)$/))&&i[1].toUpperCase()in{GIF:1,JPG:1,JPEG:1,PNG:1}||(o=!1,n.showFieldError("content-"+e,t("grid.divchild.format.error")))}),o},L.prototype.updateImagesCategories=function(){var t,e=$.Deferred(),i=[];return this.child.getPlaceholders(f).forEach(function(e){var e=e.id,t=parseInt($("#content-"+e).val());0<t&&i.push({imageId:t,categoryId:$("#image-category-id-"+e).val()})}),i.length?(t={},i.forEach(function(e){t[e.imageId]=e.categoryId}),$.ajax(this.options.urls.MEDIAPOOL_SET_CATEGORIES,{type:"POST",dataType:"json",data:{categoryId:t}}).done(function(){e.resolve()}).fail(function(){e.reject()})):e.resolve(),e.promise()},L.prototype.uploadImages=function(e){var i,t=$.Deferred(),n=[];return this.child.getPlaceholders(f).forEach(function(e){var e=e.id,t=$("#file-"+e).prop("files");t&&t.length&&n.push({placeholderId:e,image:t[0],categoryId:$("#image-category-id-"+e).val()})}),n.length?(i=new FormData,n.forEach(function(e,t){i.append("images["+t+"].file",e.image),i.append("images["+t+"].fileName",e.image.name),i.append("images["+t+"].title",e.image.name),i.append("images["+t+"].categoryId",e.categoryId)}),$.ajax(this.options.urls.MEDIAPOOL_IMAGE,{type:"POST",dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1,data:i}).done(function(e){AGN.Lib.JsonMessages(e.popups),e.data&&e.data.forEach(function(e,t){0<e&&(t=n[t].placeholderId,$("#content-"+t).val(e),u.clearFormField($("#file-"+t)))}),!0===e.success?t.resolve():t.reject()}).fail(function(){t.reject()})):t.resolve(),t.promise()},L.prototype.save=function(e){var s,a,t,i,n=this;this.updateCkditorsValues(),this.validate(e)&&(s=this.$modal,a=this.child,t=this.$modal.find(".modal-body"),i=$("#child-save-button"),t.addClass("ui-modal-loading"),t.scrollTop(0),i.prop("disabled",!0),this.updateImagesCategories(e).then(function(){return n.uploadImages(e)}).always(function(){t.removeClass("ui-modal-loading"),i.prop("disabled",!1)}).done(function(){var t,i={},e=a.getPlaceholders(),e=(s.find(".js-wysiwyg").each(function(){var e=$(this),t=e.attr("id");CKEDITOR.instances[t]&&CKEDITOR.instances[t].updateElement(),AGN.Lib.Editor.get(e).val(e.val()),window.removeEditor(t)}),e.forEach(function(e){e=e.id;i[e]=$("#content-"+e).val()}),$("#child-title").val()),n=parseInt($("#target-group-id").val()),o=$("#is-toc-enabled").is(":checked"),r=$("#is-interest-sortable").is(":checked")?$("#interest-group").val():"";s.modal("hide"),a.isToc()?(t={},$("input.js-is-toc-item").each(function(){var e=$(this);t[e.data("child-id")]=e.is(":checked")}),l.saveChild(a,e,n,o,r,i,t)):l.saveChild(a,e,n,o,r,i)}))},L.prototype.updateCkditorsValues=function(){this.$modal.find(".js-wysiwyg").each(function(){var e=CKEDITOR.instances[$(this).attr("id")];e&&e.updateElement()})}}),AGN.Lib.Controller.new("grid-overview",function(){var s;this.addDomInitializer("grid-overview",function(e){s=this.config,e.all(".card[data-grid-id]").each(function(){var e=$(this),t=s.grids[parseInt(e.data("grid-id"))],i=[],n=1e3/(165/90),o=1e3*t.columnWidth/t.templateWidth,r=1e3*t.gutter/t.templateWidth;e.find("svg").exists()||(e.find(".js-grid").append('<svg class="grid-preview" viewBox="0 0 1000 '+n+'"></svg>'),_.times(t.columnNum,function(e){i.push({type:"gutter",width:r/2}),i.push({type:"col",width:o}),i.push({type:"gutter",width:r/2})}),_.reduce(i,function(e,t){return(t.xPos=e)+t.width},0),d3.select(e.find("svg")[0]).selectAll("g").data(i).enter().append("g").attr("transform",function(e){return"translate("+e.xPos+",0)"}).append("rect").attr("class",function(e){return"grid-preview-"+e.type}).attr("width",function(e){return e.width}).attr("height",n))})}),this.addAction({click:"back"},function(){history.back()}),this.addAction({click:"pick"},function(){var e=s.grids[this.el.data("grid-id")];e&&$.ajax(e.viewLink,{method:"POST",data:{newTemplateName:s.newTemplateName}}).done(function(e){AGN.Lib.Page.render(e)})}),this.addAction({submission:"createNewGrid"},function(){var e=this.el,i=AGN.Lib.Form.get(e),e=e.find("#newGridName");$.ajax(s.urls.CHECK_NAME,{type:"POST",data:{name:e.val()}}).done(function(e){e.used?i.showFieldError("newGridName",t("fields.name.errors.name_in_use")):i.submit("static")})})}),AGN.Lib.Controller.new("grid-template",function(){var i,n,o=new s;function r(e,t){this.templateNameValidationUrl=t.templateNameValidationUrl,this.form=AGN.Lib.Form.get(e)}function s(){this.contentTypes={css:{inputSelector:'input[name="css"]',contentId:"#cssContents"},outerHtml:{inputSelector:'input[name="outerHtml"]',contentId:"#templateOuterHTML"},styles:{inputSelector:'input[name^="styles["]',getContentSelector:function(e){return'input[name="'+e+'"]'}}}}this.addDomInitializer("grid-template",function(){var e=this.config;n=this.el,i=new r(n,e)}),this.addAction({submission:"grid-template-validation"},function(){i.validateTemplateName(n.find("#newTemplateName"))}),this.addAction({click:"back"},function(){history.back()}),this.addAction({click:"delete"},function(){var e=this.el,i="",i="A"==e.prop("tagName")?e.prop("href"):e.data("url");return $.get(i).done(function(e){var t=$(e);1!=t.filter(".modal").add(t.find(".modal")).length?AGN.Lib.Page.render(e,i):AGN.Lib.Confirm.create(e).done(function(e){AGN.Lib.Page.render(e,i)})}),this.event.preventDefault(),!1}),r.prototype.validateTemplateName=function(e){var e=e.val(),i=this.form,n=this.templateNameValidationUrl;""==e?i.showFieldError("newTemplateName",t("fields.required.errors.missing")):$.ajax({type:"POST",url:n,data:{newTemplateName:e}}).done(function(e){0==e.newTemplateName?i.showFieldError("templateName",t("fields.name.errors.name_in_use")):i.submit("static")})},this.addAction({click:"update-preview"},function(){var e=this.el;o.updateInputValue(e.data("target-form"),e.data("content-type"))}),s.updateFields=function(e,i,n){var t=$("form").not("#"+n.attr("id"));_.each(t.find(e),function(e){var e=$(e),t=e.val();n.find(i(e.attr("name"))).val(t)})},s.updateField=function(e,t,i){i.find(e).val(t)},s.prototype.updateInputValue=function(e,t){var i=this.contentTypes[t],e=$(e);"styles"==t&&i&&e?s.updateFields(i.inputSelector,i.getContentSelector,e):i&&e&&(t=$(i.contentId).val(),s.updateField(i.inputSelector,t,e)),e.submit()}}),AGN.Lib.Controller.new("image-editor",function(){var o,r,e=AGN.Lib.Confirm,t=AGN.Lib.Template,s=0,a=0,l=!1,i=!1;function n(e){o=e.x,r=e.y,s=e.w,a=e.h}function c(){var e=document.getElementById("editor-canvas"),t=$("#editor-img").data("content-type"),e=e.toDataURL(t);$("#editor-img").attr("src",e)}function u(){var e=document.getElementById("editor-canvas"),t=$("#editor-img").data("content-type"),t=e.toDataURL(t),i=$("#editor-result"),n=t.indexOf(","),n=(0<=n&&(t=t.substring(n+1)),i.val()!=t&&(i.val(t),i.prop("disabled",!1)),e.width+$("#l-img-editor-tools").width()+10);$("#l-img-editor").css("min-width",n)}function d(){var e=$("#editor-canvas").data("Jcrop");void 0!==e&&($("#editor-canvas").appendTo("#canvas-editor-area"),$("#editor-canvas").removeAttr("style"),e.destroy()),$("#editor-crop-btn").removeClass("btn-primary"),i=!1,a=s=0}this.addDomInitializer("img-editor-init",function(){i=l=!1,$("#editor-result").prop("disabled",!0)}),this.addAction({click:"editCategory"},function(){e.create(t.text("modal-element-category-select",{categoryId:$("#category-id").val()})).done(function(e){e&&e.categoryId&&$("#category-id").val(e.categoryId)})}),this.addAction({click:"cropImage"},function(){c(),i=i?(d(),u(),!1):($("#editor-canvas").Jcrop({onChange:n,onSelect:n,bgOpacity:1}),$("#editor-crop-btn").addClass("btn-primary"),!0)}),this.addAction({click:"saveCrop"},function(){c();var t=document.getElementById("editor-canvas"),i=t.getContext("2d"),n=new Image;n.src=$("#editor-img").attr("src"),1<s&&1<a&&(n.onload=function(){t.width=s,t.height=a,i.save(),i.drawImage(n,o,r,s,a,0,0,s,a),i.restore();var e=$("#editor-img").data("content-type"),e=t.toDataURL(e);$("#editor-img").attr("src",e),$("#editor-canvas").css("width",s),$("#editor-canvas").css("height",a),$("#l-editor-img-width").attr("value",s),$("#l-editor-img-height").attr("value",a),u(),d()})}),this.addAction({click:"rotateImage"},function(){d(),c();var i=document.getElementById("editor-canvas"),n=i.getContext("2d"),e=$("#editor-img").data("content-type"),e=i.toDataURL(e),o=new Image;o.src=e,$("#editor-img").attr("src",e),o.onload=function(){var e=i.width,t=i.height;i.width=t,i.height=e,e=i.width,t=i.height,n.save(),n.translate(e,t/e),n.rotate(Math.PI/2),n.drawImage(o,0,0),n.restore(),u()}}),this.addAction({input:"changeSize"},function(){d();var r=document.getElementById("editor-canvas"),s=r.getContext("2d"),a=new Image;a.src=$("#editor-img").attr("src"),a.onload=function(){var e,t=$("#l-editor-img-width").val(),i=$("#l-editor-img-height").val(),n=a.width,o=a.height;l&&($("#l-editor-img-width").is(":focus")?(e=t/n,i=Math.round(e*o),$("#l-editor-img-height").attr("value",i)):$("#l-editor-img-height").is(":focus")&&(e=i/o,t=Math.round(e*n),$("#l-editor-img-width").attr("value",t))),r.width=t,r.height=i,s.save(),s.drawImage(a,0,0,t,i),s.restore(),u()}}),this.addAction({input:"pcChangeSize"},function(){d();var n=document.getElementById("editor-canvas"),o=n.getContext("2d"),r=new Image;r.src=$("#editor-img").attr("src"),r.onload=function(){var e=$("#l-editor-img-percent").val(),t=r.width,i=r.height,t=Math.round(t*(e/100)),i=Math.round(i*(e/100));$("#l-editor-img-height").attr("value",i),$("#l-editor-img-width").attr("value",t),n.width=t,n.height=i,o.save(),o.drawImage(r,0,0,t,i),o.restore(),u()}}),this.addAction({click:"blockSizes"},function(){l?(l=!1,$("#editor-lock-btn").removeClass("btn-primary")):(l=!0,$("#editor-lock-btn").addClass("btn-primary"))})}),AGN.Lib.Controller.new("import-profile",function(){var n,o,r,s=!1,a=(this.addAction({click:"save"},function(){var e,i;h(u(p()))&&(e=AGN.Lib.Form.get($("#importProfileForm")),i=e,_.each(function(){var i={};return _.each(o.find("[data-gender-settings-row]"),function(e){var e=$(e),t=c(e),e=function(e){e=e.find("[data-gender-int-value]");return e.is("select")?e.val():e.text()[0]}(e);t.length&&(i[e]=i.hasOwnProperty(e)?i[e]+", "+t:t)}),i}(),function(e,t){i.setValue("profile.genderMappingsToSave."+t,e)}),e.setValue("isGenderSectionFocused",s),e.submit())}),this.addDomInitializer("import-profile-view",function(){var e,t,i;r=this.config.mailinglistShowPermissionAllowed,$("#importProfileForm").on("click change",function(e){e=$(e.target);s=(e.is("input")||e.is("select")||e.is("button")||e.parent().is("button"))&&0<e.parents("#recipient-import-gender-settings").length}),t=this.config.genderMappings,i=[],Object.keys(t).forEach(function(e){i.push([e,t[e]])}),i.sort(function(e,t){return e[1]-t[1]}),e=i,o=$("#recipient-import-gender-settings tbody"),n=AGN.Lib.Template.prepare("gender-settings-table-row"),_.each(e,function(e){d(e[0],e[1])}),d("",""),f()}),this.addAction({change:"new-recipients-action-select"},function(){f()}),this.addAction({click:"add-gender-mapping",enterdown:"gender-enterdown"},function(){var e;this.event.preventDefault(),function(){var e=u(p());if(e.size<1)return void AGN.Lib.Messages(t("defaults.error"),t("import.gender.error.empty"),"alert");return h(e)}()&&((e=o.find('[data-action="add-gender-mapping"]')).after("<a href='#' class='btn btn-regular btn-alert' data-action='delete-gender-mapping'><i class='icon icon-trash-o'></i></a>"),e.remove(),d("",""),p().find("[data-gender-text-value]").focus())}),this.addAction({click:"delete-gender-mapping"},function(){this.el.closest("tr").remove()}),function(e){$("#mailinglists").toggleClass("hidden",!e),$("#mailinglists-to-show").toggleClass("hidden",e)}),l=(this.addDomInitializer("allMailinglists-checkbox",function(){f()}),this.addAction({change:"mode-select-change"},function(){!$("#all-mailinglists-wrapper").is(":visible")&&$("#allMalinglistsCheckbox").is(":checked")&&$("#allMalinglistsCheckbox").click()}),this.addAction({change:"allMailinglists-checkbox"},function(){l($(this.el).is(":checked"))}),function(e){$('#mailinglists [type="checkbox"]').prop("disabled",e)});function c(e){e=e.find("[data-gender-text-value]");return(e.is("input")?e.val():e.text()).trim()}function u(e){e=c(e),e=e.length?e.split(","):[];return new Set(_.without(_.map(e,_.trim),""))}function d(e,i){0===i||i?i+=" ("+t("import.gender.short."+i)+")":i="",o.append(n({intValue:i,textValues:e})),AGN.Lib.CoreInitializer.run("select",o.find("[data-gender-int-value]:last-child"))}function h(e){for(var i=o.find("[data-gender-settings-row]").toArray(),n=0;n<i.length-1;n++)if(_.intersection(Array.from(e),Array.from(u($(i[n])))).length)return AGN.Lib.Messages(t("defaults.error"),t("import.gender.error.duplicate"),"alert"),!1;return!0}function p(){return o.find("[data-gender-settings-row]:last-child")}function f(){var e,t,i=$("#import_actionnewrecipients"),i=i.length&&0<i.val();e=i,t=$("#allMalinglistsCheckbox"),e?(t.attr("checked",!1),$("#all-mailinglists-wrapper").hide()):$("#all-mailinglists-wrapper").show(),t.attr("disabled",e||!r),a(!(t=i)),l($("#allMalinglistsCheckbox").is(":checked")||!r||t)}}),AGN.Lib.Controller.new("importprofile-fields",function(){var n,t,o,r,s,a,l="do-not-import-column",i=[];function c(t){_.each($("#columnMappings tbody").find("[name^=dbColumn_]"),function(e){d($(e),t)}),d($("[name=newColumnMapping\\.databaseColumn]"),t)}function u(t){_.each($("#columnMappings tbody").find("[name^=dbColumn_]"),function(e){h($(e),t)}),h($("[name=newColumnMapping\\.databaseColumn]"),t)}function d(e,t){e.val()!==t&&t!==l&&e.find('[value="'+t+'"]').remove()}function h(e,t){e.val()!==t&&e.append($("<option>",{value:t,text:t}))}function p(){var t=[];return _.each($("#columnMappings tbody").find("[name^=dbColumn_]"),function(e){t.push($(e).val())}),t}this.addDomInitializer("importprofile-fields",function(){var e;n=this.config,r=AGN.Lib.Template.prepare("text-def-val-input"),s=AGN.Lib.Template.prepare("date-def-val-input"),t=$("#columnMappings tbody"),e=AGN.Lib.Template.prepare("new-mapping-row"),t.append(e()),AGN.Lib.CoreInitializer.run("select",$("[name=newColumnMapping\\.databaseColumn]")),AGN.Lib.CoreInitializer.run("select",$("[name=valueType]")),_.each($("#columnMappings tbody").find("[name^=dbColumn_]"),function(e){c($(e).val())}),(o=AGN.Lib.Form.get($("#importProfileColumnsForm"))).initFields(),i=p()}),this.addAction({change:"changeNewColName"},function(){a&&a!==l&&u(a);var e=this.el.find(":selected").val();{var t,i;c(a=e),e=function(e){var t=n.columns[e].dataType.toLowerCase();switch(t){case"date":case"datetime":return t;default:return"text"}}(e=e),i=$("[name=newColumnMapping\\.defaultValue]"),t=i.val(),(i=i.closest("td")).children().first().data("type")!==e&&(i.empty(),i.append(function(e,t){switch(e){case"date":case"datetime":return s({withTime:"datetime"===e,val:t});default:return r}}(e,t)),t=i,"date"===(i=e)?AGN.runAll(t):"datetime"===i&&o.initFields())}}),this.addAction({change:"changeExistColName"},function(){t=p();var t,e=i.filter(function(e){return t.indexOf(e)<0})[0];e&&(u(e),c(this.el.val()),i=p())}),this.addAction({click:"deleteMapping"},function(){var e=$("#importProfileColumnsForm"),t=this.el.data("col_index");e.append('<input type="hidden" name="removeMapping_'+t+'" value="'+t+'" /> '),e.submit()}),this.addAction({click:"addMapping"},function(){var e;o.valid({})?(o.cleanErrors(),$("#importProfileColumnsForm").append('<input type="hidden" name="add" value="add" />'),$("[data-action=changeDateInput]").is(":checked")?(e=0===(e=parseInt($("#daysCount").val()||0))?"":0<e?"+"+e:e,o.setValue("valueType","function"),$("[name=newColumnMapping\\.defaultValue]").val("CURRENT_TIMESTAMP"+e)):o.setValue("valueType","value"),o.submit()):o.handleErrors()}),this.addAction({change:"changeDateInput"},function(){var n;$("#dateInput").toggle(!this.el.is(":checked")),$("#daysInput").toggle(this.el.is(":checked")),(n=$("#daysCount")).on("change.offset keyup.offset",function(e){var t,i=n.val();i?(t=parseInt(i),isNaN(t)?n.val(i.replace(/[^\d+-]/g,"")):(t=(t<0?"":"+")+t)!=i&&n.val(t)):"change"===e.type&&n.val("+0")})})}),AGN.Lib.Controller.new("logon-password-change",function(){this.addAction({click:"showPasswordChangeForm"},function(){$("#suggestion-view").addClass("hidden"),$("#submission-view").removeClass("hidden")})}),AGN.Lib.Controller.new("mailing-upload-attachment",function(){function t(){$("#attachment").val(""),$("#attachmentName").val(""),$("#backgroundAttachment").val(""),$("#targetId").select2("val",0),AGN.Lib.Select.get($("#type")).selectFirstValue()}function i(e){var t="";e?t=$("#pdfUploadId").select2("val"):(e=$("#attachment").prop("files"))&&e.length&&(t=e[0].name),$("#attachmentName").val(t)}this.addDomInitializer("mailing-upload-attachment",function(){t()}),this.addAction({change:"use-pdf"},function(){var e;e=$(this.elem).prop("checked"),t(),i(e)}),this.addAction({change:"change-attachment-file"},function(){i(!1)}),this.addAction({change:"change-upload-file"},function(){i(!0)})}),AGN.Lib.Controller.new("mailing-content-controller",function(){var o,r,s,a,i,l,n=AGN.Lib.Confirm,c=AGN.Lib.Template,u=(this.addDomInitializer("mailing-content-initializer",function(){l=$("#table_body"),r=c.prepare("mailing-content-table-entry-template"),s=this.config.isMailingExclusiveLockingAcquired,a=this.config.isEditableMailing;var e=this.config.dynTagsMap,t=this.config.targetGroupList,i=this.config.interestGroupList,n=this.config.dynTagNames;o=new g(e,t,i,n),d()}),this.addDomInitializer("gridTemplate-textContent-initializer",function(){l=$("#textModulesTable"),i=this.config.templateId,s=a=!0,r=c.prepare("gridTemplate-textContent-tableRow-template"),o=new g(this.config.dynTags,this.config.targets,[],[]),d()}),this.addAction({click:"createContentEditorModal"},function(){var e=parseInt(this.el.data("dyn-name-id"));0<e&&$.ajax({url:AGN.url("/mailingcontent/name/{id}/view.action".replace("{id}",e.toString())),method:"GET",dataType:"json",success:function(e){var e=new m(e),t=o.isHtmlContentBlock(e.name);n.createFromTemplate({dynTag:e,targetGroups:_.cloneDeep(o.targetGroups),interestGroups:_.cloneDeep(o.interestGroups),saveUrl:AGN.url("/mailingcontent/save.action"),DynTagObject:m,isFullHtmlTags:"HTML-Version"==e.name,showHTMLEditor:t,isEditableMailing:a},"content-editor-template").done(function(e){o.setDynTag(e),h(e),u()})},statusCode:{404:function(){AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}}})}),this.addAction({click:"createGridTemplateTextContentEditorModal"},function(){var e=parseInt(this.el.data("dyn-name-id"));0<e&&$.ajax({url:AGN.url("/layoutbuilder/template/"+i+"/textModules/"+e+"/view.action"),method:"GET",dataType:"json",success:function(e){var e=new m(e),t=o.isHtmlContentBlock(e.name);n.createFromTemplate({dynTag:e,targetGroups:_.cloneDeep(o.targetGroups),interestGroups:_.cloneDeep(o.interestGroups),saveUrl:AGN.url("/layoutbuilder/template/"+i+"/textModules/update.action"),DynTagObject:m,isFullHtmlTags:"HTML-Version"==e.name,showHTMLEditor:t,isEditableMailing:a},"content-editor-template").done(function(e){o.setDynTag(e),h(e)})},statusCode:{404:function(){AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}}})}),function(){var e=AGN.Lib.Form.get($("#preview"));e.setValue("previewForm.reload",!1),e.setResourceSelectorOnce("#preview"),e.submit()}),d=function(){o.dynTags.forEach(function(e){l.append(p(e))})},h=function(e){var t=p(e);l.find('[data-dyn-name-id="'+e.id+'"]').replaceWith(t)},p=function(e){var t=e.contentBlocks.map(function(e){return f(e)},[]),i=e.contentBlocks.map(function(e){return 35<e.content.length?e.content.substring(0,35)+"...":e.content},[]);return r({id:e.id,name:e.name,targetGroups:t,contents:i,editable:!!s})},f=function(e){var i,n=t("mailing.default.target_group_name");return 0<e.targetId&&(i=(e=o.getTargetGroupById(e.targetId)).deleted?t("mailing.default.target_group_deleted"):e.id,n=e.targetName+" ("+i+")"),n},g=function(e,i,n,o){this.dynTags=Object.entries(e).map(function(e){return new m(e[1])},[]),this.interestGroups=_.cloneDeep(n),this.interestGroups.unshift({column:"",shortname:t("mailing.default.interest_group_name")}),this.targetGroups=_.cloneDeep(i),this.targetGroups.unshift({id:0,targetName:t("mailing.default.target_group_name")}),this.targetGroupsMap=i.reduce(function(e,t){return e[t.id]=t,e},{}),this.dynTagNames=o,this.isHtmlContentBlock=function(e){return void 0!==o&&null!=o&&null!=o.length&&0<o.length&&o.includes(e)},this.getDynTagById=function(t){return this.dynTags.filter(function(e){return e.id===t})[0]},this.setDynTag=function(e){var t=this.getDynTagById(e.id),t=this.dynTags.indexOf(t);-1<t&&(this.dynTags[t]=e.clone())},this.getTargetGroupById=function(e){return this.targetGroupsMap[e]||{id:0,targetName:t("mailing.default.target_group_name")}}},m=function(e){this.id=e.id||0,this.name=void 0===e.dynName?e.name:e.dynName,this.mailingId=void 0===e.mailingID?e.mailingId:e.mailingID,this.interestGroup=this.interestGroup||"",this.interestGroup=void 0===e.interestValue?e.interestGroup:e.dynInterestGroup,e.contentBlocks?this.contentBlocks=e.contentBlocks.map(function(e){return new v(e)}):this.contentBlocks=Object.entries(e.dynContent).map(function(e){return new v(e[1])}),this.contentBlocks.__proto__.swap=function(e,t){var i=this[e];return this[e]=this[t],this[t]=i,this};var t={id:0,index:0,targetId:0,content:""},i=(this.getContentBlockByTargetId=function(t){return this.contentBlocks.filter(function(e){return e.targetId===t})[0]},this.getContentBlockById=function(t){return this.contentBlocks.filter(function(e){return e.uniqueId===t})[0]},this.createNewContentBlock=function(){var e=new v(t);return e.index=this.contentBlocks.length,this.contentBlocks.push(e),i(this.contentBlocks),e},this.moveUpContentBlock=function(e){e=this.getContentBlockById(e);1<e.index&&(this.contentBlocks.swap(e.index-1,e.index-2),i(this.contentBlocks))},this.moveDownContentBlock=function(e){e=this.getContentBlockById(e);e.index<this.contentBlocks.length&&(this.contentBlocks.swap(e.index-1,e.index),i(this.contentBlocks))},this.setFirstContentBlock=function(e){var e=this.getContentBlockById(e);1<e.index&&(e=this.contentBlocks.splice(e.index-1,1),this.contentBlocks=e.concat(this.contentBlocks),i(this.contentBlocks))},this.setLastContentBlock=function(e){var e=this.getContentBlockById(e);e.index<this.contentBlocks.length&&(e=this.contentBlocks.splice(e.index-1,1),this.contentBlocks=this.contentBlocks.concat(e),i(this.contentBlocks))},this.changeTargetGroup=function(e,t){e=this.getContentBlockById(e);return e.targetId=t,e},this.changeInterestGroup=function(e){this.interestGroup=e},this.changeContent=function(e,t){e=this.getContentBlockById(e);return e.content=t||"",e},this.changeOrder=function(e){var t;this.contentBlocks=e.map((t=this,function(e){return t.getContentBlockById(parseInt(e))})),i(this.contentBlocks)},this.remove=function(e){e=this.getContentBlockById(e),e=this.contentBlocks.indexOf(e);-1<e&&(this.contentBlocks.splice(e,1),i(this.contentBlocks))},this.removeAll=function(){this.contentBlocks=[]},this.clone=function(){return new m(this)},function(e){e.forEach(function(e,t){e.index=t+1})})},v=function(e){void 0===v.uniqueIdCounter&&(v.uniqueIdCounter=0),this.uniqueId=++v.uniqueIdCounter,this.id=e.id,this.index=void 0===e.dynOrder?e.index:e.dynOrder,this.content=void 0===e.dynContent?e.content:e.dynContent,this.targetId=void 0===e.targetID?e.targetId:e.targetID}}),AGN.Lib.Controller.new("mailing-content-editor-controller",function(){var o,i,n,r,s,a,l,c,u,d,h,p,f=AGN.Lib.Modal,g=AGN.Lib.Confirm,m=AGN.Lib.Template,v=AGN.Lib.AutoSave,e=".mailingContentNamespace",y=".l-mailing-content-entry",b="content_entry_",w=(this.addDomInitializer("mailing-content-editor-initializer",function(e){var e=f.get(e);o=e.dynTag,i=e.targetGroups,n=e.saveUrl,r=e.DynTagObject,s=e.showHTMLEditor,a=e.isEditableMailing,l=$("#content_area"),c=$("#ordered_area"),u=$("#target_groups"),d=$("#interest_groups"),h=$("#editable_area"),p=m.prepare("mailing-content-entry-template"),G(),P(),B(o),H(o.interestGroup),0<o.contentBlocks.length?(e=o.contentBlocks[0],M(e,!1)):N(),W(),V();v.initialize("mailing-components/"+o.mailingId+"/"+o.id,function(){var t=Array(),e=(S(),o.contentBlocks);return Array.prototype.forEach.call(e,function(e){t.push({targetGroupId:e.targetId,content:e.content,uniqueId:e.uniqueId})}),t},function(e){return e.length!==o.contentBlocks.length||!o.contentBlocks.every(function(t){return e.some(function(e){return e.targetGroupId===t.targetId&&e.content===t.content})})},function(e){var n;o.removeAll(),z(),Array.prototype.forEach.call(e,function(e){var t=c.find(".l-stub"),i=o.createNewContentBlock(),e=(i.uniqueId=e.uniqueId,i.content=e.content,i.targetId=e.targetGroupId,R(i.targetId)),e=p({name:e.targetName,id:b+i.uniqueId});t.before(e),I(),n=i}),n&&(M(n),E(A()))},0)}),this.addAction({click:"selectContentEntry"},function(){var e=$(this.el),e=F(e),e=o.getContentBlockById(e);M(e)}),this.addAction({click:"deleteContentEntry"},function(){this.event.stopPropagation();var e=$(this.el).parent(),t=F(e),i=0<(i=e.next(y)).length?i:e.prev(y);o.remove(t),e.remove(),0<o.contentBlocks.length?(t=F(i),e=o.getContentBlockById(t),M(e)):(M(),Y())}),this.addAction({click:"createEnlargedContentEditorModal"},function(){S();var e,i=D();i&&(e=o.getContentBlockById(i),g.createFromTemplate({content:e.content,selectedContentBlock:i,editorType:A(),isFullHtmlTags:"HTML-Version"==o.name,showHTMLEditor:s,isEditableMailing:a},"enlarged-content-editor-template").done(function(e){var t=o.changeContent(i,e.content);x(t.content),E(e.editorType)}))}),this.addAction({click:"addDynContent"},function(){N()}),this.addAction({click:"saveDynTag"},function(){var i;S(),w()&&(i=$(this.el),$.ajax({type:"POST",url:n,dataType:"json",contentType:"application/json",data:JSON.stringify(o),success:function(e){var t=g.get(i);AGN.Lib.JsonMessages(e.popups,!0),e.success&&(t.positive(new r(e.data)),L())}}))}),function(){if(o.contentBlocks.map(function(e){return e.targetId}).filter(function(e,t,i){return-1<i.indexOf(e,t+1)},[]).length)return AGN.Lib.Messages(t("Error"),t("mailing.validation.target_group_duplicated"),"alert"),!1;if(s&&o.contentBlocks.find(function(e){return(new DOMParser).parseFromString(e,"text/html").querySelector("script")}))return AGN.Lib.Messages(t("Error"),t("fields.error.illegal_script_element"),"alert"),!1;var e=o.contentBlocks.filter(function(e){return 0===e.targetId},[]);return!(e.length!==o.contentBlocks.length&&e.length&&e[0].index<o.contentBlocks.length)||(AGN.Lib.Messages(t("Error"),t("mailing.validation.all_recipients_not_last"),"alert"),!1)}),C=function(){var e=k(),t=e.prev(y);0!==t.length&&(e.insertBefore(t),o.moveUpContentBlock(F(e)))},_=function(){var e=k(),t=e.next(y);0!==t.length&&(e.insertAfter(t),o.moveDownContentBlock(F(e)))},P=function(){$(document).off("keydown"+e),$(document).on("keydown"+e,function(e){switch(e.stopPropagation(),e.which){case 27:L();break;case 38:C();break;case 40:_();break;default:return}})},G=function(){l.sortable({opacity:.4,delay:100,scroll:!0,scrollSensitivity:40,scrollSpeed:15,cursor:"move",items:y,helper:"clone",containment:c,appendTo:c,start:function(e,t){t.item.css("cursor","move")},stop:function(e,t){t.item.removeAttr("style");t=$(e.target).sortable("toArray").map(function(e){return e.replace(b,"")});o.changeOrder(t)}})},A=function(){return $("#tab-content-wysiwyg").is(":visible")?"wysiwyg":$("#contentEditor").is(":visible")?"html":""},E=function(e){!e||""===e||(e=$('[data-toggle-tab$="'+e+'"]'))&&e.trigger("click")},x=function(t,e){var i=$("#tab-content-wysiwyg"),n=$("#contentEditor");i.is(":visible")&&("ready"===(i=CKEDITOR.instances.content).status?i.setData(t):i.on("instanceReady",function(e){e.editor.setData(t)})),n.is(":visible")&&(i=!1===e?1:null,n=ace.edit("contentEditor"),$("body").hasClass("dark-theme")&&n.setTheme("ace/theme/idle_fingers"),n.setValue(t,i))},S=function(){var e,t,i,n=D();0<n&&(i=$("#tab-content-wysiwyg"),e=$("#contentEditor"),i.is(":visible")&&(t=CKEDITOR.instances.content.getData()),e.is(":visible")&&(i=ace.edit("contentEditor"),$("body").hasClass("dark-theme")&&i.setTheme("ace/theme/idle_fingers"),t=i.getValue()),void 0!==t&&o.changeContent(n,t))},B=function(e){e.contentBlocks.forEach(function(e){var t=c.find(".l-stub"),i=R(e.targetId),i=p({name:i.targetName,id:b+e.uniqueId});t.before(i)})},T=function(e){u.val(e).trigger("change")},W=function(){u.off("change"+e),u.on("change"+e,function(e){var e=parseInt($(e.target).val()),t=D();0<t&&(t=o.changeTargetGroup(t,e),j(t))})},H=function(e){d.val(e).trigger("change")},V=function(){d.off("change"+e),d.on("change"+e,function(e){e=$(e.target).val();o.changeInterestGroup(e)})},j=function(e){var t=O(e.uniqueId);0<t.length&&(e=R(e.targetId),t.find(".l-name").children().text(e.targetName))},k=function(){return c.find(y+".selected")},z=function(){c.find(y).remove()},D=function(){var e=k();if(0<e.length)return F(e)},U=function(e){c.children().removeClass("selected"),O(e,c).addClass("selected")},R=function(t){return i.filter(function(e){return e.id===t})[0]},O=function(e,t){return(t=t||$(document)).find("#"+b+e)},F=function(e){return parseInt(e.attr("id").replace(b,""))},L=function(){$(".modal").modal("toggle")},M=function(e,t){S(),void 0!==e?(U(e.uniqueId),x(e.content,t),T(e.targetId)):(x(""),T(0))},N=function(){var e=c.find(".l-stub"),t=o.createNewContentBlock(),i=R(t.targetId),i=p({name:i.targetName,id:b+t.uniqueId});e.before(i),I(),M(t)},Y=function(){h.is(":visible")&&h.hide()},I=function(){h.is(":hidden")&&h.show()}}),AGN.Lib.Controller.new("mailing-parameters",function(){var i=0;this.addDomInitializer("mailing-parameters",function(){var e=this.config;i=e.maxIndex}),this.addAction({click:"add-mailing-parameter"},function(){var e=$("#mailingParamsTable tr:last"),t=AGN.Lib.Template.text("mailing-param-row-new",{key:++i}),t=(e.after(t),e.find("#newMailingParameterBtn"));t.after('<a href="#" class="btn btn-regular btn-alert" data-action="remove-mailing-parameter" id="removeMailingParameterBtn"> <i class="icon icon-trash-o"></i> </a>'),t.remove()}),this.addAction({click:"remove-mailing-parameter"},function(){this.el.closest("tr").remove()})}),AGN.Lib.Controller.new("mailing-predelivery-new",function(){var i={aol:"aolonelinespam",yahoo:"yahoospam",gmailnew:"gmailnewspam",ol2003:"ol2003spam"};function e(e,t){e=e.closest(".list-group").find('input[type="checkbox"]:enabled');e.prop("checked",t),e.trigger("change")}this.addAction({change:"adjustSpamProvider"},function(){var e=$(this.el),t=i[e.attr("name")];t&&(t=$('[name="'+t+'"]'),e.prop("checked")?t.prop("disabled",!1):(t.prop("disabled",!0),t.prop("checked",!1)))}),this.addInitializer("readjustSpamProviders",function(){_.each(i,function(e,t){t=$("[name="+t+"]");0!==t.length&&(e=$('[name="'+e+'"]'),t.prop("checked")?e.prop("disabled",!1):(e.prop("disabled",!0),e.prop("checked",!1)))})}),this.addAction({click:"toggle-checkboxes-on"},function(){e($(this.el),!0)}),this.addAction({click:"toggle-checkboxes-off"},function(){e($(this.el),!1)})}),AGN.Lib.Controller.new("mailing-predelivery",function(){this.addAction({change:"adjustSpamProvider"},function(){var e="aol"==this.el.attr("name")?"aolonelinespam":this.el.attr("name")+"spam";this.el.prop("checked")?$('[name="'+e+'"]').prop("disabled",!1):($('[name="'+e+'"]').prop("disabled",!0),$('[name="'+e+'"]').prop("checked",!1))}),this.addAction({click:"toggleCheckboxesOn"},function(){this.el.parents(".list-group").find('input[type="checkbox"]').prop("checked",!0).trigger("change")}),this.addAction({click:"toggleCheckboxesOff"},function(){this.el.parents(".list-group").find('input[type="checkbox"]').prop("checked",!1).trigger("change")}),this.addInitializer("readjustSpamProviders",function(){_.each({aol:"aolonelinespam",yahoo:"yahoospam",gmailnew:"gmailnewspam",ol2003:"ol2003spam"},function(e,t){t=$("[name="+t+"]");0!=t.length&&(t.prop("checked")?$('[name="'+e+'"]').prop("disabled",!1):($('[name="'+e+'"]').prop("disabled",!0),$('[name="'+e+'"]').prop("checked",!1)))})})}),AGN.Lib.Controller.new("mailing-preview",function(){var n,o,r=AGN.Lib.Form,s=AGN.Lib.Storage,a=!1;function e(e){var t=$('[name="previewForm.modeTypeId"]');t.exists()&&(t.val(e),t.trigger("change"))}function t(e){var t=r.get($("#preview"));e&&"function"==typeof e&&e(t),t.setValue("previewForm.reload",!1),t.setResourceSelectorOnce("#preview"),t.submit()}function l(e){return!!e&&("previewForm.customerATID"==e||"previewForm.customerEmail"==e||"previewForm.modeTypeId"==e||"previewForm.targetGroupId"==e)}this.addDomInitializer("mailing-preview",function(e){var t=this.config,t=(n=t.RECIPIENT_MODE,o=t.TARGET_MODE,$("[data-stored-field]").each(function(){var e=$(this);l(e.prop("name"))||s.restoreChosenFields(e)}),s.get("toggle_tab#preview-targetModeContent")),i=(t&&!t.hidden&&($("[name='previewForm.modeTypeId']").val(o),s.saveChosenFields($("[name='previewForm.modeTypeId']"))),(t=s.get("toggle_tab#preview-recipientModeContent"))&&!t.hidden&&($("[name='previewForm.modeTypeId']").val(n),s.saveChosenFields($("[name='previewForm.modeTypeId']"))),s.restoreChosenFields($("[name='previewForm.modeTypeId']")),s.restoreChosenFields($("[name='previewForm.customerATID']")),s.restoreChosenFields($("[name='previewForm.customerEmail']")),s.restoreChosenFields($("[name='previewForm.targetGroupId']")),r.get($("#container-preview")));"false"==i.getValue("previewForm.reload")&&(i.setValue("previewForm.reload",!0),i.submit().done(function(){$("[data-stored-field]").on("change",function(){var e=$(this);s.saveChosenFields(e),a=a||l(e.prop("name"))}),i.initFields(),i.initValidator()}))}),this.addAction({click:"refresh-preview"},function(){a=!1,t()}),this.addAction({change:"change-stored-header-data"},function(){a&&(a=!1,t())}),this.addAction({change:"change-header-data"},function(){t()}),this.addAction({click:"toggle-tab-recipientMode"},function(){e(n)}),this.addAction({click:"toggle-tab-targetGroupMode"},function(){e(o)})}),AGN.Lib.Controller.new("mailing-priorities",function(){var o,r,s,a,l,c,u,d,n,t=AGN.Lib.Template,i=AGN.Lib.Helpers,h=AGN.Lib.DateFormat,p=2,f=0;function g(e){var t=[];return s.children(".l-mailing-entry").each(function(){var e=$(this).data("id");0<e&&t.push(e)}),e?t.join(e):t}function m(e){var t,i=g(";"),n=r.val();null==u&&null==d||e?(u=i,0<(d=n)?o.prop("disabled",!0):(t=0,s.children(".l-mailing-entry").each(function(){0<$(this).data("id")&&t++}),e=t,r.val(e),o.prop("disabled",!e))):o.prop("disabled",i==u&&n==d)}function v(e,t){return h.toArray(h.parse(e),t)}var y=function(e){var i=[],n=_.clone(e);return _.keys(c).forEach(function(e){c[e].forEach(function(e){var t;e.mailingType!=p||n.includes(e.id)||(t=_.clone(e),n.push(t.id),i.push(e))})}),i};function b(e){t=(e=(e=c[e=e]||[]).filter(function(e){return e.mailingType!=p||e.mailingType==p&&0<e.priority})).map(function(e){return e.id});var t,e=_.union(e,y(t),"id").sort(function(e,t){return e.priority>t.priority?1:-1});$("#datebased-container, #normal-container, #ordered-area").find(".l-mailing-entry").remove(),(t=e)&&t.length&&t.forEach(function(e){var t=e,i="normal-mailing-icon",t=(t.mailingType==p&&(i="datebase-mailing-icon"),t.iconClass=i,n(e)),i=e.priority,e=e.mailingType;i?s.find(".l-stub").before(t):(e==p&&a.find(".l-stub").before(t),e==f&&l.find(".l-stub").before(t))}),m(!0)}function w(e,t){t?e.parent().addClass("highlight"):e.parent().removeClass("highlight")}function C(e){var t,i,n,o,r=[!0],s=v(E(e));return(s?e.filter(function(e){return e<s}):e).forEach(function(e){e=v(e);e&&r.push(e)}),s&&r.push({from:s,to:(e=s,t=50,o=_.clone(e),t&&(o[0]=e[0]+t),i&&(o[1]=e[1]+i),n&&(o[2]=e[2]+n),o)}),r}function A(e){var t=$("#date-picker");(e=_.keys(e).sort()).length?(e=C(e),t.pickadate(_.merge({editable:!0,disable:e,klass:{input:"picker__input js-datepicker",holder:"datepicker__holder picker__holder datepicker__holder-right"}},i.objFromString(t.data("datepicker-options")))),(e=t.pickadate("picker")).get("select")||e.set("select",v(_.reduce(_.keys(c),function(e,t){return e<t?e:t})))):t.pickadate({editable:!1}),t.trigger("change")}var E=function(e){for(var t in e)if(c[e[t]].find(function(e){return e.mailingType==p}))return e[t];return""};this.addDomInitializer("mailing-priorities",function(){e=this.config,o=$("#save-button"),r=$("#priorityCount"),s=$("#ordered-area"),a=$("#datebased-container"),l=$("#normal-container"),c=e.mailingsMap,n=t.prepare("draggable-mailing-entry");var e=$(".l-content-area");$(".priority-container").sortable({opacity:.4,connectWith:".priority-container",items:".l-mailing-entry",helper:"clone",containment:e,appendTo:e,update:function(){var i,n;this.id===s.attr("id")&&(i=1,n=10,s.children(".l-mailing-entry").each(function(){var e=$(this),t=0;e.data("type")==p?(i=t=n,n+=10):n<(t=i)&&(n=10*Math.round(i/10)),i++,e.find(".l-badge .badge").text(t)}),m())},out:function(){w($(this),!1)},over:function(e,t){w($(e.target),!1),w($(this),!0)},start:function(){w($(this),!0)},stop:function(){w($(this),!1)},receive:function(e,t){var i,n,o=t.item.data("type"),e=e.target.id;o=o,i=(e=e)===a.attr("id"),n=e===l.attr("id"),e===s.attr("id")||i&&o==p||n&&o==f||t.sender.sortable("cancel")}}),A(c)}),this.addAction({click:"back"},function(){window.history.back()}),this.addAction({click:"save"},function(){var e=AGN.Lib.Form.get(this.el);e.setValueOnce("prioritizedIds",g()),e.submit()}),this.addAction({change:"priorityCount"},function(){m()}),this.addAction({change:"change-date"},function(){var e=this.el.pickadate("picker").get("select");e?b((e=[e.year,e.month,e.date],i.pad(e[0],4)+"-"+i.pad(parseInt(e[1])+1,2)+"-"+i.pad(e[2],2))):b()})}),AGN.Lib.Controller.new("reference-content-settings",function(){var i,o,e=AGN.Lib.Template,n=!1,r=[],s=[];function a(e){$("#tile-mailingReferenceContent").toggleClass("hidden",!e)}function l(){var e=$("#referenceTableSelect").children("option:selected");$("#keyColumnText").val(e.exists()?e.data("key-column"):"")}function c(e){t=r.length+1;var t=$(i({name:"Item"+t,value:e}));$("#reference-content-items").append(t),r.push(t)}this.addDomInitializer("reference-content-settings",function(){o=$("#mailingBaseForm"),l(),i=e.prepare("mailing-reference-content-item"),n=this.config.isAvailable,r=[],n?($.isArray(this.config.items)&&(this.config.items.forEach(function(e){c(e)}),s=this.config.items.slice()),a(this.config.isEnabled)):a(!1),o.dirty("setAsClean"),o.dirty("refreshEvents")}),this.addAction({change:"enable-reference-content"},function(){n?a(this.el.prop("checked")):(AGN.Lib.Messages(t("defaults.warning"),t("mailing.default.item_referencetable_warning"),"warning"),$(this.el).prop("checked",!1).trigger("change.dirty"))}),this.addAction({change:"select-reference-table"},function(){l()}),this.addAction({click:"add-reference-content-item"},function(){c(""),o.dirty("setAsDirty")}),this.addAction({click:"delete-reference-content-item"},function(){for(var t=this.el.closest(".form-group")[0],e=r.findIndex(function(e){return e[0]==t});e+1<r.length;){var i=r[e].find("input"),n=r[e+1].find("input");i.val(n.val()),e++}r[e].remove(),r.pop(),s.length===r.length&&s.every(function(e){return r.includes(e)})||o.dirty("setAsDirty")})}),AGN.Lib.Controller.new("mailing-send",function(){var r=AGN.Lib.Form,e=AGN.Lib.Modal,i=AGN.Lib.Confirm,n=AGN.Lib.Page,o=AGN.Lib.Template,s=function(){$("#test-send-controls-group #adminSendButton").addClass("disabled"),$("#test-send-controls-group #testSendButton").addClass("disabled")},a=function(){$("#test-send-controls-group").hide()},l=function(){$("#test-send-controls-group").show()},c=function(){$("#test-send-status-block").hide()},u=function(){$("#test-send-status-block").show()};function d(e){var t=e.data("base-url"),i=r.get(e);i.jqxhr().done(function(e){i.updateHtml(e);e=window.history;e.replaceState(e.state||{},document.title,t)})}function h(e){e&&(e=-1==e.val(),$("#test-recipients-table").toggleClass("hidden",!e),$("#adminSendButton").toggleClass("hidden",e))}this.addDomInitializer("test-run-recipients-select",function(){h(this.el)}),this.addAction({click:"resume-sending"},function(){var t=this.el,e=t.data("link");$.post(e).done(function(e){n.render(e),t.closest(".form-group").remove()})}),this.addAction({click:"configure-delivery-mailing-size-warning"},function(){var e=this.el;i.createFromTemplate({},"warning-mailing-size-modal").done(function(){e.prop("disabled",!0),n.reload(e.data("url"))})}),this.addAction({click:"configure-delivery-mailing-size-error"},function(){e.createFromTemplate({},"error-mailing-size-modal")}),this.addAction({click:"configure-delivery"},function(){this.el.prop("disabled",!0),n.reload(this.el.data("url"),!0),this.el.prop("disabled",!1)}),this.addAction({click:"send-admin"},function(){var e=this.el.data("action-value"),t=this.el.data("base-url"),i=r.get(this.el);s(),$.post(t,{action:e,mailingID:i.getValue("mailingID")}).done(function(e){i.updateHtml(e)})}),this.addAction({click:"send-test"},function(){var e=this.el.data("action-value"),i=this.el.data("base-url"),n=r.get(this.el);if(-1==$("#adminTargetGroupSelect").val()){var o=!0;if($('input[name="mailingTestRecipients"]').each(function(){var e=$(this).val();e&&e.trim()&&(o=!1)}),o)return void AGN.Lib.Messages(t("defaults.error"),t("error.enterEmailAddresses"),"alert")}s(),n.setValue("action",e),$.post(i,$("#testDeliveryForm").serialize()).done(function(e){n.updateHtml(e)})}),this.addAction({click:"send-world"},function(){d(this.el)}),this.addAction({click:"cancel-mailing"},function(){d(this.el)}),this.addAction({click:"resume-mailing"},function(){d(this.el)}),this.addAction({click:"check-links"},function(){var e=this.el.data("action-value"),t=this.el.data("base-url"),i=r.get(this.el);i.setValue("action",e),s(),$.post(t,$("#testDeliveryForm").serialize()).done(function(e){i.updateHtml(e)})}),this.addAction({click:"recipients-row-remove"},function(){var e=this.el.closest("tr"),t=$('[name="statusmailRecipients"]');e.remove(),e=$('[name^="statusmailRecipient_"]'),e=_.map(e,function(e){return $(e).val()}),t.val(e.join(" ")),r.get(this.el).submit()}),this.addAction({click:"recipients-row-add",keydown:"recipients-row-field"},function(){var e,t,i;"keydown"==this.event.type&&13!=this.event.keyCode||(e=$("#newStatusMail"),i=$('[name^="statusmailRecipient_"]'),t=$('[name="statusmailRecipients"]'),(i=_.map(i,function(e){return $(e).val()})).push(e.val()),t.val(i.join(" ")),r.get(this.el).submit().done(function(){$("#newStatusMail").trigger("focus")}))}),this.addInitializer("statusmailRecipients",function(e){var t=$('[name="statusmailRecipients"]'),i=$("#statusEmailContainer");$(".js-recipients-row").remove(),""!=t.val()&&(t=(t=t.val()||"").split(" "),_.each(t,function(e){""!=e&&i.prepend(o.text("recipients-row",{email:e}))}))}),this.addDomInitializer("transmission-status",function(){this.config.isRunning?(a(),u()):(l(),c())}),this.addAction({click:"add-test-recipient",enterdown:"new-test-recipient"},function(){this.event.preventDefault();var e=this.el.closest("tr"),t=this.el.is("input")?this.el:e.find("input"),i=o.dom("test-recipient-row",{value:t.val()||""});e.before(i),t.val(""),AGN.runAll(i),t.focus()}),this.addAction({enterdown:"edit-test-recipient"},function(){this.event.preventDefault()}),this.addAction({click:"remove-test-recipient"},function(){this.el.closest("tr").remove()}),this.addAction({change:"admin-target-group"},function(){h(this.el)});var p,f;function g(e){AGN.Lib.Form.get(e).initFields()}function m(e,i){var n=e.prop("checked");function o(){e.prop("checked",!n),AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert")}e.prop("disabled",!0);var r={};r[i]=e.is(":checked"),$.ajax({type:"POST",url:e.data("url"),data:r}).done(function(e){e&&e.success?AGN.Lib.Messages(t("defaults.success"),t("defaults.saved"),"success"):o()}).fail(o).always(function(){e.prop("disabled",!1)})}this.addAction({click:"save-security-settings"},function(){var e=AGN.Lib.Form.get(this.el),t=e.getValue("autoImportId");e.submit().done(function(e){!0===e.success?(AGN.Lib.JsonMessages(e.popups),$("#close-security-settings").click(),p-=6e4):AGN.Lib.JsonMessages(e.popups,!0),$("#activateMailingForm input[name='autoImportId']").val(t)})}),this.addAction({click:"load-security-settings"},function(){var e=new Date;!p||6e4<=e-p?(e=$(this.el).attr("href"))&&$.get(e).done(function(e){n.render(e),f=e,p=new Date,g($("#security-settings-form"))}):(n.render(f),g($("#security-settings-form")))}),this.addAction({change:"prioritization-toggle"},function(){m($(this.el),"isPrioritizationDisallowed")}),this.addAction({change:"sendStatusOnErrorOnly-toggle"},function(){m($(this.el),"statusOnErrorEnabled")})}),AGN.Lib.Controller.new("mailing-styles",function(){function e(){var e=$("form#mailingGridForm"),n=$("form#mailingPreviewForm"),e=e.find('input[name^="styles."]');$.each(e,function(e,t){var t=$(t),i="styles["+t.attr("name").split(".")[1]+"]";n.find('input[name="'+i+'"]').val(t.val())}),n.submit()}this.addAction({submission:"updatePreview"},function(){e()}),this.addAction({click:"updateMailingPreview"},function(){e()}),this.addAction({click:"saveMailingStyles"},function(){$("form#mailingGridForm").submit()})}),AGN.Lib.Controller.new("mailing-view-base",function(){AGN.Lib.Form;var o,i,n=0,e=!1,r=[],s=0,a=!1,l=!1,c={};function u(e){e=e.dirty("showDirtyFields");return 0<e.length&&0===e.filter(function(e,t){t=$(t);return!(!0===t.prop("readonly")||t.is(":disabled")||"hidden"===t.prop("type"))}).length}function d(){var e=$("#lightWeightMailingList").val(),e=$("#parentmailing-"+e+"-mailinglist").attr("data-mailing-list-id");i.select2("val",e),i.select2("readonly",!0)}this.addDomInitializer("mailing-view-base",function(){var e;o=this.config,0<n?(e=$("#gt-wrapper")).exists()?e.animate({scrollTop:n},50):$(document).scrollTop(n+50):(e=$("#mailingBaseForm").find('[name="shortname"]'),$(e).exists()&&$(e).focus()),n=0,r=$("#targetGroupIds").val()||[],$("#targetModeCheck").closest(".form-group").toggle(1<r.length),(i=$("#settingsGeneralMailingList")).select2("readonly",!1),0<s&&(s=i.select2("val",s)),o.selectedRemovedMailinglistId&&AGN.Lib.Form.get($("#mailingBaseForm")).showFieldError("mailinglistID","Mailing list removed",!0),m(o.mailingType)}),this.addDomInitializer("mailing-view-base-form",function(){var e,i=$(this.el);null===(e=i).dirty("refreshEvents")&&e.dirty({preventLeaving:!0,leavingMessage:t("grid.layout.leaveQuestion"),onDirty:function(){u(e)&&!l&&e.dirty("setAsClean")}}),a&&e.dirty("restoreData",c),a&&(!u(e)||l)||(e.dirty("setAsClean"),c=e.dirty("backupData")),a=l=!1,m(o.mailingType)}),this.addAction({change:"selectTargetGroups"},function(){var e=this.el.val()||[],t=$("#targetModeCheck"),i=t.closest(".form-group");1<e.length&&r.length<=1&&t.prop("checked",!0),i.toggle(1<e.length),r=e}),this.addAction({click:"calculateRecipients"},function(){var i,n=$("#calculatedRecipientsBadge");o&&$.ajax(o.urls.MAILINGBASE,{type:"POST",traditional:!0,data:$.extend((i={},["#settingsGeneralMailingList","#settingsTargetgroupsListSplit","#settingsTargetgroupsListSplitPart","#lightWeightMailingList","#assignTargetGroups","#targetGroupIds","#altgIds","#followUpType"].forEach(function(e){var t,e=$(e);e.exists()&&!e.prop("disabled")&&(t=e.prop("name"),e=e.val(),t&&(i[t]=e))}),i),{action:o.actions.ACTION_RECIPIENTS_CALCULATE,mailingID:o.mailingId,changeMailing:e,targetMode:$("#targetModeCheck").prop("checked")?o.TARGET_MODE_AND:o.TARGET_MODE_OR})}).always(function(e){e&&!0===e.success?n.text(e.count):(n.text("?"),AGN.Lib.Messages(t("defaults.error"),t("defaults.error"),"alert"))})}),this.addAction({change:"change-mailing-settings"},function(){e=!0}),this.addAction({change:"set-parent-mail-mailinglist"},function(){d()}),this.addAction({change:"scroll-to"},function(){e=this.el;var e,t=((t=e.closest(".tile")).exists()?t:e).position().top;n=Math.round(t)}),this.addAction({change:"change-general-mailing-type"},function(){var e=this.el.val();i.select2("readonly",!1),0<s&&i.select2("val",s),m(e)}),this.addAction({change:"save-mailing-list-id"},function(){var e=$("#settingsGeneralMailType").val();h(e)||(s=this.el.select2("val")),o.selectedRemovedMailinglistId&&(i.find('option[value="'+o.selectedRemovedMailinglistId+'"]').remove(),AGN.Lib.Form.get($(this.el)).cleanFieldError("mailinglistID"))});var h=function(e){return o.TYPE_FOLLOWUP==e},p=function(e){return o.TYPE_INTERVAL==e},f=function(e){return o.TYPE_ACTIONBASED==e},g=function(e){return o.TYPE_DATEBASED==e};function m(e){var t=!1,t=(o.followUpAllowed&&(h(e)&&(d(),t=!0),v(t,"#followUpControls")),v(p(e),"#mailingIntervalContainer"),v(g(e),"#mailing-bcc-recipients"),!0);f(e)&&(t=o.campaignEnableTargetGroups),v(t=g(e)?!o.isWorkflowDriven:t,"#mailingTargets")}function v(e,t){t=$(t);t&&(e?(t.removeClass("hidden"),t.show()):t.hide())}this.addAction({change:"change-media"},function(){var e=$(this.el),t=AGN.Lib.Form.get(e),i=AGN.Lib.Form.getWrapper(e);c=i.dirty("backupData"),t.setValueOnce(e.prop("name"),e.is(":checked")),t.setResourceSelectorOnce("#mailingBaseForm"),a=!0,t.submit("action",o.actions.ACTION_VIEW_WITHOUT_LOAD).fail(function(){a=!1})}),this.addAction({click:"prioritise-media"},function(){var e=$(this.el),t=AGN.Lib.Form.get(e),i=AGN.Lib.Form.getWrapper(e),i=(c=i.dirty("backupData"),_.extend({},AGN.Lib.Helpers.objFromString(e.data("config"))));t.setValueOnce("activeMedia",i.activeMedia),t.setResourceSelectorOnce("#mailingBaseForm"),a=l=!0,t.submit("action",i.action).fail(function(){a=!1})}),window.onbeforeunload=function(){!0==!$("#mailingBaseForm").dirty("isDirty")&&AGN.Lib.Loader.show()},this.addAction({click:"save"},function(){var e=$("#mailingBaseForm"),t=AGN.Lib.Form.get(e);t.setValueOnce("mailingChanged",!0===e.dirty("isDirty")),t.submit()})}),AGN.Lib.Controller.new("mailing-wizard",function(){this.addAction({change:"selectTargetGroups"},function(){var e=$(this.el).val()||[],t=$("#targetModeCheck"),i=t.closest(".form-group");t.prop("checked",1<e.length),i.toggle(1<e.length)})}),AGN.Lib.Controller.new("mailinglist-list",function(){var r=null;this.addDomInitializer("mailinglist-list",function(){r=this.config}),this.addAction({click:"bulk-delete"},function(){var e,i,n,o=function(){var e=$(".js-data-table-body");if(e.exists()){e=e.data("_table");if(e&&e.api)return e.api}return null}();o&&(i=(e=o.getSelectedRows()).map(function(e){return e.id}),i=i,n=$.Deferred(),i&&i.length?(i=$.ajax(r.urls.MAILINGLIST_BULK_DELETE,{method:"POST",traditional:!0,data:{bulkIds:i}}).fail(function(){n.reject()}),AGN.Lib.Confirm.request(i).done(function(e){AGN.Lib.Page.render(e)}).then(n.resolve,n.reject)):(n.reject(),AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")),n.promise().done(function(){o.updateRowData({remove:e})}))})}),AGN.Lib.Controller.new("manage-table-import",function(){var o="#new-default-column-format",r="#new-default-column-value",s="#new-default-column-encrypted",a=".manage-tables-mapping-row",l=AGN.Lib.Template,c=null;this.addDomInitializer("manage-table-import",function(){c=this.config}),this.addAction({click:"add-default-column"},function(){var e=$(a).length,t=$(o).val(),i=$(r).val(),n=!!$(s).prop("checked"),e=("value"!==$("#new-default-column-type").val()||i.startsWith("'")&&i.endsWith("'")||(i="'"+i+"'"),l.dom("manage-tables-import-row",{index:e,targetColumns:c.importColumns,format:t,value:i,encrypted:n}));$("#manage-tables-tbody").append(e),$(o).val(""),$(r).val(""),$(s).prop("checked",!1)}),this.addAction({click:"delete-mapping-row"},function(){var i,e=this.el,t=e.parents(a),e=e.parents("tbody");t.remove(),t=e.find(a),i=0,t.each(function(){$(this).find('[name*="mappings["]').each(function(){var e=$(this),t=(t=e.attr("name")).replace(/mappings\[\d+]/g,"mappings["+i+"]");e.attr("name",t)}),i++})})}),AGN.Lib.Controller.new("manage-tables-viewfield",function(){var t="true";this.addAction({change:"typeFieldChangeAction"},function(){var e=$("#nullable");"DATE"===this.el.val()||"DATETIME"===this.el.val()?(t=e.val(),e.val("true")):e.val(t)})}),AGN.Lib.Controller.new("mediapool-element-category-select",function(){var i=AGN.Lib.Confirm,t=AGN.Lib.Helpers,n=AGN.Lib.Select;this.addDomInitializer("mediapool-element-category-select",function(e){e=t.objFromString(e.data("config"));e&&e.categoryId&&n.get($("#mediapool-file-category-id")).selectValueOrSelectFirst(e.categoryId)}),this.addAction({change:"selectCategory"},function(){var e=this.el.parents(".form-group");e.removeClass("has-alert has-feedback js-form-error"),e.find(".js-form-error-msg").addClass("hidden")}),this.addAction({click:"applyCategory"},function(){var e=$("#mediapool-file-category-id"),t=parseInt(e.val());0<t?i.get(this.el).positive({categoryId:t}):((t=e.parents(".form-group")).addClass("has-alert has-feedback js-form-error"),t.find(".js-form-error-msg").removeClass("hidden"))})}),AGN.Lib.Controller.new("mediapool-overview",function(){var i,r,n,s=AGN.Lib.Helpers,o=AGN.Lib.Template,a=AGN.Lib.Confirm,l=AGN.Lib.Form,c=AGN.Lib.Page;function u(e,t){e.all("input, textarea, select, button").prop("disabled",!t)}function d(){$("#duplication-update-fields:not(.hidden)").addClass("hidden")}function h(e,t){$.ajax(i.urls.VERIFY_IMAGE_URL,{data:JSON.stringify({imageName:e}),contentType:"application/json",async:!1,type:"POST",success:t})}this.addDomInitializer("mediapool-overview",function(){r={},i=this.config,this.config.imagesList.forEach(function(e){r[e.id]=e})}),this.addAction({click:"replace-image"},function(){var e=this.el.data("image-id");(n=r[e])&&(e=$("#replacement-image"),s.clearFormField(e),e.trigger("click"))}),this.addAction({click:"toggle-overwrite-existing-data"},function(){var e=this.el,t=$(e).is(":checked"),e=$(e).closest("table").find('[data-action="change-overwriting-state"]');e.prop("checked",t),e.trigger("change")}),this.addAction({change:"change-overwriting-state"},function(){var e=$(this.el),t=e.is(":checked"),i="",n="",e=parseInt(e.prop("id").replace("overwrite-","")),o=$('[name="images['+e+'].id"]').val(),o=(t&&r[o]&&(i=(t=r[o]).title,n=t.categoryId),$("#image-title-"+e).val(i),$("#image-category-id"+e)),t=(o.data("select2")&&o.select2("val",n),$('[id^="duplication-error-"]:not([hidden])').find('[id^="overwrite-"]:not(:checked)'));$("#updateAllData").prop("checked",0===t.length)}),this.addAction({change:"replacement-image"},function(){d();var e,i,t=this.el.prop("files");t&&t.length&&n&&(e=new FileReader,i=t[0],e.onload=function(e){var t;n&&(e={image:n,file:i,preview:e.target.result},(t=o.dom("modal-replace-image",e)).find("form").data("selected-file",e.file),e.preview&&t.find("#replacement-preview").prop("src",e.preview),a.create(t))},e.readAsDataURL(i))}),this.addAction({"reset-upload":"mediapool-upload-image"},function(){d()}),this.addAction({"upload:add":"mediapool-upload-image"},function(){var t=this.data,i=!$("#duplication-update-fields").hasClass("hidden");h(t.file.name,function(e){t.file.id=e.data,i=!!e.data||i}),i&&($("#updateAllData").prop("checked",!1),$("#duplication-update-fields").removeClass("hidden"))}),this.addAction({submission:"submit-image-save"},function(){var e=this.el,e=l.get(e),t=e._dataNextRequest,i=(this.event.preventDefault(),1),n=!0;for(key in t){var o=$("[name='images["+i+"].fileName']").val(),r=$("[id='overwrite-"+i+"']").is(":checked");h(o,function(e){e.data&&!r?(n=!1,$("[name='images["+i+"].id']").val(e.data),$("[id='duplication-error-"+i+"']").removeAttr("hidden")):r||$("[id='duplication-error-"+i+"']").hide()}),i++}n&&e.submit()}),this.addAction({submission:"submit-image-replace"},function(){var e=this.el,t=l.get(e),i=new FormData;$.each(t.data(),function(e,t){i.append(e,t)}),i.append("file",this.el.data("selected-file")),u(e,!1),$.ajax(t.getAction(),{type:"POST",dataType:"html",enctype:"multipart/form-data",processData:!1,contentType:!1,data:i}).always(function(){u(e,!0)}).done(function(e){c.render(e,!1)})}),this.addAction({click:"change-category-bulk"},function(){var i=this.el.data("form-url"),n=l.get(this.el),e=n.data();e&&e.bulkId&&e.bulkId.length?a.create(o.text("modal-element-category-select",{categoryId:null})).done(function(e){e&&e.categoryId&&(n.setActionOnce(i),n.setValueOnce("categoryId",e.categoryId),n.submit())}):AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")}),this.addAction({change:"change-mobile-base"},function(){var e=$(this.el),t=s.objFromString(e.data("config")),i=$("#file-name-"+t.count),n=t.initialValue,e=AGN.Lib.Select.get(e).getSelectedValue(),o=e&&0<e.length,t=o?t.mobilePrefix+e:n;i.val(t),i.prop("readonly",o)})}),AGN.Lib.Controller.new("news-editor",function(){var n=AGN.Lib.Template,o=["de","en"],r=0;function i(e,t,i){""!=e&&(e=n.dom("news-content-template-row",{lang:e,index:r,title:t,content:i}),0==$("#news-content-editor > .l-news-content-block").length&&$("#news-content-editor").append('<div class="tile-separator"></div>'),e.appendTo("#news-content-editor"),AGN.runAll(e),l(),r++)}function s(){var e=c(),t=$("#news-content-editor > .l-news-content-block").last().find("input[name='index']").val();o.length==e.length?$("#add-news-"+t).hide():$("#add-news-"+t).show()}function a(){var e=$("#news-content-editor > .l-news-content-block"),t=($("button[id^='add-news-']").hide(),$(e).first().find("input[name='index']").val());1==e.length?$("#delete-news-"+t).hide():$("#delete-news-"+t).show()}function l(){i=[],n=c(),$.each(o,function(e,t){-1==$.inArray(t,n)&&i.push(t)});var i,n,e=i;$("#news-content-editor > .l-news-content-block").find("select.news-language").each(function(){$("option",this).not(":selected").remove();var i=$(this);$.each(e,function(e,t){$(i).append($("<option>",{value:t,text:t}))})})}function c(){return $("#news-content-editor > .l-news-content-block").find("select.news-language").find("option:selected").map(function(){return $(this).val()}).toArray()}function u(){var i=c(),n="";return 0==i.length?n=o[0]:$.each(o,function(e,t){if(i.indexOf(t)<0)return n=t,!1}),n}this.addDomInitializer("news-editor-init",function(){var e=$('input[name="newsId"]').val(),t=$(".existent-news");t&&0<t.length&&0==e?$(t).each(function(){i($(this).find(".existent-news-language").val(),$(this).find(".existent-news-title").val(),$(this).find(".existent-news-content").val()),a(),s(),$(this).remove()}):0==e&&(i(u(),"",""),a(),s())}),this.addAction({click:"addNewsContent"},function(){i(u(),"",""),a(),s()}),this.addAction({click:"removeNewsContent"},function(){var e=$(this.el).closest(".l-news-content-block");$(e).remove(),a(),s(),l()}),this.addAction({change:"changeLanguage"},function(){l()})}),AGN.Lib.Controller.new("notification-global-stat",function(){function e(e,t){$("#month-progress-stat").hide(),$("#daterange-progress-stat").hide(),e&&$("#month-progress-stat").show(),t&&$("#daterange-progress-stat").show()}function i(e,t,i){$("#weekProgressStat").removeClass("active"),$("#monthProgressStat").removeClass("active"),$("#dateRangeProgressStat").removeClass("active"),e&&$("#weekProgressStat").addClass("active"),t&&$("#monthProgressStat").addClass("active"),i&&$("#dateRangeProgressStat").addClass("active")}function n(e,t,i){$("#notificationGlobalStatusStat").hide(),$("#notificationGlobalBrowserStat").hide(),$("#notificationGlobalProgressStat").hide(),e&&(AGN.Lib.DomInitializer.try("notification-global-progress-stat"),$("#notificationGlobalProgressStat").show(),$("#dateSelectMode").show(),$("#dateModeControls").show()),t&&(AGN.Lib.DomInitializer.try("notification-global-status-stat"),$("#notificationGlobalStatusStat").show(),$("#dateSelectMode").hide(),$("#dateModeControls").hide()),i&&(AGN.Lib.DomInitializer.try("notification-global-browser-stat"),$("#notificationGlobalBrowserStat").show(),$("#dateSelectMode").hide(),$("#dateModeControls").hide())}function o(){$("#notifications-container").remove(),!function(){if("active"==$("#dateRangeProgressStat").attr("class")){var e=$("#startDay").val(),t=$("#endDay").val();if(r(e)||r(t))return void s();if(new Date(e).getTime()>new Date(t).getTime())return void s()}return 1}()||"active"!=$("#monthProgressStat").attr("class")&&"active"!=$("#dateRangeProgressStat").attr("class")||AGN.Lib.DomInitializer.try("notification-global-progress-stat")}function r(e){return void 0===e||""==e}function s(){AGN.Lib.Messages(t("defaults.error"),t("error.statistic.period_format"),"alert"),setTimeout(function(){var e=$("#notifications-container");e.fadeOut("slow",function(){e.remove()})},7e3)}this.addAction({change:"selectReportType"},function(){var e=$("#globalStatInfo");switch(this.el.val()){case"STATUS":n(!1,!0,!1),e.show();break;case"BROWSER":n(!1,!1,!0),e.hide();break;case"PROGRESS":n(!0,!1,!1),e.show()}}),this.addAction({click:"close"},function(){var e=$("#notifications-container");e.fadeOut("slow",function(){e.remove()})}),this.addAction({click:"refreshStat"},function(){o()}),this.addAction({change:"select-month"},function(){o()}),this.addAction({change:"select-year"},function(){o()}),this.addAction({click:"weekProgressStat"},function(){$("#selectMode").val("WEEK"),e(!1,!1),o(),i(!0,!1,!1)}),this.addAction({click:"monthProgressStat"},function(){$("#selectMode").val("MONTH"),e(!0,!1),$("#refreshStat").show(),i(!1,!0,!1),o()}),this.addAction({click:"dateRangeProgressStat"},function(){$("#selectMode").val("RANGE"),e(!1,!0),$("#refreshStat").show(),i(!1,!1,!0),o()}),this.addAction({change:"end-date-change"},function(){var e=$("#startDay").val(),t=$("#endDay").val();$("#startDay").pickadate("picker").set("max",t),$("#endDay").pickadate("picker").set("min",e),o()}),this.addAction({change:"start-date-change"},function(){var e=$("#startDay").val(),t=$("#endDay").val();$("#startDay").pickadate("picker").set("max",t),$("#endDay").pickadate("picker").set("min",e),o()})}),AGN.Lib.Controller.new("notification-schedule",function(){var t,n,i,o;function r(){var e=t.pickadate("get","select");return e&&new Date(e.obj)}function s(){var e=n.pickadate("picker"),t=r();e.off("set"),t?(l(t,t=u(t)),a(t),c(i.val())):(l(!0,!1),a(null),c(null)),e.on("set",d)}function e(){var e=r();e?l(e,u(e)):l(!0,!1)}function a(e){var t=n.pickadate("picker");e?t.set("select",e):t.clear()}function l(e,t){var i=n.pickadate("picker");i.set("min",e),i.set("max",t),i.set("select",i.get("select"))}function c(e){o.val(e)}function u(e){e=new Date(e);return e.setDate(e.getDate()+28),e}function d(){n.removeClass("enableable"),o.removeClass("enableable"),n.pickadate("off","set"),o.unbind("change"),t.pickadate("off","set"),t.pickadate("picker").on("set",e),i.unbind("change"),i.on("change",e)}this.addDomInitializer("notification-schedule",function(e){t=e.find("#startDate"),n=e.find("#endDate"),i=e.find("#startTime"),o=e.find("#endTime"),t.pickadate("picker").on("set",s),i.on("change",s),n.pickadate("picker").on("set",d),o.on("change",d)})}),AGN.Lib.Controller.new("notification-settings",function(){this.addAction({"editor:create":"content","editor:change":"content"},function(){var e=this.el.val().length;$("#contentSize").text(t("fields.content.charactersEntered",e))})}),AGN.Lib.Controller.new("preview-header-new",function(){var e=this;this.addInitializer("set-preview-customer-options",function(){var e="true"==$('[name="previewForm.useCustomerEmail"]:checked').val();$('[name="previewForm.customerEmail"]').prop("disabled",!e),$("#btnCustomEmailRefresh").prop("disabled",!e),$('select[name="previewForm.customerID"]').prop("disabled",e)}),this.addAction({change:"change-preview-customer-options"},function(){e.runInitializer("set-preview-customer-options")})}),AGN.Lib.Controller.new("profile-field-view",function(){var i=!1,n=!1,o=null;this.addDomInitializer("profile-field-view",function(e){e=e.json();i=e.isHistorizationFeatureEnabled,n=e.isHistorizationEnabled,o=e.dependentWorkflowName,$.i18n.load(e.translations)}),this.addAction({change:"toggleHistorization"},function(){i&&n&&o&&(this.el.is(":checked")||AGN.Lib.Messages(t("defaults.warning"),t("warning.profilefield.inuse",o),"warning"))})}),AGN.Lib.Controller.new("recipient-list",function(){var e=AGN.Lib.Action,i=AGN.Lib.Modal,n=AGN.Lib.Form,o=AGN.Lib.Messages,r=AGN.Lib.Storage,s={},a=!1;function l(e,t){var i=$("#basicSearch"),n=$("#advancedSearch");i.on("click",function(){c(),f(!1),p(!1)}),n.on("click",function(){u(),f(!0),p(!0)}),i.hasClass("tab active")&&(c(),p(!1)),n.hasClass("tab active")&&(u(),p(!0)),t?(i=$("#recipientForm").find(".table-controls .well")).first().html(i.last().html()):(a=!1,(n=e)&&n.initialRules&&(s=$.extend({},JSON.parse(n.initialRules))),(n=$("#targetgroup-querybuilder")).on("change",function(){$("#target-group-save-button").toggleClass("hidden",!b())}),n.on("afterClear.queryBuilder",function(){$("#target-group-save-button").toggleClass("hidden",!0)}),n.on("afterReset.queryBuilder afterDeleteGroup.queryBuilder afterDeleteRule.queryBuilder afterSetRules.queryBuilder afterUpdateRuleFilter.queryBuilder",function(e){$("#target-group-save-button").toggleClass("hidden",!b())}))}function c(){$("input[name=advancedSearch]").val(!1),d()}function u(){$("input[name=advancedSearch]").val(!0)}function d(){var e=y();e&&(e.clearErrors(),e.setRules(s),m())}function h(e){$("#search_recipient_type").prop("disabled",e),$("#search_recipient_state").prop("disabled",e),$("#search_recipient_type_advanced").prop("disabled",e),$("#search_recipient_state_advanced").prop("disabled",e)}function p(e){var t=e?"":"_advanced";["#search_mailinglist","#search_altg","#search_targetgroup","#search_recipient_type","#search_recipient_state"].forEach(function(e){$(e+t).prop("disabled",!0)})}function f(e){var t=e?"_advanced":"";["#search_mailinglist","#search_altg","#search_targetgroup","#search_recipient_type","#search_recipient_state"].forEach(function(e){$(e+t).prop("disabled",!1)})}function g(){var t={firstname:$("#search_first_name").val().trim(),lastname:$("#search_name").val().trim(),email:$("#search_email").val().trim()},e=Object.keys(t).map(function(e){return{id:e,value:t[e],operator:"like"}}),n=!0,o=y();return o&&e.reduce(function(e,t){var i=o.getRules({allow_invalid:!0,skip_empty:!0});return t.id?t.value?!0===o.setOrReplaceRule(i,t,n)||e:!0===o.deleteRuleByField(null,t.id,n)||e:e},!1)}function m(){var e=function(e){var i=y(),n={};{var o;i&&(o=i.getRules({allow_invalid:!0,skip_empty:!0}),e.forEach(function(e){var t=i.findRuleByField(o,e,!0);n[e]=t?t.value:""}))}return n}(["firstname","lastname","email"]);$("#search_first_name").val(e.firstname),$("#search_name").val(e.lastname),$("#search_email").val(e.email)}function v(e,t){e=n.get(e);e.submit("",_.merge({ignore_qb_validation:!0,skip_empty:!0},e.validatorOptions,t))}function y(){return $("#targetgroup-querybuilder").prop("queryBuilder")}function b(){var e=y();return e&&e.containsNotEmptyRule()}e.new({"qb:invalidrules":"#targetgroup-querybuilder"},function(){o(t("defaults.error"),t("querybuilder.errors.invalid_definition"),"alert")}),this.addDomInitializer("recipient-list",function(){l(this.config,!1)}),this.addDomInitializer("recipient-duplicate-list",function(){l(this,!0)}),this.addAction({enterdown:"search-recipient"},function(){a=!0}),this.addAction({validation:"search-recipient"},function(){var e;a?(e=this.data,this.data=_.merge({},e,{ignore_qb_validation:!1,skip_empty:!1})):this.data&&this.data.ignore_qb_validation&&d()}),this.addAction({submission:"search-recipient"},function(){a&&((1==$("input[name=advancedSearch]").val()?m:g)(),v($(this.el),{ignore_qb_validation:!1}))}),this.addAction({click:"target-group-save"},function(){var e=y(),e=(e&&e.clearErrors(),n.get($(this.el)));e.validate(_.merge({},e.validatorOptions,{ignore_qb_validation:!1,skip_empty:!1}))&&i.createFromTemplate({},"target-group-save")}),this.addAction({change:"change-ml-field"},function(){var e=$(this.el).select2("val");h("-1"==e),$("#search_mailinglist_advanced").select2("val",e)}),this.addAction({change:"change-ml-field-advanced"},function(){var e=$(this.el).select2("val");h("-1"==e),$("#search_mailinglist").select2("val",e)}),this.addAction({change:"change-target-group"},function(){var e=$("#search_targetgroup").val();$("#search_targetgroup_advanced").select2("val",e)}),this.addAction({change:"change-recipient-type"},function(){var e=$("#search_recipient_type").val();$("#search_recipient_type_advanced").select2("val",e)}),this.addAction({change:"change-user-status"},function(){var e=$("#search_recipient_state").val();$("#search_recipient_state_advanced").select2("val",e)}),this.addAction({change:"change-target-group-advanced"},function(){var e=$("#search_targetgroup_advanced").val();$("#search_targetgroup").select2("val",e)}),this.addAction({change:"change-recipient-type-advanced"},function(){var e=$("#search_recipient_type_advanced").val();$("#search_recipient_type").select2("val",e)}),this.addAction({change:"change-user-status-advanced"},function(){var e=$("#search_recipient_state_advanced").val();$("#search_recipient_state").select2("val",e)}),this.addAction({click:"choose-advanced-search"},function(){g()&&v($(this.el),{ignore_qb_validation:!1})}),this.addAction({click:"toggle-recipient-tab"},function(){var e=$(this.el),t=$('[data-action="toggle-recipient-tab"]'),t=(_.each(t,function(e){r.set("toggle_tab"+$(e).data("tab-id"),{hidden:!0})}),r.set("toggle_tab"+e.data("tab-id"),{hidden:!1}),e.data("url"));t&&(window.location.href=t)}),this.addAction({click:"reset-search"},function(){var e;$("#search_first_name").val(""),$("#search_name").val(""),$("#search_email").val(""),$("#search_mailinglist").select2("val",0),$("#search_targetgroup").select2("val",0),$("#search_recipient_type").select2("val",""),$("#search_recipient_state").select2("val",0),$("#search_mailinglist_advanced").select2("val",0),$("#search_targetgroup_advanced").select2("val",0),$("#search_recipient_type_advanced").select2("val",""),$("#search_recipient_state_advanced").select2("val",0),(e=y())&&(e.clearErrors(),e.reset()),v($(this.el),{ignore_qb_validation:!1})}),this.addAction({click:"createNewTarget"},function(){var e=y(),t=(e&&e.clearErrors(),n.get($(this.el)));t.validate(_.merge({},t.validatorOptions,{ignore_qb_validation:!1,skip_empty:!1}))&&AGN.Lib.Confirm.createFromTemplate({rules:t.get$().find('[name="searchQueryBuilderRules"]').val()},"new-targetgroup-modal").done(function(e){t.updateHtml(e)})}),this.addAction({change:"change-mailinglist-id"},function(){h("-1"==$(this.el).select2("val"))}),this.addAction({click:"refresh-basic-search"},function(){g(),p(!1),v($(this.el),{ignore_qb_validation:!1})}),this.addAction({click:"refresh-advanced-search"},function(){m(),p(!0),v($(this.el),{ignore_qb_validation:!1})})}),AGN.Lib.Controller.new("recipient-view",function(){var r,s,a="BLACKLISTED",l=AGN.Lib.Form,o=AGN.Lib.Confirm,c=AGN.Lib.Template,i=!1;function u(e,t){this.url=e,this.running=!1,this.callback=$.isFunction(t)?t:$.noop,this.lastAddress=null,this.lastResult=null,this.scheduledCheck=null}this.addDomInitializer("recipient-view",function(e){var n=l.get(e),o=this;s=this.config,r=new u(o.config.urls.CHECK_ADDRESS,function(e){switch(e.status){case"OK":n.cleanFieldError("email");break;case"USED":var i=o.config.urls.EXISTING_USER_URL_PATTERN.replace("{recipientID}",e.recipientID),i='<div style="display: flex; width: 100%; justify-content: space-between; align-items: center;">'+t("error.inUse")+'<a href="'+i+'" class="btn btn-regular btn-inverse">'+t("recipient.existing.btn")+"</a></div>";n.showFieldError("email",i,!0);break;case a:n.showFieldError("email",t("error.isBlacklisted"),!0)}}),$("#recipient-email").on("change input",_.debounce(function(){r.check($(this).val())},300))}),this.addAction({mouseleave:"toggleSaveAndBack"},function(){var e=this.el,t=e.parent();setTimeout(function(){i||e.is(":hover")||t.removeClass("open")},400)}),this.addAction({mouseenter:"toggleSaveAndBack"},function(){this.el.parent().addClass("open")}),this.addAction({mouseenter:"toggleSubmenuSaveAndBack"},function(){i=!0}),this.addAction({mouseleave:"toggleSubmenuSaveAndBack"},function(){i=!1,this.el.closest(".dropdown").removeClass("open")}),this.addAction({submission:"recipient-save"},function(){function i(){$.post(s.urls.CHECK_MATCH_ALTG,n.params()).done(function(e){e.popups&&e.popups.alert&&0<e.popups.alert.length?AGN.Lib.JsonMessages(e.popups):e.success&&0!==e.success.length?n.submit():o.create(c.text("hide-recipient-confirmation-modal")).done(function(){n.setActionOnce(s.urls.SAVE_AND_BACK_TO_LIST),n.submit()})}).fail(function(){n.submit()})}var n=l.get(this.el),e=$("#recipient-email").val();this.event.preventDefault();r&&e&&e.trim()?r.jqxhr(e.trim()).done(function(e){!0===e.isBlacklisted?o.create(c.text("email-confirmation-modal",{question:t("recipient.blacklisted.question")})).done(function(){!0===e.inUse?o.create(c.text("email-confirmation-modal",{question:t("recipient.duplicate.question")})).done(i):i()}):!0===e.inUse?o.create(c.text("email-confirmation-modal",{question:t("recipient.duplicate.question")})).done(i):i()}).fail(i):i()}),u.prototype.jqxhr=function(e){return $.get(this.url,{email:e})},u.prototype.scheduleCheck=function(t){var i=this;if(i.scheduledCheck&&clearTimeout(i.scheduledCheck),i.running)i.scheduledCheck=setTimeout(function(){i.scheduleCheck(t)},300);else{i.running=!0,i.lastAddress=null,i.lastResult=null;try{i.jqxhr(t).always(function(){i.running=!1}).done(function(e){i.lastAddress=t,i.lastResult={status:!0===e.isBlacklisted?a:!0===e.inUse?"USED":"OK",recipientID:e.existingRecipientId||0},i.report()})}catch(e){i.running=!1}}},u.prototype.check=function(e){(e=e?e.trim():"")?this.lastAddress==e?this.report():this.scheduleCheck(e):this.report("OK")},u.prototype.report=function(e){arguments.length?this.callback.call(null,e):this.lastAddress&&this.report(this.lastResult)}}),AGN.Lib.Controller.new("reference-table-settings-modal",function(){$(document).on("shown.bs.modal",".modal[reference-table-settings-modal]",function(){$(this).find("input[data-associated-with], select[data-associated-with]").each(function(){var e=$(this),t=$(e.data("associated-with"));e.is(":checkbox")?e.prop("checked","true"===t.val()):e.val(t.val())})}),this.addAction({click:"apply-button"},function(){var e=$(this.el);AGN.Lib.Form.get(e).validate()&&(e.closest(".modal").find("input[data-associated-with], select[data-associated-with]").each(function(){var e=$(this),t=$(e.data("associated-with"));e.is(":checkbox")?t.val(e.prop("checked")):t.val(e.val())}),AGN.Lib.Modal.getWrapper(e).modal("hide"))})}),AGN.Lib.Controller.new("sidemenu",function(){var t=AGN.Lib.WebStorage;function c(e){e.removeClass("open"),e.find(".subitems").removeClass("open")}function e(e){t.set("is-wide-sidebar",{value:e=!0!==e?!1:e}),$.ajax(AGN.url("/sidebar/ajax/setIsWide.action"),{type:"GET",data:{isWide:e}})}function u(){return $("body").hasClass("wide-sidebar")}this.addAction({mouseenter:"activateSubmenu"},function(){var e,t,i,n,o,r,s=$(this.el).find(".menu-item"),a=s.next(".submenu"),l=a.find(".subitems");$(".submenu.open").not(a).each(function(){c($(this))}),u()||(clearTimeout(s.data("closeTimerId")),a.addClass("open"),e=a.find(".arrow"),r=e,n=s,o=(t=a).find(".submenu-header"),i=n.scrollTop()+n.offset().top+n.outerHeight()/2-o.outerHeight()/2,n=n.offset().left+n.outerWidth()+r.outerWidth(),r=$(window),o=o.outerHeight()+function(e){return e.find(".subitems").find("li").first().height()*e.find(".subitems").find("li").length}(t),(i=i+o>r.height()+r.scrollTop()?r.height()+r.scrollTop()-o-20:i)-r.scrollTop()<0&&(i=r.scrollTop()),t.offset({top:i,left:n}),o=e,r=(r=s).offset().top+r.outerHeight()/2-o.outerHeight()/2,o.offset({top:r,left:o.offset().left}),s.data("openTimerId",setTimeout(function(){a.is(".open")&&l.addClass("open")},1e3/3)))}),this.addAction({mouseleave:"activateSubmenu"},function(){var e=$(this.el).find(".menu-item"),t=e.next(".submenu"),i=t.find(".subitems");u()||(clearTimeout(e.data("openTimerId")),i=i.is(".open")?500:400,e.data("closeTimerId",setTimeout(function(){c(t)},i)))}),this.addAction({click:"expandMenu"},function(){u()?(e(!1),$("body").removeClass("wide-sidebar")):(e(!0),$("body").addClass("wide-sidebar")),$(window).trigger("viewportChanged")})}),AGN.Lib.Controller.new("support",function(){var e=AGN.Lib.Form,i=AGN.Lib.Popover,n=AGN.Lib.JsonMessages;function o(){var e=$("#support-mail-text").val(),i=0;e&&(i=e.length),$("#support-message-length").text(t("fields.content.charactersEntered",i))}this.addDomInitializer("support",function(){o(),$("#support-mail-text").on("change input",_.throttle(function(){o()},100))}),this.addAction({submission:"send-support-request"},function(){this.event.preventDefault(),e.get(this.el).submit()}),this.addAction({submitted:"send-support-request"},function(){var e;this.data.success&&(e=i.get(this.el))&&e.hide(),n(this.data.popups)})}),AGN.Lib.Controller.new("target-create-mailinglist",function(){this.addAction({click:"select-mediatype"},function(){var e=this.el.closest("form"),t=e.find("#createMailinglistOkBtn");e.find('input:checked[name="mediatypes"]').length?t.removeAttr("disabled"):t.attr("disabled","disabled")})}),AGN.Lib.Controller.new("target-scheduler",function(){var n,o=AGN.Lib.ScheduleTimeTable,r=AGN.Lib.ScheduleTimeTable.PeriodRow;this.addAction({submission:"save-scheduler-data"},function(){var e=AGN.Lib.Form.get($(this.el));e.setValueOnce("intervalAsJson",n.getSubmissionJson("period")),e.submit()}),this.addDomInitializer("target-scheduler-init",function(e){var t=e.json(),i=(n&&n.clean(),n=new o($("#tile-schedule-time")),[]);(i=t.intervalAsJson?JSON.parse(t.intervalAsJson).map(function(e){return r.deserialize(e)}):i).forEach(function(e){n.addRow(e)}),0===i.length&&n.addEmptyPeriodRow(),AGN.Lib.Form.get(e).initFields()})}),AGN.Lib.Controller.new("target-group-view",function(e){var i=AGN.Lib.Action,n=AGN.Lib.Form;i.new({"qb:invalidrules":"#targetgroup-querybuilder"},function(){AGN.Lib.Messages(t("defaults.error"),t("querybuilder.errors.general"),"alert")}),this.addDomInitializer("target-group-view",function(){var t=$(this.el);$("[data-toggle-tab]").on("click",function(e){if(!n.get(t).validate({skip_empty:!0}))return e.preventDefault(),!1})}),this.addAction({click:"switch-tab-viewEQL"},function(){var e=this.el,e=AGN.Lib.Form.get($(e));e.setValueOnce("viewFormat","EQL"),e.submit("",{skip_empty:!0})}),this.addAction({click:"switch-tab-viewQB"},function(){var e=this.el,e=AGN.Lib.Form.get($(e));e.setValueOnce("viewFormat","QUERY_BUILDER"),e.submit("",{skip_empty:!0})}),this.addAction({click:"save-wizard-target"},function(){var e=this.el,e=AGN.Lib.Form.get($(e));if(!$("#targetgroup-querybuilder").prop("queryBuilder").containsNotEmptyRule())return AGN.Lib.Messages(t("defaults.error"),t("querybuilder.errors.no_rule"),"alert"),!1;e.validate()&&e.submit()})}),AGN.Lib.Controller.new("template-css",function(){this.addAction({click:"updatePreview"},function(){var e=$("#layoutPreviewForm");e.find('input[name="css"]').val($("#cssContents").val()),e.submit()}),this.addAction({click:"saveLayoutCss"},function(){var e=AGN.Lib.Form.get($("#gridTemplateForm")),t=$('#save-css-approve-modal-form select[name="templatesToUpdate"]').val(),i=e.getValue("templateId");i&&t.push(i),e.setValueOnce("bulkIds",t),e.submit()})}),AGN.Lib.Controller.new("template-outer-html-edit",function(){this.addAction({click:"updatePreview"},function(){var e=$("#layoutPreviewForm");e.find('input[name="outerHTML"]').val($("#templateOuterHTML").val()),e.submit()}),this.addAction({click:"saveOuterHTML"},function(){$("#gridTemplateForm").submit()})}),AGN.Lib.Controller.new("template-styles",function(){function e(){var e=$("form#gridTemplateForm"),n=$("form#layoutPreviewForm"),e=e.find('input[name^="styles."]');$.each(e,function(e,t){var t=$(t),i=t.attr("name");n.find('input[name="'+i+'"]').val(t.val())}),n.submit()}this.addAction({submission:"updatePreview"},function(){e()}),this.addAction({click:"updateLayoutPreview"},function(){e()}),this.addAction({click:"saveLayoutStyles"},function(){$("form#gridTemplateForm").submit()})}),AGN.Lib.Controller.new("trackable-link-list-new",function(){AGN.Opt.DefaultExtensions={};var e,i,n,t=new AGN.Lib.TrackableLinkExtensions;function o(e){var t,i;e&&0<e.length&&(0<(t=e.closest('[data-sizing="scroll"]')).length&&(i=t.find(":first-child").offset().top,e=e.offset().top,t.scrollTop(0),t.scrollTop(e-i)))}function r(i){_.each(t.collect(),function(e,t){i.setValue("extensions["+t+"].name",e.name),i.setValue("extensions["+t+"].value",e.value)})}this.addDomInitializer("trackable-link-list",function(){i=this.config.KEEP_UNCHANGED,n=this.config.SAVE_ALL_URL,AGN.Opt.DefaultExtensions=this.config.defaultExtensions,this.config.scrollToLinkId&&o($("#link-"+this.config.scrollToLinkId))}),this.addDomInitializer("trackable-link-extensions",function(){t.load(this.config.extensions,$(".modal").is(":visible")?$("#bulkActionExtensions tbody"):$("#settingsExtensions tbody"))}),AGN.Lib.Action.new({change:"[id^=link-], #tile-trackableLinkEditAll"},function(){e=this.el.attr("id")}),this.addAction({scrollTo:"scroll-to"},function(){e&&o($(this.el).find("#"+e))}),this.addAction({click:"save-bulk-actions",enterdown:"description-enterdown, bulkActionExtensionsEnterdown"},function(){var i=AGN.Lib.Form.get($("#trackableLinkForm")),e=$("#bulkActionsForm").serializeFormDataObject();i._data={},$.each(e,function(e,t){i.setValue(e,t)}),i.setValue("modifyAllLinksExtensions",!1),r(i),i.setActionOnce(n),i.submit(),AGN.Lib.Modal.getWrapper(this.el).modal("hide")}),this.addAction({click:"save",enterdown:"settingsExtensionsEnterdown"},function(){this.event.preventDefault();var e,t=AGN.Lib.Form.get($("#trackableLinkForm"));t._data={},t.setValue("modifyBulkLinksExtensions",!1),(e=t).setValue("bulkUsage",i),e.setValue("bulkAction",i),e.setValue("bulkDeepTracking",i),e.setValue("bulkStatic",i),r(t),t.setActionOnce(n),t.submit()})}),AGN.Lib.Controller.new("trackable-link-list",function(){var a,n;function o(e){return e.find("[data-extension-name]").val()}function r(e){return e.find("[data-extension-value]").val()}function s(t,i){var n=!0;return _.each(u().find("[data-extension-row]"),function(e){e=$(e);n&&o(e)==t&&r(e)==i&&(n=!1)}),n}function l(e,t,i){s(t,i)&&u().append(n({index:e,name:t,value:i}))}function i(e,t){var i=u().find("[data-extension-row]:last-child").data("extension-row")||0;l(++i,e,t)}function c(n){_.each(u().find("[data-extension-row]"),function(e,t){var e=$(e),i=o(e),e=r(e);i&&e&&(n.setValue("commonExtension["+t+"].propertyName",i),n.setValue("commonExtension["+t+"].propertyValue",e))})}function t(){var e=u().find("#newExtensionBtn");e.after("<a href='#' class='btn btn-regular btn-alert' data-action='delete-extension'><i class='icon icon-trash-o'></i></a>"),e.remove()}function u(){return d()?$("#bulkActionExtensions tbody"):$("#settingsExtensions tbody")}function d(){return $(".modal").is(":visible")}AGN.Opt.DefaultExtensions={},this.addDomInitializer("trackable-link-extensions",function(){var e=this.config,e=(AGN.Opt.DefaultExtensions=e.defaultExtensions,n=AGN.Lib.Template.prepare("extensions-table-row"),d()?e.bulkExtensions:e.extensionsForAllLinks);_.each(e,function(e,t){l(t,e.propertyName,e.propertyValue)}),i("","")}),this.addAction({change:"elem-edited"},function(){a=this.el.attr("id")}),this.addAction({scrollTo:"scroll-to"},function(){var e,t,i;if(a)e=$(this.el).find("#"+a);else if(0<$(this.el).find('[data-sizing="scroll-top-target"]').length)(e=$(this.el).find('[data-sizing="scroll-top-target"]')).removeAttr("data-sizing");else if(0<location.href.indexOf("scrollToLinkId")){var n,o=document.createElement("a");o.href=location.href;for(var r=o.search.substring(1,o.search.length).split("&"),s=0;s<r.length;s++)0<=r[s].indexOf("scrollToLinkId")&&(n=r[s].substring(r[s].indexOf("=")+1,r[s].length),e=$("#link-"+n))}e&&0<e.length&&0<(o=e.closest('[data-sizing="scroll"]')).length&&(t=o.find(":first-child").offset().top,i=e.offset().top,o.scrollTop(0),o.scrollTop(i-t))}),this.addAction({click:"delete-link"},function(){var e=this.el,t=e.data("link-id");$(e).closest('[data-action="elem-edited"]').trigger("change"),$("#linkPropertyTable").find("#linkProperty_"+t).remove()}),this.addAction({click:"save-bulk-actions",enterdown:"description-enterdown, bulkActionExtensionsEnterdown"},function(){var i=AGN.Lib.Form.get($("#trackableLinkForm")),e=$("#bulkActionsForm").serializeFormDataObject();i._data={},$.each(e,function(e,t){i.setValue(e,t)}),i.setValue("action",ACTION_SAVE_ALL),i.setValue("modifyExtensionsForAllLinks",!1),c(i),i.submit(),AGN.Lib.Modal.getWrapper(this.el).modal("hide")}),this.addAction({click:"save",enterdown:"settingsExtensionsEnterdown"},function(){this.event.preventDefault();var e,t=AGN.Lib.Form.get($("#trackableLinkForm"));t._data={},t.setValue("action",ACTION_SAVE_ALL),t.setValue("bulkModifyLinkExtensions",!1),(e=t).setValue("globalUsage",KEEP_UNCHANGED),e.setValue("linkAction",KEEP_UNCHANGED),e.setValue("deepTracking",KEEP_UNCHANGED),e.setValue("bulkLinkStatic",KEEP_UNCHANGED),c(t),t.submit()}),this.addAction({click:"add-default-extensions"},function(){var e=u().find("tr:last");""==o(e)&&""==r(e)?e.remove():t(),_.each(AGN.Opt.DefaultExtensions,function(e,t){i(t,e)}),i("","")}),this.addAction({click:"add-extension"},function(){s("","")&&(t(),i("",""))}),this.addAction({click:"delete-extension"},function(){this.el.closest("tr").remove()})}),AGN.Lib.Controller.new("trackable-link-new",function(){var e=this,t=new AGN.Lib.TrackableLinkExtensions;this.addDomInitializer("trackable-link-extensions",function(){t.load(this.config.extensions,$("#extensions tbody"))}),this.addAction({click:"save"},function(){this.event.preventDefault();var i,e=AGN.Lib.Form.get($("#trackableLinkForm"));i=e,_.each(t.collect(),function(e,t){i.setValue("extensions["+t+"].name",e.name),i.setValue("extensions["+t+"].value",e.value)}),e.submit("static")}),this.addAction({change:"link-details-trackable"},function(){e.runInitializer("trackableAction")}),this.addInitializer("trackableAction",function(e){var t=$('[data-action="link-details-trackable"] :selected');$("#linkAction").prop("disabled",0==t.val())})}),AGN.Lib.Controller.new("trackable-link",function(){var e=this;this.addAction({click:"link-details-delete-link"},function(){var e=this.el.data("link-id");$("#linkPropertyTable").find("#linkProperty_"+e).remove()}),this.addAction({click:"link-details-delete-all-links"},function(){$("#linkPropertyTable").find("tbody tr").remove()}),this.addAction({click:"link-details-add-extension"},function(){var e=$("#linkPropertyTable").find("tr[data-link-id]"),e=0!=e.length?Math.max.apply(Math,_.map(e,function(e){return parseInt($(e).data("link-id"))}))+1:$("#linkPropertyTable").find("tbody tr").length+1,e=AGN.Lib.Template.text("link-table-row",{count:e,linkName:"",linkValue:""});$("#linkPropertyTable").find("tbody").append(e)}),this.addAction({change:"link-details-trackable"},function(){e.runInitializer("trackableAction")}),this.addInitializer("trackableAction",function(e){var t=$('[data-action="link-details-trackable"] :selected');$("#linkAction").prop("disabled",0==t.val())})}),AGN.Lib.Controller.new("userform-view",function(){var i,r=AGN.Lib.FormBuilder.FormBuilder,s=AGN.Lib.Editor,o=AGN.Lib.Confirm;function a(e){var t=CKEDITOR.instances[e];return t&&t.updateElement(),$("#userFormForm").dirty("isFieldDirty",$("#"+e))}function l(e){return!!r.isCreated("#"+e)&&r.get("#"+e).isChanged()}function c(e,t){var i,n,o=AGN.Lib.Form.get($("form#userFormForm"));r.isCreated("#successFormBuilder")&&(i=r.get("#successFormBuilder"),"FORM_BUILDER"===e&&s.get($("#successTemplate")).val(i.generateHtml()),e=i.getJson(),o.setValueOnce("successSettings.formBuilderJson",e),(i=$("#successFormBuilder").find("input:enabled,select:enabled")).prop("disabled",!0)),r.isCreated("#errorFormBuilder")&&(e=r.get("#errorFormBuilder"),"FORM_BUILDER"===t&&s.get($("#errorTemplate")).val(e.generateHtml()),t=e.getJson(),o.setValueOnce("errorSettings.formBuilderJson",t),(n=$("#errorFormBuilder").find("input:enabled,select:enabled")).prop("disabled",!0)),o.submit(),i&&i.prop("disabled",!1),n&&n.prop("disabled",!1)}function e(e,t){e.exists()&&(0<t?(e.attr("href",i.replace("{action-ID}",t)),e.removeClass("hidden")):(e.attr("href","#"),e.addClass("hidden")))}this.addDomInitializer("userform-view",function(){var e=this.config;i=e.actionURLPattern,$("#userFormForm").dirty()}),this.addAction({change:"change-intro-action"},function(){e($("#startActionLink"),this.el.val())}),this.addAction({change:"change-final-action"},function(){e($("#finalActionLink"),this.el.val())}),this.addAction({click:"check-velocity-script"},function(){var e=$(this.el),e=AGN.Lib.Helpers.objFromString(e.data("action-options"));e=e.type,AGN.Lib.Editor.get($("#"+e+"Template")).val().match(/#(?:set|include|macro|parse|if|foreach)/gi)&&(AGN.Lib.Messages(t("defaults.error"),t("userform.error.velocity_not_allowed"),"alert"),(e=$('[data-toggle-tab="#tab-'+e+'-template-html"]'))&&e.trigger("click"))}),this.addAction({click:"saveUserForm"},function(){var e=l("successFormBuilder"),t=l("errorFormBuilder"),i=e&&a("successTemplate"),n=t&&a("errorTemplate");i||n?o.createFromTemplate({needSuccessCodeChoose:i,needErrorCodeChoose:n},"warning-save-different-tabs"):c(e?"FORM_BUILDER":"HTML",t?"FORM_BUILDER":"HTML")}),this.addAction({click:"save-specific-code-mode"},function(){var e=$("#choose-code-format-modal-form");c(e.find('[name="success_template_mode"]:checked').val(),e.find('[name="error_template_mode"]:checked').val())}),this.addAction({change:"formTestRecipient"},function(){var e=$("#formTestLink"),t=$("#formTestRecipient");e.attr("href",t.val())})}),AGN.Lib.Controller.new("workflow-list",function(){var n=null;function o(){var e=$(".js-data-table-body");if(e.exists()){e=e.data("_table");if(e&&e.api)return e.api}return null}function r(e,i){var n=$.Deferred();return e&&e.length?(i=$.ajax(i,{method:"POST",traditional:!0,data:{bulkIds:e}}).fail(function(){n.reject()}),AGN.Lib.Confirm.request(i).then(n.resolve,n.reject)):(n.reject(),AGN.Lib.Messages(t("Error"),t("messages.error.nothing_selected"),"alert")),n.promise()}this.addDomInitializer("workflow-list",function(){n=this.config}),this.addAction({click:"bulk-delete"},function(){var e,t=o();t&&r((e=t.getSelectedRows()).map(function(e){return e.id}),n.urls.WORKFLOW_BULK_DELETE).done(function(){t.updateRowData({remove:e})})}),this.addAction({click:"bulk-deactivate"},function(){var e,t,i=o();i&&(e=i.getSelectedRows(),t=i.getSelectedNodes(),r(e.map(function(e){return e.id}),n.urls.WORKFLOW_BULK_DEACTIVATE).done(function(){t.forEach(function(e){e.setDataValue("status",{name:"inactive",messageKey:"default.status.inActive"})}),i.refreshClientSideRowModel("filter"),i.deselectAll()}))})}),AGN.Lib.Controller.new("workflow-view",function(){var c,d=AGN.Lib.WM.Definitions,o=AGN.Lib.WM.Editor,r=AGN.Lib.WM.Node,h=AGN.Lib.WM.EditorsHelper,a=AGN.Lib.WM.MailingEditorHelper,u=AGN.Lib.WM.Dialogs,p=AGN.Lib.WM.MailingSelector,s=AGN.Lib.Confirm,f=AGN.Lib.Template,g=AGN.Lib.WM.Utils,e=AGN.Lib.Select,m=AGN.Lib.WM.DateTimeUtils,v=this;function l(e,t){var i,n,o,r,s=$("#workflow_active").is(":checked"),a=d.constants.initialWorkflowStatus,l=a===d.constants.statusActive&&!s,a=a!==d.constants.statusActive&&s;!l&&g.checkActivation()||(a?(o=e,r=t,u.Activation(function(){y(o,r)},c.getNodesByTypes(d.NODE_TYPES_MAILING).map(function(e){return e.getTitle()}).join("<br/>"))):l?(i=e,n=t,u.Deactivation(function(){y(i,n)})):y(e,t))}function y(e,i){function n(){var t=AGN.Lib.Form.get($("form#workflowForm"));i=$.extend({},i),Object.keys(i).forEach(function(e){t.setValueOnce(e,i[e])}),t.setValueOnce("workflowSchema",c.serializeIcons()),t.setValueOnce("editorPositionLeft",-1),t.setValueOnce("editorPositionTop",-1),t.submit("static")}e?function(){var e=$.Deferred();if($("#name").val().length<3)AGN.Lib.Messages(t("workflow.defaults.error"),t("error.workflow.shortName"),"alert"),e.reject();else{if(function(){for(var e=c.getNodes(),t="UNKNOWN",i={},n=0;n<e.length;n++){var o=e[n];if(o.type===d.NODE_TYPE_START&&o.filled){var r="UNKNOWN";switch(o.data.startType){case d.constants.startTypeDate:r="DATE";break;case d.constants.startTypeEvent:switch(o.event){case d.constants.startEventDate:r="RULE";break;case d.constants.startEventReaction:r="REACTION"}}if(t!==r){if("UNKNOWN"!==t)return;t=r}}switch(o.type){case d.NODE_TYPE_MAILING:case d.NODE_TYPE_FOLLOWUP_MAILING:i.DATE=!0;break;case d.NODE_TYPE_ACTION_BASED_MAILING:i.REACTION=!0;break;case d.NODE_TYPE_DATE_BASED_MAILING:i.RULE=!0}}if("UNKNOWN"!==t)if(1===(i=Object.keys(i)).length){if(t!==i[0])return 1}else if(1<i.length)return 1;return}())return s.create(f.text("mailing-types-replace-modal"));e.resolve()}return e.promise()}().done(n):n()}jsPlumb.Connectors.FixedBezierConnector||(jsPlumbUtil.extend(AGN.Opt.Components.JsPlumbFixedBezierConnector,jsPlumb.Connectors.AbstractConnector),jsPlumb.Connectors.FixedBezierConnector=AGN.Opt.Components.JsPlumbFixedBezierConnector),this.addDomInitializer("workflow-view",function(){var e=this.config,t=(d.constants=e.constants,d.workflowId=e.workflowId,d.shortname=e.shortname,e.icons.map(r.deserialize)),i=r.deserializeConnections(e.icons,r.toMap(t)),n=(c&&c.recycle(),(c=new o(!1!==e.isEditable,!1!==e.isContextMenuEnabled,!0===e.isFootnotesEnabled)).setOnInitialized(function(){c.batch(function(){t.forEach(function(e){c.add(e)}),i.forEach(function(e){c.connect(e.source,e.target)})}),c.updateNodeTitles(),c.updateFootnotes()}),c.setMinimapEnabled(!1!==e.isMinimapEnabled),c.setStatisticEnabled(!0===e.isStatisticEnabled),$("#slider"));n.exists()&&n.slider({min:d.MIN_ZOOM,max:d.MAX_ZOOM,value:d.DEFAULT_ZOOM,step:d.ZOOM_STEP,create:function(){var t=$(this).slider("instance");c.setZoom(d.DEFAULT_ZOOM),c.setOnZoom(function(e){t.value(e)})},slide:function(e,t){c.setZoom(t.value)}}),!0===e.fitPdfPage&&c.fitPdfPage(),window.status=e.initializerFinishStatus||""}),this.addDomInitializer("mailing-data-transfer-modal",function(e){var i=e.find("input[data-mailing-param]"),n=e.find("#transferAllSettings"),o={},r=[];i.on("change",function(){var e=$(this),t=e.data("mailing-param");e.prop("checked")?o[t]=!0:delete o[t],r=Object.keys(o),n.prop("checked",r.length==i.length)}),n.on("change",function(){var e=n.prop("checked");i.prop("checked",e),r=e?(i.each(function(){o[$(this).data("mailing-param")]=!0}),Object.keys(o)):(o={},[])}),this.addAction({click:"transfer-mailing-data"},function(){s.get(e).positive(r)})}),this.addDomInitializer("own-workflow-expanding-modal",function(e){var t=e.find("#workflow-select"),i=e.find('input[name="copyContent"]');this.addAction({click:"expand-own-workflow"},function(){s.get(e).positive({workflowId:t.val(),copyContent:"true"==i.filter(":checked").val()})})}),this.addDomInitializer("icon-comment-editor-initializer",function(){var e=h.registerEditor("icon-comment",{formName:"iconCommentForm",safeToSave:!0,fillEditor:function(e){$("#iconComment").val(e.getComment())},saveEditor:function(){h.saveIconComment($("#iconComment").val()),this.cancelEditor()},cancelEditor:function(){return $("#icon-comment-editor").dialog("close"),!1}});v.addAction({click:"icon-comment-editor-save"},function(){e.saveEditor()}),v.addAction({click:"icon-comment-editor-cancel"},function(){e.cancelEditor()})}),this.addDomInitializer("parameter-editor-initializer",function(){h.registerEditor("parameter",{formName:"parameterForm",getTitle:function(){return t("workflow.parameter")},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]'),e=e.getData();t.submit(!1),t.get(0).reset(),h.fillFormFromObject(this.formName,e,"")},saveEditor:function(){return h.formToObject(this.formName)}}),v.addAction({click:"parameter-editor-save"},function(){h.saveCurrentEditorWithUndo()})}),this.addDomInitializer("deadline-editor-initializer",function(){var e=h.registerEditor("deadline",{panelIds:["fixedDeadlinePanel","delayDeadlinePanel"],timeUnitIds:["deadlineTimeUnitMinute","deadlineTimeUnitHour","deadlineTimeUnitDay","deadlineTimeUnitWeek","deadlineTimeUnitMonth"],formName:"deadlineForm",getDefaultDelayData:function(e){var t={};return t=e===d.constants.deadlineTypeDelay&&this.isPrecededByImportIcon?{timeUnit:d.constants.deadlineTimeUnitHour,delayValue:d.constants.defaultImportDelayLimit}:t},getTitle:function(){return t("workflow.deadline.title")},fillEditor:function(e){var t=e.getData(),e=($("#deadline-editor").find(".editor-error-messages").css("display","none"),this.isPrecededByImportIcon=this.checkPrecededByImportIcon(e),$('form[name="'+this.formName+'"]'));e.submit(!1),$('form[name="'+this.formName+'"] #deadlineDate').pickadate("picker").set("select",this.dateAsUTC(t.date||new Date)),this.fillDelayData(e,t),$('form[name="'+this.formName+'"] #time').val(("0"+t.hour).slice(-2)+":"+("0"+t.minute).slice(-2))},fillDelayData:function(e,t){e.get(0).reset();e=$('form[name="'+this.formName+'"] input[name="deadlineType"]:checked').val(),e=this.getDefaultDelayData(e),h.fillFormFromObject(this.formName,t,"",e),this.updateVisibility(),t=t.delayValue||e.delayValue;h.initSelectWithValueOrChooseFirst($('form[name="'+this.formName+'"] select[name="delayValue"]'),t)},saveEditor:function(){var e=h.formToObject(this.formName),t=$('form[name="'+this.formName+'"] #time').val();return e.date=$('form[name="'+this.formName+'"] #deadlineDate').pickadate("picker").get("select").obj,e.hour=t.substring(0,2),e.minute=t.substring(3,5),e},updateVisibility:function(){var e=$('form[name="'+this.formName+'"]'),t=e.find('input[name="deadlineType"]:checked').val();if(this.checkPresentNodeOfType([d.NODE_TYPE_ACTION_BASED_MAILING,d.NODE_TYPE_DATE_BASED_MAILING])?(e.find("input#typeFixedDeadline").parent().parent().parent().hide(),e.find('input[value="'+d.constants.deadlineTypeDelay+'"]').prop("checked",!0),t=d.constants.deadlineTypeDelay):e.find("input#typeFixedDeadline").parent().parent().parent().show(),t===d.constants.deadlineTypeDelay){switch(this.switchPanelsVisibility("delayDeadlinePanel"),this.switchTimeContainerVisibility(!1),e.find('select[name="timeUnit"]').val()){case d.constants.deadlineTimeUnitMinute:this.switchTimeUnitsVisibility("deadlineTimeUnitMinute");break;case d.constants.deadlineTimeUnitHour:this.switchTimeUnitsVisibility("deadlineTimeUnitHour");break;case d.constants.deadlineTimeUnitDay:this.switchTimeUnitsVisibility("deadlineTimeUnitDay"),this.switchTimeContainerVisibility(!0),$("#deadlineTimeHelp").removeAttr("style");break;case d.constants.deadlineTimeUnitWeek:this.switchTimeUnitsVisibility("deadlineTimeUnitWeek");break;case d.constants.deadlineTimeUnitMonth:this.switchTimeUnitsVisibility("deadlineTimeUnitMonth")}e.find('input[name="useTime"]').css("display","inline")}else t===d.constants.deadlineTypeFixedDeadline&&(this.switchPanelsVisibility("fixedDeadlinePanel"),this.switchTimeContainerVisibility(!0),this.hideDiv("deadlineTimeHelp"),e.find('input[name="useTime"]').css("display","none"))},switchPanelsVisibility:function(t){var i=this;this.panelIds.forEach(function(e){e!==t&&i.hideDiv(e)}),this.showDiv(t)},switchTimeUnitsVisibility:function(t){var i=this;this.timeUnitIds.forEach(function(e){e!==t&&(i.hideDiv(e),$("#"+e+" select").removeAttr("name"))}),this.showDiv(t),$("#"+t+" select").attr("name","delayValue")},switchTimeContainerVisibility:function(e){e?this.showDiv("deadlineTimeContainer"):this.hideDiv("deadlineTimeContainer")},hideAllItems:function(e){var t=this;e.forEach(function(e){t.hideDiv(e)})},validateEditor:function(){var e,i=!0,n=d.constants.defaultImportDelayLimit;(i=this.isPrecededByImportIcon&&(e=$('form[name="'+this.formName+'"]')).find('input[name="deadlineType"]:checked').val()===d.constants.deadlineTypeDelay&&((e=e.find('select[name="timeUnit"]').val())===d.constants.deadlineTimeUnitMinute||e===d.constants.deadlineTimeUnitHour&&$("#deadlineTimeUnitHour select").val()<n)?!1:i)?h.saveCurrentEditorWithUndo():((e=$("#deadline-editor").find(".editor-error-messages")).html(t("error.workflow.deadlineIsTooShortForImport",n)),e.css("display","block"))},onTimeChanged:function(){var e=$('form[name="'+this.formName+'"]'),t=e.find('input[name="deadlineType"]:checked').val(),i=e.find('select[name="timeUnit"]').val();t==d.constants.deadlineTypeDelay&&i==d.constants.deadlineTimeUnitDay&&e.find('input[name="useTime"]').prop("checked",!0)},hideDiv:function(e){$('form[name="'+this.formName+'"] #'+e).css("display","none")},showDiv:function(e){$('form[name="'+this.formName+'"] #'+e).css("display","block")},dateAsUTC:function(e){return e?new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())):null},checkPresentNodeOfType:function(e){return 0<h.getNodesByTypes(e).length},checkPrecededByImportIcon:function(e){return h.getNodesByIncomingConnections(e).some(function(e){return d.NODE_TYPE_IMPORT==e.getType()})}});v.addAction({change:"deadline-editor-update"},function(){e.updateVisibility()}),v.addAction({change:"deadline-editor-time-change"},function(){e.onTimeChanged()}),v.addAction({click:"deadline-editor-save"},function(){e.validateEditor()})}),this.addDomInitializer("archive-editor-initializer",function(){var e=h.registerEditor("archive",{formName:"archiveForm",safeToSave:!0,getTitle:function(){return t("workflow.mailing.archive")},createNewArchive:function(){h.processForward(d.constants.forwardArchiveCreate,"#settings_general_campaign",l)},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]'),e=e.getData();t.submit(!1),t.get(0).reset(),h.fillFormFromObject(this.formName,e,"")},saveEditor:function(){return h.formToObject(this.formName)}});v.addAction({click:"archive-editor-new"},function(){e.createNewArchive()})}),this.addDomInitializer("report-editor-initializer",function(){var e=h.registerEditor("report",{safeToSave:!0,getTitle:function(){return t("report")},createNewReport:function(){h.processForward(d.constants.forwardReportCreate,"#reportSelector",l)},editReport:function(e){$("#forwardTargetItemId").val(e),h.processForward(d.constants.forwardReportEdit,"#reportSelector",l)},fillEditor:function(e){var e=e.getData(),t=$("#reportSelect");h.initSelectWithFirstValue(t),$("#report-editor .editor-error-messages").css("display","none"),t.select2("val",e.reports),t.select2({formatSelection:function(e){return'<a href="#" class="btn-link-light" data-action="report-editor-change" data-report-id="'+e.id+'">'+e.text+"</a>"}})},validateEditor:function(){var e=$("#reportSelect").val();e&&0<e.length?h.saveCurrentEditorWithUndo():((e=$("#report-editor").find(".editor-error-messages")).html(t("workflow.report.error.no_report")),e.css("display","block"))},saveEditor:function(){return{reports:$("#reportSelect").val()}},isSetFilledAllowed:function(){var e=$("#reportSelect").val();return e&&0<e.length}});v.addAction({click:"report-editor-change"},function(){e.editReport(this.el.data("report-id"))}),v.addAction({click:"report-editor-new"},function(){e.createNewReport()}),v.addAction({click:"report-editor-save"},function(){e.validateEditor()})}),this.addDomInitializer("recipient-editor-initializer",function(){var i=d.constants.isAltgExtended,n=h.registerEditor("recipient",{formName:"recipientForm",targetSelector:"#recipientTargetSelect",altgSelector:"#recipientAltgSelect",safeToSave:!0,getTargetFieldSelect:function(){return new e($(this.targetSelector).select2({formatSelection:function(e){return $(e.element).data("editable")?'<a href="#" class="btn-link-light" data-action="recipient-editor-target-edit" data-target-id="'+e.id+'">'+e.text+"</a>":e.text}}))},getAltgFieldSelect:function(){return new e($(this.altgSelector).select2({formatSelection:function(e){return e.text}}))},createNewTarget:function(){h.processForward(d.constants.forwardTargetGroupCreate,this.targetSelector,l)},editTarget:function(e){$("#forwardTargetItemId").val(e),h.processForward(d.constants.forwardTargetGroupEdit,this.targetSelector,l)},getTitle:function(){return t("workflow.recipient")},fillEditor:function(e){var e=e.getData(),t=(i||0<d.constants.accessLimitTargetId&&(e.targets=_.union([d.constants.accessLimitTargetId],e.targets),e.targetsOption="ALL_TARGETS_REQUIRED"),$('form[name="'+this.formName+'"]'));t.submit(!1),t.get(0).reset(),h.fillFormFromObject(this.formName,e,""),this.getTargetFieldSelect().selectValue(e.targets),i&&this.getAltgFieldSelect().selectValue(e.altgs)},saveEditor:function(){var e=h.formToObject(this.formName);return e.targets=this.getTargetFieldSelect().getSelectedValue(),i&&(e.altgs=this.getAltgFieldSelect().getSelectedValue()),e}});v.addAction({click:"recipient-editor-create-new-target"},function(){n.createNewTarget()}),v.addAction({click:"recipient-editor-save"},function(){var e;i?(e=AGN.Lib.Form.get($("#"+n.formName))).valid({})?(e.cleanErrors(),h.saveCurrentEditorWithUndo()):e.handleErrors():h.saveCurrentEditorWithUndo()}),v.addAction({click:"recipient-editor-target-edit"},function(){n.editTarget(this.el.data("target-id"))})}),this.addDomInitializer("export-editor-initializer",function(){var o=this.config,e=h.registerEditor("export",{formName:"exportForm",safeToSave:!0,getTitle:function(){return t("auto_export")},createNewAutoExport:function(){h.processForward(d.constants.forwardAutoExportCreate,'form[name="'+this.formName+'"] select[name=importexportId]',l)},editAutoExport:function(){var e=$('form[name="'+this.formName+'"] select[name=importexportId]').val();$("#forwardTargetItemId").val(e),h.processForward(d.constants.forwardAutoExportEdit,'form[name="'+this.formName+'"] select[name=importexportId]',l)},fillEditor:function(e){var i=$("#export-editor .editor-error-messages"),n=$('form[name="'+this.formName+'"]'),e=e.getData();n.submit(!1),n.get(0).reset(),h.fillFormFromObject(this.formName,e,""),this.addLinks(),"true"==o.isDisabled?(i.html(t("error.workflow.autoExportPermission")),i.css("display","block")):i.css("display","none")},validateEditor:function(){var i=$("#export-editor .editor-error-messages"),e=$('form[name="'+this.formName+'"] select[name=importexportId]');0<e.val()?$.ajax({type:"POST",url:AGN.url("/workflow/validateDependency.action"),data:{workflowId:d.workflowId||0,type:d.DEPENDENCY_TYPE_AUTO_EXPORT,entityId:e.val()}}).done(function(e){!0===e.valid?h.saveCurrentEditorWithUndo():(i.html(t("error.workflow.autoExportInUse")),i.css("display","block"))}).fail(function(){i.html(t("Error")),i.css("display","block")}):(i.html(t("error.workflow.noExport")),i.css("display","block"))},onChange:function(){this.addLinks()},addLinks:function(){0<$('form[name="'+this.formName+'"] select[name=importexportId]').val()?($("#export-editor #editAutoExportLink").css("display","block"),$("#export-editor #createAutoExportLink").css("display","none")):($("#export-editor #createAutoExportLink").css("display","block"),$("#export-editor #editAutoExportLink").css("display","none"))},saveEditor:function(){return h.formToObject(this.formName)},isSetFilledAllowed:function(){var e=$('form[name="'+this.formName+'"] select[name=importexportId]'),t=e.find(":selected");return!(0==e.val()||1!=t.data("is-available"))}});v.addAction({change:"export-editor-change"},function(){e.onChange()}),v.addAction({click:"export-editor-new"},function(){e.createNewAutoExport()}),v.addAction({click:"export-editor-autoexport"},function(){e.editAutoExport()}),v.addAction({click:"export-editor-save"},function(){e.validateEditor()})}),this.addDomInitializer("import-editor-initializer",function(){var o=this.config,e=h.registerEditor("import",{formName:"importForm",safeToSave:!0,getTitle:function(){return t("auto_import")},createNewAutoImport:function(){h.processForward(d.constants.forwardAutoImportCreate,"#importexportId",l)},editAutoImport:function(){var e=$('form[name="'+this.formName+'"] select[name=importexportId]').val();$("#forwardTargetItemId").val(e),h.processForward(d.constants.forwardAutoImportEdit,'form[name="'+this.formName+'"] select[name=importexportId]',l)},fillEditor:function(e){var i=$("#import-editor .editor-error-messages"),n=$('form[name="'+this.formName+'"]'),e=e.getData();n.submit(!1),n.get(0).reset(),h.fillFormFromObject(this.formName,e,""),this.addLinks(),"true"==o.isDisabled?(i.html(t("error.workflow.autoImportPermission")),i.css("display","block")):i.css("display","none")},validateEditor:function(){var i=$("#import-editor .editor-error-messages"),e=$('form[name="'+this.formName+'"] select[name=importexportId]');0<e.val()?$.ajax({type:"POST",url:AGN.url("/workflow/validateDependency.action"),data:{workflowId:d.workflowId||0,type:d.DEPENDENCY_TYPE_AUTO_IMPORT,entityId:e.val()}}).done(function(e){!0===e.valid?h.saveCurrentEditorWithUndo():(i.html(t("error.workflow.autoImportInUse")),i.css("display","block"))}).fail(function(){i.html(t("Error")),i.css("display","block")}):(i.html(t("error.workflow.noImport")),i.css("display","block"))},onChange:function(){this.addLinks()},addLinks:function(){0<$('form[name="'+this.formName+'"] select[name=importexportId]').val()?($("#import-editor #editAutoImportLink").css("display","block"),$("#import-editor #createAutoImportLink").css("display","none")):($("#import-editor #createAutoImportLink").css("display","block"),$("#import-editor #editAutoImportLink").css("display","none"))},saveEditor:function(){return h.formToObject(this.formName)},isSetFilledAllowed:function(){var e=$('form[name="'+this.formName+'"] select[name=importexportId]'),t=e.find(":selected");return!(0==e.val()||1!=t.data("is-available"))}});v.addAction({change:"import-editor-change"},function(){e.onChange()}),v.addAction({click:"import-editor-new"},function(){e.createNewAutoImport()}),v.addAction({click:"import-editor-update"},function(){e.editAutoImport()}),v.addAction({click:"import-editor-save"},function(){e.validateEditor()})}),this.addDomInitializer("start-editor-initializer",function(){var e,i,n,o,s=this.config,a=new p(s.form,s.container,s.selectedName,s.noMailingOption),r=s.profileFields,u=s.isBigData,l={rulesNumber:0,isStartEditor:!1,timePattern:/^(\d{2}):(\d{2})$/,getTitle:function(){return this.isStartEditor?t("workflow.start.title"):t("workflow.stop.title")},getStartStopDate:function(e){e=e||h.formToObject("startForm");var t=$('form[name="startForm"]'),i=null;if(this.isStartEditor)switch(e.startType){case d.constants.startTypeDate:i=t.find("#startDate").pickadate("picker");break;case d.constants.startTypeEvent:i=t.find("#executionDate").pickadate("picker")}else e.endType==d.constants.endTypeDate&&(i=t.find("#startDate").pickadate("picker"));if(i){e=i.get("select");if(e)return e.obj}return null},generateReminderComment:function(){var e=$('#workflowForm input[name="workflow.shortname"]').val(),i=m.getDateStr(this.getStartStopDate(),s.localeDatePattern);return(this.isStartEditor?t("workflow.start.reminder_text"):t("workflow.stop.reminder_text")).replace(/:campaignName/g,e).replace(/:startDate/g,i).replace(/:endDate/g,i)},fillEditor:function(e){var i=e.getData(),e=e.getType(),e=(this.isStartEditor="start"==e,this.updateEditorType(this.isStartEditor),$('form[name="startForm"]'));if(e.submit(!1),e.find(".rule-row").each(function(){$(this).remove()}),e.find("#remindCalendarDateTitle").text(this.isStartEditor?t("workflow.start.start_date"):t("workflow.stop.end_date")),null!=i.rules){for(var n=0;n<i.rules.length;n++){var o=i.rules[n];this.createRuleRow(n,o)}this.rulesNumber=i.rules.length}e.get(0).reset(),i.adminTimezone=s.adminTimezone,i.sendReminder=i.scheduleReminder,h.fillFormFromObject("startForm",i,""),a.setMailingId(i.mailingId),a.cleanOptions(1);var r=new Date;e.find("#startDate").pickadate("picker").set("select",this.dateAsUTC(null!=i.date?i.date:r)),e.find("#executionDate").pickadate("picker").set("select",this.dateAsUTC(null!=i.date?i.date:r)),e.find("#remindDate").pickadate("picker").set("select",this.dateAsUTC(null!=i.remindDate?i.remindDate:r)),null!=i.date?(e.find("#startTime").val(this.formatTime(i.hour,i.minute)),e.find("#remindTime").val(this.formatTime(i.remindHour,i.remindMinute))):this.setCurrentTime(),this.updateChainFieldsVisibility(),this.updateVisibility(),this.updateOperatorsAvailability(),i.startType==d.constants.startTypeEvent&&i.event==d.constants.startEventReaction&&i.reaction==d.constants.reactionClickedLink&&0!=i.mailingId&&null!=i.mailingId&&this.onMailingSelectChange(i.mailingId,i.linkId),i.comment||e.find("#reminderComment").val(this.generateReminderComment()),r=""!=i.recipients?2:1,$('#start-editor input[name="userType"][value='+r+"]").prop("checked",!0).trigger("change"),$("#start-editor .editor-error-messages").css("display","none")},saveEditor:function(){var e=h.formToObject("startForm"),t=(e.date=this.getStartStopDate(e),null==e.date&&(e.date=new Date,e.date.setHours(0),e.date.setMinutes(0),e.date.setSeconds(0),e.date.setMilliseconds(0)),$('form[name="startForm"] #startTime').val()),i=((t=this.timePattern.exec(t))?(e.hour=t[1],e.minute=t[2]):(e.hour=0,e.minute=0),e.scheduleReminder=e.sendReminder,$('form[name="startForm"] #remindTime').val());return(t=this.timePattern.exec(i))?(e.remindHour=t[1],e.remindMinute=t[2]):(e.remindHour=0,e.remindMinute=0),"true"==$('input[name="remindSpecificDate"]:checked').val()?e.remindDate=$('form[name="startForm"] #remindDate').pickadate("picker").get("select").obj:(e.remindDate=e.date,e.remindHour=0,e.remindMinute=0),null==e.rules&&(e.rules=[]),null!=e.linkId&&null!=e.linkId||(e.linkId=0),e.dateFieldOperator!=s.equelsOperatorCode&&(e.dateFieldOperator=s.equelsOperatorCode),2==e.userType?(e.remindAdminId=0,e.recipients=$.trim(e.recipients).toLowerCase().split(/[,;\s\n\r]+/).filter(function(e){return!!e}).join(", ")):e.recipients="",delete e.userType,e},validateEditorInternal:function(e){var i=this,n=!0,o=$("#start-editor .editor-error-messages"),r=$('form[name="startForm"]'),s=(this.isStartEditor?r.find('input[name="startType"]:checked'):r.find('input[name="endType"]:checked')).val();if(this.isStartEditor&&s==d.constants.startTypeEvent){switch(r.find('select[name="event"]').val()){case d.constants.startTypeDate:r.find("#executionDate").pickadate("picker").get("select").obj?(a=r.find("#startTime").val(),i.timePattern.test(a)||(n=!1)):n=!1;var a=r.find("#dateFieldValue");$.trim(a.val())||(n=!1,e&&(o.html(t("error.workflow.startDateOmitted")),o.css("display","block")));break;case d.constants.startEventReaction:switch(r.find('select[name="reaction"]').val()){case d.constants.reactionClickedLink:var l=r.find('select[name="linkId"]').val();parseInt(l,10)<=0&&(n=!1,e&&(o.html(t("error.workflow.noLinkSelected")),o.css("display","block")));case d.constants.reactionOpened:case d.constants.reactionClicked:l=r.find('select[name="mailingId"]').val();parseInt(l,10)<=0&&(n=!1);break;case d.constants.reactionChangeOfProfile:void 0===u||1!=u||r.find('select[name="profileField"]').val()||(n=!1);break;case d.constants.reactionWaitingForConfirm:case d.constants.reactionOptIn:case d.constants.reactionOptOut:break;default:n=!1}}c()}return(this.isStartEditor&&s==d.constants.startTypeDate||!this.isStartEditor&&s==d.constants.endTypeDate)&&c(),n&&r.find("#sendReminder").is(":checked")&&(2!=r.find('input[name="userType"]:checked').val()||$.trim(r.find('textarea[name="recipients"]').val()).split(/[,;\s\n\r]+/).filter(function(e){return!!e}).length||e&&(n=!1,o.html(t("error.workflow.emptyRecipientList")),o.css("display","block"))),n;function c(){var e;r.find("#startDate").pickadate("picker").get("select").obj?(e=r.find("#startTime").val(),i.timePattern.test(e)||(n=!1)):n=!1}},validateEditor:function(){this.validateEditorInternal(!0)&&h.saveCurrentEditorWithUndo()},isSetFilledAllowed:function(){return this.validateEditorInternal(!1)},setCurrentTime:function(){var t=this;$.ajax({type:"GET",url:AGN.url("/workflow/getCurrentAdminTime.action"),success:function(e){$('form[name="startForm"] #startTime').val(t.formatTime(e.hour,e.minute)),$('form[name="startForm"] #remindTime').val(t.formatTime(e.remindHour,e.remindMinute))}})},updateEditorType:function(e){var i=$("#startStopType");i.empty(),e?(i.append(f.text("start-types")),$("#eventReaction").html(t("workflow.start.reaction_based")),$("#eventDate").html(t("workflow.start.date_based"))):(i.append(f.text("stop-types")),this.checkPresentNodeOfType([d.NODE_TYPE_ACTION_BASED_MAILING,d.NODE_TYPE_DATE_BASED_MAILING])?$("#endTypeActiomaticLabel").html(t("workflow.stop.open_end")):$("#endTypeActiomaticLabel").html(t("workflow.stop.automatic_end")))},onRulesChanged:function(){var n=0;$('form[name="startForm"] #profileFieldAddedRules tr').each(function(){var e=$(this),t=e.attr("id"),i=t.substring(5),t=$("#"+t);t.find(".rule-field").attr("name",function(e,t){return t?t.replace(i,n+""):""}),t.find(".delete-rule").attr("data-rule-index",function(e,t){return t==i?n:t}),e.attr("id","rule_"+n),n++}),this.updateChainFieldsVisibility()},updateChainFieldsVisibility:function(){0<this.rulesNumber?($('form[name="startForm"] [name="rules[0].chainOperator"]').css("visibility","hidden"),$('form[name="startForm"] #newRule_chainOperator').css("visibility","visible")):$('form[name="startForm"] #newRule_chainOperator').css("visibility","hidden")},updateOperatorsAvailability:function(){var e=$('form[name="startForm"] select[name="profileField"]').val(),t=r[e];$('form[name="startForm"] select.primary-operator').each(function(){var e=$(this);e.children("option").prop("disabled",function(){var e=$(this).data("types");return!("*"==e||!e)&&-1==e.split(/[\s,]+/).indexOf(t)}),AGN.Lib.CoreInitializer.run("select",e),null==e.val()&&h.initSelectWithFirstValue(e)})},addRule:function(){var e=$('form[name="startForm"]'),t={chainOperator:e.find("#newRule_chainOperator").val(),parenthesisOpened:e.find("#newRule_parenthesisOpened").val(),primaryOperator:e.find("#newRule_primaryOperator").val(),primaryValue:e.find("#newRule_primaryValue").val(),parenthesisClosed:e.find("#newRule_parenthesisClosed").val()};this.createRuleRow(this.rulesNumber,t),h.fillFormFromObject("startForm",t,"rules["+this.rulesNumber+"]."),this.rulesNumber++,$("#newRule_primaryOperator").val()==d.constants.operatorIs&&$("#newRule_primaryValue").parents("td").replaceWith(this.createSimpleNewRuleValueField()),this.updateChainFieldsVisibility(),this.updateOperatorsAvailability(),e.find("#profileFieldRuleAdd select").each(function(){h.initSelectWithFirstValue($(this))}),e.find("#profileFieldRuleAdd input").each(function(){$(this).val("")})},removeRuleRow:function(e){$('form[name="startForm"] #rule_'+e).remove(),this.rulesNumber--,this.onRulesChanged()},createRuleRow:function(e,i){var n=$('form[name="startForm"] #profileFieldAddedRules'),o=this.createSimpleRuleValueField(e),r=g.arrayAsOptionsHtml(d.constants.operators);this.curProfileField&&this.curProfileField.toLowerCase()==d.GENDER_PROFILE_FIELD?o=this.createGenderSelect():i.primaryOperator==d.constants.operatorIs&&(o=this.createIsOperatorSelect()),n.append('<tr class="rule-row" id="rule_'+e+'"><td><select name="rules['+e+'].chainOperator" class="rule-field"><option value="'+d.constants.chainOperatorAnd+'">'+t("workflow.defaults.and")+'</option><option value="'+d.constants.chainOperatorOr+'">'+t("workflow.defaults.or")+'</option></select></td><td><select name="rules['+e+'].parenthesisOpened" class="parentheses-opened rule-field"><option value="0">&nbsp</option><option value="1">(</option></select></td><td><select name="rules['+e+'].primaryOperator" class="primary-operator rule-field" data-action="start-rule-operator-change">'+r+"</select></td>"+o+'<td><select name="rules['+e+'].parenthesisClosed" class="parenthesis-closed rule-field"><option value="0">&nbsp</option><option value="1">)</option></select></td><td><a class="mailing_delete delete-rule btn btn-regular btn-alert" href="#" data-action="start-editor-rule-remove" data-rule-index="'+e+'"><i class="icon icon-minus-circle"></i></a></td></tr>'),this.addRuleProperties($("#rule_"+e+" .primary-value"),e),AGN.runAll(n)},onStartTypeChanged:function(){var e=(this.isStartEditor?$('form[name="startForm"] input[name="startType"]:checked'):$('form[name="startForm"] input[name="endType"]:checked')).val();this.isStartEditor&&e==d.constants.startTypeDate||!this.isStartEditor&&e==d.constants.endTypeDate?(this.toggleFormat(),this.hideDiv("startEventPanel"),this.showDiv("startDatePanel"),this.showDiv("startIconTime"),this.showDiv("startRemindAdmin")):this.isStartEditor&&e==d.constants.startTypeEvent?(this.hideDiv("startDatePanel"),this.showDiv("startEventPanel"),this.showDiv("startIconTime"),this.showDiv("startRemindAdmin"),this.onStartEventChanged()):(this.isStartEditor&&e==d.constants.startTypeOpen||!this.isStartEditor&&e==d.constants.endTypeAutomatic)&&(this.hideDiv("startDatePanel"),this.hideDiv("startEventPanel"),this.hideDiv("startIconTime"),this.hideDiv("startRemindAdmin"))},onStartEventChanged:function(){var e=$("#startEvent").val();e==d.constants.startEventReaction?(this.toggleFormat(),this.hideDiv("dateStartPanel"),this.showDiv("reactionStartPanel"),this.onExecutionChanged(),this.onProfileFieldChanged()):e==d.constants.startEventDate&&(this.toggleFormat(),this.hideDiv("reactionStartPanel"),this.showDiv("dateStartPanel"),this.hideDiv("executionDateLabel"),this.showDiv("firstExecutionDateLabel"),$("#startIconDateFormat").insertAfter("#startIconDateFieldOperator"),this.showDiv("startIconDateFormat"))},toggleFormat:function(){n=n||$("select#startEvent"),i=i||$("input#typeEvent"),e=e||$("input#startTime"),i.prop("checked"),o=n.val()==d.constants.startEventDate,i.prop("checked")&&o?e.inputmask("h:00"):e.inputmask("h:s")},onRuleModeChanged:function(){"false"==$('input[name="useRules"]:checked').val()?this.hideDiv("profileFieldRules"):this.showDiv("profileFieldRules")},onProfileFieldChanged:function(){var e=$('form[name="startForm"] select[name="profileField"]').val(),e=r[e];e&&e.toLowerCase()==d.FIELD_TYPE_DATE?($("#startIconDateFormat").insertAfter("#reactionProfileField"),this.showDiv("startIconDateFormat")):this.hideDiv("startIconDateFormat"),this.updateOperatorsAvailability()},getRuleIndex:function(e){return e.attr("id").substring(5)},onRuleOperatorChanged:function(e){var t,i;this.curProfileField&&this.curProfileField.toLowerCase()==d.GENDER_PROFILE_FIELD||(i=(t=e.closest("tr")).attr("id")?this.getRuleIndex(t):null,e.val()==d.constants.operatorIs?(e=$(this.createIsOperatorSelect()),t.find(".primary-value").parents("td").replaceWith(e),AGN.Lib.CoreInitializer.run("select",e)):t.find(".primary-value").hasClass("null-select")&&(e=null==i?this.createSimpleNewRuleValueField():this.createSimpleRuleValueField(i),t.find(".primary-value").parents("td").replaceWith(e)),null==i?this.addNewRuleProperties(t.find(".primary-value")):this.addRuleProperties(t.find(".primary-value"),i))},createGenderSelect:function(){return'<td><select class="primary-value form-control">'+g.mapAsOptionsHtml(d.constants.genderOptions)+"</select></td>"},createIsOperatorSelect:function(){return'<td><select class="primary-value null-select form-control"><option value="NULL">NULL</option><option value="NOT_NULL">NOT NULL</option></select></td>'},createSimpleRuleValueField:function(e){return'<td><input name="rules['+e+'].primaryValue" type="text" class="primary-value rule-field form-control"/></td>'},createSimpleNewRuleValueField:function(){return'<td><input id="newRule_primaryValue" type="text" class="primary-value form-control"/></td>'},addRuleProperties:function(e,t){e.filter("select, input").attr("name","rules["+t+"].primaryValue").addClass("rule-field")},addNewRuleProperties:function(e){e.filter("select, input").attr("id","newRule_primaryValue")},onExecutionChanged:function(){"false"==$('input[name="executeOnce"]:checked').val()?(this.hideDiv("executionDateLabel"),this.showDiv("firstExecutionDateLabel")):(this.hideDiv("firstExecutionDateLabel"),this.showDiv("executionDateLabel"))},onReactionChanged:function(){var e=$('form[name="startForm"] #startReaction').val();e==d.constants.reactionOpened||e==d.constants.reactionNotOpened||e==d.constants.reactionClicked||e==d.constants.reactionNotClicked||e==d.constants.reactionBought||e==d.constants.reactionNotBought||e==d.constants.reactionClickedLink?(this.hideDiv("reactionStartProfile"),this.showDiv("reactionStartMailing")):e==d.constants.reactionChangeOfProfile?(this.hideDiv("reactionStartMailing"),this.showDiv("reactionStartProfile")):(this.hideDiv("reactionStartMailing"),this.hideDiv("reactionStartProfile")),e==d.constants.reactionClickedLink?this.showDiv("reactionStartMailingLink"):this.hideDiv("reactionStartMailingLink")},onReminderChanged:function(){return $('input[name="sendReminder"]:checked').val()?($('form[name="startForm"]').find("#reminderComment").val(this.generateReminderComment()),this.showDiv("reminderDetails")):this.hideDiv("reminderDetails"),!1},onScheduleReminderDateChanged:function(){return"true"==$('form[name="startForm"] input[name="remindSpecificDate"]:checked').val()?this.showDiv("dateTimePicker"):this.hideDiv("dateTimePicker"),!1},onMailingSelectChange:function(e,t){var i=$('form[name="startForm"] select[name="linkId"]'),e=parseInt(e,10);0<e?(i.attr("readonly","readonly"),$.ajax({type:"POST",url:AGN.url("/workflow/getMailingLinks.action"),data:{mailingId:e},success:function(e){i.empty(),$.each(e,function(e,t){i.append($("<option></option>",{value:t.id,text:t.url}))}),i.removeAttr("readonly"),null!=t?(i.val(t),h.initSelectWithValueOrChooseFirst(i,t)):h.initSelectWithFirstValue(i)}})):i.empty()},updateVisibility:function(){this.onStartTypeChanged(),this.onStartEventChanged(),this.onReactionChanged(),this.onRuleModeChanged(),this.onExecutionChanged(),this.onReminderChanged(),this.onScheduleReminderDateChanged()},hideDiv:function(e){$('form[name="startForm"] #'+e).css("display","none")},showDiv:function(e){$('form[name="startForm"] #'+e).css("display","")},dateAsUTC:function(e){return e?new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())):null},formatTime:function(e,t){var i=0,n=0;return((i=0<=(e=parseInt(e,10))?e:i)<10?"0"+i:i)+":"+((n=0<=(t=parseInt(t,10))?t:n)<10?"0"+n:n)},checkPresentNodeOfType:function(e){return 0<h.getNodesByTypes(e).length}};h.registerEditor("start",l),h.registerEditor("stop",l),v.addAction({change:"start-editor-execution-changed"},function(){l.onExecutionChanged()}),v.addAction({change:"start-editor-event-changed"},function(){l.onStartEventChanged()}),v.addAction({change:"start-editor-type-changed"},function(){l.onStartTypeChanged()}),v.addAction({change:"start-editor-rule-changed"},function(){l.onRuleModeChanged()}),v.addAction({change:"start-editor-reaction-changed"},function(){l.onReactionChanged()}),v.addAction({change:"start-editor-profile-field-changed"},function(){l.onProfileFieldChanged()}),v.addAction({click:"start-editor-add-rule"},function(){l.addRule()}),v.addAction({click:"start-editor-reminder-changed"},function(){l.onReminderChanged()}),v.addAction({click:"start-editor-schedule-reminder-date-changed"},function(){l.onScheduleReminderDateChanged()}),v.addAction({click:"start-editor-validate"},function(){l.validateEditor()}),v.addAction({click:"start-editor-mailing-sort-date"},function(){a.onMailingSortClick("date")}),v.addAction({change:"start-editor-mailing-select"},function(){l.onMailingSelectChange(this.el.val())}),v.addAction({click:"start-editor-mailing-sort-shortname"},function(){a.onMailingSortClick("shortname")})}),this.addDomInitializer("decision-editor-initializer",function(){var s,l=this.config,n=l.profileFields,a=new p(l.form,l.container,l.selectName,l.noMailingOption),e=h.registerEditor("decision",{rulesNumber:0,rulePrefix:"decision_",prevProfileField:"",curProfileField:"",getTitle:function(){return t("workflow.decision")},fillEditor:function(e){var t=$('form[name="decisionForm"]'),i=(s=0,e.getData());if(t.submit(!1),t.find(".rule-row").each(function(){$(this).remove()}),this.curProfileField=i.profileField,null!=i.rules){for(var n=0;n<i.rules.length;n++){var o=i.rules[n];this.createRuleRow(n,o)}this.rulesNumber=i.rules.length}t.get(0).reset(),h.fillFormFromObject("decisionForm",i,""),a.setMailingId(i.mailingId),a.cleanOptions(1),null==i.decisionDate&&(i.decisionDate=new Date);var e=t.find("#decisionDate"),r=t.find("#decisionTime");this.checkPresentNodeOfType([d.NODE_TYPE_ACTION_BASED_MAILING,d.NODE_TYPE_DATE_BASED_MAILING])?(e.parent().parent().hide(),r.parent().parent().parent().parent().hide()):(e.parent().parent().show(),r.parent().parent().parent().parent().show(),e.pickadate("picker").set("select",this.dateAsUTC(i.decisionDate)),r.val(("0"+i.decisionDate.getHours()).slice(-2)+":"+("0"+i.decisionDate.getMinutes()).slice(-2))),this.updateChainFieldsVisibility(),this.updateVisibility(),this.updateDateFormatVisibility(),this.updateOperatorsAvailability(),i.decisionType==d.constants.decisionTypeDecision&&i.decisionCriteria==d.constants.decisionReaction&&i.reaction==d.constants.reactionClickedLink&&0!=i.mailingId&&null!=i.mailingId?this.onMailingSelectChange(i.mailingId,i.linkId):h.resetSelect(t.find('select[name="linkId"]')),$("#decision-editor .editor-error-messages").css("display","none")},saveEditor:function(){var e,t=h.formToObject("decisionForm");return t.decisionCriteria==d.constants.decisionProfileField&&0!=s&&(t.mailingId=s),s=0,null==t.rules&&(t.rules=[]),t.threshold||(t.threshold=""),this.checkPresentNodeOfType([d.NODE_TYPE_ACTION_BASED_MAILING,d.NODE_TYPE_DATE_BASED_MAILING])?t.decisionDate=null:(e=$('form[name="decisionForm"]'),t.decisionDate=e.find("#decisionDate").pickadate("picker").get("select").obj,e=e.find("#decisionTime").val(),t.decisionDate.setHours(e.substring(0,2)),t.decisionDate.setMinutes(e.substring(3,5))),t},validateEditor:function(){var e=$('form[name="decisionForm"]'),i=$("#decision-editor .editor-error-messages"),n=e.find('input[name="decisionType"]:checked').val(),o=$("#decisionCriteria").val(),r=e.find('select[name="mailingId"]').val(),s=e.find('select[name="linkId"]').val(),a=e.find('select[name="reaction"]').val(),e=e.find('input[name="threshold"]').val();n==d.constants.decisionTypeDecision&&o==d.constants.decisionReaction&&0==r?(i.html(t("error.workflow.noMailing")),i.css("display","block")):n!=d.constants.decisionTypeDecision||o!=d.constants.decisionReaction||a!=d.constants.reactionClickedLink||0!=s&&null!=s?n==d.constants.decisionTypeDecision&&o==d.constants.decisionProfileField&&0==l.isMailtrackingActive||(n!=d.constants.decisionTypeAutoOptimization||!e||(r=parseInt(e,10))&&0<r?h.saveCurrentEditorWithUndo():(i.html(t("error.workflow.noValidThreshold")),i.css("display","block"))):(i.html(t("error.workflow.noLinkSelected")),i.css("display","block"))},onTypeChanged:function(){var e=$('form[name="decisionForm"] input[name="decisionType"]:checked').val();e==d.constants.decisionTypeDecision?(this.hideDecisionFormDiv("autoOptimizationPanel"),this.showDecisionFormDiv("decisionPanel")):e==d.constants.decisionTypeAutoOptimization&&(this.hideDecisionFormDiv("decisionPanel"),this.showDecisionFormDiv("autoOptimizationPanel")),this.updateVisibilityOfRuleMailingReceived()},onDecisionReactionChanged:function(){var e;$('form[name="decisionForm"] select[name="reaction"]').val()==d.constants.reactionClickedLink?(this.showDecisionFormDiv("reactionLinkPanel"),e=$('form[name="decisionForm"] select[name="mailingId"]').val(),this.onMailingSelectChange(e,0)):this.hideDecisionFormDiv("reactionLinkPanel")},onCriteriaChanged:function(){var e=$('form[name="decisionForm"] select[name="decisionCriteria"]').val();e==d.constants.decisionReaction?(this.hideDecisionFormDiv("decisionProfileFieldPanel"),this.showDecisionFormDiv("decisionReactionPanel")):e==d.constants.decisionProfileField&&(this.hideDecisionFormDiv("decisionReactionPanel"),this.showDecisionFormDiv("decisionProfileFieldPanel")),this.updateVisibilityOfRuleMailingReceived()},onMailingSelectChange:function(e,t){var i=$('form[name="decisionForm"] select[name="linkId"]'),e=parseInt(e,10);0<e?(i.attr("readonly","readonly"),$.ajax({type:"POST",url:AGN.url("/workflow/getMailingLinks.action"),data:{mailingId:e},success:function(e){i.empty(),$.each(e,function(e,t){i.append($("<option></option>",{value:t.id,text:t.url}))}),i.removeAttr("readonly"),null!=t?(i.val(t),h.initSelectWithValueOrChooseFirst(i,t)):h.initSelectWithFirstValue(i)}})):i.empty()},onRuleOperatorChanged:function(e){var t,i;this.curProfileField&&this.curProfileField.toLowerCase()==d.GENDER_PROFILE_FIELD||(i=(t=e.closest("tr")).attr("id")?this.getRuleIndex(t):null,e.val()==d.constants.operatorIs?(e=$(this.createIsOperatorSelect()),t.find(".primary-value").parents("td").replaceWith(e),AGN.Lib.CoreInitializer.run("select",e)):t.find(".primary-value").hasClass("null-select")&&(e=null==i?this.createSimpleNewRuleValueField():this.createSimpleRuleValueField(i),t.find(".primary-value").parents("td").replaceWith(e)),null==i?this.addNewRuleProperties(t.find(".primary-value")):this.addRuleProperties(t.find(".primary-value"),i))},getRuleIndex:function(e){return e.attr("id").substring(14)},onProfileFieldChanged:function(){var e=$('form[name="decisionForm"]'),t=e.find('select[name="profileField"]').val(),i=(this.curProfileField=t,this);t&&t.toLowerCase()==d.GENDER_PROFILE_FIELD?($("#decisionProfileFieldRules .primary-value").each(function(){$(this).parents("td").remove()}),e.find(".rule-row").each(function(){var e=i.getRuleIndex($(this));$(this).find(".decision-rule-operator").parents("td").after(i.createGenderSelect()),i.addRuleProperties($(this).find(".primary-value"),e)}),$("#decision_newRule_primaryOperator").parents("td").after(this.createGenderSelect()),this.addNewRuleProperties($("#decisionProfileFieldRuleAdd .primary-value"))):this.prevProfileField&&this.prevProfileField.toLowerCase()==d.GENDER_PROFILE_FIELD&&($("#decisionProfileFieldRules .primary-value").each(function(){$(this).parents("td").remove()}),e.find(".rule-row").each(function(){var e=i.getRuleIndex($(this));$(this).find(".decision-rule-operator").val()==d.constants.operatorIs?($(this).find(".primary-value").parents("td").remove(),$(this).find("select").parents("td").after(i.createIsOperatorSelect()),i.addRuleProperties($(this).find(".primary-value"),e)):$(this).find(".decision-rule-operator").parents("td").after(i.createSimpleRuleValueField(e))}),$("#decision_newRule_primaryOperator").val()==d.constants.operatorIs?($("#decisionProfileFieldRuleAdd").find("select").parents("td").after(this.createIsOperatorSelect()),this.addNewRuleProperties($("#decisionProfileFieldRuleAdd .primaryValue"))):$("#decision_newRule_primaryOperator").parents("td").after(this.createSimpleNewRuleValueField())),this.updateDateFormatVisibility(),this.updateOperatorsAvailability(),this.prevProfileField=t},updateDateFormatVisibility:function(){var e=$('form[name="decisionForm"] select[name="profileField"]').val(),e=n[e];e&&e.toLowerCase()==d.FIELD_TYPE_DATE?this.showDecisionFormDiv("decisionDateFormat"):this.hideDecisionFormDiv("decisionDateFormat")},updateOperatorsAvailability:function(){var e=$('form[name="decisionForm"]'),t=e.find('select[name="profileField"]').val(),i=n[t];e.find("select.decision-rule-operator").each(function(){var e=$(this);e.children("option").prop("disabled",function(){var e=$(this).data("types");return t&&t.toLowerCase()==d.GENDER_PROFILE_FIELD?"="!=this.text&&"!="!=this.text:!("*"==e||!e)&&-1==e.split(/[\s,]+/).indexOf(i)}),AGN.Lib.CoreInitializer.run("select",e),null==e.val()&&h.initSelectWithFirstValue(e)})},onRulesChanged:function(){var n=0,o=this;$('form[name="decisionForm"] #decisionProfileFieldAddedRules .rule-row').each(function(){var e=$(this),t=e.attr("id"),i=o.getRuleIndex(e),t=$("#"+t);t.find(".rule-field").attr("name",function(e,t){return t?t.replace(i,n+""):""}),t.find(".delete-rule").attr("data-rule-index",function(e,t){return t==i?n:t}),e.attr("id","decision_rule_"+n),n++}),this.updateChainFieldsVisibility()},updateChainFieldsVisibility:function(){var e=$('form[name="decisionForm"]');0<this.rulesNumber?(e.find('[name="rules[0].chainOperator"]').css("visibility","hidden"),e.find("#decision_newRule_chainOperator").css("visibility","visible")):e.find("#decision_newRule_chainOperator").css("visibility","hidden")},addRule:function(){var e=$('form[name="decisionForm"]'),t={chainOperator:e.find("#decision_newRule_chainOperator").val(),parenthesisOpened:e.find("#decision_newRule_parenthesisOpened").val(),primaryOperator:e.find("#decision_newRule_primaryOperator").val(),primaryValue:e.find("#decision_newRule_primaryValue").val(),parenthesisClosed:e.find("#decision_newRule_parenthesisClosed").val()};this.createRuleRow(this.rulesNumber,t),h.fillFormFromObject("decisionForm",t,"rules["+this.rulesNumber+"]."),this.rulesNumber++,$("#decision_newRule_primaryOperator").val()==d.constants.operatorIs&&$("#decision_newRule_primaryValue").parents("td").replaceWith(this.createSimpleNewRuleValueField()),this.updateChainFieldsVisibility(),this.updateOperatorsAvailability(),e.find("#decisionProfileFieldRuleAdd select").each(function(){h.initSelectWithFirstValue($(this))}),e.find("#decisionProfileFieldRuleAdd input").each(function(){$(this).val("")})},removeRuleRow:function(e){$('form[name="decisionForm"] #decision_rule_'+e).remove(),this.rulesNumber--,this.onRulesChanged()},createRuleRow:function(e,i){var n=$('form[name="decisionForm"]'),o=this.createSimpleRuleValueField(e),r=g.arrayAsOptionsHtml(d.constants.operators);this.curProfileField&&this.curProfileField.toLowerCase()==d.GENDER_PROFILE_FIELD?o=this.createGenderSelect():i.primaryOperator==d.constants.operatorIs&&(o=this.createIsOperatorSelect()),n.find("#decisionProfileFieldAddedRules").append('<tr class="rule-row" id="decision_rule_'+e+'"><td><select name="rules['+e+'].chainOperator" class="rule-field"><option value="'+d.constants.chainOperatorAnd+'">'+t("workflow.defaults.and")+'</option><option value="'+d.constants.chainOperatorOr+'">'+t("workflow.defaults.or")+'</option></select></td><td><select name="rules['+e+'].parenthesisOpened" class="parentheses-opened rule-field"><option value="0">&nbsp</option><option value="1">(</option></select></td><td><select name="rules['+e+'].primaryOperator" class="decision-rule-operator rule-field" data-action="decision-rule-operator-change">'+r+"</select></td>"+o+'<td><select name="rules['+e+'].parenthesisClosed" class="parenthesis-closed rule-field"><option value="0">&nbsp</option><option value="1">)</option></select></td><td><a class="mailing_delete delete-rule btn btn-regular btn-alert" href="#" data-action="decision-editor-rule-remove" data-rule-index="'+e+'"><i class="icon icon-minus-circle"></i></a></td></tr>'),this.addRuleProperties($("#decision_rule_"+e+" .primary-value"),e),AGN.runAll(n.find("#decisionProfileFieldAddedRules"))},createGenderSelect:function(){return'<td><select class="primary-value form-control">'+g.mapAsOptionsHtml(d.constants.genderOptions)+"</select></td>"},createIsOperatorSelect:function(){return'<td><select class="primary-value null-select form-control"><option value="NULL">NULL</option><option value="NOT_NULL">NOT NULL</option></select></td>'},createSimpleRuleValueField:function(e){return'<td><input name="rules['+e+'].primaryValue" type="text" class="primary-value rule-field form-control"/></td>'},createSimpleNewRuleValueField:function(){return'<td><input id="decision_newRule_primaryValue" type="text" class="primary-value form-control"/></td>'},addRuleProperties:function(e,t){e.filter("select, input").attr("name","rules["+t+"].primaryValue").addClass("rule-field")},addNewRuleProperties:function(e){e.filter("select, input").attr("id","decision_newRule_primaryValue")},updateVisibility:function(){this.onTypeChanged(),this.onDecisionReactionChanged(),this.onCriteriaChanged()},hideDecisionFormDiv:function(e){$('form[name="decisionForm"] #'+e).css("display","none")},showDecisionFormDiv:function(e){$('form[name="decisionForm"] #'+e).css("display","block")},updateVisibilityOfRuleMailingReceived:function(){var t,e=$('form[name="decisionForm"] input[name="decisionType"]:checked').val();e==d.constants.decisionTypeAutoOptimization?this.hideDecisionFormDiv("ruleMailingReceivedWrapper"):e==d.constants.decisionTypeDecision&&((e=$('form[name="decisionForm"] select[name="decisionCriteria"]').val())==d.constants.decisionReaction?this.hideDecisionFormDiv("ruleMailingReceivedWrapper"):e==d.constants.decisionProfileField&&(this.hideDecisionFormDiv("ruleMailingReceivedWrapper"),t=this.showDecisionFormDiv,h.forEachPreviousNode(function(e){if(d.NODE_TYPES_MAILING.includes(e.getType()))return e=e.getData(),s=e.mailingId,t("ruleMailingReceivedWrapper"),!1})))},dateAsUTC:function(e){return e?new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())):null},checkPresentNodeOfType:function(e){return 0<h.getNodesByTypes(e).length}});v.addAction({click:"decision-editor-mailing-sort-shortname"},function(){a.onMailingSortClick("shortname")}),v.addAction({click:"decision-editor-mailing-sort-date"},function(){a.onMailingSortClick("date")}),v.addAction({change:"decision-editor-mailing-select"},function(){e.onMailingSelectChange(this.el.val())}),v.addAction({change:"decision-rule-operator-change"},function(){e.onRuleOperatorChanged(this.el)}),v.addAction({click:"decision-editor-rule-remove"},function(){e.removeRuleRow(this.el.data("rule-index"))}),v.addAction({click:"decision-editor-rule-add"},function(){e.addRule()}),v.addAction({change:"decision-editor-type-change"},function(){e.onTypeChanged()}),v.addAction({change:"decision-editor-criteria-change"},function(){e.onCriteriaChanged()}),v.addAction({change:"decision-editor-reaction-change"},function(){e.onDecisionReactionChanged()}),v.addAction({click:"decision-editor-save"},function(){e.validateEditor()}),v.addAction({change:"decision-editor-profile-field-change"},function(){e.onProfileFieldChanged()})}),this.addDomInitializer("mailing-editor-initializer",function(){var e=this.config,n=new a(e,l),i=h.registerEditor("mailing",{formName:"mailingForm",safeToSave:!0,getTitle:function(){return t("workflow.defaults.mailing")},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]'),i=e.getData();t.submit(!1),t.get(0).reset(),h.fillFormFromObject(this.formName,i,""),n.fillEditorBase(e),$("#mailing-editor .editor-error-messages").css("display","none")},createNewMailing:function(){n.createNewMailing(d.constants.forwardMailingCreate)},editMailing:function(){n.editMailing(d.constants.forwardMailingEdit)},copyMailing:function(){n.copyMailing(d.constants.forwardMailingCopy)},saveEditor:function(){return n.setNodeFields(),n.disableInputs(),h.formToObject(this.formName)},saveWithCheckStatus:function(){n.showSecurityQuestion()&&h.saveCurrentEditorWithUndo(!1,n)}});v.addAction({click:"mailing-editor-save"},function(){n.validateEditor(i.saveWithCheckStatus)}),v.addAction({click:"mailing-editor-base-close"},function(){n.closeOneMailinglistWarningDialog()}),v.addAction({click:"mailing-editor-base-accept"},function(){n.acceptOneMailinglistPerCampaign()}),v.addAction({click:"mailing-editor-base-sort-shortname"},function(){n.onMailingSortClick("shortname","shortname")}),v.addAction({click:"mailing-editor-base-sort-data"},function(){var e=g.getConfigData(this.el);n.onMailingSortClick("shortname",e.sortByDate)}),v.addAction({change:"mailing-editor-base-status-change"},function(){n.onMailingsStatusChange(this.el.val())}),v.addAction({change:"mailing-editor-base-select-change"},function(){n.onMailingSelectChange(this.el.val())}),v.addAction({click:"mailing-editor-base-secure-cancel"},function(){n.cancelSecurityDialog()}),v.addAction({click:"mailing-editor-base-toggle-settings"},function(){var e=g.getConfigData(this.el);n.toggleSendSettings(e.editorId)})}),this.addDomInitializer("followup-mailing-editor-initializer",function(){var e=this.config.baseMailingData,o=this.config.followupMailingData,r=(e.$dropdown=$("#followup-m-editor"),new a(e,l)),s=new a(o,l),i=(r.selectedFollowUpMailingId=0,r.findPreviousMailingIds=function(){var i=[];return h.forEachPreviousNode(function(e){var t=e.getType();d.NODE_TYPES_MAILING.includes(t)&&d.NODE_TYPE_FOLLOWUP_MAILING!=t&&i.push(e.getId())}),i},r.getMailingsByWorkStatus=function(s,a,l,c){var u=this,d=$(this.formNameJId+" "+this.selectNameJId),e=_.uniq(this.findPreviousMailingIds()).toString();d.attr("readonly","readonly"),$.ajax({type:"POST",url:AGN.url("/workflow/getMailingsByWorkStatus.action"),data:{mailingTypes:this.mailingTypesForLoading.join(","),status:s,sort:a,order:l,mailingId:this.selectedFollowUpMailingId,parentMailingId:$(this.formNameJId+" "+this.selectNameJId).val(),mailingStatus:"W",takeMailsForPeriod:!0,mailingsInCampaign:e},success:function(e){d.html(""),d.append('<option value="0">'+t("workflow.defaults.no_mailing")+"</option>");for(var i=0;i<e.length;i++){var n=e[i],o="",r="";"mailing.status.sent"!=n.WORK_STATUS&&"mailing.status.norecipients"!=n.WORK_STATUS||(o="style='color: #808080;'"),c==n.MAILING_ID&&(r="selected"),d.append("<option "+o+" value='"+n.MAILING_ID+"' status='"+n.WORK_STATUS+"' senddate='"+n.SENDDATE+"' "+r+">"+n.SHORTNAME+"</option>")}d.removeAttr("readonly"),u.mailingsStatus=s,u.mailingsSort=a,u.mailingsOrder=l,d.val(u.mailingId),h.initSelectWithValueOrChooseFirst(d,u.mailingId)}})},s.onMailingSelectChange=function(e){r.selectedFollowUpMailingId=e,this.setSelectMailingOptions(e)},h.registerEditor("followup_mailing",{formName:"followupMailingForm",safeToSave:!1,getTitle:function(){return t("workflow.mailing.followup")},fillEditor:function(e){var i=$('form[name="'+this.formName+'"]'),n=$("#followup_mailing-editor .editor-error-messages");s.fillEditorBase(e),r.fillEditorBase(e),i.submit(!1),i.get(0).reset(),h.fillFormFromObject(this.formName,e.getData(),""),"true"==o.disableFollowup?(n.html(t("error.workflow.followupPermission")),n.css("display","block"),r.disableInputs()):n.css("display","none")},createNewMailing:function(){var e=r.node.getData();e.baseMailingId=r.getSelectedMailingOption().val(),e.decisionCriterion=r.getSelectedDecisionOption().val(),s.createNewMailing(d.constants.forwardMailingCreate)},editMailing:function(){s.editMailing(d.constants.forwardMailingEdit)},copyMailing:function(){var e=r.node.getData();e.baseMailingId=r.getSelectedMailingOption().val(),e.decisionCriterion=r.getSelectedDecisionOption().val(),s.copyMailing(d.constants.forwardMailingCopy)},saveEditor:function(){return r.disableInputs(),s.disableInputs(),this.setNodeFields(),h.formToObject(this.formName)},saveWithCheckStatus:function(){s.showSecurityQuestion()&&h.saveCurrentEditorWithUndo(!1,s)},validateEditor:function(e){var i=$(r.formNameJId+" "+r.selectNameJId),n=$(s.formNameJId+" "+s.selectNameJId);0<i.val()&&0<n.val()?e?e():h.saveCurrentEditorWithUndo():((i=$("#followup_mailing-editor").find(".editor-error-messages")).html(t("error.workflow.noMailing")),i.css("display","block"))},setNodeFields:function(){r.node.setFilled(0<parseInt(r.mailingId,10)&&0<parseInt(s.mailingId,10))}}));v.addAction({click:"followup-mailing-editor-base-sort-shortname"},function(){s.onMailingSortClick("shortname","shortname")}),v.addAction({click:"followup-mailing-editor-base-sort-data"},function(){var e=g.getConfigData(this.el);s.onMailingSortClick("shortname",e.sortByDate)}),v.addAction({change:"followup-mailing-editor-base-status-change"},function(){s.onMailingsStatusChange(this.el.val())}),v.addAction({change:"followup-mailing-editor-base-select-change"},function(){s.onMailingSelectChange(this.el.val())}),v.addAction({click:"followup-base-mailing-editor-base-sort-shortname"},function(){r.onMailingSortClick("shortname","shortname")}),v.addAction({click:"followup-base-mailing-editor-base-sort-data"},function(){var e=g.getConfigData(this.el);r.onMailingSortClick("shortname",e.sortByDate)}),v.addAction({change:"followup-base-mailing-editor-base-status-change"},function(){r.onMailingsStatusChange(this.el.val())}),v.addAction({change:"followup-base-mailing-editor-base-select-change"},function(){r.onMailingSelectChange(this.el.val())}),v.addAction({click:"followup-base-mailing-editor-base-secure-cancel"},function(){s.cancelSecurityDialog()}),v.addAction({click:"followup-mailing-editor-save"},function(){i.validateEditor(i.saveWithCheckStatus)})}),this.addDomInitializer("action-mailing-editor-initializer",function(){var e=this.config,i=new a(e,l),n=h.registerEditor("actionbased_mailing",{formName:"actionbasedMailingForm",safeToSave:!1,getTitle:function(){return t("workflow.mailing.action_based")},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]');t.submit(!1),t.get(0).reset(),h.fillFormFromObject(this.formName,e.getData(),""),i.fillEditorBase(e),$("#actionbased_mailing-editor .editor-error-messages").css("display","none")},createNewMailing:function(){i.createNewMailing(d.constants.forwardMailingCreate)},editMailing:function(){i.editMailing(d.constants.forwardMailingEdit)},saveEditor:function(){return i.setNodeFields(),i.disableInputs(),h.formToObject(this.formName)},saveWithCheckStatus:function(){i.showSecurityQuestion()&&h.saveCurrentEditorWithUndo(!1,i)},copyMailing:function(){i.copyMailing(d.constants.forwardMailingCopy)}});v.addAction({click:"action-mailing-editor-save"},function(){i.validateEditor(n.saveWithCheckStatus)}),v.addAction({click:"action-mailing-editor-base-sort-shortname"},function(){i.onMailingSortClick("shortname","shortname")}),v.addAction({click:"action-mailing-editor-base-sort-data"},function(){var e=g.getConfigData(this.el);i.onMailingSortClick("shortname",e.sortByDate)}),v.addAction({change:"action-mailing-editor-base-status-change"},function(){i.onMailingsStatusChange(this.el.val())}),v.addAction({change:"action-mailing-editor-base-select-change"},function(){i.onMailingSelectChange(this.el.val())}),v.addAction({click:"action-mailing-editor-base-secure-cancel"},function(){i.cancelSecurityDialog()})}),this.addDomInitializer("date-mailing-initializer",function(){var e=this.config,i=new a(e,l),n=h.registerEditor("datebased_mailing",{formName:"datebasedMailingForm",safeToSave:!1,getTitle:function(){return t("workflow.mailing.date_based")},fillEditor:function(e){var t=$('form[name="'+this.formName+'"]');t.submit(!1),t.get(0).reset(),h.fillFormFromObject(this.formName,e.getData(),""),i.fillEditorBase(e),$("#datebased_mailing-editor .editor-error-messages").css("display","none")},saveEditor:function(){return i.setNodeFields(),i.disableInputs(),h.formToObject(this.formName)},createNewMailing:function(){i.createNewMailing(d.constants.forwardMailingCreate)},editMailing:function(){i.editMailing(d.constants.forwardMailingEdit)},saveWithCheckStatus:function(){i.showSecurityQuestion()&&h.saveCurrentEditorWithUndo(!1,i)},copyMailing:function(){i.copyMailing(d.constants.forwardMailingCopy)}});v.addAction({click:"date-mailing-editor-base-sort-shortname"},function(){i.onMailingSortClick("shortname","shortname")}),v.addAction({click:"date-mailing-editor-base-sort-data"},function(){var e=g.getConfigData(this.el);i.onMailingSortClick("shortname",e.sortByDate)}),v.addAction({change:"date-mailing-editor-base-status-change"},function(){i.onMailingsStatusChange(this.el.val())}),v.addAction({change:"date-mailing-editor-base-select-change"},function(){i.onMailingSelectChange(this.el.val())}),v.addAction({click:"date-mailing-editor-base-secure-cancel"},function(){i.cancelSecurityDialog()}),v.addAction({click:"date-mailing-editor-save"},function(){i.validateEditor(n.saveWithCheckStatus)})}),this.addAction({click:"mailing-editor-copy"},function(){h.getCurrentEditor().copyMailing()}),this.addAction({click:"mailing-editor-new"},function(){h.getCurrentEditor().createNewMailing()}),this.addAction({click:"mailing-editor-edit"},function(){h.getCurrentEditor().editMailing()}),this.addAction({click:"editor-save-current"},function(){h.saveCurrentEditorWithUndo()}),this.addAction({click:"editor-cancel"},function(){h.cancelEditor()}),this.addAction({click:"chain-mode"},function(){c.isChainMode()||c.connectSelected()?c.setChainModeEnabled(!1):c.setChainModeEnabled(!0),$(this.el).toggleClass("button-selected",c.isChainMode())}),this.addAction({click:"delete-selected"},function(){c.deleteSelected()}),this.addAction({click:"align-all"},function(){c.alignAll()}),this.addAction({click:"zoom-in"},function(){var e=$("#slider").slider("instance");e.value(e.value()+d.ZOOM_STEP),c.setZoom(e.value())}),this.addAction({click:"zoom-out"},function(){var e=$("#slider").slider("instance");e.value(e.value()-d.ZOOM_STEP),c.setZoom(e.value())}),this.addAction({click:"reset-zoom"},function(){c.setZoom(d.DEFAULT_ZOOM),$("#slider").slider("value",d.DEFAULT_ZOOM)}),this.addAction({click:"workflow-save"},function(){l(!0)}),this.addAction({click:"workflow-copy"},function(){var t=d.workflowId,e=c.getNodes().some(function(e){return e.isFilled()});u.confirmCopy(e).done(function(e){return window.location.href=AGN.url("/workflow/copy.action?workflowId="+t+"&isWithContent="+(1==e)),!1})}),this.addAction({change:"workflow-view-change-status"},function(){$("#workflow_active").is(":checked")?$("#workflow-status").val(d.constants.statusActive):$("#workflow-status").val(d.constants.statusInactive)}),this.addAction({click:"undo"},function(){c.undo()}),this.addAction({click:"create-workflow-enlarged-editor-modal"},function(){c.enlargeEditor(function(){l(!0)})}),this.addAction({click:"workflow-generate-pdf"},function(){var e,i=d.workflowId<=0||!d.shortname,n=c.hasUnsavedChanges();i||n?(e="",i?e=t("workflow.pdf.save_new_campaign"):n&&(e=t("workflow.pdf.save_modified_campaign")),u.confirmSaveBeforePdfGenerating(function(){l(!0)},e)):(window.location.href=AGN.url("/workflow/"+d.workflowId+"/generatePDF.action?showStatistics="+c.isStatisticEnabled()),AGN.Lib.Loader.hide())}),this.addAction({click:"workflow-dry-run"},function(){var e=!1,t=d.constants.statusOpen;d.constants.initialWorkflowStatus!=d.constants.statusTesting&&(e=!0,t=d.constants.statusTesting),u.confirmTestingStartStop(e).done(function(){$("#workflow_active").prop("disabled",!0),y(!0,{status:t})})}),this.addAction({click:"toggle-statistic"},function(){d.constants.initialWorkflowStatus==d.constants.statusOpen?workflowNoStatisticsDialogHandler.showDialog():c.toggleStatistic()}),$(window).on("resize viewportChanged",function(){c&&c.updateMinimap()}),$(document).on("keydown",function(e){if(e.target&&!$(e.target).is("input, textarea"))switch(e.keyCode){case d.KEY_SPACE:c.setPanningEnabled(!0);break;case d.KEY_SHIFT:c.setMultiConnectionEnabled(!0);break;case d.KEY_CTRL:c.setMouseWheelZoomEnabled(!0)}}),$(document).on("keyup",function(e){if(e.target&&!$(e.target).is("input, textarea"))switch(e.keyCode){case d.KEY_DELETE:c.deleteSelected();break;case d.KEY_SPACE:c.setPanningEnabled(!1);break;case d.KEY_SHIFT:c.setMultiConnectionEnabled(!1);break;case d.KEY_ENTER:c.editIcon();break;case d.KEY_CTRL:c.setMouseWheelZoomEnabled(!1)}})}),AGN.Lib.Controller.new("wysiwyg-agn-tags",function(){var r,s,a=AGN.Lib.Template,e=AGN.Lib.Select,i=AGN.Lib.Confirm,n={},l={};function o(e){var i="";return e&&0<e.length&&e.forEach(function(e,t){t=$("#agn-tag-attribute-"+t);i+=" "+e.name+'="'+_.escape(t.val())+'"'}),i}n.agnFORM=function(){var e=$("#agn-tag-name").children("option:selected"),t=e.val(),e=e.data("attributes");if(t){if(!0===$("#createLinkToggle").prop("checked")){var i,n=$("#tagLinkText").val();if(n||-1<(i=e.findIndex(function(e){return"name"===e.name}))&&(n=$("#agn-tag-attribute-"+i).val()),n)return'<a href="['+t+o(e)+']">'+n+"</a>"}return"["+t+o(e)+"]"}},l.agnFORM=function(){var e=$("#createLinkToggle");!0!==e.prop("checked")&&$("#tagLinkParams").hide(),e.on("change",function(){!1===$(this).prop("checked")?$("#tagLinkParams").hide():$("#tagLinkParams").show()})},this.addDomInitializer("wysiwyg-agn-tags",function(){r=a.prepare("agn-tag-select-attribute"),s=a.prepare("agn-tag-text-attribute");var i=$("#agn-tag-name");this.config.forEach(function(e){var t=$("<option>",{value:e.name,text:e.name});i.append(t),t.data("attributes",e.attributes)}),e.get(i).selectFirstValue(),i.trigger("change")}),this.addAction({change:"select-agn-tag"},function(){var e=this.el.children("option:selected"),t=e.val(),i=e.data("attributes"),n=$("#agn-tag-attributes");if(n.empty(),i&&0<i.length){i.forEach(function(e,t){switch(e.type){case"SELECT":n.append(r({index:t,name:e.name,options:e.options}));break;case"TEXT":n.append(s({index:t,name:e.name}))}});try{var o=a.dom(t+"-extended-attributes");o&&n.append(o)}catch(e){}AGN.runAll(n)}i=e.val(),t=l[i];t&&t()}),this.addAction({click:"insert-agn-tag"},function(){var e=$("#agn-tag-name").val(),e=n[e],t=e?e():(e=$("#agn-tag-name").children("option:selected"),(t=e.val())?"["+t+o(e.data("attributes"))+"]":null);t&&i.get(this.el).positive(t)})}),AGN.Lib.Controller.new("wysiwyg-image-browser",function(){var t,i=o("CKEditorFuncNum"),n=o("mailingID");function e(){var e=s(),t=$("#other-images-tab .image-preview"),i=$("#other-images-tab .no_image_message");e&&e.length?(t.attr("src",r(e)),t.show(),i.hide()):(i.show(),t.hide())}function o(e){e=new RegExp("(?:[?&]|&amp;)"+e+"=([^&]+)","i"),e=window.location.search.match(e);return e&&1<e.length?e[1]:""}function r(e){return e="http"!==e.substr(0,4).toLowerCase()?t.rdirDomain+"/image?ci="+t.companyId+"&mi="+n+"&name="+e:e}function s(){return $('#other-images-tab [data-action="update-image"]').val()}this.addDomInitializer("wysiwyg-image-browser",function(){t=this.config,e()}),this.addAction({click:"submit-image"},function(){var e;"mediapool"===$("li[image-tab-name].active").attr("image-tab-name")?(e=document.querySelector('[data-action="mpSelectImage"].active'))&&(e=e.querySelector("img").getAttribute("src"),window.opener.CKEDITOR.tools.callFunction(i,e),window.close()):(e=r(s()),window.opener.CKEDITOR.tools.callFunction(i,e),window.close())}),this.addAction({change:"update-image"},function(){e()}),this.addAction({click:"close-window"},function(){window.close()})}),!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).interact=e()}(function(){return function n(o,r,s){function a(i,e){if(!r[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(l)return l(i,!0);e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}t=r[i]={exports:{}};o[i][0].call(t.exports,function(e){var t=o[i][1][e];return a(t||e)},t,t.exports,n,o,r,s)}return r[i].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(t,e,i){"use strict";"undefined"==typeof window?e.exports=function(e){return t("./src/utils/window").init(e),t("./src/index")}:e.exports=t("./src/index")},{"./src/index":19,"./src/utils/window":52}],2:[function(e,t,i){"use strict";var n=e("./utils/extend.js");function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(e.immediatePropagationStopped)break;n(e)}}function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.options=n({},e||{})}r.prototype.fire=function(e){var t=void 0,i="on"+e.type,n=this.global;(t=this[e.type])&&o(e,t),this[i]&&this[i](e),!e.propagationStopped&&n&&(t=n[e.type])&&o(e,t)},r.prototype.on=function(e,t){this[e]?this[e].push(t):this[e]=[t]},r.prototype.off=function(e,t){var i=this[e],n=i?i.indexOf(t):-1;-1!==n&&i.splice(n,1),(i&&0===i.length||!t)&&(this[e]=void 0)},t.exports=r},{"./utils/extend.js":41}],3:[function(e,t,i){"use strict";var m=e("./utils/extend"),v=e("./utils/getOriginXY"),y=e("./defaultOptions"),b=e("./utils/Signals").new(),e=(w.prototype.getSwipe=function(){var e=this.interaction;if(e.prevEvent.speed<600||150<this.timeStamp-e.prevEvent.timeStamp)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI,i=(t<0&&(t+=360),112.5<=t&&t<247.5),n=202.5<=t&&t<337.5;return{up:n,down:!n&&22.5<=t&&t<157.5,left:i,right:!i&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}},w.prototype.preventDefault=function(){},w.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},w.prototype.stopPropagation=function(){this.propagationStopped=!0},w);function w(e,t,i,n,o,r){var s=6<arguments.length&&void 0!==arguments[6]&&arguments[6],a=this,l=w;if(!(a instanceof l))throw new TypeError("Cannot call a class as a function");var a=e.target,l=(a&&a.options||y).deltaSource,c=v(a,o,i),u="start"===n,d="end"===n,h=u?e.startCoords:e.curCoords,p=e.prevEvent,f=(o=o||e.element,m({},h.page)),g=m({},h.client),s=(f.x-=c.x,f.y-=c.y,g.x-=c.x,g.y-=c.y,this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.button=t.button,this.buttons=t.buttons,this.target=o,this.currentTarget=o,this.relatedTarget=r||null,this.preEnd=s,this.type=i+(n||""),this.interaction=e,this.interactable=a,this.t0=u?e.downTimes[e.downTimes.length-1]:p.t0,{interaction:e,event:t,action:i,phase:n,element:o,related:r,page:f,client:g,coords:h,starting:u,ending:d,deltaSource:l,iEvent:this});b.fire("set-xy",s),d?(this.pageX=p.pageX,this.pageY=p.pageY,this.clientX=p.clientX,this.clientY=p.clientY):(this.pageX=f.x,this.pageY=f.y,this.clientX=g.x,this.clientY=g.y),this.x0=e.startCoords.page.x-c.x,this.y0=e.startCoords.page.y-c.y,this.clientX0=e.startCoords.client.x-c.x,this.clientY0=e.startCoords.client.y-c.y,b.fire("set-delta",s),this.timeStamp=h.timeStamp,this.dt=e.pointerDelta.timeStamp,this.duration=this.timeStamp-this.t0,this.speed=e.pointerDelta[l].speed,this.velocityX=e.pointerDelta[l].vx,this.velocityY=e.pointerDelta[l].vy,this.swipe=d||"inertiastart"===n?this.getSwipe():null,b.fire("new",s)}b.on("set-delta",function(e){var t=e.iEvent,i=e.interaction,n=e.starting,e=e.deltaSource,n=n?t:i.prevEvent;"client"===e?(t.dx=t.clientX-n.clientX,t.dy=t.clientY-n.clientY):(t.dx=t.pageX-n.pageX,t.dy=t.pageY-n.pageY)}),e.signals=b,t.exports=e},{"./defaultOptions":18,"./utils/Signals":34,"./utils/extend":41,"./utils/getOriginXY":42}],4:[function(e,t,i){"use strict";var s=e("./utils/clone"),a=e("./utils/is"),o=e("./utils/events"),n=e("./utils/extend"),l=e("./actions/base"),r=e("./scope"),c=e("./Eventable"),u=e("./defaultOptions"),d=e("./utils/Signals").new(),h=e("./utils/domUtils"),p=h.getElementRect,f=h.nodeContains,g=h.trySelector,m=h.matchesSelector,v=e("./utils/window").getWindow,y=e("./utils/arr").contains,b=e("./utils/browser").wheelEvent,h=(r.interactables=[],w.prototype.setOnEvents=function(e,t){e="on"+e;return a.function(t.onstart)&&(this.events[e+"start"]=t.onstart),a.function(t.onmove)&&(this.events[e+"move"]=t.onmove),a.function(t.onend)&&(this.events[e+"end"]=t.onend),a.function(t.oninertiastart)&&(this.events[e+"inertiastart"]=t.oninertiastart),this},w.prototype.setPerAction=function(e,t){for(var i in t)i in u[e]&&(a.object(t[i])?(this.options[e][i]=s(this.options[e][i]||{}),n(this.options[e][i],t[i]),a.object(u.perAction[i])&&"enabled"in u.perAction[i]&&(this.options[e][i].enabled=!1!==t[i].enabled)):a.bool(t[i])&&a.object(u.perAction[i])?this.options[e][i].enabled=t[i]:void 0!==t[i]&&(this.options[e][i]=t[i]))},w.prototype.getRect=function(e){return e=e||this.target,a.string(this.target)&&!a.element(e)&&(e=this._context.querySelector(this.target)),p(e)},w.prototype.rectChecker=function(e){return a.function(e)?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},w.prototype._backCompatOption=function(e,t){if(g(t)||a.object(t)){this.options[e]=t;for(var i=0;i<l.names.length;i++){var n=l.names[i];this.options[n][e]=t}return this}return this.options[e]},w.prototype.origin=function(e){return this._backCompatOption("origin",e)},w.prototype.deltaSource=function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource},w.prototype.context=function(){return this._context},w.prototype.inContext=function(e){return this._context===e.ownerDocument||f(this._context,e)},w.prototype.fire=function(e){return this.events.fire(e),this},w.prototype._onOffMultiple=function(e,t,i,n){if(a.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),a.array(t)){for(var o=0;o<t.length;o++){var r=t[o];this[e](r,i,n)}return!0}if(a.object(t)){for(var s in t)this[e](s,t[s],i);return!0}},w.prototype.on=function(e,t,i){return this._onOffMultiple("on",e,t,i)||(y(w.eventTypes,e="wheel"===e?b:e)?this.events.on(e,t):a.string(this.target)?o.addDelegate(this.target,this._context,e,t,i):o.add(this.target,e,t,i)),this},w.prototype.off=function(e,t,i){return this._onOffMultiple("off",e,t,i)||(y(w.eventTypes,e="wheel"===e?b:e)?this.events.off(e,t):a.string(this.target)?o.removeDelegate(this.target,this._context,e,t,i):o.remove(this.target,e,t,i)),this},w.prototype.set=function(e){a.object(e)||(e={}),this.options=s(u.base);var t,i=s(u.perAction);for(t in l.methodDict){var n=l.methodDict[t];this.options[t]=s(u[t]),this.setPerAction(t,i),this[n](e[t])}for(var o=0;o<w.settingsMethods.length;o++){var r=w.settingsMethods[o];this.options[r]=u.base[r],r in e&&this[r](e[r])}return d.fire("set",{options:e,interactable:this}),this},w.prototype.unset=function(){if(o.remove(this.target,"all"),a.string(this.target))for(var e in o.delegatedEvents){var t=o.delegatedEvents[e];t.selectors[0]===this.target&&t.contexts[0]===this._context&&(t.selectors.splice(0,1),t.contexts.splice(0,1),t.listeners.splice(0,1),t.selectors.length||(t[e]=null)),o.remove(this._context,e,o.delegateListener),o.remove(this._context,e,o.delegateUseCapture,!0)}else o.remove(this,"all");d.fire("unset",{interactable:this}),r.interactables.splice(r.interactables.indexOf(this),1);for(var i=0;i<(r.interactions||[]).length;i++){var n=(r.interactions||[])[i];n.target===this&&n.interacting()&&!n._ending&&n.stop()}return r.interact},w);function w(e,t){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");t=t||{},this.target=e,this.events=new c,this._context=t.context||r.document,this._win=v(g(e)?this._context:e),this._doc=this._win.document,d.fire("new",{target:e,options:t,interactable:this,win:this._win}),r.addDocument(this._doc,this._win),r.interactables.push(this),this.set(t)}r.interactables.indexOfElement=function(e,t){t=t||r.document;for(var i=0;i<this.length;i++){var n=this[i];if(n.target===e&&n._context===t)return i}return-1},r.interactables.get=function(e,t,i){t=this[this.indexOfElement(e,t&&t.context)];return t&&(a.string(e)||i||t.inContext(e))?t:null},r.interactables.forEachMatch=function(e,t){for(var i=0;i<this.length;i++){var n=this[i],o=void 0;if(void 0!==(o=(a.string(n.target)?a.element(e)&&m(e,n.target):e===n.target)&&n.inContext(e)?t(n):o))return o}},h.eventTypes=r.eventTypes=[],h.signals=d,h.settingsMethods=["deltaSource","origin","preventDefault","rectChecker"],t.exports=h},{"./Eventable":2,"./actions/base":6,"./defaultOptions":18,"./scope":33,"./utils/Signals":34,"./utils/arr":35,"./utils/browser":36,"./utils/clone":37,"./utils/domUtils":39,"./utils/events":40,"./utils/extend":41,"./utils/is":46,"./utils/window":52}],5:[function(e,t,i){"use strict";var g=e("./scope"),m=e("./utils"),s=e("./utils/events"),v=e("./utils/browser"),n=e("./utils/domObjects"),y=e("./utils/interactionFinder"),a=e("./utils/Signals").new(),o={},r=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer"],b=0,w=(g.interactions=[],l.prototype.pointerDown=function(e,t,i){var n=this.updatePointer(e,t,!0);a.fire("down",{pointer:e,event:t,eventTarget:i,pointerIndex:n,interaction:this})},l.prototype.start=function(e,t,i){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===e.name?2:1)||(-1===g.interactions.indexOf(this)&&g.interactions.push(this),m.copyAction(this.prepared,e),this.target=t,this.element=i,a.fire("action-start",{interaction:this,event:this.downEvent}))},l.prototype.pointerMove=function(e,t,i){this.simulation||(this.updatePointer(e),m.setCoords(this.curCoords,this.pointers));var n=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,o=void 0,r=void 0,e=(this.pointerIsDown&&!this.pointerWasMoved&&(o=this.curCoords.client.x-this.startCoords.client.x,r=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=m.hypot(o,r)>l.pointerMoveTolerance),{pointer:e,pointerIndex:this.getPointerIndex(e),event:t,eventTarget:i,dx:o,dy:r,duplicate:n,interaction:this,interactingBeforeMove:this.interacting()});n||m.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords),a.fire("move",e),n||(this.interacting()&&this.doMove(e),this.pointerWasMoved&&m.copyCoords(this.prevCoords,this.curCoords))},l.prototype.doMove=function(e){e=m.extend({pointer:this.pointers[0],event:this.prevEvent,eventTarget:this._eventTarget,interaction:this},e||{}),a.fire("before-action-move",e),this._dontFireMove||a.fire("action-move",e),this._dontFireMove=!1},l.prototype.pointerUp=function(e,t,i,n){var o=this.getPointerIndex(e);a.fire(/cancel$/i.test(t.type)?"cancel":"up",{pointer:e,pointerIndex:o,event:t,eventTarget:i,curEventTarget:n,interaction:this}),this.simulation||this.end(t),this.pointerIsDown=!1,this.removePointer(e,t)},l.prototype.end=function(e){this._ending=!0,e=e||this.prevEvent,this.interacting()&&a.fire("action-end",{event:e,interaction:this}),this.stop(),this._ending=!1},l.prototype.currentAction=function(){return this._interacting?this.prepared.name:null},l.prototype.interacting=function(){return this._interacting},l.prototype.stop=function(){a.fire("stop",{interaction:this}),this._interacting&&(a.fire("stop-active",{interaction:this}),a.fire("stop-"+this.prepared.name,{interaction:this})),this.target=this.element=null,this._interacting=!1,this.prepared.name=this.prevEvent=null},l.prototype.getPointerIndex=function(e){return"mouse"===this.pointerType||"pen"===this.pointerType?0:this.pointerIds.indexOf(m.getPointerId(e))},l.prototype.updatePointer=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t&&/(down|start)$/i.test(t.type),n=m.getPointerId(e),o=this.getPointerIndex(e);return-1===o&&(o=this.pointerIds.length,this.pointerIds[o]=n),i&&a.fire("update-pointer-down",{pointer:e,event:t,down:i,pointerId:n,pointerIndex:o,interaction:this}),this.pointers[o]=e,o},l.prototype.removePointer=function(e,t){var i=this.getPointerIndex(e);-1!==i&&(a.fire("remove-pointer",{pointer:e,event:t,pointerIndex:i,interaction:this}),this.pointers.splice(i,1),this.pointerIds.splice(i,1),this.downTargets.splice(i,1),this.downTimes.splice(i,1))},l.prototype._updateEventTargets=function(e,t){this._eventTarget=e,this._curEventTarget=t},l);function l(e){e=e.pointerType;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.target=null,this.element=null,this.prepared={name:null,axis:null,edges:null},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this.pointerType=e,a.fire("new",this),g.interactions.push(this)}for(var c=0;c<r.length;c++){var u=r[c];o[u]=d(u)}function d(f){return function(e){var t=m.getPointerType(e),i=m.getEventTargets(e),n=i[0],o=i[1],r=[];if(v.supportsTouch&&/touch/.test(e.type)){b=(new Date).getTime();for(var s=0;s<e.changedTouches.length;s++){var a=e.changedTouches[s],l=y.search(a,e.type,n);r.push([a,l||new w({pointerType:t})])}}else{var c=!1;if(!v.supportsPointerEvent&&/mouse/.test(e.type)){for(var u=0;u<g.interactions.length&&!c;u++)c="mouse"!==g.interactions[u].pointerType&&g.interactions[u].pointerIsDown;c=c||(new Date).getTime()-b<500||0===e.timeStamp}c||(i=(i=y.search(e,e.type,n))||new w({pointerType:t}),r.push([e,i]))}for(var d=0;d<r.length;d++){var h=r[d],p=h[0],h=h[1];h._updateEventTargets(n,o),h[f](p,e,n,o)}}}function h(e){for(var t=0;t<g.interactions.length;t++){var i=g.interactions[t];i.end(e),a.fire("endall",{event:e,interaction:i})}}var p={},e=v.pEventTypes;function f(e,t){var i,n,o=e.doc,r=0===t.indexOf("add")?s.add:s.remove;for(i in g.delegatedEvents)r(o,i,s.delegateListener),r(o,i,s.delegateUseCapture,!0);for(n in p)r(o,n,p[n],v.isIOS?{passive:!1}:void 0)}n.PointerEvent?(p[e.down]=o.pointerDown,p[e.move]=o.pointerMove,p[e.up]=o.pointerUp,p[e.cancel]=o.pointerUp):(p.mousedown=o.pointerDown,p.mousemove=o.pointerMove,p.mouseup=o.pointerUp,p.touchstart=o.pointerDown,p.touchmove=o.pointerMove,p.touchend=o.pointerUp,p.touchcancel=o.pointerUp),p.blur=h,a.on("update-pointer-down",function(e){var t=e.interaction,i=e.pointer,n=e.pointerId,o=e.pointerIndex,r=e.event,s=e.eventTarget,e=e.down;t.pointerIds[o]=n,t.pointers[o]=i,e&&(t.pointerIsDown=!0),t.interacting()||(m.setCoords(t.startCoords,t.pointers),m.copyCoords(t.curCoords,t.startCoords),m.copyCoords(t.prevCoords,t.startCoords),t.downEvent=r,t.downTimes[o]=t.curCoords.timeStamp,t.downTargets[o]=s||r&&m.getEventTargets(r)[0],t.pointerWasMoved=!1,m.pointerExtend(t.downPointer,i))}),g.signals.on("add-document",f),g.signals.on("remove-document",f),w.pointerMoveTolerance=1,w.doOnInteractions=d,w.endAll=h,w.signals=a,w.docEvents=p,g.endAllInteractions=h,t.exports=w},{"./scope":33,"./utils":44,"./utils/Signals":34,"./utils/browser":36,"./utils/domObjects":38,"./utils/events":40,"./utils/interactionFinder":45}],6:[function(e,t,i){"use strict";var n=e("../Interaction"),r=e("../InteractEvent"),e={firePrepared:o,names:[],methodDict:{}};function o(e,t,i,n){var o=e.prepared.name,t=new r(e,t,o,i,e.element,null,n);e.target.fire(t),e.prevEvent=t}n.signals.on("action-start",function(e){var t=e.interaction,e=e.event;t._interacting=!0,o(t,e,"start")}),n.signals.on("action-move",function(e){var t=e.interaction;if(o(t,e.event,"move",e.preEnd),!t.interacting())return!1}),n.signals.on("action-end",function(e){o(e.interaction,e.event,"end")}),t.exports=e},{"../InteractEvent":3,"../Interaction":5}],7:[function(e,t,i){"use strict";var n=e("./base"),o=e("../utils"),r=e("../InteractEvent"),s=e("../Interactable"),a=e("../Interaction"),e=e("../defaultOptions"),l={defaults:{enabled:!1,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,startAxis:"xy",lockAxis:"xy"},checker:function(e,t,i){i=i.options.drag;return i.enabled?{name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis}:null},getCursor:function(){return"move"}};a.signals.on("before-action-move",function(e){var t,e=e.interaction;"drag"===e.prepared.name&&("x"===(t=e.prepared.axis)?(e.curCoords.page.y=e.startCoords.page.y,e.curCoords.client.y=e.startCoords.client.y,e.pointerDelta.page.speed=Math.abs(e.pointerDelta.page.vx),e.pointerDelta.client.speed=Math.abs(e.pointerDelta.client.vx),e.pointerDelta.client.vy=0,e.pointerDelta.page.vy=0):"y"===t&&(e.curCoords.page.x=e.startCoords.page.x,e.curCoords.client.x=e.startCoords.client.x,e.pointerDelta.page.speed=Math.abs(e.pointerDelta.page.vy),e.pointerDelta.client.speed=Math.abs(e.pointerDelta.client.vy),e.pointerDelta.client.vx=0,e.pointerDelta.page.vx=0))}),r.signals.on("new",function(e){var t,i=e.iEvent,e=e.interaction;"dragmove"===i.type&&("x"===(t=e.prepared.axis)?(i.pageY=e.startCoords.page.y,i.clientY=e.startCoords.client.y,i.dy=0):"y"===t&&(i.pageX=e.startCoords.page.x,i.clientX=e.startCoords.client.x,i.dx=0))}),s.prototype.draggable=function(e){return o.is.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):o.is.bool(e)?((this.options.drag.enabled=e)||(this.ondragstart=this.ondragstart=this.ondragend=null),this):this.options.drag},n.drag=l,n.names.push("drag"),o.merge(s.eventTypes,["dragstart","dragmove","draginertiastart","draginertiaresume","dragend"]),n.methodDict.drag="draggable",e.drag=l.defaults,t.exports=l},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],8:[function(e,t,i){"use strict";var n=e("./base"),d=e("../utils"),c=e("../scope"),o=e("../interact"),r=e("../InteractEvent"),s=e("../Interactable"),a=e("../Interaction"),e=e("../defaultOptions"),l={defaults:{enabled:!1,accept:null,overlap:"pointer"}},u=!1;function h(e,t){for(var i=void 0,n=0;n<e.dropzones.length;n++){var o=e.dropzones[n],r=e.elements[n];r!==i&&(t.target=r,o.fire(t)),i=r}}function p(e,t){t=function(e){for(var t=[],i=[],n=0;n<c.interactables.length;n++){var o=c.interactables[n];if(o.options.drop.enabled){var r=o.options.drop.accept;if(!(d.is.element(r)&&r!==e||d.is.string(r)&&!d.matchesSelector(e,r)))for(var s=d.is.string(o.target)?o._context.querySelectorAll(o.target):[o.target],a=0;a<s.length;a++){var l=s[a];l!==e&&(t.push(o),i.push(l))}}}return{elements:i,dropzones:t}}(t);e.dropzones=t.dropzones,e.elements=t.elements,e.rects=[];for(var i=0;i<e.dropzones.length;i++)e.rects[i]=e.dropzones[i].getRect(e.elements[i])}function f(e,t,i){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null},o={dragEvent:i,interaction:e,target:e.dropElement,dropzone:e.dropTarget,relatedTarget:i.target,draggable:i.interactable,timeStamp:i.timeStamp};return e.dropElement!==e.prevDropElement&&(e.prevDropTarget&&(n.leave=d.extend({type:"dragleave"},o),i.dragLeave=n.leave.target=e.prevDropElement,i.prevDropzone=n.leave.dropzone=e.prevDropTarget),e.dropTarget&&(n.enter={dragEvent:i,interaction:e,target:e.dropElement,dropzone:e.dropTarget,relatedTarget:i.target,draggable:i.interactable,timeStamp:i.timeStamp,type:"dragenter"},i.dragEnter=e.dropElement,i.dropzone=e.dropTarget)),"dragend"===i.type&&e.dropTarget&&(n.drop=d.extend({type:"drop"},o),i.dropzone=e.dropTarget,i.relatedTarget=e.dropElement),"dragstart"===i.type&&(n.activate=d.extend({type:"dropactivate"},o),n.activate.target=null,n.activate.dropzone=null),"dragend"===i.type&&(n.deactivate=d.extend({type:"dropdeactivate"},o),n.deactivate.target=null,n.deactivate.dropzone=null),"dragmove"===i.type&&e.dropTarget&&(n.move=d.extend({dragmove:i,type:"dropmove"},o),i.dropzone=e.dropTarget),n}function g(e,t){var i=e.activeDrops,n=e.prevDropTarget,o=e.dropTarget,r=e.dropElement;t.leave&&n.fire(t.leave),t.move&&o.fire(t.move),t.enter&&o.fire(t.enter),t.drop&&o.fire(t.drop),t.deactivate&&h(i,t.deactivate),e.prevDropTarget=o,e.prevDropElement=r}a.signals.on("action-start",function(e){var t=e.interaction,e=e.event;"drag"===t.prepared.name&&(t.activeDrops.dropzones=[],t.activeDrops.elements=[],t.activeDrops.rects=[],t.dropEvents=null,t.dynamicDrop||p(t.activeDrops,t.element),(e=f(t,0,t.prevEvent)).activate&&h(t.activeDrops,e.activate))}),r.signals.on("new",function(e){var t,i=e.interaction,n=e.iEvent,e=e.event;"dragmove"!==n.type&&"dragend"!==n.type||(t=function(e,t,i){var n=e.interaction,o=[];u&&p(n.activeDrops,i);for(var r=0;r<n.activeDrops.dropzones.length;r++){var s=n.activeDrops.dropzones[r],a=n.activeDrops.elements[r],l=n.activeDrops.rects[r];o.push(s.dropCheck(e,t,n.target,i,a,l)?a:null)}var c=d.indexOfDeepestElement(o);return{dropzone:n.activeDrops.dropzones[c]||null,element:n.activeDrops.elements[c]||null}}(n=n,e,i.element),i.dropTarget=t.dropzone,i.dropElement=t.element,i.dropEvents=f(i,0,n))}),a.signals.on("action-move",function(e){e=e.interaction;"drag"===e.prepared.name&&g(e,e.dropEvents)}),a.signals.on("action-end",function(e){e=e.interaction;"drag"===e.prepared.name&&g(e,e.dropEvents)}),a.signals.on("stop-drag",function(e){e=e.interaction;e.activeDrops={dropzones:null,elements:null,rects:null},e.dropEvents=null}),s.prototype.dropzone=function(e){return d.is.object(e)?(this.options.drop.enabled=!1!==e.enabled,d.is.function(e.ondrop)&&(this.events.ondrop=e.ondrop),d.is.function(e.ondropactivate)&&(this.events.ondropactivate=e.ondropactivate),d.is.function(e.ondropdeactivate)&&(this.events.ondropdeactivate=e.ondropdeactivate),d.is.function(e.ondragenter)&&(this.events.ondragenter=e.ondragenter),d.is.function(e.ondragleave)&&(this.events.ondragleave=e.ondragleave),d.is.function(e.ondropmove)&&(this.events.ondropmove=e.ondropmove),/^(pointer|center)$/.test(e.overlap)?this.options.drop.overlap=e.overlap:d.is.number(e.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(this.options.drop.accept=e.accept),"checker"in e&&(this.options.drop.checker=e.checker),this):d.is.bool(e)?((this.options.drop.enabled=e)||(this.ondragenter=this.ondragleave=this.ondrop=this.ondropactivate=this.ondropdeactivate=null),this):this.options.drop},s.prototype.dropCheck=function(e,t,i,n,o,r){var s=!1;if(!(r=r||this.getRect(o)))return!!this.options.drop.checker&&this.options.drop.checker(e,t,s,this,o,i,n);var a,l,c=this.options.drop.overlap,u=("pointer"===c&&(u=d.getOriginXY(i,n,"drag"),(a=d.getPageXY(e)).x+=u.x,a.y+=u.y,u=a.x>r.left&&a.x<r.right,a=a.y>r.top&&a.y<r.bottom,s=u&&a),i.getRect(n));return u&&"center"===c&&(a=u.left+u.width/2,l=u.top+u.height/2,s=a>=r.left&&a<=r.right&&l>=r.top&&l<=r.bottom),u&&d.is.number(c)&&(s=c<=Math.max(0,Math.min(r.right,u.right)-Math.max(r.left,u.left))*Math.max(0,Math.min(r.bottom,u.bottom)-Math.max(r.top,u.top))/(u.width*u.height)),s=this.options.drop.checker?this.options.drop.checker(e,t,s,this,o,i,n):s},s.signals.on("unset",function(e){e.interactable.dropzone(!1)}),s.settingsMethods.push("dropChecker"),a.signals.on("new",function(e){e.dropTarget=null,e.dropElement=null,e.prevDropTarget=null,e.prevDropElement=null,e.dropEvents=null,e.activeDrops={dropzones:[],elements:[],rects:[]}}),a.signals.on("stop",function(e){e=e.interaction;e.dropTarget=e.dropElement=e.prevDropTarget=e.prevDropElement=null}),o.dynamicDrop=function(e){return d.is.bool(e)?(u=e,o):u},d.merge(s.eventTypes,["dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop"]),n.methodDict.drop="dropzone",e.drop=l.defaults,t.exports=l},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"./base":6}],9:[function(e,t,i){"use strict";var n=e("./base"),a=e("../utils"),l=e("../InteractEvent"),o=e("../Interactable"),r=e("../Interaction"),e=e("../defaultOptions"),s={defaults:{enabled:!1,origin:null,restrict:null},checker:function(e,t,i,n,o){return 2<=o.pointerIds.length?{name:"gesture"}:null},getCursor:function(){return""}};l.signals.on("new",function(e){var t=e.iEvent,e=e.interaction;"gesturestart"===t.type&&(t.ds=0,e.gesture.startDistance=e.gesture.prevDistance=t.distance,e.gesture.startAngle=e.gesture.prevAngle=t.angle,e.gesture.scale=1)}),l.signals.on("new",function(e){var t=e.iEvent,e=e.interaction;"gesturemove"===t.type&&(t.ds=t.scale-e.gesture.scale,e.target.fire(t),e.gesture.prevAngle=t.angle,e.gesture.prevDistance=t.distance,t.scale===1/0||null===t.scale||void 0===t.scale||isNaN(t.scale)||(e.gesture.scale=t.scale))}),o.prototype.gesturable=function(e){return a.is.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):a.is.bool(e)?((this.options.gesture.enabled=e)||(this.ongesturestart=this.ongesturestart=this.ongestureend=null),this):this.options.gesture},l.signals.on("set-delta",function(e){var t=e.interaction,i=e.iEvent,n=e.action,o=e.event,r=e.starting,s=e.ending,e=e.deltaSource;"gesture"===n&&(n=t.pointers,i.touches=[n[0],n[1]],r?(i.distance=a.touchDistance(n,e),i.box=a.touchBBox(n),i.scale=1,i.ds=0,i.angle=a.touchAngle(n,void 0,e),i.da=0):s||o instanceof l?(i.distance=t.prevEvent.distance,i.box=t.prevEvent.box,i.scale=t.prevEvent.scale,i.ds=i.scale-1,i.angle=t.prevEvent.angle,i.da=i.angle-t.gesture.startAngle):(i.distance=a.touchDistance(n,e),i.box=a.touchBBox(n),i.scale=i.distance/t.gesture.startDistance,i.angle=a.touchAngle(n,t.gesture.prevAngle,e),i.ds=i.scale-t.gesture.prevScale,i.da=i.angle-t.gesture.prevAngle))}),r.signals.on("new",function(e){e.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0}}),n.gesture=s,n.names.push("gesture"),a.merge(o.eventTypes,["gesturestart","gesturemove","gestureend"]),n.methodDict.gesture="gesturable",e.gesture=s.defaults,t.exports=s},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],10:[function(e,t,i){"use strict";var n=e("./base"),g=e("../utils"),o=e("../utils/browser"),r=e("../InteractEvent"),s=e("../Interactable"),a=e("../Interaction"),l=e("../defaultOptions"),d=o.supportsTouch||o.supportsPointerEvent?20:10,c={defaults:{enabled:!1,mouseButtons:null,origin:null,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},checker:function(e,t,i,n,o,r){if(!r)return null;var s=g.extend({},o.curCoords.page),i=i.options;if(i.resize.enabled){var a=i.resize,l={left:!1,right:!1,top:!1,bottom:!1};if(g.is.object(a.edges)){for(var c in l)l[c]=function(e,t,i,n,o,r,s){if(!t)return!1;if(!0===t){var a=g.is.number(r.width)?r.width:r.right-r.left,l=g.is.number(r.height)?r.height:r.bottom-r.top;if(a<0&&("left"===e?e="right":"right"===e&&(e="left")),l<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e)return i.x<(0<=a?r.left:r.right)+s;if("top"===e)return i.y<(0<=l?r.top:r.bottom)+s;if("right"===e)return i.x>(0<=a?r.right:r.left)-s;if("bottom"===e)return i.y>(0<=l?r.bottom:r.top)-s}return!!g.is.element(n)&&(g.is.element(t)?t===n:g.matchesUpTo(n,t,o))}(c,a.edges[c],s,o._eventTarget,n,r,a.margin||d);if(l.left=l.left&&!l.right,l.top=l.top&&!l.bottom,l.left||l.right||l.top||l.bottom)return{name:"resize",edges:l}}else{var u="y"!==i.resize.axis&&s.x>r.right-d,i="x"!==i.resize.axis&&s.y>r.bottom-d;if(u||i)return{name:"resize",axes:(u?"x":"")+(i?"y":"")}}}return null},cursors:o.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},getCursor:function(e){if(e.axis)return c.cursors[e.name+e.axis];if(e.edges){for(var t="",i=["top","bottom","left","right"],n=0;n<4;n++)e.edges[i[n]]&&(t+=i[n]);return c.cursors[t]}}};r.signals.on("new",function(e){var t,i,n,o=e.iEvent,e=e.interaction;"resizestart"===o.type&&e.prepared.edges&&(t=e.target.getRect(e.element),(i=e.target.options.resize).square||i.preserveAspectRatio?((n=g.extend({},e.prepared.edges)).top=n.top||n.left&&!n.bottom,n.left=n.left||n.top&&!n.right,n.bottom=n.bottom||n.right&&!n.top,n.right=n.right||n.bottom&&!n.left,e.prepared._linkedEdges=n):e.prepared._linkedEdges=null,i.preserveAspectRatio&&(e.resizeStartAspectRatio=t.width/t.height),e.resizeRects={start:t,current:g.extend({},t),inverted:g.extend({},t),previous:g.extend({},t),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},o.rect=e.resizeRects.inverted,o.deltaRect=e.resizeRects.delta)}),r.signals.on("new",function(e){var t=e.iEvent,i=e.phase,e=e.interaction;if("move"===i&&e.prepared.edges){var n,i=e.target.options.resize,o=i.invert,r="reposition"===o||"negate"===o,s=e.prepared.edges,a=e.resizeRects.start,l=e.resizeRects.current,c=e.resizeRects.inverted,u=e.resizeRects.delta,d=g.extend(e.resizeRects.previous,c),h=s,p=t.dx,f=t.dy;for(n in(i.preserveAspectRatio||i.square)&&(i=i.preserveAspectRatio?e.resizeStartAspectRatio:1,s=e.prepared._linkedEdges,h.left&&h.bottom||h.right&&h.top?f=-p/i:h.left||h.right?f=p/i:(h.top||h.bottom)&&(p=f*i)),s.top&&(l.top+=f),s.bottom&&(l.bottom+=f),s.left&&(l.left+=p),s.right&&(l.right+=p),r?(g.extend(c,l),"reposition"===o&&(h=void 0,c.top>c.bottom&&(h=c.top,c.top=c.bottom,c.bottom=h),c.left>c.right&&(h=c.left,c.left=c.right,c.right=h))):(c.top=Math.min(l.top,a.bottom),c.bottom=Math.max(l.bottom,a.top),c.left=Math.min(l.left,a.right),c.right=Math.max(l.right,a.left)),c.width=c.right-c.left,c.height=c.bottom-c.top,c)u[n]=c[n]-d[n];t.edges=e.prepared.edges,t.rect=c,t.deltaRect=u}}),s.prototype.resizable=function(e){return g.is.object(e)?(this.options.resize.enabled=!1!==e.enabled,this.setPerAction("resize",e),this.setOnEvents("resize",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.resize.axis=e.axis:null===e.axis&&(this.options.resize.axis=l.resize.axis),g.is.bool(e.preserveAspectRatio)?this.options.resize.preserveAspectRatio=e.preserveAspectRatio:g.is.bool(e.square)&&(this.options.resize.square=e.square),this):g.is.bool(e)?((this.options.resize.enabled=e)||(this.onresizestart=this.onresizestart=this.onresizeend=null),this):this.options.resize},a.signals.on("new",function(e){e.resizeAxes="xy"}),r.signals.on("set-delta",function(e){var t=e.interaction,i=e.iEvent;"resize"===e.action&&t.resizeAxes&&(t.target.options.resize.square?("y"===t.resizeAxes?i.dx=i.dy:i.dy=i.dx,i.axes="xy"):(i.axes=t.resizeAxes,"x"===t.resizeAxes?i.dy=0:"y"===t.resizeAxes&&(i.dx=0)))}),n.resize=c,n.names.push("resize"),g.merge(s.eventTypes,["resizestart","resizemove","resizeinertiastart","resizeinertiaresume","resizeend"]),n.methodDict.resize="resizable",l.resize=c.defaults,t.exports=c},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/browser":36,"./base":6}],11:[function(e,t,i){"use strict";var o=e("./utils/raf"),l=e("./utils/window").getWindow,c=e("./utils/is"),u=e("./utils/domUtils"),n=e("./Interaction"),e=e("./defaultOptions"),d={defaults:{enabled:!1,container:null,margin:60,speed:300},interaction:null,i:null,x:0,y:0,isScrolling:!1,prevTime:0,start:function(e){d.isScrolling=!0,o.cancel(d.i),d.interaction=e,d.prevTime=(new Date).getTime(),d.i=o.request(d.scroll)},stop:function(){d.isScrolling=!1,o.cancel(d.i)},scroll:function(){var e=d.interaction.target.options[d.interaction.prepared.name].autoScroll,t=e.container||l(d.interaction.element),i=(new Date).getTime(),n=(i-d.prevTime)/1e3,e=e.speed*n;1<=e&&(c.window(t)?t.scrollBy(d.x*e,d.y*e):t&&(t.scrollLeft+=d.x*e,t.scrollTop+=d.y*e),d.prevTime=i),d.isScrolling&&(o.cancel(d.i),d.i=o.request(d.scroll))},check:function(e,t){e=e.options;return e[t].autoScroll&&e[t].autoScroll.enabled},onInteractionMove:function(e){var t,i,n,o,r,s,a=e.interaction,e=e.pointer;a.interacting()&&d.check(a.target,a.prepared.name)&&(a.simulation?d.x=d.y=0:(n=s=r=o=void 0,i=(t=a.target.options[a.prepared.name].autoScroll).container||l(a.element),s=c.window(i)?(n=e.clientX<d.margin,o=e.clientY<d.margin,r=e.clientX>i.innerWidth-d.margin,e.clientY>i.innerHeight-d.margin):(i=u.getElementClientRect(i),n=e.clientX<i.left+d.margin,o=e.clientY<i.top+d.margin,r=e.clientX>i.right-d.margin,e.clientY>i.bottom-d.margin),d.x=r?1:n?-1:0,d.y=s?1:o?-1:0,d.isScrolling||(d.margin=t.margin,d.speed=t.speed,d.start(a))))}};n.signals.on("stop-active",function(){d.stop()}),n.signals.on("action-move",d.onInteractionMove),e.perAction.autoScroll=d.defaults,t.exports=d},{"./Interaction":5,"./defaultOptions":18,"./utils/domUtils":39,"./utils/is":46,"./utils/raf":50,"./utils/window":52}],12:[function(e,t,i){"use strict";var n=e("../Interactable"),l=e("../actions/base"),o=e("../utils/is"),r=e("../utils/domUtils"),e=e("../utils").warnOnce;n.prototype.getAction=function(e,t,i,n){var o=this.defaultActionChecker(e,t,i,n);return this.options.actionChecker?this.options.actionChecker(e,t,o,this,n,i):o},n.prototype.ignoreFrom=e(function(e){return this._backCompatOption("ignoreFrom",e)},"Interactable.ignoreForm() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),n.prototype.allowFrom=e(function(e){return this._backCompatOption("allowFrom",e)},"Interactable.allowForm() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),n.prototype.testIgnore=function(e,t,i){return!(!e||!o.element(i))&&(o.string(e)?r.matchesUpTo(i,e,t):!!o.element(e)&&r.nodeContains(e,i))},n.prototype.testAllow=function(e,t,i){return!e||!!o.element(i)&&(o.string(e)?r.matchesUpTo(i,e,t):!!o.element(e)&&r.nodeContains(e,i))},n.prototype.testIgnoreAllow=function(e,t,i){return!this.testIgnore(e.ignoreFrom,t,i)&&this.testAllow(e.allowFrom,t,i)},n.prototype.actionChecker=function(e){return o.function(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker},n.prototype.styleCursor=function(e){return o.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},n.prototype.defaultActionChecker=function(e,t,i,n){for(var o=this.getRect(n),r=t.buttons||{0:1,1:4,3:8,4:16}[t.button],s=0;s<l.names.length;s++){var a=l.names[s];if((!i.pointerIsDown||!/mouse|pointer/.test(i.pointerType)||0!=(r&this.options[a].mouseButtons))&&(a=l[a].checker(e,t,this,n,i,o)))return a}}},{"../Interactable":4,"../actions/base":6,"../utils":44,"../utils/domUtils":39,"../utils/is":46}],13:[function(e,t,i){"use strict";var n=e("../interact"),o=e("../Interactable"),r=e("../Interaction"),s=e("../actions/base"),a=e("../defaultOptions"),h=e("../scope"),c=e("../utils"),l=e("../utils/Signals").new(),p=(e("./InteractableMethods"),{signals:l,withinInteractionLimit:g,maxInteractions:1/0,defaults:{perAction:{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}},setActionDefaults:function(e){c.extend(e.defaults,p.defaults.perAction)},validateAction:d});function d(e,t,i,n){return c.is.object(e)&&t.testIgnoreAllow(t.options[e.name],i,n)&&t.options[e.name].enabled&&g(t,i,e)?e:null}function u(e,t,i,n){var o=[],r=[],s=n;function a(e){o.push(e),r.push(s)}for(;c.is.element(s);){o=[],r=[],h.interactables.forEachMatch(s,a);var l=function(e,t,i,n,o,r){for(var s=0,a=n.length;s<a;s++){var l=n[s],c=o[s],u=d(l.getAction(t,i,e,c),l,c,r);if(u)return{action:u,target:l,element:c}}return{}}(e,t,i,o,r,n);if(l.action&&!l.target.options[l.action.name].manualStart)return l;s=c.parentNode(s)}return{}}function f(e,t){var i=t.action,n=t.target,t=t.element,i=i||{};e.target&&e.target.options.styleCursor&&(e.target._doc.documentElement.style.cursor=""),e.target=n,e.element=t,c.copyAction(e.prepared,i),n&&n.options.styleCursor&&(t=i?s[i.name].getCursor(i):"",e.target._doc.documentElement.style.cursor=t),l.fire("prepared",{interaction:e})}function g(e,t,i){var n=e.options,o=n[i.name].max,r=n[i.name].maxPerElement,s=0,a=0,l=0;if(o&&r&&p.maxInteractions){for(var c=0;c<h.interactions.length;c++){var u=h.interactions[c],d=u.prepared.name;if(u.interacting()){if(++s>=p.maxInteractions)return!1;if(u.target===e){if(o<=(a+=d===i.name|0))return!1;if(u.element===t&&(l++,d!==i.name||r<=l))return!1}}}return 0<p.maxInteractions}}r.signals.on("down",function(e){var t=e.interaction,i=e.pointer,n=e.event,e=e.eventTarget;t.interacting()||f(t,u(t,i,n,e))}),r.signals.on("move",function(e){var t=e.interaction,i=e.pointer,n=e.event,e=e.eventTarget;"mouse"!==t.pointerType||t.pointerIsDown||t.interacting()||f(t,u(t,i,n,e))}),r.signals.on("move",function(e){var t=e.interaction,i=e.event;t.pointerIsDown&&!t.interacting()&&t.pointerWasMoved&&t.prepared.name&&(l.fire("before-start",e),e=t.target,t.prepared.name&&e&&(e.options[t.prepared.name].manualStart||!g(e,t.element,t.prepared)?t.stop(i):t.start(t.prepared,e,t.element)))}),r.signals.on("stop",function(e){e=e.interaction.target;e&&e.options.styleCursor&&(e._doc.documentElement.style.cursor="")}),n.maxInteractions=function(e){return c.is.number(e)?(p.maxInteractions=e,n):p.maxInteractions},o.settingsMethods.push("styleCursor"),o.settingsMethods.push("actionChecker"),o.settingsMethods.push("ignoreFrom"),o.settingsMethods.push("allowFrom"),a.base.actionChecker=null,a.base.styleCursor=!0,c.extend(a.perAction,p.defaults.perAction),t.exports=p},{"../Interactable":4,"../Interaction":5,"../actions/base":6,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"../utils/Signals":34,"./InteractableMethods":12}],14:[function(e,t,i){"use strict";var u=e("./base"),d=e("../scope"),h=e("../utils/is"),p=e("../utils/domUtils").parentNode;u.setActionDefaults(e("../actions/drag")),u.signals.on("before-start",function(e){var i=e.interaction,n=e.eventTarget,t=e.dx,e=e.dy;if("drag"===i.prepared.name){var t=Math.abs(t),e=Math.abs(e),o=i.target.options.drag,r=o.startAxis,s=e<t?"x":t<e?"y":"xy";if(i.prepared.axis="start"===o.lockAxis?s[0]:o.lockAxis,"xy"!=s&&"xy"!==r&&r!==s){i.prepared.name=null;for(var a=n,l=function(e){if(e!==i.target){var t=i.target.options.drag;if(!t.manualStart&&e.testIgnoreAllow(t,a,n)){t=e.getAction(i.downPointer,i.downEvent,i,a);if(t&&"drag"===t.name&&function(e,t){if(!t)return;t=t.options.drag.startAxis;return"xy"===e||"xy"===t||t===e}(s,e)&&u.validateAction(t,e,a,n))return e}}};h.element(a);){var c=d.interactables.forEachMatch(a,l);if(c){i.prepared.name="drag",i.target=c,i.element=a;break}a=p(a)}}}})},{"../actions/drag":7,"../scope":33,"../utils/domUtils":39,"../utils/is":46,"./base":13}],15:[function(e,t,i){"use strict";e("./base").setActionDefaults(e("../actions/gesture"))},{"../actions/gesture":9,"./base":13}],16:[function(e,t,i){"use strict";var n=e("./base"),e=e("../Interaction");function o(e){var t=e.prepared&&e.prepared.name;if(!t)return null;e=e.target.options;return e[t].hold||e[t].delay}n.defaults.perAction.hold=0,n.defaults.perAction.delay=0,e.signals.on("new",function(e){e.autoStartHoldTimer=null}),n.signals.on("prepared",function(e){var t=e.interaction,e=o(t);0<e&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.target,t.element)},e))}),e.signals.on("move",function(e){var t=e.interaction,e=e.duplicate;t.pointerWasMoved&&!e&&clearTimeout(t.autoStartHoldTimer)}),n.signals.on("before-start",function(e){e=e.interaction;0<o(e)&&(e.prepared.name=null)}),t.exports={getHoldDuration:o}},{"../Interaction":5,"./base":13}],17:[function(e,t,i){"use strict";e("./base").setActionDefaults(e("../actions/resize"))},{"../actions/resize":10,"./base":13}],18:[function(e,t,i){"use strict";t.exports={base:{accept:null,preventDefault:"auto",deltaSource:"page"},perAction:{origin:{x:0,y:0},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}}}},{}],19:[function(e,t,i){"use strict";e("./inertia"),e("./modifiers/snap"),e("./modifiers/restrict"),e("./pointerEvents/base"),e("./pointerEvents/holdRepeat"),e("./pointerEvents/interactableTargets"),e("./autoStart/hold"),e("./actions/gesture"),e("./actions/resize"),e("./actions/drag"),e("./actions/drop"),e("./modifiers/snapSize"),e("./modifiers/restrictEdges"),e("./modifiers/restrictSize"),e("./autoStart/gesture"),e("./autoStart/resize"),e("./autoStart/drag"),e("./interactablePreventDefault.js"),e("./autoScroll"),t.exports=e("./interact")},{"./actions/drag":7,"./actions/drop":8,"./actions/gesture":9,"./actions/resize":10,"./autoScroll":11,"./autoStart/drag":14,"./autoStart/gesture":15,"./autoStart/hold":16,"./autoStart/resize":17,"./inertia":20,"./interact":21,"./interactablePreventDefault.js":22,"./modifiers/restrict":24,"./modifiers/restrictEdges":25,"./modifiers/restrictSize":26,"./modifiers/snap":27,"./modifiers/snapSize":28,"./pointerEvents/base":30,"./pointerEvents/holdRepeat":31,"./pointerEvents/interactableTargets":32}],20:[function(e,t,i){"use strict";var f=e("./InteractEvent"),a=e("./Interaction"),g=e("./modifiers/base"),m=e("./utils"),v=e("./utils/raf");function n(e){var t,i,n=e.inertiaStatus;n.active&&(t=n.upCoords.page,i=n.upCoords.client,m.setCoords(e.curCoords,[{pageX:t.x+n.sx,pageY:t.y+n.sy,clientX:i.x+n.sx,clientY:i.y+n.sy}]))}a.signals.on("new",function(e){e.inertiaStatus={active:!1,smoothEnd:!1,allowResume:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,lambda_v0:0,one_ve_v0:0,i:null},e.boundInertiaFrame=function(){return function(){n(this),m.setCoordDeltas(this.pointerDelta,this.prevCoords,this.curCoords);var e=this.inertiaStatus,t=this.target.options[this.prepared.name].inertia.resistance,i=(new Date).getTime()/1e3-e.t0;i<e.te?(t=1-(Math.exp(-t*i)-e.lambda_v0)/e.one_ve_v0,e.modifiedXe===e.xe&&e.modifiedYe===e.ye?(e.sx=e.xe*t,e.sy=e.ye*t):(i=m.getQuadraticCurvePoint(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,t),e.sx=i.x,e.sy=i.y),this.doMove(),e.i=v.request(this.boundInertiaFrame)):(e.sx=e.modifiedXe,e.sy=e.modifiedYe,this.doMove(),this.end(e.startEvent),e.active=!1,this.simulation=null);m.copyCoords(this.prevCoords,this.curCoords)}.apply(e)},e.boundSmoothEndFrame=function(){return function(){n(this);var e=this.inertiaStatus,t=(new Date).getTime()-e.t0,i=this.target.options[this.prepared.name].inertia.smoothEndDuration;t<i?(e.sx=m.easeOutQuad(t,0,e.xe,i),e.sy=m.easeOutQuad(t,0,e.ye,i),this.pointerMove(e.startEvent,e.startEvent),e.i=v.request(this.boundSmoothEndFrame)):(e.sx=e.xe,e.sy=e.ye,this.pointerMove(e.startEvent,e.startEvent),this.end(e.startEvent),e.smoothEnd=e.active=!1,this.simulation=null)}.apply(e)}}),a.signals.on("down",function(e){var t=e.interaction,i=e.event,n=e.pointer,e=e.eventTarget,o=t.inertiaStatus;if(o.active)for(var r=e;m.is.element(r);){if(r===t.element){v.cancel(o.i),o.active=!1,t.simulation=null,t.updatePointer(n),m.setCoords(t.curCoords,t.pointers);var s={interaction:t},s=(a.signals.fire("before-action-move",s),a.signals.fire("action-resume",s),new f(t,i,t.prepared.name,"inertiaresume",t.element));t.target.fire(s),t.prevEvent=s,g.resetStatuses(t.modifierStatuses),m.copyCoords(t.prevCoords,t.curCoords);break}r=m.parentNode(r)}}),a.signals.on("up",function(e){var t,i,n,o,r,s,a,l,c,u,d,h=e.interaction,e=e.event,p=h.inertiaStatus;h.interacting()&&!p.active&&(d=(d=(t=h.target)&&t.options)&&h.prepared.name&&d[h.prepared.name].inertia,u=(new Date).getTime(),i={},n=m.extend({},h.curCoords.page),o=h.pointerDelta.client.speed,s=(c=d&&d.enabled&&"gesture"!==h.prepared.name&&e!==p.startEvent)&&u-h.curCoords.timeStamp<50&&o>d.minSpeed&&o>d.endSpeed,a={interaction:h,pageCoords:n,statuses:i,preEnd:!(r=void 0),requireEndOnly:!(l=!1)},c&&!s&&(g.resetStatuses(i),(r=g.setAll(a)).shouldMove&&r.locked&&(l=!0)),(s||l)&&(m.copyCoords(p.upCoords,h.curCoords),h.pointers[0]=p.startEvent=new f(h,e,h.prepared.name,"inertiastart",h.element),p.t0=u,p.active=!0,p.allowResume=d.allowResume,h.simulation=p,t.fire(p.startEvent),s?(p.vx0=h.pointerDelta.client.vx,p.vy0=h.pointerDelta.client.vy,p.v0=o,c=p,e=(l=h).target.options[l.prepared.name].inertia,u=e.resistance,d=-Math.log(e.endSpeed/c.v0)/u,c.x0=l.prevEvent.pageX,c.y0=l.prevEvent.pageY,c.t0=c.startEvent.timeStamp/1e3,c.sx=c.sy=0,c.modifiedXe=c.xe=(c.vx0-d)/u,c.modifiedYe=c.ye=(c.vy0-d)/u,c.te=d,c.lambda_v0=u/c.v0,c.one_ve_v0=1-e.endSpeed/c.v0,m.extend(n,h.curCoords.page),n.x+=p.xe,n.y+=p.ye,g.resetStatuses(i),r=g.setAll(a),p.modifiedXe+=r.dx,p.modifiedYe+=r.dy,p.i=v.request(h.boundInertiaFrame)):(p.smoothEnd=!0,p.xe=r.dx,p.ye=r.dy,p.sx=p.sy=0,p.i=v.request(h.boundSmoothEndFrame))))}),a.signals.on("stop-active",function(e){var e=e.interaction,t=e.inertiaStatus;t.active&&(v.cancel(t.i),t.active=!1,e.simulation=null)})},{"./InteractEvent":3,"./Interaction":5,"./modifiers/base":23,"./utils":44,"./utils/raf":50}],21:[function(e,t,i){"use strict";var n=e("./utils/browser"),a=e("./utils/events"),l=e("./utils"),c=e("./scope"),u=e("./Interactable"),o=e("./Interaction"),d={};function h(e,t){var i=c.interactables.get(e,t);return i||((i=new u(e,t)).events.global=d),i}h.isSet=function(e,t){return-1!==c.interactables.indexOfElement(e,t&&t.context)},h.on=function(e,t,i){if(l.is.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),l.is.array(e)){for(var n=0;n<e.length;n++){var o=e[n];h.on(o,t,i)}return h}if(l.is.object(e)){for(var r in e)h.on(r,e[r],t);return h}return l.contains(u.eventTypes,e)?d[e]?d[e].push(t):d[e]=[t]:a.add(c.document,e,t,{options:i}),h},h.off=function(e,t,i){if(l.is.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),l.is.array(e)){for(var n=0;n<e.length;n++){var o=e[n];h.off(o,t,i)}return h}if(l.is.object(e)){for(var r in e)h.off(r,e[r],t);return h}var s;return l.contains(u.eventTypes,e)?(s=void 0,e in d&&-1!==(s=d[e].indexOf(t))&&d[e].splice(s,1)):a.remove(c.document,e,t,i),h},h.debug=function(){return c},h.getPointerAverage=l.pointerAverage,h.getTouchBBox=l.touchBBox,h.getTouchDistance=l.touchDistance,h.getTouchAngle=l.touchAngle,h.getElementRect=l.getElementRect,h.getElementClientRect=l.getElementClientRect,h.matchesSelector=l.matchesSelector,h.closest=l.closest,h.supportsTouch=function(){return n.supportsTouch},h.supportsPointerEvent=function(){return n.supportsPointerEvent},h.stop=function(e){for(var t=c.interactions.length-1;0<=t;t--)c.interactions[t].stop(e);return h},h.pointerMoveTolerance=function(e){return l.is.number(e)?(o.pointerMoveTolerance=e,h):o.pointerMoveTolerance},h.addDocument=c.addDocument,h.removeDocument=c.removeDocument,c.interact=h,t.exports=h},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils":44,"./utils/browser":36,"./utils/events":40}],22:[function(e,t,i){"use strict";var n=e("./Interactable"),o=e("./Interaction"),r=e("./scope"),s=e("./utils/is"),a=e("./utils/events"),l=e("./utils/browser"),e=e("./utils/domUtils"),c=e.nodeContains,u=e.matchesSelector;function d(e){var t=e.interaction,e=e.event;t.target&&t.target.checkAndPreventDefault(e)}n.prototype.preventDefault=function(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):s.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault},n.prototype.checkAndPreventDefault=function(e){var t=this.options.preventDefault;"never"===t||"always"!==t&&(a.supportsPassive&&/^touch(start|move)$/.test(e.type)&&!l.isIOS||/^(mouse|pointer|touch)*(down|start)/i.test(e.type)||s.element(e.target)&&u(e.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *"))||e.preventDefault()};for(var h=["down","move","up","cancel"],p=0;p<h.length;p++)o.signals.on(h[p],d);o.docEvents.dragstart=function(e){for(var t=0;t<r.interactions.length;t++){var i=r.interactions[t];if(i.element&&(i.element===e.target||c(i.element,e.target)))return void i.target.checkAndPreventDefault(e)}}},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils/browser":36,"./utils/domUtils":39,"./utils/events":40,"./utils/is":46}],23:[function(e,t,i){"use strict";var n=e("../InteractEvent"),o=e("../Interaction"),u=e("../utils/extend"),d={names:[],setOffsets:function(e){var t=e.interaction,i=e.pageCoords,n=t.target,o=t.element,r=t.startOffset,s=n.getRect(o);s?(r.left=i.x-s.left,r.top=i.y-s.top,r.right=s.right-i.x,r.bottom=s.bottom-i.y,"width"in s||(s.width=s.right-s.left),"height"in s||(s.height=s.bottom-s.top)):r.left=r.top=r.right=r.bottom=0,e.rect=s,e.interactable=n,e.element=o;for(var a=0;a<d.names.length;a++){var l=d.names[a];e.options=n.options[t.prepared.name][l],e.options&&(t.modifierOffsets[l]=d[l].setOffset(e))}},setAll:function(e){var t=e.interaction,i=e.statuses,n=e.preEnd,o=e.requireEndOnly,r={dx:0,dy:0,changed:!1,locked:!1,shouldMove:!0};e.modifiedCoords=u({},e.pageCoords);for(var s=0;s<d.names.length;s++){var a=d.names[s],l=d[a],c=t.target.options[t.prepared.name][a];h(c,n,o)&&(e.status=e.status=i[a],e.options=c,e.offset=e.interaction.modifierOffsets[a],l.set(e),e.status.locked&&(e.modifiedCoords.x+=e.status.dx,e.modifiedCoords.y+=e.status.dy,r.dx+=e.status.dx,r.dy+=e.status.dy,r.locked=!0))}return r.shouldMove=!e.status||!r.locked||e.status.changed,r},resetStatuses:function(e){for(var t=0;t<d.names.length;t++){var i=d.names[t],n=e[i]||{};n.dx=n.dy=0,n.modifiedX=n.modifiedY=NaN,n.locked=!1,n.changed=!0,e[i]=n}return e},start:function(e,t){e=e.interaction,t={interaction:e,pageCoords:("action-resume"===t?e.curCoords:e.startCoords).page,startOffset:e.startOffset,statuses:e.modifierStatuses,preEnd:!1,requireEndOnly:!1};d.setOffsets(t),d.resetStatuses(t.statuses),t.pageCoords=u({},e.startCoords.page),e.modifierResult=d.setAll(t)},beforeMove:function(e){var t=e.interaction,i=e.preEnd,e=e.interactingBeforeMove,i=d.setAll({interaction:t,preEnd:i,pageCoords:t.curCoords.page,statuses:t.modifierStatuses,requireEndOnly:!1});!i.shouldMove&&e&&(t._dontFireMove=!0),t.modifierResult=i},end:function(e){for(var t=e.interaction,i=e.event,n=0;n<d.names.length;n++){var o=d.names[n];if(h(t.target.options[t.prepared.name][o],!0,!0)){t.doMove({event:i,preEnd:!0});break}}},setXY:function(e){for(var t=e.iEvent,i=e.interaction,n=u({},e),o=0;o<d.names.length;o++){var r,s=d.names[o];n.options=i.target.options[i.prepared.name][s],n.options&&(r=d[s],n.status=i.modifierStatuses[s],t[s]=r.modifyCoords(n))}}};function h(e,t,i){return e&&e.enabled&&(t||!e.endOnly)&&(!i||e.endOnly)}o.signals.on("new",function(e){e.startOffset={left:0,right:0,top:0,bottom:0},e.modifierOffsets={},e.modifierStatuses=d.resetStatuses({}),e.modifierResult=null}),o.signals.on("action-start",d.start),o.signals.on("action-resume",d.start),o.signals.on("before-action-move",d.beforeMove),o.signals.on("action-end",d.end),n.signals.on("set-xy",d.setXY),t.exports=d},{"../InteractEvent":3,"../Interaction":5,"../utils/extend":41}],24:[function(e,t,i){"use strict";var n=e("./base"),a=e("../utils"),e=e("../defaultOptions"),o={defaults:{enabled:!1,endOnly:!1,restriction:null,elementRect:null},setOffset:function(e){var t=e.rect,i=e.startOffset,e=e.options,e=e&&e.elementRect,n={};return t&&e?(n.left=i.left-t.width*e.left,n.top=i.top-t.height*e.top,n.right=i.right-t.width*(1-e.right),n.bottom=i.bottom-t.height*(1-e.bottom)):n.left=n.top=n.right=n.bottom=0,n},set:function(e){var t=e.modifiedCoords,i=e.interaction,n=e.status,e=e.options;if(!e)return n;t=n.useStatusXY?{x:n.x,y:n.y}:a.extend({},t),e=l(e.restriction,i,t);if(!e)return n;n.dx=0,n.dy=0,n.locked=!1;var o=e,r=t.x,s=t.y,i=i.modifierOffsets.restrict,s="x"in e&&"y"in e?(r=Math.max(Math.min(o.x+o.width-i.right,t.x),o.x+i.left),Math.max(Math.min(o.y+o.height-i.bottom,t.y),o.y+i.top)):(r=Math.max(Math.min(o.right-i.right,t.x),o.left+i.left),Math.max(Math.min(o.bottom-i.bottom,t.y),o.top+i.top));n.dx=r-t.x,n.dy=s-t.y,n.changed=n.modifiedX!==r||n.modifiedY!==s,n.locked=!(!n.dx&&!n.dy),n.modifiedX=r,n.modifiedY=s},modifyCoords:function(e){var t=e.page,i=e.client,n=e.status,o=e.phase,e=e.options,r=e&&e.elementRect;if(e&&e.enabled&&("start"!==o||!r||!n.locked)&&n.locked)return t.x+=n.dx,t.y+=n.dy,i.x+=n.dx,i.y+=n.dy,{dx:n.dx,dy:n.dy}},getRestrictionRect:l};function l(e,t,i){return a.is.function(e)?a.resolveRectLike(e,t.target,t.element,[i.x,i.y,t]):a.resolveRectLike(e,t.target,t.element)}n.restrict=o,n.names.push("restrict"),e.perAction.restrict=o.defaults,t.exports=o},{"../defaultOptions":18,"../utils":44,"./base":23}],25:[function(e,t,i){"use strict";var n=e("./base"),l=e("../utils"),c=e("../utils/rect"),o=e("../defaultOptions"),r=e("../actions/resize"),u=e("./restrict").getRestrictionRect,d={top:1/0,left:1/0,bottom:-1/0,right:-1/0},h={top:-1/0,left:-1/0,bottom:1/0,right:1/0},e={defaults:{enabled:!1,endOnly:!1,min:null,max:null,offset:null},setOffset:function(e){var t=e.interaction,i=e.startOffset,e=e.options;if(!e)return l.extend({},i);e=u(e.offset,t,t.startCoords.page);return e?{top:i.top+e.y,left:i.left+e.x,bottom:i.bottom+e.y,right:i.right+e.x}:i},set:function(e){var t,i,n=e.modifiedCoords,o=e.interaction,r=e.status,s=e.offset,e=e.options,a=o.prepared.linkedEdges||o.prepared.edges;o.interacting()&&a&&(n=r.useStatusXY?{x:r.x,y:r.y}:l.extend({},n),t=c.xywhToTlbr(u(e.inner,o,n))||d,e=c.xywhToTlbr(u(e.outer,o,n))||h,o=n.x,i=n.y,r.dx=0,r.dy=0,r.locked=!1,a.top?i=Math.min(Math.max(e.top+s.top,n.y),t.top+s.top):a.bottom&&(i=Math.max(Math.min(e.bottom-s.bottom,n.y),t.bottom-s.bottom)),a.left?o=Math.min(Math.max(e.left+s.left,n.x),t.left+s.left):a.right&&(o=Math.max(Math.min(e.right-s.right,n.x),t.right-s.right)),r.dx=o-n.x,r.dy=i-n.y,r.changed=r.modifiedX!==o||r.modifiedY!==i,r.locked=!(!r.dx&&!r.dy),r.modifiedX=o,r.modifiedY=i)},modifyCoords:function(e){var t=e.page,i=e.client,n=e.status,o=e.phase,e=e.options;if(e&&e.enabled&&("start"!==o||!n.locked)&&n.locked)return t.x+=n.dx,t.y+=n.dy,i.x+=n.dx,i.y+=n.dy,{dx:n.dx,dy:n.dy}},noInner:d,noOuter:h,getRestrictionRect:u};n.restrictEdges=e,n.names.push("restrictEdges"),o.perAction.restrictEdges=e.defaults,r.defaults.restrictEdges=e.defaults,t.exports=e},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrict":24}],26:[function(e,t,i){"use strict";var n=e("./base"),s=e("./restrictEdges"),a=e("../utils"),l=e("../utils/rect"),o=e("../defaultOptions"),e=e("../actions/resize"),c={width:-1/0,height:-1/0},u={width:1/0,height:1/0},r={defaults:{enabled:!1,endOnly:!1,min:null,max:null},setOffset:function(e){return e.interaction.startOffset},set:function(e){var t,i,n=e.interaction,o=e.options,r=n.prepared.linkedEdges||n.prepared.edges;n.interacting()&&r&&(t=l.xywhToTlbr(n.resizeRects.inverted),i=l.tlbrToXywh(s.getRestrictionRect(o.min,n))||c,n=l.tlbrToXywh(s.getRestrictionRect(o.max,n))||u,e.options={enabled:o.enabled,endOnly:o.endOnly,inner:a.extend({},s.noInner),outer:a.extend({},s.noOuter)},r.top?(e.options.inner.top=t.bottom-i.height,e.options.outer.top=t.bottom-n.height):r.bottom&&(e.options.inner.bottom=t.top+i.height,e.options.outer.bottom=t.top+n.height),r.left?(e.options.inner.left=t.right-i.width,e.options.outer.left=t.right-n.width):r.right&&(e.options.inner.right=t.left+i.width,e.options.outer.right=t.left+n.width),s.set(e))},modifyCoords:s.modifyCoords};n.restrictSize=r,n.names.push("restrictSize"),o.perAction.restrictSize=r.defaults,e.defaults.restrictSize=r.defaults,t.exports=r},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrictEdges":25}],27:[function(e,t,i){"use strict";var n=e("./base"),o=e("../interact"),x=e("../utils"),e=e("../defaultOptions"),r={defaults:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},setOffset:function(e){var t=e.interaction,i=e.interactable,n=e.element,o=e.rect,r=e.startOffset,s=e.options,a=[],e=x.rectToXY(x.resolveRectLike(s.origin))||x.getOriginXY(i,n,t.prepared.name),l=void 0;if(l="startCoords"===(s=s||i.options[t.prepared.name].snap||{}).offset?{x:t.startCoords.page.x-e.x,y:t.startCoords.page.y-e.y}:(e=x.resolveRectLike(s.offset,i,n,[t]),x.rectToXY(e)||{x:0,y:0}),o&&s.relativePoints&&s.relativePoints.length)for(var c=0;c<s.relativePoints.length;c++){var u=s.relativePoints[c],d=u.x,u=u.y;a.push({x:r.left-o.width*d+l.x,y:r.top-o.height*u+l.y})}else a.push(l);return a},set:function(e){for(var t=e.interaction,i=e.modifiedCoords,n=e.status,o=e.options,r=e.offset,s=[],a=void 0,l=void 0,c=void 0,u=(n.useStatusXY?l={x:n.x,y:n.y}:(e=x.getOriginXY(t.target,t.element,t.prepared.name),(l=x.extend({},i)).x-=e.x,l.y-=e.y),n.realX=l.x,n.realY=l.y,o.targets&&o.targets.length,0);u<r.length;u++)for(var d=r[u],h=d.x,p=d.y,f=l.x-h,g=l.y-p,m=0;m<(o.targets||[]).length;m++){var v=(o.targets||[])[m];(a=x.is.function(v)?v(f,g,t):v)&&s.push({x:x.is.number(a.x)?a.x+h:f,y:x.is.number(a.y)?a.y+p:g,range:(x.is.number(a.range)?a:o).range})}for(var y={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0},c=0,b=s.length;c<b;c++){var w=(a=s[c]).range,C=a.x-l.x,_=a.y-l.y,A=x.hypot(C,_),E=A<=w;w===1/0&&y.inRange&&y.range!==1/0&&(E=!1),y.target&&!(E?y.inRange&&w!==1/0?A/w<y.distance/y.range:w===1/0&&y.range!==1/0||A<y.distance:!y.inRange&&A<y.distance)||(y.target=a,y.distance=A,y.range=w,y.inRange=E,y.dx=C,y.dy=_,n.range=w)}i=void 0;y.target?(i=n.modifiedX!==y.target.x||n.modifiedY!==y.target.y,n.modifiedX=y.target.x,n.modifiedY=y.target.y):(i=!0,n.modifiedX=NaN,n.modifiedY=NaN),n.dx=y.dx,n.dy=y.dy,n.changed=i||y.inRange&&!n.locked,n.locked=y.inRange},modifyCoords:function(e){var t=e.page,i=e.client,n=e.status,o=e.phase,e=e.options,r=e&&e.relativePoints;if(e&&e.enabled&&("start"!==o||!r||!r.length))return n.locked&&(t.x+=n.dx,t.y+=n.dy,i.x+=n.dx,i.y+=n.dy),{range:n.range,locked:n.locked,x:n.modifiedX,y:n.modifiedY,realX:n.realX,realY:n.realY,dx:n.dx,dy:n.dy}}};o.createSnapGrid=function(r){return function(e,t){var i=r.limits||{left:-1/0,right:1/0,top:-1/0,bottom:1/0},n=0,o=0,e=(x.is.object(r.offset)&&(n=r.offset.x,o=r.offset.y),Math.round((e-n)/r.x)),t=Math.round((t-o)/r.y);return{x:Math.max(i.left,Math.min(i.right,e*r.x+n)),y:Math.max(i.top,Math.min(i.bottom,t*r.y+o)),range:r.range}}},n.snap=r,n.names.push("snap"),e.perAction.snap=r.defaults,t.exports=r},{"../defaultOptions":18,"../interact":21,"../utils":44,"./base":23}],28:[function(e,t,i){"use strict";var n=e("./base"),u=e("./snap"),o=e("../defaultOptions"),r=e("../actions/resize"),d=e("../utils/"),e={defaults:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null},setOffset:function(e){var t=e.interaction,i=e.options,t=t.prepared.edges;if(t)return e.options={relativePoints:[{x:t.left?0:1,y:t.top?0:1}],origin:{x:0,y:0},offset:"self",range:i.range},t=u.setOffset(e),e.options=i,t},set:function(e){var t=e.interaction,i=e.options,n=e.offset,o=e.modifiedCoords,o=d.extend({},o),r=o.x-n[0].x,s=o.y-n[0].y;e.options=d.extend({},i),e.options.targets=[];for(var a=0;a<(i.targets||[]).length;a++){var l=(i.targets||[])[a],c=void 0;(c=d.is.function(l)?l(r,s,t):l)&&("width"in c&&"height"in c&&(c.x=c.width,c.y=c.height),e.options.targets.push(c))}u.set(e)},modifyCoords:function(e){var t=e.options;e.options=d.extend({},t),e.options.enabled=t.enabled,e.options.relativePoints=[null],u.modifyCoords(e)}};n.snapSize=e,n.names.push("snapSize"),o.perAction.snapSize=e.defaults,r.defaults.snapSize=e.defaults,t.exports=e},{"../actions/resize":10,"../defaultOptions":18,"../utils/":44,"./base":23,"./snap":27}],29:[function(e,t,i){"use strict";var r=e("../utils/pointerUtils");function s(e,t,i,n,o){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");r.pointerExtend(this,i),i!==t&&r.pointerExtend(this,t),this.interaction=o,this.timeStamp=(new Date).getTime(),this.originalEvent=i,this.type=e,this.pointerId=r.getPointerId(t),this.pointerType=r.getPointerType(t),this.target=n,this.currentTarget=null,"tap"===e?(i=o.getPointerIndex(t),this.dt=this.timeStamp-o.downTimes[i],n=this.timeStamp-o.tapTime,this.double=!!(o.prevTap&&"doubletap"!==o.prevTap.type&&o.prevTap.target===this.target&&n<500)):"doubletap"===e&&(this.dt=t.timeStamp-o.tapTime)}t.exports=(s.prototype.subtractOrigin=function(e){var t=e.x,e=e.y;return this.pageX-=t,this.pageY-=e,this.clientX-=t,this.clientY-=e,this},s.prototype.addOrigin=function(e){var t=e.x,e=e.y;return this.pageX+=t,this.pageY+=e,this.clientX+=t,this.clientY+=e,this},s.prototype.preventDefault=function(){this.originalEvent.preventDefault()},s.prototype.stopPropagation=function(){this.propagationStopped=!0},s.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},s)},{"../utils/pointerUtils":49}],30:[function(e,t,i){"use strict";var p=e("./PointerEvent"),n=e("../Interaction"),f=e("../utils"),o=e("../defaultOptions"),g=e("../utils/Signals").new(),r=["down","up","cancel"],s=["down","up","cancel"],e={PointerEvent:p,fire:m,collectEventTargets:v,signals:g,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:["down","move","up","cancel","tap","doubletap","hold"]};function m(e){for(var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget,r=e.type,r=void 0===r?e.pointerEvent.type:r,s=e.targets,a=void 0===s?v(e):s,s=e.pointerEvent,l=void 0===s?new p(r,i,n,o,t):s,e={interaction:t,pointer:i,event:n,eventTarget:o,targets:a,type:r,pointerEvent:l},c=0;c<a.length;c++){var u,d=a[c];for(u in d.props||{})l[u]=d.props[u];var h=f.getOriginXY(d.eventable,d.element);if(l.subtractOrigin(h),l.eventable=d.eventable,l.currentTarget=d.element,d.eventable.fire(l),l.addOrigin(h),l.immediatePropagationStopped||l.propagationStopped&&c+1<a.length&&a[c+1].element!==l.currentTarget)break}return g.fire("fired",e),"tap"===r&&(s=l.double?m({interaction:t,pointer:i,event:n,eventTarget:o,type:"doubletap"}):l,t.prevTap=s,t.tapTime=s.timeStamp),l}function v(e){var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget,e=e.type,r=t.getPointerIndex(i);if("tap"===e&&(t.pointerWasMoved||!t.downTargets[r]||t.downTargets[r]!==o))return[];for(var s=f.getPath(o),a={interaction:t,pointer:i,event:n,eventTarget:o,type:e,path:s,targets:[],element:null},l=0;l<s.length;l++){var c=s[l];a.element=c,g.fire("collect-targets",a)}return"hold"===e&&(a.targets=a.targets.filter(function(e){return e.eventable.options.holdDuration===t.holdTimers[r].duration})),a.targets}n.signals.on("update-pointer-down",function(e){var t=e.interaction,e=e.pointerIndex;t.holdTimers[e]={duration:1/0,timeout:null}}),n.signals.on("remove-pointer",function(e){var t=e.interaction,e=e.pointerIndex;t.holdTimers.splice(e,1)}),n.signals.on("move",function(e){var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget,e=e.duplicateMove,r=t.getPointerIndex(i);e||t.pointerIsDown&&!t.pointerWasMoved||(t.pointerIsDown&&clearTimeout(t.holdTimers[r].timeout),m({interaction:t,pointer:i,event:n,eventTarget:o,type:"move"}))}),n.signals.on("down",function(e){for(var t=e.interaction,i=e.pointer,n=e.event,o=e.eventTarget,e=e.pointerIndex,e=t.holdTimers[e],r=f.getPath(o),s={interaction:t,pointer:i,event:n,eventTarget:o,type:"hold",targets:[],path:r,element:null},a=0;a<r.length;a++){var l=r[a];s.element=l,g.fire("collect-targets",s)}if(s.targets.length){for(var c=1/0,u=0;u<s.targets.length;u++){var d=s.targets[u].eventable.options.holdDuration;d<c&&(c=d)}e.duration=c,e.timeout=setTimeout(function(){m({interaction:t,eventTarget:o,pointer:i,event:n,type:"hold"})},c)}}),n.signals.on("up",function(e){var t=e.interaction,i=e.pointer,n=e.event,e=e.eventTarget;t.pointerWasMoved||m({interaction:t,eventTarget:e,pointer:i,event:n,type:"tap"})});for(var a=["up","cancel"],l=0;l<a.length;l++)n.signals.on(a[l],function(e){var t=e.interaction,e=e.pointerIndex;t.holdTimers[e]&&clearTimeout(t.holdTimers[e].timeout)});for(var c=0;c<r.length;c++)n.signals.on(r[c],function(o){return function(e){var t=e.interaction,i=e.pointer,n=e.event;m({interaction:t,eventTarget:e.eventTarget,pointer:i,event:n,type:o})}}(s[c]));n.signals.on("new",function(e){e.prevTap=null,e.tapTime=0,e.holdTimers=[]}),o.pointerEvents=e.defaults,t.exports=e},{"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/Signals":34,"./PointerEvent":29}],31:[function(e,t,i){"use strict";for(var o=e("./base"),n=e("../Interaction"),r=(o.signals.on("new",a),o.signals.on("fired",l),["move","up","cancel","endall"]),s=0;s<r.length;s++)n.signals.on(r[s],c);function a(e){e=e.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)}function l(e){var t=e.interaction,i=e.pointerEvent,n=e.eventTarget,e=e.targets;"hold"!==i.type||!e.length||(e=e[0].eventable.options.holdRepeatInterval)<=0||(t.holdIntervalHandle=setTimeout(function(){o.fire({interaction:t,eventTarget:n,type:"hold",pointer:i,event:i})},e))}function c(e){e=e.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}o.defaults.holdRepeatInterval=0,o.types.push("holdrepeat"),t.exports={onNew:a,onFired:l,endHoldRepeat:c}},{"../Interaction":5,"./base":30}],32:[function(e,t,i){"use strict";var n=e("./base"),o=e("../Interactable"),a=e("../utils/is"),l=e("../scope"),r=e("../utils/extend"),e=e("../utils/arr").merge,s=(n.signals.on("collect-targets",function(e){var n=e.targets,o=e.element,r=e.type,s=e.eventTarget;l.interactables.forEachMatch(o,function(e){var t=e.events,i=t.options;t[r]&&a.element(o)&&e.testIgnoreAllow(i,o,s)&&n.push({element:o,eventable:t,props:{interactable:e}})})}),o.signals.on("new",function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}}),o.signals.on("set",function(e){var t=e.interactable,e=e.options;r(t.events.options,n.defaults),r(t.events.options,e)}),e(o.eventTypes,n.types),o.prototype.pointerEvents=function(e){return r(this.events.options,e),this},o.prototype._backCompatOption);o.prototype._backCompatOption=function(e,t){var i=s.call(this,e,t);return i===this&&(this.events.options[e]=t),i},o.settingsMethods.push("pointerEvents")},{"../Interactable":4,"../scope":33,"../utils/arr":35,"../utils/extend":41,"../utils/is":46,"./base":30}],33:[function(e,t,i){"use strict";var n=e("./utils"),o=e("./utils/events"),r=e("./utils/Signals").new(),s=e("./utils/window").getWindow,a={signals:r,events:o,utils:n,document:e("./utils/domObjects").document,documents:[],addDocument:function(e,t){if(n.contains(a.documents,e))return!1;t=t||s(e),a.documents.push(e),o.documents.push(e),e!==a.document&&o.add(t,"unload",a.onWindowUnload),r.fire("add-document",{doc:e,win:t})},removeDocument:function(e,t){var i=a.documents.indexOf(e);t=t||s(e),o.remove(t,"unload",a.onWindowUnload),a.documents.splice(i,1),o.documents.splice(i,1),r.fire("remove-document",{win:t,doc:e})},onWindowUnload:function(){a.removeDocument(this.document,this)}};t.exports=a},{"./utils":44,"./utils/Signals":34,"./utils/domObjects":38,"./utils/events":40,"./utils/window":52}],34:[function(e,t,i){"use strict";o.prototype.on=function(e,t){this.listeners[e]?this.listeners[e].push(t):this.listeners[e]=[t]},o.prototype.off=function(e,t){!this.listeners[e]||-1!==(t=this.listeners[e].indexOf(t))&&this.listeners[e].splice(t,1)},o.prototype.fire=function(e,t){var i=this.listeners[e];if(i)for(var n=0;n<i.length;n++)if(!1===(0,i[n])(t,e))return};var n=o;function o(){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.listeners={}}n.new=function(){return new n},t.exports=n},{}],35:[function(e,t,i){"use strict";t.exports={contains:function(e,t){return-1!==e.indexOf(t)},merge:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];e.push(n)}return e}}},{}],36:[function(e,t,i){"use strict";var n=e("./window").window,o=e("./is"),e=e("./domObjects"),r=e.Element,s=n.navigator,o={supportsTouch:!!("ontouchstart"in n||o.function(n.DocumentTouch)&&e.document instanceof n.DocumentTouch),supportsPointerEvent:!!e.PointerEvent,isIOS:/iP(hone|od|ad)/.test(s.platform),isIOS7:/iP(hone|od|ad)/.test(s.platform)&&/OS 7[^\d]/.test(s.appVersion),isIe9:/MSIE 9/.test(s.userAgent),prefixedMatchesSelector:"matches"in r.prototype?"matches":"webkitMatchesSelector"in r.prototype?"webkitMatchesSelector":"mozMatchesSelector"in r.prototype?"mozMatchesSelector":"oMatchesSelector"in r.prototype?"oMatchesSelector":"msMatchesSelector",pEventTypes:e.PointerEvent?e.PointerEvent===n.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,wheelEvent:"onmousewheel"in e.document?"mousewheel":"wheel"};o.isOperaMobile="Opera"===s.appName&&o.supportsTouch&&s.userAgent.match("Presto"),t.exports=o},{"./domObjects":38,"./is":46,"./window":52}],37:[function(e,t,i){"use strict";var o=e("./is");t.exports=function e(t){var i,n={};for(i in t)o.plainObject(t[i])?n[i]=e(t[i]):n[i]=t[i];return n}},{"./is":46}],38:[function(e,t,i){"use strict";var n={},e=e("./window").window;function o(){}n.document=e.document,n.DocumentFragment=e.DocumentFragment||o,n.SVGElement=e.SVGElement||o,n.SVGSVGElement=e.SVGSVGElement||o,n.SVGElementInstance=e.SVGElementInstance||o,n.Element=e.Element||o,n.HTMLElement=e.HTMLElement||n.Element,n.Event=e.Event,n.Touch=e.Touch||o,n.PointerEvent=e.PointerEvent||e.MSPointerEvent,t.exports=n},{"./window":52}],39:[function(e,t,i){"use strict";var n=e("./window"),o=e("./browser"),r=e("./is"),d=e("./domObjects"),s={nodeContains:function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},closest:function(e,t){for(;r.element(e);){if(s.matchesSelector(e,t))return e;e=s.parentNode(e)}return null},parentNode:function(e){var t=e.parentNode;if(r.docFrag(t)){for(;(t=t.host)&&r.docFrag(t););return t}return t},matchesSelector:function(e,t){return n.window!==n.realWindow&&(t=t.replace(/\/deep\//g," ")),e[o.prefixedMatchesSelector](t)},indexOfDeepestElement:function(e){for(var t,i=[],n=[],o=e[0],r=o?0:-1,s=void 0,a=void 0,l=void 0,c=void 0,l=1;l<e.length;l++)if((t=e[l])&&t!==o)if(o){if(t.parentNode!==t.ownerDocument)if(o.parentNode===t.ownerDocument)o=t,r=l;else{if(!i.length)for(s=o;s.parentNode&&s.parentNode!==s.ownerDocument;)i.unshift(s),s=s.parentNode;if(o instanceof d.HTMLElement&&t instanceof d.SVGElement&&!(t instanceof d.SVGSVGElement)){if(t===o.parentNode)continue;s=t.ownerSVGElement}else s=t;for(n=[];s.parentNode!==s.ownerDocument;)n.unshift(s),s=s.parentNode;for(c=0;n[c]&&n[c]===i[c];)c++;for(var u=[n[c-1],n[c],i[c]],a=u[0].lastChild;a;){if(a===u[1]){o=t,r=l,i=[];break}if(a===u[2])break;a=a.previousSibling}}}else o=t,r=l;return r},matchesUpTo:function(e,t,i){for(;r.element(e);){if(s.matchesSelector(e,t))return!0;if((e=s.parentNode(e))===i)return s.matchesSelector(e,t)}return!1},getActualElement:function(e){return e instanceof d.SVGElementInstance?e.correspondingUseElement:e},getScrollXY:function(e){return{x:(e=e||n.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}},getElementClientRect:function(e){e=e instanceof d.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}},getElementRect:function(e){var t=s.getElementClientRect(e);return!o.isIOS7&&t&&(e=s.getScrollXY(n.getWindow(e)),t.left+=e.x,t.right+=e.x,t.top+=e.y,t.bottom+=e.y),t},getPath:function(e){for(var t=[];e;)t.push(e),e=s.parentNode(e);return t},trySelector:function(e){return!!r.string(e)&&(d.document.querySelector(e),!0)}};t.exports=s},{"./browser":36,"./domObjects":38,"./is":46,"./window":52}],40:[function(e,t,i){"use strict";var n,g=e("./is"),m=e("./domUtils"),v=e("./pointerUtils"),y=e("./pointerExtend"),o=e("./window").window,r=e("./arr").contains,c=[],u=[],b={},d=[],h=(n=!1,o.document.createElement("div").addEventListener("test",null,{get capture(){n=!0}}),n);function p(e,t,i,n){var n=A(n),o=c.indexOf(e),o=u[o];o||(o={events:{},typeCount:0},c.push(e),u.push(o)),o.events[t]||(o.events[t]=[],o.typeCount++),r(o.events[t],i)||(e.addEventListener(t,i,h?n:!!n.capture),o.events[t].push(i))}function f(e,t,i,n){var o=A(n),n=c.indexOf(e),r=u[n];if(r&&r.events)if("all"===t)for(t in r.events)r.events.hasOwnProperty(t)&&f(e,t,"all");else{if(r.events[t]){var s=r.events[t].length;if("all"===i){for(var a=0;a<s;a++)f(e,t,r.events[t][a],o);return}for(var l=0;l<s;l++)if(r.events[t][l]===i){e.removeEventListener("on"+t,i,h?o:!!o.capture),r.events[t].splice(l,1);break}r.events[t]&&0===r.events[t].length&&(r.events[t]=null,r.typeCount--)}r.typeCount||(u.splice(n,1),c.splice(n,1))}}function w(e,t){var i=A(t),n={},o=b[e.type],r=v.getEventTargets(e)[0],s=r;for(y(n,e),n.originalEvent=e,n.preventDefault=_;g.element(s);){for(var a=0;a<o.selectors.length;a++){var l=o.selectors[a],c=o.contexts[a];if(m.matchesSelector(s,l)&&m.nodeContains(c,r)&&m.nodeContains(c,s)){var u=o.listeners[a];n.currentTarget=s;for(var d=0;d<u.length;d++){var h=u[d],p=h[0],f=h[1],h=h[2];f===!!i.capture&&h===i.passive&&p(n)}}}s=m.parentNode(s)}}function C(e){return w.call(this,e,!0)}function _(){this.originalEvent.preventDefault()}function A(e){return g.object(e)?e:{capture:e}}t.exports={add:p,remove:f,addDelegate:function(e,t,i,n,o){if(o=A(o),!b[i]){b[i]={selectors:[],contexts:[],listeners:[]};for(var r=0;r<d.length;r++){var s=d[r];p(s,i,w),p(s,i,C,!0)}}for(var a=b[i],l=void 0,l=a.selectors.length-1;0<=l&&(a.selectors[l]!==e||a.contexts[l]!==t);l--);-1===l&&(l=a.selectors.length,a.selectors.push(e),a.contexts.push(t),a.listeners.push([])),a.listeners[l].push([n,!!o.capture,o.passive])},removeDelegate:function(e,t,i,n,o){var r=A(o),s=b[i],a=!1,l=void 0;if(s)for(l=s.selectors.length-1;0<=l;l--)if(s.selectors[l]===e&&s.contexts[l]===t){for(var c=s.listeners[l],u=c.length-1;0<=u;u--){var d=c[u],h=d[0],p=d[1],d=d[2];if(h===n&&p===!!r.capture&&d===r.passive){c.splice(u,1),c.length||(s.selectors.splice(l,1),s.contexts.splice(l,1),s.listeners.splice(l,1),f(t,i,w),f(t,i,C,!0),s.selectors.length||(b[i]=null)),a=!0;break}}if(a)break}},delegateListener:w,delegateUseCapture:C,delegatedEvents:b,documents:d,supportsOptions:h,_elements:c,_targets:u}},{"./arr":35,"./domUtils":39,"./is":46,"./pointerExtend":48,"./pointerUtils":49,"./window":52}],41:[function(e,t,i){"use strict";t.exports=function(e,t){for(var i in t)e[i]=t[i];return e}},{}],42:[function(e,t,i){"use strict";var e=e("./rect"),n=e.resolveRectLike,o=e.rectToXY;t.exports=function(e,t,i){i=e.options[i],i=i&&i.origin||e.options.origin,i=n(i,e,t,[e&&t]);return o(i)||{x:0,y:0}}},{"./rect":51}],43:[function(e,t,i){"use strict";t.exports=function(e,t){return Math.sqrt(e*e+t*t)}},{}],44:[function(e,t,i){"use strict";var n=e("./extend"),o=e("./window"),a={warnOnce:function(e,t){var i=!1;return function(){return i||(o.window.console.warn(t),i=!0),e.apply(this,arguments)}},_getQBezierValue:function(e,t,i,n){var o=1-e;return o*o*t+2*o*e*i+e*e*n},getQuadraticCurvePoint:function(e,t,i,n,o,r,s){return{x:a._getQBezierValue(s,e,i,o),y:a._getQBezierValue(s,t,n,r)}},easeOutQuad:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},copyAction:function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},is:e("./is"),extend:n,hypot:e("./hypot"),getOriginXY:e("./getOriginXY")};n(a,e("./arr")),n(a,e("./domUtils")),n(a,e("./pointerUtils")),n(a,e("./rect")),t.exports=a},{"./arr":35,"./domUtils":39,"./extend":41,"./getOriginXY":42,"./hypot":43,"./is":46,"./pointerUtils":49,"./rect":51,"./window":52}],45:[function(e,t,i){"use strict";var c=e("../scope"),u=e("./index"),a={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e,t,i){for(var n=u.getPointerType(e),o={pointer:e,pointerId:u.getPointerId(e),pointerType:n,eventType:t,eventTarget:i},r=0;r<a.methodOrder.length;r++){var s=a.methodOrder[r],s=a[s](o);if(s)return s}},simulationResume:function(e){var t=e.pointerType,i=e.eventType,n=e.eventTarget;if(!/down|start/i.test(i))return null;for(var o=0;o<c.interactions.length;o++){var r=c.interactions[o],s=n;if(r.simulation&&r.simulation.allowResume&&r.pointerType===t)for(;s;){if(s===r.element)return r;s=u.parentNode(s)}}return null},mouseOrPen:function(e){var t=e.pointerId,i=e.pointerType,n=e.eventType;if("mouse"!==i&&"pen"!==i)return null;for(var o=void 0,r=0;r<c.interactions.length;r++){var s=c.interactions[r];if(s.pointerType===i&&(!s.simulation||u.contains(s.pointerIds,t))){if(s.interacting())return s;o=o||s}}if(o)return o;for(var a=0;a<c.interactions.length;a++){var l=c.interactions[a];if(!(l.pointerType!==i||/down/i.test(n)&&l.simulation))return l}return null},hasPointer:function(e){for(var t=e.pointerId,i=0;i<c.interactions.length;i++){var n=c.interactions[i];if(u.contains(n.pointerIds,t))return n}},idle:function(e){for(var t=e.pointerType,i=0;i<c.interactions.length;i++){var n=c.interactions[i];if(1===n.pointerIds.length){var o=n.target;if(o&&!o.options.gesture.enabled)continue}else if(2<=n.pointerIds.length)continue;if(!n.interacting()&&t===n.pointerType)return n}return null}};t.exports=a},{"../scope":33,"./index":44}],46:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./window"),r=e("./isWindow"),s={array:function(){},window:function(e){return e===o.window||r(e)},docFrag:function(e){return s.object(e)&&11===e.nodeType},object:function(e){return!!e&&"object"===(void 0===e?"undefined":n(e))},function:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},element:function(e){if(!e||"object"!==(void 0===e?"undefined":n(e)))return!1;var t=o.getWindow(e)||o.window;return/object|function/.test(n(t.Element))?e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName},plainObject:function(e){return s.object(e)&&"Object"===e.constructor.name}};s.array=function(e){return s.object(e)&&void 0!==e.length&&s.function(e.splice)},t.exports=s},{"./isWindow":47,"./window":52}],47:[function(e,t,i){"use strict";t.exports=function(e){return!(!e||!e.Window)&&e instanceof e.Window}},{}],48:[function(e,s,t){"use strict";function i(e,t){for(var i in t){var n,o=s.exports.prefixedPropREs,r=!1;for(n in o)if(0===i.indexOf(n)&&o[n].test(i)){r=!0;break}r||"function"==typeof t[i]||(e[i]=t[i])}return e}i.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/},s.exports=i},{}],49:[function(e,t,i){"use strict";var n=e("./hypot"),o=e("./browser"),r=e("./domObjects"),s=e("./domUtils"),a=e("./domObjects"),l=e("./is"),c={copyCoords:function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},setCoordDeltas:function(e,t,i){e.page.x=i.page.x-t.page.x,e.page.y=i.page.y-t.page.y,e.client.x=i.client.x-t.client.x,e.client.y=i.client.y-t.client.y,e.timeStamp=i.timeStamp-t.timeStamp;i=Math.max(e.timeStamp/1e3,.001);e.page.speed=n(e.page.x,e.page.y)/i,e.page.vx=e.page.x/i,e.page.vy=e.page.y/i,e.client.speed=n(e.client.x,e.page.y)/i,e.client.vx=e.client.x/i,e.client.vy=e.client.y/i},isNativePointer:function(e){return e instanceof r.Event||e instanceof r.Touch},getXY:function(e,t,i){return(i=i||{}).x=t[(e=e||"page")+"X"],i.y=t[e+"Y"],i},getPageXY:function(e,t){return t=t||{},o.isOperaMobile&&c.isNativePointer(e)?(c.getXY("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):c.getXY("page",e,t),t},getClientXY:function(e,t){return t=t||{},o.isOperaMobile&&c.isNativePointer(e)?c.getXY("screen",e,t):c.getXY("client",e,t),t},getPointerId:function(e){return l.number(e.pointerId)?e.pointerId:e.identifier},setCoords:function(e,t,i){var t=1<t.length?c.pointerAverage(t):t[0],n={};c.getPageXY(t,n),e.page.x=n.x,e.page.y=n.y,c.getClientXY(t,n),e.client.x=n.x,e.client.y=n.y,e.timeStamp=l.number(i)?i:(new Date).getTime()},pointerExtend:e("./pointerExtend"),getTouchPair:function(e){var t=[];return l.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t},pointerAverage:function(e){for(var t,i={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var o,r=e[n];for(o in i)i[o]+=r[o]}for(t in i)i[t]/=e.length;return i},touchBBox:function(e){var t,i;if(e.length||e.touches&&1<e.touches.length)return e=c.getTouchPair(e),t=Math.min(e[0].pageX,e[1].pageX),i=Math.min(e[0].pageY,e[1].pageY),{x:t,y:i,left:t,top:i,width:Math.max(e[0].pageX,e[1].pageX)-t,height:Math.max(e[0].pageY,e[1].pageY)-i}},touchDistance:function(e,t){var i=t+"X",t=t+"Y",e=c.getTouchPair(e),i=e[0][i]-e[1][i],e=e[0][t]-e[1][t];return n(i,e)},touchAngle:function(e,t,i){var n=i+"X",i=i+"Y",e=c.getTouchPair(e),n=e[1][n]-e[0][n],e=e[1][i]-e[0][i];return 180*Math.atan2(e,n)/Math.PI},getPointerType:function(e){return l.string(e.pointerType)?e.pointerType:l.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type)||e instanceof a.Touch?"touch":"mouse"},getEventTargets:function(e){var t=l.function(e.composedPath)?e.composedPath():e.path;return[s.getActualElement(t?t[0]:e.target),s.getActualElement(e.currentTarget)]}};t.exports=c},{"./browser":36,"./domObjects":38,"./domUtils":39,"./hypot":43,"./is":46,"./pointerExtend":48}],50:[function(e,t,i){"use strict";for(var n=e("./window").window,o=["ms","moz","webkit","o"],r=0,s=void 0,a=void 0,l=0;l<o.length&&!n.requestAnimationFrame;l++)s=n[o[l]+"RequestAnimationFrame"],a=n[o[l]+"CancelAnimationFrame"]||n[o[l]+"CancelRequestAnimationFrame"];t.exports={request:s=s||function(e){var t=(new Date).getTime(),i=Math.max(0,16-(t-r)),n=setTimeout(function(){e(t+i)},i);return r=t+i,n},cancel:a=a||function(e){clearTimeout(e)}}},{"./window":52}],51:[function(e,t,i){"use strict";var n=e("./extend"),o=e("./is"),e=e("./domUtils"),r=e.closest,s=e.parentNode,a=e.getElementRect,l={getStringOptionResult:function(e,t,i){return o.string(e)?"parent"===e?s(i):"self"===e?t.getRect(i):r(i,e):null},resolveRectLike:function(e,t,i,n){return e=l.getStringOptionResult(e,t,i)||e,o.function(e)&&(e=e.apply(null,n)),e=o.element(e)?a(e):e},rectToXY:function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},xywhToTlbr:function(e){return!e||"left"in e&&"top"in e||((e=n({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},tlbrToXywh:function(e){return!e||"x"in e&&"y"in e||((e=n({},e)).x=e.left||0,e.top=e.top||0,e.width=e.width||e.right-e.x,e.height=e.height||e.bottom-e.y),e}};t.exports=l},{"./domUtils":39,"./extend":41,"./is":46}],52:[function(e,t,i){"use strict";var n=t.exports,o=e("./isWindow");function r(e){var t=(n.realWindow=e).document.createTextNode("");t.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(t)===t&&(e=e.wrap(e)),n.window=e}"undefined"==typeof window?(n.window=void 0,n.realWindow=void 0):r(window),n.getWindow=function(e){if(o(e))return e;e=e.ownerDocument||e;return e.defaultView||e.parentWindow||n.window},n.init=r},{"./isWindow":47}]},{},[1])(1)}),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),window):t(jQuery,window)}(function(a,n){"use strict";function e(e){return 0<=function(e,t){for(var i=/^(\d+)\.(\d+)\.(\d+)/,n=i.exec(e)||[],o=i.exec(t)||[],r=1;r<=3;r++){if(+o[r]<+n[r])return 1;if(+n[r]<+o[r])return-1}return 0}(a.fn.jquery,e)}a.migrateVersion="3.3.2",n.console&&n.console.log&&(a&&e("3.0.0")||n.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),a.migrateWarnings&&n.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),n.console.log("JQMIGRATE: Migrate is installed"+(a.migrateMute?"":" with logging active")+", version "+a.migrateVersion));var i={};function l(e){var t=n.console;a.migrateDeduplicateWarnings&&i[e]||(i[e]=!0,a.migrateWarnings.push(e),t&&t.warn&&!a.migrateMute&&(t.warn("JQMIGRATE: "+e),a.migrateTrace&&t.trace&&t.trace()))}function t(e,t,i,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return l(n),i},set:function(e){l(n),i=e}})}function o(e,t,i,n){e[t]=function(){return l(n),i.apply(this,arguments)}}a.migrateDeduplicateWarnings=!0,a.migrateWarnings=[],void 0===a.migrateTrace&&(a.migrateTrace=!0),a.migrateReset=function(){i={},a.migrateWarnings.length=0},"BackCompat"===n.document.compatMode&&l("jQuery is not compatible with Quirks Mode");var r,s,c,u={},d=a.fn.init,h=a.find,p=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,f=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;for(r in a.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(l("jQuery( '#' ) is not a valid selector"),t[0]=[]),d.apply(this,t)},a.fn.init.prototype=a.fn,a.find=function(t){var i=Array.prototype.slice.call(arguments);if("string"==typeof t&&p.test(t))try{n.document.querySelector(t)}catch(e){t=t.replace(f,function(e,t,i,n){return"["+t+i+'"'+n+'"]'});try{n.document.querySelector(t),l("Attribute selector with '#' must be quoted: "+i[0]),i[0]=t}catch(e){l("Attribute selector with '#' was not fixed: "+i[0])}}return h.apply(this,i)},h)Object.prototype.hasOwnProperty.call(h,r)&&(a.find[r]=h[r]);o(a.fn,"size",function(){return this.length},"jQuery.fn.size() is deprecated and removed; use the .length property"),o(a,"parseJSON",function(){return JSON.parse.apply(null,arguments)},"jQuery.parseJSON is deprecated; use JSON.parse"),o(a,"holdReady",a.holdReady,"jQuery.holdReady is deprecated"),o(a,"unique",a.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),t(a.expr,"filters",a.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),t(a.expr,":",a.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),e("3.1.1")&&o(a,"trim",function(e){return null==e?"":(e+"").replace(g,"")},"jQuery.trim is deprecated; use String.prototype.trim"),e("3.2.0")&&(o(a,"nodeName",function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"jQuery.nodeName is deprecated"),o(a,"isArray",Array.isArray,"jQuery.isArray is deprecated; use Array.isArray")),e("3.3.0")&&(o(a,"isNumeric",function(e){var t=typeof e;return("number"==t||"string"==t)&&!isNaN(e-parseFloat(e))},"jQuery.isNumeric() is deprecated"),a.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()}),o(a,"type",function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[Object.prototype.toString.call(e)]||"object":typeof e},"jQuery.type is deprecated"),o(a,"isFunction",function(e){return"function"==typeof e},"jQuery.isFunction() is deprecated"),o(a,"isWindow",function(e){return null!=e&&e===e.window},"jQuery.isWindow() is deprecated")),a.ajax&&(s=a.ajax,c=/(=)\?(?=&|$)|\?\?/,a.ajax=function(){var e=s.apply(this,arguments);return e.promise&&(o(e,"success",e.done,"jQXHR.success is deprecated and removed"),o(e,"error",e.fail,"jQXHR.error is deprecated and removed"),o(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e},e("4.0.0")||a.ajaxPrefilter("+json",function(e){!1!==e.jsonp&&(c.test(e.url)||"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&c.test(e.data))&&l("JSON-to-JSONP auto-promotion is deprecated")}));var m=a.fn.removeAttr,v=a.fn.toggleClass,y=/\S+/g;function b(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}a.fn.removeAttr=function(e){var i=this;return a.each(e.match(y),function(e,t){a.expr.match.bool.test(t)&&(l("jQuery.fn.removeAttr no longer sets boolean properties: "+t),i.prop(t,!1))}),m.apply(this,arguments)};var w,C=!(a.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?v.apply(this,arguments):(l("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var e=this.getAttribute&&this.getAttribute("class")||"";e&&a.data(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==t&&a.data(this,"__className__")||"")}))}),_=/^[a-z]/,A=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;a.swap&&a.each(["height","width","reliableMarginRight"],function(e,t){var i=a.cssHooks[t]&&a.cssHooks[t].get;i&&(a.cssHooks[t].get=function(){var e;return C=!0,e=i.apply(this,arguments),C=!1,e})}),a.swap=function(e,t,i,n){var o,r={};for(o in C||l("jQuery.swap() is undocumented and deprecated"),t)r[o]=e.style[o],e.style[o]=t[o];for(o in i=i.apply(e,n||[]),t)e.style[o]=r[o];return i},e("3.4.0")&&"undefined"!=typeof Proxy&&(a.cssProps=new Proxy(a.cssProps||{},{set:function(){return l("JQMIGRATE: jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),a.cssNumber||(a.cssNumber={}),w=a.fn.css,a.fn.css=function(e,t){var i,n=this;return e&&"object"==typeof e&&!Array.isArray(e)?(a.each(e,function(e,t){a.fn.css.call(n,e,t)}),this):("number"==typeof t&&(t=b(e),_.test(i=t)&&A.test(i[0].toUpperCase()+i.slice(1))||a.cssNumber[t]||l('Number-typed values are deprecated for jQuery.fn.css( "'+e+'", value )')),w.apply(this,arguments))};var E,x,S,T,k=a.data,D=(a.data=function(e,t,i){var n,o,r;if(t&&"object"==typeof t&&2===arguments.length){for(r in n=a.hasData(e)&&k.call(this,e),o={},t)r!==b(r)?(l("jQuery.data() always sets/gets camelCased names: "+r),n[r]=t[r]):o[r]=t[r];return k.call(this,e,o),t}return t&&"string"==typeof t&&t!==b(t)&&(n=a.hasData(e)&&k.call(this,e))&&t in n?(l("jQuery.data() always sets/gets camelCased names: "+t),2<arguments.length&&(n[t]=i),n[t]):k.apply(this,arguments)},a.fx&&(S=a.Tween.prototype.run,T=function(e){return e},a.Tween.prototype.run=function(){1<a.easing[this.easing].length&&(l("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),a.easing[this.easing]=T),S.apply(this,arguments)},E=a.fx.interval||13,x="jQuery.fx.interval is deprecated",n.requestAnimationFrame&&Object.defineProperty(a.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return n.document.hidden||l(x),E},set:function(e){l(x),E=e}})),a.fn.load),$=a.event.add,I=a.event.fix;function R(e){var t=n.document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body&&t.body.innerHTML}function O(e){var t=e.replace(F,"<$1></$2>");t!==e&&R(e)!==R(t)&&l("HTML tags must be properly nested and closed: "+e)}a.event.props=[],a.event.fixHooks={},t(a.event.props,"concat",a.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),a.event.fix=function(e){var t=e.type,i=this.fixHooks[t],n=a.event.props;if(n.length)for(l("jQuery.event.props are deprecated and removed: "+n.join());n.length;)a.event.addProp(n.pop());if(i&&!i._migrated_&&(i._migrated_=!0,l("jQuery.event.fixHooks are deprecated and removed: "+t),(n=i.props)&&n.length))for(;n.length;)a.event.addProp(n.pop());return t=I.call(this,e),i&&i.filter?i.filter(t,e):t},a.event.add=function(e,t){return e===n&&"load"===t&&"complete"===n.document.readyState&&l("jQuery(window).on('load'...) called after load event occurred"),$.apply(this,arguments)},a.each(["load","unload","error"],function(e,t){a.fn[t]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===t&&"string"==typeof e[0]?D.apply(this,e):(l("jQuery.fn."+t+"() is deprecated"),e.splice(0,0,t),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}}),a.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){a.fn[i]=function(e,t){return l("jQuery.fn."+i+"() event shorthand is deprecated"),0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),a(function(){a(n.document).triggerHandler("ready")}),a.event.special.ready={setup:function(){this===n.document&&l("'ready' event is deprecated")}},a.fn.extend({bind:function(e,t,i){return l("jQuery.fn.bind() is deprecated"),this.on(e,null,t,i)},unbind:function(e,t){return l("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,i,n){return l("jQuery.fn.delegate() is deprecated"),this.on(t,e,i,n)},undelegate:function(e,t,i){return l("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return l("jQuery.fn.hover() is deprecated"),this.on("mouseenter",e).on("mouseleave",t||e)}});var F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,P=a.htmlPrefilter;a.UNSAFE_restoreLegacyHtmlPrefilter=function(){a.htmlPrefilter=function(e){return O(e),e.replace(F,"<$1></$2>")}},a.htmlPrefilter=function(e){return O(e),P(e)};var L,G=a.fn.offset;a.fn.offset=function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?G.apply(this,arguments):(l("jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},a.ajax&&(L=a.param,a.param=function(e,t){var i=a.ajaxSettings&&a.ajaxSettings.traditional;return void 0===t&&i&&(l("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),t=i),L.call(this,e,t)});var M,N,B=a.fn.andSelf||a.fn.addBack;return a.fn.andSelf=function(){return l("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),B.apply(this,arguments)},a.Deferred&&(M=a.Deferred,N=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]],a.Deferred=function(e){var r=M(),s=r.promise();return r.pipe=s.pipe=function(){var o=arguments;return l("deferred.pipe() is deprecated"),a.Deferred(function(n){a.each(N,function(e,t){var i="function"==typeof o[e]&&o[e];r[t[1]](function(){var e=i&&i.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+"With"](this===s?n.promise():this,i?[e]:arguments)})}),o=null}).promise()},e&&e.call(r,r),r},a.Deferred.exceptionHook=M.exceptionHook),a});